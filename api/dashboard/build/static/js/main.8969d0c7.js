/*! For license information please see main.8969d0c7.js.LICENSE.txt */
(()=>{var e={14:e=>{e.exports=function(){return!1}},61:e=>{e.exports=function(e,t){return e<t}},143:e=>{var t=/\s/;e.exports=function(e){for(var r=e.length;r--&&t.test(e.charAt(r)););return r}},149:e=>{e.exports=function(e,t){for(var r=-1,n=null==e?0:e.length,a=Array(n);++r<n;)a[r]=t(e[r],r,e);return a}},219:(e,t,r)=>{"use strict";var n=r(3763),a={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},s={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},i={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},o={};function l(e){return n.isMemo(e)?i:o[e.$$typeof]||a}o[n.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},o[n.Memo]=i;var c=Object.defineProperty,d=Object.getOwnPropertyNames,u=Object.getOwnPropertySymbols,p=Object.getOwnPropertyDescriptor,m=Object.getPrototypeOf,h=Object.prototype;e.exports=function e(t,r,n){if("string"!==typeof r){if(h){var a=m(r);a&&a!==h&&e(t,a,n)}var i=d(r);u&&(i=i.concat(u(r)));for(var o=l(t),f=l(r),g=0;g<i.length;++g){var x=i[g];if(!s[x]&&(!n||!n[x])&&(!f||!f[x])&&(!o||!o[x])){var y=p(r,x);try{c(t,x,y)}catch(v){}}}}return t}},320:e=>{e.exports=function(e,t){var r=e.length;for(e.sort(t);r--;)e[r]=e[r].value;return e}},396:e=>{e.exports=function(e){return function(t){return null==t?void 0:t[e]}}},438:(e,t,r)=>{var n=r(2622);e.exports=function(e){return n(this,e).get(e)}},539:(e,t,r)=>{var n=r(9742),a=r(7498),s=r(3279);e.exports=function(e){return e&&e.length?n(e,s,a):void 0}},579:(e,t,r)=>{"use strict";e.exports=r(1153)},620:(e,t,r)=>{var n=r(6913),a=r(4052),s=r(2761);e.exports=function(e){return"string"==typeof e||!a(e)&&s(e)&&"[object String]"==n(e)}},643:(e,t,r)=>{var n=r(7676)("toUpperCase");e.exports=n},644:e=>{e.exports=function(e){return e!==e}},705:e=>{e.exports=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}},715:e=>{var t="\\ud800-\\udfff",r="["+t+"]",n="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",a="\\ud83c[\\udffb-\\udfff]",s="[^"+t+"]",i="(?:\\ud83c[\\udde6-\\uddff]){2}",o="[\\ud800-\\udbff][\\udc00-\\udfff]",l="(?:"+n+"|"+a+")"+"?",c="[\\ufe0e\\ufe0f]?",d=c+l+("(?:\\u200d(?:"+[s,i,o].join("|")+")"+c+l+")*"),u="(?:"+[s+n+"?",n,i,o,r].join("|")+")",p=RegExp(a+"(?="+a+")|"+u+d,"g");e.exports=function(e){return e.match(p)||[]}},755:(e,t,r)=>{var n=r(8895),a=r(7116);e.exports=function e(t,r,s,i,o){var l=-1,c=t.length;for(s||(s=a),o||(o=[]);++l<c;){var d=t[l];r>0&&s(d)?r>1?e(d,r-1,s,i,o):n(o,d):i||(o[o.length]=d)}return o}},793:e=>{e.exports=function(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}},801:(e,t,r)=>{var n=r(1141),a=r(6686),s=r(9841),i=/^[-+]0x[0-9a-f]+$/i,o=/^0b[01]+$/i,l=/^0o[0-7]+$/i,c=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(s(e))return NaN;if(a(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=a(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=n(e);var r=o.test(e);return r||l.test(e)?c(e.slice(2),r?2:8):i.test(e)?NaN:+e}},914:(e,t,r)=>{var n=r(9841);e.exports=function(e){if("string"==typeof e||n(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}},929:(e,t,r)=>{var n=r(3211),a=r(6571),s=r(9194),i=r(6686);e.exports=function(e,t,r){if(!i(r))return!1;var o=typeof t;return!!("number"==o?a(r)&&s(t,r.length):"string"==o&&t in r)&&n(r[t],e)}},977:(e,t,r)=>{var n=r(9096),a=r(4416);e.exports=function(e,t){return e&&e.length?a(e,n(t,2)):[]}},1069:(e,t,r)=>{var n=r(8541);e.exports=function(e){return null==e?"":n(e)}},1141:(e,t,r)=>{var n=r(143),a=/^\s+/;e.exports=function(e){return e?e.slice(0,n(e)+1).replace(a,""):e}},1143:(e,t,r)=>{var n=r(3028)(Object.keys,Object);e.exports=n},1153:(e,t,r)=>{"use strict";var n=r(5043),a=Symbol.for("react.element"),s=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,o=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,r){var n,s={},c=null,d=null;for(n in void 0!==r&&(c=""+r),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(d=t.ref),t)i.call(t,n)&&!l.hasOwnProperty(n)&&(s[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps)void 0===s[n]&&(s[n]=t[n]);return{$$typeof:a,type:e,key:c,ref:d,props:s,_owner:o.current}}t.Fragment=s,t.jsx=c,t.jsxs=c},1170:e=>{e.exports=function(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}},1268:(e,t,r)=>{var n=r(5428),a=r(7574),s=r(6832),i=s&&s.isTypedArray,o=i?a(i):n;e.exports=o},1310:e=>{e.exports=function(e,t){return function(r){return null!=r&&(r[e]===t&&(void 0!==t||e in Object(r)))}}},1340:(e,t,r)=>{var n=r(3211);e.exports=function(e,t){for(var r=e.length;r--;)if(n(e[r][0],t))return r;return-1}},1497:(e,t,r)=>{"use strict";var n=r(3218);function a(){}function s(){}s.resetWarningCache=a,e.exports=function(){function e(e,t,r,a,s,i){if(i!==n){var o=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw o.name="Invariant Violation",o}}function t(){return e}e.isRequired=e;var r={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:s,resetWarningCache:a};return r.PropTypes=r,r}},1558:e=>{e.exports=function(e,t,r){for(var n=-1,a=null==e?0:e.length;++n<a;)if(r(t,e[n]))return!0;return!1}},1629:(e,t,r)=>{var n=r(6913),a=r(6686);e.exports=function(e){if(!a(e))return!1;var t=n(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}},1714:(e,t,r)=>{var n=r(1340);e.exports=function(e,t){var r=this.__data__,a=n(r,e);return a<0?(++this.size,r.push([e,t])):r[a][1]=t,this}},1733:(e,t,r)=>{var n=r(1775),a=r(4664),s=r(9096);e.exports=function(e,t){var r={};return t=s(t,3),a(e,function(e,a,s){n(r,a,t(e,a,s))}),r}},1775:(e,t,r)=>{var n=r(5654);e.exports=function(e,t,r){"__proto__"==t&&n?n(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}},1946:(e,t,r)=>{var n=r(1340);e.exports=function(e){return n(this.__data__,e)>-1}},2070:(e,t,r)=>{var n=r(7937)(r(6552),"Set");e.exports=n},2074:e=>{e.exports=function(e){var t=-1,r=Array(e.size);return e.forEach(function(e){r[++t]=e}),r}},2086:(e,t,r)=>{"use strict";e.exports=r(5082)},2154:(e,t,r)=>{var n=r(5575),a=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;if(n){var r=t[e];return"__lodash_hash_undefined__"===r?void 0:r}return a.call(t,e)?t[e]:void 0}},2165:(e,t,r)=>{var n=r(5652);e.exports=function(e,t){var r;return n(e,function(e,n,a){return!(r=t(e,n,a))}),!!r}},2322:(e,t,r)=>{var n=r(6913),a=r(5990),s=r(2761),i=Function.prototype,o=Object.prototype,l=i.toString,c=o.hasOwnProperty,d=l.call(Object);e.exports=function(e){if(!s(e)||"[object Object]"!=n(e))return!1;var t=a(e);if(null===t)return!0;var r=c.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&l.call(r)==d}},2520:(e,t,r)=>{var n=r(5816),a=r(9096),s=r(9140),i=Math.max;e.exports=function(e,t,r){var o=null==e?0:e.length;if(!o)return-1;var l=null==r?0:s(r);return l<0&&(l=i(o+l,0)),n(e,a(t,3),l)}},2536:(e,t,r)=>{var n=r(149),a=r(2969),s=r(9096),i=r(8883),o=r(320),l=r(7574),c=r(5893),d=r(3279),u=r(4052);e.exports=function(e,t,r){t=t.length?n(t,function(e){return u(e)?function(t){return a(t,1===e.length?e[0]:e)}:e}):[d];var p=-1;t=n(t,l(s));var m=i(e,function(e,r,a){return{criteria:n(t,function(t){return t(e)}),index:++p,value:e}});return o(m,function(e,t){return c(e,t,r)})}},2541:e=>{e.exports=function(e){return function(){return e}}},2587:e=>{e.exports=function(e,t){for(var r=-1,n=null==e?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}},2597:(e,t,r)=>{var n=r(4052),a=r(9841),s=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,i=/^\w*$/;e.exports=function(e,t){if(n(e))return!1;var r=typeof e;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=e&&!a(e))||(i.test(e)||!s.test(e)||null!=t&&e in Object(t))}},2622:(e,t,r)=>{var n=r(705);e.exports=function(e,t){var r=e.__data__;return n(t)?r["string"==typeof t?"string":"hash"]:r.map}},2662:(e,t,r)=>{var n=r(5575);e.exports=function(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=n&&void 0===t?"__lodash_hash_undefined__":t,this}},2730:(e,t,r)=>{"use strict";var n=r(5043),a=r(8853);function s(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,o={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(o[e]=t,e=0;e<t.length;e++)i.add(t[e])}var d=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),u=Object.prototype.hasOwnProperty,p=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,m={},h={};function f(e,t,r,n,a,s,i){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=n,this.attributeNamespace=a,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=i}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){g[e]=new f(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];g[t]=new f(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){g[e]=new f(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){g[e]=new f(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){g[e]=new f(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){g[e]=new f(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){g[e]=new f(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){g[e]=new f(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){g[e]=new f(e,5,!1,e.toLowerCase(),null,!1,!1)});var x=/[\-:]([a-z])/g;function y(e){return e[1].toUpperCase()}function v(e,t,r,n){var a=g.hasOwnProperty(t)?g[t]:null;(null!==a?0!==a.type:n||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,r,n){if(null===t||"undefined"===typeof t||function(e,t,r,n){if(null!==r&&0===r.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!n&&(null!==r?!r.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,r,n))return!0;if(n)return!1;if(null!==r)switch(r.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,r,a,n)&&(r=null),n||null===a?function(e){return!!u.call(h,e)||!u.call(m,e)&&(p.test(e)?h[e]=!0:(m[e]=!0,!1))}(t)&&(null===r?e.removeAttribute(t):e.setAttribute(t,""+r)):a.mustUseProperty?e[a.propertyName]=null===r?3!==a.type&&"":r:(t=a.attributeName,n=a.attributeNamespace,null===r?e.removeAttribute(t):(r=3===(a=a.type)||4===a&&!0===r?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(x,y);g[t]=new f(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(x,y);g[t]=new f(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(x,y);g[t]=new f(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){g[e]=new f(e,1,!1,e.toLowerCase(),null,!1,!1)}),g.xlinkHref=new f("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){g[e]=new f(e,1,!1,e.toLowerCase(),null,!0,!0)});var b=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,j=Symbol.for("react.element"),w=Symbol.for("react.portal"),N=Symbol.for("react.fragment"),k=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),_=Symbol.for("react.provider"),C=Symbol.for("react.context"),A=Symbol.for("react.forward_ref"),O=Symbol.for("react.suspense"),P=Symbol.for("react.suspense_list"),E=Symbol.for("react.memo"),T=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var I=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var M=Symbol.iterator;function D(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=M&&e[M]||e["@@iterator"])?e:null}var R,F=Object.assign;function L(e){if(void 0===R)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);R=t&&t[1]||""}return"\n"+R+e}var B=!1;function U(e,t){if(!e||B)return"";B=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var n=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){n=c}e.call(t.prototype)}else{try{throw Error()}catch(c){n=c}e()}}catch(c){if(c&&n&&"string"===typeof c.stack){for(var a=c.stack.split("\n"),s=n.stack.split("\n"),i=a.length-1,o=s.length-1;1<=i&&0<=o&&a[i]!==s[o];)o--;for(;1<=i&&0<=o;i--,o--)if(a[i]!==s[o]){if(1!==i||1!==o)do{if(i--,0>--o||a[i]!==s[o]){var l="\n"+a[i].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=i&&0<=o);break}}}finally{B=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?L(e):""}function z(e){switch(e.tag){case 5:return L(e.type);case 16:return L("Lazy");case 13:return L("Suspense");case 19:return L("SuspenseList");case 0:case 2:case 15:return e=U(e.type,!1);case 11:return e=U(e.type.render,!1);case 1:return e=U(e.type,!0);default:return""}}function q(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case N:return"Fragment";case w:return"Portal";case S:return"Profiler";case k:return"StrictMode";case O:return"Suspense";case P:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case C:return(e.displayName||"Context")+".Consumer";case _:return(e._context.displayName||"Context")+".Provider";case A:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case E:return null!==(t=e.displayName||null)?t:q(e.type)||"Memo";case T:t=e._payload,e=e._init;try{return q(e(t))}catch(r){}}return null}function W(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return q(t);case 8:return t===k?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function V(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function G(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function H(e){e._valueTracker||(e._valueTracker=function(e){var t=G(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof r&&"function"===typeof r.get&&"function"===typeof r.set){var a=r.get,s=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(e){n=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(e){n=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function K(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=G(e)?e.checked?"true":"false":e.value),(e=n)!==r&&(t.setValue(e),!0)}function Y(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function J(e,t){var r=t.checked;return F({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=r?r:e._wrapperState.initialChecked})}function X(e,t){var r=null==t.defaultValue?"":t.defaultValue,n=null!=t.checked?t.checked:t.defaultChecked;r=V(null!=t.value?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function $(e,t){null!=(t=t.checked)&&v(e,"checked",t,!1)}function Q(e,t){$(e,t);var r=V(t.value),n=t.type;if(null!=r)"number"===n?(0===r&&""===e.value||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if("submit"===n||"reset"===n)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,r):t.hasOwnProperty("defaultValue")&&ee(e,t.type,V(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!("submit"!==n&&"reset"!==n||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}""!==(r=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==r&&(e.name=r)}function ee(e,t,r){"number"===t&&Y(e.ownerDocument)===e||(null==r?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var te=Array.isArray;function re(e,t,r,n){if(e=e.options,t){t={};for(var a=0;a<r.length;a++)t["$"+r[a]]=!0;for(r=0;r<e.length;r++)a=t.hasOwnProperty("$"+e[r].value),e[r].selected!==a&&(e[r].selected=a),a&&n&&(e[r].defaultSelected=!0)}else{for(r=""+V(r),t=null,a=0;a<e.length;a++){if(e[a].value===r)return e[a].selected=!0,void(n&&(e[a].defaultSelected=!0));null!==t||e[a].disabled||(t=e[a])}null!==t&&(t.selected=!0)}}function ne(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(s(91));return F({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ae(e,t){var r=t.value;if(null==r){if(r=t.children,t=t.defaultValue,null!=r){if(null!=t)throw Error(s(92));if(te(r)){if(1<r.length)throw Error(s(93));r=r[0]}t=r}null==t&&(t=""),r=t}e._wrapperState={initialValue:V(r)}}function se(e,t){var r=V(t.value),n=V(t.defaultValue);null!=r&&((r=""+r)!==e.value&&(e.value=r),null==t.defaultValue&&e.defaultValue!==r&&(e.defaultValue=r)),null!=n&&(e.defaultValue=""+n)}function ie(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function oe(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?oe(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,de,ue=(de=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,r,n){MSApp.execUnsafeLocalFunction(function(){return de(e,t)})}:de);function pe(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&3===r.nodeType)return void(r.nodeValue=t)}e.textContent=t}var me={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},he=["Webkit","ms","Moz","O"];function fe(e,t,r){return null==t||"boolean"===typeof t||""===t?"":r||"number"!==typeof t||0===t||me.hasOwnProperty(e)&&me[e]?(""+t).trim():t+"px"}function ge(e,t){for(var r in e=e.style,t)if(t.hasOwnProperty(r)){var n=0===r.indexOf("--"),a=fe(r,t[r],n);"float"===r&&(r="cssFloat"),n?e.setProperty(r,a):e[r]=a}}Object.keys(me).forEach(function(e){he.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),me[t]=me[e]})});var xe=F({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ye(e,t){if(t){if(xe[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(s(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(s(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(s(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(s(62))}}function ve(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var be=null;function je(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var we=null,Ne=null,ke=null;function Se(e){if(e=va(e)){if("function"!==typeof we)throw Error(s(280));var t=e.stateNode;t&&(t=ja(t),we(e.stateNode,e.type,t))}}function _e(e){Ne?ke?ke.push(e):ke=[e]:Ne=e}function Ce(){if(Ne){var e=Ne,t=ke;if(ke=Ne=null,Se(e),t)for(e=0;e<t.length;e++)Se(t[e])}}function Ae(e,t){return e(t)}function Oe(){}var Pe=!1;function Ee(e,t,r){if(Pe)return e(t,r);Pe=!0;try{return Ae(e,t,r)}finally{Pe=!1,(null!==Ne||null!==ke)&&(Oe(),Ce())}}function Te(e,t){var r=e.stateNode;if(null===r)return null;var n=ja(r);if(null===n)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(n=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!n;break e;default:e=!1}if(e)return null;if(r&&"function"!==typeof r)throw Error(s(231,t,typeof r));return r}var Ie=!1;if(d)try{var Me={};Object.defineProperty(Me,"passive",{get:function(){Ie=!0}}),window.addEventListener("test",Me,Me),window.removeEventListener("test",Me,Me)}catch(de){Ie=!1}function De(e,t,r,n,a,s,i,o,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(r,c)}catch(d){this.onError(d)}}var Re=!1,Fe=null,Le=!1,Be=null,Ue={onError:function(e){Re=!0,Fe=e}};function ze(e,t,r,n,a,s,i,o,l){Re=!1,Fe=null,De.apply(Ue,arguments)}function qe(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(r=t.return),e=t.return}while(e)}return 3===t.tag?r:null}function We(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Ve(e){if(qe(e)!==e)throw Error(s(188))}function Ge(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=qe(e)))throw Error(s(188));return t!==e?null:e}for(var r=e,n=t;;){var a=r.return;if(null===a)break;var i=a.alternate;if(null===i){if(null!==(n=a.return)){r=n;continue}break}if(a.child===i.child){for(i=a.child;i;){if(i===r)return Ve(a),e;if(i===n)return Ve(a),t;i=i.sibling}throw Error(s(188))}if(r.return!==n.return)r=a,n=i;else{for(var o=!1,l=a.child;l;){if(l===r){o=!0,r=a,n=i;break}if(l===n){o=!0,n=a,r=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===r){o=!0,r=i,n=a;break}if(l===n){o=!0,n=i,r=a;break}l=l.sibling}if(!o)throw Error(s(189))}}if(r.alternate!==n)throw Error(s(190))}if(3!==r.tag)throw Error(s(188));return r.stateNode.current===r?e:t}(e))?He(e):null}function He(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=He(e);if(null!==t)return t;e=e.sibling}return null}var Ke=a.unstable_scheduleCallback,Ye=a.unstable_cancelCallback,Je=a.unstable_shouldYield,Xe=a.unstable_requestPaint,$e=a.unstable_now,Qe=a.unstable_getCurrentPriorityLevel,Ze=a.unstable_ImmediatePriority,et=a.unstable_UserBlockingPriority,tt=a.unstable_NormalPriority,rt=a.unstable_LowPriority,nt=a.unstable_IdlePriority,at=null,st=null;var it=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(ot(e)/lt|0)|0},ot=Math.log,lt=Math.LN2;var ct=64,dt=4194304;function ut(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function pt(e,t){var r=e.pendingLanes;if(0===r)return 0;var n=0,a=e.suspendedLanes,s=e.pingedLanes,i=268435455&r;if(0!==i){var o=i&~a;0!==o?n=ut(o):0!==(s&=i)&&(n=ut(s))}else 0!==(i=r&~a)?n=ut(i):0!==s&&(n=ut(s));if(0===n)return 0;if(0!==t&&t!==n&&0===(t&a)&&((a=n&-n)>=(s=t&-t)||16===a&&0!==(4194240&s)))return t;if(0!==(4&n)&&(n|=16&r),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=n;0<t;)a=1<<(r=31-it(t)),n|=e[r],t&=~a;return n}function mt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function ht(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function ft(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function gt(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function xt(e,t,r){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-it(t)]=r}function yt(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-it(r),a=1<<n;a&t|e[n]&t&&(e[n]|=t),r&=~a}}var vt=0;function bt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var jt,wt,Nt,kt,St,_t=!1,Ct=[],At=null,Ot=null,Pt=null,Et=new Map,Tt=new Map,It=[],Mt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Dt(e,t){switch(e){case"focusin":case"focusout":At=null;break;case"dragenter":case"dragleave":Ot=null;break;case"mouseover":case"mouseout":Pt=null;break;case"pointerover":case"pointerout":Et.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Tt.delete(t.pointerId)}}function Rt(e,t,r,n,a,s){return null===e||e.nativeEvent!==s?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:s,targetContainers:[a]},null!==t&&(null!==(t=va(t))&&wt(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,null!==a&&-1===t.indexOf(a)&&t.push(a),e)}function Ft(e){var t=ya(e.target);if(null!==t){var r=qe(t);if(null!==r)if(13===(t=r.tag)){if(null!==(t=We(r)))return e.blockedOn=t,void St(e.priority,function(){Nt(r)})}else if(3===t&&r.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===r.tag?r.stateNode.containerInfo:null)}e.blockedOn=null}function Lt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var r=Jt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==r)return null!==(t=va(r))&&wt(t),e.blockedOn=r,!1;var n=new(r=e.nativeEvent).constructor(r.type,r);be=n,r.target.dispatchEvent(n),be=null,t.shift()}return!0}function Bt(e,t,r){Lt(e)&&r.delete(t)}function Ut(){_t=!1,null!==At&&Lt(At)&&(At=null),null!==Ot&&Lt(Ot)&&(Ot=null),null!==Pt&&Lt(Pt)&&(Pt=null),Et.forEach(Bt),Tt.forEach(Bt)}function zt(e,t){e.blockedOn===t&&(e.blockedOn=null,_t||(_t=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,Ut)))}function qt(e){function t(t){return zt(t,e)}if(0<Ct.length){zt(Ct[0],e);for(var r=1;r<Ct.length;r++){var n=Ct[r];n.blockedOn===e&&(n.blockedOn=null)}}for(null!==At&&zt(At,e),null!==Ot&&zt(Ot,e),null!==Pt&&zt(Pt,e),Et.forEach(t),Tt.forEach(t),r=0;r<It.length;r++)(n=It[r]).blockedOn===e&&(n.blockedOn=null);for(;0<It.length&&null===(r=It[0]).blockedOn;)Ft(r),null===r.blockedOn&&It.shift()}var Wt=b.ReactCurrentBatchConfig,Vt=!0;function Gt(e,t,r,n){var a=vt,s=Wt.transition;Wt.transition=null;try{vt=1,Kt(e,t,r,n)}finally{vt=a,Wt.transition=s}}function Ht(e,t,r,n){var a=vt,s=Wt.transition;Wt.transition=null;try{vt=4,Kt(e,t,r,n)}finally{vt=a,Wt.transition=s}}function Kt(e,t,r,n){if(Vt){var a=Jt(e,t,r,n);if(null===a)Vn(e,t,n,Yt,r),Dt(e,n);else if(function(e,t,r,n,a){switch(t){case"focusin":return At=Rt(At,e,t,r,n,a),!0;case"dragenter":return Ot=Rt(Ot,e,t,r,n,a),!0;case"mouseover":return Pt=Rt(Pt,e,t,r,n,a),!0;case"pointerover":var s=a.pointerId;return Et.set(s,Rt(Et.get(s)||null,e,t,r,n,a)),!0;case"gotpointercapture":return s=a.pointerId,Tt.set(s,Rt(Tt.get(s)||null,e,t,r,n,a)),!0}return!1}(a,e,t,r,n))n.stopPropagation();else if(Dt(e,n),4&t&&-1<Mt.indexOf(e)){for(;null!==a;){var s=va(a);if(null!==s&&jt(s),null===(s=Jt(e,t,r,n))&&Vn(e,t,n,Yt,r),s===a)break;a=s}null!==a&&n.stopPropagation()}else Vn(e,t,n,null,r)}}var Yt=null;function Jt(e,t,r,n){if(Yt=null,null!==(e=ya(e=je(n))))if(null===(t=qe(e)))e=null;else if(13===(r=t.tag)){if(null!==(e=We(t)))return e;e=null}else if(3===r){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Yt=e,null}function Xt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Qe()){case Ze:return 1;case et:return 4;case tt:case rt:return 16;case nt:return 536870912;default:return 16}default:return 16}}var $t=null,Qt=null,Zt=null;function er(){if(Zt)return Zt;var e,t,r=Qt,n=r.length,a="value"in $t?$t.value:$t.textContent,s=a.length;for(e=0;e<n&&r[e]===a[e];e++);var i=n-e;for(t=1;t<=i&&r[n-t]===a[s-t];t++);return Zt=a.slice(e,1<t?1-t:void 0)}function tr(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function rr(){return!0}function nr(){return!1}function ar(e){function t(t,r,n,a,s){for(var i in this._reactName=t,this._targetInst=n,this.type=r,this.nativeEvent=a,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(i)&&(t=e[i],this[i]=t?t(a):a[i]);return this.isDefaultPrevented=(null!=a.defaultPrevented?a.defaultPrevented:!1===a.returnValue)?rr:nr,this.isPropagationStopped=nr,this}return F(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=rr)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=rr)},persist:function(){},isPersistent:rr}),t}var sr,ir,or,lr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cr=ar(lr),dr=F({},lr,{view:0,detail:0}),ur=ar(dr),pr=F({},dr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:kr,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==or&&(or&&"mousemove"===e.type?(sr=e.screenX-or.screenX,ir=e.screenY-or.screenY):ir=sr=0,or=e),sr)},movementY:function(e){return"movementY"in e?e.movementY:ir}}),mr=ar(pr),hr=ar(F({},pr,{dataTransfer:0})),fr=ar(F({},dr,{relatedTarget:0})),gr=ar(F({},lr,{animationName:0,elapsedTime:0,pseudoElement:0})),xr=F({},lr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),yr=ar(xr),vr=ar(F({},lr,{data:0})),br={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},jr={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},wr={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Nr(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=wr[e])&&!!t[e]}function kr(){return Nr}var Sr=F({},dr,{key:function(e){if(e.key){var t=br[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tr(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?jr[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:kr,charCode:function(e){return"keypress"===e.type?tr(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tr(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),_r=ar(Sr),Cr=ar(F({},pr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Ar=ar(F({},dr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:kr})),Or=ar(F({},lr,{propertyName:0,elapsedTime:0,pseudoElement:0})),Pr=F({},pr,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Er=ar(Pr),Tr=[9,13,27,32],Ir=d&&"CompositionEvent"in window,Mr=null;d&&"documentMode"in document&&(Mr=document.documentMode);var Dr=d&&"TextEvent"in window&&!Mr,Rr=d&&(!Ir||Mr&&8<Mr&&11>=Mr),Fr=String.fromCharCode(32),Lr=!1;function Br(e,t){switch(e){case"keyup":return-1!==Tr.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ur(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var zr=!1;var qr={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!qr[e.type]:"textarea"===t}function Vr(e,t,r,n){_e(n),0<(t=Hn(t,"onChange")).length&&(r=new cr("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var Gr=null,Hr=null;function Kr(e){Ln(e,0)}function Yr(e){if(K(ba(e)))return e}function Jr(e,t){if("change"===e)return t}var Xr=!1;if(d){var $r;if(d){var Qr="oninput"in document;if(!Qr){var Zr=document.createElement("div");Zr.setAttribute("oninput","return;"),Qr="function"===typeof Zr.oninput}$r=Qr}else $r=!1;Xr=$r&&(!document.documentMode||9<document.documentMode)}function en(){Gr&&(Gr.detachEvent("onpropertychange",tn),Hr=Gr=null)}function tn(e){if("value"===e.propertyName&&Yr(Hr)){var t=[];Vr(t,Hr,e,je(e)),Ee(Kr,t)}}function rn(e,t,r){"focusin"===e?(en(),Hr=r,(Gr=t).attachEvent("onpropertychange",tn)):"focusout"===e&&en()}function nn(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Yr(Hr)}function an(e,t){if("click"===e)return Yr(t)}function sn(e,t){if("input"===e||"change"===e)return Yr(t)}var on="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function ln(e,t){if(on(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var a=r[n];if(!u.call(t,a)||!on(e[a],t[a]))return!1}return!0}function cn(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function dn(e,t){var r,n=cn(e);for(e=0;n;){if(3===n.nodeType){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=cn(n)}}function un(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?un(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function pn(){for(var e=window,t=Y();t instanceof e.HTMLIFrameElement;){try{var r="string"===typeof t.contentWindow.location.href}catch(n){r=!1}if(!r)break;t=Y((e=t.contentWindow).document)}return t}function mn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function hn(e){var t=pn(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&un(r.ownerDocument.documentElement,r)){if(null!==n&&mn(r))if(t=n.start,void 0===(e=n.end)&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if((e=(t=r.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var a=r.textContent.length,s=Math.min(n.start,a);n=void 0===n.end?s:Math.min(n.end,a),!e.extend&&s>n&&(a=n,n=s,s=a),a=dn(r,s);var i=dn(r,n);a&&i&&(1!==e.rangeCount||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==i.node||e.focusOffset!==i.offset)&&((t=t.createRange()).setStart(a.node,a.offset),e.removeAllRanges(),s>n?(e.addRange(t),e.extend(i.node,i.offset)):(t.setEnd(i.node,i.offset),e.addRange(t)))}for(t=[],e=r;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof r.focus&&r.focus(),r=0;r<t.length;r++)(e=t[r]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var fn=d&&"documentMode"in document&&11>=document.documentMode,gn=null,xn=null,yn=null,vn=!1;function bn(e,t,r){var n=r.window===r?r.document:9===r.nodeType?r:r.ownerDocument;vn||null==gn||gn!==Y(n)||("selectionStart"in(n=gn)&&mn(n)?n={start:n.selectionStart,end:n.selectionEnd}:n={anchorNode:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset},yn&&ln(yn,n)||(yn=n,0<(n=Hn(xn,"onSelect")).length&&(t=new cr("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=gn)))}function jn(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var wn={animationend:jn("Animation","AnimationEnd"),animationiteration:jn("Animation","AnimationIteration"),animationstart:jn("Animation","AnimationStart"),transitionend:jn("Transition","TransitionEnd")},Nn={},kn={};function Sn(e){if(Nn[e])return Nn[e];if(!wn[e])return e;var t,r=wn[e];for(t in r)if(r.hasOwnProperty(t)&&t in kn)return Nn[e]=r[t];return e}d&&(kn=document.createElement("div").style,"AnimationEvent"in window||(delete wn.animationend.animation,delete wn.animationiteration.animation,delete wn.animationstart.animation),"TransitionEvent"in window||delete wn.transitionend.transition);var _n=Sn("animationend"),Cn=Sn("animationiteration"),An=Sn("animationstart"),On=Sn("transitionend"),Pn=new Map,En="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Tn(e,t){Pn.set(e,t),l(t,[e])}for(var In=0;In<En.length;In++){var Mn=En[In];Tn(Mn.toLowerCase(),"on"+(Mn[0].toUpperCase()+Mn.slice(1)))}Tn(_n,"onAnimationEnd"),Tn(Cn,"onAnimationIteration"),Tn(An,"onAnimationStart"),Tn("dblclick","onDoubleClick"),Tn("focusin","onFocus"),Tn("focusout","onBlur"),Tn(On,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Dn="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Rn=new Set("cancel close invalid load scroll toggle".split(" ").concat(Dn));function Fn(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,function(e,t,r,n,a,i,o,l,c){if(ze.apply(this,arguments),Re){if(!Re)throw Error(s(198));var d=Fe;Re=!1,Fe=null,Le||(Le=!0,Be=d)}}(n,t,void 0,e),e.currentTarget=null}function Ln(e,t){t=0!==(4&t);for(var r=0;r<e.length;r++){var n=e[r],a=n.event;n=n.listeners;e:{var s=void 0;if(t)for(var i=n.length-1;0<=i;i--){var o=n[i],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==s&&a.isPropagationStopped())break e;Fn(a,o,c),s=l}else for(i=0;i<n.length;i++){if(l=(o=n[i]).instance,c=o.currentTarget,o=o.listener,l!==s&&a.isPropagationStopped())break e;Fn(a,o,c),s=l}}}if(Le)throw e=Be,Le=!1,Be=null,e}function Bn(e,t){var r=t[fa];void 0===r&&(r=t[fa]=new Set);var n=e+"__bubble";r.has(n)||(Wn(t,e,2,!1),r.add(n))}function Un(e,t,r){var n=0;t&&(n|=4),Wn(r,e,n,t)}var zn="_reactListening"+Math.random().toString(36).slice(2);function qn(e){if(!e[zn]){e[zn]=!0,i.forEach(function(t){"selectionchange"!==t&&(Rn.has(t)||Un(t,!1,e),Un(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[zn]||(t[zn]=!0,Un("selectionchange",!1,t))}}function Wn(e,t,r,n){switch(Xt(t)){case 1:var a=Gt;break;case 4:a=Ht;break;default:a=Kt}r=a.bind(null,t,r,e),a=void 0,!Ie||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(a=!0),n?void 0!==a?e.addEventListener(t,r,{capture:!0,passive:a}):e.addEventListener(t,r,!0):void 0!==a?e.addEventListener(t,r,{passive:a}):e.addEventListener(t,r,!1)}function Vn(e,t,r,n,a){var s=n;if(0===(1&t)&&0===(2&t)&&null!==n)e:for(;;){if(null===n)return;var i=n.tag;if(3===i||4===i){var o=n.stateNode.containerInfo;if(o===a||8===o.nodeType&&o.parentNode===a)break;if(4===i)for(i=n.return;null!==i;){var l=i.tag;if((3===l||4===l)&&((l=i.stateNode.containerInfo)===a||8===l.nodeType&&l.parentNode===a))return;i=i.return}for(;null!==o;){if(null===(i=ya(o)))return;if(5===(l=i.tag)||6===l){n=s=i;continue e}o=o.parentNode}}n=n.return}Ee(function(){var n=s,a=je(r),i=[];e:{var o=Pn.get(e);if(void 0!==o){var l=cr,c=e;switch(e){case"keypress":if(0===tr(r))break e;case"keydown":case"keyup":l=_r;break;case"focusin":c="focus",l=fr;break;case"focusout":c="blur",l=fr;break;case"beforeblur":case"afterblur":l=fr;break;case"click":if(2===r.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=mr;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=hr;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Ar;break;case _n:case Cn:case An:l=gr;break;case On:l=Or;break;case"scroll":l=ur;break;case"wheel":l=Er;break;case"copy":case"cut":case"paste":l=yr;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Cr}var d=0!==(4&t),u=!d&&"scroll"===e,p=d?null!==o?o+"Capture":null:o;d=[];for(var m,h=n;null!==h;){var f=(m=h).stateNode;if(5===m.tag&&null!==f&&(m=f,null!==p&&(null!=(f=Te(h,p))&&d.push(Gn(h,f,m)))),u)break;h=h.return}0<d.length&&(o=new l(o,c,null,r,a),i.push({event:o,listeners:d}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(o="mouseover"===e||"pointerover"===e)||r===be||!(c=r.relatedTarget||r.fromElement)||!ya(c)&&!c[ha])&&(l||o)&&(o=a.window===a?a:(o=a.ownerDocument)?o.defaultView||o.parentWindow:window,l?(l=n,null!==(c=(c=r.relatedTarget||r.toElement)?ya(c):null)&&(c!==(u=qe(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=n),l!==c)){if(d=mr,f="onMouseLeave",p="onMouseEnter",h="mouse","pointerout"!==e&&"pointerover"!==e||(d=Cr,f="onPointerLeave",p="onPointerEnter",h="pointer"),u=null==l?o:ba(l),m=null==c?o:ba(c),(o=new d(f,h+"leave",l,r,a)).target=u,o.relatedTarget=m,f=null,ya(a)===n&&((d=new d(p,h+"enter",c,r,a)).target=m,d.relatedTarget=u,f=d),u=f,l&&c)e:{for(p=c,h=0,m=d=l;m;m=Kn(m))h++;for(m=0,f=p;f;f=Kn(f))m++;for(;0<h-m;)d=Kn(d),h--;for(;0<m-h;)p=Kn(p),m--;for(;h--;){if(d===p||null!==p&&d===p.alternate)break e;d=Kn(d),p=Kn(p)}d=null}else d=null;null!==l&&Yn(i,o,l,d,!1),null!==c&&null!==u&&Yn(i,u,c,d,!0)}if("select"===(l=(o=n?ba(n):window).nodeName&&o.nodeName.toLowerCase())||"input"===l&&"file"===o.type)var g=Jr;else if(Wr(o))if(Xr)g=sn;else{g=nn;var x=rn}else(l=o.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===o.type||"radio"===o.type)&&(g=an);switch(g&&(g=g(e,n))?Vr(i,g,r,a):(x&&x(e,o,n),"focusout"===e&&(x=o._wrapperState)&&x.controlled&&"number"===o.type&&ee(o,"number",o.value)),x=n?ba(n):window,e){case"focusin":(Wr(x)||"true"===x.contentEditable)&&(gn=x,xn=n,yn=null);break;case"focusout":yn=xn=gn=null;break;case"mousedown":vn=!0;break;case"contextmenu":case"mouseup":case"dragend":vn=!1,bn(i,r,a);break;case"selectionchange":if(fn)break;case"keydown":case"keyup":bn(i,r,a)}var y;if(Ir)e:{switch(e){case"compositionstart":var v="onCompositionStart";break e;case"compositionend":v="onCompositionEnd";break e;case"compositionupdate":v="onCompositionUpdate";break e}v=void 0}else zr?Br(e,r)&&(v="onCompositionEnd"):"keydown"===e&&229===r.keyCode&&(v="onCompositionStart");v&&(Rr&&"ko"!==r.locale&&(zr||"onCompositionStart"!==v?"onCompositionEnd"===v&&zr&&(y=er()):(Qt="value"in($t=a)?$t.value:$t.textContent,zr=!0)),0<(x=Hn(n,v)).length&&(v=new vr(v,e,null,r,a),i.push({event:v,listeners:x}),y?v.data=y:null!==(y=Ur(r))&&(v.data=y))),(y=Dr?function(e,t){switch(e){case"compositionend":return Ur(t);case"keypress":return 32!==t.which?null:(Lr=!0,Fr);case"textInput":return(e=t.data)===Fr&&Lr?null:e;default:return null}}(e,r):function(e,t){if(zr)return"compositionend"===e||!Ir&&Br(e,t)?(e=er(),Zt=Qt=$t=null,zr=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Rr&&"ko"!==t.locale?null:t.data}}(e,r))&&(0<(n=Hn(n,"onBeforeInput")).length&&(a=new vr("onBeforeInput","beforeinput",null,r,a),i.push({event:a,listeners:n}),a.data=y))}Ln(i,t)})}function Gn(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Hn(e,t){for(var r=t+"Capture",n=[];null!==e;){var a=e,s=a.stateNode;5===a.tag&&null!==s&&(a=s,null!=(s=Te(e,r))&&n.unshift(Gn(e,s,a)),null!=(s=Te(e,t))&&n.push(Gn(e,s,a))),e=e.return}return n}function Kn(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Yn(e,t,r,n,a){for(var s=t._reactName,i=[];null!==r&&r!==n;){var o=r,l=o.alternate,c=o.stateNode;if(null!==l&&l===n)break;5===o.tag&&null!==c&&(o=c,a?null!=(l=Te(r,s))&&i.unshift(Gn(r,l,o)):a||null!=(l=Te(r,s))&&i.push(Gn(r,l,o))),r=r.return}0!==i.length&&e.push({event:t,listeners:i})}var Jn=/\r\n?/g,Xn=/\u0000|\uFFFD/g;function $n(e){return("string"===typeof e?e:""+e).replace(Jn,"\n").replace(Xn,"")}function Qn(e,t,r){if(t=$n(t),$n(e)!==t&&r)throw Error(s(425))}function Zn(){}var ea=null,ta=null;function ra(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var na="function"===typeof setTimeout?setTimeout:void 0,aa="function"===typeof clearTimeout?clearTimeout:void 0,sa="function"===typeof Promise?Promise:void 0,ia="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof sa?function(e){return sa.resolve(null).then(e).catch(oa)}:na;function oa(e){setTimeout(function(){throw e})}function la(e,t){var r=t,n=0;do{var a=r.nextSibling;if(e.removeChild(r),a&&8===a.nodeType)if("/$"===(r=a.data)){if(0===n)return e.removeChild(a),void qt(t);n--}else"$"!==r&&"$?"!==r&&"$!"!==r||n++;r=a}while(r);qt(t)}function ca(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function da(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var r=e.data;if("$"===r||"$!"===r||"$?"===r){if(0===t)return e;t--}else"/$"===r&&t++}e=e.previousSibling}return null}var ua=Math.random().toString(36).slice(2),pa="__reactFiber$"+ua,ma="__reactProps$"+ua,ha="__reactContainer$"+ua,fa="__reactEvents$"+ua,ga="__reactListeners$"+ua,xa="__reactHandles$"+ua;function ya(e){var t=e[pa];if(t)return t;for(var r=e.parentNode;r;){if(t=r[ha]||r[pa]){if(r=t.alternate,null!==t.child||null!==r&&null!==r.child)for(e=da(e);null!==e;){if(r=e[pa])return r;e=da(e)}return t}r=(e=r).parentNode}return null}function va(e){return!(e=e[pa]||e[ha])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function ba(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(s(33))}function ja(e){return e[ma]||null}var wa=[],Na=-1;function ka(e){return{current:e}}function Sa(e){0>Na||(e.current=wa[Na],wa[Na]=null,Na--)}function _a(e,t){Na++,wa[Na]=e.current,e.current=t}var Ca={},Aa=ka(Ca),Oa=ka(!1),Pa=Ca;function Ea(e,t){var r=e.type.contextTypes;if(!r)return Ca;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var a,s={};for(a in r)s[a]=t[a];return n&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Ta(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Ia(){Sa(Oa),Sa(Aa)}function Ma(e,t,r){if(Aa.current!==Ca)throw Error(s(168));_a(Aa,t),_a(Oa,r)}function Da(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,"function"!==typeof n.getChildContext)return r;for(var a in n=n.getChildContext())if(!(a in t))throw Error(s(108,W(e)||"Unknown",a));return F({},r,n)}function Ra(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ca,Pa=Aa.current,_a(Aa,e),_a(Oa,Oa.current),!0}function Fa(e,t,r){var n=e.stateNode;if(!n)throw Error(s(169));r?(e=Da(e,t,Pa),n.__reactInternalMemoizedMergedChildContext=e,Sa(Oa),Sa(Aa),_a(Aa,e)):Sa(Oa),_a(Oa,r)}var La=null,Ba=!1,Ua=!1;function za(e){null===La?La=[e]:La.push(e)}function qa(){if(!Ua&&null!==La){Ua=!0;var e=0,t=vt;try{var r=La;for(vt=1;e<r.length;e++){var n=r[e];do{n=n(!0)}while(null!==n)}La=null,Ba=!1}catch(a){throw null!==La&&(La=La.slice(e+1)),Ke(Ze,qa),a}finally{vt=t,Ua=!1}}return null}var Wa=[],Va=0,Ga=null,Ha=0,Ka=[],Ya=0,Ja=null,Xa=1,$a="";function Qa(e,t){Wa[Va++]=Ha,Wa[Va++]=Ga,Ga=e,Ha=t}function Za(e,t,r){Ka[Ya++]=Xa,Ka[Ya++]=$a,Ka[Ya++]=Ja,Ja=e;var n=Xa;e=$a;var a=32-it(n)-1;n&=~(1<<a),r+=1;var s=32-it(t)+a;if(30<s){var i=a-a%5;s=(n&(1<<i)-1).toString(32),n>>=i,a-=i,Xa=1<<32-it(t)+a|r<<a|n,$a=s+e}else Xa=1<<s|r<<a|n,$a=e}function es(e){null!==e.return&&(Qa(e,1),Za(e,1,0))}function ts(e){for(;e===Ga;)Ga=Wa[--Va],Wa[Va]=null,Ha=Wa[--Va],Wa[Va]=null;for(;e===Ja;)Ja=Ka[--Ya],Ka[Ya]=null,$a=Ka[--Ya],Ka[Ya]=null,Xa=Ka[--Ya],Ka[Ya]=null}var rs=null,ns=null,as=!1,ss=null;function is(e,t){var r=Ec(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,null===(t=e.deletions)?(e.deletions=[r],e.flags|=16):t.push(r)}function os(e,t){switch(e.tag){case 5:var r=e.type;return null!==(t=1!==t.nodeType||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,rs=e,ns=ca(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,rs=e,ns=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(r=null!==Ja?{id:Xa,overflow:$a}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},(r=Ec(18,null,null,0)).stateNode=t,r.return=e,e.child=r,rs=e,ns=null,!0);default:return!1}}function ls(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function cs(e){if(as){var t=ns;if(t){var r=t;if(!os(e,t)){if(ls(e))throw Error(s(418));t=ca(r.nextSibling);var n=rs;t&&os(e,t)?is(n,r):(e.flags=-4097&e.flags|2,as=!1,rs=e)}}else{if(ls(e))throw Error(s(418));e.flags=-4097&e.flags|2,as=!1,rs=e}}}function ds(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;rs=e}function us(e){if(e!==rs)return!1;if(!as)return ds(e),as=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ra(e.type,e.memoizedProps)),t&&(t=ns)){if(ls(e))throw ps(),Error(s(418));for(;t;)is(e,t),t=ca(t.nextSibling)}if(ds(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var r=e.data;if("/$"===r){if(0===t){ns=ca(e.nextSibling);break e}t--}else"$"!==r&&"$!"!==r&&"$?"!==r||t++}e=e.nextSibling}ns=null}}else ns=rs?ca(e.stateNode.nextSibling):null;return!0}function ps(){for(var e=ns;e;)e=ca(e.nextSibling)}function ms(){ns=rs=null,as=!1}function hs(e){null===ss?ss=[e]:ss.push(e)}var fs=b.ReactCurrentBatchConfig;function gs(e,t,r){if(null!==(e=r.ref)&&"function"!==typeof e&&"object"!==typeof e){if(r._owner){if(r=r._owner){if(1!==r.tag)throw Error(s(309));var n=r.stateNode}if(!n)throw Error(s(147,e));var a=n,i=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===i?t.ref:(t=function(e){var t=a.refs;null===e?delete t[i]:t[i]=e},t._stringRef=i,t)}if("string"!==typeof e)throw Error(s(284));if(!r._owner)throw Error(s(290,e))}return e}function xs(e,t){throw e=Object.prototype.toString.call(t),Error(s(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function ys(e){return(0,e._init)(e._payload)}function vs(e){function t(t,r){if(e){var n=t.deletions;null===n?(t.deletions=[r],t.flags|=16):n.push(r)}}function r(r,n){if(!e)return null;for(;null!==n;)t(r,n),n=n.sibling;return null}function n(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function a(e,t){return(e=Ic(e,t)).index=0,e.sibling=null,e}function i(t,r,n){return t.index=n,e?null!==(n=t.alternate)?(n=n.index)<r?(t.flags|=2,r):n:(t.flags|=2,r):(t.flags|=1048576,r)}function o(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,r,n){return null===t||6!==t.tag?((t=Fc(r,e.mode,n)).return=e,t):((t=a(t,r)).return=e,t)}function c(e,t,r,n){var s=r.type;return s===N?u(e,t,r.props.children,n,r.key):null!==t&&(t.elementType===s||"object"===typeof s&&null!==s&&s.$$typeof===T&&ys(s)===t.type)?((n=a(t,r.props)).ref=gs(e,t,r),n.return=e,n):((n=Mc(r.type,r.key,r.props,null,e.mode,n)).ref=gs(e,t,r),n.return=e,n)}function d(e,t,r,n){return null===t||4!==t.tag||t.stateNode.containerInfo!==r.containerInfo||t.stateNode.implementation!==r.implementation?((t=Lc(r,e.mode,n)).return=e,t):((t=a(t,r.children||[])).return=e,t)}function u(e,t,r,n,s){return null===t||7!==t.tag?((t=Dc(r,e.mode,n,s)).return=e,t):((t=a(t,r)).return=e,t)}function p(e,t,r){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Fc(""+t,e.mode,r)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case j:return(r=Mc(t.type,t.key,t.props,null,e.mode,r)).ref=gs(e,null,t),r.return=e,r;case w:return(t=Lc(t,e.mode,r)).return=e,t;case T:return p(e,(0,t._init)(t._payload),r)}if(te(t)||D(t))return(t=Dc(t,e.mode,r,null)).return=e,t;xs(e,t)}return null}function m(e,t,r,n){var a=null!==t?t.key:null;if("string"===typeof r&&""!==r||"number"===typeof r)return null!==a?null:l(e,t,""+r,n);if("object"===typeof r&&null!==r){switch(r.$$typeof){case j:return r.key===a?c(e,t,r,n):null;case w:return r.key===a?d(e,t,r,n):null;case T:return m(e,t,(a=r._init)(r._payload),n)}if(te(r)||D(r))return null!==a?null:u(e,t,r,n,null);xs(e,r)}return null}function h(e,t,r,n,a){if("string"===typeof n&&""!==n||"number"===typeof n)return l(t,e=e.get(r)||null,""+n,a);if("object"===typeof n&&null!==n){switch(n.$$typeof){case j:return c(t,e=e.get(null===n.key?r:n.key)||null,n,a);case w:return d(t,e=e.get(null===n.key?r:n.key)||null,n,a);case T:return h(e,t,r,(0,n._init)(n._payload),a)}if(te(n)||D(n))return u(t,e=e.get(r)||null,n,a,null);xs(t,n)}return null}function f(a,s,o,l){for(var c=null,d=null,u=s,f=s=0,g=null;null!==u&&f<o.length;f++){u.index>f?(g=u,u=null):g=u.sibling;var x=m(a,u,o[f],l);if(null===x){null===u&&(u=g);break}e&&u&&null===x.alternate&&t(a,u),s=i(x,s,f),null===d?c=x:d.sibling=x,d=x,u=g}if(f===o.length)return r(a,u),as&&Qa(a,f),c;if(null===u){for(;f<o.length;f++)null!==(u=p(a,o[f],l))&&(s=i(u,s,f),null===d?c=u:d.sibling=u,d=u);return as&&Qa(a,f),c}for(u=n(a,u);f<o.length;f++)null!==(g=h(u,a,f,o[f],l))&&(e&&null!==g.alternate&&u.delete(null===g.key?f:g.key),s=i(g,s,f),null===d?c=g:d.sibling=g,d=g);return e&&u.forEach(function(e){return t(a,e)}),as&&Qa(a,f),c}function g(a,o,l,c){var d=D(l);if("function"!==typeof d)throw Error(s(150));if(null==(l=d.call(l)))throw Error(s(151));for(var u=d=null,f=o,g=o=0,x=null,y=l.next();null!==f&&!y.done;g++,y=l.next()){f.index>g?(x=f,f=null):x=f.sibling;var v=m(a,f,y.value,c);if(null===v){null===f&&(f=x);break}e&&f&&null===v.alternate&&t(a,f),o=i(v,o,g),null===u?d=v:u.sibling=v,u=v,f=x}if(y.done)return r(a,f),as&&Qa(a,g),d;if(null===f){for(;!y.done;g++,y=l.next())null!==(y=p(a,y.value,c))&&(o=i(y,o,g),null===u?d=y:u.sibling=y,u=y);return as&&Qa(a,g),d}for(f=n(a,f);!y.done;g++,y=l.next())null!==(y=h(f,a,g,y.value,c))&&(e&&null!==y.alternate&&f.delete(null===y.key?g:y.key),o=i(y,o,g),null===u?d=y:u.sibling=y,u=y);return e&&f.forEach(function(e){return t(a,e)}),as&&Qa(a,g),d}return function e(n,s,i,l){if("object"===typeof i&&null!==i&&i.type===N&&null===i.key&&(i=i.props.children),"object"===typeof i&&null!==i){switch(i.$$typeof){case j:e:{for(var c=i.key,d=s;null!==d;){if(d.key===c){if((c=i.type)===N){if(7===d.tag){r(n,d.sibling),(s=a(d,i.props.children)).return=n,n=s;break e}}else if(d.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===T&&ys(c)===d.type){r(n,d.sibling),(s=a(d,i.props)).ref=gs(n,d,i),s.return=n,n=s;break e}r(n,d);break}t(n,d),d=d.sibling}i.type===N?((s=Dc(i.props.children,n.mode,l,i.key)).return=n,n=s):((l=Mc(i.type,i.key,i.props,null,n.mode,l)).ref=gs(n,s,i),l.return=n,n=l)}return o(n);case w:e:{for(d=i.key;null!==s;){if(s.key===d){if(4===s.tag&&s.stateNode.containerInfo===i.containerInfo&&s.stateNode.implementation===i.implementation){r(n,s.sibling),(s=a(s,i.children||[])).return=n,n=s;break e}r(n,s);break}t(n,s),s=s.sibling}(s=Lc(i,n.mode,l)).return=n,n=s}return o(n);case T:return e(n,s,(d=i._init)(i._payload),l)}if(te(i))return f(n,s,i,l);if(D(i))return g(n,s,i,l);xs(n,i)}return"string"===typeof i&&""!==i||"number"===typeof i?(i=""+i,null!==s&&6===s.tag?(r(n,s.sibling),(s=a(s,i)).return=n,n=s):(r(n,s),(s=Fc(i,n.mode,l)).return=n,n=s),o(n)):r(n,s)}}var bs=vs(!0),js=vs(!1),ws=ka(null),Ns=null,ks=null,Ss=null;function _s(){Ss=ks=Ns=null}function Cs(e){var t=ws.current;Sa(ws),e._currentValue=t}function As(e,t,r){for(;null!==e;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==n&&(n.childLanes|=t)):null!==n&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function Os(e,t){Ns=e,Ss=ks=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(vo=!0),e.firstContext=null)}function Ps(e){var t=e._currentValue;if(Ss!==e)if(e={context:e,memoizedValue:t,next:null},null===ks){if(null===Ns)throw Error(s(308));ks=e,Ns.dependencies={lanes:0,firstContext:e}}else ks=ks.next=e;return t}var Es=null;function Ts(e){null===Es?Es=[e]:Es.push(e)}function Is(e,t,r,n){var a=t.interleaved;return null===a?(r.next=r,Ts(t)):(r.next=a.next,a.next=r),t.interleaved=r,Ms(e,n)}function Ms(e,t){e.lanes|=t;var r=e.alternate;for(null!==r&&(r.lanes|=t),r=e,e=e.return;null!==e;)e.childLanes|=t,null!==(r=e.alternate)&&(r.childLanes|=t),r=e,e=e.return;return 3===r.tag?r.stateNode:null}var Ds=!1;function Rs(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Fs(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ls(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Bs(e,t,r){var n=e.updateQueue;if(null===n)return null;if(n=n.shared,0!==(2&Al)){var a=n.pending;return null===a?t.next=t:(t.next=a.next,a.next=t),n.pending=t,Ms(e,r)}return null===(a=n.interleaved)?(t.next=t,Ts(n)):(t.next=a.next,a.next=t),n.interleaved=t,Ms(e,r)}function Us(e,t,r){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&r))){var n=t.lanes;r|=n&=e.pendingLanes,t.lanes=r,yt(e,r)}}function zs(e,t){var r=e.updateQueue,n=e.alternate;if(null!==n&&r===(n=n.updateQueue)){var a=null,s=null;if(null!==(r=r.firstBaseUpdate)){do{var i={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};null===s?a=s=i:s=s.next=i,r=r.next}while(null!==r);null===s?a=s=t:s=s.next=t}else a=s=t;return r={baseState:n.baseState,firstBaseUpdate:a,lastBaseUpdate:s,shared:n.shared,effects:n.effects},void(e.updateQueue=r)}null===(e=r.lastBaseUpdate)?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function qs(e,t,r,n){var a=e.updateQueue;Ds=!1;var s=a.firstBaseUpdate,i=a.lastBaseUpdate,o=a.shared.pending;if(null!==o){a.shared.pending=null;var l=o,c=l.next;l.next=null,null===i?s=c:i.next=c,i=l;var d=e.alternate;null!==d&&((o=(d=d.updateQueue).lastBaseUpdate)!==i&&(null===o?d.firstBaseUpdate=c:o.next=c,d.lastBaseUpdate=l))}if(null!==s){var u=a.baseState;for(i=0,d=c=l=null,o=s;;){var p=o.lane,m=o.eventTime;if((n&p)===p){null!==d&&(d=d.next={eventTime:m,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var h=e,f=o;switch(p=t,m=r,f.tag){case 1:if("function"===typeof(h=f.payload)){u=h.call(m,u,p);break e}u=h;break e;case 3:h.flags=-65537&h.flags|128;case 0:if(null===(p="function"===typeof(h=f.payload)?h.call(m,u,p):h)||void 0===p)break e;u=F({},u,p);break e;case 2:Ds=!0}}null!==o.callback&&0!==o.lane&&(e.flags|=64,null===(p=a.effects)?a.effects=[o]:p.push(o))}else m={eventTime:m,lane:p,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===d?(c=d=m,l=u):d=d.next=m,i|=p;if(null===(o=o.next)){if(null===(o=a.shared.pending))break;o=(p=o).next,p.next=null,a.lastBaseUpdate=p,a.shared.pending=null}}if(null===d&&(l=u),a.baseState=l,a.firstBaseUpdate=c,a.lastBaseUpdate=d,null!==(t=a.shared.interleaved)){a=t;do{i|=a.lane,a=a.next}while(a!==t)}else null===s&&(a.shared.lanes=0);Rl|=i,e.lanes=i,e.memoizedState=u}}function Ws(e,t,r){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var n=e[t],a=n.callback;if(null!==a){if(n.callback=null,n=r,"function"!==typeof a)throw Error(s(191,a));a.call(n)}}}var Vs={},Gs=ka(Vs),Hs=ka(Vs),Ks=ka(Vs);function Ys(e){if(e===Vs)throw Error(s(174));return e}function Js(e,t){switch(_a(Ks,t),_a(Hs,e),_a(Gs,Vs),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Sa(Gs),_a(Gs,t)}function Xs(){Sa(Gs),Sa(Hs),Sa(Ks)}function $s(e){Ys(Ks.current);var t=Ys(Gs.current),r=le(t,e.type);t!==r&&(_a(Hs,e),_a(Gs,r))}function Qs(e){Hs.current===e&&(Sa(Gs),Sa(Hs))}var Zs=ka(0);function ei(e){for(var t=e;null!==t;){if(13===t.tag){var r=t.memoizedState;if(null!==r&&(null===(r=r.dehydrated)||"$?"===r.data||"$!"===r.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ti=[];function ri(){for(var e=0;e<ti.length;e++)ti[e]._workInProgressVersionPrimary=null;ti.length=0}var ni=b.ReactCurrentDispatcher,ai=b.ReactCurrentBatchConfig,si=0,ii=null,oi=null,li=null,ci=!1,di=!1,ui=0,pi=0;function mi(){throw Error(s(321))}function hi(e,t){if(null===t)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!on(e[r],t[r]))return!1;return!0}function fi(e,t,r,n,a,i){if(si=i,ii=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ni.current=null===e||null===e.memoizedState?Qi:Zi,e=r(n,a),di){i=0;do{if(di=!1,ui=0,25<=i)throw Error(s(301));i+=1,li=oi=null,t.updateQueue=null,ni.current=eo,e=r(n,a)}while(di)}if(ni.current=$i,t=null!==oi&&null!==oi.next,si=0,li=oi=ii=null,ci=!1,t)throw Error(s(300));return e}function gi(){var e=0!==ui;return ui=0,e}function xi(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===li?ii.memoizedState=li=e:li=li.next=e,li}function yi(){if(null===oi){var e=ii.alternate;e=null!==e?e.memoizedState:null}else e=oi.next;var t=null===li?ii.memoizedState:li.next;if(null!==t)li=t,oi=e;else{if(null===e)throw Error(s(310));e={memoizedState:(oi=e).memoizedState,baseState:oi.baseState,baseQueue:oi.baseQueue,queue:oi.queue,next:null},null===li?ii.memoizedState=li=e:li=li.next=e}return li}function vi(e,t){return"function"===typeof t?t(e):t}function bi(e){var t=yi(),r=t.queue;if(null===r)throw Error(s(311));r.lastRenderedReducer=e;var n=oi,a=n.baseQueue,i=r.pending;if(null!==i){if(null!==a){var o=a.next;a.next=i.next,i.next=o}n.baseQueue=a=i,r.pending=null}if(null!==a){i=a.next,n=n.baseState;var l=o=null,c=null,d=i;do{var u=d.lane;if((si&u)===u)null!==c&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),n=d.hasEagerState?d.eagerState:e(n,d.action);else{var p={lane:u,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};null===c?(l=c=p,o=n):c=c.next=p,ii.lanes|=u,Rl|=u}d=d.next}while(null!==d&&d!==i);null===c?o=n:c.next=l,on(n,t.memoizedState)||(vo=!0),t.memoizedState=n,t.baseState=o,t.baseQueue=c,r.lastRenderedState=n}if(null!==(e=r.interleaved)){a=e;do{i=a.lane,ii.lanes|=i,Rl|=i,a=a.next}while(a!==e)}else null===a&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function ji(e){var t=yi(),r=t.queue;if(null===r)throw Error(s(311));r.lastRenderedReducer=e;var n=r.dispatch,a=r.pending,i=t.memoizedState;if(null!==a){r.pending=null;var o=a=a.next;do{i=e(i,o.action),o=o.next}while(o!==a);on(i,t.memoizedState)||(vo=!0),t.memoizedState=i,null===t.baseQueue&&(t.baseState=i),r.lastRenderedState=i}return[i,n]}function wi(){}function Ni(e,t){var r=ii,n=yi(),a=t(),i=!on(n.memoizedState,a);if(i&&(n.memoizedState=a,vo=!0),n=n.queue,Di(_i.bind(null,r,n,e),[e]),n.getSnapshot!==t||i||null!==li&&1&li.memoizedState.tag){if(r.flags|=2048,Pi(9,Si.bind(null,r,n,a,t),void 0,null),null===Ol)throw Error(s(349));0!==(30&si)||ki(r,t,a)}return a}function ki(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},null===(t=ii.updateQueue)?(t={lastEffect:null,stores:null},ii.updateQueue=t,t.stores=[e]):null===(r=t.stores)?t.stores=[e]:r.push(e)}function Si(e,t,r,n){t.value=r,t.getSnapshot=n,Ci(t)&&Ai(e)}function _i(e,t,r){return r(function(){Ci(t)&&Ai(e)})}function Ci(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!on(e,r)}catch(n){return!0}}function Ai(e){var t=Ms(e,1);null!==t&&rc(t,e,1,-1)}function Oi(e){var t=xi();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:vi,lastRenderedState:e},t.queue=e,e=e.dispatch=Ki.bind(null,ii,e),[t.memoizedState,e]}function Pi(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},null===(t=ii.updateQueue)?(t={lastEffect:null,stores:null},ii.updateQueue=t,t.lastEffect=e.next=e):null===(r=t.lastEffect)?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e),e}function Ei(){return yi().memoizedState}function Ti(e,t,r,n){var a=xi();ii.flags|=e,a.memoizedState=Pi(1|t,r,void 0,void 0===n?null:n)}function Ii(e,t,r,n){var a=yi();n=void 0===n?null:n;var s=void 0;if(null!==oi){var i=oi.memoizedState;if(s=i.destroy,null!==n&&hi(n,i.deps))return void(a.memoizedState=Pi(t,r,s,n))}ii.flags|=e,a.memoizedState=Pi(1|t,r,s,n)}function Mi(e,t){return Ti(8390656,8,e,t)}function Di(e,t){return Ii(2048,8,e,t)}function Ri(e,t){return Ii(4,2,e,t)}function Fi(e,t){return Ii(4,4,e,t)}function Li(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Bi(e,t,r){return r=null!==r&&void 0!==r?r.concat([e]):null,Ii(4,4,Li.bind(null,t,e),r)}function Ui(){}function zi(e,t){var r=yi();t=void 0===t?null:t;var n=r.memoizedState;return null!==n&&null!==t&&hi(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function qi(e,t){var r=yi();t=void 0===t?null:t;var n=r.memoizedState;return null!==n&&null!==t&&hi(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function Wi(e,t,r){return 0===(21&si)?(e.baseState&&(e.baseState=!1,vo=!0),e.memoizedState=r):(on(r,t)||(r=ft(),ii.lanes|=r,Rl|=r,e.baseState=!0),t)}function Vi(e,t){var r=vt;vt=0!==r&&4>r?r:4,e(!0);var n=ai.transition;ai.transition={};try{e(!1),t()}finally{vt=r,ai.transition=n}}function Gi(){return yi().memoizedState}function Hi(e,t,r){var n=tc(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},Yi(e))Ji(t,r);else if(null!==(r=Is(e,t,r,n))){rc(r,e,n,ec()),Xi(r,t,n)}}function Ki(e,t,r){var n=tc(e),a={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(Yi(e))Ji(t,a);else{var s=e.alternate;if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var i=t.lastRenderedState,o=s(i,r);if(a.hasEagerState=!0,a.eagerState=o,on(o,i)){var l=t.interleaved;return null===l?(a.next=a,Ts(t)):(a.next=l.next,l.next=a),void(t.interleaved=a)}}catch(c){}null!==(r=Is(e,t,a,n))&&(rc(r,e,n,a=ec()),Xi(r,t,n))}}function Yi(e){var t=e.alternate;return e===ii||null!==t&&t===ii}function Ji(e,t){di=ci=!0;var r=e.pending;null===r?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function Xi(e,t,r){if(0!==(4194240&r)){var n=t.lanes;r|=n&=e.pendingLanes,t.lanes=r,yt(e,r)}}var $i={readContext:Ps,useCallback:mi,useContext:mi,useEffect:mi,useImperativeHandle:mi,useInsertionEffect:mi,useLayoutEffect:mi,useMemo:mi,useReducer:mi,useRef:mi,useState:mi,useDebugValue:mi,useDeferredValue:mi,useTransition:mi,useMutableSource:mi,useSyncExternalStore:mi,useId:mi,unstable_isNewReconciler:!1},Qi={readContext:Ps,useCallback:function(e,t){return xi().memoizedState=[e,void 0===t?null:t],e},useContext:Ps,useEffect:Mi,useImperativeHandle:function(e,t,r){return r=null!==r&&void 0!==r?r.concat([e]):null,Ti(4194308,4,Li.bind(null,t,e),r)},useLayoutEffect:function(e,t){return Ti(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ti(4,2,e,t)},useMemo:function(e,t){var r=xi();return t=void 0===t?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=xi();return t=void 0!==r?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=Hi.bind(null,ii,e),[n.memoizedState,e]},useRef:function(e){return e={current:e},xi().memoizedState=e},useState:Oi,useDebugValue:Ui,useDeferredValue:function(e){return xi().memoizedState=e},useTransition:function(){var e=Oi(!1),t=e[0];return e=Vi.bind(null,e[1]),xi().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=ii,a=xi();if(as){if(void 0===r)throw Error(s(407));r=r()}else{if(r=t(),null===Ol)throw Error(s(349));0!==(30&si)||ki(n,t,r)}a.memoizedState=r;var i={value:r,getSnapshot:t};return a.queue=i,Mi(_i.bind(null,n,i,e),[e]),n.flags|=2048,Pi(9,Si.bind(null,n,i,r,t),void 0,null),r},useId:function(){var e=xi(),t=Ol.identifierPrefix;if(as){var r=$a;t=":"+t+"R"+(r=(Xa&~(1<<32-it(Xa)-1)).toString(32)+r),0<(r=ui++)&&(t+="H"+r.toString(32)),t+=":"}else t=":"+t+"r"+(r=pi++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Zi={readContext:Ps,useCallback:zi,useContext:Ps,useEffect:Di,useImperativeHandle:Bi,useInsertionEffect:Ri,useLayoutEffect:Fi,useMemo:qi,useReducer:bi,useRef:Ei,useState:function(){return bi(vi)},useDebugValue:Ui,useDeferredValue:function(e){return Wi(yi(),oi.memoizedState,e)},useTransition:function(){return[bi(vi)[0],yi().memoizedState]},useMutableSource:wi,useSyncExternalStore:Ni,useId:Gi,unstable_isNewReconciler:!1},eo={readContext:Ps,useCallback:zi,useContext:Ps,useEffect:Di,useImperativeHandle:Bi,useInsertionEffect:Ri,useLayoutEffect:Fi,useMemo:qi,useReducer:ji,useRef:Ei,useState:function(){return ji(vi)},useDebugValue:Ui,useDeferredValue:function(e){var t=yi();return null===oi?t.memoizedState=e:Wi(t,oi.memoizedState,e)},useTransition:function(){return[ji(vi)[0],yi().memoizedState]},useMutableSource:wi,useSyncExternalStore:Ni,useId:Gi,unstable_isNewReconciler:!1};function to(e,t){if(e&&e.defaultProps){for(var r in t=F({},t),e=e.defaultProps)void 0===t[r]&&(t[r]=e[r]);return t}return t}function ro(e,t,r,n){r=null===(r=r(n,t=e.memoizedState))||void 0===r?t:F({},t,r),e.memoizedState=r,0===e.lanes&&(e.updateQueue.baseState=r)}var no={isMounted:function(e){return!!(e=e._reactInternals)&&qe(e)===e},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=ec(),a=tc(e),s=Ls(n,a);s.payload=t,void 0!==r&&null!==r&&(s.callback=r),null!==(t=Bs(e,s,a))&&(rc(t,e,a,n),Us(t,e,a))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=ec(),a=tc(e),s=Ls(n,a);s.tag=1,s.payload=t,void 0!==r&&null!==r&&(s.callback=r),null!==(t=Bs(e,s,a))&&(rc(t,e,a,n),Us(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=ec(),n=tc(e),a=Ls(r,n);a.tag=2,void 0!==t&&null!==t&&(a.callback=t),null!==(t=Bs(e,a,n))&&(rc(t,e,n,r),Us(t,e,n))}};function ao(e,t,r,n,a,s,i){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(n,s,i):!t.prototype||!t.prototype.isPureReactComponent||(!ln(r,n)||!ln(a,s))}function so(e,t,r){var n=!1,a=Ca,s=t.contextType;return"object"===typeof s&&null!==s?s=Ps(s):(a=Ta(t)?Pa:Aa.current,s=(n=null!==(n=t.contextTypes)&&void 0!==n)?Ea(e,a):Ca),t=new t(r,s),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=no,e.stateNode=t,t._reactInternals=e,n&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=s),t}function io(e,t,r,n){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(r,n),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&no.enqueueReplaceState(t,t.state,null)}function oo(e,t,r,n){var a=e.stateNode;a.props=r,a.state=e.memoizedState,a.refs={},Rs(e);var s=t.contextType;"object"===typeof s&&null!==s?a.context=Ps(s):(s=Ta(t)?Pa:Aa.current,a.context=Ea(e,s)),a.state=e.memoizedState,"function"===typeof(s=t.getDerivedStateFromProps)&&(ro(e,t,s,r),a.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof a.getSnapshotBeforeUpdate||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||(t=a.state,"function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount(),t!==a.state&&no.enqueueReplaceState(a,a.state,null),qs(e,r,a,n),a.state=e.memoizedState),"function"===typeof a.componentDidMount&&(e.flags|=4194308)}function lo(e,t){try{var r="",n=t;do{r+=z(n),n=n.return}while(n);var a=r}catch(s){a="\nError generating stack: "+s.message+"\n"+s.stack}return{value:e,source:t,stack:a,digest:null}}function co(e,t,r){return{value:e,source:null,stack:null!=r?r:null,digest:null!=t?t:null}}function uo(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var po="function"===typeof WeakMap?WeakMap:Map;function mo(e,t,r){(r=Ls(-1,r)).tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){Vl||(Vl=!0,Gl=n),uo(0,t)},r}function ho(e,t,r){(r=Ls(-1,r)).tag=3;var n=e.type.getDerivedStateFromError;if("function"===typeof n){var a=t.value;r.payload=function(){return n(a)},r.callback=function(){uo(0,t)}}var s=e.stateNode;return null!==s&&"function"===typeof s.componentDidCatch&&(r.callback=function(){uo(0,t),"function"!==typeof n&&(null===Hl?Hl=new Set([this]):Hl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),r}function fo(e,t,r){var n=e.pingCache;if(null===n){n=e.pingCache=new po;var a=new Set;n.set(t,a)}else void 0===(a=n.get(t))&&(a=new Set,n.set(t,a));a.has(r)||(a.add(r),e=Sc.bind(null,e,t,r),t.then(e,e))}function go(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function xo(e,t,r,n,a){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,1===r.tag&&(null===r.alternate?r.tag=17:((t=Ls(-1,1)).tag=2,Bs(r,t,1))),r.lanes|=1),e):(e.flags|=65536,e.lanes=a,e)}var yo=b.ReactCurrentOwner,vo=!1;function bo(e,t,r,n){t.child=null===e?js(t,null,r,n):bs(t,e.child,r,n)}function jo(e,t,r,n,a){r=r.render;var s=t.ref;return Os(t,a),n=fi(e,t,r,n,s,a),r=gi(),null===e||vo?(as&&r&&es(t),t.flags|=1,bo(e,t,n,a),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Vo(e,t,a))}function wo(e,t,r,n,a){if(null===e){var s=r.type;return"function"!==typeof s||Tc(s)||void 0!==s.defaultProps||null!==r.compare||void 0!==r.defaultProps?((e=Mc(r.type,null,n,t,t.mode,a)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,No(e,t,s,n,a))}if(s=e.child,0===(e.lanes&a)){var i=s.memoizedProps;if((r=null!==(r=r.compare)?r:ln)(i,n)&&e.ref===t.ref)return Vo(e,t,a)}return t.flags|=1,(e=Ic(s,n)).ref=t.ref,e.return=t,t.child=e}function No(e,t,r,n,a){if(null!==e){var s=e.memoizedProps;if(ln(s,n)&&e.ref===t.ref){if(vo=!1,t.pendingProps=n=s,0===(e.lanes&a))return t.lanes=e.lanes,Vo(e,t,a);0!==(131072&e.flags)&&(vo=!0)}}return _o(e,t,r,n,a)}function ko(e,t,r){var n=t.pendingProps,a=n.children,s=null!==e?e.memoizedState:null;if("hidden"===n.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},_a(Il,Tl),Tl|=r;else{if(0===(1073741824&r))return e=null!==s?s.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,_a(Il,Tl),Tl|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=null!==s?s.baseLanes:r,_a(Il,Tl),Tl|=n}else null!==s?(n=s.baseLanes|r,t.memoizedState=null):n=r,_a(Il,Tl),Tl|=n;return bo(e,t,a,r),t.child}function So(e,t){var r=t.ref;(null===e&&null!==r||null!==e&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function _o(e,t,r,n,a){var s=Ta(r)?Pa:Aa.current;return s=Ea(t,s),Os(t,a),r=fi(e,t,r,n,s,a),n=gi(),null===e||vo?(as&&n&&es(t),t.flags|=1,bo(e,t,r,a),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Vo(e,t,a))}function Co(e,t,r,n,a){if(Ta(r)){var s=!0;Ra(t)}else s=!1;if(Os(t,a),null===t.stateNode)Wo(e,t),so(t,r,n),oo(t,r,n,a),n=!0;else if(null===e){var i=t.stateNode,o=t.memoizedProps;i.props=o;var l=i.context,c=r.contextType;"object"===typeof c&&null!==c?c=Ps(c):c=Ea(t,c=Ta(r)?Pa:Aa.current);var d=r.getDerivedStateFromProps,u="function"===typeof d||"function"===typeof i.getSnapshotBeforeUpdate;u||"function"!==typeof i.UNSAFE_componentWillReceiveProps&&"function"!==typeof i.componentWillReceiveProps||(o!==n||l!==c)&&io(t,i,n,c),Ds=!1;var p=t.memoizedState;i.state=p,qs(t,n,i,a),l=t.memoizedState,o!==n||p!==l||Oa.current||Ds?("function"===typeof d&&(ro(t,r,d,n),l=t.memoizedState),(o=Ds||ao(t,r,o,n,p,l,c))?(u||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||("function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount()),"function"===typeof i.componentDidMount&&(t.flags|=4194308)):("function"===typeof i.componentDidMount&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=l),i.props=n,i.state=l,i.context=c,n=o):("function"===typeof i.componentDidMount&&(t.flags|=4194308),n=!1)}else{i=t.stateNode,Fs(e,t),o=t.memoizedProps,c=t.type===t.elementType?o:to(t.type,o),i.props=c,u=t.pendingProps,p=i.context,"object"===typeof(l=r.contextType)&&null!==l?l=Ps(l):l=Ea(t,l=Ta(r)?Pa:Aa.current);var m=r.getDerivedStateFromProps;(d="function"===typeof m||"function"===typeof i.getSnapshotBeforeUpdate)||"function"!==typeof i.UNSAFE_componentWillReceiveProps&&"function"!==typeof i.componentWillReceiveProps||(o!==u||p!==l)&&io(t,i,n,l),Ds=!1,p=t.memoizedState,i.state=p,qs(t,n,i,a);var h=t.memoizedState;o!==u||p!==h||Oa.current||Ds?("function"===typeof m&&(ro(t,r,m,n),h=t.memoizedState),(c=Ds||ao(t,r,c,n,p,h,l)||!1)?(d||"function"!==typeof i.UNSAFE_componentWillUpdate&&"function"!==typeof i.componentWillUpdate||("function"===typeof i.componentWillUpdate&&i.componentWillUpdate(n,h,l),"function"===typeof i.UNSAFE_componentWillUpdate&&i.UNSAFE_componentWillUpdate(n,h,l)),"function"===typeof i.componentDidUpdate&&(t.flags|=4),"function"===typeof i.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof i.componentDidUpdate||o===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),"function"!==typeof i.getSnapshotBeforeUpdate||o===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=h),i.props=n,i.state=h,i.context=l,n=c):("function"!==typeof i.componentDidUpdate||o===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),"function"!==typeof i.getSnapshotBeforeUpdate||o===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),n=!1)}return Ao(e,t,r,n,s,a)}function Ao(e,t,r,n,a,s){So(e,t);var i=0!==(128&t.flags);if(!n&&!i)return a&&Fa(t,r,!1),Vo(e,t,s);n=t.stateNode,yo.current=t;var o=i&&"function"!==typeof r.getDerivedStateFromError?null:n.render();return t.flags|=1,null!==e&&i?(t.child=bs(t,e.child,null,s),t.child=bs(t,null,o,s)):bo(e,t,o,s),t.memoizedState=n.state,a&&Fa(t,r,!0),t.child}function Oo(e){var t=e.stateNode;t.pendingContext?Ma(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Ma(0,t.context,!1),Js(e,t.containerInfo)}function Po(e,t,r,n,a){return ms(),hs(a),t.flags|=256,bo(e,t,r,n),t.child}var Eo,To,Io,Mo,Do={dehydrated:null,treeContext:null,retryLane:0};function Ro(e){return{baseLanes:e,cachePool:null,transitions:null}}function Fo(e,t,r){var n,a=t.pendingProps,i=Zs.current,o=!1,l=0!==(128&t.flags);if((n=l)||(n=(null===e||null!==e.memoizedState)&&0!==(2&i)),n?(o=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(i|=1),_a(Zs,1&i),null===e)return cs(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=a.children,e=a.fallback,o?(a=t.mode,o=t.child,l={mode:"hidden",children:l},0===(1&a)&&null!==o?(o.childLanes=0,o.pendingProps=l):o=Rc(l,a,0,null),e=Dc(e,a,r,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=Ro(r),t.memoizedState=Do,e):Lo(t,l));if(null!==(i=e.memoizedState)&&null!==(n=i.dehydrated))return function(e,t,r,n,a,i,o){if(r)return 256&t.flags?(t.flags&=-257,Bo(e,t,o,n=co(Error(s(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(i=n.fallback,a=t.mode,n=Rc({mode:"visible",children:n.children},a,0,null),(i=Dc(i,a,o,null)).flags|=2,n.return=t,i.return=t,n.sibling=i,t.child=n,0!==(1&t.mode)&&bs(t,e.child,null,o),t.child.memoizedState=Ro(o),t.memoizedState=Do,i);if(0===(1&t.mode))return Bo(e,t,o,null);if("$!"===a.data){if(n=a.nextSibling&&a.nextSibling.dataset)var l=n.dgst;return n=l,Bo(e,t,o,n=co(i=Error(s(419)),n,void 0))}if(l=0!==(o&e.childLanes),vo||l){if(null!==(n=Ol)){switch(o&-o){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}0!==(a=0!==(a&(n.suspendedLanes|o))?0:a)&&a!==i.retryLane&&(i.retryLane=a,Ms(e,a),rc(n,e,a,-1))}return fc(),Bo(e,t,o,n=co(Error(s(421))))}return"$?"===a.data?(t.flags|=128,t.child=e.child,t=Cc.bind(null,e),a._reactRetry=t,null):(e=i.treeContext,ns=ca(a.nextSibling),rs=t,as=!0,ss=null,null!==e&&(Ka[Ya++]=Xa,Ka[Ya++]=$a,Ka[Ya++]=Ja,Xa=e.id,$a=e.overflow,Ja=t),t=Lo(t,n.children),t.flags|=4096,t)}(e,t,l,a,n,i,r);if(o){o=a.fallback,l=t.mode,n=(i=e.child).sibling;var c={mode:"hidden",children:a.children};return 0===(1&l)&&t.child!==i?((a=t.child).childLanes=0,a.pendingProps=c,t.deletions=null):(a=Ic(i,c)).subtreeFlags=14680064&i.subtreeFlags,null!==n?o=Ic(n,o):(o=Dc(o,l,r,null)).flags|=2,o.return=t,a.return=t,a.sibling=o,t.child=a,a=o,o=t.child,l=null===(l=e.child.memoizedState)?Ro(r):{baseLanes:l.baseLanes|r,cachePool:null,transitions:l.transitions},o.memoizedState=l,o.childLanes=e.childLanes&~r,t.memoizedState=Do,a}return e=(o=e.child).sibling,a=Ic(o,{mode:"visible",children:a.children}),0===(1&t.mode)&&(a.lanes=r),a.return=t,a.sibling=null,null!==e&&(null===(r=t.deletions)?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=a,t.memoizedState=null,a}function Lo(e,t){return(t=Rc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Bo(e,t,r,n){return null!==n&&hs(n),bs(t,e.child,null,r),(e=Lo(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Uo(e,t,r){e.lanes|=t;var n=e.alternate;null!==n&&(n.lanes|=t),As(e.return,t,r)}function zo(e,t,r,n,a){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:a}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=n,s.tail=r,s.tailMode=a)}function qo(e,t,r){var n=t.pendingProps,a=n.revealOrder,s=n.tail;if(bo(e,t,n.children,r),0!==(2&(n=Zs.current)))n=1&n|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Uo(e,r,t);else if(19===e.tag)Uo(e,r,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(_a(Zs,n),0===(1&t.mode))t.memoizedState=null;else switch(a){case"forwards":for(r=t.child,a=null;null!==r;)null!==(e=r.alternate)&&null===ei(e)&&(a=r),r=r.sibling;null===(r=a)?(a=t.child,t.child=null):(a=r.sibling,r.sibling=null),zo(t,!1,a,r,s);break;case"backwards":for(r=null,a=t.child,t.child=null;null!==a;){if(null!==(e=a.alternate)&&null===ei(e)){t.child=a;break}e=a.sibling,a.sibling=r,r=a,a=e}zo(t,!0,r,null,s);break;case"together":zo(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Wo(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Vo(e,t,r){if(null!==e&&(t.dependencies=e.dependencies),Rl|=t.lanes,0===(r&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(s(153));if(null!==t.child){for(r=Ic(e=t.child,e.pendingProps),t.child=r,r.return=t;null!==e.sibling;)e=e.sibling,(r=r.sibling=Ic(e,e.pendingProps)).return=t;r.sibling=null}return t.child}function Go(e,t){if(!as)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;null!==t;)null!==t.alternate&&(r=t),t=t.sibling;null===r?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;null!==r;)null!==r.alternate&&(n=r),r=r.sibling;null===n?t||null===e.tail?e.tail=null:e.tail.sibling=null:n.sibling=null}}function Ho(e){var t=null!==e.alternate&&e.alternate.child===e.child,r=0,n=0;if(t)for(var a=e.child;null!==a;)r|=a.lanes|a.childLanes,n|=14680064&a.subtreeFlags,n|=14680064&a.flags,a.return=e,a=a.sibling;else for(a=e.child;null!==a;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags,n|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function Ko(e,t,r){var n=t.pendingProps;switch(ts(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ho(t),null;case 1:case 17:return Ta(t.type)&&Ia(),Ho(t),null;case 3:return n=t.stateNode,Xs(),Sa(Oa),Sa(Aa),ri(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==e&&null!==e.child||(us(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==ss&&(ic(ss),ss=null))),To(e,t),Ho(t),null;case 5:Qs(t);var a=Ys(Ks.current);if(r=t.type,null!==e&&null!=t.stateNode)Io(e,t,r,n,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(null===t.stateNode)throw Error(s(166));return Ho(t),null}if(e=Ys(Gs.current),us(t)){n=t.stateNode,r=t.type;var i=t.memoizedProps;switch(n[pa]=t,n[ma]=i,e=0!==(1&t.mode),r){case"dialog":Bn("cancel",n),Bn("close",n);break;case"iframe":case"object":case"embed":Bn("load",n);break;case"video":case"audio":for(a=0;a<Dn.length;a++)Bn(Dn[a],n);break;case"source":Bn("error",n);break;case"img":case"image":case"link":Bn("error",n),Bn("load",n);break;case"details":Bn("toggle",n);break;case"input":X(n,i),Bn("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!i.multiple},Bn("invalid",n);break;case"textarea":ae(n,i),Bn("invalid",n)}for(var l in ye(r,i),a=null,i)if(i.hasOwnProperty(l)){var c=i[l];"children"===l?"string"===typeof c?n.textContent!==c&&(!0!==i.suppressHydrationWarning&&Qn(n.textContent,c,e),a=["children",c]):"number"===typeof c&&n.textContent!==""+c&&(!0!==i.suppressHydrationWarning&&Qn(n.textContent,c,e),a=["children",""+c]):o.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&Bn("scroll",n)}switch(r){case"input":H(n),Z(n,i,!0);break;case"textarea":H(n),ie(n);break;case"select":case"option":break;default:"function"===typeof i.onClick&&(n.onclick=Zn)}n=a,t.updateQueue=n,null!==n&&(t.flags|=4)}else{l=9===a.nodeType?a:a.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=oe(r)),"http://www.w3.org/1999/xhtml"===e?"script"===r?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof n.is?e=l.createElement(r,{is:n.is}):(e=l.createElement(r),"select"===r&&(l=e,n.multiple?l.multiple=!0:n.size&&(l.size=n.size))):e=l.createElementNS(e,r),e[pa]=t,e[ma]=n,Eo(e,t,!1,!1),t.stateNode=e;e:{switch(l=ve(r,n),r){case"dialog":Bn("cancel",e),Bn("close",e),a=n;break;case"iframe":case"object":case"embed":Bn("load",e),a=n;break;case"video":case"audio":for(a=0;a<Dn.length;a++)Bn(Dn[a],e);a=n;break;case"source":Bn("error",e),a=n;break;case"img":case"image":case"link":Bn("error",e),Bn("load",e),a=n;break;case"details":Bn("toggle",e),a=n;break;case"input":X(e,n),a=J(e,n),Bn("invalid",e);break;case"option":default:a=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},a=F({},n,{value:void 0}),Bn("invalid",e);break;case"textarea":ae(e,n),a=ne(e,n),Bn("invalid",e)}for(i in ye(r,a),c=a)if(c.hasOwnProperty(i)){var d=c[i];"style"===i?ge(e,d):"dangerouslySetInnerHTML"===i?null!=(d=d?d.__html:void 0)&&ue(e,d):"children"===i?"string"===typeof d?("textarea"!==r||""!==d)&&pe(e,d):"number"===typeof d&&pe(e,""+d):"suppressContentEditableWarning"!==i&&"suppressHydrationWarning"!==i&&"autoFocus"!==i&&(o.hasOwnProperty(i)?null!=d&&"onScroll"===i&&Bn("scroll",e):null!=d&&v(e,i,d,l))}switch(r){case"input":H(e),Z(e,n,!1);break;case"textarea":H(e),ie(e);break;case"option":null!=n.value&&e.setAttribute("value",""+V(n.value));break;case"select":e.multiple=!!n.multiple,null!=(i=n.value)?re(e,!!n.multiple,i,!1):null!=n.defaultValue&&re(e,!!n.multiple,n.defaultValue,!0);break;default:"function"===typeof a.onClick&&(e.onclick=Zn)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Ho(t),null;case 6:if(e&&null!=t.stateNode)Mo(e,t,e.memoizedProps,n);else{if("string"!==typeof n&&null===t.stateNode)throw Error(s(166));if(r=Ys(Ks.current),Ys(Gs.current),us(t)){if(n=t.stateNode,r=t.memoizedProps,n[pa]=t,(i=n.nodeValue!==r)&&null!==(e=rs))switch(e.tag){case 3:Qn(n.nodeValue,r,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Qn(n.nodeValue,r,0!==(1&e.mode))}i&&(t.flags|=4)}else(n=(9===r.nodeType?r:r.ownerDocument).createTextNode(n))[pa]=t,t.stateNode=n}return Ho(t),null;case 13:if(Sa(Zs),n=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(as&&null!==ns&&0!==(1&t.mode)&&0===(128&t.flags))ps(),ms(),t.flags|=98560,i=!1;else if(i=us(t),null!==n&&null!==n.dehydrated){if(null===e){if(!i)throw Error(s(318));if(!(i=null!==(i=t.memoizedState)?i.dehydrated:null))throw Error(s(317));i[pa]=t}else ms(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Ho(t),i=!1}else null!==ss&&(ic(ss),ss=null),i=!0;if(!i)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=r,t):((n=null!==n)!==(null!==e&&null!==e.memoizedState)&&n&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&Zs.current)?0===Ml&&(Ml=3):fc())),null!==t.updateQueue&&(t.flags|=4),Ho(t),null);case 4:return Xs(),To(e,t),null===e&&qn(t.stateNode.containerInfo),Ho(t),null;case 10:return Cs(t.type._context),Ho(t),null;case 19:if(Sa(Zs),null===(i=t.memoizedState))return Ho(t),null;if(n=0!==(128&t.flags),null===(l=i.rendering))if(n)Go(i,!1);else{if(0!==Ml||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=ei(e))){for(t.flags|=128,Go(i,!1),null!==(n=l.updateQueue)&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;null!==r;)e=n,(i=r).flags&=14680066,null===(l=i.alternate)?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=l.childLanes,i.lanes=l.lanes,i.child=l.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=l.memoizedProps,i.memoizedState=l.memoizedState,i.updateQueue=l.updateQueue,i.type=l.type,e=l.dependencies,i.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return _a(Zs,1&Zs.current|2),t.child}e=e.sibling}null!==i.tail&&$e()>ql&&(t.flags|=128,n=!0,Go(i,!1),t.lanes=4194304)}else{if(!n)if(null!==(e=ei(l))){if(t.flags|=128,n=!0,null!==(r=e.updateQueue)&&(t.updateQueue=r,t.flags|=4),Go(i,!0),null===i.tail&&"hidden"===i.tailMode&&!l.alternate&&!as)return Ho(t),null}else 2*$e()-i.renderingStartTime>ql&&1073741824!==r&&(t.flags|=128,n=!0,Go(i,!1),t.lanes=4194304);i.isBackwards?(l.sibling=t.child,t.child=l):(null!==(r=i.last)?r.sibling=l:t.child=l,i.last=l)}return null!==i.tail?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=$e(),t.sibling=null,r=Zs.current,_a(Zs,n?1&r|2:1&r),t):(Ho(t),null);case 22:case 23:return uc(),n=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==n&&(t.flags|=8192),n&&0!==(1&t.mode)?0!==(1073741824&Tl)&&(Ho(t),6&t.subtreeFlags&&(t.flags|=8192)):Ho(t),null;case 24:case 25:return null}throw Error(s(156,t.tag))}function Yo(e,t){switch(ts(t),t.tag){case 1:return Ta(t.type)&&Ia(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Xs(),Sa(Oa),Sa(Aa),ri(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Qs(t),null;case 13:if(Sa(Zs),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(s(340));ms()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Sa(Zs),null;case 4:return Xs(),null;case 10:return Cs(t.type._context),null;case 22:case 23:return uc(),null;default:return null}}Eo=function(e,t){for(var r=t.child;null!==r;){if(5===r.tag||6===r.tag)e.appendChild(r.stateNode);else if(4!==r.tag&&null!==r.child){r.child.return=r,r=r.child;continue}if(r===t)break;for(;null===r.sibling;){if(null===r.return||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}},To=function(){},Io=function(e,t,r,n){var a=e.memoizedProps;if(a!==n){e=t.stateNode,Ys(Gs.current);var s,i=null;switch(r){case"input":a=J(e,a),n=J(e,n),i=[];break;case"select":a=F({},a,{value:void 0}),n=F({},n,{value:void 0}),i=[];break;case"textarea":a=ne(e,a),n=ne(e,n),i=[];break;default:"function"!==typeof a.onClick&&"function"===typeof n.onClick&&(e.onclick=Zn)}for(d in ye(r,n),r=null,a)if(!n.hasOwnProperty(d)&&a.hasOwnProperty(d)&&null!=a[d])if("style"===d){var l=a[d];for(s in l)l.hasOwnProperty(s)&&(r||(r={}),r[s]="")}else"dangerouslySetInnerHTML"!==d&&"children"!==d&&"suppressContentEditableWarning"!==d&&"suppressHydrationWarning"!==d&&"autoFocus"!==d&&(o.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in n){var c=n[d];if(l=null!=a?a[d]:void 0,n.hasOwnProperty(d)&&c!==l&&(null!=c||null!=l))if("style"===d)if(l){for(s in l)!l.hasOwnProperty(s)||c&&c.hasOwnProperty(s)||(r||(r={}),r[s]="");for(s in c)c.hasOwnProperty(s)&&l[s]!==c[s]&&(r||(r={}),r[s]=c[s])}else r||(i||(i=[]),i.push(d,r)),r=c;else"dangerouslySetInnerHTML"===d?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(i=i||[]).push(d,c)):"children"===d?"string"!==typeof c&&"number"!==typeof c||(i=i||[]).push(d,""+c):"suppressContentEditableWarning"!==d&&"suppressHydrationWarning"!==d&&(o.hasOwnProperty(d)?(null!=c&&"onScroll"===d&&Bn("scroll",e),i||l===c||(i=[])):(i=i||[]).push(d,c))}r&&(i=i||[]).push("style",r);var d=i;(t.updateQueue=d)&&(t.flags|=4)}},Mo=function(e,t,r,n){r!==n&&(t.flags|=4)};var Jo=!1,Xo=!1,$o="function"===typeof WeakSet?WeakSet:Set,Qo=null;function Zo(e,t){var r=e.ref;if(null!==r)if("function"===typeof r)try{r(null)}catch(n){kc(e,t,n)}else r.current=null}function el(e,t,r){try{r()}catch(n){kc(e,t,n)}}var tl=!1;function rl(e,t,r){var n=t.updateQueue;if(null!==(n=null!==n?n.lastEffect:null)){var a=n=n.next;do{if((a.tag&e)===e){var s=a.destroy;a.destroy=void 0,void 0!==s&&el(t,r,s)}a=a.next}while(a!==n)}}function nl(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function al(e){var t=e.ref;if(null!==t){var r=e.stateNode;e.tag,e=r,"function"===typeof t?t(e):t.current=e}}function sl(e){var t=e.alternate;null!==t&&(e.alternate=null,sl(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[pa],delete t[ma],delete t[fa],delete t[ga],delete t[xa])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function il(e){return 5===e.tag||3===e.tag||4===e.tag}function ol(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||il(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ll(e,t,r){var n=e.tag;if(5===n||6===n)e=e.stateNode,t?8===r.nodeType?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(8===r.nodeType?(t=r.parentNode).insertBefore(e,r):(t=r).appendChild(e),null!==(r=r._reactRootContainer)&&void 0!==r||null!==t.onclick||(t.onclick=Zn));else if(4!==n&&null!==(e=e.child))for(ll(e,t,r),e=e.sibling;null!==e;)ll(e,t,r),e=e.sibling}function cl(e,t,r){var n=e.tag;if(5===n||6===n)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(4!==n&&null!==(e=e.child))for(cl(e,t,r),e=e.sibling;null!==e;)cl(e,t,r),e=e.sibling}var dl=null,ul=!1;function pl(e,t,r){for(r=r.child;null!==r;)ml(e,t,r),r=r.sibling}function ml(e,t,r){if(st&&"function"===typeof st.onCommitFiberUnmount)try{st.onCommitFiberUnmount(at,r)}catch(o){}switch(r.tag){case 5:Xo||Zo(r,t);case 6:var n=dl,a=ul;dl=null,pl(e,t,r),ul=a,null!==(dl=n)&&(ul?(e=dl,r=r.stateNode,8===e.nodeType?e.parentNode.removeChild(r):e.removeChild(r)):dl.removeChild(r.stateNode));break;case 18:null!==dl&&(ul?(e=dl,r=r.stateNode,8===e.nodeType?la(e.parentNode,r):1===e.nodeType&&la(e,r),qt(e)):la(dl,r.stateNode));break;case 4:n=dl,a=ul,dl=r.stateNode.containerInfo,ul=!0,pl(e,t,r),dl=n,ul=a;break;case 0:case 11:case 14:case 15:if(!Xo&&(null!==(n=r.updateQueue)&&null!==(n=n.lastEffect))){a=n=n.next;do{var s=a,i=s.destroy;s=s.tag,void 0!==i&&(0!==(2&s)||0!==(4&s))&&el(r,t,i),a=a.next}while(a!==n)}pl(e,t,r);break;case 1:if(!Xo&&(Zo(r,t),"function"===typeof(n=r.stateNode).componentWillUnmount))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(o){kc(r,t,o)}pl(e,t,r);break;case 21:pl(e,t,r);break;case 22:1&r.mode?(Xo=(n=Xo)||null!==r.memoizedState,pl(e,t,r),Xo=n):pl(e,t,r);break;default:pl(e,t,r)}}function hl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var r=e.stateNode;null===r&&(r=e.stateNode=new $o),t.forEach(function(t){var n=Ac.bind(null,e,t);r.has(t)||(r.add(t),t.then(n,n))})}}function fl(e,t){var r=t.deletions;if(null!==r)for(var n=0;n<r.length;n++){var a=r[n];try{var i=e,o=t,l=o;e:for(;null!==l;){switch(l.tag){case 5:dl=l.stateNode,ul=!1;break e;case 3:case 4:dl=l.stateNode.containerInfo,ul=!0;break e}l=l.return}if(null===dl)throw Error(s(160));ml(i,o,a),dl=null,ul=!1;var c=a.alternate;null!==c&&(c.return=null),a.return=null}catch(d){kc(a,t,d)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)gl(t,e),t=t.sibling}function gl(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(fl(t,e),xl(e),4&n){try{rl(3,e,e.return),nl(3,e)}catch(g){kc(e,e.return,g)}try{rl(5,e,e.return)}catch(g){kc(e,e.return,g)}}break;case 1:fl(t,e),xl(e),512&n&&null!==r&&Zo(r,r.return);break;case 5:if(fl(t,e),xl(e),512&n&&null!==r&&Zo(r,r.return),32&e.flags){var a=e.stateNode;try{pe(a,"")}catch(g){kc(e,e.return,g)}}if(4&n&&null!=(a=e.stateNode)){var i=e.memoizedProps,o=null!==r?r.memoizedProps:i,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===i.type&&null!=i.name&&$(a,i),ve(l,o);var d=ve(l,i);for(o=0;o<c.length;o+=2){var u=c[o],p=c[o+1];"style"===u?ge(a,p):"dangerouslySetInnerHTML"===u?ue(a,p):"children"===u?pe(a,p):v(a,u,p,d)}switch(l){case"input":Q(a,i);break;case"textarea":se(a,i);break;case"select":var m=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!i.multiple;var h=i.value;null!=h?re(a,!!i.multiple,h,!1):m!==!!i.multiple&&(null!=i.defaultValue?re(a,!!i.multiple,i.defaultValue,!0):re(a,!!i.multiple,i.multiple?[]:"",!1))}a[ma]=i}catch(g){kc(e,e.return,g)}}break;case 6:if(fl(t,e),xl(e),4&n){if(null===e.stateNode)throw Error(s(162));a=e.stateNode,i=e.memoizedProps;try{a.nodeValue=i}catch(g){kc(e,e.return,g)}}break;case 3:if(fl(t,e),xl(e),4&n&&null!==r&&r.memoizedState.isDehydrated)try{qt(t.containerInfo)}catch(g){kc(e,e.return,g)}break;case 4:default:fl(t,e),xl(e);break;case 13:fl(t,e),xl(e),8192&(a=e.child).flags&&(i=null!==a.memoizedState,a.stateNode.isHidden=i,!i||null!==a.alternate&&null!==a.alternate.memoizedState||(zl=$e())),4&n&&hl(e);break;case 22:if(u=null!==r&&null!==r.memoizedState,1&e.mode?(Xo=(d=Xo)||u,fl(t,e),Xo=d):fl(t,e),xl(e),8192&n){if(d=null!==e.memoizedState,(e.stateNode.isHidden=d)&&!u&&0!==(1&e.mode))for(Qo=e,u=e.child;null!==u;){for(p=Qo=u;null!==Qo;){switch(h=(m=Qo).child,m.tag){case 0:case 11:case 14:case 15:rl(4,m,m.return);break;case 1:Zo(m,m.return);var f=m.stateNode;if("function"===typeof f.componentWillUnmount){n=m,r=m.return;try{t=n,f.props=t.memoizedProps,f.state=t.memoizedState,f.componentWillUnmount()}catch(g){kc(n,r,g)}}break;case 5:Zo(m,m.return);break;case 22:if(null!==m.memoizedState){jl(p);continue}}null!==h?(h.return=m,Qo=h):jl(p)}u=u.sibling}e:for(u=null,p=e;;){if(5===p.tag){if(null===u){u=p;try{a=p.stateNode,d?"function"===typeof(i=a.style).setProperty?i.setProperty("display","none","important"):i.display="none":(l=p.stateNode,o=void 0!==(c=p.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=fe("display",o))}catch(g){kc(e,e.return,g)}}}else if(6===p.tag){if(null===u)try{p.stateNode.nodeValue=d?"":p.memoizedProps}catch(g){kc(e,e.return,g)}}else if((22!==p.tag&&23!==p.tag||null===p.memoizedState||p===e)&&null!==p.child){p.child.return=p,p=p.child;continue}if(p===e)break e;for(;null===p.sibling;){if(null===p.return||p.return===e)break e;u===p&&(u=null),p=p.return}u===p&&(u=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:fl(t,e),xl(e),4&n&&hl(e);case 21:}}function xl(e){var t=e.flags;if(2&t){try{e:{for(var r=e.return;null!==r;){if(il(r)){var n=r;break e}r=r.return}throw Error(s(160))}switch(n.tag){case 5:var a=n.stateNode;32&n.flags&&(pe(a,""),n.flags&=-33),cl(e,ol(e),a);break;case 3:case 4:var i=n.stateNode.containerInfo;ll(e,ol(e),i);break;default:throw Error(s(161))}}catch(o){kc(e,e.return,o)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function yl(e,t,r){Qo=e,vl(e,t,r)}function vl(e,t,r){for(var n=0!==(1&e.mode);null!==Qo;){var a=Qo,s=a.child;if(22===a.tag&&n){var i=null!==a.memoizedState||Jo;if(!i){var o=a.alternate,l=null!==o&&null!==o.memoizedState||Xo;o=Jo;var c=Xo;if(Jo=i,(Xo=l)&&!c)for(Qo=a;null!==Qo;)l=(i=Qo).child,22===i.tag&&null!==i.memoizedState?wl(a):null!==l?(l.return=i,Qo=l):wl(a);for(;null!==s;)Qo=s,vl(s,t,r),s=s.sibling;Qo=a,Jo=o,Xo=c}bl(e)}else 0!==(8772&a.subtreeFlags)&&null!==s?(s.return=a,Qo=s):bl(e)}}function bl(e){for(;null!==Qo;){var t=Qo;if(0!==(8772&t.flags)){var r=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Xo||nl(5,t);break;case 1:var n=t.stateNode;if(4&t.flags&&!Xo)if(null===r)n.componentDidMount();else{var a=t.elementType===t.type?r.memoizedProps:to(t.type,r.memoizedProps);n.componentDidUpdate(a,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;null!==i&&Ws(t,i,n);break;case 3:var o=t.updateQueue;if(null!==o){if(r=null,null!==t.child)switch(t.child.tag){case 5:case 1:r=t.child.stateNode}Ws(t,o,r)}break;case 5:var l=t.stateNode;if(null===r&&4&t.flags){r=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var d=t.alternate;if(null!==d){var u=d.memoizedState;if(null!==u){var p=u.dehydrated;null!==p&&qt(p)}}}break;default:throw Error(s(163))}Xo||512&t.flags&&al(t)}catch(m){kc(t,t.return,m)}}if(t===e){Qo=null;break}if(null!==(r=t.sibling)){r.return=t.return,Qo=r;break}Qo=t.return}}function jl(e){for(;null!==Qo;){var t=Qo;if(t===e){Qo=null;break}var r=t.sibling;if(null!==r){r.return=t.return,Qo=r;break}Qo=t.return}}function wl(e){for(;null!==Qo;){var t=Qo;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{nl(4,t)}catch(l){kc(t,r,l)}break;case 1:var n=t.stateNode;if("function"===typeof n.componentDidMount){var a=t.return;try{n.componentDidMount()}catch(l){kc(t,a,l)}}var s=t.return;try{al(t)}catch(l){kc(t,s,l)}break;case 5:var i=t.return;try{al(t)}catch(l){kc(t,i,l)}}}catch(l){kc(t,t.return,l)}if(t===e){Qo=null;break}var o=t.sibling;if(null!==o){o.return=t.return,Qo=o;break}Qo=t.return}}var Nl,kl=Math.ceil,Sl=b.ReactCurrentDispatcher,_l=b.ReactCurrentOwner,Cl=b.ReactCurrentBatchConfig,Al=0,Ol=null,Pl=null,El=0,Tl=0,Il=ka(0),Ml=0,Dl=null,Rl=0,Fl=0,Ll=0,Bl=null,Ul=null,zl=0,ql=1/0,Wl=null,Vl=!1,Gl=null,Hl=null,Kl=!1,Yl=null,Jl=0,Xl=0,$l=null,Ql=-1,Zl=0;function ec(){return 0!==(6&Al)?$e():-1!==Ql?Ql:Ql=$e()}function tc(e){return 0===(1&e.mode)?1:0!==(2&Al)&&0!==El?El&-El:null!==fs.transition?(0===Zl&&(Zl=ft()),Zl):0!==(e=vt)?e:e=void 0===(e=window.event)?16:Xt(e.type)}function rc(e,t,r,n){if(50<Xl)throw Xl=0,$l=null,Error(s(185));xt(e,r,n),0!==(2&Al)&&e===Ol||(e===Ol&&(0===(2&Al)&&(Fl|=r),4===Ml&&oc(e,El)),nc(e,n),1===r&&0===Al&&0===(1&t.mode)&&(ql=$e()+500,Ba&&qa()))}function nc(e,t){var r=e.callbackNode;!function(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,a=e.expirationTimes,s=e.pendingLanes;0<s;){var i=31-it(s),o=1<<i,l=a[i];-1===l?0!==(o&r)&&0===(o&n)||(a[i]=mt(o,t)):l<=t&&(e.expiredLanes|=o),s&=~o}}(e,t);var n=pt(e,e===Ol?El:0);if(0===n)null!==r&&Ye(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(null!=r&&Ye(r),1===t)0===e.tag?function(e){Ba=!0,za(e)}(lc.bind(null,e)):za(lc.bind(null,e)),ia(function(){0===(6&Al)&&qa()}),r=null;else{switch(bt(n)){case 1:r=Ze;break;case 4:r=et;break;case 16:default:r=tt;break;case 536870912:r=nt}r=Oc(r,ac.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function ac(e,t){if(Ql=-1,Zl=0,0!==(6&Al))throw Error(s(327));var r=e.callbackNode;if(wc()&&e.callbackNode!==r)return null;var n=pt(e,e===Ol?El:0);if(0===n)return null;if(0!==(30&n)||0!==(n&e.expiredLanes)||t)t=gc(e,n);else{t=n;var a=Al;Al|=2;var i=hc();for(Ol===e&&El===t||(Wl=null,ql=$e()+500,pc(e,t));;)try{yc();break}catch(l){mc(e,l)}_s(),Sl.current=i,Al=a,null!==Pl?t=0:(Ol=null,El=0,t=Ml)}if(0!==t){if(2===t&&(0!==(a=ht(e))&&(n=a,t=sc(e,a))),1===t)throw r=Dl,pc(e,0),oc(e,n),nc(e,$e()),r;if(6===t)oc(e,n);else{if(a=e.current.alternate,0===(30&n)&&!function(e){for(var t=e;;){if(16384&t.flags){var r=t.updateQueue;if(null!==r&&null!==(r=r.stores))for(var n=0;n<r.length;n++){var a=r[n],s=a.getSnapshot;a=a.value;try{if(!on(s(),a))return!1}catch(o){return!1}}}if(r=t.child,16384&t.subtreeFlags&&null!==r)r.return=t,t=r;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(a)&&(2===(t=gc(e,n))&&(0!==(i=ht(e))&&(n=i,t=sc(e,i))),1===t))throw r=Dl,pc(e,0),oc(e,n),nc(e,$e()),r;switch(e.finishedWork=a,e.finishedLanes=n,t){case 0:case 1:throw Error(s(345));case 2:case 5:jc(e,Ul,Wl);break;case 3:if(oc(e,n),(130023424&n)===n&&10<(t=zl+500-$e())){if(0!==pt(e,0))break;if(((a=e.suspendedLanes)&n)!==n){ec(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=na(jc.bind(null,e,Ul,Wl),t);break}jc(e,Ul,Wl);break;case 4:if(oc(e,n),(4194240&n)===n)break;for(t=e.eventTimes,a=-1;0<n;){var o=31-it(n);i=1<<o,(o=t[o])>a&&(a=o),n&=~i}if(n=a,10<(n=(120>(n=$e()-n)?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*kl(n/1960))-n)){e.timeoutHandle=na(jc.bind(null,e,Ul,Wl),n);break}jc(e,Ul,Wl);break;default:throw Error(s(329))}}}return nc(e,$e()),e.callbackNode===r?ac.bind(null,e):null}function sc(e,t){var r=Bl;return e.current.memoizedState.isDehydrated&&(pc(e,t).flags|=256),2!==(e=gc(e,t))&&(t=Ul,Ul=r,null!==t&&ic(t)),e}function ic(e){null===Ul?Ul=e:Ul.push.apply(Ul,e)}function oc(e,t){for(t&=~Ll,t&=~Fl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-it(t),n=1<<r;e[r]=-1,t&=~n}}function lc(e){if(0!==(6&Al))throw Error(s(327));wc();var t=pt(e,0);if(0===(1&t))return nc(e,$e()),null;var r=gc(e,t);if(0!==e.tag&&2===r){var n=ht(e);0!==n&&(t=n,r=sc(e,n))}if(1===r)throw r=Dl,pc(e,0),oc(e,t),nc(e,$e()),r;if(6===r)throw Error(s(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,jc(e,Ul,Wl),nc(e,$e()),null}function cc(e,t){var r=Al;Al|=1;try{return e(t)}finally{0===(Al=r)&&(ql=$e()+500,Ba&&qa())}}function dc(e){null!==Yl&&0===Yl.tag&&0===(6&Al)&&wc();var t=Al;Al|=1;var r=Cl.transition,n=vt;try{if(Cl.transition=null,vt=1,e)return e()}finally{vt=n,Cl.transition=r,0===(6&(Al=t))&&qa()}}function uc(){Tl=Il.current,Sa(Il)}function pc(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(-1!==r&&(e.timeoutHandle=-1,aa(r)),null!==Pl)for(r=Pl.return;null!==r;){var n=r;switch(ts(n),n.tag){case 1:null!==(n=n.type.childContextTypes)&&void 0!==n&&Ia();break;case 3:Xs(),Sa(Oa),Sa(Aa),ri();break;case 5:Qs(n);break;case 4:Xs();break;case 13:case 19:Sa(Zs);break;case 10:Cs(n.type._context);break;case 22:case 23:uc()}r=r.return}if(Ol=e,Pl=e=Ic(e.current,null),El=Tl=t,Ml=0,Dl=null,Ll=Fl=Rl=0,Ul=Bl=null,null!==Es){for(t=0;t<Es.length;t++)if(null!==(n=(r=Es[t]).interleaved)){r.interleaved=null;var a=n.next,s=r.pending;if(null!==s){var i=s.next;s.next=a,n.next=i}r.pending=n}Es=null}return e}function mc(e,t){for(;;){var r=Pl;try{if(_s(),ni.current=$i,ci){for(var n=ii.memoizedState;null!==n;){var a=n.queue;null!==a&&(a.pending=null),n=n.next}ci=!1}if(si=0,li=oi=ii=null,di=!1,ui=0,_l.current=null,null===r||null===r.return){Ml=1,Dl=t,Pl=null;break}e:{var i=e,o=r.return,l=r,c=t;if(t=El,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var d=c,u=l,p=u.tag;if(0===(1&u.mode)&&(0===p||11===p||15===p)){var m=u.alternate;m?(u.updateQueue=m.updateQueue,u.memoizedState=m.memoizedState,u.lanes=m.lanes):(u.updateQueue=null,u.memoizedState=null)}var h=go(o);if(null!==h){h.flags&=-257,xo(h,o,l,0,t),1&h.mode&&fo(i,d,t),c=d;var f=(t=h).updateQueue;if(null===f){var g=new Set;g.add(c),t.updateQueue=g}else f.add(c);break e}if(0===(1&t)){fo(i,d,t),fc();break e}c=Error(s(426))}else if(as&&1&l.mode){var x=go(o);if(null!==x){0===(65536&x.flags)&&(x.flags|=256),xo(x,o,l,0,t),hs(lo(c,l));break e}}i=c=lo(c,l),4!==Ml&&(Ml=2),null===Bl?Bl=[i]:Bl.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t,zs(i,mo(0,c,t));break e;case 1:l=c;var y=i.type,v=i.stateNode;if(0===(128&i.flags)&&("function"===typeof y.getDerivedStateFromError||null!==v&&"function"===typeof v.componentDidCatch&&(null===Hl||!Hl.has(v)))){i.flags|=65536,t&=-t,i.lanes|=t,zs(i,ho(i,l,t));break e}}i=i.return}while(null!==i)}bc(r)}catch(b){t=b,Pl===r&&null!==r&&(Pl=r=r.return);continue}break}}function hc(){var e=Sl.current;return Sl.current=$i,null===e?$i:e}function fc(){0!==Ml&&3!==Ml&&2!==Ml||(Ml=4),null===Ol||0===(268435455&Rl)&&0===(268435455&Fl)||oc(Ol,El)}function gc(e,t){var r=Al;Al|=2;var n=hc();for(Ol===e&&El===t||(Wl=null,pc(e,t));;)try{xc();break}catch(a){mc(e,a)}if(_s(),Al=r,Sl.current=n,null!==Pl)throw Error(s(261));return Ol=null,El=0,Ml}function xc(){for(;null!==Pl;)vc(Pl)}function yc(){for(;null!==Pl&&!Je();)vc(Pl)}function vc(e){var t=Nl(e.alternate,e,Tl);e.memoizedProps=e.pendingProps,null===t?bc(e):Pl=t,_l.current=null}function bc(e){var t=e;do{var r=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(r=Ko(r,t,Tl)))return void(Pl=r)}else{if(null!==(r=Yo(r,t)))return r.flags&=32767,void(Pl=r);if(null===e)return Ml=6,void(Pl=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Pl=t);Pl=t=e}while(null!==t);0===Ml&&(Ml=5)}function jc(e,t,r){var n=vt,a=Cl.transition;try{Cl.transition=null,vt=1,function(e,t,r,n){do{wc()}while(null!==Yl);if(0!==(6&Al))throw Error(s(327));r=e.finishedWork;var a=e.finishedLanes;if(null===r)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(s(177));e.callbackNode=null,e.callbackPriority=0;var i=r.lanes|r.childLanes;if(function(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var a=31-it(r),s=1<<a;t[a]=0,n[a]=-1,e[a]=-1,r&=~s}}(e,i),e===Ol&&(Pl=Ol=null,El=0),0===(2064&r.subtreeFlags)&&0===(2064&r.flags)||Kl||(Kl=!0,Oc(tt,function(){return wc(),null})),i=0!==(15990&r.flags),0!==(15990&r.subtreeFlags)||i){i=Cl.transition,Cl.transition=null;var o=vt;vt=1;var l=Al;Al|=4,_l.current=null,function(e,t){if(ea=Vt,mn(e=pn())){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{var n=(r=(r=e.ownerDocument)&&r.defaultView||window).getSelection&&r.getSelection();if(n&&0!==n.rangeCount){r=n.anchorNode;var a=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{r.nodeType,i.nodeType}catch(j){r=null;break e}var o=0,l=-1,c=-1,d=0,u=0,p=e,m=null;t:for(;;){for(var h;p!==r||0!==a&&3!==p.nodeType||(l=o+a),p!==i||0!==n&&3!==p.nodeType||(c=o+n),3===p.nodeType&&(o+=p.nodeValue.length),null!==(h=p.firstChild);)m=p,p=h;for(;;){if(p===e)break t;if(m===r&&++d===a&&(l=o),m===i&&++u===n&&(c=o),null!==(h=p.nextSibling))break;m=(p=m).parentNode}p=h}r=-1===l||-1===c?null:{start:l,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(ta={focusedElem:e,selectionRange:r},Vt=!1,Qo=t;null!==Qo;)if(e=(t=Qo).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Qo=e;else for(;null!==Qo;){t=Qo;try{var f=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==f){var g=f.memoizedProps,x=f.memoizedState,y=t.stateNode,v=y.getSnapshotBeforeUpdate(t.elementType===t.type?g:to(t.type,g),x);y.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var b=t.stateNode.containerInfo;1===b.nodeType?b.textContent="":9===b.nodeType&&b.documentElement&&b.removeChild(b.documentElement);break;default:throw Error(s(163))}}catch(j){kc(t,t.return,j)}if(null!==(e=t.sibling)){e.return=t.return,Qo=e;break}Qo=t.return}f=tl,tl=!1}(e,r),gl(r,e),hn(ta),Vt=!!ea,ta=ea=null,e.current=r,yl(r,e,a),Xe(),Al=l,vt=o,Cl.transition=i}else e.current=r;if(Kl&&(Kl=!1,Yl=e,Jl=a),i=e.pendingLanes,0===i&&(Hl=null),function(e){if(st&&"function"===typeof st.onCommitFiberRoot)try{st.onCommitFiberRoot(at,e,void 0,128===(128&e.current.flags))}catch(t){}}(r.stateNode),nc(e,$e()),null!==t)for(n=e.onRecoverableError,r=0;r<t.length;r++)a=t[r],n(a.value,{componentStack:a.stack,digest:a.digest});if(Vl)throw Vl=!1,e=Gl,Gl=null,e;0!==(1&Jl)&&0!==e.tag&&wc(),i=e.pendingLanes,0!==(1&i)?e===$l?Xl++:(Xl=0,$l=e):Xl=0,qa()}(e,t,r,n)}finally{Cl.transition=a,vt=n}return null}function wc(){if(null!==Yl){var e=bt(Jl),t=Cl.transition,r=vt;try{if(Cl.transition=null,vt=16>e?16:e,null===Yl)var n=!1;else{if(e=Yl,Yl=null,Jl=0,0!==(6&Al))throw Error(s(331));var a=Al;for(Al|=4,Qo=e.current;null!==Qo;){var i=Qo,o=i.child;if(0!==(16&Qo.flags)){var l=i.deletions;if(null!==l){for(var c=0;c<l.length;c++){var d=l[c];for(Qo=d;null!==Qo;){var u=Qo;switch(u.tag){case 0:case 11:case 15:rl(8,u,i)}var p=u.child;if(null!==p)p.return=u,Qo=p;else for(;null!==Qo;){var m=(u=Qo).sibling,h=u.return;if(sl(u),u===d){Qo=null;break}if(null!==m){m.return=h,Qo=m;break}Qo=h}}}var f=i.alternate;if(null!==f){var g=f.child;if(null!==g){f.child=null;do{var x=g.sibling;g.sibling=null,g=x}while(null!==g)}}Qo=i}}if(0!==(2064&i.subtreeFlags)&&null!==o)o.return=i,Qo=o;else e:for(;null!==Qo;){if(0!==(2048&(i=Qo).flags))switch(i.tag){case 0:case 11:case 15:rl(9,i,i.return)}var y=i.sibling;if(null!==y){y.return=i.return,Qo=y;break e}Qo=i.return}}var v=e.current;for(Qo=v;null!==Qo;){var b=(o=Qo).child;if(0!==(2064&o.subtreeFlags)&&null!==b)b.return=o,Qo=b;else e:for(o=v;null!==Qo;){if(0!==(2048&(l=Qo).flags))try{switch(l.tag){case 0:case 11:case 15:nl(9,l)}}catch(w){kc(l,l.return,w)}if(l===o){Qo=null;break e}var j=l.sibling;if(null!==j){j.return=l.return,Qo=j;break e}Qo=l.return}}if(Al=a,qa(),st&&"function"===typeof st.onPostCommitFiberRoot)try{st.onPostCommitFiberRoot(at,e)}catch(w){}n=!0}return n}finally{vt=r,Cl.transition=t}}return!1}function Nc(e,t,r){e=Bs(e,t=mo(0,t=lo(r,t),1),1),t=ec(),null!==e&&(xt(e,1,t),nc(e,t))}function kc(e,t,r){if(3===e.tag)Nc(e,e,r);else for(;null!==t;){if(3===t.tag){Nc(t,e,r);break}if(1===t.tag){var n=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof n.componentDidCatch&&(null===Hl||!Hl.has(n))){t=Bs(t,e=ho(t,e=lo(r,e),1),1),e=ec(),null!==t&&(xt(t,1,e),nc(t,e));break}}t=t.return}}function Sc(e,t,r){var n=e.pingCache;null!==n&&n.delete(t),t=ec(),e.pingedLanes|=e.suspendedLanes&r,Ol===e&&(El&r)===r&&(4===Ml||3===Ml&&(130023424&El)===El&&500>$e()-zl?pc(e,0):Ll|=r),nc(e,t)}function _c(e,t){0===t&&(0===(1&e.mode)?t=1:(t=dt,0===(130023424&(dt<<=1))&&(dt=4194304)));var r=ec();null!==(e=Ms(e,t))&&(xt(e,t,r),nc(e,r))}function Cc(e){var t=e.memoizedState,r=0;null!==t&&(r=t.retryLane),_c(e,r)}function Ac(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,a=e.memoizedState;null!==a&&(r=a.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(s(314))}null!==n&&n.delete(t),_c(e,r)}function Oc(e,t){return Ke(e,t)}function Pc(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ec(e,t,r,n){return new Pc(e,t,r,n)}function Tc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Ic(e,t){var r=e.alternate;return null===r?((r=Ec(e.tag,t,e.key,e.mode)).elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=14680064&e.flags,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Mc(e,t,r,n,a,i){var o=2;if(n=e,"function"===typeof e)Tc(e)&&(o=1);else if("string"===typeof e)o=5;else e:switch(e){case N:return Dc(r.children,a,i,t);case k:o=8,a|=8;break;case S:return(e=Ec(12,r,t,2|a)).elementType=S,e.lanes=i,e;case O:return(e=Ec(13,r,t,a)).elementType=O,e.lanes=i,e;case P:return(e=Ec(19,r,t,a)).elementType=P,e.lanes=i,e;case I:return Rc(r,a,i,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case _:o=10;break e;case C:o=9;break e;case A:o=11;break e;case E:o=14;break e;case T:o=16,n=null;break e}throw Error(s(130,null==e?e:typeof e,""))}return(t=Ec(o,r,t,a)).elementType=e,t.type=n,t.lanes=i,t}function Dc(e,t,r,n){return(e=Ec(7,e,n,t)).lanes=r,e}function Rc(e,t,r,n){return(e=Ec(22,e,n,t)).elementType=I,e.lanes=r,e.stateNode={isHidden:!1},e}function Fc(e,t,r){return(e=Ec(6,e,null,t)).lanes=r,e}function Lc(e,t,r){return(t=Ec(4,null!==e.children?e.children:[],e.key,t)).lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Bc(e,t,r,n,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=n,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function Uc(e,t,r,n,a,s,i,o,l){return e=new Bc(e,t,r,o,l),1===t?(t=1,!0===s&&(t|=8)):t=0,s=Ec(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Rs(s),e}function zc(e){if(!e)return Ca;e:{if(qe(e=e._reactInternals)!==e||1!==e.tag)throw Error(s(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ta(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(s(171))}if(1===e.tag){var r=e.type;if(Ta(r))return Da(e,r,t)}return t}function qc(e,t,r,n,a,s,i,o,l){return(e=Uc(r,n,!0,e,0,s,0,o,l)).context=zc(null),r=e.current,(s=Ls(n=ec(),a=tc(r))).callback=void 0!==t&&null!==t?t:null,Bs(r,s,a),e.current.lanes=a,xt(e,a,n),nc(e,n),e}function Wc(e,t,r,n){var a=t.current,s=ec(),i=tc(a);return r=zc(r),null===t.context?t.context=r:t.pendingContext=r,(t=Ls(s,i)).payload={element:e},null!==(n=void 0===n?null:n)&&(t.callback=n),null!==(e=Bs(a,t,i))&&(rc(e,a,i,s),Us(e,a,i)),i}function Vc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Gc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var r=e.retryLane;e.retryLane=0!==r&&r<t?r:t}}function Hc(e,t){Gc(e,t),(e=e.alternate)&&Gc(e,t)}Nl=function(e,t,r){if(null!==e)if(e.memoizedProps!==t.pendingProps||Oa.current)vo=!0;else{if(0===(e.lanes&r)&&0===(128&t.flags))return vo=!1,function(e,t,r){switch(t.tag){case 3:Oo(t),ms();break;case 5:$s(t);break;case 1:Ta(t.type)&&Ra(t);break;case 4:Js(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,a=t.memoizedProps.value;_a(ws,n._currentValue),n._currentValue=a;break;case 13:if(null!==(n=t.memoizedState))return null!==n.dehydrated?(_a(Zs,1&Zs.current),t.flags|=128,null):0!==(r&t.child.childLanes)?Fo(e,t,r):(_a(Zs,1&Zs.current),null!==(e=Vo(e,t,r))?e.sibling:null);_a(Zs,1&Zs.current);break;case 19:if(n=0!==(r&t.childLanes),0!==(128&e.flags)){if(n)return qo(e,t,r);t.flags|=128}if(null!==(a=t.memoizedState)&&(a.rendering=null,a.tail=null,a.lastEffect=null),_a(Zs,Zs.current),n)break;return null;case 22:case 23:return t.lanes=0,ko(e,t,r)}return Vo(e,t,r)}(e,t,r);vo=0!==(131072&e.flags)}else vo=!1,as&&0!==(1048576&t.flags)&&Za(t,Ha,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;Wo(e,t),e=t.pendingProps;var a=Ea(t,Aa.current);Os(t,r),a=fi(null,t,n,e,a,r);var i=gi();return t.flags|=1,"object"===typeof a&&null!==a&&"function"===typeof a.render&&void 0===a.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ta(n)?(i=!0,Ra(t)):i=!1,t.memoizedState=null!==a.state&&void 0!==a.state?a.state:null,Rs(t),a.updater=no,t.stateNode=a,a._reactInternals=t,oo(t,n,e,r),t=Ao(null,t,n,!0,i,r)):(t.tag=0,as&&i&&es(t),bo(null,t,a,r),t=t.child),t;case 16:n=t.elementType;e:{switch(Wo(e,t),e=t.pendingProps,n=(a=n._init)(n._payload),t.type=n,a=t.tag=function(e){if("function"===typeof e)return Tc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===A)return 11;if(e===E)return 14}return 2}(n),e=to(n,e),a){case 0:t=_o(null,t,n,e,r);break e;case 1:t=Co(null,t,n,e,r);break e;case 11:t=jo(null,t,n,e,r);break e;case 14:t=wo(null,t,n,to(n.type,e),r);break e}throw Error(s(306,n,""))}return t;case 0:return n=t.type,a=t.pendingProps,_o(e,t,n,a=t.elementType===n?a:to(n,a),r);case 1:return n=t.type,a=t.pendingProps,Co(e,t,n,a=t.elementType===n?a:to(n,a),r);case 3:e:{if(Oo(t),null===e)throw Error(s(387));n=t.pendingProps,a=(i=t.memoizedState).element,Fs(e,t),qs(t,n,null,r);var o=t.memoizedState;if(n=o.element,i.isDehydrated){if(i={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=i,t.memoizedState=i,256&t.flags){t=Po(e,t,n,r,a=lo(Error(s(423)),t));break e}if(n!==a){t=Po(e,t,n,r,a=lo(Error(s(424)),t));break e}for(ns=ca(t.stateNode.containerInfo.firstChild),rs=t,as=!0,ss=null,r=js(t,null,n,r),t.child=r;r;)r.flags=-3&r.flags|4096,r=r.sibling}else{if(ms(),n===a){t=Vo(e,t,r);break e}bo(e,t,n,r)}t=t.child}return t;case 5:return $s(t),null===e&&cs(t),n=t.type,a=t.pendingProps,i=null!==e?e.memoizedProps:null,o=a.children,ra(n,a)?o=null:null!==i&&ra(n,i)&&(t.flags|=32),So(e,t),bo(e,t,o,r),t.child;case 6:return null===e&&cs(t),null;case 13:return Fo(e,t,r);case 4:return Js(t,t.stateNode.containerInfo),n=t.pendingProps,null===e?t.child=bs(t,null,n,r):bo(e,t,n,r),t.child;case 11:return n=t.type,a=t.pendingProps,jo(e,t,n,a=t.elementType===n?a:to(n,a),r);case 7:return bo(e,t,t.pendingProps,r),t.child;case 8:case 12:return bo(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,a=t.pendingProps,i=t.memoizedProps,o=a.value,_a(ws,n._currentValue),n._currentValue=o,null!==i)if(on(i.value,o)){if(i.children===a.children&&!Oa.current){t=Vo(e,t,r);break e}}else for(null!==(i=t.child)&&(i.return=t);null!==i;){var l=i.dependencies;if(null!==l){o=i.child;for(var c=l.firstContext;null!==c;){if(c.context===n){if(1===i.tag){(c=Ls(-1,r&-r)).tag=2;var d=i.updateQueue;if(null!==d){var u=(d=d.shared).pending;null===u?c.next=c:(c.next=u.next,u.next=c),d.pending=c}}i.lanes|=r,null!==(c=i.alternate)&&(c.lanes|=r),As(i.return,r,t),l.lanes|=r;break}c=c.next}}else if(10===i.tag)o=i.type===t.type?null:i.child;else if(18===i.tag){if(null===(o=i.return))throw Error(s(341));o.lanes|=r,null!==(l=o.alternate)&&(l.lanes|=r),As(o,r,t),o=i.sibling}else o=i.child;if(null!==o)o.return=i;else for(o=i;null!==o;){if(o===t){o=null;break}if(null!==(i=o.sibling)){i.return=o.return,o=i;break}o=o.return}i=o}bo(e,t,a.children,r),t=t.child}return t;case 9:return a=t.type,n=t.pendingProps.children,Os(t,r),n=n(a=Ps(a)),t.flags|=1,bo(e,t,n,r),t.child;case 14:return a=to(n=t.type,t.pendingProps),wo(e,t,n,a=to(n.type,a),r);case 15:return No(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:to(n,a),Wo(e,t),t.tag=1,Ta(n)?(e=!0,Ra(t)):e=!1,Os(t,r),so(t,n,a),oo(t,n,a,r),Ao(null,t,n,!0,e,r);case 19:return qo(e,t,r);case 22:return ko(e,t,r)}throw Error(s(156,t.tag))};var Kc="function"===typeof reportError?reportError:function(e){console.error(e)};function Yc(e){this._internalRoot=e}function Jc(e){this._internalRoot=e}function Xc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function $c(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Qc(){}function Zc(e,t,r,n,a){var s=r._reactRootContainer;if(s){var i=s;if("function"===typeof a){var o=a;a=function(){var e=Vc(i);o.call(e)}}Wc(t,i,e,a)}else i=function(e,t,r,n,a){if(a){if("function"===typeof n){var s=n;n=function(){var e=Vc(i);s.call(e)}}var i=qc(t,n,e,0,null,!1,0,"",Qc);return e._reactRootContainer=i,e[ha]=i.current,qn(8===e.nodeType?e.parentNode:e),dc(),i}for(;a=e.lastChild;)e.removeChild(a);if("function"===typeof n){var o=n;n=function(){var e=Vc(l);o.call(e)}}var l=Uc(e,0,!1,null,0,!1,0,"",Qc);return e._reactRootContainer=l,e[ha]=l.current,qn(8===e.nodeType?e.parentNode:e),dc(function(){Wc(t,l,r,n)}),l}(r,t,e,a,n);return Vc(i)}Jc.prototype.render=Yc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(s(409));Wc(e,t,null,null)},Jc.prototype.unmount=Yc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;dc(function(){Wc(null,e,null,null)}),t[ha]=null}},Jc.prototype.unstable_scheduleHydration=function(e){if(e){var t=kt();e={blockedOn:null,target:e,priority:t};for(var r=0;r<It.length&&0!==t&&t<It[r].priority;r++);It.splice(r,0,e),0===r&&Ft(e)}},jt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=ut(t.pendingLanes);0!==r&&(yt(t,1|r),nc(t,$e()),0===(6&Al)&&(ql=$e()+500,qa()))}break;case 13:dc(function(){var t=Ms(e,1);if(null!==t){var r=ec();rc(t,e,1,r)}}),Hc(e,1)}},wt=function(e){if(13===e.tag){var t=Ms(e,134217728);if(null!==t)rc(t,e,134217728,ec());Hc(e,134217728)}},Nt=function(e){if(13===e.tag){var t=tc(e),r=Ms(e,t);if(null!==r)rc(r,e,t,ec());Hc(e,t)}},kt=function(){return vt},St=function(e,t){var r=vt;try{return vt=e,t()}finally{vt=r}},we=function(e,t,r){switch(t){case"input":if(Q(e,r),t=r.name,"radio"===r.type&&null!=t){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var a=ja(n);if(!a)throw Error(s(90));K(n),Q(n,a)}}}break;case"textarea":se(e,r);break;case"select":null!=(t=r.value)&&re(e,!!r.multiple,t,!1)}},Ae=cc,Oe=dc;var ed={usingClientEntryPoint:!1,Events:[va,ba,ja,_e,Ce,cc]},td={findFiberByHostInstance:ya,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},rd={bundleType:td.bundleType,version:td.version,rendererPackageName:td.rendererPackageName,rendererConfig:td.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ge(e))?null:e.stateNode},findFiberByHostInstance:td.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var nd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!nd.isDisabled&&nd.supportsFiber)try{at=nd.inject(rd),st=nd}catch(de){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ed,t.createPortal=function(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Xc(t))throw Error(s(200));return function(e,t,r){var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:w,key:null==n?null:""+n,children:e,containerInfo:t,implementation:r}}(e,t,null,r)},t.createRoot=function(e,t){if(!Xc(e))throw Error(s(299));var r=!1,n="",a=Kc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(r=!0),void 0!==t.identifierPrefix&&(n=t.identifierPrefix),void 0!==t.onRecoverableError&&(a=t.onRecoverableError)),t=Uc(e,1,!1,null,0,r,0,n,a),e[ha]=t.current,qn(8===e.nodeType?e.parentNode:e),new Yc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(s(188));throw e=Object.keys(e).join(","),Error(s(268,e))}return e=null===(e=Ge(t))?null:e.stateNode},t.flushSync=function(e){return dc(e)},t.hydrate=function(e,t,r){if(!$c(t))throw Error(s(200));return Zc(null,e,t,!0,r)},t.hydrateRoot=function(e,t,r){if(!Xc(e))throw Error(s(405));var n=null!=r&&r.hydratedSources||null,a=!1,i="",o=Kc;if(null!==r&&void 0!==r&&(!0===r.unstable_strictMode&&(a=!0),void 0!==r.identifierPrefix&&(i=r.identifierPrefix),void 0!==r.onRecoverableError&&(o=r.onRecoverableError)),t=qc(t,null,e,1,null!=r?r:null,a,0,i,o),e[ha]=t.current,qn(e),n)for(e=0;e<n.length;e++)a=(a=(r=n[e])._getVersion)(r._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[r,a]:t.mutableSourceEagerHydrationData.push(r,a);return new Jc(t)},t.render=function(e,t,r){if(!$c(t))throw Error(s(200));return Zc(null,e,t,!1,r)},t.unmountComponentAtNode=function(e){if(!$c(e))throw Error(s(40));return!!e._reactRootContainer&&(dc(function(){Zc(null,null,e,!1,function(){e._reactRootContainer=null,e[ha]=null})}),!0)},t.unstable_batchedUpdates=cc,t.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!$c(r))throw Error(s(200));if(null==e||void 0===e._reactInternals)throw Error(s(38));return Zc(e,t,r,!1,n)},t.version="18.3.1-next-f1338f8080-20240426"},2761:e=>{e.exports=function(e){return null!=e&&"object"==typeof e}},2777:(e,t,r)=>{var n=r(5193),a=r(2761),s=Object.prototype,i=s.hasOwnProperty,o=s.propertyIsEnumerable,l=n(function(){return arguments}())?n:function(e){return a(e)&&i.call(e,"callee")&&!o.call(e,"callee")};e.exports=l},2866:(e,t,r)=>{var n=r(2969);e.exports=function(e){return function(t){return n(t,e)}}},2929:(e,t,r)=>{var n=r(6552).Uint8Array;e.exports=n},2969:(e,t,r)=>{var n=r(5324),a=r(914);e.exports=function(e,t){for(var r=0,s=(t=n(t,e)).length;null!=e&&r<s;)e=e[a(t[r++])];return r&&r==s?e:void 0}},3028:e=>{e.exports=function(e,t){return function(r){return e(t(r))}}},3097:(e,t,r)=>{var n=r(2969);e.exports=function(e,t,r){var a=null==e?void 0:n(e,t);return void 0===a?r:a}},3204:(e,t,r)=>{var n=r(3343),a=r(2777),s=r(4052),i=r(4543),o=r(9194),l=r(1268),c=Object.prototype.hasOwnProperty;e.exports=function(e,t){var r=s(e),d=!r&&a(e),u=!r&&!d&&i(e),p=!r&&!d&&!u&&l(e),m=r||d||u||p,h=m?n(e.length,String):[],f=h.length;for(var g in e)!t&&!c.call(e,g)||m&&("length"==g||u&&("offset"==g||"parent"==g)||p&&("buffer"==g||"byteLength"==g||"byteOffset"==g)||o(g,f))||h.push(g);return h}},3211:e=>{e.exports=function(e,t){return e===t||e!==e&&t!==t}},3218:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},3279:e=>{e.exports=function(e){return e}},3331:(e,t,r)=>{var n=r(9676),a=r(929),s=r(7303);e.exports=function(e){return function(t,r,i){return i&&"number"!=typeof i&&a(t,r,i)&&(r=i=void 0),t=s(t),void 0===r?(r=t,t=0):r=s(r),i=void 0===i?t<r?1:-1:s(i),n(t,r,i,e)}}},3343:e=>{e.exports=function(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}},3366:(e,t,r)=>{var n=r(7894),a=r(9057);e.exports=function(e,t){return null!=e&&a(e,t,n)}},3411:(e,t,r)=>{var n=r(149),a=r(9096),s=r(8883),i=r(4052);e.exports=function(e,t){return(i(e)?n:s)(e,a(t,3))}},3440:(e,t,r)=>{var n=r(6552)["__core-js_shared__"];e.exports=n},3538:(e,t,r)=>{var n=r(755),a=r(3411);e.exports=function(e,t){return n(a(e,t),1)}},3668:(e,t,r)=>{var n=r(8902),a=r(2587),s=r(8114);e.exports=function(e,t,r,i,o,l){var c=1&r,d=e.length,u=t.length;if(d!=u&&!(c&&u>d))return!1;var p=l.get(e),m=l.get(t);if(p&&m)return p==t&&m==e;var h=-1,f=!0,g=2&r?new n:void 0;for(l.set(e,t),l.set(t,e);++h<d;){var x=e[h],y=t[h];if(i)var v=c?i(y,x,h,t,e,l):i(x,y,h,e,t,l);if(void 0!==v){if(v)continue;f=!1;break}if(g){if(!a(t,function(e,t){if(!s(g,t)&&(x===e||o(x,e,r,i,l)))return g.push(t)})){f=!1;break}}else if(x!==y&&!o(x,y,r,i,l)){f=!1;break}}return l.delete(e),l.delete(t),f}},3713:(e,t,r)=>{var n=r(6140),a=r(1143),s=Object.prototype.hasOwnProperty;e.exports=function(e){if(!n(e))return a(e);var t=[];for(var r in Object(e))s.call(e,r)&&"constructor"!=r&&t.push(r);return t}},3763:(e,t,r)=>{"use strict";e.exports=r(4983)},3781:(e,t,r)=>{var n=r(9417),a=r(8673);e.exports=function(e){for(var t=a(e),r=t.length;r--;){var s=t[r],i=e[s];t[r]=[s,i,n(i)]}return t}},3871:e=>{e.exports=function(e,t,r){var n=-1,a=e.length;t<0&&(t=-t>a?0:a+t),(r=r>a?a:r)<0&&(r+=a),a=t>r?0:r-t>>>0,t>>>=0;for(var s=Array(a);++n<a;)s[n]=e[n+t];return s}},3892:e=>{e.exports=function(e){return this.__data__.has(e)}},3932:(e,t,r)=>{var n=r(396),a=r(2866),s=r(2597),i=r(914);e.exports=function(e){return s(e)?n(i(e)):a(e)}},3950:(e,t,r)=>{var n=r(6686),a=r(4757),s=r(801),i=Math.max,o=Math.min;e.exports=function(e,t,r){var l,c,d,u,p,m,h=0,f=!1,g=!1,x=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function y(t){var r=l,n=c;return l=c=void 0,h=t,u=e.apply(n,r)}function v(e){var r=e-m;return void 0===m||r>=t||r<0||g&&e-h>=d}function b(){var e=a();if(v(e))return j(e);p=setTimeout(b,function(e){var r=t-(e-m);return g?o(r,d-(e-h)):r}(e))}function j(e){return p=void 0,x&&l?y(e):(l=c=void 0,u)}function w(){var e=a(),r=v(e);if(l=arguments,c=this,m=e,r){if(void 0===p)return function(e){return h=e,p=setTimeout(b,t),f?y(e):u}(m);if(g)return clearTimeout(p),p=setTimeout(b,t),y(m)}return void 0===p&&(p=setTimeout(b,t)),u}return t=s(t)||0,n(r)&&(f=!!r.leading,d=(g="maxWait"in r)?i(s(r.maxWait)||0,t):d,x="trailing"in r?!!r.trailing:x),w.cancel=function(){void 0!==p&&clearTimeout(p),h=0,l=m=c=p=void 0},w.flush=function(){return void 0===p?u:j(a())},w}},4020:e=>{e.exports=function(e,t,r){for(var n=r-1,a=e.length;++n<a;)if(e[n]===t)return n;return-1}},4052:e=>{var t=Array.isArray;e.exports=t},4065:e=>{e.exports=function(e){var t=null==e?0:e.length;return t?e[t-1]:void 0}},4079:(e,t,r)=>{var n=r(8259),a=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,s=/\\(\\)?/g,i=n(function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(a,function(e,r,n,a){t.push(n?a.replace(s,"$1"):r||e)}),t});e.exports=i},4160:e=>{e.exports=function(e){var t=-1,r=Array(e.size);return e.forEach(function(e,n){r[++t]=[n,e]}),r}},4190:(e,t,r)=>{var n=r(1340);e.exports=function(e){var t=this.__data__,r=n(t,e);return r<0?void 0:t[r][1]}},4202:(e,t)=>{"use strict";var r=Symbol.for("react.element"),n=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),m=Symbol.iterator;var h={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},f=Object.assign,g={};function x(e,t,r){this.props=e,this.context=t,this.refs=g,this.updater=r||h}function y(){}function v(e,t,r){this.props=e,this.context=t,this.refs=g,this.updater=r||h}x.prototype.isReactComponent={},x.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},x.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=x.prototype;var b=v.prototype=new y;b.constructor=v,f(b,x.prototype),b.isPureReactComponent=!0;var j=Array.isArray,w=Object.prototype.hasOwnProperty,N={current:null},k={key:!0,ref:!0,__self:!0,__source:!0};function S(e,t,n){var a,s={},i=null,o=null;if(null!=t)for(a in void 0!==t.ref&&(o=t.ref),void 0!==t.key&&(i=""+t.key),t)w.call(t,a)&&!k.hasOwnProperty(a)&&(s[a]=t[a]);var l=arguments.length-2;if(1===l)s.children=n;else if(1<l){for(var c=Array(l),d=0;d<l;d++)c[d]=arguments[d+2];s.children=c}if(e&&e.defaultProps)for(a in l=e.defaultProps)void 0===s[a]&&(s[a]=l[a]);return{$$typeof:r,type:e,key:i,ref:o,props:s,_owner:N.current}}function _(e){return"object"===typeof e&&null!==e&&e.$$typeof===r}var C=/\/+/g;function A(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function O(e,t,a,s,i){var o=typeof e;"undefined"!==o&&"boolean"!==o||(e=null);var l=!1;if(null===e)l=!0;else switch(o){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case r:case n:l=!0}}if(l)return i=i(l=e),e=""===s?"."+A(l,0):s,j(i)?(a="",null!=e&&(a=e.replace(C,"$&/")+"/"),O(i,t,a,"",function(e){return e})):null!=i&&(_(i)&&(i=function(e,t){return{$$typeof:r,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(i,a+(!i.key||l&&l.key===i.key?"":(""+i.key).replace(C,"$&/")+"/")+e)),t.push(i)),1;if(l=0,s=""===s?".":s+":",j(e))for(var c=0;c<e.length;c++){var d=s+A(o=e[c],c);l+=O(o,t,a,d,i)}else if(d=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=m&&e[m]||e["@@iterator"])?e:null}(e),"function"===typeof d)for(e=d.call(e),c=0;!(o=e.next()).done;)l+=O(o=o.value,t,a,d=s+A(o,c++),i);else if("object"===o)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function P(e,t,r){if(null==e)return e;var n=[],a=0;return O(e,n,"","",function(e){return t.call(r,e,a++)}),n}function E(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var T={current:null},I={transition:null},M={ReactCurrentDispatcher:T,ReactCurrentBatchConfig:I,ReactCurrentOwner:N};function D(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:P,forEach:function(e,t,r){P(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return P(e,function(){t++}),t},toArray:function(e){return P(e,function(e){return e})||[]},only:function(e){if(!_(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=x,t.Fragment=a,t.Profiler=i,t.PureComponent=v,t.StrictMode=s,t.Suspense=d,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=M,t.act=D,t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var a=f({},e.props),s=e.key,i=e.ref,o=e._owner;if(null!=t){if(void 0!==t.ref&&(i=t.ref,o=N.current),void 0!==t.key&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)w.call(t,c)&&!k.hasOwnProperty(c)&&(a[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)a.children=n;else if(1<c){l=Array(c);for(var d=0;d<c;d++)l[d]=arguments[d+2];a.children=l}return{$$typeof:r,type:e.type,key:s,ref:i,props:a,_owner:o}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:o,_context:e},e.Consumer=e},t.createElement=S,t.createFactory=function(e){var t=S.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=_,t.lazy=function(e){return{$$typeof:p,_payload:{_status:-1,_result:e},_init:E}},t.memo=function(e,t){return{$$typeof:u,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=I.transition;I.transition={};try{e()}finally{I.transition=t}},t.unstable_act=D,t.useCallback=function(e,t){return T.current.useCallback(e,t)},t.useContext=function(e){return T.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return T.current.useDeferredValue(e)},t.useEffect=function(e,t){return T.current.useEffect(e,t)},t.useId=function(){return T.current.useId()},t.useImperativeHandle=function(e,t,r){return T.current.useImperativeHandle(e,t,r)},t.useInsertionEffect=function(e,t){return T.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return T.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return T.current.useMemo(e,t)},t.useReducer=function(e,t,r){return T.current.useReducer(e,t,r)},t.useRef=function(e){return T.current.useRef(e)},t.useState=function(e){return T.current.useState(e)},t.useSyncExternalStore=function(e,t,r){return T.current.useSyncExternalStore(e,t,r)},t.useTransition=function(){return T.current.useTransition()},t.version="18.3.1"},4258:(e,t,r)=>{var n=r(5906)();e.exports=n},4262:(e,t,r)=>{var n=r(8895),a=r(4052);e.exports=function(e,t,r){var s=t(e);return a(e)?s:n(s,r(e))}},4391:(e,t,r)=>{"use strict";var n=r(7950);t.createRoot=n.createRoot,t.hydrateRoot=n.hydrateRoot},4416:(e,t,r)=>{var n=r(8902),a=r(5866),s=r(1558),i=r(8114),o=r(8182),l=r(2074);e.exports=function(e,t,r){var c=-1,d=a,u=e.length,p=!0,m=[],h=m;if(r)p=!1,d=s;else if(u>=200){var f=t?null:o(e);if(f)return l(f);p=!1,d=i,h=new n}else h=t?[]:m;e:for(;++c<u;){var g=e[c],x=t?t(g):g;if(g=r||0!==g?g:0,p&&x===x){for(var y=h.length;y--;)if(h[y]===x)continue e;t&&h.push(x),m.push(g)}else d(h,x,r)||(h!==m&&h.push(x),m.push(g))}return m}},4543:(e,t,r)=>{e=r.nmd(e);var n=r(6552),a=r(14),s=t&&!t.nodeType&&t,i=s&&e&&!e.nodeType&&e,o=i&&i.exports===s?n.Buffer:void 0,l=(o?o.isBuffer:void 0)||a;e.exports=l},4545:(e,t,r)=>{var n=r(7160);e.exports=function(){this.__data__=new n,this.size=0}},4552:(e,t,r)=>{var n=r(9812),a=Object.prototype,s=a.hasOwnProperty,i=a.toString,o=n?n.toStringTag:void 0;e.exports=function(e){var t=s.call(e,o),r=e[o];try{e[o]=void 0;var n=!0}catch(l){}var a=i.call(e);return n&&(t?e[o]=r:delete e[o]),a}},4597:(e,t,r)=>{var n=r(2587),a=r(9096),s=r(2165),i=r(4052),o=r(929);e.exports=function(e,t,r){var l=i(e)?n:s;return r&&o(e,t,r)&&(t=void 0),l(e,a(t,3))}},4657:e=>{e.exports=function(e,t){return null==e?void 0:e[t]}},4664:(e,t,r)=>{var n=r(4258),a=r(8673);e.exports=function(e,t){return e&&n(e,t,a)}},4746:(e,t,r)=>{var n=r(5652);e.exports=function(e,t){var r=!0;return n(e,function(e,n,a){return r=!!t(e,n,a)}),r}},4757:(e,t,r)=>{var n=r(6552);e.exports=function(){return n.Date.now()}},4816:(e,t,r)=>{var n=r(7251),a=r(7159),s=r(438),i=r(9394),o=r(6874);function l(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}l.prototype.clear=n,l.prototype.delete=a,l.prototype.get=s,l.prototype.has=i,l.prototype.set=o,e.exports=l},4983:(e,t)=>{"use strict";var r="function"===typeof Symbol&&Symbol.for,n=r?Symbol.for("react.element"):60103,a=r?Symbol.for("react.portal"):60106,s=r?Symbol.for("react.fragment"):60107,i=r?Symbol.for("react.strict_mode"):60108,o=r?Symbol.for("react.profiler"):60114,l=r?Symbol.for("react.provider"):60109,c=r?Symbol.for("react.context"):60110,d=r?Symbol.for("react.async_mode"):60111,u=r?Symbol.for("react.concurrent_mode"):60111,p=r?Symbol.for("react.forward_ref"):60112,m=r?Symbol.for("react.suspense"):60113,h=r?Symbol.for("react.suspense_list"):60120,f=r?Symbol.for("react.memo"):60115,g=r?Symbol.for("react.lazy"):60116,x=r?Symbol.for("react.block"):60121,y=r?Symbol.for("react.fundamental"):60117,v=r?Symbol.for("react.responder"):60118,b=r?Symbol.for("react.scope"):60119;function j(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case n:switch(e=e.type){case d:case u:case s:case o:case i:case m:return e;default:switch(e=e&&e.$$typeof){case c:case p:case g:case f:case l:return e;default:return t}}case a:return t}}}function w(e){return j(e)===u}t.AsyncMode=d,t.ConcurrentMode=u,t.ContextConsumer=c,t.ContextProvider=l,t.Element=n,t.ForwardRef=p,t.Fragment=s,t.Lazy=g,t.Memo=f,t.Portal=a,t.Profiler=o,t.StrictMode=i,t.Suspense=m,t.isAsyncMode=function(e){return w(e)||j(e)===d},t.isConcurrentMode=w,t.isContextConsumer=function(e){return j(e)===c},t.isContextProvider=function(e){return j(e)===l},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===n},t.isForwardRef=function(e){return j(e)===p},t.isFragment=function(e){return j(e)===s},t.isLazy=function(e){return j(e)===g},t.isMemo=function(e){return j(e)===f},t.isPortal=function(e){return j(e)===a},t.isProfiler=function(e){return j(e)===o},t.isStrictMode=function(e){return j(e)===i},t.isSuspense=function(e){return j(e)===m},t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===s||e===u||e===o||e===i||e===m||e===h||"object"===typeof e&&null!==e&&(e.$$typeof===g||e.$$typeof===f||e.$$typeof===l||e.$$typeof===c||e.$$typeof===p||e.$$typeof===y||e.$$typeof===v||e.$$typeof===b||e.$$typeof===x)},t.typeOf=j},5029:(e,t,r)=>{var n=r(6989),a=r(3097),s=r(3366),i=r(2597),o=r(9417),l=r(1310),c=r(914);e.exports=function(e,t){return i(e)&&o(t)?l(c(e),t):function(r){var i=a(r,e);return void 0===i&&i===t?s(r,e):n(t,i,3)}}},5043:(e,t,r)=>{"use strict";e.exports=r(4202)},5051:e=>{e.exports=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}},5082:(e,t)=>{"use strict";var r=60103,n=60106,a=60107,s=60108,i=60114,o=60109,l=60110,c=60112,d=60113,u=60120,p=60115,m=60116,h=60121,f=60122,g=60117,x=60129,y=60131;if("function"===typeof Symbol&&Symbol.for){var v=Symbol.for;r=v("react.element"),n=v("react.portal"),a=v("react.fragment"),s=v("react.strict_mode"),i=v("react.profiler"),o=v("react.provider"),l=v("react.context"),c=v("react.forward_ref"),d=v("react.suspense"),u=v("react.suspense_list"),p=v("react.memo"),m=v("react.lazy"),h=v("react.block"),f=v("react.server.block"),g=v("react.fundamental"),x=v("react.debug_trace_mode"),y=v("react.legacy_hidden")}function b(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case a:case i:case s:case d:case u:return e;default:switch(e=e&&e.$$typeof){case l:case c:case m:case p:case o:return e;default:return t}}case n:return t}}}t.isContextConsumer=function(e){return b(e)===l}},5173:(e,t,r)=>{e.exports=r(1497)()},5193:(e,t,r)=>{var n=r(6913),a=r(2761);e.exports=function(e){return a(e)&&"[object Arguments]"==n(e)}},5204:(e,t,r)=>{var n=r(7937)(r(6552),"Map");e.exports=n},5268:(e,t,r)=>{var n=r(9160);e.exports=function(e){return n(e)&&e!=+e}},5295:e=>{e.exports=function(e,t){for(var r=-1,n=null==e?0:e.length;++r<n;)if(!t(e[r],r,e))return!1;return!0}},5324:(e,t,r)=>{var n=r(4052),a=r(2597),s=r(4079),i=r(1069);e.exports=function(e,t){return n(e)?e:a(e,t)?[e]:s(i(e))}},5387:(e,t,r)=>{var n=r(7937)(r(6552),"Promise");e.exports=n},5428:(e,t,r)=>{var n=r(6913),a=r(6173),s=r(2761),i={};i["[object Float32Array]"]=i["[object Float64Array]"]=i["[object Int8Array]"]=i["[object Int16Array]"]=i["[object Int32Array]"]=i["[object Uint8Array]"]=i["[object Uint8ClampedArray]"]=i["[object Uint16Array]"]=i["[object Uint32Array]"]=!0,i["[object Arguments]"]=i["[object Array]"]=i["[object ArrayBuffer]"]=i["[object Boolean]"]=i["[object DataView]"]=i["[object Date]"]=i["[object Error]"]=i["[object Function]"]=i["[object Map]"]=i["[object Number]"]=i["[object Object]"]=i["[object RegExp]"]=i["[object Set]"]=i["[object String]"]=i["[object WeakMap]"]=!1,e.exports=function(e){return s(e)&&a(e.length)&&!!i[n(e)]}},5538:(e,t,r)=>{var n=r(7160),a=r(4545),s=r(793),i=r(7760),o=r(3892),l=r(6788);function c(e){var t=this.__data__=new n(e);this.size=t.size}c.prototype.clear=a,c.prototype.delete=s,c.prototype.get=i,c.prototype.has=o,c.prototype.set=l,e.exports=c},5575:(e,t,r)=>{var n=r(7937)(Object,"create");e.exports=n},5636:(e,t,r)=>{var n=r(1170),a=Math.max;e.exports=function(e,t,r){return t=a(void 0===t?e.length-1:t,0),function(){for(var s=arguments,i=-1,o=a(s.length-t,0),l=Array(o);++i<o;)l[i]=s[t+i];i=-1;for(var c=Array(t+1);++i<t;)c[i]=s[i];return c[t]=r(l),n(e,this,c)}}},5647:(e,t,r)=>{var n=r(3279),a=r(5636),s=r(6350);e.exports=function(e,t){return s(a(e,t,n),e+"")}},5652:(e,t,r)=>{var n=r(4664),a=r(6516)(n);e.exports=a},5654:(e,t,r)=>{var n=r(7937),a=function(){try{var e=n(Object,"defineProperty");return e({},"",{}),e}catch(t){}}();e.exports=a},5713:e=>{e.exports=function(){}},5752:(e,t,r)=>{var n=r(9395),a=Object.prototype.hasOwnProperty;e.exports=function(e,t,r,s,i,o){var l=1&r,c=n(e),d=c.length;if(d!=n(t).length&&!l)return!1;for(var u=d;u--;){var p=c[u];if(!(l?p in t:a.call(t,p)))return!1}var m=o.get(e),h=o.get(t);if(m&&h)return m==t&&h==e;var f=!0;o.set(e,t),o.set(t,e);for(var g=l;++u<d;){var x=e[p=c[u]],y=t[p];if(s)var v=l?s(y,x,p,t,e,o):s(x,y,p,e,t,o);if(!(void 0===v?x===y||i(x,y,r,s,o):v)){f=!1;break}g||(g="constructor"==p)}if(f&&!g){var b=e.constructor,j=t.constructor;b==j||!("constructor"in e)||!("constructor"in t)||"function"==typeof b&&b instanceof b&&"function"==typeof j&&j instanceof j||(f=!1)}return o.delete(e),o.delete(t),f}},5797:(e,t,r)=>{var n=r(4816);function a(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var r=function(){var n=arguments,a=t?t.apply(this,n):n[0],s=r.cache;if(s.has(a))return s.get(a);var i=e.apply(this,n);return r.cache=s.set(a,i)||s,i};return r.cache=new(a.Cache||n),r}a.Cache=n,e.exports=a},5816:e=>{e.exports=function(e,t,r,n){for(var a=e.length,s=r+(n?1:-1);n?s--:++s<a;)if(t(e[s],s,e))return s;return-1}},5866:(e,t,r)=>{var n=r(8468);e.exports=function(e,t){return!!(null==e?0:e.length)&&n(e,t,0)>-1}},5893:(e,t,r)=>{var n=r(6599);e.exports=function(e,t,r){for(var a=-1,s=e.criteria,i=t.criteria,o=s.length,l=r.length;++a<o;){var c=n(s[a],i[a]);if(c)return a>=l?c:c*("desc"==r[a]?-1:1)}return e.index-t.index}},5906:e=>{e.exports=function(e){return function(t,r,n){for(var a=-1,s=Object(t),i=n(t),o=i.length;o--;){var l=i[e?o:++a];if(!1===r(s[l],l,s))break}return t}}},5967:e=>{e.exports=function(e){return e.split("")}},5990:(e,t,r)=>{var n=r(3028)(Object.getPrototypeOf,Object);e.exports=n},6095:e=>{var t=Object.prototype.toString;e.exports=function(e){return t.call(e)}},6140:e=>{var t=Object.prototype;e.exports=function(e){var r=e&&e.constructor;return e===("function"==typeof r&&r.prototype||t)}},6173:e=>{e.exports=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}},6179:e=>{e.exports=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this}},6311:e=>{var t=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");e.exports=function(e){return t.test(e)}},6350:(e,t,r)=>{var n=r(8325),a=r(6578)(n);e.exports=a},6361:(e,t,r)=>{var n=r(6913),a=r(2761);e.exports=function(e){return!0===e||!1===e||a(e)&&"[object Boolean]"==n(e)}},6378:(e,t)=>{"use strict";var r,n=Symbol.for("react.element"),a=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),c=Symbol.for("react.context"),d=Symbol.for("react.server_context"),u=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),m=Symbol.for("react.suspense_list"),h=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),g=Symbol.for("react.offscreen");function x(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case n:switch(e=e.type){case s:case o:case i:case p:case m:return e;default:switch(e=e&&e.$$typeof){case d:case c:case u:case f:case h:case l:return e;default:return t}}case a:return t}}}r=Symbol.for("react.module.reference"),t.isFragment=function(e){return x(e)===s}},6399:(e,t,r)=>{var n=r(5538),a=r(3668),s=r(9987),i=r(5752),o=r(6924),l=r(4052),c=r(4543),d=r(1268),u="[object Arguments]",p="[object Array]",m="[object Object]",h=Object.prototype.hasOwnProperty;e.exports=function(e,t,r,f,g,x){var y=l(e),v=l(t),b=y?p:o(e),j=v?p:o(t),w=(b=b==u?m:b)==m,N=(j=j==u?m:j)==m,k=b==j;if(k&&c(e)){if(!c(t))return!1;y=!0,w=!1}if(k&&!w)return x||(x=new n),y||d(e)?a(e,t,r,f,g,x):s(e,t,b,r,f,g,x);if(!(1&r)){var S=w&&h.call(e,"__wrapped__"),_=N&&h.call(t,"__wrapped__");if(S||_){var C=S?e.value():e,A=_?t.value():t;return x||(x=new n),g(C,A,r,f,x)}}return!!k&&(x||(x=new n),i(e,t,r,f,g,x))}},6516:(e,t,r)=>{var n=r(6571);e.exports=function(e,t){return function(r,a){if(null==r)return r;if(!n(r))return e(r,a);for(var s=r.length,i=t?s:-1,o=Object(r);(t?i--:++i<s)&&!1!==a(o[i],i,o););return r}}},6532:(e,t,r)=>{var n=r(5538),a=r(6989);e.exports=function(e,t,r,s){var i=r.length,o=i,l=!s;if(null==e)return!o;for(e=Object(e);i--;){var c=r[i];if(l&&c[2]?c[1]!==e[c[0]]:!(c[0]in e))return!1}for(;++i<o;){var d=(c=r[i])[0],u=e[d],p=c[1];if(l&&c[2]){if(void 0===u&&!(d in e))return!1}else{var m=new n;if(s)var h=s(u,p,d,e,t,m);if(!(void 0===h?a(p,u,3,s,m):h))return!1}}return!0}},6552:(e,t,r)=>{var n=r(7105),a="object"==typeof self&&self&&self.Object===Object&&self,s=n||a||Function("return this")();e.exports=s},6571:(e,t,r)=>{var n=r(1629),a=r(6173);e.exports=function(e){return null!=e&&a(e.length)&&!n(e)}},6578:e=>{var t=Date.now;e.exports=function(e){var r=0,n=0;return function(){var a=t(),s=16-(a-n);if(n=a,s>0){if(++r>=800)return arguments[0]}else r=0;return e.apply(void 0,arguments)}}},6599:(e,t,r)=>{var n=r(9841);e.exports=function(e,t){if(e!==t){var r=void 0!==e,a=null===e,s=e===e,i=n(e),o=void 0!==t,l=null===t,c=t===t,d=n(t);if(!l&&!d&&!i&&e>t||i&&o&&c&&!l&&!d||a&&o&&c||!r&&c||!s)return 1;if(!a&&!i&&!d&&e<t||d&&r&&s&&!a&&!i||l&&r&&s||!o&&s||!c)return-1}return 0}},6600:(e,t,r)=>{var n=r(7937)(r(6552),"WeakMap");e.exports=n},6604:(e,t,r)=>{var n=r(3331)();e.exports=n},6686:e=>{e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},6704:e=>{e.exports=function(e){return this.__data__.has(e)}},6745:(e,t,r)=>{var n=r(9742),a=r(61),s=r(3279);e.exports=function(e){return e&&e.length?n(e,s,a):void 0}},6788:(e,t,r)=>{var n=r(7160),a=r(5204),s=r(4816);e.exports=function(e,t){var r=this.__data__;if(r instanceof n){var i=r.__data__;if(!a||i.length<199)return i.push([e,t]),this.size=++r.size,this;r=this.__data__=new s(i)}return r.set(e,t),this.size=r.size,this}},6832:(e,t,r)=>{e=r.nmd(e);var n=r(7105),a=t&&!t.nodeType&&t,s=a&&e&&!e.nodeType&&e,i=s&&s.exports===a&&n.process,o=function(){try{var e=s&&s.require&&s.require("util").types;return e||i&&i.binding&&i.binding("util")}catch(t){}}();e.exports=o},6874:(e,t,r)=>{var n=r(2622);e.exports=function(e,t){var r=n(this,e),a=r.size;return r.set(e,t),this.size+=r.size==a?0:1,this}},6913:(e,t,r)=>{var n=r(9812),a=r(4552),s=r(6095),i=n?n.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":i&&i in Object(e)?a(e):s(e)}},6924:(e,t,r)=>{var n=r(7685),a=r(5204),s=r(5387),i=r(2070),o=r(6600),l=r(6913),c=r(6996),d="[object Map]",u="[object Promise]",p="[object Set]",m="[object WeakMap]",h="[object DataView]",f=c(n),g=c(a),x=c(s),y=c(i),v=c(o),b=l;(n&&b(new n(new ArrayBuffer(1)))!=h||a&&b(new a)!=d||s&&b(s.resolve())!=u||i&&b(new i)!=p||o&&b(new o)!=m)&&(b=function(e){var t=l(e),r="[object Object]"==t?e.constructor:void 0,n=r?c(r):"";if(n)switch(n){case f:return h;case g:return d;case x:return u;case y:return p;case v:return m}return t}),e.exports=b},6954:(e,t,r)=>{var n=r(1629),a=r(7857),s=r(6686),i=r(6996),o=/^\[object .+?Constructor\]$/,l=Function.prototype,c=Object.prototype,d=l.toString,u=c.hasOwnProperty,p=RegExp("^"+d.call(u).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=function(e){return!(!s(e)||a(e))&&(n(e)?p:o).test(i(e))}},6989:(e,t,r)=>{var n=r(6399),a=r(2761);e.exports=function e(t,r,s,i,o){return t===r||(null==t||null==r||!a(t)&&!a(r)?t!==t&&r!==r:n(t,r,s,i,e,o))}},6996:e=>{var t=Function.prototype.toString;e.exports=function(e){if(null!=e){try{return t.call(e)}catch(r){}try{return e+""}catch(r){}}return""}},7002:(e,t,r)=>{var n=r(5295),a=r(4746),s=r(9096),i=r(4052),o=r(929);e.exports=function(e,t,r){var l=i(e)?n:a;return r&&o(e,t,r)&&(t=void 0),l(e,s(t,3))}},7105:(e,t,r)=>{var n="object"==typeof r.g&&r.g&&r.g.Object===Object&&r.g;e.exports=n},7116:(e,t,r)=>{var n=r(9812),a=r(2777),s=r(4052),i=n?n.isConcatSpreadable:void 0;e.exports=function(e){return s(e)||a(e)||!!(i&&e&&e[i])}},7159:(e,t,r)=>{var n=r(2622);e.exports=function(e){var t=n(this,e).delete(e);return this.size-=t?1:0,t}},7160:(e,t,r)=>{var n=r(7563),a=r(9935),s=r(4190),i=r(1946),o=r(1714);function l(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}l.prototype.clear=n,l.prototype.delete=a,l.prototype.get=s,l.prototype.has=i,l.prototype.set=o,e.exports=l},7234:(e,t)=>{"use strict";function r(e,t){var r=e.length;e.push(t);e:for(;0<r;){var n=r-1>>>1,a=e[n];if(!(0<s(a,t)))break e;e[n]=t,e[r]=a,r=n}}function n(e){return 0===e.length?null:e[0]}function a(e){if(0===e.length)return null;var t=e[0],r=e.pop();if(r!==t){e[0]=r;e:for(var n=0,a=e.length,i=a>>>1;n<i;){var o=2*(n+1)-1,l=e[o],c=o+1,d=e[c];if(0>s(l,r))c<a&&0>s(d,l)?(e[n]=d,e[c]=r,n=c):(e[n]=l,e[o]=r,n=o);else{if(!(c<a&&0>s(d,r)))break e;e[n]=d,e[c]=r,n=c}}}return t}function s(e,t){var r=e.sortIndex-t.sortIndex;return 0!==r?r:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],d=[],u=1,p=null,m=3,h=!1,f=!1,g=!1,x="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,v="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=n(d);null!==t;){if(null===t.callback)a(d);else{if(!(t.startTime<=e))break;a(d),t.sortIndex=t.expirationTime,r(c,t)}t=n(d)}}function j(e){if(g=!1,b(e),!f)if(null!==n(c))f=!0,I(w);else{var t=n(d);null!==t&&M(j,t.startTime-e)}}function w(e,r){f=!1,g&&(g=!1,y(_),_=-1),h=!0;var s=m;try{for(b(r),p=n(c);null!==p&&(!(p.expirationTime>r)||e&&!O());){var i=p.callback;if("function"===typeof i){p.callback=null,m=p.priorityLevel;var o=i(p.expirationTime<=r);r=t.unstable_now(),"function"===typeof o?p.callback=o:p===n(c)&&a(c),b(r)}else a(c);p=n(c)}if(null!==p)var l=!0;else{var u=n(d);null!==u&&M(j,u.startTime-r),l=!1}return l}finally{p=null,m=s,h=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var N,k=!1,S=null,_=-1,C=5,A=-1;function O(){return!(t.unstable_now()-A<C)}function P(){if(null!==S){var e=t.unstable_now();A=e;var r=!0;try{r=S(!0,e)}finally{r?N():(k=!1,S=null)}}else k=!1}if("function"===typeof v)N=function(){v(P)};else if("undefined"!==typeof MessageChannel){var E=new MessageChannel,T=E.port2;E.port1.onmessage=P,N=function(){T.postMessage(null)}}else N=function(){x(P,0)};function I(e){S=e,k||(k=!0,N())}function M(e,r){_=x(function(){e(t.unstable_now())},r)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){f||h||(f=!0,I(w))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(e){switch(m){case 1:case 2:case 3:var t=3;break;default:t=m}var r=m;m=t;try{return e()}finally{m=r}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var r=m;m=e;try{return t()}finally{m=r}},t.unstable_scheduleCallback=function(e,a,s){var i=t.unstable_now();switch("object"===typeof s&&null!==s?s="number"===typeof(s=s.delay)&&0<s?i+s:i:s=i,e){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return e={id:u++,callback:a,priorityLevel:e,startTime:s,expirationTime:o=s+o,sortIndex:-1},s>i?(e.sortIndex=s,r(d,e),null===n(c)&&e===n(d)&&(g?(y(_),_=-1):g=!0,M(j,s-i))):(e.sortIndex=o,r(c,e),f||h||(f=!0,I(w))),e},t.unstable_shouldYield=O,t.unstable_wrapCallback=function(e){var t=m;return function(){var r=m;m=t;try{return e.apply(this,arguments)}finally{m=r}}}},7251:(e,t,r)=>{var n=r(8724),a=r(7160),s=r(5204);e.exports=function(){this.size=0,this.__data__={hash:new n,map:new(s||a),string:new n}}},7283:e=>{"use strict";var t=Object.prototype.hasOwnProperty,r="~";function n(){}function a(e,t,r){this.fn=e,this.context=t,this.once=r||!1}function s(e,t,n,s,i){if("function"!==typeof n)throw new TypeError("The listener must be a function");var o=new a(n,s||e,i),l=r?r+t:t;return e._events[l]?e._events[l].fn?e._events[l]=[e._events[l],o]:e._events[l].push(o):(e._events[l]=o,e._eventsCount++),e}function i(e,t){0===--e._eventsCount?e._events=new n:delete e._events[t]}function o(){this._events=new n,this._eventsCount=0}Object.create&&(n.prototype=Object.create(null),(new n).__proto__||(r=!1)),o.prototype.eventNames=function(){var e,n,a=[];if(0===this._eventsCount)return a;for(n in e=this._events)t.call(e,n)&&a.push(r?n.slice(1):n);return Object.getOwnPropertySymbols?a.concat(Object.getOwnPropertySymbols(e)):a},o.prototype.listeners=function(e){var t=r?r+e:e,n=this._events[t];if(!n)return[];if(n.fn)return[n.fn];for(var a=0,s=n.length,i=new Array(s);a<s;a++)i[a]=n[a].fn;return i},o.prototype.listenerCount=function(e){var t=r?r+e:e,n=this._events[t];return n?n.fn?1:n.length:0},o.prototype.emit=function(e,t,n,a,s,i){var o=r?r+e:e;if(!this._events[o])return!1;var l,c,d=this._events[o],u=arguments.length;if(d.fn){switch(d.once&&this.removeListener(e,d.fn,void 0,!0),u){case 1:return d.fn.call(d.context),!0;case 2:return d.fn.call(d.context,t),!0;case 3:return d.fn.call(d.context,t,n),!0;case 4:return d.fn.call(d.context,t,n,a),!0;case 5:return d.fn.call(d.context,t,n,a,s),!0;case 6:return d.fn.call(d.context,t,n,a,s,i),!0}for(c=1,l=new Array(u-1);c<u;c++)l[c-1]=arguments[c];d.fn.apply(d.context,l)}else{var p,m=d.length;for(c=0;c<m;c++)switch(d[c].once&&this.removeListener(e,d[c].fn,void 0,!0),u){case 1:d[c].fn.call(d[c].context);break;case 2:d[c].fn.call(d[c].context,t);break;case 3:d[c].fn.call(d[c].context,t,n);break;case 4:d[c].fn.call(d[c].context,t,n,a);break;default:if(!l)for(p=1,l=new Array(u-1);p<u;p++)l[p-1]=arguments[p];d[c].fn.apply(d[c].context,l)}}return!0},o.prototype.on=function(e,t,r){return s(this,e,t,r,!1)},o.prototype.once=function(e,t,r){return s(this,e,t,r,!0)},o.prototype.removeListener=function(e,t,n,a){var s=r?r+e:e;if(!this._events[s])return this;if(!t)return i(this,s),this;var o=this._events[s];if(o.fn)o.fn!==t||a&&!o.once||n&&o.context!==n||i(this,s);else{for(var l=0,c=[],d=o.length;l<d;l++)(o[l].fn!==t||a&&!o[l].once||n&&o[l].context!==n)&&c.push(o[l]);c.length?this._events[s]=1===c.length?c[0]:c:i(this,s)}return this},o.prototype.removeAllListeners=function(e){var t;return e?(t=r?r+e:e,this._events[t]&&i(this,t)):(this._events=new n,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=r,o.EventEmitter=o,e.exports=o},7303:(e,t,r)=>{var n=r(801),a=1/0;e.exports=function(e){return e?(e=n(e))===a||e===-1/0?17976931348623157e292*(e<0?-1:1):e===e?e:0:0===e?e:0}},7424:(e,t,r)=>{var n=r(755),a=r(2536),s=r(5647),i=r(929),o=s(function(e,t){if(null==e)return[];var r=t.length;return r>1&&i(e,t[0],t[1])?t=[]:r>2&&i(t[0],t[1],t[2])&&(t=[t[0]]),a(e,n(t,1),[])});e.exports=o},7498:e=>{e.exports=function(e,t){return e>t}},7529:e=>{e.exports=function(e,t){for(var r=-1,n=null==e?0:e.length,a=0,s=[];++r<n;){var i=e[r];t(i,r,e)&&(s[a++]=i)}return s}},7563:e=>{e.exports=function(){this.__data__=[],this.size=0}},7574:e=>{e.exports=function(e){return function(t){return e(t)}}},7615:(e,t,r)=>{var n=r(5575);e.exports=function(){this.__data__=n?n(null):{},this.size=0}},7676:(e,t,r)=>{var n=r(8189),a=r(6311),s=r(9115),i=r(1069);e.exports=function(e){return function(t){t=i(t);var r=a(t)?s(t):void 0,o=r?r[0]:t.charAt(0),l=r?n(r,1).join(""):t.slice(1);return o[e]()+l}}},7685:(e,t,r)=>{var n=r(7937)(r(6552),"DataView");e.exports=n},7760:e=>{e.exports=function(e){return this.__data__.get(e)}},7828:e=>{e.exports=function(){return[]}},7857:(e,t,r)=>{var n=r(3440),a=function(){var e=/[^.]+$/.exec(n&&n.keys&&n.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();e.exports=function(e){return!!a&&a in e}},7894:e=>{e.exports=function(e,t){return null!=e&&t in Object(e)}},7937:(e,t,r)=>{var n=r(6954),a=r(4657);e.exports=function(e,t){var r=a(e,t);return n(r)?r:void 0}},7950:(e,t,r)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=r(2730)},8114:e=>{e.exports=function(e,t){return e.has(t)}},8182:(e,t,r)=>{var n=r(2070),a=r(5713),s=r(2074),i=n&&1/s(new n([,-0]))[1]==1/0?function(e){return new n(e)}:a;e.exports=i},8189:(e,t,r)=>{var n=r(3871);e.exports=function(e,t,r){var a=e.length;return r=void 0===r?a:r,!t&&r>=a?e:n(e,t,r)}},8210:function(e,t,r){var n;!function(){"use strict";var a,s=1e9,i={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},o=!0,l="[DecimalError] ",c=l+"Invalid argument: ",d=l+"Exponent out of range: ",u=Math.floor,p=Math.pow,m=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,h=1e7,f=9007199254740991,g=u(1286742750677284.5),x={};function y(e,t){var r,n,a,s,i,l,c,d,u=e.constructor,p=u.precision;if(!e.s||!t.s)return t.s||(t=new u(e)),o?A(t,p):t;if(c=e.d,d=t.d,i=e.e,a=t.e,c=c.slice(),s=i-a){for(s<0?(n=c,s=-s,l=d.length):(n=d,a=i,l=c.length),s>(l=(i=Math.ceil(p/7))>l?i+1:l+1)&&(s=l,n.length=1),n.reverse();s--;)n.push(0);n.reverse()}for((l=c.length)-(s=d.length)<0&&(s=l,n=d,d=c,c=n),r=0;s;)r=(c[--s]=c[s]+d[s]+r)/h|0,c[s]%=h;for(r&&(c.unshift(r),++a),l=c.length;0==c[--l];)c.pop();return t.d=c,t.e=a,o?A(t,p):t}function v(e,t,r){if(e!==~~e||e<t||e>r)throw Error(c+e)}function b(e){var t,r,n,a=e.length-1,s="",i=e[0];if(a>0){for(s+=i,t=1;t<a;t++)(r=7-(n=e[t]+"").length)&&(s+=S(r)),s+=n;(r=7-(n=(i=e[t])+"").length)&&(s+=S(r))}else if(0===i)return"0";for(;i%10===0;)i/=10;return s+i}x.absoluteValue=x.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e},x.comparedTo=x.cmp=function(e){var t,r,n,a,s=this;if(e=new s.constructor(e),s.s!==e.s)return s.s||-e.s;if(s.e!==e.e)return s.e>e.e^s.s<0?1:-1;for(t=0,r=(n=s.d.length)<(a=e.d.length)?n:a;t<r;++t)if(s.d[t]!==e.d[t])return s.d[t]>e.d[t]^s.s<0?1:-1;return n===a?0:n>a^s.s<0?1:-1},x.decimalPlaces=x.dp=function(){var e=this,t=e.d.length-1,r=7*(t-e.e);if(t=e.d[t])for(;t%10==0;t/=10)r--;return r<0?0:r},x.dividedBy=x.div=function(e){return j(this,new this.constructor(e))},x.dividedToIntegerBy=x.idiv=function(e){var t=this.constructor;return A(j(this,new t(e),0,1),t.precision)},x.equals=x.eq=function(e){return!this.cmp(e)},x.exponent=function(){return N(this)},x.greaterThan=x.gt=function(e){return this.cmp(e)>0},x.greaterThanOrEqualTo=x.gte=function(e){return this.cmp(e)>=0},x.isInteger=x.isint=function(){return this.e>this.d.length-2},x.isNegative=x.isneg=function(){return this.s<0},x.isPositive=x.ispos=function(){return this.s>0},x.isZero=function(){return 0===this.s},x.lessThan=x.lt=function(e){return this.cmp(e)<0},x.lessThanOrEqualTo=x.lte=function(e){return this.cmp(e)<1},x.logarithm=x.log=function(e){var t,r=this,n=r.constructor,s=n.precision,i=s+5;if(void 0===e)e=new n(10);else if((e=new n(e)).s<1||e.eq(a))throw Error(l+"NaN");if(r.s<1)throw Error(l+(r.s?"NaN":"-Infinity"));return r.eq(a)?new n(0):(o=!1,t=j(_(r,i),_(e,i),i),o=!0,A(t,s))},x.minus=x.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?O(t,e):y(t,(e.s=-e.s,e))},x.modulo=x.mod=function(e){var t,r=this,n=r.constructor,a=n.precision;if(!(e=new n(e)).s)throw Error(l+"NaN");return r.s?(o=!1,t=j(r,e,0,1).times(e),o=!0,r.minus(t)):A(new n(r),a)},x.naturalExponential=x.exp=function(){return w(this)},x.naturalLogarithm=x.ln=function(){return _(this)},x.negated=x.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e},x.plus=x.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?y(t,e):O(t,(e.s=-e.s,e))},x.precision=x.sd=function(e){var t,r,n,a=this;if(void 0!==e&&e!==!!e&&1!==e&&0!==e)throw Error(c+e);if(t=N(a)+1,r=7*(n=a.d.length-1)+1,n=a.d[n]){for(;n%10==0;n/=10)r--;for(n=a.d[0];n>=10;n/=10)r++}return e&&t>r?t:r},x.squareRoot=x.sqrt=function(){var e,t,r,n,a,s,i,c=this,d=c.constructor;if(c.s<1){if(!c.s)return new d(0);throw Error(l+"NaN")}for(e=N(c),o=!1,0==(a=Math.sqrt(+c))||a==1/0?(((t=b(c.d)).length+e)%2==0&&(t+="0"),a=Math.sqrt(t),e=u((e+1)/2)-(e<0||e%2),n=new d(t=a==1/0?"5e"+e:(t=a.toExponential()).slice(0,t.indexOf("e")+1)+e)):n=new d(a.toString()),a=i=(r=d.precision)+3;;)if(n=(s=n).plus(j(c,s,i+2)).times(.5),b(s.d).slice(0,i)===(t=b(n.d)).slice(0,i)){if(t=t.slice(i-3,i+1),a==i&&"4999"==t){if(A(s,r+1,0),s.times(s).eq(c)){n=s;break}}else if("9999"!=t)break;i+=4}return o=!0,A(n,r)},x.times=x.mul=function(e){var t,r,n,a,s,i,l,c,d,u=this,p=u.constructor,m=u.d,f=(e=new p(e)).d;if(!u.s||!e.s)return new p(0);for(e.s*=u.s,r=u.e+e.e,(c=m.length)<(d=f.length)&&(s=m,m=f,f=s,i=c,c=d,d=i),s=[],n=i=c+d;n--;)s.push(0);for(n=d;--n>=0;){for(t=0,a=c+n;a>n;)l=s[a]+f[n]*m[a-n-1]+t,s[a--]=l%h|0,t=l/h|0;s[a]=(s[a]+t)%h|0}for(;!s[--i];)s.pop();return t?++r:s.shift(),e.d=s,e.e=r,o?A(e,p.precision):e},x.toDecimalPlaces=x.todp=function(e,t){var r=this,n=r.constructor;return r=new n(r),void 0===e?r:(v(e,0,s),void 0===t?t=n.rounding:v(t,0,8),A(r,e+N(r)+1,t))},x.toExponential=function(e,t){var r,n=this,a=n.constructor;return void 0===e?r=P(n,!0):(v(e,0,s),void 0===t?t=a.rounding:v(t,0,8),r=P(n=A(new a(n),e+1,t),!0,e+1)),r},x.toFixed=function(e,t){var r,n,a=this,i=a.constructor;return void 0===e?P(a):(v(e,0,s),void 0===t?t=i.rounding:v(t,0,8),r=P((n=A(new i(a),e+N(a)+1,t)).abs(),!1,e+N(n)+1),a.isneg()&&!a.isZero()?"-"+r:r)},x.toInteger=x.toint=function(){var e=this,t=e.constructor;return A(new t(e),N(e)+1,t.rounding)},x.toNumber=function(){return+this},x.toPower=x.pow=function(e){var t,r,n,s,i,c,d=this,p=d.constructor,m=+(e=new p(e));if(!e.s)return new p(a);if(!(d=new p(d)).s){if(e.s<1)throw Error(l+"Infinity");return d}if(d.eq(a))return d;if(n=p.precision,e.eq(a))return A(d,n);if(c=(t=e.e)>=(r=e.d.length-1),i=d.s,c){if((r=m<0?-m:m)<=f){for(s=new p(a),t=Math.ceil(n/7+4),o=!1;r%2&&E((s=s.times(d)).d,t),0!==(r=u(r/2));)E((d=d.times(d)).d,t);return o=!0,e.s<0?new p(a).div(s):A(s,n)}}else if(i<0)throw Error(l+"NaN");return i=i<0&&1&e.d[Math.max(t,r)]?-1:1,d.s=1,o=!1,s=e.times(_(d,n+12)),o=!0,(s=w(s)).s=i,s},x.toPrecision=function(e,t){var r,n,a=this,i=a.constructor;return void 0===e?n=P(a,(r=N(a))<=i.toExpNeg||r>=i.toExpPos):(v(e,1,s),void 0===t?t=i.rounding:v(t,0,8),n=P(a=A(new i(a),e,t),e<=(r=N(a))||r<=i.toExpNeg,e)),n},x.toSignificantDigits=x.tosd=function(e,t){var r=this.constructor;return void 0===e?(e=r.precision,t=r.rounding):(v(e,1,s),void 0===t?t=r.rounding:v(t,0,8)),A(new r(this),e,t)},x.toString=x.valueOf=x.val=x.toJSON=function(){var e=this,t=N(e),r=e.constructor;return P(e,t<=r.toExpNeg||t>=r.toExpPos)};var j=function(){function e(e,t){var r,n=0,a=e.length;for(e=e.slice();a--;)r=e[a]*t+n,e[a]=r%h|0,n=r/h|0;return n&&e.unshift(n),e}function t(e,t,r,n){var a,s;if(r!=n)s=r>n?1:-1;else for(a=s=0;a<r;a++)if(e[a]!=t[a]){s=e[a]>t[a]?1:-1;break}return s}function r(e,t,r){for(var n=0;r--;)e[r]-=n,n=e[r]<t[r]?1:0,e[r]=n*h+e[r]-t[r];for(;!e[0]&&e.length>1;)e.shift()}return function(n,a,s,i){var o,c,d,u,p,m,f,g,x,y,v,b,j,w,k,S,_,C,O=n.constructor,P=n.s==a.s?1:-1,E=n.d,T=a.d;if(!n.s)return new O(n);if(!a.s)throw Error(l+"Division by zero");for(c=n.e-a.e,_=T.length,k=E.length,g=(f=new O(P)).d=[],d=0;T[d]==(E[d]||0);)++d;if(T[d]>(E[d]||0)&&--c,(b=null==s?s=O.precision:i?s+(N(n)-N(a))+1:s)<0)return new O(0);if(b=b/7+2|0,d=0,1==_)for(u=0,T=T[0],b++;(d<k||u)&&b--;d++)j=u*h+(E[d]||0),g[d]=j/T|0,u=j%T|0;else{for((u=h/(T[0]+1)|0)>1&&(T=e(T,u),E=e(E,u),_=T.length,k=E.length),w=_,y=(x=E.slice(0,_)).length;y<_;)x[y++]=0;(C=T.slice()).unshift(0),S=T[0],T[1]>=h/2&&++S;do{u=0,(o=t(T,x,_,y))<0?(v=x[0],_!=y&&(v=v*h+(x[1]||0)),(u=v/S|0)>1?(u>=h&&(u=h-1),1==(o=t(p=e(T,u),x,m=p.length,y=x.length))&&(u--,r(p,_<m?C:T,m))):(0==u&&(o=u=1),p=T.slice()),(m=p.length)<y&&p.unshift(0),r(x,p,y),-1==o&&(o=t(T,x,_,y=x.length))<1&&(u++,r(x,_<y?C:T,y)),y=x.length):0===o&&(u++,x=[0]),g[d++]=u,o&&x[0]?x[y++]=E[w]||0:(x=[E[w]],y=1)}while((w++<k||void 0!==x[0])&&b--)}return g[0]||g.shift(),f.e=c,A(f,i?s+N(f)+1:s)}}();function w(e,t){var r,n,s,i,l,c=0,u=0,m=e.constructor,h=m.precision;if(N(e)>16)throw Error(d+N(e));if(!e.s)return new m(a);for(null==t?(o=!1,l=h):l=t,i=new m(.03125);e.abs().gte(.1);)e=e.times(i),u+=5;for(l+=Math.log(p(2,u))/Math.LN10*2+5|0,r=n=s=new m(a),m.precision=l;;){if(n=A(n.times(e),l),r=r.times(++c),b((i=s.plus(j(n,r,l))).d).slice(0,l)===b(s.d).slice(0,l)){for(;u--;)s=A(s.times(s),l);return m.precision=h,null==t?(o=!0,A(s,h)):s}s=i}}function N(e){for(var t=7*e.e,r=e.d[0];r>=10;r/=10)t++;return t}function k(e,t,r){if(t>e.LN10.sd())throw o=!0,r&&(e.precision=r),Error(l+"LN10 precision limit exceeded");return A(new e(e.LN10),t)}function S(e){for(var t="";e--;)t+="0";return t}function _(e,t){var r,n,s,i,c,d,u,p,m,h=1,f=e,g=f.d,x=f.constructor,y=x.precision;if(f.s<1)throw Error(l+(f.s?"NaN":"-Infinity"));if(f.eq(a))return new x(0);if(null==t?(o=!1,p=y):p=t,f.eq(10))return null==t&&(o=!0),k(x,p);if(p+=10,x.precision=p,n=(r=b(g)).charAt(0),i=N(f),!(Math.abs(i)<15e14))return u=k(x,p+2,y).times(i+""),f=_(new x(n+"."+r.slice(1)),p-10).plus(u),x.precision=y,null==t?(o=!0,A(f,y)):f;for(;n<7&&1!=n||1==n&&r.charAt(1)>3;)n=(r=b((f=f.times(e)).d)).charAt(0),h++;for(i=N(f),n>1?(f=new x("0."+r),i++):f=new x(n+"."+r.slice(1)),d=c=f=j(f.minus(a),f.plus(a),p),m=A(f.times(f),p),s=3;;){if(c=A(c.times(m),p),b((u=d.plus(j(c,new x(s),p))).d).slice(0,p)===b(d.d).slice(0,p))return d=d.times(2),0!==i&&(d=d.plus(k(x,p+2,y).times(i+""))),d=j(d,new x(h),p),x.precision=y,null==t?(o=!0,A(d,y)):d;d=u,s+=2}}function C(e,t){var r,n,a;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(n=t.search(/e/i))>0?(r<0&&(r=n),r+=+t.slice(n+1),t=t.substring(0,n)):r<0&&(r=t.length),n=0;48===t.charCodeAt(n);)++n;for(a=t.length;48===t.charCodeAt(a-1);)--a;if(t=t.slice(n,a)){if(a-=n,r=r-n-1,e.e=u(r/7),e.d=[],n=(r+1)%7,r<0&&(n+=7),n<a){for(n&&e.d.push(+t.slice(0,n)),a-=7;n<a;)e.d.push(+t.slice(n,n+=7));n=7-(t=t.slice(n)).length}else n-=a;for(;n--;)t+="0";if(e.d.push(+t),o&&(e.e>g||e.e<-g))throw Error(d+r)}else e.s=0,e.e=0,e.d=[0];return e}function A(e,t,r){var n,a,s,i,l,c,m,f,x=e.d;for(i=1,s=x[0];s>=10;s/=10)i++;if((n=t-i)<0)n+=7,a=t,m=x[f=0];else{if((f=Math.ceil((n+1)/7))>=(s=x.length))return e;for(m=s=x[f],i=1;s>=10;s/=10)i++;a=(n%=7)-7+i}if(void 0!==r&&(l=m/(s=p(10,i-a-1))%10|0,c=t<0||void 0!==x[f+1]||m%s,c=r<4?(l||c)&&(0==r||r==(e.s<0?3:2)):l>5||5==l&&(4==r||c||6==r&&(n>0?a>0?m/p(10,i-a):0:x[f-1])%10&1||r==(e.s<0?8:7))),t<1||!x[0])return c?(s=N(e),x.length=1,t=t-s-1,x[0]=p(10,(7-t%7)%7),e.e=u(-t/7)||0):(x.length=1,x[0]=e.e=e.s=0),e;if(0==n?(x.length=f,s=1,f--):(x.length=f+1,s=p(10,7-n),x[f]=a>0?(m/p(10,i-a)%p(10,a)|0)*s:0),c)for(;;){if(0==f){(x[0]+=s)==h&&(x[0]=1,++e.e);break}if(x[f]+=s,x[f]!=h)break;x[f--]=0,s=1}for(n=x.length;0===x[--n];)x.pop();if(o&&(e.e>g||e.e<-g))throw Error(d+N(e));return e}function O(e,t){var r,n,a,s,i,l,c,d,u,p,m=e.constructor,f=m.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new m(e),o?A(t,f):t;if(c=e.d,p=t.d,n=t.e,d=e.e,c=c.slice(),i=d-n){for((u=i<0)?(r=c,i=-i,l=p.length):(r=p,n=d,l=c.length),i>(a=Math.max(Math.ceil(f/7),l)+2)&&(i=a,r.length=1),r.reverse(),a=i;a--;)r.push(0);r.reverse()}else{for((u=(a=c.length)<(l=p.length))&&(l=a),a=0;a<l;a++)if(c[a]!=p[a]){u=c[a]<p[a];break}i=0}for(u&&(r=c,c=p,p=r,t.s=-t.s),l=c.length,a=p.length-l;a>0;--a)c[l++]=0;for(a=p.length;a>i;){if(c[--a]<p[a]){for(s=a;s&&0===c[--s];)c[s]=h-1;--c[s],c[a]+=h}c[a]-=p[a]}for(;0===c[--l];)c.pop();for(;0===c[0];c.shift())--n;return c[0]?(t.d=c,t.e=n,o?A(t,f):t):new m(0)}function P(e,t,r){var n,a=N(e),s=b(e.d),i=s.length;return t?(r&&(n=r-i)>0?s=s.charAt(0)+"."+s.slice(1)+S(n):i>1&&(s=s.charAt(0)+"."+s.slice(1)),s=s+(a<0?"e":"e+")+a):a<0?(s="0."+S(-a-1)+s,r&&(n=r-i)>0&&(s+=S(n))):a>=i?(s+=S(a+1-i),r&&(n=r-a-1)>0&&(s=s+"."+S(n))):((n=a+1)<i&&(s=s.slice(0,n)+"."+s.slice(n)),r&&(n=r-i)>0&&(a+1===i&&(s+="."),s+=S(n))),e.s<0?"-"+s:s}function E(e,t){if(e.length>t)return e.length=t,!0}function T(e){if(!e||"object"!==typeof e)throw Error(l+"Object expected");var t,r,n,a=["precision",1,s,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<a.length;t+=3)if(void 0!==(n=e[r=a[t]])){if(!(u(n)===n&&n>=a[t+1]&&n<=a[t+2]))throw Error(c+r+": "+n);this[r]=n}if(void 0!==(n=e[r="LN10"])){if(n!=Math.LN10)throw Error(c+r+": "+n);this[r]=new this(n)}return this}i=function e(t){var r,n,a;function s(e){var t=this;if(!(t instanceof s))return new s(e);if(t.constructor=s,e instanceof s)return t.s=e.s,t.e=e.e,void(t.d=(e=e.d)?e.slice():e);if("number"===typeof e){if(0*e!==0)throw Error(c+e);if(e>0)t.s=1;else{if(!(e<0))return t.s=0,t.e=0,void(t.d=[0]);e=-e,t.s=-1}return e===~~e&&e<1e7?(t.e=0,void(t.d=[e])):C(t,e.toString())}if("string"!==typeof e)throw Error(c+e);if(45===e.charCodeAt(0)?(e=e.slice(1),t.s=-1):t.s=1,!m.test(e))throw Error(c+e);C(t,e)}if(s.prototype=x,s.ROUND_UP=0,s.ROUND_DOWN=1,s.ROUND_CEIL=2,s.ROUND_FLOOR=3,s.ROUND_HALF_UP=4,s.ROUND_HALF_DOWN=5,s.ROUND_HALF_EVEN=6,s.ROUND_HALF_CEIL=7,s.ROUND_HALF_FLOOR=8,s.clone=e,s.config=s.set=T,void 0===t&&(t={}),t)for(a=["precision","rounding","toExpNeg","toExpPos","LN10"],r=0;r<a.length;)t.hasOwnProperty(n=a[r++])||(t[n]=this[n]);return s.config(t),s}(i),i.default=i.Decimal=i,a=new i(1),void 0===(n=function(){return i}.call(t,r,t,e))||(e.exports=n)}()},8259:(e,t,r)=>{var n=r(5797);e.exports=function(e){var t=n(e,function(e){return 500===r.size&&r.clear(),e}),r=t.cache;return t}},8325:(e,t,r)=>{var n=r(2541),a=r(5654),s=r(3279),i=a?function(e,t){return a(e,"toString",{configurable:!0,enumerable:!1,value:n(t),writable:!0})}:s;e.exports=i},8468:(e,t,r)=>{var n=r(5816),a=r(644),s=r(4020);e.exports=function(e,t,r){return t===t?s(e,t,r):n(e,a,r)}},8541:(e,t,r)=>{var n=r(9812),a=r(149),s=r(4052),i=r(9841),o=n?n.prototype:void 0,l=o?o.toString:void 0;e.exports=function e(t){if("string"==typeof t)return t;if(s(t))return a(t,e)+"";if(i(t))return l?l.call(t):"";var r=t+"";return"0"==r&&1/t==-1/0?"-0":r}},8673:(e,t,r)=>{var n=r(3204),a=r(3713),s=r(6571);e.exports=function(e){return s(e)?n(e):a(e)}},8724:(e,t,r)=>{var n=r(7615),a=r(5051),s=r(2154),i=r(8734),o=r(2662);function l(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}l.prototype.clear=n,l.prototype.delete=a,l.prototype.get=s,l.prototype.has=i,l.prototype.set=o,e.exports=l},8734:(e,t,r)=>{var n=r(5575),a=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;return n?void 0!==t[e]:a.call(t,e)}},8853:(e,t,r)=>{"use strict";e.exports=r(7234)},8883:(e,t,r)=>{var n=r(5652),a=r(6571);e.exports=function(e,t){var r=-1,s=a(e)?Array(e.length):[];return n(e,function(e,n,a){s[++r]=t(e,n,a)}),s}},8895:e=>{e.exports=function(e,t){for(var r=-1,n=t.length,a=e.length;++r<n;)e[a+r]=t[r];return e}},8902:(e,t,r)=>{var n=r(4816),a=r(6179),s=r(6704);function i(e){var t=-1,r=null==e?0:e.length;for(this.__data__=new n;++t<r;)this.add(e[t])}i.prototype.add=i.prototype.push=a,i.prototype.has=s,e.exports=i},8990:(e,t,r)=>{var n=r(9995)(r(2520));e.exports=n},9057:(e,t,r)=>{var n=r(5324),a=r(2777),s=r(4052),i=r(9194),o=r(6173),l=r(914);e.exports=function(e,t,r){for(var c=-1,d=(t=n(t,e)).length,u=!1;++c<d;){var p=l(t[c]);if(!(u=null!=e&&r(e,p)))break;e=e[p]}return u||++c!=d?u:!!(d=null==e?0:e.length)&&o(d)&&i(p,d)&&(s(e)||a(e))}},9062:(e,t,r)=>{"use strict";e.exports=r(6378)},9096:(e,t,r)=>{var n=r(9256),a=r(5029),s=r(3279),i=r(4052),o=r(3932);e.exports=function(e){return"function"==typeof e?e:null==e?s:"object"==typeof e?i(e)?a(e[0],e[1]):n(e):o(e)}},9115:(e,t,r)=>{var n=r(5967),a=r(6311),s=r(715);e.exports=function(e){return a(e)?s(e):n(e)}},9140:(e,t,r)=>{var n=r(7303);e.exports=function(e){var t=n(e),r=t%1;return t===t?r?t-r:t:0}},9160:(e,t,r)=>{var n=r(6913),a=r(2761);e.exports=function(e){return"number"==typeof e||a(e)&&"[object Number]"==n(e)}},9194:e=>{var t=/^(?:0|[1-9]\d*)$/;e.exports=function(e,r){var n=typeof e;return!!(r=null==r?9007199254740991:r)&&("number"==n||"symbol"!=n&&t.test(e))&&e>-1&&e%1==0&&e<r}},9256:(e,t,r)=>{var n=r(6532),a=r(3781),s=r(1310);e.exports=function(e){var t=a(e);return 1==t.length&&t[0][2]?s(t[0][0],t[0][1]):function(r){return r===e||n(r,e,t)}}},9394:(e,t,r)=>{var n=r(2622);e.exports=function(e){return n(this,e).has(e)}},9395:(e,t,r)=>{var n=r(4262),a=r(9621),s=r(8673);e.exports=function(e){return n(e,s,a)}},9417:(e,t,r)=>{var n=r(6686);e.exports=function(e){return e===e&&!n(e)}},9621:(e,t,r)=>{var n=r(7529),a=r(7828),s=Object.prototype.propertyIsEnumerable,i=Object.getOwnPropertySymbols,o=i?function(e){return null==e?[]:(e=Object(e),n(i(e),function(t){return s.call(e,t)}))}:a;e.exports=o},9676:e=>{var t=Math.ceil,r=Math.max;e.exports=function(e,n,a,s){for(var i=-1,o=r(t((n-e)/(a||1)),0),l=Array(o);o--;)l[s?o:++i]=e,e+=a;return l}},9686:e=>{e.exports=function(e){return null==e}},9742:(e,t,r)=>{var n=r(9841);e.exports=function(e,t,r){for(var a=-1,s=e.length;++a<s;){var i=e[a],o=t(i);if(null!=o&&(void 0===l?o===o&&!n(o):r(o,l)))var l=o,c=i}return c}},9812:(e,t,r)=>{var n=r(6552).Symbol;e.exports=n},9841:(e,t,r)=>{var n=r(6913),a=r(2761);e.exports=function(e){return"symbol"==typeof e||a(e)&&"[object Symbol]"==n(e)}},9853:(e,t,r)=>{var n=r(6989);e.exports=function(e,t){return n(e,t)}},9889:(e,t,r)=>{var n=r(3950),a=r(6686);e.exports=function(e,t,r){var s=!0,i=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return a(r)&&(s="leading"in r?!!r.leading:s,i="trailing"in r?!!r.trailing:i),n(e,t,{leading:s,maxWait:t,trailing:i})}},9935:(e,t,r)=>{var n=r(1340),a=Array.prototype.splice;e.exports=function(e){var t=this.__data__,r=n(t,e);return!(r<0)&&(r==t.length-1?t.pop():a.call(t,r,1),--this.size,!0)}},9987:(e,t,r)=>{var n=r(9812),a=r(2929),s=r(3211),i=r(3668),o=r(4160),l=r(2074),c=n?n.prototype:void 0,d=c?c.valueOf:void 0;e.exports=function(e,t,r,n,c,u,p){switch(r){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!u(new a(e),new a(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return s(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var m=o;case"[object Set]":var h=1&n;if(m||(m=l),e.size!=t.size&&!h)return!1;var f=p.get(e);if(f)return f==t;n|=2,p.set(e,t);var g=i(m(e),m(t),n,c,u,p);return p.delete(e),g;case"[object Symbol]":if(d)return d.call(e)==d.call(t)}return!1}},9995:(e,t,r)=>{var n=r(9096),a=r(6571),s=r(8673);e.exports=function(e){return function(t,r,i){var o=Object(t);if(!a(t)){var l=n(r,3);t=s(t),r=function(e){return l(o[e],e,o)}}var c=e(t,r,i);return c>-1?o[l?t[c]:c]:void 0}}}},t={};function r(n){var a=t[n];if(void 0!==a)return a.exports;var s=t[n]={id:n,loaded:!1,exports:{}};return e[n].call(s.exports,s,s.exports,r),s.loaded=!0,s.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;r.t=function(n,a){if(1&a&&(n=this(n)),8&a)return n;if("object"===typeof n&&n){if(4&a&&n.__esModule)return n;if(16&a&&"function"===typeof n.then)return n}var s=Object.create(null);r.r(s);var i={};e=e||[null,t({}),t([]),t(t)];for(var o=2&a&&n;("object"==typeof o||"function"==typeof o)&&!~e.indexOf(o);o=t(o))Object.getOwnPropertyNames(o).forEach(e=>i[e]=()=>n[e]);return i.default=()=>n,r.d(s,i),s}})(),r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),r.p="/aiva/",(()=>{"use strict";var e={};r.r(e),r.d(e,{hasBrowserEnv:()=>dn,hasStandardBrowserEnv:()=>pn,hasStandardBrowserWebWorkerEnv:()=>mn,navigator:()=>un,origin:()=>hn});var t={};r.r(t),r.d(t,{scaleBand:()=>om,scaleDiverging:()=>By,scaleDivergingLog:()=>Uy,scaleDivergingPow:()=>qy,scaleDivergingSqrt:()=>Wy,scaleDivergingSymlog:()=>zy,scaleIdentity:()=>If,scaleImplicit:()=>sm,scaleLinear:()=>Tf,scaleLog:()=>qf,scaleOrdinal:()=>im,scalePoint:()=>cm,scalePow:()=>$f,scaleQuantile:()=>cg,scaleQuantize:()=>dg,scaleRadial:()=>eg,scaleSequential:()=>Ty,scaleSequentialLog:()=>Iy,scaleSequentialPow:()=>Dy,scaleSequentialQuantile:()=>Fy,scaleSequentialSqrt:()=>Ry,scaleSequentialSymlog:()=>My,scaleSqrt:()=>Qf,scaleSymlog:()=>Hf,scaleThreshold:()=>ug,scaleTime:()=>Ay,scaleUtc:()=>Oy,tickFormat:()=>Pf});var n,a=r(5043),s=r.t(a,2),i=r(4391);function o(){return o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},o.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(n||(n={}));const l="popstate";function c(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function d(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(We){}}}function u(e,t){return{usr:e.state,key:e.key,idx:t}}function p(e,t,r,n){return void 0===r&&(r=null),o({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?h(t):t,{state:r,key:t&&t.key||n||Math.random().toString(36).substr(2,8)})}function m(e){let{pathname:t="/",search:r="",hash:n=""}=e;return r&&"?"!==r&&(t+="?"===r.charAt(0)?r:"?"+r),n&&"#"!==n&&(t+="#"===n.charAt(0)?n:"#"+n),t}function h(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}function f(e,t,r,a){void 0===a&&(a={});let{window:s=document.defaultView,v5Compat:i=!1}=a,d=s.history,h=n.Pop,f=null,g=x();function x(){return(d.state||{idx:null}).idx}function y(){h=n.Pop;let e=x(),t=null==e?null:e-g;g=e,f&&f({action:h,location:b.location,delta:t})}function v(e){let t="null"!==s.location.origin?s.location.origin:s.location.href,r="string"===typeof e?e:m(e);return r=r.replace(/ $/,"%20"),c(t,"No window.location.(origin|href) available to create URL for href: "+r),new URL(r,t)}null==g&&(g=0,d.replaceState(o({},d.state,{idx:g}),""));let b={get action(){return h},get location(){return e(s,d)},listen(e){if(f)throw new Error("A history only accepts one active listener");return s.addEventListener(l,y),f=e,()=>{s.removeEventListener(l,y),f=null}},createHref:e=>t(s,e),createURL:v,encodeLocation(e){let t=v(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){h=n.Push;let a=p(b.location,e,t);r&&r(a,e),g=x()+1;let o=u(a,g),l=b.createHref(a);try{d.pushState(o,"",l)}catch(c){if(c instanceof DOMException&&"DataCloneError"===c.name)throw c;s.location.assign(l)}i&&f&&f({action:h,location:b.location,delta:1})},replace:function(e,t){h=n.Replace;let a=p(b.location,e,t);r&&r(a,e),g=x();let s=u(a,g),o=b.createHref(a);d.replaceState(s,"",o),i&&f&&f({action:h,location:b.location,delta:0})},go:e=>d.go(e)};return b}var g;!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(g||(g={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function x(e,t,r){return void 0===r&&(r="/"),y(e,t,r,!1)}function y(e,t,r,n){let a=T(("string"===typeof t?h(t):t).pathname||"/",r);if(null==a)return null;let s=v(e);!function(e){e.sort((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let r=e.length===t.length&&e.slice(0,-1).every((e,r)=>e===t[r]);return r?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map(e=>e.childrenIndex),t.routesMeta.map(e=>e.childrenIndex)))}(s);let i=null;for(let o=0;null==i&&o<s.length;++o){let e=E(a);i=O(s[o],e,n)}return i}function v(e,t,r,n){void 0===t&&(t=[]),void 0===r&&(r=[]),void 0===n&&(n="");let a=(e,a,s)=>{let i={relativePath:void 0===s?e.path||"":s,caseSensitive:!0===e.caseSensitive,childrenIndex:a,route:e};i.relativePath.startsWith("/")&&(c(i.relativePath.startsWith(n),'Absolute route path "'+i.relativePath+'" nested under path "'+n+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),i.relativePath=i.relativePath.slice(n.length));let o=F([n,i.relativePath]),l=r.concat(i);e.children&&e.children.length>0&&(c(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+o+'".'),v(e.children,t,l,o)),(null!=e.path||e.index)&&t.push({path:o,score:A(o,e.index),routesMeta:l})};return e.forEach((e,t)=>{var r;if(""!==e.path&&null!=(r=e.path)&&r.includes("?"))for(let n of b(e.path))a(e,t,n);else a(e,t)}),t}function b(e){let t=e.split("/");if(0===t.length)return[];let[r,...n]=t,a=r.endsWith("?"),s=r.replace(/\?$/,"");if(0===n.length)return a?[s,""]:[s];let i=b(n.join("/")),o=[];return o.push(...i.map(e=>""===e?s:[s,e].join("/"))),a&&o.push(...i),o.map(t=>e.startsWith("/")&&""===t?"/":t)}const j=/^:[\w-]+$/,w=3,N=2,k=1,S=10,_=-2,C=e=>"*"===e;function A(e,t){let r=e.split("/"),n=r.length;return r.some(C)&&(n+=_),t&&(n+=N),r.filter(e=>!C(e)).reduce((e,t)=>e+(j.test(t)?w:""===t?k:S),n)}function O(e,t,r){void 0===r&&(r=!1);let{routesMeta:n}=e,a={},s="/",i=[];for(let o=0;o<n.length;++o){let e=n[o],l=o===n.length-1,c="/"===s?t:t.slice(s.length)||"/",d=P({path:e.relativePath,caseSensitive:e.caseSensitive,end:l},c),u=e.route;if(!d&&l&&r&&!n[n.length-1].route.index&&(d=P({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},c)),!d)return null;Object.assign(a,d.params),i.push({params:a,pathname:F([s,d.pathname]),pathnameBase:L(F([s,d.pathnameBase])),route:u}),"/"!==d.pathnameBase&&(s=F([s,d.pathnameBase]))}return i}function P(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=function(e,t,r){void 0===t&&(t=!1);void 0===r&&(r=!0);d("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let n=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(e,t,r)=>(n.push({paramName:t,isOptional:null!=r}),r?"/?([^\\/]+)?":"/([^\\/]+)"));e.endsWith("*")?(n.push({paramName:"*"}),a+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?a+="\\/*$":""!==e&&"/"!==e&&(a+="(?:(?=\\/|$))");let s=new RegExp(a,t?void 0:"i");return[s,n]}(e.path,e.caseSensitive,e.end),a=t.match(r);if(!a)return null;let s=a[0],i=s.replace(/(.)\/+$/,"$1"),o=a.slice(1),l=n.reduce((e,t,r)=>{let{paramName:n,isOptional:a}=t;if("*"===n){let e=o[r]||"";i=s.slice(0,s.length-e.length).replace(/(.)\/+$/,"$1")}const l=o[r];return e[n]=a&&!l?void 0:(l||"").replace(/%2F/g,"/"),e},{});return{params:l,pathname:s,pathnameBase:i,pattern:e}}function E(e){try{return e.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(t){return d(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function T(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&"/"!==n?null:e.slice(r)||"/"}function I(e,t,r,n){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(n)+"].  Please separate it out to the `to."+r+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function M(e){return e.filter((e,t)=>0===t||e.route.path&&e.route.path.length>0)}function D(e,t){let r=M(e);return t?r.map((e,t)=>t===r.length-1?e.pathname:e.pathnameBase):r.map(e=>e.pathnameBase)}function R(e,t,r,n){let a;void 0===n&&(n=!1),"string"===typeof e?a=h(e):(a=o({},e),c(!a.pathname||!a.pathname.includes("?"),I("?","pathname","search",a)),c(!a.pathname||!a.pathname.includes("#"),I("#","pathname","hash",a)),c(!a.search||!a.search.includes("#"),I("#","search","hash",a)));let s,i=""===e||""===a.pathname,l=i?"/":a.pathname;if(null==l)s=r;else{let e=t.length-1;if(!n&&l.startsWith("..")){let t=l.split("/");for(;".."===t[0];)t.shift(),e-=1;a.pathname=t.join("/")}s=e>=0?t[e]:"/"}let d=function(e,t){void 0===t&&(t="/");let{pathname:r,search:n="",hash:a=""}="string"===typeof e?h(e):e,s=r?r.startsWith("/")?r:function(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(e=>{".."===e?r.length>1&&r.pop():"."!==e&&r.push(e)}),r.length>1?r.join("/"):"/"}(r,t):t;return{pathname:s,search:B(n),hash:U(a)}}(a,s),u=l&&"/"!==l&&l.endsWith("/"),p=(i||"."===l)&&r.endsWith("/");return d.pathname.endsWith("/")||!u&&!p||(d.pathname+="/"),d}const F=e=>e.join("/").replace(/\/\/+/g,"/"),L=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),B=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",U=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";Error;function z(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}const q=["post","put","patch","delete"],W=(new Set(q),["get",...q]);new Set(W),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred");function V(){return V=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},V.apply(this,arguments)}const G=a.createContext(null);const H=a.createContext(null);const K=a.createContext(null);const Y=a.createContext(null);const J=a.createContext({outlet:null,matches:[],isDataRoute:!1});const X=a.createContext(null);function $(){return null!=a.useContext(Y)}function Q(){return $()||c(!1),a.useContext(Y).location}function Z(e){a.useContext(K).static||a.useLayoutEffect(e)}function ee(){let{isDataRoute:e}=a.useContext(J);return e?function(){let{router:e}=pe(de.UseNavigateStable),t=he(ue.UseNavigateStable),r=a.useRef(!1);return Z(()=>{r.current=!0}),a.useCallback(function(n,a){void 0===a&&(a={}),r.current&&("number"===typeof n?e.navigate(n):e.navigate(n,V({fromRouteId:t},a)))},[e,t])}():function(){$()||c(!1);let e=a.useContext(G),{basename:t,future:r,navigator:n}=a.useContext(K),{matches:s}=a.useContext(J),{pathname:i}=Q(),o=JSON.stringify(D(s,r.v7_relativeSplatPath)),l=a.useRef(!1);Z(()=>{l.current=!0});let d=a.useCallback(function(r,a){if(void 0===a&&(a={}),!l.current)return;if("number"===typeof r)return void n.go(r);let s=R(r,JSON.parse(o),i,"path"===a.relative);null==e&&"/"!==t&&(s.pathname="/"===s.pathname?t:F([t,s.pathname])),(a.replace?n.replace:n.push)(s,a.state,a)},[t,n,o,i,e]);return d}()}const te=a.createContext(null);function re(){let{matches:e}=a.useContext(J),t=e[e.length-1];return t?t.params:{}}function ne(e,t){let{relative:r}=void 0===t?{}:t,{future:n}=a.useContext(K),{matches:s}=a.useContext(J),{pathname:i}=Q(),o=JSON.stringify(D(s,n.v7_relativeSplatPath));return a.useMemo(()=>R(e,JSON.parse(o),i,"path"===r),[e,o,i,r])}function ae(e,t,r,s){$()||c(!1);let{navigator:i}=a.useContext(K),{matches:o}=a.useContext(J),l=o[o.length-1],d=l?l.params:{},u=(l&&l.pathname,l?l.pathnameBase:"/");l&&l.route;let p,m=Q();if(t){var f;let e="string"===typeof t?h(t):t;"/"===u||(null==(f=e.pathname)?void 0:f.startsWith(u))||c(!1),p=e}else p=m;let g=p.pathname||"/",y=g;if("/"!==u){let e=u.replace(/^\//,"").split("/");y="/"+g.replace(/^\//,"").split("/").slice(e.length).join("/")}let v=x(e,{pathname:y});let b=ce(v&&v.map(e=>Object.assign({},e,{params:Object.assign({},d,e.params),pathname:F([u,i.encodeLocation?i.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?u:F([u,i.encodeLocation?i.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])})),o,r,s);return t&&b?a.createElement(Y.Provider,{value:{location:V({pathname:"/",search:"",hash:"",state:null,key:"default"},p),navigationType:n.Pop}},b):b}function se(){let e=function(){var e;let t=a.useContext(X),r=me(ue.UseRouteError),n=he(ue.UseRouteError);if(void 0!==t)return t;return null==(e=r.errors)?void 0:e[n]}(),t=z(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,n="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:n};return a.createElement(a.Fragment,null,a.createElement("h2",null,"Unexpected Application Error!"),a.createElement("h3",{style:{fontStyle:"italic"}},t),r?a.createElement("pre",{style:s},r):null,null)}const ie=a.createElement(se,null);class oe extends a.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?a.createElement(J.Provider,{value:this.props.routeContext},a.createElement(X.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function le(e){let{routeContext:t,match:r,children:n}=e,s=a.useContext(G);return s&&s.static&&s.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=r.route.id),a.createElement(J.Provider,{value:t},n)}function ce(e,t,r,n){var s;if(void 0===t&&(t=[]),void 0===r&&(r=null),void 0===n&&(n=null),null==e){var i;if(!r)return null;if(r.errors)e=r.matches;else{if(!(null!=(i=n)&&i.v7_partialHydration&&0===t.length&&!r.initialized&&r.matches.length>0))return null;e=r.matches}}let o=e,l=null==(s=r)?void 0:s.errors;if(null!=l){let e=o.findIndex(e=>e.route.id&&void 0!==(null==l?void 0:l[e.route.id]));e>=0||c(!1),o=o.slice(0,Math.min(o.length,e+1))}let d=!1,u=-1;if(r&&n&&n.v7_partialHydration)for(let a=0;a<o.length;a++){let e=o[a];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(u=a),e.route.id){let{loaderData:t,errors:n}=r,a=e.route.loader&&void 0===t[e.route.id]&&(!n||void 0===n[e.route.id]);if(e.route.lazy||a){d=!0,o=u>=0?o.slice(0,u+1):[o[0]];break}}}return o.reduceRight((e,n,s)=>{let i,c=!1,p=null,m=null;var h;r&&(i=l&&n.route.id?l[n.route.id]:void 0,p=n.route.errorElement||ie,d&&(u<0&&0===s?(h="route-fallback",!1||fe[h]||(fe[h]=!0),c=!0,m=null):u===s&&(c=!0,m=n.route.hydrateFallbackElement||null)));let f=t.concat(o.slice(0,s+1)),g=()=>{let t;return t=i?p:c?m:n.route.Component?a.createElement(n.route.Component,null):n.route.element?n.route.element:e,a.createElement(le,{match:n,routeContext:{outlet:e,matches:f,isDataRoute:null!=r},children:t})};return r&&(n.route.ErrorBoundary||n.route.errorElement||0===s)?a.createElement(oe,{location:r.location,revalidation:r.revalidation,component:p,error:i,children:g(),routeContext:{outlet:null,matches:f,isDataRoute:!0}}):g()},null)}var de=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(de||{}),ue=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(ue||{});function pe(e){let t=a.useContext(G);return t||c(!1),t}function me(e){let t=a.useContext(H);return t||c(!1),t}function he(e){let t=function(){let e=a.useContext(J);return e||c(!1),e}(),r=t.matches[t.matches.length-1];return r.route.id||c(!1),r.route.id}const fe={};function ge(e,t){null==e||e.v7_startTransition,void 0===(null==e?void 0:e.v7_relativeSplatPath)&&(!t||t.v7_relativeSplatPath),t&&(t.v7_fetcherPersist,t.v7_normalizeFormMethod,t.v7_partialHydration,t.v7_skipActionErrorRevalidation)}s.startTransition;function xe(e){let{to:t,replace:r,state:n,relative:s}=e;$()||c(!1);let{future:i,static:o}=a.useContext(K),{matches:l}=a.useContext(J),{pathname:d}=Q(),u=ee(),p=R(t,D(l,i.v7_relativeSplatPath),d,"path"===s),m=JSON.stringify(p);return a.useEffect(()=>u(JSON.parse(m),{replace:r,state:n,relative:s}),[u,m,s,r,n]),null}function ye(e){return function(e){let t=a.useContext(J).outlet;return t?a.createElement(te.Provider,{value:e},t):t}(e.context)}function ve(e){c(!1)}function be(e){let{basename:t="/",children:r=null,location:s,navigationType:i=n.Pop,navigator:o,static:l=!1,future:d}=e;$()&&c(!1);let u=t.replace(/^\/*/,"/"),p=a.useMemo(()=>({basename:u,navigator:o,static:l,future:V({v7_relativeSplatPath:!1},d)}),[u,d,o,l]);"string"===typeof s&&(s=h(s));let{pathname:m="/",search:f="",hash:g="",state:x=null,key:y="default"}=s,v=a.useMemo(()=>{let e=T(m,u);return null==e?null:{location:{pathname:e,search:f,hash:g,state:x,key:y},navigationType:i}},[u,m,f,g,x,y,i]);return null==v?null:a.createElement(K.Provider,{value:p},a.createElement(Y.Provider,{children:r,value:v}))}function je(e){let{children:t,location:r}=e;return ae(we(t),r)}new Promise(()=>{});a.Component;function we(e,t){void 0===t&&(t=[]);let r=[];return a.Children.forEach(e,(e,n)=>{if(!a.isValidElement(e))return;let s=[...t,n];if(e.type===a.Fragment)return void r.push.apply(r,we(e.props.children,s));e.type!==ve&&c(!1),e.props.index&&e.props.children&&c(!1);let i={id:e.props.id||s.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(i.children=we(e.props.children,s)),r.push(i)}),r}var Ne=r(7950),ke=r.t(Ne,2);function Se(){return Se=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Se.apply(this,arguments)}function _e(e,t){if(null==e)return{};var r,n,a={},s=Object.keys(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}function Ce(e){return void 0===e&&(e=""),new URLSearchParams("string"===typeof e||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,r)=>{let n=e[r];return t.concat(Array.isArray(n)?n.map(e=>[r,e]):[[r,n]])},[]))}new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);const Ae=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"];try{window.__reactRouterVersion="6"}catch(We){}new Map;const Oe=s.startTransition;ke.flushSync,s.useId;function Pe(e){let{basename:t,children:r,future:n,window:s}=e,i=a.useRef();var o;null==i.current&&(i.current=(void 0===(o={window:s,v5Compat:!0})&&(o={}),f(function(e,t){let{pathname:r,search:n,hash:a}=e.location;return p("",{pathname:r,search:n,hash:a},t.state&&t.state.usr||null,t.state&&t.state.key||"default")},function(e,t){return"string"===typeof t?t:m(t)},null,o)));let l=i.current,[c,d]=a.useState({action:l.action,location:l.location}),{v7_startTransition:u}=n||{},h=a.useCallback(e=>{u&&Oe?Oe(()=>d(e)):d(e)},[d,u]);return a.useLayoutEffect(()=>l.listen(h),[l,h]),a.useEffect(()=>ge(n),[n]),a.createElement(be,{basename:t,children:r,location:c.location,navigationType:c.action,navigator:l,future:n})}const Ee="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement,Te=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ie=a.forwardRef(function(e,t){let r,{onClick:n,relative:s,reloadDocument:i,replace:o,state:l,target:d,to:u,preventScrollReset:p,viewTransition:h}=e,f=_e(e,Ae),{basename:g}=a.useContext(K),x=!1;if("string"===typeof u&&Te.test(u)&&(r=u,Ee))try{let e=new URL(window.location.href),t=u.startsWith("//")?new URL(e.protocol+u):new URL(u),r=T(t.pathname,g);t.origin===e.origin&&null!=r?u=r+t.search+t.hash:x=!0}catch(We){}let y=function(e,t){let{relative:r}=void 0===t?{}:t;$()||c(!1);let{basename:n,navigator:s}=a.useContext(K),{hash:i,pathname:o,search:l}=ne(e,{relative:r}),d=o;return"/"!==n&&(d="/"===o?n:F([n,o])),s.createHref({pathname:d,search:l,hash:i})}(u,{relative:s}),v=function(e,t){let{target:r,replace:n,state:s,preventScrollReset:i,relative:o,viewTransition:l}=void 0===t?{}:t,c=ee(),d=Q(),u=ne(e,{relative:o});return a.useCallback(t=>{if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(t,r)){t.preventDefault();let r=void 0!==n?n:m(d)===m(u);c(e,{replace:r,state:s,preventScrollReset:i,relative:o,viewTransition:l})}},[d,c,u,n,s,r,e,i,o,l])}(u,{replace:o,state:l,target:d,preventScrollReset:p,relative:s,viewTransition:h});return a.createElement("a",Se({},f,{href:r||y,onClick:x||i?n:function(e){n&&n(e),e.defaultPrevented||v(e)},ref:t,target:d}))});var Me,De;function Re(e){let t=a.useRef(Ce(e)),r=a.useRef(!1),n=Q(),s=a.useMemo(()=>function(e,t){let r=Ce(e);return t&&t.forEach((e,n)=>{r.has(n)||t.getAll(n).forEach(e=>{r.append(n,e)})}),r}(n.search,r.current?null:t.current),[n.search]),i=ee(),o=a.useCallback((e,t)=>{const n=Ce("function"===typeof e?e(s):e);r.current=!0,i("?"+n,t)},[i,s]);return[s,o]}(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Me||(Me={})),function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(De||(De={}));function Fe(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function Le(e){return Le="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Le(e)}function Be(e){var t=function(e,t){if("object"!=Le(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Le(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Le(t)?t:t+""}function Ue(e,t,r){return(t=Be(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ze(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function qe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ze(Object(r),!0).forEach(function(t){Ue(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ze(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}let We={data:""},Ve=e=>{if("object"==typeof window){let t=(e?e.querySelector("#_goober"):window._goober)||Object.assign(document.createElement("style"),{innerHTML:" ",id:"_goober"});return t.nonce=window.__nonce__,t.parentNode||(e||document.head).appendChild(t),t.firstChild}return e||We},Ge=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,He=/\/\*[^]*?\*\/|  +/g,Ke=/\n+/g,Ye=(e,t)=>{let r="",n="",a="";for(let s in e){let i=e[s];"@"==s[0]?"i"==s[1]?r=s+" "+i+";":n+="f"==s[1]?Ye(i,s):s+"{"+Ye(i,"k"==s[1]?"":t)+"}":"object"==typeof i?n+=Ye(i,t?t.replace(/([^,])+/g,e=>s.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,t=>/&/.test(t)?t.replace(/&/g,e):e?e+" "+t:t)):s):null!=i&&(s=/^--/.test(s)?s:s.replace(/[A-Z]/g,"-$&").toLowerCase(),a+=Ye.p?Ye.p(s,i):s+":"+i+";")}return r+(t&&a?t+"{"+a+"}":a)+n},Je={},Xe=e=>{if("object"==typeof e){let t="";for(let r in e)t+=r+Xe(e[r]);return t}return e},$e=(e,t,r,n,a)=>{let s=Xe(e),i=Je[s]||(Je[s]=(e=>{let t=0,r=11;for(;t<e.length;)r=101*r+e.charCodeAt(t++)>>>0;return"go"+r})(s));if(!Je[i]){let t=s!==e?e:(e=>{let t,r,n=[{}];for(;t=Ge.exec(e.replace(He,""));)t[4]?n.shift():t[3]?(r=t[3].replace(Ke," ").trim(),n.unshift(n[0][r]=n[0][r]||{})):n[0][t[1]]=t[2].replace(Ke," ").trim();return n[0]})(e);Je[i]=Ye(a?{["@keyframes "+i]:t}:t,r?"":"."+i)}let o=r&&Je.g?Je.g:null;return r&&(Je.g=Je[i]),((e,t,r,n)=>{n?t.data=t.data.replace(n,e):-1===t.data.indexOf(e)&&(t.data=r?e+t.data:t.data+e)})(Je[i],t,n,o),i};function Qe(e){let t=this||{},r=e.call?e(t.p):e;return $e(r.unshift?r.raw?((e,t,r)=>e.reduce((e,n,a)=>{let s=t[a];if(s&&s.call){let e=s(r),t=e&&e.props&&e.props.className||/^go/.test(e)&&e;s=t?"."+t:e&&"object"==typeof e?e.props?"":Ye(e,""):!1===e?"":e}return e+n+(null==s?"":s)},""))(r,[].slice.call(arguments,1),t.p):r.reduce((e,r)=>Object.assign(e,r&&r.call?r(t.p):r),{}):r,Ve(t.target),t.g,t.o,t.k)}Qe.bind({g:1});let Ze,et,tt,rt=Qe.bind({k:1});function nt(e,t){let r=this||{};return function(){let n=arguments;function a(s,i){let o=Object.assign({},s),l=o.className||a.className;r.p=Object.assign({theme:et&&et()},o),r.o=/ *go\d+/.test(l),o.className=Qe.apply(r,n)+(l?" "+l:""),t&&(o.ref=i);let c=e;return e[0]&&(c=o.as||e,delete o.as),tt&&c[0]&&tt(o),Ze(c,o)}return t?t(a):a}}var at,st,it,ot,lt,ct,dt,ut,pt,mt,ht,ft,gt,xt,yt,vt,bt=(e,t)=>(e=>"function"==typeof e)(e)?e(t):e,jt=(()=>{let e=0;return()=>(++e).toString()})(),wt=(()=>{let e;return()=>{if(void 0===e&&typeof window<"u"){let t=matchMedia("(prefers-reduced-motion: reduce)");e=!t||t.matches}return e}})(),Nt="default",kt=(e,t)=>{let{toastLimit:r}=e.settings;switch(t.type){case 0:return qe(qe({},e),{},{toasts:[t.toast,...e.toasts].slice(0,r)});case 1:return qe(qe({},e),{},{toasts:e.toasts.map(e=>e.id===t.toast.id?qe(qe({},e),t.toast):e)});case 2:let{toast:n}=t;return kt(e,{type:e.toasts.find(e=>e.id===n.id)?1:0,toast:n});case 3:let{toastId:a}=t;return qe(qe({},e),{},{toasts:e.toasts.map(e=>e.id===a||void 0===a?qe(qe({},e),{},{dismissed:!0,visible:!1}):e)});case 4:return void 0===t.toastId?qe(qe({},e),{},{toasts:[]}):qe(qe({},e),{},{toasts:e.toasts.filter(e=>e.id!==t.toastId)});case 5:return qe(qe({},e),{},{pausedAt:t.time});case 6:let s=t.time-(e.pausedAt||0);return qe(qe({},e),{},{pausedAt:void 0,toasts:e.toasts.map(e=>qe(qe({},e),{},{pauseDuration:e.pauseDuration+s}))})}},St=[],_t={toasts:[],pausedAt:void 0,settings:{toastLimit:20}},Ct={},At=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Nt;Ct[t]=kt(Ct[t]||_t,e),St.forEach(e=>{let[r,n]=e;r===t&&n(Ct[t])})},Ot=e=>Object.keys(Ct).forEach(t=>At(e,t)),Pt=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Nt;return t=>{At(t,e)}},Et={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},Tt=e=>(t,r)=>{let n=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"blank",r=arguments.length>2?arguments[2]:void 0;return qe(qe({createdAt:Date.now(),visible:!0,dismissed:!1,type:t,ariaProps:{role:"status","aria-live":"polite"},message:e,pauseDuration:0},r),{},{id:(null==r?void 0:r.id)||jt()})}(t,e,r);return Pt(n.toasterId||(e=>Object.keys(Ct).find(t=>Ct[t].toasts.some(t=>t.id===e)))(n.id))({type:2,toast:n}),n.id},It=(e,t)=>Tt("blank")(e,t);It.error=Tt("error"),It.success=Tt("success"),It.loading=Tt("loading"),It.custom=Tt("custom"),It.dismiss=(e,t)=>{let r={type:3,toastId:e};t?Pt(t)(r):Ot(r)},It.dismissAll=e=>It.dismiss(void 0,e),It.remove=(e,t)=>{let r={type:4,toastId:e};t?Pt(t)(r):Ot(r)},It.removeAll=e=>It.remove(void 0,e),It.promise=(e,t,r)=>{let n=It.loading(t.loading,qe(qe({},r),null==r?void 0:r.loading));return"function"==typeof e&&(e=e()),e.then(e=>{let a=t.success?bt(t.success,e):void 0;return a?It.success(a,qe(qe({id:n},r),null==r?void 0:r.success)):It.dismiss(n),e}).catch(e=>{let a=t.error?bt(t.error,e):void 0;a?It.error(a,qe(qe({id:n},r),null==r?void 0:r.error)):It.dismiss(n)}),e};var Mt=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default",{toasts:r,pausedAt:n}=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Nt,[r,n]=(0,a.useState)(Ct[t]||_t),s=(0,a.useRef)(Ct[t]);(0,a.useEffect)(()=>(s.current!==Ct[t]&&n(Ct[t]),St.push([t,n]),()=>{let e=St.findIndex(e=>{let[r]=e;return r===t});e>-1&&St.splice(e,1)}),[t]);let i=r.toasts.map(t=>{var r,n,a;return qe(qe(qe(qe({},e),e[t.type]),t),{},{removeDelay:t.removeDelay||(null==(r=e[t.type])?void 0:r.removeDelay)||(null==e?void 0:e.removeDelay),duration:t.duration||(null==(n=e[t.type])?void 0:n.duration)||(null==e?void 0:e.duration)||Et[t.type],style:qe(qe(qe({},e.style),null==(a=e[t.type])?void 0:a.style),t.style)})});return qe(qe({},r),{},{toasts:i})}(e,t),s=(0,a.useRef)(new Map).current,i=(0,a.useCallback)(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;if(s.has(e))return;let r=setTimeout(()=>{s.delete(e),o({type:4,toastId:e})},t);s.set(e,r)},[]);(0,a.useEffect)(()=>{if(n)return;let e=Date.now(),a=r.map(r=>{if(r.duration===1/0)return;let n=(r.duration||0)+r.pauseDuration-(e-r.createdAt);if(!(n<0))return setTimeout(()=>It.dismiss(r.id,t),n);r.visible&&It.dismiss(r.id)});return()=>{a.forEach(e=>e&&clearTimeout(e))}},[r,n,t]);let o=(0,a.useCallback)(Pt(t),[t]),l=(0,a.useCallback)(()=>{o({type:5,time:Date.now()})},[o]),c=(0,a.useCallback)((e,t)=>{o({type:1,toast:{id:e,height:t}})},[o]),d=(0,a.useCallback)(()=>{n&&o({type:6,time:Date.now()})},[n,o]),u=(0,a.useCallback)((e,t)=>{let{reverseOrder:n=!1,gutter:a=8,defaultPosition:s}=t||{},i=r.filter(t=>(t.position||s)===(e.position||s)&&t.height),o=i.findIndex(t=>t.id===e.id),l=i.filter((e,t)=>t<o&&e.visible).length;return i.filter(e=>e.visible).slice(...n?[l+1]:[0,l]).reduce((e,t)=>e+(t.height||0)+a,0)},[r]);return(0,a.useEffect)(()=>{r.forEach(e=>{if(e.dismissed)i(e.id,e.removeDelay);else{let t=s.get(e.id);t&&(clearTimeout(t),s.delete(e.id))}})},[r,i]),{toasts:r,handlers:{updateHeight:c,startPause:l,endPause:d,calculateOffset:u}}},Dt=rt(at||(at=Fe(["\nfrom {\n  transform: scale(0) rotate(45deg);\n\topacity: 0;\n}\nto {\n transform: scale(1) rotate(45deg);\n  opacity: 1;\n}"]))),Rt=rt(st||(st=Fe(["\nfrom {\n  transform: scale(0);\n  opacity: 0;\n}\nto {\n  transform: scale(1);\n  opacity: 1;\n}"]))),Ft=rt(it||(it=Fe(["\nfrom {\n  transform: scale(0) rotate(90deg);\n\topacity: 0;\n}\nto {\n  transform: scale(1) rotate(90deg);\n\topacity: 1;\n}"]))),Lt=nt("div")(ot||(ot=Fe(["\n  width: 20px;\n  opacity: 0;\n  height: 20px;\n  border-radius: 10px;\n  background: ",";\n  position: relative;\n  transform: rotate(45deg);\n\n  animation: "," 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)\n    forwards;\n  animation-delay: 100ms;\n\n  &:after,\n  &:before {\n    content: '';\n    animation: "," 0.15s ease-out forwards;\n    animation-delay: 150ms;\n    position: absolute;\n    border-radius: 3px;\n    opacity: 0;\n    background: ",";\n    bottom: 9px;\n    left: 4px;\n    height: 2px;\n    width: 12px;\n  }\n\n  &:before {\n    animation: "," 0.15s ease-out forwards;\n    animation-delay: 180ms;\n    transform: rotate(90deg);\n  }\n"])),e=>e.primary||"#ff4b4b",Dt,Rt,e=>e.secondary||"#fff",Ft),Bt=rt(lt||(lt=Fe(["\n  from {\n    transform: rotate(0deg);\n  }\n  to {\n    transform: rotate(360deg);\n  }\n"]))),Ut=nt("div")(ct||(ct=Fe(["\n  width: 12px;\n  height: 12px;\n  box-sizing: border-box;\n  border: 2px solid;\n  border-radius: 100%;\n  border-color: ",";\n  border-right-color: ",";\n  animation: "," 1s linear infinite;\n"])),e=>e.secondary||"#e0e0e0",e=>e.primary||"#616161",Bt),zt=rt(dt||(dt=Fe(["\nfrom {\n  transform: scale(0) rotate(45deg);\n\topacity: 0;\n}\nto {\n  transform: scale(1) rotate(45deg);\n\topacity: 1;\n}"]))),qt=rt(ut||(ut=Fe(["\n0% {\n\theight: 0;\n\twidth: 0;\n\topacity: 0;\n}\n40% {\n  height: 0;\n\twidth: 6px;\n\topacity: 1;\n}\n100% {\n  opacity: 1;\n  height: 10px;\n}"]))),Wt=nt("div")(pt||(pt=Fe(["\n  width: 20px;\n  opacity: 0;\n  height: 20px;\n  border-radius: 10px;\n  background: ",";\n  position: relative;\n  transform: rotate(45deg);\n\n  animation: "," 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)\n    forwards;\n  animation-delay: 100ms;\n  &:after {\n    content: '';\n    box-sizing: border-box;\n    animation: "," 0.2s ease-out forwards;\n    opacity: 0;\n    animation-delay: 200ms;\n    position: absolute;\n    border-right: 2px solid;\n    border-bottom: 2px solid;\n    border-color: ",";\n    bottom: 6px;\n    left: 6px;\n    height: 10px;\n    width: 6px;\n  }\n"])),e=>e.primary||"#61d345",zt,qt,e=>e.secondary||"#fff"),Vt=nt("div")(mt||(mt=Fe(["\n  position: absolute;\n"]))),Gt=nt("div")(ht||(ht=Fe(["\n  position: relative;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  min-width: 20px;\n  min-height: 20px;\n"]))),Ht=rt(ft||(ft=Fe(["\nfrom {\n  transform: scale(0.6);\n  opacity: 0.4;\n}\nto {\n  transform: scale(1);\n  opacity: 1;\n}"]))),Kt=nt("div")(gt||(gt=Fe(["\n  position: relative;\n  transform: scale(0.6);\n  opacity: 0.4;\n  min-width: 20px;\n  animation: "," 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)\n    forwards;\n"])),Ht),Yt=e=>{let{toast:t}=e,{icon:r,type:n,iconTheme:s}=t;return void 0!==r?"string"==typeof r?a.createElement(Kt,null,r):r:"blank"===n?null:a.createElement(Gt,null,a.createElement(Ut,qe({},s)),"loading"!==n&&a.createElement(Vt,null,"error"===n?a.createElement(Lt,qe({},s)):a.createElement(Wt,qe({},s))))},Jt=e=>"\n0% {transform: translate3d(0,".concat(-200*e,"%,0) scale(.6); opacity:.5;}\n100% {transform: translate3d(0,0,0) scale(1); opacity:1;}\n"),Xt=e=>"\n0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}\n100% {transform: translate3d(0,".concat(-150*e,"%,-1px) scale(.6); opacity:0;}\n"),$t=nt("div")(xt||(xt=Fe(["\n  display: flex;\n  align-items: center;\n  background: #fff;\n  color: #363636;\n  line-height: 1.3;\n  will-change: transform;\n  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);\n  max-width: 350px;\n  pointer-events: auto;\n  padding: 8px 10px;\n  border-radius: 8px;\n"]))),Qt=nt("div")(yt||(yt=Fe(["\n  display: flex;\n  justify-content: center;\n  margin: 4px 10px;\n  color: inherit;\n  flex: 1 1 auto;\n  white-space: pre-line;\n"]))),Zt=a.memo(e=>{let{toast:t,position:r,style:n,children:s}=e,i=t.height?((e,t)=>{let r=e.includes("top")?1:-1,[n,a]=wt()?["0%{opacity:0;} 100%{opacity:1;}","0%{opacity:1;} 100%{opacity:0;}"]:[Jt(r),Xt(r)];return{animation:t?"".concat(rt(n)," 0.35s cubic-bezier(.21,1.02,.73,1) forwards"):"".concat(rt(a)," 0.4s forwards cubic-bezier(.06,.71,.55,1)")}})(t.position||r||"top-center",t.visible):{opacity:0},o=a.createElement(Yt,{toast:t}),l=a.createElement(Qt,qe({},t.ariaProps),bt(t.message,t));return a.createElement($t,{className:t.className,style:qe(qe(qe({},i),n),t.style)},"function"==typeof s?s({icon:o,message:l}):a.createElement(a.Fragment,null,o,l))});!function(e,t,r,n){Ye.p=t,Ze=e,et=r,tt=n}(a.createElement);var er=e=>{let{id:t,className:r,style:n,onHeightUpdate:s,children:i}=e,o=a.useCallback(e=>{if(e){let r=()=>{let r=e.getBoundingClientRect().height;s(t,r)};r(),new MutationObserver(r).observe(e,{subtree:!0,childList:!0,characterData:!0})}},[t,s]);return a.createElement("div",{ref:o,className:r,style:n},i)},tr=Qe(vt||(vt=Fe(["\n  z-index: 9999;\n  > * {\n    pointer-events: auto;\n  }\n"]))),rr=e=>{let{reverseOrder:t,position:r="top-center",toastOptions:n,gutter:s,children:i,toasterId:o,containerStyle:l,containerClassName:c}=e,{toasts:d,handlers:u}=Mt(n,o);return a.createElement("div",{"data-rht-toaster":o||"",style:qe({position:"fixed",zIndex:9999,top:16,left:16,right:16,bottom:16,pointerEvents:"none"},l),className:c,onMouseEnter:u.startPause,onMouseLeave:u.endPause},d.map(e=>{let n=e.position||r,o=((e,t)=>{let r=e.includes("top"),n=r?{top:0}:{bottom:0},a=e.includes("center")?{justifyContent:"center"}:e.includes("right")?{justifyContent:"flex-end"}:{};return qe(qe({left:0,right:0,display:"flex",position:"absolute",transition:wt()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:"translateY(".concat(t*(r?1:-1),"px)")},n),a)})(n,u.calculateOffset(e,{reverseOrder:t,gutter:s,defaultPosition:r}));return a.createElement(er,{id:e.id,key:e.id,onHeightUpdate:u.updateHeight,className:e.visible?tr:"",style:o},"custom"===e.type?bt(e.message,e):i?i(e):a.createElement(Zt,{toast:e,position:n}))}))},nr=It;function ar(e,t){return function(){return e.apply(t,arguments)}}const{toString:sr}=Object.prototype,{getPrototypeOf:ir}=Object,{iterator:or,toStringTag:lr}=Symbol,cr=(dr=Object.create(null),e=>{const t=sr.call(e);return dr[t]||(dr[t]=t.slice(8,-1).toLowerCase())});var dr;const ur=e=>(e=e.toLowerCase(),t=>cr(t)===e),pr=e=>t=>typeof t===e,{isArray:mr}=Array,hr=pr("undefined");function fr(e){return null!==e&&!hr(e)&&null!==e.constructor&&!hr(e.constructor)&&yr(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const gr=ur("ArrayBuffer");const xr=pr("string"),yr=pr("function"),vr=pr("number"),br=e=>null!==e&&"object"===typeof e,jr=e=>{if("object"!==cr(e))return!1;const t=ir(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(lr in e)&&!(or in e)},wr=ur("Date"),Nr=ur("File"),kr=ur("Blob"),Sr=ur("FileList"),_r=ur("URLSearchParams"),[Cr,Ar,Or,Pr]=["ReadableStream","Request","Response","Headers"].map(ur);function Er(e,t){let r,n,{allOwnKeys:a=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(null!==e&&"undefined"!==typeof e)if("object"!==typeof e&&(e=[e]),mr(e))for(r=0,n=e.length;r<n;r++)t.call(null,e[r],r,e);else{if(fr(e))return;const n=a?Object.getOwnPropertyNames(e):Object.keys(e),s=n.length;let i;for(r=0;r<s;r++)i=n[r],t.call(null,e[i],i,e)}}function Tr(e,t){if(fr(e))return null;t=t.toLowerCase();const r=Object.keys(e);let n,a=r.length;for(;a-- >0;)if(n=r[a],t===n.toLowerCase())return n;return null}const Ir="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:global,Mr=e=>!hr(e)&&e!==Ir;const Dr=(Rr="undefined"!==typeof Uint8Array&&ir(Uint8Array),e=>Rr&&e instanceof Rr);var Rr;const Fr=ur("HTMLFormElement"),Lr=(e=>{let{hasOwnProperty:t}=e;return(e,r)=>t.call(e,r)})(Object.prototype),Br=ur("RegExp"),Ur=(e,t)=>{const r=Object.getOwnPropertyDescriptors(e),n={};Er(r,(r,a)=>{let s;!1!==(s=t(r,a,e))&&(n[a]=s||r)}),Object.defineProperties(e,n)};const zr=ur("AsyncFunction"),qr=((e,t)=>{return e?setImmediate:t?(r="axios@".concat(Math.random()),n=[],Ir.addEventListener("message",e=>{let{source:t,data:a}=e;t===Ir&&a===r&&n.length&&n.shift()()},!1),e=>{n.push(e),Ir.postMessage(r,"*")}):e=>setTimeout(e);var r,n})("function"===typeof setImmediate,yr(Ir.postMessage)),Wr="undefined"!==typeof queueMicrotask?queueMicrotask.bind(Ir):"undefined"!==typeof process&&process.nextTick||qr,Vr={isArray:mr,isArrayBuffer:gr,isBuffer:fr,isFormData:e=>{let t;return e&&("function"===typeof FormData&&e instanceof FormData||yr(e.append)&&("formdata"===(t=cr(e))||"object"===t&&yr(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){let t;return t="undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&gr(e.buffer),t},isString:xr,isNumber:vr,isBoolean:e=>!0===e||!1===e,isObject:br,isPlainObject:jr,isEmptyObject:e=>{if(!br(e)||fr(e))return!1;try{return 0===Object.keys(e).length&&Object.getPrototypeOf(e)===Object.prototype}catch(We){return!1}},isReadableStream:Cr,isRequest:Ar,isResponse:Or,isHeaders:Pr,isUndefined:hr,isDate:wr,isFile:Nr,isBlob:kr,isRegExp:Br,isFunction:yr,isStream:e=>br(e)&&yr(e.pipe),isURLSearchParams:_r,isTypedArray:Dr,isFileList:Sr,forEach:Er,merge:function e(){const{caseless:t,skipUndefined:r}=Mr(this)&&this||{},n={},a=(a,s)=>{const i=t&&Tr(n,s)||s;jr(n[i])&&jr(a)?n[i]=e(n[i],a):jr(a)?n[i]=e({},a):mr(a)?n[i]=a.slice():r&&hr(a)||(n[i]=a)};for(let s=0,i=arguments.length;s<i;s++)arguments[s]&&Er(arguments[s],a);return n},extend:function(e,t,r){let{allOwnKeys:n}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return Er(t,(t,n)=>{r&&yr(t)?e[n]=ar(t,r):e[n]=t},{allOwnKeys:n}),e},trim:e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),inherits:(e,t,r,n)=>{e.prototype=Object.create(t.prototype,n),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),r&&Object.assign(e.prototype,r)},toFlatObject:(e,t,r,n)=>{let a,s,i;const o={};if(t=t||{},null==e)return t;do{for(a=Object.getOwnPropertyNames(e),s=a.length;s-- >0;)i=a[s],n&&!n(i,e,t)||o[i]||(t[i]=e[i],o[i]=!0);e=!1!==r&&ir(e)}while(e&&(!r||r(e,t))&&e!==Object.prototype);return t},kindOf:cr,kindOfTest:ur,endsWith:(e,t,r)=>{e=String(e),(void 0===r||r>e.length)&&(r=e.length),r-=t.length;const n=e.indexOf(t,r);return-1!==n&&n===r},toArray:e=>{if(!e)return null;if(mr(e))return e;let t=e.length;if(!vr(t))return null;const r=new Array(t);for(;t-- >0;)r[t]=e[t];return r},forEachEntry:(e,t)=>{const r=(e&&e[or]).call(e);let n;for(;(n=r.next())&&!n.done;){const r=n.value;t.call(e,r[0],r[1])}},matchAll:(e,t)=>{let r;const n=[];for(;null!==(r=e.exec(t));)n.push(r);return n},isHTMLForm:Fr,hasOwnProperty:Lr,hasOwnProp:Lr,reduceDescriptors:Ur,freezeMethods:e=>{Ur(e,(t,r)=>{if(yr(e)&&-1!==["arguments","caller","callee"].indexOf(r))return!1;const n=e[r];yr(n)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")}))})},toObjectSet:(e,t)=>{const r={},n=e=>{e.forEach(e=>{r[e]=!0})};return mr(e)?n(e):n(String(e).split(t)),r},toCamelCase:e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(e,t,r){return t.toUpperCase()+r}),noop:()=>{},toFiniteNumber:(e,t)=>null!=e&&Number.isFinite(e=+e)?e:t,findKey:Tr,global:Ir,isContextDefined:Mr,isSpecCompliantForm:function(e){return!!(e&&yr(e.append)&&"FormData"===e[lr]&&e[or])},toJSONObject:e=>{const t=new Array(10),r=(e,n)=>{if(br(e)){if(t.indexOf(e)>=0)return;if(fr(e))return e;if(!("toJSON"in e)){t[n]=e;const a=mr(e)?[]:{};return Er(e,(e,t)=>{const s=r(e,n+1);!hr(s)&&(a[t]=s)}),t[n]=void 0,a}}return e};return r(e,0)},isAsyncFn:zr,isThenable:e=>e&&(br(e)||yr(e))&&yr(e.then)&&yr(e.catch),setImmediate:qr,asap:Wr,isIterable:e=>null!=e&&yr(e[or])};function Gr(e,t,r,n,a){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),r&&(this.config=r),n&&(this.request=n),a&&(this.response=a,this.status=a.status?a.status:null)}Vr.inherits(Gr,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Vr.toJSONObject(this.config),code:this.code,status:this.status}}});const Hr=Gr.prototype,Kr={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{Kr[e]={value:e}}),Object.defineProperties(Gr,Kr),Object.defineProperty(Hr,"isAxiosError",{value:!0}),Gr.from=(e,t,r,n,a,s)=>{const i=Object.create(Hr);Vr.toFlatObject(e,i,function(e){return e!==Error.prototype},e=>"isAxiosError"!==e);const o=e&&e.message?e.message:"Error",l=null==t&&e?e.code:t;return Gr.call(i,o,l,r,n,a),e&&null==i.cause&&Object.defineProperty(i,"cause",{value:e,configurable:!0}),i.name=e&&e.name||"Error",s&&Object.assign(i,s),i};const Yr=Gr;function Jr(e){return Vr.isPlainObject(e)||Vr.isArray(e)}function Xr(e){return Vr.endsWith(e,"[]")?e.slice(0,-2):e}function $r(e,t,r){return e?e.concat(t).map(function(e,t){return e=Xr(e),!r&&t?"["+e+"]":e}).join(r?".":""):t}const Qr=Vr.toFlatObject(Vr,{},null,function(e){return/^is[A-Z]/.test(e)});const Zr=function(e,t,r){if(!Vr.isObject(e))throw new TypeError("target must be an object");t=t||new FormData;const n=(r=Vr.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(e,t){return!Vr.isUndefined(t[e])})).metaTokens,a=r.visitor||c,s=r.dots,i=r.indexes,o=(r.Blob||"undefined"!==typeof Blob&&Blob)&&Vr.isSpecCompliantForm(t);if(!Vr.isFunction(a))throw new TypeError("visitor must be a function");function l(e){if(null===e)return"";if(Vr.isDate(e))return e.toISOString();if(Vr.isBoolean(e))return e.toString();if(!o&&Vr.isBlob(e))throw new Yr("Blob is not supported. Use a Buffer instead.");return Vr.isArrayBuffer(e)||Vr.isTypedArray(e)?o&&"function"===typeof Blob?new Blob([e]):Buffer.from(e):e}function c(e,r,a){let o=e;if(e&&!a&&"object"===typeof e)if(Vr.endsWith(r,"{}"))r=n?r:r.slice(0,-2),e=JSON.stringify(e);else if(Vr.isArray(e)&&function(e){return Vr.isArray(e)&&!e.some(Jr)}(e)||(Vr.isFileList(e)||Vr.endsWith(r,"[]"))&&(o=Vr.toArray(e)))return r=Xr(r),o.forEach(function(e,n){!Vr.isUndefined(e)&&null!==e&&t.append(!0===i?$r([r],n,s):null===i?r:r+"[]",l(e))}),!1;return!!Jr(e)||(t.append($r(a,r,s),l(e)),!1)}const d=[],u=Object.assign(Qr,{defaultVisitor:c,convertValue:l,isVisitable:Jr});if(!Vr.isObject(e))throw new TypeError("data must be an object");return function e(r,n){if(!Vr.isUndefined(r)){if(-1!==d.indexOf(r))throw Error("Circular reference detected in "+n.join("."));d.push(r),Vr.forEach(r,function(r,s){!0===(!(Vr.isUndefined(r)||null===r)&&a.call(t,r,Vr.isString(s)?s.trim():s,n,u))&&e(r,n?n.concat(s):[s])}),d.pop()}}(e),t};function en(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(e){return t[e]})}function tn(e,t){this._pairs=[],e&&Zr(e,this,t)}const rn=tn.prototype;rn.append=function(e,t){this._pairs.push([e,t])},rn.toString=function(e){const t=e?function(t){return e.call(this,t,en)}:en;return this._pairs.map(function(e){return t(e[0])+"="+t(e[1])},"").join("&")};const nn=tn;function an(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function sn(e,t,r){if(!t)return e;const n=r&&r.encode||an;Vr.isFunction(r)&&(r={serialize:r});const a=r&&r.serialize;let s;if(s=a?a(t,r):Vr.isURLSearchParams(t)?t.toString():new nn(t,r).toString(n),s){const t=e.indexOf("#");-1!==t&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+s}return e}const on=class{constructor(){this.handlers=[]}use(e,t,r){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!r&&r.synchronous,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){Vr.forEach(this.handlers,function(t){null!==t&&e(t)})}},ln={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},cn={isBrowser:!0,classes:{URLSearchParams:"undefined"!==typeof URLSearchParams?URLSearchParams:nn,FormData:"undefined"!==typeof FormData?FormData:null,Blob:"undefined"!==typeof Blob?Blob:null},protocols:["http","https","file","blob","url","data"]},dn="undefined"!==typeof window&&"undefined"!==typeof document,un="object"===typeof navigator&&navigator||void 0,pn=dn&&(!un||["ReactNative","NativeScript","NS"].indexOf(un.product)<0),mn="undefined"!==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"===typeof self.importScripts,hn=dn&&window.location.href||"http://localhost",fn=qe(qe({},e),cn);const gn=function(e){function t(e,r,n,a){let s=e[a++];if("__proto__"===s)return!0;const i=Number.isFinite(+s),o=a>=e.length;if(s=!s&&Vr.isArray(n)?n.length:s,o)return Vr.hasOwnProp(n,s)?n[s]=[n[s],r]:n[s]=r,!i;n[s]&&Vr.isObject(n[s])||(n[s]=[]);return t(e,r,n[s],a)&&Vr.isArray(n[s])&&(n[s]=function(e){const t={},r=Object.keys(e);let n;const a=r.length;let s;for(n=0;n<a;n++)s=r[n],t[s]=e[s];return t}(n[s])),!i}if(Vr.isFormData(e)&&Vr.isFunction(e.entries)){const r={};return Vr.forEachEntry(e,(e,n)=>{t(function(e){return Vr.matchAll(/\w+|\[(\w*)]/g,e).map(e=>"[]"===e[0]?"":e[1]||e[0])}(e),n,r,0)}),r}return null};const xn={transitional:ln,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const r=t.getContentType()||"",n=r.indexOf("application/json")>-1,a=Vr.isObject(e);a&&Vr.isHTMLForm(e)&&(e=new FormData(e));if(Vr.isFormData(e))return n?JSON.stringify(gn(e)):e;if(Vr.isArrayBuffer(e)||Vr.isBuffer(e)||Vr.isStream(e)||Vr.isFile(e)||Vr.isBlob(e)||Vr.isReadableStream(e))return e;if(Vr.isArrayBufferView(e))return e.buffer;if(Vr.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let s;if(a){if(r.indexOf("application/x-www-form-urlencoded")>-1)return function(e,t){return Zr(e,new fn.classes.URLSearchParams,qe({visitor:function(e,t,r,n){return fn.isNode&&Vr.isBuffer(e)?(this.append(t,e.toString("base64")),!1):n.defaultVisitor.apply(this,arguments)}},t))}(e,this.formSerializer).toString();if((s=Vr.isFileList(e))||r.indexOf("multipart/form-data")>-1){const t=this.env&&this.env.FormData;return Zr(s?{"files[]":e}:e,t&&new t,this.formSerializer)}}return a||n?(t.setContentType("application/json",!1),function(e,t,r){if(Vr.isString(e))try{return(t||JSON.parse)(e),Vr.trim(e)}catch(We){if("SyntaxError"!==We.name)throw We}return(r||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){const t=this.transitional||xn.transitional,r=t&&t.forcedJSONParsing,n="json"===this.responseType;if(Vr.isResponse(e)||Vr.isReadableStream(e))return e;if(e&&Vr.isString(e)&&(r&&!this.responseType||n)){const r=!(t&&t.silentJSONParsing)&&n;try{return JSON.parse(e,this.parseReviver)}catch(We){if(r){if("SyntaxError"===We.name)throw Yr.from(We,Yr.ERR_BAD_RESPONSE,this,null,this.response);throw We}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:fn.classes.FormData,Blob:fn.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Vr.forEach(["delete","get","head","post","put","patch"],e=>{xn.headers[e]={}});const yn=xn,vn=Vr.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),bn=Symbol("internals");function jn(e){return e&&String(e).trim().toLowerCase()}function wn(e){return!1===e||null==e?e:Vr.isArray(e)?e.map(wn):String(e)}function Nn(e,t,r,n,a){return Vr.isFunction(n)?n.call(this,t,r):(a&&(t=r),Vr.isString(t)?Vr.isString(n)?-1!==t.indexOf(n):Vr.isRegExp(n)?n.test(t):void 0:void 0)}class kn{constructor(e){e&&this.set(e)}set(e,t,r){const n=this;function a(e,t,r){const a=jn(t);if(!a)throw new Error("header name must be a non-empty string");const s=Vr.findKey(n,a);(!s||void 0===n[s]||!0===r||void 0===r&&!1!==n[s])&&(n[s||t]=wn(e))}const s=(e,t)=>Vr.forEach(e,(e,r)=>a(e,r,t));if(Vr.isPlainObject(e)||e instanceof this.constructor)s(e,t);else if(Vr.isString(e)&&(e=e.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim()))s((e=>{const t={};let r,n,a;return e&&e.split("\n").forEach(function(e){a=e.indexOf(":"),r=e.substring(0,a).trim().toLowerCase(),n=e.substring(a+1).trim(),!r||t[r]&&vn[r]||("set-cookie"===r?t[r]?t[r].push(n):t[r]=[n]:t[r]=t[r]?t[r]+", "+n:n)}),t})(e),t);else if(Vr.isObject(e)&&Vr.isIterable(e)){let r,n,a={};for(const t of e){if(!Vr.isArray(t))throw TypeError("Object iterator must return a key-value pair");a[n=t[0]]=(r=a[n])?Vr.isArray(r)?[...r,t[1]]:[r,t[1]]:t[1]}s(a,t)}else null!=e&&a(t,e,r);return this}get(e,t){if(e=jn(e)){const r=Vr.findKey(this,e);if(r){const e=this[r];if(!t)return e;if(!0===t)return function(e){const t=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=r.exec(e);)t[n[1]]=n[2];return t}(e);if(Vr.isFunction(t))return t.call(this,e,r);if(Vr.isRegExp(t))return t.exec(e);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=jn(e)){const r=Vr.findKey(this,e);return!(!r||void 0===this[r]||t&&!Nn(0,this[r],r,t))}return!1}delete(e,t){const r=this;let n=!1;function a(e){if(e=jn(e)){const a=Vr.findKey(r,e);!a||t&&!Nn(0,r[a],a,t)||(delete r[a],n=!0)}}return Vr.isArray(e)?e.forEach(a):a(e),n}clear(e){const t=Object.keys(this);let r=t.length,n=!1;for(;r--;){const a=t[r];e&&!Nn(0,this[a],a,e,!0)||(delete this[a],n=!0)}return n}normalize(e){const t=this,r={};return Vr.forEach(this,(n,a)=>{const s=Vr.findKey(r,a);if(s)return t[s]=wn(n),void delete t[a];const i=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,r)=>t.toUpperCase()+r)}(a):String(a).trim();i!==a&&delete t[a],t[i]=wn(n),r[i]=!0}),this}concat(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.constructor.concat(this,...t)}toJSON(e){const t=Object.create(null);return Vr.forEach(this,(r,n)=>{null!=r&&!1!==r&&(t[n]=e&&Vr.isArray(r)?r.join(", "):r)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(e=>{let[t,r]=e;return t+": "+r}).join("\n")}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e){const t=new this(e);for(var r=arguments.length,n=new Array(r>1?r-1:0),a=1;a<r;a++)n[a-1]=arguments[a];return n.forEach(e=>t.set(e)),t}static accessor(e){const t=(this[bn]=this[bn]={accessors:{}}).accessors,r=this.prototype;function n(e){const n=jn(e);t[n]||(!function(e,t){const r=Vr.toCamelCase(" "+t);["get","set","has"].forEach(n=>{Object.defineProperty(e,n+r,{value:function(e,r,a){return this[n].call(this,t,e,r,a)},configurable:!0})})}(r,e),t[n]=!0)}return Vr.isArray(e)?e.forEach(n):n(e),this}}kn.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),Vr.reduceDescriptors(kn.prototype,(e,t)=>{let{value:r}=e,n=t[0].toUpperCase()+t.slice(1);return{get:()=>r,set(e){this[n]=e}}}),Vr.freezeMethods(kn);const Sn=kn;function _n(e,t){const r=this||yn,n=t||r,a=Sn.from(n.headers);let s=n.data;return Vr.forEach(e,function(e){s=e.call(r,s,a.normalize(),t?t.status:void 0)}),a.normalize(),s}function Cn(e){return!(!e||!e.__CANCEL__)}function An(e,t,r){Yr.call(this,null==e?"canceled":e,Yr.ERR_CANCELED,t,r),this.name="CanceledError"}Vr.inherits(An,Yr,{__CANCEL__:!0});const On=An;function Pn(e,t,r){const n=r.config.validateStatus;r.status&&n&&!n(r.status)?t(new Yr("Request failed with status code "+r.status,[Yr.ERR_BAD_REQUEST,Yr.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r)):e(r)}const En=function(e,t){e=e||10;const r=new Array(e),n=new Array(e);let a,s=0,i=0;return t=void 0!==t?t:1e3,function(o){const l=Date.now(),c=n[i];a||(a=l),r[s]=o,n[s]=l;let d=i,u=0;for(;d!==s;)u+=r[d++],d%=e;if(s=(s+1)%e,s===i&&(i=(i+1)%e),l-a<t)return;const p=c&&l-c;return p?Math.round(1e3*u/p):void 0}};const Tn=function(e,t){let r,n,a=0,s=1e3/t;const i=function(t){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Date.now();a=s,r=null,n&&(clearTimeout(n),n=null),e(...t)};return[function(){const e=Date.now(),t=e-a;for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];t>=s?i(l,e):(r=l,n||(n=setTimeout(()=>{n=null,i(r)},s-t)))},()=>r&&i(r)]},In=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,n=0;const a=En(50,250);return Tn(r=>{const s=r.loaded,i=r.lengthComputable?r.total:void 0,o=s-n,l=a(o);n=s;e({loaded:s,total:i,progress:i?s/i:void 0,bytes:o,rate:l||void 0,estimated:l&&i&&s<=i?(i-s)/l:void 0,event:r,lengthComputable:null!=i,[t?"download":"upload"]:!0})},r)},Mn=(e,t)=>{const r=null!=e;return[n=>t[0]({lengthComputable:r,total:e,loaded:n}),t[1]]},Dn=e=>function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return Vr.asap(()=>e(...r))},Rn=fn.hasStandardBrowserEnv?((e,t)=>r=>(r=new URL(r,fn.origin),e.protocol===r.protocol&&e.host===r.host&&(t||e.port===r.port)))(new URL(fn.origin),fn.navigator&&/(msie|trident)/i.test(fn.navigator.userAgent)):()=>!0,Fn=fn.hasStandardBrowserEnv?{write(e,t,r,n,a,s){const i=[e+"="+encodeURIComponent(t)];Vr.isNumber(r)&&i.push("expires="+new Date(r).toGMTString()),Vr.isString(n)&&i.push("path="+n),Vr.isString(a)&&i.push("domain="+a),!0===s&&i.push("secure"),document.cookie=i.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read:()=>null,remove(){}};function Ln(e,t,r){let n=!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t);return e&&(n||0==r)?function(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t}const Bn=e=>e instanceof Sn?qe({},e):e;function Un(e,t){t=t||{};const r={};function n(e,t,r,n){return Vr.isPlainObject(e)&&Vr.isPlainObject(t)?Vr.merge.call({caseless:n},e,t):Vr.isPlainObject(t)?Vr.merge({},t):Vr.isArray(t)?t.slice():t}function a(e,t,r,a){return Vr.isUndefined(t)?Vr.isUndefined(e)?void 0:n(void 0,e,0,a):n(e,t,0,a)}function s(e,t){if(!Vr.isUndefined(t))return n(void 0,t)}function i(e,t){return Vr.isUndefined(t)?Vr.isUndefined(e)?void 0:n(void 0,e):n(void 0,t)}function o(r,a,s){return s in t?n(r,a):s in e?n(void 0,r):void 0}const l={url:s,method:s,data:s,baseURL:i,transformRequest:i,transformResponse:i,paramsSerializer:i,timeout:i,timeoutMessage:i,withCredentials:i,withXSRFToken:i,adapter:i,responseType:i,xsrfCookieName:i,xsrfHeaderName:i,onUploadProgress:i,onDownloadProgress:i,decompress:i,maxContentLength:i,maxBodyLength:i,beforeRedirect:i,transport:i,httpAgent:i,httpsAgent:i,cancelToken:i,socketPath:i,responseEncoding:i,validateStatus:o,headers:(e,t,r)=>a(Bn(e),Bn(t),0,!0)};return Vr.forEach(Object.keys(qe(qe({},e),t)),function(n){const s=l[n]||a,i=s(e[n],t[n],n);Vr.isUndefined(i)&&s!==o||(r[n]=i)}),r}const zn=e=>{const t=Un({},e);let{data:r,withXSRFToken:n,xsrfHeaderName:a,xsrfCookieName:s,headers:i,auth:o}=t;if(t.headers=i=Sn.from(i),t.url=sn(Ln(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),o&&i.set("Authorization","Basic "+btoa((o.username||"")+":"+(o.password?unescape(encodeURIComponent(o.password)):""))),Vr.isFormData(r))if(fn.hasStandardBrowserEnv||fn.hasStandardBrowserWebWorkerEnv)i.setContentType(void 0);else if(Vr.isFunction(r.getHeaders)){const e=r.getHeaders(),t=["content-type","content-length"];Object.entries(e).forEach(e=>{let[r,n]=e;t.includes(r.toLowerCase())&&i.set(r,n)})}if(fn.hasStandardBrowserEnv&&(n&&Vr.isFunction(n)&&(n=n(t)),n||!1!==n&&Rn(t.url))){const e=a&&s&&Fn.read(s);e&&i.set(a,e)}return t},qn="undefined"!==typeof XMLHttpRequest&&function(e){return new Promise(function(t,r){const n=zn(e);let a=n.data;const s=Sn.from(n.headers).normalize();let i,o,l,c,d,{responseType:u,onUploadProgress:p,onDownloadProgress:m}=n;function h(){c&&c(),d&&d(),n.cancelToken&&n.cancelToken.unsubscribe(i),n.signal&&n.signal.removeEventListener("abort",i)}let f=new XMLHttpRequest;function g(){if(!f)return;const n=Sn.from("getAllResponseHeaders"in f&&f.getAllResponseHeaders());Pn(function(e){t(e),h()},function(e){r(e),h()},{data:u&&"text"!==u&&"json"!==u?f.response:f.responseText,status:f.status,statusText:f.statusText,headers:n,config:e,request:f}),f=null}f.open(n.method.toUpperCase(),n.url,!0),f.timeout=n.timeout,"onloadend"in f?f.onloadend=g:f.onreadystatechange=function(){f&&4===f.readyState&&(0!==f.status||f.responseURL&&0===f.responseURL.indexOf("file:"))&&setTimeout(g)},f.onabort=function(){f&&(r(new Yr("Request aborted",Yr.ECONNABORTED,e,f)),f=null)},f.onerror=function(t){const n=t&&t.message?t.message:"Network Error",a=new Yr(n,Yr.ERR_NETWORK,e,f);a.event=t||null,r(a),f=null},f.ontimeout=function(){let t=n.timeout?"timeout of "+n.timeout+"ms exceeded":"timeout exceeded";const a=n.transitional||ln;n.timeoutErrorMessage&&(t=n.timeoutErrorMessage),r(new Yr(t,a.clarifyTimeoutError?Yr.ETIMEDOUT:Yr.ECONNABORTED,e,f)),f=null},void 0===a&&s.setContentType(null),"setRequestHeader"in f&&Vr.forEach(s.toJSON(),function(e,t){f.setRequestHeader(t,e)}),Vr.isUndefined(n.withCredentials)||(f.withCredentials=!!n.withCredentials),u&&"json"!==u&&(f.responseType=n.responseType),m&&([l,d]=In(m,!0),f.addEventListener("progress",l)),p&&f.upload&&([o,c]=In(p),f.upload.addEventListener("progress",o),f.upload.addEventListener("loadend",c)),(n.cancelToken||n.signal)&&(i=t=>{f&&(r(!t||t.type?new On(null,e,f):t),f.abort(),f=null)},n.cancelToken&&n.cancelToken.subscribe(i),n.signal&&(n.signal.aborted?i():n.signal.addEventListener("abort",i)));const x=function(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}(n.url);x&&-1===fn.protocols.indexOf(x)?r(new Yr("Unsupported protocol "+x+":",Yr.ERR_BAD_REQUEST,e)):f.send(a||null)})},Wn=(e,t)=>{const{length:r}=e=e?e.filter(Boolean):[];if(t||r){let r,n=new AbortController;const a=function(e){if(!r){r=!0,i();const t=e instanceof Error?e:this.reason;n.abort(t instanceof Yr?t:new On(t instanceof Error?t.message:t))}};let s=t&&setTimeout(()=>{s=null,a(new Yr("timeout ".concat(t," of ms exceeded"),Yr.ETIMEDOUT))},t);const i=()=>{e&&(s&&clearTimeout(s),s=null,e.forEach(e=>{e.unsubscribe?e.unsubscribe(a):e.removeEventListener("abort",a)}),e=null)};e.forEach(e=>e.addEventListener("abort",a));const{signal:o}=n;return o.unsubscribe=()=>Vr.asap(i),o}};function Vn(e,t){this.v=e,this.k=t}function Gn(e){return function(){return new Hn(e.apply(this,arguments))}}function Hn(e){var t,r;function n(t,r){try{var s=e[t](r),i=s.value,o=i instanceof Vn;Promise.resolve(o?i.v:i).then(function(r){if(o){var l="return"===t?"return":"next";if(!i.k||r.done)return n(l,r);r=e[l](r).value}a(s.done?"return":"normal",r)},function(e){n("throw",e)})}catch(e){a("throw",e)}}function a(e,a){switch(e){case"return":t.resolve({value:a,done:!0});break;case"throw":t.reject(a);break;default:t.resolve({value:a,done:!1})}(t=t.next)?n(t.key,t.arg):r=null}this._invoke=function(e,a){return new Promise(function(s,i){var o={key:e,arg:a,resolve:s,reject:i,next:null};r?r=r.next=o:(t=r=o,n(e,a))})},"function"!=typeof e.return&&(this.return=void 0)}function Kn(e){return new Vn(e,0)}function Yn(e){var t={},r=!1;function n(t,n){return r=!0,n=new Promise(function(r){r(e[t](n))}),{done:!1,value:new Vn(n,1)}}return t["undefined"!=typeof Symbol&&Symbol.iterator||"@@iterator"]=function(){return this},t.next=function(e){return r?(r=!1,e):n("next",e)},"function"==typeof e.throw&&(t.throw=function(e){if(r)throw r=!1,e;return n("throw",e)}),"function"==typeof e.return&&(t.return=function(e){return r?(r=!1,e):n("return",e)}),t}function Jn(e){var t,r,n,a=2;for("undefined"!=typeof Symbol&&(r=Symbol.asyncIterator,n=Symbol.iterator);a--;){if(r&&null!=(t=e[r]))return t.call(e);if(n&&null!=(t=e[n]))return new Xn(t.call(e));r="@@asyncIterator",n="@@iterator"}throw new TypeError("Object is not async iterable")}function Xn(e){function t(e){if(Object(e)!==e)return Promise.reject(new TypeError(e+" is not an object."));var t=e.done;return Promise.resolve(e.value).then(function(e){return{value:e,done:t}})}return Xn=function(e){this.s=e,this.n=e.next},Xn.prototype={s:null,n:null,next:function(){return t(this.n.apply(this.s,arguments))},return:function(e){var r=this.s.return;return void 0===r?Promise.resolve({value:e,done:!0}):t(r.apply(this.s,arguments))},throw:function(e){var r=this.s.return;return void 0===r?Promise.reject(e):t(r.apply(this.s,arguments))}},new Xn(e)}Hn.prototype["function"==typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},Hn.prototype.next=function(e){return this._invoke("next",e)},Hn.prototype.throw=function(e){return this._invoke("throw",e)},Hn.prototype.return=function(e){return this._invoke("return",e)};const $n=function*(e,t){let r=e.byteLength;if(!t||r<t)return void(yield e);let n,a=0;for(;a<r;)n=a+t,yield e.slice(a,n),a=n},Qn=function(){var e=Gn(function*(e,t){var r,n=!1,a=!1;try{for(var s,i=Jn(Zn(e));n=!(s=yield Kn(i.next())).done;n=!1){const e=s.value;yield*Yn(Jn($n(e,t)))}}catch(o){a=!0,r=o}finally{try{n&&null!=i.return&&(yield Kn(i.return()))}finally{if(a)throw r}}});return function(t,r){return e.apply(this,arguments)}}(),Zn=function(){var e=Gn(function*(e){if(e[Symbol.asyncIterator])return void(yield*Yn(Jn(e)));const t=e.getReader();try{for(;;){const{done:e,value:r}=yield Kn(t.read());if(e)break;yield r}}finally{yield Kn(t.cancel())}});return function(t){return e.apply(this,arguments)}}(),ea=(e,t,r,n)=>{const a=Qn(e,t);let s,i=0,o=e=>{s||(s=!0,n&&n(e))};return new ReadableStream({async pull(e){try{const{done:t,value:n}=await a.next();if(t)return o(),void e.close();let s=n.byteLength;if(r){let e=i+=s;r(e)}e.enqueue(new Uint8Array(n))}catch(t){throw o(t),t}},cancel:e=>(o(e),a.return())},{highWaterMark:2})},{isFunction:ta}=Vr,ra=(e=>{let{Request:t,Response:r}=e;return{Request:t,Response:r}})(Vr.global),{ReadableStream:na,TextEncoder:aa}=Vr.global,sa=function(e){try{for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return!!e(...r)}catch(We){return!1}},ia=e=>{e=Vr.merge.call({skipUndefined:!0},ra,e);const{fetch:t,Request:r,Response:n}=e,a=t?ta(t):"function"===typeof fetch,s=ta(r),i=ta(n);if(!a)return!1;const o=a&&ta(na),l=a&&("function"===typeof aa?(c=new aa,e=>c.encode(e)):async e=>new Uint8Array(await new r(e).arrayBuffer()));var c;const d=s&&o&&sa(()=>{let e=!1;const t=new r(fn.origin,{body:new na,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t}),u=i&&o&&sa(()=>Vr.isReadableStream(new n("").body)),p={stream:u&&(e=>e.body)};a&&["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!p[e]&&(p[e]=(t,r)=>{let n=t&&t[e];if(n)return n.call(t);throw new Yr("Response type '".concat(e,"' is not supported"),Yr.ERR_NOT_SUPPORT,r)})});const m=async(e,t)=>{const n=Vr.toFiniteNumber(e.getContentLength());return null==n?(async e=>{if(null==e)return 0;if(Vr.isBlob(e))return e.size;if(Vr.isSpecCompliantForm(e)){const t=new r(fn.origin,{method:"POST",body:e});return(await t.arrayBuffer()).byteLength}return Vr.isArrayBufferView(e)||Vr.isArrayBuffer(e)?e.byteLength:(Vr.isURLSearchParams(e)&&(e+=""),Vr.isString(e)?(await l(e)).byteLength:void 0)})(t):n};return async e=>{let{url:a,method:i,data:o,signal:l,cancelToken:c,timeout:h,onDownloadProgress:f,onUploadProgress:g,responseType:x,headers:y,withCredentials:v="same-origin",fetchOptions:b}=zn(e),j=t||fetch;x=x?(x+"").toLowerCase():"text";let w=Wn([l,c&&c.toAbortSignal()],h),N=null;const k=w&&w.unsubscribe&&(()=>{w.unsubscribe()});let S;try{if(g&&d&&"get"!==i&&"head"!==i&&0!==(S=await m(y,o))){let e,t=new r(a,{method:"POST",body:o,duplex:"half"});if(Vr.isFormData(o)&&(e=t.headers.get("content-type"))&&y.setContentType(e),t.body){const[e,r]=Mn(S,In(Dn(g)));o=ea(t.body,65536,e,r)}}Vr.isString(v)||(v=v?"include":"omit");const t=s&&"credentials"in r.prototype,l=qe(qe({},b),{},{signal:w,method:i.toUpperCase(),headers:y.normalize().toJSON(),body:o,duplex:"half",credentials:t?v:void 0});N=s&&new r(a,l);let c=await(s?j(N,b):j(a,l));const h=u&&("stream"===x||"response"===x);if(u&&(f||h&&k)){const e={};["status","statusText","headers"].forEach(t=>{e[t]=c[t]});const t=Vr.toFiniteNumber(c.headers.get("content-length")),[r,a]=f&&Mn(t,In(Dn(f),!0))||[];c=new n(ea(c.body,65536,r,()=>{a&&a(),k&&k()}),e)}x=x||"text";let _=await p[Vr.findKey(p,x)||"text"](c,e);return!h&&k&&k(),await new Promise((t,r)=>{Pn(t,r,{data:_,headers:Sn.from(c.headers),status:c.status,statusText:c.statusText,config:e,request:N})})}catch(_){if(k&&k(),_&&"TypeError"===_.name&&/Load failed|fetch/i.test(_.message))throw Object.assign(new Yr("Network Error",Yr.ERR_NETWORK,e,N),{cause:_.cause||_});throw Yr.from(_,_&&_.code,e,N)}}},oa=new Map,la=e=>{let t=e?e.env:{};const{fetch:r,Request:n,Response:a}=t,s=[n,a,r];let i,o,l=s.length,c=oa;for(;l--;)i=s[l],o=c.get(i),void 0===o&&c.set(i,o=l?new Map:ia(t)),c=o;return o},ca=(la(),{http:null,xhr:qn,fetch:{get:la}});Vr.forEach(ca,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch(We){}Object.defineProperty(e,"adapterName",{value:t})}});const da=e=>"- ".concat(e),ua=e=>Vr.isFunction(e)||null===e||!1===e,pa=(e,t)=>{e=Vr.isArray(e)?e:[e];const{length:r}=e;let n,a;const s={};for(let i=0;i<r;i++){let r;if(n=e[i],a=n,!ua(n)&&(a=ca[(r=String(n)).toLowerCase()],void 0===a))throw new Yr("Unknown adapter '".concat(r,"'"));if(a&&(Vr.isFunction(a)||(a=a.get(t))))break;s[r||"#"+i]=a}if(!a){const e=Object.entries(s).map(e=>{let[t,r]=e;return"adapter ".concat(t," ")+(!1===r?"is not supported by the environment":"is not available in the build")});let t=r?e.length>1?"since :\n"+e.map(da).join("\n"):" "+da(e[0]):"as no adapter specified";throw new Yr("There is no suitable adapter to dispatch the request "+t,"ERR_NOT_SUPPORT")}return a};function ma(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new On(null,e)}function ha(e){ma(e),e.headers=Sn.from(e.headers),e.data=_n.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1);return pa(e.adapter||yn.adapter,e)(e).then(function(t){return ma(e),t.data=_n.call(e,e.transformResponse,t),t.headers=Sn.from(t.headers),t},function(t){return Cn(t)||(ma(e),t&&t.response&&(t.response.data=_n.call(e,e.transformResponse,t.response),t.response.headers=Sn.from(t.response.headers))),Promise.reject(t)})}const fa="1.12.2",ga={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{ga[e]=function(r){return typeof r===e||"a"+(t<1?"n ":" ")+e}});const xa={};ga.transitional=function(e,t,r){function n(e,t){return"[Axios v"+fa+"] Transitional option '"+e+"'"+t+(r?". "+r:"")}return(r,a,s)=>{if(!1===e)throw new Yr(n(a," has been removed"+(t?" in "+t:"")),Yr.ERR_DEPRECATED);return t&&!xa[a]&&(xa[a]=!0,console.warn(n(a," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(r,a,s)}},ga.spelling=function(e){return(t,r)=>(console.warn("".concat(r," is likely a misspelling of ").concat(e)),!0)};const ya={assertOptions:function(e,t,r){if("object"!==typeof e)throw new Yr("options must be an object",Yr.ERR_BAD_OPTION_VALUE);const n=Object.keys(e);let a=n.length;for(;a-- >0;){const s=n[a],i=t[s];if(i){const t=e[s],r=void 0===t||i(t,s,e);if(!0!==r)throw new Yr("option "+s+" must be "+r,Yr.ERR_BAD_OPTION_VALUE);continue}if(!0!==r)throw new Yr("Unknown option "+s,Yr.ERR_BAD_OPTION)}},validators:ga},va=ya.validators;class ba{constructor(e){this.defaults=e||{},this.interceptors={request:new on,response:new on}}async request(e,t){try{return await this._request(e,t)}catch(r){if(r instanceof Error){let e={};Error.captureStackTrace?Error.captureStackTrace(e):e=new Error;const t=e.stack?e.stack.replace(/^.+\n/,""):"";try{r.stack?t&&!String(r.stack).endsWith(t.replace(/^.+\n.+\n/,""))&&(r.stack+="\n"+t):r.stack=t}catch(We){}}throw r}}_request(e,t){"string"===typeof e?(t=t||{}).url=e:t=e||{},t=Un(this.defaults,t);const{transitional:r,paramsSerializer:n,headers:a}=t;void 0!==r&&ya.assertOptions(r,{silentJSONParsing:va.transitional(va.boolean),forcedJSONParsing:va.transitional(va.boolean),clarifyTimeoutError:va.transitional(va.boolean)},!1),null!=n&&(Vr.isFunction(n)?t.paramsSerializer={serialize:n}:ya.assertOptions(n,{encode:va.function,serialize:va.function},!0)),void 0!==t.allowAbsoluteUrls||(void 0!==this.defaults.allowAbsoluteUrls?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),ya.assertOptions(t,{baseUrl:va.spelling("baseURL"),withXsrfToken:va.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let s=a&&Vr.merge(a.common,a[t.method]);a&&Vr.forEach(["delete","get","head","post","put","patch","common"],e=>{delete a[e]}),t.headers=Sn.concat(s,a);const i=[];let o=!0;this.interceptors.request.forEach(function(e){"function"===typeof e.runWhen&&!1===e.runWhen(t)||(o=o&&e.synchronous,i.unshift(e.fulfilled,e.rejected))});const l=[];let c;this.interceptors.response.forEach(function(e){l.push(e.fulfilled,e.rejected)});let d,u=0;if(!o){const e=[ha.bind(this),void 0];for(e.unshift(...i),e.push(...l),d=e.length,c=Promise.resolve(t);u<d;)c=c.then(e[u++],e[u++]);return c}d=i.length;let p=t;for(;u<d;){const e=i[u++],t=i[u++];try{p=e(p)}catch(m){t.call(this,m);break}}try{c=ha.call(this,p)}catch(m){return Promise.reject(m)}for(u=0,d=l.length;u<d;)c=c.then(l[u++],l[u++]);return c}getUri(e){return sn(Ln((e=Un(this.defaults,e)).baseURL,e.url,e.allowAbsoluteUrls),e.params,e.paramsSerializer)}}Vr.forEach(["delete","get","head","options"],function(e){ba.prototype[e]=function(t,r){return this.request(Un(r||{},{method:e,url:t,data:(r||{}).data}))}}),Vr.forEach(["post","put","patch"],function(e){function t(t){return function(r,n,a){return this.request(Un(a||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:r,data:n}))}}ba.prototype[e]=t(),ba.prototype[e+"Form"]=t(!0)});const ja=ba;class wa{constructor(e){if("function"!==typeof e)throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(e){t=e});const r=this;this.promise.then(e=>{if(!r._listeners)return;let t=r._listeners.length;for(;t-- >0;)r._listeners[t](e);r._listeners=null}),this.promise.then=e=>{let t;const n=new Promise(e=>{r.subscribe(e),t=e}).then(e);return n.cancel=function(){r.unsubscribe(t)},n},e(function(e,n,a){r.reason||(r.reason=new On(e,n,a),t(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=t=>{e.abort(t)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;const t=new wa(function(t){e=t});return{token:t,cancel:e}}}const Na=wa;const ka={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(ka).forEach(e=>{let[t,r]=e;ka[r]=t});const Sa=ka;const _a=function e(t){const r=new ja(t),n=ar(ja.prototype.request,r);return Vr.extend(n,ja.prototype,r,{allOwnKeys:!0}),Vr.extend(n,r,null,{allOwnKeys:!0}),n.create=function(r){return e(Un(t,r))},n}(yn);_a.Axios=ja,_a.CanceledError=On,_a.CancelToken=Na,_a.isCancel=Cn,_a.VERSION=fa,_a.toFormData=Zr,_a.AxiosError=Yr,_a.Cancel=_a.CanceledError,_a.all=function(e){return Promise.all(e)},_a.spread=function(e){return function(t){return e.apply(null,t)}},_a.isAxiosError=function(e){return Vr.isObject(e)&&!0===e.isAxiosError},_a.mergeConfig=Un,_a.AxiosHeaders=Sn,_a.formToJSON=e=>gn(Vr.isHTMLForm(e)?new FormData(e):e),_a.getAdapter=pa,_a.HttpStatusCode=Sa,_a.default=_a;const Ca=_a,Aa=Ca.create({baseURL:"/aiva/api",headers:{"Content-Type":"application/json"}});Aa.interceptors.request.use(e=>{const t=localStorage.getItem("token");return t?e.headers.Authorization="Bearer ".concat(t):console.log("NO TOKEN FOUND"),e},e=>Promise.reject(e)),Aa.interceptors.response.use(e=>e,e=>{var t,r,n;return console.log("=== API ERROR DEBUG ==="),console.log("Status:",null===(t=e.response)||void 0===t?void 0:t.status),console.log("Error data:",null===(r=e.response)||void 0===r?void 0:r.data),401===(null===(n=e.response)||void 0===n?void 0:n.status)&&(localStorage.removeItem("token"),localStorage.removeItem("user")),Promise.reject(e)});const Oa=e=>Aa.get("/agents",{params:e}),Pa=e=>Aa.get("/agents/".concat(e)),Ea=(e,t)=>Aa.put("/agents/".concat(e),t),Ta=e=>Aa.get("/functions/agent/".concat(e)),Ia=()=>Aa.get("/credits/balance"),Ma=Aa;var Da=r(579);const Ra=(0,a.createContext)(),Fa=()=>{const e=(0,a.useContext)(Ra);if(!e)throw new Error("useAuth must be used within AuthProvider");return e},La=e=>{let{children:t}=e;const[r,n]=(0,a.useState)(null),[s,i]=(0,a.useState)(!0);(0,a.useEffect)(()=>{const e=localStorage.getItem("token"),t=localStorage.getItem("user");if(e&&t)try{const e=JSON.parse(t);n(e),Aa.get("/auth/me").then(e=>{n(e.data.user),localStorage.setItem("user",JSON.stringify(e.data.user))}).catch(()=>{o()}).finally(()=>{i(!1)})}catch(r){o(),i(!1)}else i(!1)},[]);const o=()=>{localStorage.removeItem("token"),localStorage.removeItem("user"),n(null)};return(0,Da.jsx)(Ra.Provider,{value:{user:r,login:async(e,t)=>{const r=await((e,t)=>Aa.post("/auth/login",{email:e,password:t}))(e,t),{token:a,user:s}=r.data;return localStorage.setItem("token",a),localStorage.setItem("user",JSON.stringify(s)),n(s),s},logout:o,loading:s},children:t})},Ba=r.p+"static/media/intellicon-logo.6628b3eecdda0677306b.png",Ua=()=>{const[e,t]=(0,a.useState)(""),[r,n]=(0,a.useState)(""),[s,i]=(0,a.useState)(!1),[o,l]=(0,a.useState)(!1),{login:c}=Fa(),d=ee(),u=Q();return(0,Da.jsxs)("div",{className:"intellicon-login-wrapper",children:[(0,Da.jsx)("div",{className:"login-orb login-orb1"}),(0,Da.jsx)("div",{className:"login-orb login-orb2"}),(0,Da.jsx)("div",{className:"login-orb login-orb3"}),(0,Da.jsx)("div",{className:"login-container",children:(0,Da.jsxs)("div",{className:"login-card",children:[(0,Da.jsxs)("div",{className:"visual-side",children:[(0,Da.jsx)("div",{className:"cube-container",children:(0,Da.jsxs)("div",{className:"cube",children:[(0,Da.jsx)("div",{className:"cube-face face-front",children:(0,Da.jsx)("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAF0AAABrCAYAAAAVUo5zAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyBpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBXaW5kb3dzIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjhDOTFGMzhBRjY4MzExRTU4RjZCRjBBNzM2QTdCOTFBIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjhDOTFGMzhCRjY4MzExRTU4RjZCRjBBNzM2QTdCOTFBIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6OEM5MUYzODhGNjgzMTFFNThGNkJGMEE3MzZBN0I5MUEiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6OEM5MUYzODlGNjgzMTFFNThGNkJGMEE3MzZBN0I5MUEiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz5V/ORdAAAesElEQVR42uxdC3RU1bnee58zSQghJBF5hCTlpWISxigIwxDQWgVEbNcFeQi1rlurXrVWELusy3tbe++laqtA9SJVbGtrqSDqui0SBK23SDKM+IrDJKBCwLwQhGQI4TVzzt73//99ZgIkkBHIS7OXmNeZmXO+/e/vf+5/c6UU6x7tO8zOfoMlO/Zn1YVlRnlNQ65kpqiqO5y1+2B4sFBSciZlSlJS4xUDkz+KKGZmJCXU5WX2LB8/NKOyMz8T72ySvvKDPZ5/VtRf7fusflxV6HgW3J2A/9xM2XC3BlwhmZA2k1w4T8AZPoMBP9oSfmQyoDhjqck9Gi7LTAxMGNJ3o3dIqq9wSHp1N+gnjGXFVVNWbKmZG/ziWL5kSrhYJN8G5GzDxYRtA64cwWQK8eeSQMYJ4HjrzmQouJ7DL2LX4cPRFMHrmRFI78HrJuf2XX9jfsbfp+QNKP9Ggv7X977w/uWjmltKPmvwMgGASduNEOH3gDsBZnObGQoBbQJWwO+ioMM3NCHRJ1DOz4z+zh3gLfi7w6I4YZIHvnVBj8o5V1y44mcTL1r5jQB95Xt7PL96s+Lhz0NHcjhzuVEyURo18ILkFCVYOLRB9MG1RGtAHVpR+jXRQa9jBv1eOPKOEs/pLXgMdPxZT45Rih8zd3TfFUtvyv/11xL0ovL63Af/Fny8MmTncFu5ubAJbBMk2WIaFAGgKRJUW/9MgJN0OhQD4HKmgSPacMEvAEChSNq5I+1RKddEYzggK/0afE/n/ej3SgQMblv3Txy6+OHrBv/lawP6lOWly3yffuk1mOGWAKJUmqNRGXKkEhJHDS5+FSilcA3+HaUWwUL4hILp4cDzCqaLN60KTTG2c62g6cOJEwh0lHJwQvD30VVDDCXoXuhn4P1ePUTDszNz75yS17e8y4K+7J3qKY++vfOhhsNWKgDrjnHxCfxL3C2Byw2ARABsNnyFiUD8ZQxIk7gZwcRrESzQAfr3MSUblWzgfRUBcA14D/g7TBCCitgS/Zzw2QonVYXhveBaYZBVZHMWmJLfp+ilWy97qMuBPvvPWx9fV75nMrOBt1HSuOXAkuAAqLnCAsF0KS2JtgMai9KBQyUgjQHNNwabMDTtHbhnQUrX4enPDxzLqa4/CualKRxAaYJJ6cLESJgonFD6m1An6QX6DIdycGXQ9AkeSEtkobV3jr4hPzO1sdODHqw5nHLXy8FlwT2H8+HHArKhAXCLaIFpChFNk6Af3nT4Fh5aGUF4eJmfmRIcNzij5PL+PT/MuiClunBo77js7E0VB3N8O7/0btx16KrNOw54gKZEdBI4AI8TEOVzwVWMdrS+0LQUpTyYkMDSWZfe8/0rBhR3WtDLahpSrl/+0brQ0XChUNqSII4VjgNDJCC0iUdmoEtLMiOpLM0f0Cs4Z1T2S3eNzyw6X/e0tnxv/pqy+qkvv1s1KyxcCS5m5UZpjr6edG8O76M1BcALbY4G5o7qv2LpzNxfdzrQi4L7c+9eXbas/og1AS0TBTzp3DRJjjRACdpcm4BNSo+8x7mXD1hx94SBz7TFUj5xLN9YM/Ep3+57a+sbM20lrlAGJx2iJZ/HbP4oHbEmyykw58p+K56ZkffrTgP62q1f5s/9y8cr4AbdKDkm3HQYlJ2AB1JCMpd0gYKSjiTZUekK3jJy4IvnU4K+imP28NodC+sPH89QwnAr22LCBFmXVswCIrojidFOmAKe//7I8yPx5wz61trG1CnL31t78DArRJMu5rAQd2ulZaCJJ6SWJjDNLuvfs3Th94Y/HC9PnzhkqDyZheszYBWBhW5aYMWYrN/Y2rO59wfXfnr37/5Zc6fJbLdNrG5REIJsf+R1tP9B93BlOgLDAnNG9l3xzKxzc6bOCfRAzaHU7z73/prQETmBkYMCN6dQUizgSE5KiZSUcD4DHJGHrhv06IPXDYnL/bar37xY1G3Nt/cVj1ehbcN5uCEVlJ0EO71QAjUICybSED4ytWXEdKVfXirTL/7E7uf1JQ6a7Y9LaGrqU+f8uXxFZSiSA/ob/AjbsaCE1knOJGjjibRP4KFv5zz64KShKzsE9MIl768oq22Yo30ax742IkArOljFwO4VBlksgbSkhNDrd+bdkD8w/cy8va8ky9712jRWVXS9itRngK0xWkUjiqByTRBsXDUUbSR7XlKEmiZZHgd7m773AS8L3scdMAZNf5VfcvuG1p7l+y98vHBt+YEpgEcBOWXcJqsqat6iZyxlAlhiEr8PvHhrwS035vYJtCvoN78QfPSN8n2TLSEKDCcSiEBItFoMu0lpKhUoyEor3XjfyFvP9H5WxcujRXDJfPtIdRaQUSHFTxR3AgQW+k7ouBDQaNsLsrUla1pEQAkw+8DRAI7FTADOZhRO8BuutJAafvtyM//+1850D4+/9dnshRuqHwZGz0cHCx0mHSpwuB0tMXK8GOudnFBc+chV49sN9GeKa6b8+5pPF9rKKoi64dLR/jqyJ52gqitYkNmj9J15nltO+2Zf+jLlB//5CxUKuGFFeGjVYHA8AvRBekD5LG6brrSCUpaSWSPTLt1uAJ+jJMOQaF2oo1VZrLF2oDpYniuP1WXA6z0uS4EyR8dLsYi+Rx9P7N1gXPSj5WLE6cFf8cGewh+vKntaS7ypQxIUrpBNATMJNGpYgcsGpJRunOe5tV1AH/Tz4o2ho0cnUGRQe4y0HCNgd5tR5wMo352ZHDgT4NZHP/+h3P7720CCvDhJ6JCgBIMVsUUlp4X4wOvXiQGT3hDZk7fHfXP1ZSlsr88b2f3yDFW/fTi8Z6FSehUKimgyv8gYETRHL57P0vNapLq/vF9beO/L25+WADzqI6ByeDZOE4jBOS1cgmjmZ9cOeRz01F/bFPQbngssLfnsy0JAx40aXkXj1EzHQ2gZAofnZSUHS+aNmXs6YGz/vMXy4DZ0VCiermzga6b8dsqg3eaIeb8Vg2f52bkO/JzPnv+RvXPlLKUM8By4V4oI3KOJkuIzAHhj6MwtLUr8+3sL71kVWGoJ060FSQfhyL3TnjNDfwSNg9Cvr7mszUBfU77ffcsfP3oRbVvu8DeZiejiY7DIBC6HpZfaw1Vc+cvx408HROQfN61WkdBkCSxiSlKPxaxnVrWRN3/x6UA41yGLb/u5rHxjEiher6lcTkZJ+tXQWavMMUuWtPSaH68qf2DFB7UgOKIApB6MBBAt2zghKorq2woUDk0vfv3fRt3TJqC7H9u8pvLAkakUMwGgUaNjmJWieVIrUzCygpvvGzM2b2BKs6Urd670RLb89DcgMoWaSijeUWxcctvvjSseeeGrgBjZ+uRNIrh4PkifBCAF7zfWb6SP2Gr3ueJDV/aNLVsVVeuHR96bv5gfO5QiuVWIFEFcP2jmKtOz6KmWXjJhif/FrbVH8m1uFwjlhA50sD8W5jC4KH39tvwbx118YfV5BX3Ve3s8d7y8/VmAya1DsNqUwrg2KVIOpqIUgd9879Kf3l6YtaG5U1OWYq2buB5e6OUYaUQFmJi0gY/57X1m1lfg7GhqLrBoWqTsN68airi16YGY4WOuXg0y57o3XaOfWtTSa8PrJi7nB4P5QDke9CVcwt5iD5q52uV5+omWrs9+ZOOmxiN2IUo72eq29vvQuqHQNKz2nD5JRcEHJ9wQz72LeB/yv97c+R+gLN1ot2L4m5IIBm9KIMCSHXtxhq8lwFV9ebIFlGIww4tJNcrmJyVtcF3z2vSzAdzJCiE5UXhBkh3tojiJLZjXshoms4rXptt/HVgi/ff/5NTXJly/4XY2eOYqkFsfhlhs2zVa7frf71nBRdNa+qyfXTv4cfhSirEkdIApTGDoyKgWepNV7Y9kFQXrcuO5d+ORRx5p9aKX3qvxrvxw32ypRH/GtQllOE4JGGbwNRF+bQVe+kHBnH69Eo43A33j3GfY4cqZuDwxfWa7UjaY17w6nWfkn3WAiwtRp5KzNrtScvx2Ymq5OFQFZob5ORBPjnbbVTbovWwe2t7L/uS5mSz1kvdE6tADsQfPmuyXR6tSWf0nQDUsB5Zejvhic7ZIy/Wz3hd9eeJnjc7p/ek7u+oKqg4cG2UInd3C2Y06TRQg4Krf/kZL3Tyq/7rzQi9XLfH/6eM9jT/QkUOdAkMnBPncCdMG5o7OWbF0xiXNYhLWu/PmWbtWz0DLAReWMHtsYN+Bn9PdDedbWarq9cNZTdGU8K5XpqOZB/rC2xQ7sfyu/AVP8hEPvHLS/ZX86y/55+sm29w12kCzNyG9KGlaWTOaKN55MGvqsx+shYd3cycOT6k+h9pQOYPTFii574pxrUVLW6UXjK8EahvdOobilD9QICuiA/6kVA3WEuBs7+ZMtnP1DJeUXrwWLAafMWbJ/LYAnCQoa9J20BGLEmfXjGNDZ6wGWHxo1iKYoEM8keBv70MhOPE15rg//kJdAI4XPoeExRI+mGZv+uHPm4U8hvauxvBuNMZEEk4xDp3ntTA0oSLuZcVVd8ct6Zsq6nNuXPbhGvoJTSO0CJlw1pDtRvNOu+ZkJtH3lM5lvBSW1EvPtBDytP4+ZpU8XD2T8vxK+hi44l/VSjknMzG0NVW+C9J9oCzX5syLwgH6xCc8S+aLITOaTNO68uTw+u/8w2SGB6tkAFefee3Ls1jfcSdZI5t21uVM/d1Ha4Db3bFcbXOiOMlywtI/xPHmkf1eWjYr77GTJH19cM9ETGuhZQgWmBuWTgGIByhO5m6qphLkFkdjzphtAeUlWgJcVazyAOBZBtERrJAUsMPbEXB6uLQRDeakDbfL7BvWCmZvUTK8hQ2ZteokwHFk5B7h+Q88GeG2X6cQhdf66Je/OPX9sEZy/LCMYjSPyYJrmZndJ/4DBipASnpj+95Jzejl/3Ye/rZyMuU0Q046i/45pRB65ljs9/jy/OykYIsuftn/3AP2jdeCZzC5WSw8T93HOmi4xj/3KzYEbPFhN790OnvcNWLBK2bS4N3RwB2GEOQ+oMdTA32wqkGflSop4zL+KNwN71l3yMr4eE9D2kmgb/uiMZdMP+HUR4F0Gpw1JY9PApvRdUAvwbu9OUubfdKuV0axQ59djNGORPhn9R+9RfQd8wXrwGGOeWoRuP1LznjRiHmLheQ+SyewC1XgyQWnXjJ35IBisNcFxzg76LVW+Vvq9Ah3GW7fZyFvDHTMoOOK0aUSsqkuBPmb62RELMzKdTYf84iwFqw5Vw70NU8+vH6jwRJG44QBR/owsse6wMAQBNIghjZMVGr7igtbum6Ku1+RkOGTyvpOz3FKV6mBL7lpd2h8DHTfzgNekEc3U8LJD+oaEQQ6VsAjdPw6Rj/wZrmZPVushLKq3rpWYWBJJTAGD3G2DlCHDOB8gMWnrbSEMNu+fOKpl0zNvWAtUkxcZixCDI4AejQf1zS6Y6BX1EWGUM0Hs516EIe/uc5x0gRIGSvMIdIBZ+zqIb03NpPyipUeDDRaFH8GKyd7yjrWhQYmOtAi5lQDGSmM1Lx5XUsUgwVPUrUu6ZjgQXbAkEFV/fGcGOi1ocYB5OzEytKa6gM1+FElajh2JnK6GfAM69M8/Lr/XQ+YZV6TuShtxgdPe411sYHx9tiK3repRYpJS04IoXPYap4XhRmTMSC0JrcsVKYEerC2Id+UFqyCBJJmSXlAMAllU6GQcGoGpVNbqFiEtZQjVPXbLqXIuNJlnxzMtq4Guurr2axzr5ieE1J+uSmnmc4dkBKIh9OpogCj3+Cg2VIUNByx6gn0+iNWBmZGKDYudbCe8p1UM67I8cIIm6IEcIQAj9V8nzqzdWW5jq3LRF+Pn3XBwS8cvQXdegMpRhhedmDb8FOvyR+YXMZUHFu20Ms1XJi6JENkW+0hTS8KJJyTA+TUb0dLy6Kvs3W2RDkrACkoOy2xxc1UhowkoDGJksLT88q6IugqqXdD2Ij4bRQujIjaobRTr0nt4WrgTMbBVZwS5VE/58tj8CusP+Qg4SjlVBkeTTAr4cRVeEyxYkrN5rr+e0h6UkWzSd33bn9pmpZ0uF+6ejV2RdCNC8dVm7ZpCeXkCup2DDv1mkFpSbtlHMFCnT9WzjYcHZc1645Zh2iDFJUNo8EvSWVS3TeCLHRxJRXlo9kopaYa0ZI7hkqAkQOAS5On5FSyLjqkAcSidOm06/iBC5olNnonxvVsFDIhfDHPCvSsSOq5Y4+bTU4RVa3aOnzLVcxup0onh4LAfTCbf4Ck6mPDKcTnKYMruiro0b1JZC4L02pGQUaCYLx1etG5ZO6EAzRTCF2Ab1DtdszFdySdLo7GXpzCfiV0QeVpFqZl0xYVXXhsH9/fp8uCjgYF1x45pYuagWnJ0xkTJ02OaqoKRnrArZpoRH4L3qCUqlSNJk806sJS8FZGtPlHN6A3Ugkd8WmWQnOxBGIvSqyEynO7LL3wKGinA1Y2XXTG2dMRWlz9+FYm1kqOH5ZWSXFzx/PUWwINvR0kuosNX+gkK840u7jelLJ9qLG1k2VI1mUHUKXUkVSeklV16l/9Ow56WByS7swcmd+Irc1MrQyFimBQBUsJ9I4zRtGvmHRLJZr27KAcw9fiivrmnlpfzxdR25S2JR7+PKcrwm3t9/dvknZJ8aNTrwkLkaC38MRLL+hgguYE1iDQbeESxOk2cyqXFFkoxO16c76OvShd2UTK9YxLC4xGrKg9WJ7XJU3G/WX58NQe+h6tjrQRzXIG5bWH88DEaZ1duBHbXmmDM5WXnaFBd/fvFZBU0A/mEToE0dgLgsxFLPnqEjovSOYj2EAlO+qymn1I37F+KmGG6+z6si7J6bIh4BZOKTbwsJ/1zG5mHlYdOJxFRkUc1ot2NrF23w6mJolsAj01xdUQ3fRqgfurnC3gWJ0d3aNJZqIUpFQZxVWMgsAXR93NllN/b4l0dj2bAL1dsza/y6GO5XeIBW6JdKWFeHrukVMvCexpcOMe1FYnMLpLG01okSCxGweBPmFQyibh5DJp7yWaiJbU9eC2VibS2cFMThPXezRLduwb10yZgqTD3/16+7nwiOq3r+lKeNs163ItqzFFUBWBYGYLoelNO0I5uGeVavFblXSDMkyCyggtGQvt5qQnVzr75CnDTzMjtJMknSJ7VKRILBp8XeW0cffhCS2AXqtcvUO2sChKaVW9MalLxV2q108UVKODtei2386+9q1TrynatncKiKQ7HtvFaf5AuGFSOwZ6fmbvIExEIFoQqhzJdrwEHWWU+m/OjFEgqPFIOGVrdWNqs0TAwEnrdUESrJpIKM3+pHn2pdPyecXqGWgq0jb5hLSQmXl9s+yYb2f9WFzpPE6TMWrB5Gb2LIuBPiKzZ0NaclJI8BOa12DWhxnOhicdWaSAvJPqYNrrLHim5PNmxTX8ktufZ9xVzLWt72WfYuF/FzAVg4unoX1OGwOZ9BuDMXV38ti6pyH145rDBTgr8ZTe8mjrFFAD4wdf0CTpOMYN6V1sI8hOYloXE+k67DP9W1te16wEjafnNfI+V25RzoYg2VCdFSl74qZOTy3bn78NuNxDkDMhW6rTWfH+3jnKUG6MpeNOvNbwiXbcQOPjhrw+wZNALxycVgKyW0ohXZJiU++ddyT9dP8OHY2kvPT+Hu+pN+dy//Q3EtN1FBxQXr79D51a2u3AkzdJK5SmY+QWluitb+m6le/X3kzeusFO2Pp4hn9ONw73wF6xLFsskHPXhJyig8eOp+pkBpMRbiQYKmyBLXrGihpw9C071lbiZO/U7DPWr/a968WHkOFDKXLr4mlixPxOmTOVnEtX3oInQZktdmHMKfuGZv0JULhCxyJpLqxdBHkcP+yCZ8YN7V3SSuAMjBwh3P17BpoimG3Y78Xe68u0356xGkxILymThNQNrumfdClr5sQxYmHxmsoGa6pB2+/t0jX/NvLGs+mCJ9ryJo1+3lrXwCnrAHA/hQUijSky2Pm5vaXx2Iads6sajuVweZxcnrEX9fWfbdtB0dY3yycs/2/aM4LhYFt52SfP3dkVQV9aXHMP8ISbmvYIHnj46pyFZ/teoj1u2JUzcxW41H4hTGYBt6t3F/ykKwE+98+lCxuPhVPQWOZCBcYPS3tn3EVp1Z0adD520VPgnUrdhc70RCpWzuoqgKPyXFu2fypYIFjyzFJ7GA1r7rji3nN5T9FeNy8vmr0KVLlfJ/KkUP6f/rizA45tVR76+85HQSe5TQxuGSLQYpXyVxXC9myGGX7tojeN8OFrpY0785SPtql04lGwsORvnx88+l0d2JIB70UZvnV3XH7Xub6vaM+HEBfftQzsYD+19cDH8P/k/s4K+IQlW17cHToyyFK60Co9WYTOB+DtLukk7auHr+d240TdyFIUJ9xcNb6jgC0q25cbqDmky5e5klPy+hflZ6Y00m7CmkMFuB3fVBb6p4GiO0beMG5YRnWXBJ19/ORN4fInFmCMQxnSLwfPWpU4esmSduXqPQ2pc/8UWFF54GiObRhuTJ87LQNLeyUbjYeO2CmMuwqwp5dkRvDZWRffefOoTN95Myw6oqt0+NVL1xnhQ5N1+Jf7XLOr243bg7WNKeOWlJQwZbr1/n7sipGoOxhhPkEAzNJ0tgCpwLJZuXfdPGqA73zeg+iIZS2yJq23mfJF21C1p5eKEi5UInXx4BSydsVayApsxSZ17y7QOKVLZ196z/kGvMNAx1YfikuhI7/Ca1W8Or1dOHzbvtzKunAOVR8bukdBbDOydLJk9LPNevVIapw7MrO4TYSuo5SY2WccSToV3x/ePUhhR6I2HqXVoBy5LECwsTYH+JwAx0ZvOgEf0eWDymQHjxxPRTv9awU6p23kLLp0PWzXK+1AMTpBQ+1SqFzwuG5uH+2+dkLHazBr5cFjka8X6NguCjvQYUk1daDb5xvb1p+Z3iM5xAwViG1AFi5qmUKFso5+ifUGZgmirQ4v6TDQcVgDxtJuB2rvVxds8/qYuwoHFmHrQm5IvYdK6pJwrGijzQ5COVaMjdtbgm0mcB0JunGhZzO138MTi5DfW9gWfr7H3VdlL7VtFaTiT+xqjeDDSsPmaGgy0s4J5Sp9bOolD34tQeeYeMdaQd3U0uvs5GjT8aupFz93eVb6hxp4i/ZR6Vofg+p8DMFKn545/N6z6QPcNUDvP9bPWaLeDEU1N6JdSqs33nflrQ9PGrRwYHpiEQayDMVL0RECN/93f7vj8u99/8r+xW363B16uNTezZnW29NqVLSy9ao/5LVU3NPWY1tNKPnSgWlH2s2I6EhJp708WD+CvXHRhNvffL9me4z2BLzj6QUjHVgozxOoutWId2dDFx+iYz9eCu5UC6PlEBaqG/S2HsrMqFPKKG6yZmyzG/S2/vD04cc4nYNg00ldnCWEvwmgd7hkcWUDxeD+yggzw/VpbUZk5HjR0Q7ibM/Q+JpwOnreLsumc4Y4i9Sub5OSO1X5xnD5j2mv2m//yx5sPyud3XPfWNDt7Inr8SZoh+Whyhy1/ffXnncp/2z57TZneLqXPtrB6NhGER1/8i46SCB92JhYt2qV1MlfGb0aKJvGWjMjBW4Xl5JZJjAHNicQ1PuW+vsDm4Q+drPI8SSuIoV4lKZKSHnDnF5+/Tea05FfVX+P3/jCj4BjP16P2l/uYfrUGOd0lzMtVX2Woz5+gcV6junthnpzLacDokws2PaZ+Que/Ibb6Xq4rnl1geqTVy7wvArdH4xJPH0ljh3J0tmKeeKjcDydi4JZjKwiSlwIAHzY9FeNS257q+ONh050mrq1Y5WHV66eYe/d7NEhV8zNtxYEcyySqNIUSuiWIRw93TBL6btPpuVvNS65/Xnc+dcZnrPTHWHf7Rx1j6+pIm2JpytWj1YVq2dIAY5TKw0nsaeeQX0p9Um9hkoIc3UsKWwY0pU6YqsY+YsXukGPx5lpBHt93+YHlKHovNBWlyq1t9L7XqOql5ocSvGE6Jb0OBUNJooFniaj+xHEMU1UqcWcw7+pnyImvLktuukl3tEzu5r3LVxErSDi0PNIMSJm5Qg6JQRpSfQesbVTClW39dIt6U02+35/fyFVHPQgyN3HpDae7KV/xSWnc5Z7HOuMvX47pyLd+sRNbOvi+RbXpzeeaRjUwwAPtzLJg9V9JbEiN4mZF45axK59ZUE36PGpRUTaKxh2UTJauRabRoiYJUOtrqi3VgSbm8nEbnqJ007nzpl41JYwrleA6rSZiV2enWoxat7GIp3y+TrnTV04ZouRd//0iNAc7aI9qPA/Qx9pTD3JFYYTDQvoW4SBUvCITX1OqJAmvM7GA8B7ZFd3xufrtl66Jf005PGPWY+Dx2mCyjQFTzwmpWXqbs0oNdp6YdwVVuposhj52IOY8O4G/RxHZO/Gq8HLHE2HpSinNyT12aLj5KnqVq9buMqqw2Msa7tBP8chqPzO2fBLLZqw0tfJFkknS6R0V38ueTe9nBfQMYqolA97yaLDBGrTsrktDGniEQfCxuJT1KtC9x0zOvnzdCvSDhj/L8AAOUrdLD6FiTAAAAAASUVORK5CYII=",alt:"Logo"})}),(0,Da.jsx)("div",{className:"cube-face face-back",children:(0,Da.jsx)("span",{className:"icon",children:"\ud83d\udcac"})}),(0,Da.jsx)("div",{className:"cube-face face-right",children:(0,Da.jsx)("span",{className:"icon",children:"\ud83d\udcde"})}),(0,Da.jsx)("div",{className:"cube-face face-left",children:(0,Da.jsx)("span",{className:"icon",children:"\ud83c\udf10"})}),(0,Da.jsx)("div",{className:"cube-face face-top",children:(0,Da.jsx)("span",{className:"icon",children:"\u26a1"})}),(0,Da.jsx)("div",{className:"cube-face face-bottom",children:(0,Da.jsx)("span",{className:"icon",children:"\ud83e\udd16"})})]})}),(0,Da.jsxs)("div",{className:"visual-text",children:[(0,Da.jsx)("h2",{className:"visual-title",children:"Intellicon AiVA Platform"}),(0,Da.jsxs)("p",{className:"visual-subtitle",children:["Next-generation AI communication platform",(0,Da.jsx)("br",{}),"powered by intelligent voice and chat technology"]})]}),(0,Da.jsxs)("div",{className:"stats",children:[(0,Da.jsxs)("div",{className:"stat-item",children:[(0,Da.jsx)("span",{className:"stat-number",children:"99.9%"}),(0,Da.jsx)("span",{className:"stat-label",children:"Uptime"})]}),(0,Da.jsxs)("div",{className:"stat-item",children:[(0,Da.jsx)("span",{className:"stat-number",children:"50K+"}),(0,Da.jsx)("span",{className:"stat-label",children:"Users"})]}),(0,Da.jsxs)("div",{className:"stat-item",children:[(0,Da.jsx)("span",{className:"stat-number",children:"24/7"}),(0,Da.jsx)("span",{className:"stat-label",children:"Support"})]})]})]}),(0,Da.jsxs)("div",{className:"form-side",children:[(0,Da.jsxs)("div",{className:"form-header",children:[(0,Da.jsx)("div",{className:"login-logo",children:(0,Da.jsx)("img",{src:Ba,alt:"Intellicon"})}),(0,Da.jsx)("h1",{className:"form-title",children:"Welcome back"}),(0,Da.jsx)("p",{className:"form-subtitle",children:"Sign in to your account to continue"})]}),(0,Da.jsxs)("form",{onSubmit:async t=>{t.preventDefault(),l(!0);try{var n,a;await c(e,r),nr.success("Welcome back!");const t=(null===(n=u.state)||void 0===n||null===(a=n.from)||void 0===a?void 0:a.pathname)||"/";d(t,{replace:!0})}catch(o){var s,i;nr.error((null===(s=o.response)||void 0===s||null===(i=s.data)||void 0===i?void 0:i.error)||"Login failed")}finally{l(!1)}},children:[(0,Da.jsxs)("div",{className:"input-group",children:[(0,Da.jsx)("label",{className:"input-label",children:"Email address"}),(0,Da.jsxs)("div",{className:"input-wrapper",children:[(0,Da.jsx)("span",{className:"input-icon",children:"\ud83d\udce7"}),(0,Da.jsx)("input",{type:"email",placeholder:"name@company.com",value:e,onChange:e=>t(e.target.value),required:!0})]})]}),(0,Da.jsxs)("div",{className:"input-group",children:[(0,Da.jsx)("label",{className:"input-label",children:"Password"}),(0,Da.jsxs)("div",{className:"input-wrapper",children:[(0,Da.jsx)("span",{className:"input-icon",children:"\ud83d\udd12"}),(0,Da.jsx)("input",{type:"password",placeholder:"Enter your password",value:r,onChange:e=>n(e.target.value),required:!0})]})]}),(0,Da.jsxs)("div",{className:"form-options",children:[(0,Da.jsxs)("label",{className:"checkbox-wrapper",children:[(0,Da.jsx)("input",{type:"checkbox",checked:s,onChange:e=>i(e.target.checked)}),(0,Da.jsx)("span",{className:"checkbox-label",children:"Remember me"})]}),(0,Da.jsx)("a",{href:"#",className:"forgot-link",children:"Forgot password?"})]}),(0,Da.jsx)("button",{type:"submit",className:"login-button",disabled:o,children:o?"Signing in...":"Sign in to AiVA"})]})]})]})})]})};function za(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}function qa(e,t){if(null==e)return{};var r,n,a=za(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var Wa={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const Va=["color","size","strokeWidth","absoluteStrokeWidth","className","children"],Ga=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),Ha=(e,t)=>{const r=(0,a.forwardRef)((r,n)=>{let{color:s="currentColor",size:i=24,strokeWidth:o=2,absoluteStrokeWidth:l,className:c="",children:d}=r,u=qa(r,Va);return(0,a.createElement)("svg",qe(qe({ref:n},Wa),{},{width:i,height:i,stroke:s,strokeWidth:l?24*Number(o)/Number(i):o,className:["lucide","lucide-".concat(Ga(e)),c].join(" ")},u),[...t.map(e=>{let[t,r]=e;return(0,a.createElement)(t,r)}),...Array.isArray(d)?d:[d]])});return r.displayName="".concat(e),r},Ka=Ha("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]),Ya=Ha("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]),Ja=Ha("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]),Xa=Ha("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),$a=()=>{const[e,t]=(0,a.useState)({balance:0,agents:0,calls:0,totalCost:0}),[r,n]=(0,a.useState)(!0);(0,a.useEffect)(()=>{s()},[]);const s=async()=>{try{const[r,n,a]=await Promise.all([Ia(),(e=30,Aa.get("/calls/stats/summary",{params:{days:e}})),Oa({is_active:!0})]);t({balance:r.data.balance,agents:a.data.agents.length,calls:n.data.total_calls,totalCost:n.data.total_cost})}catch(r){console.error("Failed to load dashboard:",r)}finally{n(!1)}var e},i=[{name:"Credit Balance",value:"$".concat(e.balance.toFixed(2)),icon:Ka,color:"bg-green-500",link:"/credits"},{name:"Active Agents",value:e.agents,icon:Ya,color:"bg-blue-500",link:"/agents"},{name:"Total Calls (30d)",value:e.calls,icon:Ja,color:"bg-purple-500",link:"/calls"},{name:"Total Cost (30d)",value:"$".concat(e.totalCost.toFixed(2)),icon:Xa,color:"bg-orange-500",link:"/calls"}];return r?(0,Da.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,Da.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):(0,Da.jsxs)("div",{className:"space-y-6",children:[(0,Da.jsxs)("div",{children:[(0,Da.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Dashboard"}),(0,Da.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Overview of your agent management system"})]}),(0,Da.jsx)("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-4",children:i.map(e=>{const t=e.icon;return(0,Da.jsx)(Ie,{to:e.link,className:"overflow-hidden bg-white rounded-lg shadow hover:shadow-md transition-shadow",children:(0,Da.jsx)("div",{className:"p-6",children:(0,Da.jsxs)("div",{className:"flex items-center",children:[(0,Da.jsx)("div",{className:"flex-shrink-0 p-3 rounded-md ".concat(e.color),children:(0,Da.jsx)(t,{className:"w-6 h-6 text-white"})}),(0,Da.jsxs)("div",{className:"flex-1 ml-5",children:[(0,Da.jsx)("p",{className:"text-sm font-medium text-gray-500 truncate",children:e.name}),(0,Da.jsx)("p",{className:"mt-1 text-2xl font-semibold text-gray-900",children:e.value})]})]})})},e.name)})}),(0,Da.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,Da.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Quick Actions"}),(0,Da.jsxs)("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-3",children:[(0,Da.jsxs)(Ie,{to:"/agents/new",className:"p-4 border-2 border-dashed border-gray-300 rounded-lg hover:border-primary-500 transition-colors text-center",children:[(0,Da.jsx)(Ya,{className:"w-8 h-8 mx-auto text-gray-400 mb-2"}),(0,Da.jsx)("span",{className:"text-sm font-medium text-gray-900",children:"Create New Agent"})]}),(0,Da.jsxs)(Ie,{to:"/credits",className:"p-4 border-2 border-dashed border-gray-300 rounded-lg hover:border-primary-500 transition-colors text-center",children:[(0,Da.jsx)(Ka,{className:"w-8 h-8 mx-auto text-gray-400 mb-2"}),(0,Da.jsx)("span",{className:"text-sm font-medium text-gray-900",children:"Manage Credits"})]}),(0,Da.jsxs)(Ie,{to:"/calls",className:"p-4 border-2 border-dashed border-gray-300 rounded-lg hover:border-primary-500 transition-colors text-center",children:[(0,Da.jsx)(Ja,{className:"w-8 h-8 mx-auto text-gray-400 mb-2"}),(0,Da.jsx)("span",{className:"text-sm font-medium text-gray-900",children:"View Call Logs"})]})]})]})]})},Qa=Ha("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),Za=Ha("PowerOff",[["path",{d:"M18.36 6.64A9 9 0 0 1 20.77 15",key:"dxknvb"}],["path",{d:"M6.16 6.16a9 9 0 1 0 12.68 12.68",key:"1x7qb5"}],["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]),es=Ha("Power",[["path",{d:"M12 2v10",key:"mnfbl"}],["path",{d:"M18.4 6.6a9 9 0 1 1-12.77.04",key:"obofu9"}]]),ts=Ha("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]),rs=Ha("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]),ns=Ha("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),as=()=>{const[e,t]=(0,a.useState)([]),[r,n]=(0,a.useState)(!0),[s,i]=(0,a.useState)("all");(0,a.useEffect)(()=>{o()},[s]);const o=async()=>{try{const e="all"!==s?{is_active:"active"===s}:{},r=await Oa(e);t(r.data.agents)}catch(e){nr.error("Failed to load agents")}finally{n(!1)}},l=async e=>{var t;if(window.confirm('Are you sure you want to delete "'.concat(e.name,'"?')))try{await(t=e.id,Aa.delete("/agents/".concat(t))),nr.success("Agent deleted"),o()}catch(r){nr.error("Failed to delete agent")}};return r?(0,Da.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,Da.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):(0,Da.jsxs)("div",{className:"space-y-6",children:[(0,Da.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Da.jsxs)("div",{children:[(0,Da.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Agents"}),(0,Da.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Manage your AI voice agents"})]}),(0,Da.jsxs)(Ie,{to:"/agents/new",className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700",children:[(0,Da.jsx)(Qa,{className:"w-5 h-5 mr-2"}),"New Agent"]})]}),(0,Da.jsxs)("div",{className:"flex space-x-4",children:[(0,Da.jsx)("button",{onClick:()=>i("all"),className:"px-4 py-2 text-sm font-medium rounded-md ".concat("all"===s?"bg-primary-100 text-primary-700":"text-gray-700 hover:bg-gray-100"),children:"All"}),(0,Da.jsx)("button",{onClick:()=>i("active"),className:"px-4 py-2 text-sm font-medium rounded-md ".concat("active"===s?"bg-primary-100 text-primary-700":"text-gray-700 hover:bg-gray-100"),children:"Active"}),(0,Da.jsx)("button",{onClick:()=>i("inactive"),className:"px-4 py-2 text-sm font-medium rounded-md ".concat("inactive"===s?"bg-primary-100 text-primary-700":"text-gray-700 hover:bg-gray-100"),children:"Inactive"})]}),(0,Da.jsx)("div",{className:"bg-white shadow overflow-hidden rounded-lg",children:(0,Da.jsx)("ul",{className:"divide-y divide-gray-200",children:0===e.length?(0,Da.jsx)("li",{className:"p-8 text-center text-gray-500",children:"No agents found. Create your first agent to get started."}):e.map(e=>(0,Da.jsx)("li",{className:"p-6 hover:bg-gray-50",children:(0,Da.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Da.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,Da.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,Da.jsx)("h3",{className:"text-lg font-medium text-gray-900 truncate",children:e.name}),(0,Da.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat(e.is_active?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"),children:e.is_active?"Active":"Inactive"})]}),(0,Da.jsxs)("div",{className:"mt-2 flex items-center text-sm text-gray-500 space-x-4",children:[(0,Da.jsxs)("span",{children:["Type: ",e.type]}),(0,Da.jsx)("span",{className:"px-2 py-0.5 rounded-full text-xs font-semibold ".concat("deepgram"===e.provider?"bg-purple-100 text-purple-800":"bg-blue-100 text-blue-800"),children:"deepgram"===e.provider?"Deepgram":"OpenAI"}),(0,Da.jsxs)("span",{children:["Voice: ",e.voice||e.deepgram_voice||"N/A"]}),(0,Da.jsxs)("span",{children:["Model: ",e.model||e.deepgram_model]})]}),(0,Da.jsx)("p",{className:"mt-2 text-sm text-gray-600 line-clamp-2",children:e.instructions})]}),(0,Da.jsxs)("div",{className:"flex items-center space-x-2 ml-4",children:[(0,Da.jsx)("button",{onClick:()=>(async e=>{try{await Ea(e.id,{is_active:!e.is_active}),nr.success("Agent ".concat(e.is_active?"deactivated":"activated")),o()}catch(t){nr.error("Failed to update agent")}})(e),className:"p-2 text-gray-400 hover:text-gray-600",title:e.is_active?"Deactivate":"Activate",children:e.is_active?(0,Da.jsx)(Za,{className:"w-5 h-5"}):(0,Da.jsx)(es,{className:"w-5 h-5"})}),(0,Da.jsx)(Ie,{to:"/agents/".concat(e.id),className:"p-2 text-gray-400 hover:text-gray-600",title:"Edit",children:(0,Da.jsx)(ts,{className:"w-5 h-5"})}),(0,Da.jsxs)(Ie,{to:"/agents/".concat(e.id,"/chat-integration"),className:"inline-flex items-center px-3 py-1.5 border border-primary-300 shadow-sm text-xs font-medium rounded text-primary-700 bg-primary-50 hover:bg-primary-100",title:"Chat Integration",children:[(0,Da.jsx)(rs,{className:"w-3 h-3 mr-1"}),"Chat"]}),(0,Da.jsxs)("button",{onClick:()=>l(e),className:"inline-flex items-center px-3 py-1.5 border border-red-300 shadow-sm text-xs font-medium rounded text-red-700 bg-red-50 hover:bg-red-100",children:[(0,Da.jsx)(ns,{className:"w-3 h-3 mr-1"}),"Delete"]}),(0,Da.jsx)("button",{onClick:()=>l(e),className:"p-2 text-red-400 hover:text-red-600",title:"Delete",children:(0,Da.jsx)(ns,{className:"w-5 h-5"})})]})]})},e.id))})})]})},ss=Ha("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),is=Ha("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]),os=Ha("GitBranch",[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]]),ls=Ha("Volume2",[["polygon",{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5",key:"16drj5"}],["path",{d:"M15.54 8.46a5 5 0 0 1 0 7.07",key:"ltjumu"}],["path",{d:"M19.07 4.93a10 10 0 0 1 0 14.14",key:"1kegas"}]]),cs=Ha("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]),ds=Ha("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]),us=Ha("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]),ps=Ha("Shirt",[["path",{d:"M20.38 3.46 16 2a4 4 0 0 1-8 0L3.62 3.46a2 2 0 0 0-1.34 2.23l.58 3.47a1 1 0 0 0 .99.84H6v10c0 1.1.9 2 2 2h8a2 2 0 0 0 2-2V10h2.15a1 1 0 0 0 .99-.84l.58-3.47a2 2 0 0 0-1.34-2.23z",key:"1wgbhj"}]]),ms=Ha("Laptop",[["path",{d:"M20 16V7a2 2 0 0 0-2-2H6a2 2 0 0 0-2 2v9m16 0H4m16 0 1.28 2.55a1 1 0 0 1-.9 1.45H3.62a1 1 0 0 1-.9-1.45L4 16",key:"tarvll"}]]),hs=Ha("Sofa",[["path",{d:"M20 9V6a2 2 0 0 0-2-2H6a2 2 0 0 0-2 2v3",key:"1dgpiv"}],["path",{d:"M2 11v5a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-5a2 2 0 0 0-4 0v2H6v-2a2 2 0 0 0-4 0Z",key:"u5qfb7"}],["path",{d:"M4 18v2",key:"jwo5n2"}],["path",{d:"M20 18v2",key:"1ar1qi"}],["path",{d:"M12 4v9",key:"oqhhn3"}]]),fs=Ha("Utensils",[["path",{d:"M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2",key:"cjf0a3"}],["path",{d:"M7 2v20",key:"1473qp"}],["path",{d:"M21 15V2v0a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7",key:"1ogz0v"}]]),gs=Ha("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),xs=Ha("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]),ys=e=>Ma.get("/knowledge",{params:e}),vs=e=>Ma.get("/knowledge/".concat(e)),bs=(e,t,r)=>Ma.post("/knowledge/".concat(e,"/documents"),t,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:r}),js=e=>Ma.post("/knowledge/search",e),ws=e=>Ma.get("/knowledge/".concat(e,"/stats")),Ns=async(e,t,r)=>{try{const n={headers:{"Content-Type":"multipart/form-data"}};r&&(n.onUploadProgress=r);const a=await Ma.post("/knowledge/".concat(e,"/images/upload"),t,n);return a.data.data||a.data}catch(n){throw console.error("Upload image error:",n),n}},ks=()=>Ma.get("/conversation-strategy/presets"),Ss=[{label:"\u26a1 Groq (Fastest & Cheapest)",models:[{value:"llama-3.3-70b-versatile",label:"Llama 3.3 70B",cost:"$0.59 / $0.79",badge:"\ud83d\udd25 Reliable"},{value:"llama-3.1-8b-instant",label:"Llama 3.1 8B Instant",cost:"$0.05 / $0.08",badge:"\ud83d\udcb0 Cheapest"},{value:"meta-llama/llama-4-scout-17b-16e-instruct",label:"Llama 4 Scout (Preview)",cost:"$0.11 / $0.34",badge:"\ud83c\udd95 Preview"},{value:"meta-llama/llama-4-maverick-17b-128e-instruct",label:"Llama 4 Maverick (Preview)",cost:"$0.20 / $0.60",badge:"\ud83c\udd95 Preview"},{value:"qwen/qwen3-32b",label:"Qwen3 32B",cost:"$0.29 / $0.59",badge:"\ud83e\udde0 Reasoning"},{value:"openai/gpt-oss-120b",label:"GPT-OSS 120B",cost:"$0.15 / $0.60",badge:"\ud83c\udd95 OpenAI OSS"},{value:"openai/gpt-oss-20b",label:"GPT-OSS 20B",cost:"$0.075 / $0.30",badge:"\u26a1 Fast"}]},{label:"\ud83e\udd16 OpenAI",models:[{value:"gpt-4o-mini",label:"GPT-4o Mini",cost:"$0.15 / $0.60",badge:"\u2b50 Default"},{value:"gpt-4o",label:"GPT-4o",cost:"$2.50 / $10.00",badge:"\ud83c\udfc6 Best Quality"},{value:"gpt-4-turbo",label:"GPT-4 Turbo",cost:"$10.00 / $30.00"},{value:"o1-mini",label:"o1 Mini (Reasoning)",cost:"$3.00 / $12.00"},{value:"o1",label:"o1 (Advanced Reasoning)",cost:"$15.00 / $60.00"}]},{label:"\ud83e\udde0 Anthropic (Claude)",models:[{value:"claude-3-5-haiku-20241022",label:"Claude 3.5 Haiku",cost:"$0.80 / $4.00",badge:"\u26a1 Fast"},{value:"claude-3-5-sonnet-latest",label:"Claude 3.5 Sonnet",cost:"$3.00 / $15.00",badge:"\u2728 Great Quality"},{value:"claude-3-opus-20240229",label:"Claude 3 Opus",cost:"$15.00 / $75.00"}]},{label:"\ud83c\udde8\ud83c\uddf3 DeepSeek (Very Cheap)",models:[{value:"deepseek-chat",label:"DeepSeek Chat",cost:"$0.14 / $0.28",badge:"\ud83d\udcb0 Budget"},{value:"deepseek-reasoner",label:"DeepSeek Reasoner (R1)",cost:"$0.55 / $2.19",badge:"\ud83e\udde0 Reasoning"}]},{label:"\ud83c\udf19 Moonshot/Kimi (Chinese AI)",models:[{value:"moonshot-v1-8k",label:"Moonshot v1 8K",cost:"$0.17 / $0.17"},{value:"moonshot-v1-32k",label:"Moonshot v1 32K",cost:"$0.34 / $0.34"},{value:"moonshot-v1-128k",label:"Moonshot v1 128K",cost:"$0.85 / $0.85",badge:"\ud83d\udcda Long Context"}]}],_s=(Ss.flatMap(e=>e.models),()=>{var e,t,r,n,s,i,o,l,c,d,u,p,m,h,f,g,x,y,v,b,j,w,N,k,S,_,C,A,O,P,E,T,I,M,D,R,F,L,B;const{id:U}=re(),z=ee(),[q,W]=(0,a.useState)(!1),[V,G]=(0,a.useState)(!1),[H,K]=(0,a.useState)(!1),[Y,J]=(0,a.useState)([]),[X,$]=(0,a.useState)([]),[Q,Z]=(0,a.useState)(!1),[te,ne]=(0,a.useState)(!1),[ae,se]=(0,a.useState)(!1),[ie,oe]=(0,a.useState)(null),[le,ce]=(0,a.useState)({}),[de,ue]=(0,a.useState)(null),[pe,me]=(0,a.useState)(!1),[he,fe]=(0,a.useState)({name:"",type:"sales",instructions:"",voice:"shimmer",language:"ur",model:"gpt-4o-mini-realtime-preview-2024-12-17",model:"gpt-4o-mini",provider:"openai",deepgram_model:"nova-2",deepgram_voice:"aura-asteria-en",deepgram_language:"en",temperature:.6,max_tokens:4096,vad_threshold:.5,silence_duration_ms:500,greeting:"",kb_id:null}),[ge,xe]=(0,a.useState)([]),[ye,ve]=(0,a.useState)(!1),[be,je]=(0,a.useState)(null),[we,Ne]=(0,a.useState)(!1),[ke,Se]=(0,a.useState)(!1),[_e,Ce]=(0,a.useState)(""),[Ae,Oe]=(0,a.useState)(!1),[Pe,Ee]=(0,a.useState)(0),[Te,Me]=(0,a.useState)({name:"",description:"",execution_mode:"sync",handler_type:"inline",api_endpoint:"",api_method:"POST",api_headers:[],api_body_type:"json",api_body:null,timeout_ms:3e4,retries:2,skip_ssl_verify:!1,parameters:{type:"object",properties:{},required:[]}}),[De,Re]=(0,a.useState)({key:"",value:""}),[Fe,Le]=(0,a.useState)(!1),[Ue,ze]=(0,a.useState)([]),[Ve,Ge]=(0,a.useState)(""),[He,Ke]=(0,a.useState)(!1),[Ye,Je]=(0,a.useState)({key:"",value:"",type:"text"}),[Xe,$e]=(0,a.useState)(""),[Qe,Ze]=(0,a.useState)(!1),[et,tt]=(0,a.useState)({name:"",type:"string",description:"",required:!1,enum:"",properties:"",items:""}),[rt,nt]=(0,a.useState)(!1);(0,a.useEffect)(()=>{at()},[]);const at=async()=>{try{Z(!0);const e=await ks();e.success&&$(e.data)}catch(e){console.error("Error loading strategy presets:",e)}finally{Z(!1)}},st=(e,t)=>{var r;fe(qe(qe({},he),{},{conversation_strategy:qe(qe({},he.conversation_strategy),{},{preference_collection:qe(qe({},(null===(r=he.conversation_strategy)||void 0===r?void 0:r.preference_collection)||{}),{},{[e]:t})})}))},it=(e,t,r)=>{var n,a,s;const i=[...(null===(n=he.conversation_strategy)||void 0===n||null===(a=n.preference_collection)||void 0===a?void 0:a.preferences_to_collect)||[]];i[e]=qe(qe({},i[e]),{},{[t]:r}),fe(qe(qe({},he),{},{conversation_strategy:qe(qe({},he.conversation_strategy),{},{preference_collection:qe(qe({},null===(s=he.conversation_strategy)||void 0===s?void 0:s.preference_collection),{},{preferences_to_collect:i})})}))};(0,a.useEffect)(()=>{(async()=>{try{var e,t;const r=await ys();J((null===(e=r.data)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.knowledge_bases)||[])}catch(r){console.error("Failed to load knowledge bases:",r),J([])}})()},[]),(0,a.useEffect)(()=>{U&&ot()},[U]);const ot=async()=>{try{W(!0);const e=(await Pa(U)).data.agent;"openai"===e.provider?fe(qe(qe({},e),{},{voice:e.voice||"shimmer",model:e.model||"gpt-4o-mini-realtime-preview-2024-12-17",chat_model:e.chat_model||"gpt-4o-mini",language:e.language||"en",kb_id:e.kb_id||null})):"deepgram"===e.provider?fe(qe(qe({},e),{},{deepgram_model:e.deepgram_model||"nova-2",deepgram_voice:e.deepgram_voice||"shimmer",deepgram_language:e.deepgram_language||"en",chat_model:e.chat_model||"gpt-4o-mini",kb_id:e.kb_id||null})):"custom"===e.provider?fe(qe(qe({},e),{},{tts_provider:e.tts_provider||"uplift",custom_voice:e.custom_voice||"v_meklc281",language_hints:e.language_hints||["ur","en"],llm_model:e.llm_model||"llama-3.3-70b-versatile",chat_model:e.chat_model||"gpt-4o-mini",kb_id:e.kb_id||null})):"intent-ivr"===e.provider?fe(qe(qe({},e),{},{tts_provider:e.tts_provider||"uplift",custom_voice:e.custom_voice||"ur-PK-female",language_hints:e.language_hints||["ur","en"],chat_model:e.chat_model||"gpt-4o-mini",kb_id:e.kb_id||null})):fe(qe(qe({},e),{},{provider:"openai",voice:e.voice||"shimmer",chat_model:e.chat_model||"gpt-4o-mini",model:e.model||"gpt-4o-mini-realtime-preview-2024-12-17",language:e.language||"en",kb_id:e.kb_id||null}));const t=await Ta(U);xe(t.data.functions||[])}catch(e){nr.error("Failed to load agent"),console.error(e)}finally{W(!1)}},lt=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(e){je(e);let t=e.api_body_type||"json",r=[],n="";e.api_body&&("json"===t?n="string"===typeof e.api_body?e.api_body:JSON.stringify(e.api_body,null,2):"form-data"!==t&&"urlencoded"!==t||(r=Object.entries(e.api_body).map(e=>{let[t,r]=e;return{key:t,value:r,type:"text"}}))),Me({name:e.name,description:e.description,execution_mode:e.execution_mode,handler_type:e.handler_type,api_endpoint:e.api_endpoint||"",api_method:e.api_method||"POST",api_headers:Array.isArray(e.api_headers)?e.api_headers:e.api_headers?Object.entries(e.api_headers).map(e=>{let[t,r]=e;return{key:t,value:r}}):[],api_body_type:t,api_body:e.api_body,timeout_ms:e.timeout_ms,retries:e.retries,skip_ssl_verify:e.skip_ssl_verify||!1,parameters:e.parameters}),ze(r),Ge(n),$e(JSON.stringify(e.parameters,null,2))}else je(null),Me({name:"",description:"",execution_mode:"sync",handler_type:"inline",api_endpoint:"",api_method:"POST",api_headers:[],api_body_type:"json",api_body:null,timeout_ms:3e4,retries:2,skip_ssl_verify:!1,parameters:{type:"object",properties:{},required:[]}}),ze([]),Ge(""),$e(JSON.stringify({type:"object",properties:{},required:[]},null,2));ve(!0)},ct=async e=>{if(window.confirm("Delete this function?"))try{await(e=>Aa.delete("/functions/".concat(e)))(e),nr.success("Function deleted"),ot()}catch(t){nr.error("Failed to delete function")}},dt=()=>{se(!1),oe(null),ce({}),ue(null)},ut=e=>{const t=Te.api_headers.filter(e=>"content-type"!==e.key.toLowerCase());let r={key:"Content-Type",value:""};"json"===e?r.value="application/json":"urlencoded"===e?r.value="application/x-www-form-urlencoded":"form-data"===e&&(r.value="multipart/form-data"),r.value?Me(qe(qe({},Te),{},{api_body_type:e,api_headers:[...t,r]})):Me(qe(qe({},Te),{},{api_body_type:e}))},pt=e=>{const t={checkBalance:{name:"check_balance",description:"Check customer account balance",execution_mode:"sync",handler_type:"api",api_endpoint:"https://api.example.com/balance/{{customer_id}}",api_method:"GET",api_headers:[{key:"Authorization",value:"Bearer YOUR_API_KEY"}],api_body_type:"none",api_body:null,timeout_ms:3e4,retries:2,parameters:{type:"object",properties:{customer_id:{type:"string",description:"Customer unique identifier"}},required:["customer_id"]}},bookAppointment:{name:"book_appointment",description:"Book an appointment for the customer",execution_mode:"async",handler_type:"api",api_endpoint:"https://api.example.com/appointments",api_method:"POST",api_headers:[{key:"Authorization",value:"Bearer YOUR_API_KEY"},{key:"Content-Type",value:"application/json"}],api_body_type:"json",api_body:{customer_id:"{{customer_id}}",date:"{{date}}",time:"{{time}}",service_type:"{{service_type}}"},timeout_ms:3e4,retries:2,parameters:{type:"object",properties:{customer_id:{type:"string",description:"Customer unique identifier"},date:{type:"string",description:"Appointment date in YYYY-MM-DD format"},time:{type:"string",description:"Appointment time in HH:MM format"},service_type:{type:"string",description:"Type of service",enum:["consultation","followup","emergency"]}},required:["customer_id","date","time"]}},sendSMS:{name:"send_sms",description:"Send SMS to customer",execution_mode:"async",handler_type:"api",api_endpoint:"https://api.example.com/sms/send",api_method:"POST",api_headers:[{key:"Authorization",value:"Bearer YOUR_API_KEY"},{key:"Content-Type",value:"application/x-www-form-urlencoded"}],api_body_type:"urlencoded",api_body:{to:"{{phone_number}}",message:"{{message}}",from:"YourCompany"},timeout_ms:15e3,retries:3,parameters:{type:"object",properties:{phone_number:{type:"string",description:"Customer phone number"},message:{type:"string",description:"SMS message content"}},required:["phone_number","message"]}},transferCall:{name:"transfer_call",description:"Transfer call to another department",execution_mode:"sync",handler_type:"inline",api_endpoint:"",api_method:"POST",api_headers:[],api_body_type:"none",api_body:null,timeout_ms:5e3,retries:1,parameters:{type:"object",properties:{department:{type:"string",description:"Department to transfer to",enum:["sales","support","billing","technical"]},reason:{type:"string",description:"Reason for transfer"}},required:["department"]}}}[e];t&&(Me(t),$e(JSON.stringify(t.parameters,null,2)),"json"===t.api_body_type?(Ge(JSON.stringify(t.api_body,null,2)),ze([])):"form-data"===t.api_body_type||"urlencoded"===t.api_body_type?(ze(Object.entries(t.api_body).map(e=>{let[t,r]=e;return{key:t,value:r,type:"text"}})),Ge("")):(Ge(""),ze([])))};return q?(0,Da.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,Da.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):(0,Da.jsxs)("div",{className:"space-y-6",children:[(0,Da.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Da.jsxs)("div",{children:[(0,Da.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:U?"Edit Agent":"Create Agent"}),(0,Da.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Configure your AI voice agent"})]}),(0,Da.jsxs)("div",{className:"flex space-x-3",children:[(0,Da.jsxs)("button",{onClick:()=>z("/agents"),className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50",children:[(0,Da.jsx)(ss,{className:"w-5 h-5 mr-2"}),"Cancel"]}),(0,Da.jsxs)("button",{onClick:async()=>{if(!he.name||!he.instructions)return void nr.error("Name and instructions are required");const e=qe(qe({},he),{},{conversation_strategy:he.conversation_strategy||{preference_collection:{strategy:"immediate_search",preferences_to_collect:[],min_preferences_before_search:0,max_questions:0},knowledge_search:{strategy:"auto",search_threshold:"medium",search_types:["text","image","product"]}}});G(!0);try{if(U)await Ea(U,e),nr.success("Agent updated");else{const t=await(e=>Aa.post("/agents",e))(e);nr.success("Agent created"),z("/agents/".concat(t.data.agent.id))}}catch(n){var t,r;nr.error((null===(t=n.response)||void 0===t||null===(r=t.data)||void 0===r?void 0:r.error)||"Failed to save agent")}finally{G(!1)}},disabled:V,className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700 disabled:opacity-50",children:[(0,Da.jsx)(is,{className:"w-5 h-5 mr-2"}),V?"Saving...":"Save"]})]})]}),(0,Da.jsxs)("div",{className:"bg-white shadow rounded-lg",children:[(0,Da.jsx)("div",{className:"px-6 py-5 border-b border-gray-200",children:(0,Da.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Basic Information"})}),(0,Da.jsxs)("div",{className:"px-6 py-5 space-y-6",children:[(0,Da.jsxs)("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2",children:[(0,Da.jsxs)("div",{children:[(0,Da.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Agent Name"}),(0,Da.jsx)("input",{type:"text",value:he.name,onChange:e=>fe(qe(qe({},he),{},{name:e.target.value})),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-primary-500 focus:border-primary-500",placeholder:"Sales Assistant"})]}),(0,Da.jsxs)("div",{children:[(0,Da.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Type"}),(0,Da.jsxs)("select",{value:he.type,onChange:e=>fe(qe(qe({},he),{},{type:e.target.value})),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-primary-500 focus:border-primary-500",children:[(0,Da.jsx)("option",{value:"sales",children:"Sales"}),(0,Da.jsx)("option",{value:"support",children:"Support"}),(0,Da.jsx)("option",{value:"banking",children:"Banking"}),(0,Da.jsx)("option",{value:"custom",children:"Custom"})]})]}),(0,Da.jsxs)("div",{children:[(0,Da.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Provider"}),(0,Da.jsxs)("select",{value:he.provider||"openai",onChange:e=>{var t;"openai"===(t=e.target.value)?fe(qe(qe({},he),{},{provider:t,voice:he.voice||"shimmer",model:he.model||"gpt-4o-mini-realtime-preview-2024-12-17",language:he.language||"en"})):"deepgram"===t?fe(qe(qe({},he),{},{provider:t,deepgram_model:he.deepgram_model||"nova-2",deepgram_voice:he.deepgram_voice||"shimmer",deepgram_language:he.deepgram_language||"en"})):"custom"===t?fe(qe(qe({},he),{},{provider:t,tts_provider:he.tts_provider||"uplift",custom_voice:he.custom_voice||"v_meklc281",language_hints:he.language_hints||["ur","en"],llm_model:he.llm_model||"llama-3.3-70b-versatile"})):"intent-ivr"===t&&fe(qe(qe({},he),{},{provider:t,tts_provider:he.tts_provider||"uplift",custom_voice:he.custom_voice||"ur-PK-female",language_hints:he.language_hints||["ur","en"]}))},className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-primary-500 focus:border-primary-500",children:[(0,Da.jsx)("option",{value:"openai",children:"OpenAI Realtime API"}),(0,Da.jsx)("option",{value:"deepgram",children:"Deepgram"}),(0,Da.jsx)("option",{value:"custom",children:"Custom (Intellicon AiVA)"}),(0,Da.jsx)("option",{value:"intent-ivr",children:"Intent IVR (Pre-recorded Audio)"})]}),(0,Da.jsx)("p",{className:"mt-1 text-xs text-gray-500",children:"deepgram"===he.provider?"Deepgram provides more natural sounding voices":"custom"===he.provider?"Custom provider using Soniox STT + Groq LLM + Uplift TTS":"intent-ivr"===he.provider?"Intent-based IVR with pre-recorded/cached audio (lowest cost)":"OpenAI Realtime provides integrated voice experience"})]}),"openai"===he.provider&&(0,Da.jsxs)("div",{children:[(0,Da.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Voice"}),(0,Da.jsxs)("select",{value:he.voice,onChange:e=>fe(qe(qe({},he),{},{voice:e.target.value})),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-primary-500 focus:border-primary-500",children:[(0,Da.jsx)("option",{value:"alloy",children:"Alloy"}),(0,Da.jsx)("option",{value:"ash",children:"Ash"}),(0,Da.jsx)("option",{value:"ballad",children:"Ballad"}),(0,Da.jsx)("option",{value:"coral",children:"Coral"}),(0,Da.jsx)("option",{value:"echo",children:"Echo"}),(0,Da.jsx)("option",{value:"sage",children:"Sage"}),(0,Da.jsx)("option",{value:"shimmer",children:"Shimmer"}),(0,Da.jsx)("option",{value:"verse",children:"Verse"}),(0,Da.jsx)("option",{value:"marin",children:"Marin"}),(0,Da.jsx)("option",{value:"cedar",children:"Cedar"})]})]}),"deepgram"===he.provider&&(0,Da.jsxs)(Da.Fragment,{children:[(0,Da.jsxs)("div",{children:[(0,Da.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Speech-to-Text (STT) Model"}),(0,Da.jsxs)("select",{value:he.deepgram_model||"nova-2",onChange:e=>fe(qe(qe({},he),{},{deepgram_model:e.target.value})),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-primary-500 focus:border-primary-500",children:[(0,Da.jsxs)("optgroup",{label:"Nova-3 (Recommended - Best Accuracy)",children:[(0,Da.jsx)("option",{value:"nova-3",children:"Nova-3 General"}),(0,Da.jsx)("option",{value:"nova-3-general",children:"Nova-3 General (Explicit)"}),(0,Da.jsx)("option",{value:"nova-3-phonecall",children:"Nova-3 Phone Call"}),(0,Da.jsx)("option",{value:"nova-3-medical",children:"Nova-3 Medical"}),(0,Da.jsx)("option",{value:"nova-3-finance",children:"Nova-3 Finance"}),(0,Da.jsx)("option",{value:"nova-3-conversationalai",children:"Nova-3 Conversational AI"}),(0,Da.jsx)("option",{value:"nova-3-voicemail",children:"Nova-3 Voicemail"}),(0,Da.jsx)("option",{value:"nova-3-video",children:"Nova-3 Video"}),(0,Da.jsx)("option",{value:"nova-3-meeting",children:"Nova-3 Meeting"}),(0,Da.jsx)("option",{value:"nova-3-drive_thru",children:"Nova-3 Drive-Thru"}),(0,Da.jsx)("option",{value:"nova-3-automotive",children:"Nova-3 Automotive"})]}),(0,Da.jsxs)("optgroup",{label:"Nova-2 (Good for Non-English)",children:[(0,Da.jsx)("option",{value:"nova-2",children:"Nova-2 General"}),(0,Da.jsx)("option",{value:"nova-2-general",children:"Nova-2 General (Explicit)"}),(0,Da.jsx)("option",{value:"nova-2-phonecall",children:"Nova-2 Phone Call"}),(0,Da.jsx)("option",{value:"nova-2-meeting",children:"Nova-2 Meeting"}),(0,Da.jsx)("option",{value:"nova-2-voicemail",children:"Nova-2 Voicemail"}),(0,Da.jsx)("option",{value:"nova-2-finance",children:"Nova-2 Finance"}),(0,Da.jsx)("option",{value:"nova-2-conversationalai",children:"Nova-2 Conversational AI"}),(0,Da.jsx)("option",{value:"nova-2-video",children:"Nova-2 Video"}),(0,Da.jsx)("option",{value:"nova-2-medical",children:"Nova-2 Medical"}),(0,Da.jsx)("option",{value:"nova-2-drivethru",children:"Nova-2 Drive-Thru"}),(0,Da.jsx)("option",{value:"nova-2-automotive",children:"Nova-2 Automotive"})]}),(0,Da.jsx)("optgroup",{label:"Flux (Voice Agents - NEW)",children:(0,Da.jsx)("option",{value:"flux",children:"Flux (Conversational Flow)"})}),(0,Da.jsxs)("optgroup",{label:"Legacy Models",children:[(0,Da.jsx)("option",{value:"nova",children:"Nova-1"}),(0,Da.jsx)("option",{value:"enhanced",children:"Enhanced General"}),(0,Da.jsx)("option",{value:"enhanced-general",children:"Enhanced General (Explicit)"}),(0,Da.jsx)("option",{value:"enhanced-phonecall",children:"Enhanced Phone Call"}),(0,Da.jsx)("option",{value:"enhanced-meeting",children:"Enhanced Meeting"}),(0,Da.jsx)("option",{value:"base",children:"Base General"}),(0,Da.jsx)("option",{value:"base-general",children:"Base General (Explicit)"}),(0,Da.jsx)("option",{value:"base-phonecall",children:"Base Phone Call"}),(0,Da.jsx)("option",{value:"base-meeting",children:"Base Meeting"})]}),(0,Da.jsxs)("optgroup",{label:"Whisper (Slower, Limited)",children:[(0,Da.jsx)("option",{value:"whisper-tiny",children:"Whisper Tiny"}),(0,Da.jsx)("option",{value:"whisper-base",children:"Whisper Base"}),(0,Da.jsx)("option",{value:"whisper-small",children:"Whisper Small"}),(0,Da.jsx)("option",{value:"whisper-medium",children:"Whisper Medium"}),(0,Da.jsx)("option",{value:"whisper-large",children:"Whisper Large"})]})]}),(0,Da.jsx)("p",{className:"mt-1 text-xs text-gray-500",children:"Nova-3 offers best accuracy. Flux is optimized for voice agents with built-in turn detection."})]}),(0,Da.jsxs)("div",{children:[(0,Da.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"STT Language"}),(0,Da.jsxs)("select",{value:he.deepgram_language||"en",onChange:e=>fe(qe(qe({},he),{},{deepgram_language:e.target.value})),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-primary-500 focus:border-primary-500",children:[(0,Da.jsx)("optgroup",{label:"Multilingual (Nova-2 & Nova-3)",children:(0,Da.jsx)("option",{value:"multi",children:"\ud83c\udf0d Multi (10 Languages - Code Switching)"})}),(0,Da.jsxs)("optgroup",{label:"Common Languages",children:[(0,Da.jsx)("option",{value:"en",children:"\ud83c\uddfa\ud83c\uddf8 English"}),(0,Da.jsx)("option",{value:"en-US",children:"\ud83c\uddfa\ud83c\uddf8 English (US)"}),(0,Da.jsx)("option",{value:"en-GB",children:"\ud83c\uddec\ud83c\udde7 English (UK)"}),(0,Da.jsx)("option",{value:"en-AU",children:"\ud83c\udde6\ud83c\uddfa English (Australia)"}),(0,Da.jsx)("option",{value:"en-NZ",children:"\ud83c\uddf3\ud83c\uddff English (New Zealand)"}),(0,Da.jsx)("option",{value:"en-IN",children:"\ud83c\uddee\ud83c\uddf3 English (India)"}),(0,Da.jsx)("option",{value:"es",children:"\ud83c\uddea\ud83c\uddf8 Spanish"}),(0,Da.jsx)("option",{value:"es-419",children:"\ud83c\uddf2\ud83c\uddfd Spanish (Latin America)"}),(0,Da.jsx)("option",{value:"fr",children:"\ud83c\uddeb\ud83c\uddf7 French"}),(0,Da.jsx)("option",{value:"fr-CA",children:"\ud83c\udde8\ud83c\udde6 French (Canada)"}),(0,Da.jsx)("option",{value:"de",children:"\ud83c\udde9\ud83c\uddea German"}),(0,Da.jsx)("option",{value:"hi",children:"\ud83c\uddee\ud83c\uddf3 Hindi"}),(0,Da.jsx)("option",{value:"pt",children:"\ud83c\uddf5\ud83c\uddf9 Portuguese"}),(0,Da.jsx)("option",{value:"pt-BR",children:"\ud83c\udde7\ud83c\uddf7 Portuguese (Brazil)"}),(0,Da.jsx)("option",{value:"ru",children:"\ud83c\uddf7\ud83c\uddfa Russian"}),(0,Da.jsx)("option",{value:"ja",children:"\ud83c\uddef\ud83c\uddf5 Japanese"}),(0,Da.jsx)("option",{value:"it",children:"\ud83c\uddee\ud83c\uddf9 Italian"}),(0,Da.jsx)("option",{value:"nl",children:"\ud83c\uddf3\ud83c\uddf1 Dutch"}),(0,Da.jsx)("option",{value:"zh",children:"\ud83c\udde8\ud83c\uddf3 Chinese (Simplified)"}),(0,Da.jsx)("option",{value:"zh-CN",children:"\ud83c\udde8\ud83c\uddf3 Chinese (Mandarin)"}),(0,Da.jsx)("option",{value:"zh-TW",children:"\ud83c\uddf9\ud83c\uddfc Chinese (Taiwan)"}),(0,Da.jsx)("option",{value:"ko",children:"\ud83c\uddf0\ud83c\uddf7 Korean"}),(0,Da.jsx)("option",{value:"tr",children:"\ud83c\uddf9\ud83c\uddf7 Turkish"}),(0,Da.jsx)("option",{value:"ar",children:"\ud83c\uddf8\ud83c\udde6 Arabic"})]}),(0,Da.jsxs)("optgroup",{label:"European Languages",children:[(0,Da.jsx)("option",{value:"pl",children:"\ud83c\uddf5\ud83c\uddf1 Polish"}),(0,Da.jsx)("option",{value:"uk",children:"\ud83c\uddfa\ud83c\udde6 Ukrainian"}),(0,Da.jsx)("option",{value:"sv",children:"\ud83c\uddf8\ud83c\uddea Swedish"}),(0,Da.jsx)("option",{value:"da",children:"\ud83c\udde9\ud83c\uddf0 Danish"}),(0,Da.jsx)("option",{value:"no",children:"\ud83c\uddf3\ud83c\uddf4 Norwegian"}),(0,Da.jsx)("option",{value:"fi",children:"\ud83c\uddeb\ud83c\uddee Finnish"}),(0,Da.jsx)("option",{value:"el",children:"\ud83c\uddec\ud83c\uddf7 Greek"}),(0,Da.jsx)("option",{value:"cs",children:"\ud83c\udde8\ud83c\uddff Czech"}),(0,Da.jsx)("option",{value:"ro",children:"\ud83c\uddf7\ud83c\uddf4 Romanian"}),(0,Da.jsx)("option",{value:"hu",children:"\ud83c\udded\ud83c\uddfa Hungarian"}),(0,Da.jsx)("option",{value:"bg",children:"\ud83c\udde7\ud83c\uddec Bulgarian"})]}),(0,Da.jsxs)("optgroup",{label:"Asian Languages",children:[(0,Da.jsx)("option",{value:"th",children:"\ud83c\uddf9\ud83c\udded Thai"}),(0,Da.jsx)("option",{value:"vi",children:"\ud83c\uddfb\ud83c\uddf3 Vietnamese"}),(0,Da.jsx)("option",{value:"id",children:"\ud83c\uddee\ud83c\udde9 Indonesian"}),(0,Da.jsx)("option",{value:"ms",children:"\ud83c\uddf2\ud83c\uddfe Malay"}),(0,Da.jsx)("option",{value:"ta",children:"\ud83c\uddee\ud83c\uddf3 Tamil"})]}),(0,Da.jsxs)("optgroup",{label:"Other Languages",children:[(0,Da.jsx)("option",{value:"he",children:"\ud83c\uddee\ud83c\uddf1 Hebrew"}),(0,Da.jsx)("option",{value:"ur",children:"\ud83c\uddf5\ud83c\uddf0 Urdu"})]})]}),(0,Da.jsx)("p",{className:"mt-1 text-xs text-gray-500",children:"multi"===he.deepgram_language?"\ud83c\udf0d Multi supports: English, Spanish, French, German, Hindi, Russian, Portuguese, Japanese, Italian, Dutch":'Select language for speech recognition. Use "Multi" for code-switching conversations.'})]}),(0,Da.jsxs)("div",{children:[(0,Da.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Text-to-Speech (TTS) Voice"}),(0,Da.jsxs)("select",{value:he.deepgram_voice||"shimmer",onChange:e=>fe(qe(qe({},he),{},{deepgram_voice:e.target.value})),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-primary-500 focus:border-primary-500",children:[(0,Da.jsxs)("optgroup",{label:"OpenAI Voices (Used with Deepgram STT)",children:[(0,Da.jsx)("option",{value:"alloy",children:"Alloy (Neutral)"}),(0,Da.jsx)("option",{value:"ash",children:"Ash (Warm Male)"}),(0,Da.jsx)("option",{value:"ballad",children:"Ballad (Expressive)"}),(0,Da.jsx)("option",{value:"coral",children:"Coral (Friendly Female)"}),(0,Da.jsx)("option",{value:"echo",children:"Echo (Professional Male)"}),(0,Da.jsx)("option",{value:"sage",children:"Sage (Calm Female)"}),(0,Da.jsx)("option",{value:"shimmer",children:"Shimmer (Clear Female)"}),(0,Da.jsx)("option",{value:"verse",children:"Verse (Conversational)"})]}),(0,Da.jsxs)("optgroup",{label:"Deepgram Aura Voices (Alternative)",children:[(0,Da.jsx)("option",{value:"aura-asteria-en",children:"Asteria (English - Female)"}),(0,Da.jsx)("option",{value:"aura-luna-en",children:"Luna (English - Female)"}),(0,Da.jsx)("option",{value:"aura-stella-en",children:"Stella (English - Female)"}),(0,Da.jsx)("option",{value:"aura-athena-en",children:"Athena (English - Female)"}),(0,Da.jsx)("option",{value:"aura-hera-en",children:"Hera (English - Female)"}),(0,Da.jsx)("option",{value:"aura-orion-en",children:"Orion (English - Male)"}),(0,Da.jsx)("option",{value:"aura-arcas-en",children:"Arcas (English - Male)"}),(0,Da.jsx)("option",{value:"aura-perseus-en",children:"Perseus (English - Male)"}),(0,Da.jsx)("option",{value:"aura-angus-en",children:"Angus (English - Irish Male)"}),(0,Da.jsx)("option",{value:"aura-orpheus-en",children:"Orpheus (English - Male)"}),(0,Da.jsx)("option",{value:"aura-helios-en",children:"Helios (English - Male)"}),(0,Da.jsx)("option",{value:"aura-zeus-en",children:"Zeus (English - Male)"})]})]}),(0,Da.jsx)("p",{className:"mt-1 text-xs text-gray-500",children:"Currently using OpenAI TTS with Deepgram STT for best quality. Deepgram Aura voices coming soon."})]})]}),"custom"===he.provider&&(0,Da.jsxs)("div",{className:"col-span-2 space-y-4 p-4 bg-gradient-to-r from-purple-50 to-indigo-50 rounded-lg border border-purple-200",children:[(0,Da.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,Da.jsx)("span",{className:"text-2xl",children:"\ud83c\udfaf"}),(0,Da.jsx)("h4",{className:"font-semibold text-purple-900",children:"Custom Voice Provider Settings"})]}),(0,Da.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,Da.jsxs)("div",{children:[(0,Da.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Text-to-Speech Provider"}),(0,Da.jsxs)("select",{value:he.tts_provider||"uplift",onChange:e=>{const t=e.target.value;let r="ur-PK-female";"azure"===t&&(r="ur-PK-UzmaNeural"),"openai"===t&&(r="nova"),fe(qe(qe({},he),{},{tts_provider:t,custom_voice:r}))},className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-purple-500 focus:border-purple-500",children:[(0,Da.jsx)("option",{value:"uplift",children:"\ud83c\uddf5\ud83c\uddf0 Uplift AI (Pakistani Languages)"}),(0,Da.jsx)("option",{value:"azure",children:"\u2601\ufe0f Azure TTS (Microsoft)"}),(0,Da.jsx)("option",{value:"openai",children:"\ud83e\udd16 OpenAI TTS (High Quality)"})]}),(0,Da.jsx)("p",{className:"mt-1 text-xs text-gray-500",children:"uplift"===he.tts_provider?"Best for Urdu/Punjabi - ~$0.004/min":"openai"===he.tts_provider?"Same voices as Realtime API - ~$0.009/min":"Azure neural voices - ~$0.005/min"})]}),(0,Da.jsxs)("div",{children:[(0,Da.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Voice"}),("uplift"===he.tts_provider||!he.tts_provider)&&(0,Da.jsxs)("select",{value:he.custom_voice||"v_meklc281",onChange:e=>fe(qe(qe({},he),{},{custom_voice:e.target.value})),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-purple-500 focus:border-purple-500",children:[(0,Da.jsxs)("optgroup",{label:"\ud83c\uddf5\ud83c\uddf0 Urdu Voices",children:[(0,Da.jsx)("option",{value:"v_meklc281",children:"\ud83d\udc69 Ayesha - Info/Education V2 (Default)"}),(0,Da.jsx)("option",{value:"v_8eelc901",children:"\ud83d\udc69 Fatima - Info/Education"}),(0,Da.jsx)("option",{value:"v_30s70t3a",children:"\ud83d\udc68 Asad - News Anchor"}),(0,Da.jsx)("option",{value:"v_yypgzenx",children:"\ud83d\udc74 Dada Jee - Storyteller"}),(0,Da.jsx)("option",{value:"v_kwmp7zxt",children:"\ud83d\udc67 Zara - Gen Z (Beta)"})]}),(0,Da.jsxs)("optgroup",{label:"\ud83c\udfd4\ufe0f Sindhi Voices",children:[(0,Da.jsx)("option",{value:"v_sd0kl3m9",children:"\ud83d\udc69 Samina - Female"}),(0,Da.jsx)("option",{value:"v_sd6mn4p2",children:"\ud83d\udc68 Waqar - Male (Calm)"}),(0,Da.jsx)("option",{value:"v_sd9qr7x5",children:"\ud83d\udc68 Imran - Male (News)"})]}),(0,Da.jsxs)("optgroup",{label:"\u26f0\ufe0f Balochi Voices",children:[(0,Da.jsx)("option",{value:"v_bl0ab8c4",children:"\ud83d\udc68 Karim - Male"}),(0,Da.jsx)("option",{value:"v_bl1de2f7",children:"\ud83d\udc69 Nazia - Female"})]})]}),"azure"===he.tts_provider&&(0,Da.jsxs)("select",{value:he.custom_voice||"ur-PK-UzmaNeural",onChange:e=>fe(qe(qe({},he),{},{custom_voice:e.target.value})),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-purple-500 focus:border-purple-500",children:[(0,Da.jsx)("option",{value:"ur-PK-UzmaNeural",children:"\ud83d\udc69 Uzma (Female - Urdu)"}),(0,Da.jsx)("option",{value:"ur-PK-AsadNeural",children:"\ud83d\udc68 Asad (Male - Urdu)"}),(0,Da.jsx)("option",{value:"en-US-JennyNeural",children:"\ud83d\udc69 Jenny (Female - English)"}),(0,Da.jsx)("option",{value:"en-US-GuyNeural",children:"\ud83d\udc68 Guy (Male - English)"})]}),"openai"===he.tts_provider&&(0,Da.jsxs)("select",{value:he.custom_voice||"nova",onChange:e=>fe(qe(qe({},he),{},{custom_voice:e.target.value})),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-purple-500 focus:border-purple-500",children:[(0,Da.jsx)("option",{value:"nova",children:"\ud83c\udf1f Nova (Friendly, Upbeat)"}),(0,Da.jsx)("option",{value:"alloy",children:"\u2696\ufe0f Alloy (Neutral, Balanced)"}),(0,Da.jsx)("option",{value:"echo",children:"\ud83d\udcac Echo (Warm, Conversational)"}),(0,Da.jsx)("option",{value:"fable",children:"\ud83d\udcd6 Fable (Expressive, Narrative)"}),(0,Da.jsx)("option",{value:"onyx",children:"\ud83c\udfad Onyx (Deep, Authoritative)"}),(0,Da.jsx)("option",{value:"shimmer",children:"\u2728 Shimmer (Clear, Pleasant)"})]})]}),(0,Da.jsxs)("div",{children:[(0,Da.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Speech Recognition Languages"}),(0,Da.jsxs)("select",{value:JSON.stringify(he.language_hints||["ur","en"]),onChange:e=>fe(qe(qe({},he),{},{language_hints:JSON.parse(e.target.value)})),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-purple-500 focus:border-purple-500",children:[(0,Da.jsxs)("optgroup",{label:"Common",children:[(0,Da.jsx)("option",{value:'["ur", "en"]',children:"\ud83c\uddf5\ud83c\uddf0 Urdu + \ud83c\uddec\ud83c\udde7 English (Recommended)"}),(0,Da.jsx)("option",{value:'["ur"]',children:"\ud83c\uddf5\ud83c\uddf0 Urdu Only"}),(0,Da.jsx)("option",{value:'["en"]',children:"\ud83c\uddec\ud83c\udde7 English Only"})]}),(0,Da.jsxs)("optgroup",{label:"Pakistani Languages",children:[(0,Da.jsx)("option",{value:'["ur", "en", "pa"]',children:"Urdu + English + Punjabi"}),(0,Da.jsx)("option",{value:'["sd", "ur", "en"]',children:"Sindhi + Urdu + English"}),(0,Da.jsx)("option",{value:'["sd", "en"]',children:"Sindhi + English"}),(0,Da.jsx)("option",{value:'["bal", "ur", "en"]',children:"Balochi + Urdu + English"}),(0,Da.jsx)("option",{value:'["ps", "ur", "en"]',children:"Pashto + Urdu + English"})]}),(0,Da.jsxs)("optgroup",{label:"Other",children:[(0,Da.jsx)("option",{value:'["hi", "en"]',children:"\ud83c\uddee\ud83c\uddf3 Hindi + English"}),(0,Da.jsx)("option",{value:'["ar", "en"]',children:"\ud83c\uddf8\ud83c\udde6 Arabic + English"})]})]}),(0,Da.jsx)("p",{className:"mt-1 text-xs text-gray-500",children:"Languages the STT should expect - improves accuracy"})]}),(0,Da.jsxs)("div",{children:[(0,Da.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"AI Model (LLM)"}),(0,Da.jsxs)("select",{value:he.llm_model||"llama-3.3-70b-versatile",onChange:e=>fe(qe(qe({},he),{},{llm_model:e.target.value})),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-purple-500 focus:border-purple-500",children:[(0,Da.jsx)("option",{value:"llama-3.3-70b-versatile",children:"\ud83e\udd99 Llama 3.3 70B (Groq - Fast & Free)"}),(0,Da.jsx)("option",{value:"llama-3.3-70b-specdec",children:"\u26a1 Llama 3.3 70B Specdec (Fastest)"}),(0,Da.jsx)("option",{value:"gpt-4o-mini",children:"\ud83e\udd16 GPT-4o Mini (OpenAI)"}),(0,Da.jsx)("option",{value:"gpt-4o",children:"\ud83e\udde0 GPT-4o (OpenAI - Best)"})]}),(0,Da.jsx)("p",{className:"mt-1 text-xs text-gray-500",children:"Groq is 10x faster and mostly free tier"})]})]}),(0,Da.jsx)("div",{className:"mt-4 p-4 bg-white rounded-lg border border-green-200 shadow-sm",children:(0,Da.jsxs)("div",{className:"flex items-start gap-3",children:[(0,Da.jsx)("div",{className:"text-3xl",children:"\ud83d\udcb0"}),(0,Da.jsxs)("div",{className:"flex-1",children:[(0,Da.jsx)("h5",{className:"font-semibold text-green-800",children:"Cost Comparison"}),(0,Da.jsxs)("div",{className:"mt-2 grid grid-cols-4 gap-2 text-sm",children:[(0,Da.jsxs)("div",{className:"text-center p-2 bg-red-50 rounded",children:[(0,Da.jsx)("div",{className:"font-bold text-red-600",children:"$0.30"}),(0,Da.jsx)("div",{className:"text-xs text-gray-500",children:"OpenAI Realtime"})]}),(0,Da.jsxs)("div",{className:"text-center p-2 bg-yellow-50 rounded",children:[(0,Da.jsx)("div",{className:"font-bold text-yellow-600",children:"$0.05"}),(0,Da.jsx)("div",{className:"text-xs text-gray-500",children:"Deepgram"})]}),(0,Da.jsxs)("div",{className:"text-center p-2 rounded ".concat("openai"===he.tts_provider?"bg-blue-50 border-2 border-blue-400":"bg-blue-50"),children:[(0,Da.jsx)("div",{className:"font-bold text-blue-600",children:"$0.02"}),(0,Da.jsx)("div",{className:"text-xs text-gray-500",children:"Custom+OpenAI"})]}),(0,Da.jsxs)("div",{className:"text-center p-2 rounded ".concat("openai"!==he.tts_provider?"bg-green-50 border-2 border-green-400":"bg-green-50"),children:[(0,Da.jsx)("div",{className:"font-bold text-green-600",children:"$0.01"}),(0,Da.jsx)("div",{className:"text-xs text-gray-500",children:"Custom+Uplift \u2713"})]})]}),(0,Da.jsx)("p",{className:"mt-2 text-xs text-green-700",children:"openai"===he.tts_provider?"OpenAI TTS: High quality voices, ~$0.02/min total":"azure"===he.tts_provider?"Azure TTS: Good quality, ~$0.01/min total":"Uplift TTS: Best for Urdu, ~$0.01/min total"})]})]})}),(0,Da.jsxs)("div",{className:"flex flex-wrap gap-2 mt-3",children:[(0,Da.jsxs)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-purple-100 text-purple-800",children:["\u2705 ","openai"===he.tts_provider?"High Quality":"Urdu Native"]}),(0,Da.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:"\u2705 Code-Switching"}),(0,Da.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:"\u2705 Function Calling"}),(0,Da.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:"\u2705 ~300ms Latency"})]})]}),(0,Da.jsxs)("div",{children:[(0,Da.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Language"}),(0,Da.jsxs)("select",{value:he.language,onChange:e=>fe(qe(qe({},he),{},{language:e.target.value})),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-primary-500 focus:border-primary-500",children:[(0,Da.jsx)("option",{value:"ur",children:"Urdu/English"}),(0,Da.jsx)("option",{value:"en",children:"English"}),(0,Da.jsx)("option",{value:"es",children:"Spanish"}),(0,Da.jsx)("option",{value:"fr",children:"French"})]})]})]}),"intent-ivr"===he.provider&&U&&(0,Da.jsxs)("div",{className:"mt-3 p-4 bg-gradient-to-r from-blue-50 to-purple-50 border border-blue-200 rounded-lg",children:[(0,Da.jsx)("h4",{className:"text-sm font-semibold text-gray-800 mb-3",children:"IVR Configuration"}),(0,Da.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,Da.jsxs)(Ie,{to:"/agents/".concat(U,"/ivr"),className:"flex items-center gap-2 p-3 bg-white border border-gray-200 rounded-lg hover:border-blue-400 hover:shadow-sm transition-all",children:[(0,Da.jsx)(rs,{className:"w-5 h-5 text-blue-600"}),(0,Da.jsxs)("div",{children:[(0,Da.jsx)("div",{className:"text-sm font-medium text-gray-900",children:"Intents"}),(0,Da.jsx)("div",{className:"text-xs text-gray-500",children:"Static responses & triggers"})]})]}),(0,Da.jsxs)(Ie,{to:"/agents/".concat(U,"/ivr/flows"),className:"flex items-center gap-2 p-3 bg-white border border-gray-200 rounded-lg hover:border-purple-400 hover:shadow-sm transition-all",children:[(0,Da.jsx)(os,{className:"w-5 h-5 text-purple-600"}),(0,Da.jsxs)("div",{children:[(0,Da.jsx)("div",{className:"text-sm font-medium text-gray-900",children:"Flows"}),(0,Da.jsx)("div",{className:"text-xs text-gray-500",children:"Multi-turn conversations"})]})]}),(0,Da.jsxs)(Ie,{to:"/agents/".concat(U,"/ivr/segments"),className:"flex items-center gap-2 p-3 bg-white border border-gray-200 rounded-lg hover:border-green-400 hover:shadow-sm transition-all",children:[(0,Da.jsx)(ls,{className:"w-5 h-5 text-green-600"}),(0,Da.jsxs)("div",{children:[(0,Da.jsx)("div",{className:"text-sm font-medium text-gray-900",children:"Segments"}),(0,Da.jsx)("div",{className:"text-xs text-gray-500",children:"Reusable audio pieces"})]})]}),(0,Da.jsxs)(Ie,{to:"/agents/".concat(U,"/ivr/templates"),className:"flex items-center gap-2 p-3 bg-white border border-gray-200 rounded-lg hover:border-yellow-400 hover:shadow-sm transition-all",children:[(0,Da.jsx)(cs,{className:"w-5 h-5 text-yellow-600"}),(0,Da.jsxs)("div",{children:[(0,Da.jsx)("div",{className:"text-sm font-medium text-gray-900",children:"Templates"}),(0,Da.jsx)("div",{className:"text-xs text-gray-500",children:"Dynamic audio templates"})]})]}),(0,Da.jsxs)(Ie,{to:"/agents/".concat(U,"/ivr/languages"),className:"flex items-center gap-2 p-3 bg-white border border-gray-200 rounded-lg hover:border-teal-400 hover:shadow-sm transition-all col-span-2",children:[(0,Da.jsx)(ds,{className:"w-5 h-5 text-teal-600"}),(0,Da.jsxs)("div",{children:[(0,Da.jsx)("div",{className:"text-sm font-medium text-gray-900",children:"Languages"}),(0,Da.jsx)("div",{className:"text-xs text-gray-500",children:"Multi-language configuration (20 languages)"})]})]})]})]}),(0,Da.jsxs)("div",{className:"mt-6 pt-6 border-t border-gray-200",children:[(0,Da.jsx)("h4",{className:"text-sm font-medium text-gray-900 mb-4",children:"Chat Model Configuration"}),(0,Da.jsx)("p",{className:"text-sm text-gray-600 mb-4",children:"This model is used for text-based chat conversations in the dashboard. Voice calls use the realtime model configured above."}),(0,Da.jsxs)("div",{children:[(0,Da.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Chat Model"}),(0,Da.jsx)("select",{value:he.chat_model||"gpt-4o-mini",onChange:e=>fe(qe(qe({},he),{},{chat_model:e.target.value})),className:"block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-primary-500 focus:border-primary-500",children:Ss.map(e=>(0,Da.jsx)("optgroup",{label:e.label,children:e.models.map(e=>(0,Da.jsxs)("option",{value:e.value,children:[e.label," (",e.cost,"/1M) ",e.badge||""]},e.value))},e.label))}),(0,Da.jsx)("div",{className:"mt-3 p-3 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg border border-blue-200",children:(0,Da.jsxs)("div",{className:"flex items-start gap-2",children:[(0,Da.jsx)("span",{className:"text-xl",children:"\ud83d\udca1"}),(0,Da.jsxs)("div",{className:"flex-1 text-sm",children:[(0,Da.jsx)("p",{className:"font-medium text-blue-900 mb-1",children:"Model Recommendations:"}),(0,Da.jsxs)("ul",{className:"text-blue-800 space-y-1 text-xs",children:[(0,Da.jsxs)("li",{children:[(0,Da.jsx)("strong",{children:"Best Value:"})," Llama 3.3 70B (Groq) - Fast, cheap, great quality"]}),(0,Da.jsxs)("li",{children:[(0,Da.jsx)("strong",{children:"Cheapest:"})," Llama 3.1 8B or DeepSeek Chat - For simple queries"]}),(0,Da.jsxs)("li",{children:[(0,Da.jsx)("strong",{children:"Best Quality:"})," GPT-4o or Claude Sonnet - Complex reasoning"]}),(0,Da.jsxs)("li",{children:[(0,Da.jsx)("strong",{children:"Best for Urdu:"})," GPT-4o-mini or GPT-4o - Better multilingual"]})]})]})]})}),(0,Da.jsxs)("div",{className:"mt-2 grid grid-cols-4 gap-1 text-xs",children:[(0,Da.jsxs)("div",{className:"text-center p-1.5 bg-green-50 rounded border border-green-200",children:[(0,Da.jsx)("div",{className:"font-bold text-green-700",children:"$0.05"}),(0,Da.jsx)("div",{className:"text-green-600",children:"Llama 8B"})]}),(0,Da.jsxs)("div",{className:"text-center p-1.5 bg-blue-50 rounded border border-blue-200",children:[(0,Da.jsx)("div",{className:"font-bold text-blue-700",children:"$0.15"}),(0,Da.jsx)("div",{className:"text-blue-600",children:"GPT-4o-mini"})]}),(0,Da.jsxs)("div",{className:"text-center p-1.5 bg-purple-50 rounded border border-purple-200",children:[(0,Da.jsx)("div",{className:"font-bold text-purple-700",children:"$0.59"}),(0,Da.jsx)("div",{className:"text-purple-600",children:"Llama 70B"})]}),(0,Da.jsxs)("div",{className:"text-center p-1.5 bg-amber-50 rounded border border-amber-200",children:[(0,Da.jsx)("div",{className:"font-bold text-amber-700",children:"$2.50"}),(0,Da.jsx)("div",{className:"text-amber-600",children:"GPT-4o"})]})]}),(0,Da.jsx)("p",{className:"mt-1 text-xs text-gray-500 text-center",children:"Cost per 1M input tokens (output costs vary)"})]}),(0,Da.jsxs)("div",{children:[(0,Da.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Knowledge Search"}),(0,Da.jsxs)("select",{value:he.knowledge_search_mode||"auto",onChange:e=>fe(qe(qe({},he),{},{knowledge_search_mode:e.target.value})),className:"block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-primary-500 focus:border-primary-500",children:[(0,Da.jsx)("option",{value:"auto",children:"Auto - LLM will decide"},"auto"),(0,Da.jsx)("option",{value:"always",children:"Always search the knowledge base"},"always"),(0,Da.jsx)("option",{value:"never",children:"Follow Instructions only"},"never")]})]})]}),(0,Da.jsxs)("div",{children:[(0,Da.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,Da.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Instructions"}),(0,Da.jsx)("button",{type:"button",onClick:async()=>{if(he.name){Oe(!0),Se(!0);try{const e=await(e=>Aa.post("/ai-assist/generate-instructions",e))({agent_name:he.name,agent_type:he.type,language:he.language,existing_instructions:he.instructions});Ce(e.data.instructions),Ee(e.data.cost),nr.success("Instructions generated! Cost: $".concat(e.data.cost.toFixed(6)))}catch(e){nr.error("Failed to generate instructions"),Se(!1)}finally{Oe(!1)}}else nr.error("Please enter an agent name first")},disabled:!he.name||Ae,className:"inline-flex items-center px-3 py-1 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:Ae?(0,Da.jsxs)(Da.Fragment,{children:[(0,Da.jsxs)("svg",{className:"animate-spin h-4 w-4 mr-2",fill:"none",viewBox:"0 0 24 24",children:[(0,Da.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,Da.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Generating..."]}):(0,Da.jsxs)(Da.Fragment,{children:[(0,Da.jsx)("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Da.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})}),"AI Generate"]})})]}),(0,Da.jsx)("textarea",{value:he.instructions,onChange:e=>fe(qe(qe({},he),{},{instructions:e.target.value})),rows:10,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-primary-500 focus:border-primary-500 font-mono text-sm",placeholder:"You are a helpful sales assistant..."}),(0,Da.jsx)("p",{className:"mt-1 text-xs text-gray-500",children:'System instructions that define the agent\'s behavior. Click "AI Generate" for assistance.'})]}),(0,Da.jsxs)("div",{children:[(0,Da.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Greeting"}),(0,Da.jsx)("textarea",{value:he.greeting,onChange:e=>fe(qe(qe({},he),{},{greeting:e.target.value})),rows:2,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-primary-500 focus:border-primary-500",placeholder:"Hello! How can I help you today?"}),(0,Da.jsxs)("p",{className:"mt-2 text-sm text-gray-500",children:[(0,Da.jsx)("strong",{children:"Inbound Call:"})," On an inbound call setting a greeting will automatically start playback when the call connects with AiVA",(0,Da.jsx)("br",{}),(0,Da.jsx)("strong",{children:"Outbound Call:"})," Not recommended to set up greeting on an Outbound Call because the AiVA should respond once the Caller answers the call and Starts Speaking"]})]}),(0,Da.jsxs)("div",{className:"bg-white shadow rounded-lg p-6",children:[(0,Da.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,Da.jsx)("span",{className:"text-2xl",children:"\ud83c\udfa4"}),(0,Da.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Chat Audio Settings"})]}),(0,Da.jsx)("p",{className:"text-sm text-gray-500 mb-4",children:"Configure speech-to-text and text-to-speech for audio messages in web/mobile chat. These settings are separate from voice call configuration."}),(0,Da.jsxs)("div",{className:"space-y-6",children:[(0,Da.jsxs)("div",{className:"p-4 bg-gray-50 rounded-lg border border-gray-200",children:[(0,Da.jsxs)("h4",{className:"font-medium text-gray-900 mb-3 flex items-center gap-2",children:[(0,Da.jsx)("span",{children:"\ud83c\udf99\ufe0f"})," Speech-to-Text (STT)"]}),(0,Da.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,Da.jsxs)("div",{children:[(0,Da.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Provider"}),(0,Da.jsxs)("select",{value:he.chat_stt_provider||"openai",onChange:e=>{const t=e.target.value;let r="whisper-1";"groq"===t&&(r="whisper-large-v3"),"deepgram"===t&&(r="nova-2"),"soniox"===t&&(r="stt-rt-preview"),fe(qe(qe({},he),{},{chat_stt_provider:t,chat_stt_model:r}))},className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-primary-500 focus:border-primary-500",children:[(0,Da.jsx)("option",{value:"openai",children:"OpenAI Whisper ($0.006/min)"}),(0,Da.jsx)("option",{value:"groq",children:"Groq Whisper ($0.0001/min)"}),(0,Da.jsx)("option",{value:"deepgram",children:"Deepgram Nova ($0.0043/min)"}),(0,Da.jsx)("option",{value:"soniox",children:"Soniox ($0.0035/min)"})]}),(0,Da.jsxs)("p",{className:"mt-1 text-xs text-gray-500",children:["groq"===he.chat_stt_provider&&"Fastest and cheapest","deepgram"===he.chat_stt_provider&&"Great for English","soniox"===he.chat_stt_provider&&"Best for Urdu/English",(!he.chat_stt_provider||"openai"===he.chat_stt_provider)&&"Most accurate, 50+ languages"]})]}),(0,Da.jsxs)("div",{children:[(0,Da.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Model"}),(0,Da.jsxs)("select",{value:he.chat_stt_model||"whisper-1",onChange:e=>fe(qe(qe({},he),{},{chat_stt_model:e.target.value})),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-primary-500 focus:border-primary-500",children:[("openai"===he.chat_stt_provider||!he.chat_stt_provider)&&(0,Da.jsx)("option",{value:"whisper-1",children:"Whisper-1"}),"groq"===he.chat_stt_provider&&(0,Da.jsxs)(Da.Fragment,{children:[(0,Da.jsx)("option",{value:"whisper-large-v3",children:"Whisper Large V3"}),(0,Da.jsx)("option",{value:"whisper-large-v3-turbo",children:"Whisper Large V3 Turbo"})]}),"deepgram"===he.chat_stt_provider&&(0,Da.jsxs)(Da.Fragment,{children:[(0,Da.jsx)("option",{value:"nova-2",children:"Nova 2"}),(0,Da.jsx)("option",{value:"nova-3",children:"Nova 3"})]}),"soniox"===he.chat_stt_provider&&(0,Da.jsx)("option",{value:"stt-async-preview",children:"STT Async Preview (for file uploads)"})]})]})]})]}),(0,Da.jsxs)("div",{className:"p-4 bg-gray-50 rounded-lg border border-gray-200",children:[(0,Da.jsxs)("h4",{className:"font-medium text-gray-900 mb-3 flex items-center gap-2",children:[(0,Da.jsx)("span",{children:"\ud83d\udd0a"})," Text-to-Speech (TTS)"]}),(0,Da.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,Da.jsxs)("div",{children:[(0,Da.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Provider"}),(0,Da.jsxs)("select",{value:he.chat_tts_provider||"openai",onChange:e=>{const t=e.target.value;let r="nova";"azure"===t&&(r="en-US-JennyNeural"),fe(qe(qe({},he),{},{chat_tts_provider:t,chat_tts_voice:r}))},className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-primary-500 focus:border-primary-500",children:[(0,Da.jsx)("option",{value:"openai",children:"OpenAI TTS ($15/1M chars)"}),(0,Da.jsx)("option",{value:"azure",children:"Azure TTS ($16/1M chars)"}),(0,Da.jsx)("option",{value:"uplift",children:"Uplift TTS "})]}),(0,Da.jsx)("p",{className:"mt-1 text-xs text-gray-500",children:"azure"===he.chat_tts_provider?"More voice options, Urdu support":"High quality, 6 voices"})]}),(0,Da.jsxs)("div",{children:[(0,Da.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Voice"}),(0,Da.jsxs)("select",{value:he.chat_tts_voice||"nova",onChange:e=>fe(qe(qe({},he),{},{chat_tts_voice:e.target.value})),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-primary-500 focus:border-primary-500",children:[("openai"===he.chat_tts_provider||!he.chat_tts_provider)&&(0,Da.jsxs)(Da.Fragment,{children:[(0,Da.jsx)("option",{value:"alloy",children:"Alloy (Neutral)"}),(0,Da.jsx)("option",{value:"echo",children:"Echo (Warm Male)"}),(0,Da.jsx)("option",{value:"fable",children:"Fable (British)"}),(0,Da.jsx)("option",{value:"onyx",children:"Onyx (Deep Male)"}),(0,Da.jsx)("option",{value:"nova",children:"Nova (Friendly Female)"}),(0,Da.jsx)("option",{value:"shimmer",children:"Shimmer (Soft Female)"})]}),"azure"===he.chat_tts_provider&&(0,Da.jsxs)(Da.Fragment,{children:[(0,Da.jsxs)("optgroup",{label:"English",children:[(0,Da.jsx)("option",{value:"en-US-JennyNeural",children:"Jenny (US Female)"}),(0,Da.jsx)("option",{value:"en-US-GuyNeural",children:"Guy (US Male)"}),(0,Da.jsx)("option",{value:"en-US-AriaNeural",children:"Aria (US Female)"}),(0,Da.jsx)("option",{value:"en-GB-SoniaNeural",children:"Sonia (UK Female)"})]}),(0,Da.jsxs)("optgroup",{label:"Urdu",children:[(0,Da.jsx)("option",{value:"ur-PK-UzmaNeural",children:"Uzma (Urdu Female)"}),(0,Da.jsx)("option",{value:"ur-PK-AsadNeural",children:"Asad (Urdu Male)"})]})]}),"uplift"===he.chat_tts_provider&&(0,Da.jsxs)(Da.Fragment,{children:[(0,Da.jsxs)("optgroup",{label:"Urdu",children:[(0,Da.jsx)("option",{value:"ayesha",children:"Ayesha (Female)"}),(0,Da.jsx)("option",{value:"fatima",children:"Fatima (Female)"}),(0,Da.jsx)("option",{value:"asad",children:"Asad (Male - News)"}),(0,Da.jsx)("option",{value:"dadajee",children:"Dada Jee (Elder Male)"}),(0,Da.jsx)("option",{value:"zara",children:"Zara (Female)"})]}),(0,Da.jsxs)("optgroup",{label:"Sindhi",children:[(0,Da.jsx)("option",{value:"samina",children:"Samina (Female)"}),(0,Da.jsx)("option",{value:"waqar",children:"Waqar (Male)"})]}),(0,Da.jsx)("optgroup",{label:"Punjabi",children:(0,Da.jsx)("option",{value:"imran",children:"Imran (Male)"})}),(0,Da.jsxs)("optgroup",{label:"Balochi",children:[(0,Da.jsx)("option",{value:"nazia",children:"Nazia (Female)"}),(0,Da.jsx)("option",{value:"karim",children:"Karim (Male)"})]})]})]})]})]})]}),(0,Da.jsxs)("div",{className:"flex items-center justify-between p-4 bg-primary-50 rounded-lg border border-primary-200",children:[(0,Da.jsxs)("div",{children:[(0,Da.jsx)("label",{className:"block text-sm font-medium text-gray-900",children:"Auto-generate Audio Response"}),(0,Da.jsx)("p",{className:"text-xs text-gray-600 mt-1",children:"When user sends voice message, bot replies with both audio and text"})]}),(0,Da.jsxs)("label",{className:"relative inline-flex items-center cursor-pointer",children:[(0,Da.jsx)("input",{type:"checkbox",checked:!1!==he.chat_audio_response&&0!==he.chat_audio_response,onChange:e=>fe(qe(qe({},he),{},{chat_audio_response:e.target.checked?1:0})),className:"sr-only peer"}),(0,Da.jsx)("div",{className:"w-11 h-6 bg-gray-200 peer-focus:ring-4 peer-focus:ring-primary-300 rounded-full peer peer-checked:after:translate-x-full after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary-600"})]})]})]})]}),(0,Da.jsxs)("div",{className:"mt-4 p-3 bg-gray-50 rounded-lg border",children:[(0,Da.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Configured Providers"}),(0,Da.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,Da.jsx)("span",{className:"inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800",children:"\u2705 OpenAI"}),(0,Da.jsx)("span",{className:"inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800",children:"\u2705 Groq"}),(0,Da.jsx)("span",{className:"inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-500",children:"\u2699\ufe0f Anthropic"}),(0,Da.jsx)("span",{className:"inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-500",children:"\u2699\ufe0f DeepSeek"}),(0,Da.jsx)("span",{className:"inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-500",children:"\u2699\ufe0f Moonshot"})]}),(0,Da.jsx)("p",{className:"mt-2 text-xs text-gray-500",children:"Gray providers need API keys in .env file. Models will fall back to OpenAI if provider unavailable."})]})]})]}),(0,Da.jsxs)("div",{className:"bg-white shadow rounded-lg p-6",children:[(0,Da.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Knowledge Base"}),(0,Da.jsx)("div",{className:"space-y-4",children:(0,Da.jsxs)("div",{children:[(0,Da.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Knowledge Base"}),(0,Da.jsxs)("select",{value:he.kb_id||"",onChange:e=>fe(qe(qe({},he),{},{kb_id:e.target.value||null})),className:"w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500",children:[(0,Da.jsx)("option",{value:"",children:"-- No Knowledge Base --"}),Y.map(e=>{var t;return(0,Da.jsxs)("option",{value:e.id,children:[e.name," (",(null===(t=e.stats)||void 0===t?void 0:t.document_count)||0," docs)"]},e.id)})]})]})})]}),(0,Da.jsxs)("div",{className:"bg-white shadow rounded-lg p-6",children:[(0,Da.jsx)("div",{className:"flex items-center justify-between mb-4",children:(0,Da.jsxs)("div",{children:[(0,Da.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Conversation Strategy"}),(0,Da.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Configure how your agent collects preferences before searching"})]})}),(0,Da.jsxs)("div",{className:"mb-6",children:[(0,Da.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,Da.jsx)(us,{size:18,className:"text-blue-500"}),(0,Da.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Quick Presets"})]}),(0,Da.jsx)("p",{className:"text-xs text-gray-500 mb-3",children:"Apply a preset configuration based on your business type"}),(0,Da.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-3",children:Q?(0,Da.jsx)("div",{className:"col-span-4 text-center py-4",children:(0,Da.jsx)("div",{className:"inline-block animate-spin rounded-full h-6 w-6 border-b-2 border-gray-900"})}):X.map(e=>{const t={shirt:ps,laptop:ms,couch:hs,utensils:fs}[e.icon]||us;return(0,Da.jsxs)("button",{type:"button",onClick:()=>(async e=>{try{const t=X.find(t=>t.id===e);t&&(fe(qe(qe({},he),{},{conversation_strategy:t.strategy})),nr.success("".concat(t.name," preset applied")))}catch(t){console.error("Error applying preset:",t),nr.error("Failed to apply preset")}})(e.id),className:"p-3 border-2 border-gray-200 rounded-lg hover:border-blue-500 hover:bg-blue-50 transition-colors text-left",children:[(0,Da.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,Da.jsx)(t,{size:20,className:"text-blue-600"}),(0,Da.jsx)("span",{className:"font-semibold text-sm",children:e.name})]}),(0,Da.jsx)("p",{className:"text-xs text-gray-600 mb-2",children:e.description}),(0,Da.jsx)("span",{className:"inline-block text-xs px-2 py-1 bg-gray-100 rounded",children:0===e.strategy.preference_collection.max_questions?"No questions":"".concat(e.strategy.preference_collection.max_questions," questions")})]},e.id)})})]}),(0,Da.jsxs)("div",{className:"space-y-3",children:[(0,Da.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Search Strategy"}),(0,Da.jsxs)("label",{className:"flex items-start gap-3 p-3 border-2 rounded-lg cursor-pointer hover:bg-gray-50 transition-colors",children:[(0,Da.jsx)("input",{type:"radio",name:"conversation_strategy",value:"immediate_search",checked:"immediate_search"===(null===(e=he.conversation_strategy)||void 0===e||null===(t=e.preference_collection)||void 0===t?void 0:t.strategy),onChange:e=>st("strategy",e.target.value),className:"mt-1"}),(0,Da.jsxs)("div",{className:"flex-1",children:[(0,Da.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,Da.jsx)("span",{className:"font-medium text-sm",children:"Immediate Search"}),(0,Da.jsx)("span",{className:"text-xs px-2 py-0.5 bg-green-100 text-green-700 rounded",children:"Fast"})]}),(0,Da.jsx)("p",{className:"text-xs text-gray-600",children:"Search as soon as user requests products. No questions asked."}),(0,Da.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Best for: Furniture, Food, Low-ticket items"})]})]}),(0,Da.jsxs)("label",{className:"flex items-start gap-3 p-3 border-2 rounded-lg cursor-pointer hover:bg-gray-50 transition-colors",children:[(0,Da.jsx)("input",{type:"radio",name:"conversation_strategy",value:"ask_questions",checked:"ask_questions"===(null===(r=he.conversation_strategy)||void 0===r||null===(n=r.preference_collection)||void 0===n?void 0:n.strategy),onChange:e=>st("strategy",e.target.value),className:"mt-1"}),(0,Da.jsxs)("div",{className:"flex-1",children:[(0,Da.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,Da.jsx)("span",{className:"font-medium text-sm",children:"Ask Questions First"}),(0,Da.jsx)("span",{className:"text-xs px-2 py-0.5 bg-blue-100 text-blue-700 rounded",children:"Personalized"})]}),(0,Da.jsx)("p",{className:"text-xs text-gray-600",children:"Collect user preferences before searching for products."}),(0,Da.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Best for: Clothing, Fashion, High-value items"})]})]}),(0,Da.jsxs)("label",{className:"flex items-start gap-3 p-3 border-2 rounded-lg cursor-pointer hover:bg-gray-50 transition-colors",children:[(0,Da.jsx)("input",{type:"radio",name:"conversation_strategy",value:"minimal_questions",checked:"minimal_questions"===(null===(s=he.conversation_strategy)||void 0===s||null===(i=s.preference_collection)||void 0===i?void 0:i.strategy),onChange:e=>st("strategy",e.target.value),className:"mt-1"}),(0,Da.jsxs)("div",{className:"flex-1",children:[(0,Da.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,Da.jsx)("span",{className:"font-medium text-sm",children:"Minimal Questions (1-2)"}),(0,Da.jsx)("span",{className:"text-xs px-2 py-0.5 bg-yellow-100 text-yellow-700 rounded",children:"Balanced"})]}),(0,Da.jsx)("p",{className:"text-xs text-gray-600",children:"Ask only 1-2 critical questions before searching."}),(0,Da.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Best for: Electronics, Mid-range items"})]})]}),(0,Da.jsxs)("label",{className:"flex items-start gap-3 p-3 border-2 rounded-lg cursor-pointer hover:bg-gray-50 transition-colors",children:[(0,Da.jsx)("input",{type:"radio",name:"conversation_strategy",value:"adaptive",checked:"adaptive"===(null===(o=he.conversation_strategy)||void 0===o||null===(l=o.preference_collection)||void 0===l?void 0:l.strategy),onChange:e=>st("strategy",e.target.value),className:"mt-1"}),(0,Da.jsxs)("div",{className:"flex-1",children:[(0,Da.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,Da.jsx)("span",{className:"font-medium text-sm",children:"Adaptive (Smart)"}),(0,Da.jsx)("span",{className:"text-xs px-2 py-0.5 bg-purple-100 text-purple-700 rounded",children:"Intelligent"})]}),(0,Da.jsx)("p",{className:"text-xs text-gray-600",children:"AI decides based on product type, value, and context."}),(0,Da.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Best for: Multi-category stores"})]})]})]}),(null===(c=he.conversation_strategy)||void 0===c||null===(d=c.preference_collection)||void 0===d?void 0:d.strategy)&&(0,Da.jsx)("div",{className:"mt-4 bg-green-50 border border-green-200 rounded-lg p-3",children:(0,Da.jsxs)("div",{className:"flex items-start gap-2",children:[(0,Da.jsx)(gs,{size:18,className:"text-green-600 mt-0.5 flex-shrink-0"}),(0,Da.jsxs)("div",{children:[(0,Da.jsx)("h4",{className:"text-sm font-semibold text-green-900",children:"Current Strategy"}),(0,Da.jsxs)("p",{className:"text-xs text-green-700 mt-1",children:["Using ",(0,Da.jsx)("strong",{children:he.conversation_strategy.preference_collection.strategy.replace("_"," ")})," strategy.","immediate_search"===he.conversation_strategy.preference_collection.strategy&&" Products will be shown immediately.","ask_questions"===he.conversation_strategy.preference_collection.strategy&&" Agent will collect preferences before searching.","minimal_questions"===he.conversation_strategy.preference_collection.strategy&&" Agent will ask 1-2 quick questions.","adaptive"===he.conversation_strategy.preference_collection.strategy&&" AI will decide the best approach."]})]})]})})]}),("ask_questions"===(null===(u=he.conversation_strategy)||void 0===u||null===(p=u.preference_collection)||void 0===p?void 0:p.strategy)||"minimal_questions"===(null===(m=he.conversation_strategy)||void 0===m||null===(h=m.preference_collection)||void 0===h?void 0:h.strategy))&&(0,Da.jsxs)("div",{className:"mt-6 p-4 border-2 border-blue-200 rounded-lg bg-blue-50",children:[(0,Da.jsxs)("button",{type:"button",onClick:()=>ne(!te),className:"w-full flex items-center justify-between text-left mb-4",children:[(0,Da.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Da.jsx)("span",{className:"text-lg",children:"\u2699\ufe0f"}),(0,Da.jsx)("span",{className:"font-semibold text-gray-900",children:"Advanced Configuration"}),!te&&(0,Da.jsxs)("span",{className:"text-xs text-gray-500",children:["(",((null===(f=he.conversation_strategy)||void 0===f||null===(g=f.preference_collection)||void 0===g?void 0:g.preferences_to_collect)||[]).length," preferences configured)"]})]}),(0,Da.jsx)("span",{className:"text-gray-600",children:te?"\u25bc":"\u25b6"})]}),te&&(0,Da.jsxs)("div",{className:"space-y-4",children:[(0,Da.jsxs)("div",{children:[(0,Da.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Preferences to Collect"}),(0,Da.jsx)("p",{className:"text-xs text-gray-600 mb-3",children:"Define what information to gather before searching"}),(0,Da.jsx)("div",{className:"space-y-3",children:((null===(x=he.conversation_strategy)||void 0===x||null===(y=x.preference_collection)||void 0===y?void 0:y.preferences_to_collect)||[]).map((e,t)=>{var r;return(0,Da.jsxs)("div",{className:"p-3 bg-white rounded-lg border border-gray-300 shadow-sm",children:[(0,Da.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,Da.jsxs)("div",{className:"flex items-center gap-2 flex-1",children:[(0,Da.jsxs)("span",{className:"text-sm font-medium text-gray-500",children:["#",t+1]}),(0,Da.jsx)("input",{type:"text",placeholder:"Preference name (e.g., color, size)",value:e.name||"",onChange:e=>it(t,"name",e.target.value),className:"flex-1 text-sm border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500"})]}),(0,Da.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Da.jsxs)("label",{className:"flex items-center gap-1 text-xs",children:[(0,Da.jsx)("input",{type:"checkbox",checked:e.required,onChange:e=>it(t,"required",e.target.checked),className:"rounded border-gray-300 text-primary-600 focus:ring-primary-500"}),"Required"]}),(0,Da.jsx)("button",{type:"button",onClick:()=>(e=>{var t,r,n;const a=((null===(t=he.conversation_strategy)||void 0===t||null===(r=t.preference_collection)||void 0===r?void 0:r.preferences_to_collect)||[]).filter((t,r)=>r!==e);fe(qe(qe({},he),{},{conversation_strategy:qe(qe({},he.conversation_strategy),{},{preference_collection:qe(qe({},null===(n=he.conversation_strategy)||void 0===n?void 0:n.preference_collection),{},{preferences_to_collect:a})})}))})(t),className:"text-red-600 hover:text-red-700 p-1",title:"Remove preference",children:(0,Da.jsx)("span",{className:"text-lg",children:"\ud83d\uddd1\ufe0f"})})]})]}),(0,Da.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[(0,Da.jsxs)("div",{children:[(0,Da.jsx)("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Display Label"}),(0,Da.jsx)("input",{type:"text",placeholder:"e.g., Color Preference",value:e.label,onChange:e=>it(t,"label",e.target.value),className:"w-full text-sm border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500"})]}),(0,Da.jsxs)("div",{children:[(0,Da.jsx)("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Field Type"}),(0,Da.jsxs)("select",{value:e.type||"text",onChange:e=>it(t,"type",e.target.value),className:"w-full text-sm border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500",children:[(0,Da.jsx)("option",{value:"text",children:"Text (Open-ended)"}),(0,Da.jsx)("option",{value:"choice",children:"Multiple Choice"}),(0,Da.jsx)("option",{value:"range",children:"Range (e.g., budget)"})]})]})]}),(0,Da.jsxs)("div",{className:"mt-3",children:[(0,Da.jsx)("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Question to Ask"}),(0,Da.jsx)("input",{type:"text",placeholder:"e.g., What color would you like?",value:e.question,onChange:e=>it(t,"question",e.target.value),className:"w-full text-sm border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500"}),(0,Da.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"AI will use this as guidance and may rephrase naturally"})]}),"choice"===e.type&&(0,Da.jsxs)("div",{className:"mt-3",children:[(0,Da.jsx)("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Options (comma-separated)"}),(0,Da.jsx)("input",{type:"text",placeholder:"e.g., Red, Blue, Green, Pink, Black",value:(null===(r=e.options)||void 0===r?void 0:r.join(", "))||"",onChange:e=>it(t,"options",e.target.value.split(",").map(e=>e.trim())),className:"w-full text-sm border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500"})]})]},t)})}),(0,Da.jsx)("button",{type:"button",onClick:()=>{var e,t,r;const n=[...(null===(e=he.conversation_strategy)||void 0===e||null===(t=e.preference_collection)||void 0===t?void 0:t.preferences_to_collect)||[],{name:"",label:"",required:!1,question:"",type:"text"}];fe(qe(qe({},he),{},{conversation_strategy:qe(qe({},he.conversation_strategy),{},{preference_collection:qe(qe({},null===(r=he.conversation_strategy)||void 0===r?void 0:r.preference_collection),{},{preferences_to_collect:n})})}))},className:"mt-3 w-full py-2 px-4 border-2 border-dashed border-gray-300 rounded-lg text-sm font-medium text-gray-700 hover:border-blue-500 hover:text-blue-600 hover:bg-blue-50 transition-colors",children:"+ Add Preference"})]}),(0,Da.jsx)("div",{className:"border-t border-gray-300 my-4"}),(0,Da.jsxs)("div",{children:[(0,Da.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Search Timing"}),(0,Da.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,Da.jsxs)("div",{children:[(0,Da.jsx)("label",{className:"block text-xs font-medium text-gray-700 mb-2",children:"Minimum Preferences Before Search"}),(0,Da.jsx)("input",{type:"range",min:"0",max:Math.max(5,((null===(v=he.conversation_strategy)||void 0===v||null===(b=v.preference_collection)||void 0===b?void 0:b.preferences_to_collect)||[]).length),value:(null===(j=he.conversation_strategy)||void 0===j||null===(w=j.preference_collection)||void 0===w?void 0:w.min_preferences_before_search)||0,onChange:e=>(e=>{var t;fe(qe(qe({},he),{},{conversation_strategy:qe(qe({},he.conversation_strategy),{},{preference_collection:qe(qe({},null===(t=he.conversation_strategy)||void 0===t?void 0:t.preference_collection),{},{min_preferences_before_search:parseInt(e)})})}))})(e.target.value),className:"w-full"}),(0,Da.jsxs)("div",{className:"flex justify-between text-xs text-gray-600 mt-1",children:[(0,Da.jsx)("span",{children:"0 (immediate)"}),(0,Da.jsx)("span",{className:"font-semibold",children:(null===(N=he.conversation_strategy)||void 0===N||null===(k=N.preference_collection)||void 0===k?void 0:k.min_preferences_before_search)||0}),(0,Da.jsx)("span",{children:"All preferences"})]}),(0,Da.jsx)("p",{className:"text-xs text-gray-500 mt-2",children:"Agent will search once it collects at least this many preferences"})]}),(0,Da.jsxs)("div",{children:[(0,Da.jsx)("label",{className:"block text-xs font-medium text-gray-700 mb-2",children:"Maximum Questions to Ask"}),(0,Da.jsx)("input",{type:"range",min:"1",max:"10",value:(null===(S=he.conversation_strategy)||void 0===S||null===(_=S.preference_collection)||void 0===_?void 0:_.max_questions)||3,onChange:e=>(e=>{var t;fe(qe(qe({},he),{},{conversation_strategy:qe(qe({},he.conversation_strategy),{},{preference_collection:qe(qe({},null===(t=he.conversation_strategy)||void 0===t?void 0:t.preference_collection),{},{max_questions:parseInt(e)})})}))})(e.target.value),className:"w-full"}),(0,Da.jsxs)("div",{className:"flex justify-between text-xs text-gray-600 mt-1",children:[(0,Da.jsx)("span",{children:"1"}),(0,Da.jsx)("span",{className:"font-semibold",children:(null===(C=he.conversation_strategy)||void 0===C||null===(A=C.preference_collection)||void 0===A?void 0:A.max_questions)||3}),(0,Da.jsx)("span",{children:"10"})]}),(0,Da.jsx)("p",{className:"text-xs text-gray-500 mt-2",children:"Limit total questions to avoid frustrating users (recommended: 2-4)"})]})]})]}),(0,Da.jsx)("div",{className:"bg-white border border-blue-300 rounded-lg p-3",children:(0,Da.jsxs)("div",{className:"flex items-start gap-2",children:[(0,Da.jsx)("span",{className:"text-blue-600 text-lg",children:"\ud83d\udca1"}),(0,Da.jsxs)("div",{className:"flex-1",children:[(0,Da.jsx)("h4",{className:"text-sm font-semibold text-blue-900 mb-1",children:"How It Works"}),(0,Da.jsxs)("ul",{className:"text-xs text-blue-800 space-y-1",children:[(0,Da.jsx)("li",{children:"\u2022 AI asks questions ONE AT A TIME naturally in conversation"}),(0,Da.jsx)("li",{children:"\u2022 Stops asking when minimum preferences collected"}),(0,Da.jsx)("li",{children:"\u2022 Never exceeds maximum question limit"}),(0,Da.jsx)("li",{children:"\u2022 Required preferences are always asked"}),(0,Da.jsx)("li",{children:"\u2022 Optional preferences may be skipped if user provides enough info"})]})]})]})})]})]}),"ask_questions"===(null===(O=he.conversation_strategy)||void 0===O||null===(P=O.preference_collection)||void 0===P?void 0:P.strategy)&&(null===(E=he.conversation_strategy)||void 0===E||null===(T=E.preference_collection)||void 0===T||null===(I=T.preferences_to_collect)||void 0===I?void 0:I.length)>0&&(0,Da.jsxs)("div",{className:"mt-6 bg-gray-50 border border-gray-300 rounded-lg p-4",children:[(0,Da.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,Da.jsx)("span",{className:"text-lg",children:"\ud83d\udc41\ufe0f"}),(0,Da.jsx)("h4",{className:"font-semibold text-gray-900",children:"Conversation Preview"})]}),(0,Da.jsxs)("div",{className:"space-y-2",children:[(0,Da.jsxs)("div",{className:"flex items-start gap-2",children:[(0,Da.jsx)("div",{className:"flex-shrink-0 w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center text-sm",children:"\ud83d\udc64"}),(0,Da.jsx)("div",{className:"flex-1 bg-white rounded-lg p-2 shadow-sm",children:(0,Da.jsx)("p",{className:"text-sm",children:"Show me dresses"})})]}),he.conversation_strategy.preference_collection.preferences_to_collect.slice(0,2).map((e,t)=>(0,Da.jsxs)(a.Fragment,{children:[(0,Da.jsxs)("div",{className:"flex items-start gap-2",children:[(0,Da.jsx)("div",{className:"flex-shrink-0 w-8 h-8 bg-green-100 rounded-full flex items-center justify-center text-sm",children:"\ud83e\udd16"}),(0,Da.jsx)("div",{className:"flex-1 bg-green-50 rounded-lg p-2 shadow-sm border border-green-200",children:(0,Da.jsx)("p",{className:"text-sm",children:e.question||"What ".concat(e.name,"?")})})]}),(0,Da.jsxs)("div",{className:"flex items-start gap-2",children:[(0,Da.jsx)("div",{className:"flex-shrink-0 w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center text-sm",children:"\ud83d\udc64"}),(0,Da.jsx)("div",{className:"flex-1 bg-white rounded-lg p-2 shadow-sm",children:(0,Da.jsx)("p",{className:"text-sm text-gray-400 italic",children:"[User responds...]"})})]})]},t)),(0,Da.jsxs)("div",{className:"flex items-start gap-2",children:[(0,Da.jsx)("div",{className:"flex-shrink-0 w-8 h-8 bg-green-100 rounded-full flex items-center justify-center text-sm",children:"\ud83e\udd16"}),(0,Da.jsxs)("div",{className:"flex-1 bg-green-50 rounded-lg p-2 shadow-sm border border-green-200",children:[(0,Da.jsx)("p",{className:"text-sm",children:"Perfect! Here are the products..."}),(0,Da.jsx)("div",{className:"flex gap-2 mt-2",children:[1,2,3,4,5].map(e=>(0,Da.jsx)("div",{className:"w-12 h-12 bg-gray-200 rounded border"},e))})]})]})]})]}),(0,Da.jsxs)("div",{className:"border-t pt-6 mt-6",children:[(0,Da.jsxs)("button",{type:"button",onClick:()=>K(!H),className:"flex items-center text-sm font-medium text-primary-600 hover:text-primary-800 mb-4",children:[H?(0,Da.jsx)("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Da.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})}):(0,Da.jsx)("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Da.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})}),"Advanced Settings"]}),H&&(0,Da.jsxs)("div",{className:"space-y-6 bg-gray-50 p-6 rounded-lg",children:[(0,Da.jsxs)("div",{children:[(0,Da.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Model"}),(0,Da.jsxs)("select",{value:he.model,onChange:e=>fe(qe(qe({},he),{},{model:e.target.value})),className:"block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-primary-500 focus:border-primary-500",children:[(0,Da.jsx)("option",{value:"gpt-4o-realtime-preview-2024-12-17",children:"GPT-4o Realtime (Latest)"}),(0,Da.jsx)("option",{value:"gpt-4o-mini-realtime-preview-2024-12-17",children:"GPT-4o Mini Realtime (Faster, Cheaper)"})]}),(0,Da.jsxs)("p",{className:"mt-2 text-sm text-gray-500",children:[(0,Da.jsx)("strong",{children:"GPT-4o:"})," Most capable model with better understanding and responses. Higher cost (~$0.06/min audio).",(0,Da.jsx)("br",{}),(0,Da.jsx)("strong",{children:"GPT-4o Mini:"})," Faster responses, lower cost (~$0.024/min audio), suitable for simple conversations."]})]}),(0,Da.jsxs)("div",{children:[(0,Da.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Temperature: ",(0,Da.jsx)("span",{className:"text-primary-600 font-semibold",children:he.temperature})]}),(0,Da.jsx)("input",{type:"range",min:"0",max:"1",step:"0.1",value:he.temperature,onChange:e=>fe(qe(qe({},he),{},{temperature:parseFloat(e.target.value)})),className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer"}),(0,Da.jsxs)("div",{className:"flex justify-between text-xs text-gray-500 mt-1",children:[(0,Da.jsx)("span",{children:"0 (Focused)"}),(0,Da.jsx)("span",{children:"0.5 (Balanced)"}),(0,Da.jsx)("span",{children:"1.0 (Creative)"})]}),(0,Da.jsxs)("p",{className:"mt-2 text-sm text-gray-500",children:["Controls response randomness and creativity.",(0,Da.jsx)("br",{}),(0,Da.jsx)("strong",{children:"Lower (0.0-0.4):"})," More focused, consistent, and deterministic. Best for factual Q&A, customer support.",(0,Da.jsx)("br",{}),(0,Da.jsx)("strong",{children:"Medium (0.5-0.7):"})," Balanced between consistency and variety. Good for most use cases.",(0,Da.jsx)("br",{}),(0,Da.jsx)("strong",{children:"Higher (0.8-1.0):"})," More creative and varied responses. Good for creative writing, brainstorming."]})]}),(0,Da.jsxs)("div",{children:[(0,Da.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Max Response Tokens"}),(0,Da.jsx)("input",{type:"number",min:"200",max:"8192",step:"100",value:he.max_tokens,onChange:e=>fe(qe(qe({},he),{},{max_tokens:parseInt(e.target.value)||200})),className:"block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-primary-500 focus:border-primary-500"}),(0,Da.jsxs)("p",{className:"mt-2 text-sm text-gray-500",children:["Maximum length of each agent response (200-8192 tokens).",(0,Da.jsx)("br",{}),(0,Da.jsx)("strong",{children:"Lower (200-1000):"})," Short, concise responses. Faster and cheaper. Good for quick Q&A.",(0,Da.jsx)("br",{}),(0,Da.jsx)("strong",{children:"Medium (1000-4096):"})," Standard length responses. Balanced cost/quality.",(0,Da.jsx)("br",{}),(0,Da.jsx)("strong",{children:"Higher (4096-8192):"})," Longer, detailed explanations. Higher cost per response.",(0,Da.jsx)("br",{}),(0,Da.jsx)("span",{className:"text-xs",children:"Note: ~1 token \u2248 0.75 words. 4096 tokens \u2248 3000 words."})]})]}),(0,Da.jsxs)("div",{children:[(0,Da.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["VAD Threshold: ",(0,Da.jsx)("span",{className:"text-primary-600 font-semibold",children:he.vad_threshold})]}),(0,Da.jsx)("input",{type:"range",min:"0.1",max:"1",step:"0.1",value:he.vad_threshold,onChange:e=>fe(qe(qe({},he),{},{vad_threshold:parseFloat(e.target.value)})),className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer"}),(0,Da.jsxs)("div",{className:"flex justify-between text-xs text-gray-500 mt-1",children:[(0,Da.jsx)("span",{children:"0.1 (Sensitive)"}),(0,Da.jsx)("span",{children:"0.5 (Balanced)"}),(0,Da.jsx)("span",{children:"1.0 (Strict)"})]}),(0,Da.jsxs)("p",{className:"mt-2 text-sm text-gray-500",children:["Voice Activity Detection sensitivity - determines how sensitive the AI is to detecting speech.",(0,Da.jsx)("br",{}),(0,Da.jsx)("strong",{children:"Lower (0.1-0.3):"})," Very sensitive. Picks up quiet speech and whispers. May detect background noise as speech.",(0,Da.jsx)("br",{}),(0,Da.jsx)("strong",{children:"Medium (0.4-0.6):"})," Balanced. Good for normal phone conversations.",(0,Da.jsx)("br",{}),(0,Da.jsx)("strong",{children:"Higher (0.7-1.0):"})," Only detects clear, loud speech. Good for noisy environments but may miss quiet speakers.",(0,Da.jsx)("br",{}),(0,Da.jsx)("span",{className:"text-amber-600",children:"\u26a0\ufe0f If users complain the agent doesn't respond, lower this value. If it responds to background noise, increase it."})]})]}),(0,Da.jsxs)("div",{children:[(0,Da.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Silence Duration (ms)"}),(0,Da.jsx)("input",{type:"number",min:"200",max:"2000",step:"100",value:he.silence_duration_ms,onChange:e=>fe(qe(qe({},he),{},{silence_duration_ms:parseInt(e.target.value)||500})),className:"block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-primary-500 focus:border-primary-500"}),(0,Da.jsxs)("p",{className:"mt-2 text-sm text-gray-500",children:["How long (in milliseconds) to wait after user stops speaking before agent responds (200-2000ms).",(0,Da.jsx)("br",{}),(0,Da.jsx)("strong",{children:"Lower (200-400ms):"})," Agent responds very quickly. May interrupt users who pause mid-sentence.",(0,Da.jsx)("br",{}),(0,Da.jsx)("strong",{children:"Medium (500-700ms):"})," Balanced. Good for most conversations.",(0,Da.jsx)("br",{}),(0,Da.jsx)("strong",{children:"Higher (800-2000ms):"})," Agent waits longer. Better for users who speak slowly or pause often.",(0,Da.jsx)("br",{}),(0,Da.jsx)("span",{className:"text-xs",children:"Recommended: 500ms for English, 700ms for Urdu (allows for thinking pauses)"})]})]}),(0,Da.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-md p-4",children:[(0,Da.jsx)("h4",{className:"text-sm font-medium text-blue-900 mb-2",children:"\ud83d\udca1 Quick Tips"}),(0,Da.jsxs)("ul",{className:"text-sm text-blue-800 space-y-1 list-disc list-inside",children:[(0,Da.jsx)("li",{children:"Start with default values and adjust based on user feedback"}),(0,Da.jsx)("li",{children:"Test calls in your actual environment before going live"}),(0,Da.jsx)("li",{children:"Lower temperature for consistent banking/support, higher for sales/creative"}),(0,Da.jsx)("li",{children:"Higher VAD threshold if you have noisy call centers"}),(0,Da.jsx)("li",{children:"Monitor call costs - higher tokens and GPT-4o increase costs significantly"})]})]})]})]}),U&&(0,Da.jsxs)("div",{className:"bg-white shadow rounded-lg",children:[(0,Da.jsxs)("div",{className:"px-6 py-5 border-b border-gray-200 flex items-center justify-between",children:[(0,Da.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Functions"}),(0,Da.jsxs)("button",{onClick:()=>lt(),className:"inline-flex items-center px-3 py-1 border border-transparent rounded-md text-sm font-medium text-white bg-primary-600 hover:bg-primary-700",children:[(0,Da.jsx)(Qa,{className:"w-4 h-4 mr-1"}),"Add Function"]})]}),(0,Da.jsx)("div",{className:"px-6 py-5",children:0===ge.length?(0,Da.jsx)("p",{className:"text-sm text-gray-500 text-center py-4",children:"No functions defined. Add functions to extend agent capabilities."}):(0,Da.jsx)("ul",{className:"space-y-3",children:ge.map(e=>(0,Da.jsx)("li",{className:"border rounded-lg p-4 hover:bg-gray-50",children:(0,Da.jsxs)("div",{className:"flex items-start justify-between",children:[(0,Da.jsxs)("div",{className:"flex-1",children:[(0,Da.jsx)("h4",{className:"text-sm font-medium text-gray-900",children:e.name}),(0,Da.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:e.description}),(0,Da.jsxs)("div",{className:"mt-2 flex items-center space-x-4 text-xs text-gray-500",children:[(0,Da.jsx)("span",{className:"px-2 py-1 bg-gray-100 rounded",children:e.execution_mode}),(0,Da.jsx)("span",{className:"px-2 py-1 bg-blue-100 text-blue-700 rounded",children:e.handler_type}),e.api_endpoint&&(0,Da.jsx)("span",{className:"px-2 py-1 bg-green-100 text-green-700 rounded",children:e.api_method})]}),e.api_endpoint&&(0,Da.jsx)("div",{className:"mt-2 text-xs text-gray-600 font-mono bg-gray-50 p-2 rounded",children:e.api_endpoint})]}),(0,Da.jsxs)("div",{className:"flex space-x-2 ml-4",children:["api"===e.handler_type&&(0,Da.jsx)("button",{onClick:()=>(e=>{var t;oe(e),ue(null),me(!1);const r={};null!==(t=e.parameters)&&void 0!==t&&t.properties&&Object.keys(e.parameters.properties).forEach(e=>{r[e]=""}),ce(r),se(!0)})(e),className:"text-green-500 hover:text-green-700",title:"Test function",children:(0,Da.jsx)(xs,{className:"w-4 h-4"})}),(0,Da.jsx)("button",{onClick:()=>lt(e),className:"text-gray-400 hover:text-gray-600",children:(0,Da.jsx)(ts,{className:"w-4 h-4"})}),(0,Da.jsx)("button",{onClick:()=>ct(e.id),className:"text-red-400 hover:text-red-600",children:(0,Da.jsx)(ns,{className:"w-4 h-4"})})]})]})},e.id))})})]}),ye&&(0,Da.jsx)("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:(0,Da.jsxs)("div",{className:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20",children:[(0,Da.jsx)("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity",onClick:()=>ve(!1)}),(0,Da.jsxs)("div",{className:"relative bg-white rounded-lg max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[(0,Da.jsx)("div",{className:"sticky top-0 bg-white px-6 py-4 border-b border-gray-200 z-10",children:(0,Da.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Da.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:be?"Edit Function":"Add Function"}),(0,Da.jsxs)("div",{className:"flex space-x-2",children:[(0,Da.jsx)("button",{onClick:()=>pt("checkBalance"),className:"text-xs px-2 py-1 bg-gray-100 hover:bg-gray-200 rounded",children:"Example: Check Balance"}),(0,Da.jsx)("button",{onClick:()=>pt("bookAppointment"),className:"text-xs px-2 py-1 bg-gray-100 hover:bg-gray-200 rounded",children:"Example: Book Appointment"}),(0,Da.jsx)("button",{onClick:()=>pt("sendSMS"),className:"text-xs px-2 py-1 bg-gray-100 hover:bg-gray-200 rounded",children:"Example: Send SMS"}),(0,Da.jsx)("button",{onClick:()=>pt("transferCall"),className:"text-xs px-2 py-1 bg-gray-100 hover:bg-gray-200 rounded",children:"Example: Transfer Call"})]})]})}),(0,Da.jsxs)("div",{className:"px-6 py-5 space-y-6",children:[(0,Da.jsxs)("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2",children:[(0,Da.jsxs)("div",{className:"sm:col-span-2",children:[(0,Da.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Function Name *"}),(0,Da.jsx)("input",{type:"text",value:Te.name,onChange:e=>Me(qe(qe({},Te),{},{name:e.target.value})),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-primary-500 focus:border-primary-500 font-mono",placeholder:"check_customer_balance"}),(0,Da.jsx)("p",{className:"mt-1 text-xs text-gray-500",children:"Use snake_case for function names"})]}),(0,Da.jsxs)("div",{className:"sm:col-span-2",children:[(0,Da.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Description *"}),(0,Da.jsx)("textarea",{value:Te.description,onChange:e=>Me(qe(qe({},Te),{},{description:e.target.value})),rows:3,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-primary-500 focus:border-primary-500",placeholder:"Check the current balance of a customer account. Returns balance information including available credit and pending transactions."}),(0,Da.jsx)("p",{className:"mt-1 text-xs text-gray-500",children:"Clear description helps the AI understand when to call this function"})]}),(0,Da.jsxs)("div",{children:[(0,Da.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Execution Mode"}),(0,Da.jsxs)("select",{value:Te.execution_mode,onChange:e=>Me(qe(qe({},Te),{},{execution_mode:e.target.value})),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-primary-500 focus:border-primary-500",children:[(0,Da.jsx)("option",{value:"sync",children:"Synchronous (wait for response)"}),(0,Da.jsx)("option",{value:"async",children:"Asynchronous (fire and forget)"})]})]}),(0,Da.jsxs)("div",{children:[(0,Da.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Handler Type"}),(0,Da.jsxs)("select",{value:Te.handler_type,onChange:e=>Me(qe(qe({},Te),{},{handler_type:e.target.value})),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-primary-500 focus:border-primary-500",children:[(0,Da.jsx)("option",{value:"inline",children:"Inline (handled by bridge)"}),(0,Da.jsx)("option",{value:"api",children:"External API"})]})]})]}),"api"===Te.handler_type&&(0,Da.jsxs)("div",{className:"border border-gray-300 rounded-lg p-4 bg-gray-50",children:[(0,Da.jsx)("h4",{className:"text-sm font-medium text-gray-900 mb-4",children:"API Configuration"}),(0,Da.jsxs)("div",{className:"space-y-4",children:[(0,Da.jsxs)("div",{className:"flex space-x-2",children:[(0,Da.jsx)("div",{className:"w-32",children:(0,Da.jsxs)("select",{value:Te.api_method,onChange:e=>Me(qe(qe({},Te),{},{api_method:e.target.value})),className:"block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-primary-500 focus:border-primary-500 font-semibold",children:[(0,Da.jsx)("option",{value:"GET",children:"GET"}),(0,Da.jsx)("option",{value:"POST",children:"POST"}),(0,Da.jsx)("option",{value:"PUT",children:"PUT"}),(0,Da.jsx)("option",{value:"PATCH",children:"PATCH"}),(0,Da.jsx)("option",{value:"DELETE",children:"DELETE"})]})}),(0,Da.jsx)("div",{className:"flex-1",children:(0,Da.jsx)("input",{type:"text",value:Te.api_endpoint,onChange:e=>Me(qe(qe({},Te),{},{api_endpoint:e.target.value})),className:"block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-primary-500 focus:border-primary-500 font-mono text-sm",placeholder:"https://api.example.com/v1/customers/{{customer_id}}/balance"})})]}),(0,Da.jsxs)("p",{className:"text-xs text-gray-500",children:["Use ","{{parameter_name}}"," for dynamic values from function parameters"]}),(0,Da.jsxs)("div",{children:[(0,Da.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,Da.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Headers"}),(0,Da.jsx)("button",{onClick:()=>Le(!Fe),className:"text-sm text-primary-600 hover:text-primary-700",children:Fe?"Cancel":"+ Add Header"})]}),Fe&&(0,Da.jsxs)("div",{className:"mb-3 p-3 border border-gray-300 rounded-md bg-white",children:[(0,Da.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,Da.jsx)("input",{type:"text",value:De.key,onChange:e=>Re(qe(qe({},De),{},{key:e.target.value})),className:"block w-full border border-gray-300 rounded-md shadow-sm py-1 px-2 text-sm font-mono",placeholder:"Authorization"}),(0,Da.jsx)("input",{type:"text",value:De.value,onChange:e=>Re(qe(qe({},De),{},{value:e.target.value})),className:"block w-full border border-gray-300 rounded-md shadow-sm py-1 px-2 text-sm font-mono",placeholder:"Bearer YOUR_API_KEY"})]}),(0,Da.jsx)("button",{onClick:()=>{De.key?(Me(qe(qe({},Te),{},{api_headers:[...Te.api_headers,qe({},De)]})),Re({key:"",value:""}),Le(!1)):nr.error("Header key is required")},className:"mt-2 w-full px-3 py-1 bg-primary-600 text-white text-sm rounded-md hover:bg-primary-700",children:"Add Header"})]}),Te.api_headers.length>0&&(0,Da.jsx)("div",{className:"space-y-2",children:Te.api_headers.map((e,t)=>(0,Da.jsxs)("div",{className:"flex items-center space-x-2 p-2 bg-white border border-gray-200 rounded",children:[(0,Da.jsxs)("span",{className:"text-sm font-mono text-gray-700 flex-1",children:[(0,Da.jsx)("span",{className:"text-blue-600",children:e.key}),": ",e.value]}),(0,Da.jsx)("button",{onClick:()=>(e=>{Me(qe(qe({},Te),{},{api_headers:Te.api_headers.filter((t,r)=>r!==e)}))})(t),className:"text-red-400 hover:text-red-600",children:(0,Da.jsx)(ss,{className:"w-4 h-4"})})]},t))})]}),["POST","PUT","PATCH"].includes(Te.api_method)&&(0,Da.jsxs)("div",{children:[(0,Da.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Body"}),(0,Da.jsxs)("div",{className:"flex space-x-2 mb-3",children:[(0,Da.jsx)("button",{onClick:()=>ut("none"),className:"px-3 py-1 text-sm rounded ".concat("none"===Te.api_body_type?"bg-primary-600 text-white":"bg-white text-gray-700 border border-gray-300 hover:bg-gray-50"),children:"None"}),(0,Da.jsx)("button",{onClick:()=>ut("json"),className:"px-3 py-1 text-sm rounded ".concat("json"===Te.api_body_type?"bg-primary-600 text-white":"bg-white text-gray-700 border border-gray-300 hover:bg-gray-50"),children:"JSON (raw)"}),(0,Da.jsx)("button",{onClick:()=>ut("urlencoded"),className:"px-3 py-1 text-sm rounded ".concat("urlencoded"===Te.api_body_type?"bg-primary-600 text-white":"bg-white text-gray-700 border border-gray-300 hover:bg-gray-50"),children:"x-www-form-urlencoded"}),(0,Da.jsx)("button",{onClick:()=>ut("form-data"),className:"px-3 py-1 text-sm rounded ".concat("form-data"===Te.api_body_type?"bg-primary-600 text-white":"bg-white text-gray-700 border border-gray-300 hover:bg-gray-50"),children:"form-data"})]}),"json"===Te.api_body_type&&(0,Da.jsxs)("div",{children:[(0,Da.jsx)("textarea",{value:Ve,onChange:e=>Ge(e.target.value),rows:10,className:"block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 font-mono text-xs focus:outline-none focus:ring-primary-500 focus:border-primary-500 bg-gray-900 text-green-400",placeholder:'{\n  "customer_id": "{{customer_id}}",\n  "amount": "{{amount}}"\n}'}),(0,Da.jsxs)("p",{className:"mt-1 text-xs text-gray-500",children:["Use ","{{parameter_name}}"," to inject parameter values into the body"]})]}),("form-data"===Te.api_body_type||"urlencoded"===Te.api_body_type)&&(0,Da.jsxs)("div",{children:[(0,Da.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,Da.jsx)("span",{className:"text-xs text-gray-500",children:"Key-Value Pairs"}),(0,Da.jsx)("button",{onClick:()=>Ke(!He),className:"text-sm text-primary-600 hover:text-primary-700",children:He?"Cancel":"+ Add Field"})]}),He&&(0,Da.jsxs)("div",{className:"mb-3 p-3 border border-gray-300 rounded-md bg-white",children:[(0,Da.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,Da.jsx)("input",{type:"text",value:Ye.key,onChange:e=>Je(qe(qe({},Ye),{},{key:e.target.value})),className:"block w-full border border-gray-300 rounded-md shadow-sm py-1 px-2 text-sm font-mono",placeholder:"field_name"}),(0,Da.jsx)("input",{type:"text",value:Ye.value,onChange:e=>Je(qe(qe({},Ye),{},{value:e.target.value})),className:"block w-full border border-gray-300 rounded-md shadow-sm py-1 px-2 text-sm font-mono",placeholder:"{{parameter_name}} or value"})]}),(0,Da.jsx)("button",{onClick:()=>{Ye.key?(ze([...Ue,qe({},Ye)]),Je({key:"",value:"",type:"text"}),Ke(!1)):nr.error("Key is required")},className:"mt-2 w-full px-3 py-1 bg-primary-600 text-white text-sm rounded-md hover:bg-primary-700",children:"Add Field"})]}),Ue.length>0?(0,Da.jsx)("div",{className:"space-y-2",children:Ue.map((e,t)=>(0,Da.jsxs)("div",{className:"flex items-center space-x-2 p-2 bg-white border border-gray-200 rounded",children:[(0,Da.jsxs)("span",{className:"text-sm font-mono text-gray-700 flex-1",children:[(0,Da.jsx)("span",{className:"text-blue-600",children:e.key})," = ",e.value]}),(0,Da.jsx)("button",{onClick:()=>(e=>{ze(Ue.filter((t,r)=>r!==e))})(t),className:"text-red-400 hover:text-red-600",children:(0,Da.jsx)(ss,{className:"w-4 h-4"})})]},t))}):(0,Da.jsx)("p",{className:"text-sm text-gray-500 text-center py-4 bg-white border border-gray-200 rounded",children:"No fields added"}),(0,Da.jsxs)("p",{className:"mt-2 text-xs text-gray-500",children:["Use ","{{parameter_name}}"," to inject parameter values"]})]}),"none"===Te.api_body_type&&(0,Da.jsx)("p",{className:"text-sm text-gray-500 text-center py-4 bg-white border border-gray-200 rounded",children:"No body will be sent with this request"})]}),(0,Da.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,Da.jsxs)("div",{children:[(0,Da.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Timeout (ms)"}),(0,Da.jsx)("input",{type:"number",value:Te.timeout_ms,onChange:e=>Me(qe(qe({},Te),{},{timeout_ms:parseInt(e.target.value)})),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-primary-500 focus:border-primary-500"})]}),(0,Da.jsxs)("div",{children:[(0,Da.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Retries"}),(0,Da.jsx)("input",{type:"number",value:Te.retries,onChange:e=>Me(qe(qe({},Te),{},{retries:parseInt(e.target.value)})),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-primary-500 focus:border-primary-500"})]})]}),(0,Da.jsxs)("div",{className:"flex items-center justify-between p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:[(0,Da.jsxs)("div",{className:"flex-1",children:[(0,Da.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Skip SSL Verification"}),(0,Da.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Enable for endpoints with self-signed or invalid SSL certificates. Use with caution."})]}),(0,Da.jsx)("div",{className:"ml-4",children:(0,Da.jsx)("button",{type:"button",onClick:()=>Me(qe(qe({},Te),{},{skip_ssl_verify:!Te.skip_ssl_verify})),className:"relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 ".concat(Te.skip_ssl_verify?"bg-yellow-500":"bg-gray-200"),children:(0,Da.jsx)("span",{className:"pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out ".concat(Te.skip_ssl_verify?"translate-x-5":"translate-x-0")})})})]}),Te.skip_ssl_verify&&(0,Da.jsxs)("div",{className:"flex items-center p-2 bg-yellow-100 border border-yellow-300 rounded text-yellow-800 text-xs",children:[(0,Da.jsx)("svg",{className:"w-4 h-4 mr-2 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:(0,Da.jsx)("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),"SSL verification is disabled. Only use for internal/development APIs with self-signed certificates."]})]})]}),(0,Da.jsxs)("div",{className:"border border-gray-300 rounded-lg p-4",children:[(0,Da.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,Da.jsx)("label",{className:"block text-sm font-medium text-gray-900",children:"Parameters"}),(0,Da.jsxs)("div",{className:"flex space-x-2",children:[(0,Da.jsx)("button",{onClick:()=>Ze(!Qe),className:"text-xs px-2 py-1 bg-gray-100 hover:bg-gray-200 rounded",children:Qe?"Form View":"JSON View"}),(0,Da.jsx)("button",{onClick:()=>nt(!rt),className:"text-sm text-primary-600 hover:text-primary-700",children:rt?"Cancel":"+ Add Parameter"})]})]}),Qe&&(0,Da.jsxs)("div",{className:"mb-4",children:[(0,Da.jsx)("textarea",{value:Xe,onChange:e=>$e(e.target.value),rows:15,className:"block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 font-mono text-xs focus:outline-none focus:ring-primary-500 focus:border-primary-500 bg-gray-900 text-green-400"}),(0,Da.jsx)("button",{onClick:()=>{try{const e=JSON.parse(Xe);Me(qe(qe({},Te),{},{parameters:e})),Ze(!1),nr.success("Parameters updated from JSON")}catch(We){nr.error("Invalid JSON: "+We.message)}},className:"mt-2 px-3 py-1 bg-primary-600 text-white text-sm rounded-md hover:bg-primary-700",children:"Update from JSON"})]}),!Qe&&rt&&(0,Da.jsxs)("div",{className:"mb-4 p-4 border border-gray-300 rounded-md bg-gray-50",children:[(0,Da.jsxs)("div",{className:"space-y-3",children:[(0,Da.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,Da.jsxs)("div",{children:[(0,Da.jsx)("label",{className:"block text-xs font-medium text-gray-700",children:"Name"}),(0,Da.jsx)("input",{type:"text",value:et.name,onChange:e=>tt(qe(qe({},et),{},{name:e.target.value})),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-1 px-2 text-sm",placeholder:"customer_id"})]}),(0,Da.jsxs)("div",{children:[(0,Da.jsx)("label",{className:"block text-xs font-medium text-gray-700",children:"Type"}),(0,Da.jsxs)("select",{value:et.type,onChange:e=>tt(qe(qe({},et),{},{type:e.target.value})),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-1 px-2 text-sm",children:[(0,Da.jsx)("option",{value:"string",children:"String"}),(0,Da.jsx)("option",{value:"number",children:"Number"}),(0,Da.jsx)("option",{value:"boolean",children:"Boolean"}),(0,Da.jsx)("option",{value:"object",children:"Object"}),(0,Da.jsx)("option",{value:"array",children:"Array"})]})]})]}),(0,Da.jsxs)("div",{children:[(0,Da.jsx)("label",{className:"block text-xs font-medium text-gray-700",children:"Description"}),(0,Da.jsx)("input",{type:"text",value:et.description,onChange:e=>tt(qe(qe({},et),{},{description:e.target.value})),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-1 px-2 text-sm",placeholder:"The customer's unique identifier"})]}),"string"===et.type&&(0,Da.jsxs)("div",{children:[(0,Da.jsx)("label",{className:"block text-xs font-medium text-gray-700",children:"Enum Values (comma-separated, optional)"}),(0,Da.jsx)("input",{type:"text",value:et.enum,onChange:e=>tt(qe(qe({},et),{},{enum:e.target.value})),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-1 px-2 text-sm",placeholder:"active, pending, inactive"})]}),"object"===et.type&&(0,Da.jsxs)("div",{children:[(0,Da.jsx)("label",{className:"block text-xs font-medium text-gray-700",children:"Properties (JSON)"}),(0,Da.jsx)("textarea",{value:et.properties,onChange:e=>tt(qe(qe({},et),{},{properties:e.target.value})),rows:4,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-1 px-2 text-sm font-mono",placeholder:'{\n  "name": { "type": "string" },\n  "age": { "type": "number" }\n}'})]}),"array"===et.type&&(0,Da.jsxs)("div",{children:[(0,Da.jsx)("label",{className:"block text-xs font-medium text-gray-700",children:"Items Schema (JSON)"}),(0,Da.jsx)("textarea",{value:et.items,onChange:e=>tt(qe(qe({},et),{},{items:e.target.value})),rows:4,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-1 px-2 text-sm font-mono",placeholder:'{ "type": "string" }'})]}),(0,Da.jsx)("div",{children:(0,Da.jsxs)("label",{className:"flex items-center",children:[(0,Da.jsx)("input",{type:"checkbox",checked:et.required,onChange:e=>tt(qe(qe({},et),{},{required:e.target.checked})),className:"rounded border-gray-300 text-primary-600 focus:ring-primary-500"}),(0,Da.jsx)("span",{className:"ml-2 text-sm text-gray-700",children:"Required"})]})})]}),(0,Da.jsx)("button",{onClick:()=>{if(!et.name)return void nr.error("Parameter name is required");const e={type:et.type,description:et.description};if(et.enum&&"string"===et.type&&(e.enum=et.enum.split(",").map(e=>e.trim())),"object"===et.type&&et.properties)try{e.properties=JSON.parse(et.properties)}catch(We){return void nr.error("Invalid JSON for object properties")}if("array"===et.type&&et.items)try{e.items=JSON.parse(et.items)}catch(We){return void nr.error("Invalid JSON for array items")}const t=qe(qe({},Te.parameters.properties),{},{[et.name]:e}),r=et.required?[...Te.parameters.required,et.name]:Te.parameters.required,n=qe(qe({},Te.parameters),{},{properties:t,required:r});Me(qe(qe({},Te),{},{parameters:n})),$e(JSON.stringify(n,null,2)),tt({name:"",type:"string",description:"",required:!1,enum:"",properties:"",items:""}),nt(!1)},className:"mt-3 w-full px-3 py-1 bg-primary-600 text-white text-sm rounded-md hover:bg-primary-700",children:"Add Parameter"})]}),!Qe&&Object.keys(Te.parameters.properties).length>0&&(0,Da.jsx)("div",{className:"space-y-2",children:Object.entries(Te.parameters.properties).map(e=>{let[t,r]=e;return(0,Da.jsxs)("div",{className:"flex items-start justify-between p-3 border border-gray-200 rounded-md bg-white",children:[(0,Da.jsxs)("div",{className:"flex-1",children:[(0,Da.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Da.jsx)("span",{className:"font-medium text-sm font-mono",children:t}),(0,Da.jsx)("span",{className:"text-xs px-2 py-0.5 bg-blue-100 text-blue-700 rounded",children:r.type}),Te.parameters.required.includes(t)&&(0,Da.jsx)("span",{className:"text-xs px-2 py-0.5 bg-red-100 text-red-700 rounded",children:"required"})]}),(0,Da.jsx)("p",{className:"text-xs text-gray-600 mt-1",children:r.description}),r.enum&&(0,Da.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["Values: ",r.enum.join(", ")]})]}),(0,Da.jsx)("button",{onClick:()=>(e=>{const t=Te.parameters.properties,{[e]:r}=t,n=qa(t,[e].map(Be)),a=Te.parameters.required.filter(t=>t!==e),s=qe(qe({},Te.parameters),{},{properties:n,required:a});Me(qe(qe({},Te),{},{parameters:s})),$e(JSON.stringify(s,null,2))})(t),className:"text-red-400 hover:text-red-600 ml-2",children:(0,Da.jsx)(ss,{className:"w-4 h-4"})})]},t)})}),!Qe&&0===Object.keys(Te.parameters.properties).length&&(0,Da.jsx)("p",{className:"text-sm text-gray-500 text-center py-4",children:"No parameters defined. Add parameters that the AI can use when calling this function."})]})]}),(0,Da.jsxs)("div",{className:"sticky bottom-0 bg-gray-50 px-6 py-4 border-t border-gray-200 flex justify-end space-x-3",children:[(0,Da.jsx)("button",{onClick:()=>ve(!1),className:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50",children:"Cancel"}),(0,Da.jsx)("button",{onClick:async()=>{if(!Te.name||!Te.description)return void nr.error("Name and description are required");const e={};Te.api_headers.forEach(t=>{e[t.key]=t.value});let t=null;if("api"===Te.handler_type&&"GET"!==Te.api_method)if("json"===Te.api_body_type)try{t=Ve?JSON.parse(Ve):null}catch(We){return void nr.error("Invalid JSON in body")}else"form-data"!==Te.api_body_type&&"urlencoded"!==Te.api_body_type||(t={},Ue.forEach(e=>{t[e.key]=e.value}));const r=qe(qe({},Te),{},{api_headers:e,api_body:t});Ne(!0);try{be?(await((e,t)=>Aa.put("/functions/".concat(e),t))(be.id,r),nr.success("Function updated")):(await((e,t)=>Aa.post("/functions/agent/".concat(e),t))(U,r),nr.success("Function added")),ve(!1),ot()}catch(n){nr.error("Failed to save function")}finally{Ne(!1)}},disabled:we,className:"px-4 py-2 border border-transparent rounded-md text-sm font-medium text-white bg-primary-600 hover:bg-primary-700 disabled:opacity-50",children:we?"Saving...":"Save Function"})]})]})]})}),ke&&(0,Da.jsx)("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:(0,Da.jsxs)("div",{className:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20",children:[(0,Da.jsx)("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity",onClick:()=>!Ae&&Se(!1)}),(0,Da.jsxs)("div",{className:"relative bg-white rounded-lg max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[(0,Da.jsxs)("div",{className:"sticky top-0 bg-white px-6 py-4 border-b border-gray-200 z-10",children:[(0,Da.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"AI Generated Instructions"}),Pe>0&&(0,Da.jsxs)("p",{className:"mt-1 text-sm text-gray-500",children:["Cost: $",Pe.toFixed(6)," (deducted from your credits)"]})]}),(0,Da.jsx)("div",{className:"px-6 py-5",children:Ae?(0,Da.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,Da.jsxs)("div",{className:"text-center",children:[(0,Da.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto mb-4"}),(0,Da.jsx)("p",{className:"text-sm text-gray-600",children:"Generating instructions..."}),(0,Da.jsx)("p",{className:"text-xs text-gray-500 mt-2",children:"Using AI to create optimized agent instructions"})]})}):(0,Da.jsxs)(Da.Fragment,{children:[(0,Da.jsxs)("div",{className:"mb-4",children:[(0,Da.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Generated Instructions"}),(0,Da.jsx)("textarea",{value:_e,onChange:e=>Ce(e.target.value),rows:20,className:"block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 font-mono text-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500"}),(0,Da.jsx)("p",{className:"mt-2 text-sm text-gray-500",children:"You can edit these instructions before accepting them."})]}),(0,Da.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-md p-4",children:[(0,Da.jsx)("h4",{className:"text-sm font-medium text-blue-900 mb-2",children:"Review Carefully"}),(0,Da.jsxs)("ul",{className:"text-sm text-blue-800 space-y-1 list-disc list-inside",children:[(0,Da.jsx)("li",{children:"Verify the instructions match your use case"}),(0,Da.jsx)("li",{children:"Check for any inappropriate content or errors"}),(0,Da.jsx)("li",{children:"Customize as needed before accepting"}),(0,Da.jsx)("li",{children:"Test the agent after applying instructions"})]})]})]})}),!Ae&&(0,Da.jsxs)("div",{className:"sticky bottom-0 bg-gray-50 px-6 py-4 border-t border-gray-200 flex justify-end space-x-3",children:[(0,Da.jsx)("button",{onClick:()=>{Se(!1),Ce(""),nr.info("Instructions discarded")},className:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50",children:"Discard"}),(0,Da.jsx)("button",{onClick:()=>{fe(qe(qe({},he),{},{instructions:_e})),Se(!1),nr.success("Instructions applied")},className:"px-4 py-2 border border-transparent rounded-md text-sm font-medium text-white bg-primary-600 hover:bg-primary-700",children:"Accept & Apply"})]})]})]})}),ae&&ie&&(0,Da.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,Da.jsxs)("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-2xl max-h-[90vh] overflow-hidden flex flex-col",children:[(0,Da.jsxs)("div",{className:"px-6 py-4 border-b border-gray-200 flex items-center justify-between bg-gray-50",children:[(0,Da.jsxs)("div",{children:[(0,Da.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[(0,Da.jsx)(xs,{className:"w-5 h-5 mr-2 text-green-600"}),"Test Function: ",ie.name]}),(0,Da.jsxs)("p",{className:"text-sm text-gray-500 mt-1",children:[ie.api_method," ",ie.api_endpoint]})]}),(0,Da.jsx)("button",{onClick:dt,className:"text-gray-400 hover:text-gray-600",children:(0,Da.jsx)(ss,{className:"w-6 h-6"})})]}),(0,Da.jsxs)("div",{className:"flex-1 overflow-y-auto p-6 space-y-6",children:[(null===(M=ie.parameters)||void 0===M?void 0:M.properties)&&Object.keys(ie.parameters.properties).length>0&&(0,Da.jsxs)("div",{children:[(0,Da.jsx)("h4",{className:"text-sm font-medium text-gray-900 mb-3",children:"Test Parameters"}),(0,Da.jsx)("div",{className:"space-y-3",children:Object.entries(ie.parameters.properties).map(e=>{var t;let[r,n]=e;return(0,Da.jsxs)("div",{children:[(0,Da.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[r,(null===(t=ie.parameters.required)||void 0===t?void 0:t.includes(r))&&(0,Da.jsx)("span",{className:"text-red-500 ml-1",children:"*"})]}),(0,Da.jsx)("input",{type:"text",value:le[r]||"",onChange:e=>ce(qe(qe({},le),{},{[r]:e.target.value})),placeholder:n.description||"Enter ".concat(r),className:"block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 text-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500"}),n.description&&(0,Da.jsx)("p",{className:"mt-1 text-xs text-gray-500",children:n.description}),n.enum&&(0,Da.jsxs)("p",{className:"mt-1 text-xs text-gray-500",children:["Allowed values: ",n.enum.join(", ")]})]},r)})})]}),(!(null!==(D=ie.parameters)&&void 0!==D&&D.properties)||0===Object.keys(ie.parameters.properties).length)&&(0,Da.jsx)("div",{className:"text-sm text-gray-500 bg-gray-50 p-4 rounded-lg",children:'This function has no parameters. Click "Run Test" to execute it.'}),de&&(0,Da.jsxs)("div",{children:[(0,Da.jsx)("h4",{className:"text-sm font-medium text-gray-900 mb-3",children:"Test Result"}),(0,Da.jsxs)("div",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium mb-4 ".concat(de.success?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:[de.success?"\u2713 Success":"\u2717 Failed",(null===(R=de.test_result)||void 0===R?void 0:R.status_code)&&(0,Da.jsxs)("span",{className:"ml-2",children:["(HTTP ",de.test_result.status_code,")"]}),(null===(F=de.test_result)||void 0===F?void 0:F.duration_ms)&&(0,Da.jsxs)("span",{className:"ml-2 text-gray-600",children:["\u2022 ",de.test_result.duration_ms,"ms"]})]}),de.request_info&&(0,Da.jsxs)("div",{className:"mb-4",children:[(0,Da.jsx)("h5",{className:"text-xs font-medium text-gray-700 mb-2",children:"Request"}),(0,Da.jsxs)("div",{className:"bg-gray-800 text-gray-100 rounded-lg p-3 text-xs font-mono overflow-x-auto",children:[(0,Da.jsxs)("div",{className:"text-blue-400",children:[de.request_info.method," ",de.request_info.url]}),de.request_info.body&&(0,Da.jsxs)("div",{className:"mt-2 text-gray-400",children:[(0,Da.jsx)("div",{className:"text-yellow-400",children:"Body:"}),(0,Da.jsx)("pre",{className:"whitespace-pre-wrap",children:JSON.stringify(de.request_info.body,null,2)})]})]})]}),(0,Da.jsxs)("div",{children:[(0,Da.jsx)("h5",{className:"text-xs font-medium text-gray-700 mb-2",children:"Response"}),(0,Da.jsx)("div",{className:"rounded-lg p-3 text-xs font-mono overflow-x-auto max-h-64 ".concat(de.success?"bg-gray-800 text-green-400":"bg-red-900 text-red-100"),children:null!==(L=de.test_result)&&void 0!==L&&L.error?(0,Da.jsxs)("div",{children:[(0,Da.jsxs)("div",{className:"text-red-400 font-bold",children:["Error: ",de.test_result.error]}),de.test_result.code&&(0,Da.jsxs)("div",{className:"text-red-300 mt-1",children:["Code: ",de.test_result.code]}),de.test_result.message&&(0,Da.jsx)("div",{className:"text-red-300 mt-1",children:de.test_result.message}),de.test_result.response_data&&(0,Da.jsx)("pre",{className:"mt-2 whitespace-pre-wrap text-gray-300",children:JSON.stringify(de.test_result.response_data,null,2)})]}):(0,Da.jsx)("pre",{className:"whitespace-pre-wrap",children:JSON.stringify(null===(B=de.test_result)||void 0===B?void 0:B.data,null,2)})})]})]})]}),(0,Da.jsxs)("div",{className:"px-6 py-4 border-t border-gray-200 bg-gray-50 flex justify-between items-center",children:[(0,Da.jsx)("div",{className:"text-xs text-gray-500",children:ie.skip_ssl_verify&&(0,Da.jsx)("span",{className:"text-yellow-600",children:"\u26a0\ufe0f SSL verification disabled"})}),(0,Da.jsxs)("div",{className:"flex space-x-3",children:[(0,Da.jsx)("button",{onClick:dt,className:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50",children:"Close"}),(0,Da.jsx)("button",{onClick:async()=>{if(ie){me(!0),ue(null);try{const e=await(a=ie.id,s=le,Aa.post("/functions/".concat(a,"/test"),{arguments:s}));ue(e.data)}catch(i){var e,t,r,n;ue({success:!1,test_result:{error:(null===(e=i.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.error)||i.message,message:(null===(r=i.response)||void 0===r||null===(n=r.data)||void 0===n?void 0:n.message)||"Failed to execute test"}})}finally{me(!1)}var a,s}},disabled:pe,className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md text-sm font-medium text-white bg-green-600 hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed",children:pe?(0,Da.jsxs)(Da.Fragment,{children:[(0,Da.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24",children:[(0,Da.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,Da.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Running..."]}):(0,Da.jsxs)(Da.Fragment,{children:[(0,Da.jsx)(xs,{className:"w-4 h-4 mr-2"}),"Run Test"]})})]})]})]})})]})}),Cs=Ha("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]),As=()=>{const{user:e}=Fa(),[t,r]=(0,a.useState)(0),[n,s]=(0,a.useState)([]),[i,o]=(0,a.useState)(null),[l,c]=(0,a.useState)(!0),[d,u]=(0,a.useState)(!1),[p,m]=(0,a.useState)(""),[h,f]=(0,a.useState)("");if(!["admin","super_admin"].includes(null===e||void 0===e?void 0:e.role))return(0,Da.jsx)(Navigate,{to:"/",replace:!0});(0,a.useEffect)(()=>{g()},[]);const g=async()=>{try{const[n,a,i]=await Promise.all([Ia(),(t={limit:20},Aa.get("/credits/transactions",{params:t})),(e=30,Aa.get("/credits/usage",{params:{days:e}}))]);r(n.data.balance),s(a.data.transactions),o(i.data)}catch(n){nr.error("Failed to load credits")}finally{c(!1)}var e,t};return l?(0,Da.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,Da.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):(0,Da.jsxs)("div",{className:"space-y-6",children:[(0,Da.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Da.jsxs)("div",{children:[(0,Da.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Credits"}),(0,Da.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Manage your account balance"})]}),("admin"===e.role||"super_admin"===e.role)&&(0,Da.jsxs)("button",{onClick:()=>u(!0),className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700",children:[(0,Da.jsx)(Qa,{className:"w-5 h-5 mr-2"}),"Add Credits"]})]}),(0,Da.jsxs)("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-3",children:[(0,Da.jsx)("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:(0,Da.jsx)("div",{className:"p-6",children:(0,Da.jsxs)("div",{className:"flex items-center",children:[(0,Da.jsx)("div",{className:"flex-shrink-0 bg-green-500 rounded-md p-3",children:(0,Da.jsx)(Ka,{className:"h-6 w-6 text-white"})}),(0,Da.jsx)("div",{className:"ml-5 w-0 flex-1",children:(0,Da.jsxs)("dl",{children:[(0,Da.jsx)("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Current Balance"}),(0,Da.jsxs)("dd",{className:"text-2xl font-semibold text-gray-900",children:["$",t.toFixed(2)]})]})})]})})}),(0,Da.jsx)("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:(0,Da.jsx)("div",{className:"p-6",children:(0,Da.jsxs)("div",{className:"flex items-center",children:[(0,Da.jsx)("div",{className:"flex-shrink-0 bg-red-500 rounded-md p-3",children:(0,Da.jsx)(Cs,{className:"h-6 w-6 text-white"})}),(0,Da.jsx)("div",{className:"ml-5 w-0 flex-1",children:(0,Da.jsxs)("dl",{children:[(0,Da.jsx)("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Usage (30 days)"}),(0,Da.jsxs)("dd",{className:"text-2xl font-semibold text-gray-900",children:["$",(null===i||void 0===i?void 0:i.total_cost.toFixed(2))||"0.00"]})]})})]})})}),(0,Da.jsx)("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:(0,Da.jsx)("div",{className:"p-6",children:(0,Da.jsxs)("div",{className:"flex items-center",children:[(0,Da.jsx)("div",{className:"flex-shrink-0 bg-blue-500 rounded-md p-3",children:(0,Da.jsx)(Xa,{className:"h-6 w-6 text-white"})}),(0,Da.jsx)("div",{className:"ml-5 w-0 flex-1",children:(0,Da.jsxs)("dl",{children:[(0,Da.jsx)("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Avg per Call"}),(0,Da.jsxs)("dd",{className:"text-2xl font-semibold text-gray-900",children:["$",(null===i||void 0===i?void 0:i.avg_cost_per_call.toFixed(4))||"0.0000"]})]})})]})})})]}),(0,Da.jsxs)("div",{className:"bg-white shadow rounded-lg",children:[(0,Da.jsx)("div",{className:"px-6 py-5 border-b border-gray-200",children:(0,Da.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Transaction History"})}),(0,Da.jsx)("div",{className:"overflow-x-auto",children:(0,Da.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,Da.jsx)("thead",{className:"bg-gray-50",children:(0,Da.jsxs)("tr",{children:[(0,Da.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),(0,Da.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),(0,Da.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"}),(0,Da.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Balance After"}),(0,Da.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Note"})]})}),(0,Da.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:0===n.length?(0,Da.jsx)("tr",{children:(0,Da.jsx)("td",{colSpan:"5",className:"px-6 py-4 text-center text-sm text-gray-500",children:"No transactions yet"})}):n.map(e=>(0,Da.jsxs)("tr",{children:[(0,Da.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:new Date(e.created_at).toLocaleDateString()}),(0,Da.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,Da.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat("add"===e.type?"bg-green-100 text-green-800":"deduct"===e.type?"bg-red-100 text-red-800":"bg-blue-100 text-blue-800"),children:e.type})}),(0,Da.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:(0,Da.jsxs)("span",{className:"add"===e.type?"text-green-600":"text-red-600",children:["add"===e.type?"+":"-","$",e.amount.toFixed(4)]})}),(0,Da.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:["$",e.balance_after.toFixed(4)]}),(0,Da.jsx)("td",{className:"px-6 py-4 text-sm text-gray-500",children:e.note||e.reference_type||"-"})]},e.id))})]})})]}),d&&(0,Da.jsx)("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:(0,Da.jsxs)("div",{className:"flex items-center justify-center min-h-screen px-4",children:[(0,Da.jsx)("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75",onClick:()=>u(!1)}),(0,Da.jsxs)("div",{className:"relative bg-white rounded-lg max-w-md w-full p-6",children:[(0,Da.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Add Credits"}),(0,Da.jsxs)("div",{className:"space-y-4",children:[(0,Da.jsxs)("div",{children:[(0,Da.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Amount ($)"}),(0,Da.jsx)("input",{type:"number",step:"0.01",value:p,onChange:e=>m(e.target.value),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-primary-500 focus:border-primary-500",placeholder:"100.00"})]}),(0,Da.jsxs)("div",{children:[(0,Da.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Note (optional)"}),(0,Da.jsx)("input",{type:"text",value:h,onChange:e=>f(e.target.value),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-primary-500 focus:border-primary-500",placeholder:"Monthly top-up"})]})]}),(0,Da.jsxs)("div",{className:"mt-6 flex justify-end space-x-3",children:[(0,Da.jsx)("button",{onClick:()=>u(!1),className:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50",children:"Cancel"}),(0,Da.jsx)("button",{onClick:async()=>{const t=parseFloat(p);if(!t||t<=0)nr.error("Please enter a valid amount");else try{await((e,t,r)=>Aa.post("/credits/add",{tenant_id:e,amount:t,note:r}))(e.id,t,h),nr.success("Added $".concat(t.toFixed(2)," credits")),u(!1),m(""),f(""),g()}catch(a){var r,n;nr.error((null===(r=a.response)||void 0===r||null===(n=r.data)||void 0===n?void 0:n.error)||"Failed to add credits")}},className:"px-4 py-2 border border-transparent rounded-md text-sm font-medium text-white bg-primary-600 hover:bg-primary-700",children:"Add Credits"})]})]})]})})]})},Os=()=>{const[e,t]=(0,a.useState)([]),[r,n]=(0,a.useState)(!0),[s,i]=(0,a.useState)(null);(0,a.useEffect)(()=>{o()},[]);const o=async()=>{try{const r=await(e={limit:50},Aa.get("/calls",{params:e}));t(r.data.calls)}catch(r){nr.error("Failed to load calls")}finally{n(!1)}var e},l=async e=>{try{const r=await(t=e.session_id,Aa.get("/calls/".concat(t)));i(r.data.call)}catch(r){nr.error("Failed to load call details")}var t},c=e=>{const t=parseFloat(e);return isNaN(t)?"0.0000":t.toFixed(4)};return r?(0,Da.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,Da.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):(0,Da.jsxs)("div",{className:"space-y-6",children:[(0,Da.jsxs)("div",{children:[(0,Da.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Call Logs"}),(0,Da.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"View and analyze call history"})]}),(0,Da.jsx)("div",{className:"bg-white shadow overflow-hidden rounded-lg",children:(0,Da.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,Da.jsx)("thead",{className:"bg-gray-50",children:(0,Da.jsxs)("tr",{children:[(0,Da.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Time"}),(0,Da.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Caller"}),(0,Da.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Agent"}),(0,Da.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Duration"}),(0,Da.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Cost"}),(0,Da.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,Da.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,Da.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:0===e.length?(0,Da.jsx)("tr",{children:(0,Da.jsx)("td",{colSpan:"7",className:"px-6 py-4 text-center text-sm text-gray-500",children:"No calls yet"})}):e.map(e=>(0,Da.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,Da.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:new Date(e.start_time).toLocaleString()}),(0,Da.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.caller_id||"Unknown"}),(0,Da.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.agent_name||"N/A"}),(0,Da.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.duration_seconds?"".concat(e.duration_seconds,"s"):"-"}),(0,Da.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:["$",c(e.final_cost)]}),(0,Da.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,Da.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat("completed"===e.status?"bg-green-100 text-green-800":"failed"===e.status?"bg-red-100 text-red-800":"insufficient_credits"===e.status?"bg-yellow-100 text-yellow-800":"bg-blue-100 text-blue-800"),children:e.status})}),(0,Da.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:(0,Da.jsx)("button",{onClick:()=>l(e),className:"text-primary-600 hover:text-primary-900",children:"View Details"})})]},e.id))})]})}),s&&(0,Da.jsx)("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:(0,Da.jsxs)("div",{className:"flex items-center justify-center min-h-screen px-4",children:[(0,Da.jsx)("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75",onClick:()=>i(null)}),(0,Da.jsxs)("div",{className:"relative bg-white rounded-lg max-w-3xl w-full p-6 max-h-screen overflow-y-auto",children:[(0,Da.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Call Details"}),(0,Da.jsxs)("div",{className:"space-y-4",children:[(0,Da.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,Da.jsxs)("div",{children:[(0,Da.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Session ID"}),(0,Da.jsx)("p",{className:"text-sm text-gray-900",children:s.session_id})]}),(0,Da.jsxs)("div",{children:[(0,Da.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Caller"}),(0,Da.jsx)("p",{className:"text-sm text-gray-900",children:s.caller_id})]}),(0,Da.jsxs)("div",{children:[(0,Da.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Duration"}),(0,Da.jsxs)("p",{className:"text-sm text-gray-900",children:[s.duration_seconds,"s"]})]}),(0,Da.jsxs)("div",{children:[(0,Da.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Final Cost"}),(0,Da.jsxs)("p",{className:"text-sm text-gray-900",children:["$",c(s.final_cost)]})]}),(0,Da.jsxs)("div",{children:[(0,Da.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Base Cost"}),(0,Da.jsxs)("p",{className:"text-sm text-gray-900",children:["$",c(s.base_cost)]})]}),(0,Da.jsxs)("div",{children:[(0,Da.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Profit"}),(0,Da.jsxs)("p",{className:"text-sm text-gray-900",children:["$",c(s.profit_amount)]})]}),(0,Da.jsxs)("div",{children:[(0,Da.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Audio Input"}),(0,Da.jsxs)("p",{className:"text-sm text-gray-900",children:[s.audio_input_seconds,"s"]})]}),(0,Da.jsxs)("div",{children:[(0,Da.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Audio Output"}),(0,Da.jsxs)("p",{className:"text-sm text-gray-900",children:[s.audio_output_seconds,"s"]})]}),(0,Da.jsxs)("div",{children:[(0,Da.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Text Input Tokens"}),(0,Da.jsx)("p",{className:"text-sm text-gray-900",children:s.text_input_tokens||0})]}),(0,Da.jsxs)("div",{children:[(0,Da.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Text Output Tokens"}),(0,Da.jsx)("p",{className:"text-sm text-gray-900",children:s.text_output_tokens||0})]})]}),s.function_calls&&s.function_calls.length>0&&(0,Da.jsxs)("div",{children:[(0,Da.jsx)("h4",{className:"text-sm font-medium text-gray-900 mb-2",children:"Function Calls"}),(0,Da.jsx)("ul",{className:"space-y-2",children:s.function_calls.map((e,t)=>(0,Da.jsxs)("li",{className:"border rounded p-3 text-sm",children:[(0,Da.jsx)("p",{className:"font-medium",children:e.function_name}),(0,Da.jsxs)("p",{className:"text-gray-600 mt-1",children:["Status: ",e.status," | Time: ",e.execution_time_ms,"ms"]}),e.arguments&&(0,Da.jsx)("pre",{className:"mt-2 text-xs bg-gray-50 p-2 rounded overflow-x-auto",children:JSON.stringify(JSON.parse(e.arguments),null,2)})]},t))})]})]}),(0,Da.jsx)("div",{className:"mt-6 flex justify-end",children:(0,Da.jsx)("button",{onClick:()=>i(null),className:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50",children:"Close"})})]})]})})]})},Ps=Ha("PhoneOff",[["path",{d:"M10.68 13.31a16 16 0 0 0 3.41 2.6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7 2 2 0 0 1 1.72 2v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.42 19.42 0 0 1-3.33-2.67m-2.67-3.34a19.79 19.79 0 0 1-3.07-8.63A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91",key:"z86iuo"}],["line",{x1:"22",x2:"2",y1:"2",y2:"22",key:"11kh81"}]]),Es=Ha("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),Ts=Ha("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),Is=Ha("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]),Ms=()=>{var e,t,r,n,s,i,o,l,c,d,u,p;const[m,h]=(0,a.useState)(!1),[f,g]=(0,a.useState)(new Map),[x,y]=(0,a.useState)(null),[v,b]=(0,a.useState)(new Map),j=(0,a.useRef)(null);(0,a.useEffect)(()=>{const e=new WebSocket("/aiva/ws");return j.current=e,e.onopen=()=>{console.log("Connected to monitor server"),h(!0)},e.onclose=()=>{console.log("Disconnected from monitor server"),h(!1)},e.onerror=e=>{console.error("WebSocket error:",e)},e.onmessage=e=>{try{const t=JSON.parse(e.data);w(t)}catch(t){console.error("Error parsing message:",t)}},()=>{e.readyState===WebSocket.OPEN&&e.close()}},[]);const w=e=>{switch(e.type){case"connection_added":case"connection_info":g(t=>{const r=new Map(t);return r.set(e.data.clientKey,e.data),r}),b(t=>{const r=new Map(t);return r.has(e.data.clientKey)||r.set(e.data.clientKey,[]),r});break;case"connection_updated":g(t=>{const r=new Map(t);return r.has(e.data.clientKey)&&r.set(e.data.clientKey,qe(qe({},r.get(e.data.clientKey)),e.data)),r});break;case"connection_removed":g(t=>{const r=new Map(t);return r.delete(e.data.clientKey),r});break;case"transcript":b(t=>{const r=new Map(t),n=r.get(e.data.clientKey)||[];return r.set(e.data.clientKey,[...n,{speaker:e.data.speaker,text:e.data.text,timestamp:e.data.timestamp}]),r});break;case"cost_update":g(t=>{const r=new Map(t);if(r.has(e.data.clientKey)){const t=r.get(e.data.clientKey);t.cost=e.data.cost,r.set(e.data.clientKey,t)}return r});break;case"function_call":case"function_response":b(t=>{const r=new Map(t),n=r.get(e.data.clientKey)||[];return r.set(e.data.clientKey,[...n,{speaker:"system",text:"function_call"===e.type?"\ud83d\udd27 Function call: ".concat(e.data.functionName):"\u2705 Function response: ".concat(e.data.functionName),timestamp:e.data.timestamp,details:e.data}]),r})}},N=Array.from(f.values()),k=x&&v.get(x.clientKey)||[];return(0,Da.jsxs)("div",{className:"space-y-6",children:[(0,Da.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Da.jsxs)("div",{children:[(0,Da.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Live Call Monitor"}),(0,Da.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Real-time monitoring of active calls"})]}),(0,Da.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Da.jsxs)("div",{className:"flex items-center px-3 py-1 rounded-full text-sm ".concat(m?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:[(0,Da.jsx)("div",{className:"w-2 h-2 rounded-full mr-2 ".concat(m?"bg-green-600 animate-pulse":"bg-red-600")}),m?"Connected":"Disconnected"]}),(0,Da.jsxs)("div",{className:"px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-sm font-medium",children:[N.length," Active"]})]})]}),(0,Da.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,Da.jsx)("div",{className:"lg:col-span-1",children:(0,Da.jsxs)("div",{className:"bg-white shadow rounded-lg overflow-hidden",children:[(0,Da.jsx)("div",{className:"px-4 py-3 border-b border-gray-200 bg-gray-50",children:(0,Da.jsx)("h2",{className:"text-sm font-semibold text-gray-900",children:"Active Calls"})}),(0,Da.jsx)("div",{className:"divide-y divide-gray-200 max-h-[calc(100vh-250px)] overflow-y-auto",children:0===N.length?(0,Da.jsxs)("div",{className:"px-4 py-8 text-center text-sm text-gray-500",children:[(0,Da.jsx)(Ps,{className:"w-12 h-12 mx-auto mb-3 text-gray-300"}),"No active calls"]}):N.map(e=>{var t;return(0,Da.jsxs)("button",{onClick:()=>y(e),className:"w-full px-4 py-4 text-left hover:bg-gray-50 transition-colors ".concat((null===x||void 0===x?void 0:x.clientKey)===e.clientKey?"bg-blue-50 border-l-4 border-blue-600":""),children:[(0,Da.jsxs)("div",{className:"flex items-start justify-between mb-2",children:[(0,Da.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Da.jsx)("div",{className:"w-3 h-3 rounded-full ".concat(e.userSpeaking?"bg-green-500 animate-pulse":e.agentSpeaking?"bg-blue-500 animate-pulse":"bg-gray-300")}),(0,Da.jsx)("span",{className:"text-sm font-medium text-gray-900",children:e.callerId||"Unknown"})]}),(0,Da.jsx)(Ja,{className:"w-4 h-4 text-green-600"})]}),(0,Da.jsxs)("div",{className:"text-xs text-gray-600 space-y-1",children:[(0,Da.jsxs)("div",{className:"flex items-center",children:[(0,Da.jsx)(Es,{className:"w-3 h-3 mr-1"}),e.agentName||"Unknown Agent"]}),(0,Da.jsxs)("div",{className:"flex items-center",children:[(0,Da.jsx)(Ts,{className:"w-3 h-3 mr-1"}),e.connectedAt?new Date(e.connectedAt).toLocaleTimeString():"N/A"]}),e.cost&&(0,Da.jsxs)("div",{className:"flex items-center font-semibold text-blue-600",children:[(0,Da.jsx)(Ka,{className:"w-3 h-3 mr-1"}),(null===(t=e.cost.formatted)||void 0===t?void 0:t.finalCost)||"$0.00"]})]}),(e.userSpeaking||e.agentSpeaking)&&(0,Da.jsxs)("div",{className:"mt-2 flex items-center space-x-1",children:[(0,Da.jsx)(Is,{className:"w-3 h-3 text-blue-600"}),(0,Da.jsx)("span",{className:"text-xs text-blue-600 font-medium",children:e.userSpeaking?"User Speaking":"Agent Speaking"})]})]},e.clientKey)})})]})}),(0,Da.jsx)("div",{className:"lg:col-span-2",children:(0,Da.jsx)("div",{className:"bg-white shadow rounded-lg overflow-hidden h-[calc(100vh-200px)] flex flex-col",children:x?(0,Da.jsxs)(Da.Fragment,{children:[(0,Da.jsx)("div",{className:"px-6 py-4 border-b border-gray-200 bg-gray-50",children:(0,Da.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Da.jsxs)("div",{children:[(0,Da.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:x.callerId||"Unknown Caller"}),(0,Da.jsxs)("p",{className:"text-sm text-gray-500",children:[x.agentName," \u2022 Session: ",x.sessionId]})]}),x.cost&&(0,Da.jsxs)("div",{className:"text-right",children:[(0,Da.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:(null===(e=x.cost.formatted)||void 0===e?void 0:e.finalCost)||"$0.00"}),(0,Da.jsx)("div",{className:"text-xs text-gray-500",children:(null===(t=x.cost.duration)||void 0===t?void 0:t.formatted)||"0s"})]})]})}),(0,Da.jsx)("div",{className:"flex-1 overflow-y-auto p-6 space-y-4",children:0===k.length?(0,Da.jsx)("div",{className:"flex items-center justify-center h-full text-gray-500",children:(0,Da.jsxs)("div",{className:"text-center",children:[(0,Da.jsx)(Is,{className:"w-12 h-12 mx-auto mb-3 text-gray-300"}),(0,Da.jsx)("p",{className:"text-sm",children:"Waiting for conversation..."})]})}):k.map((e,t)=>(0,Da.jsx)("div",{className:"flex ".concat("user"===e.speaker?"justify-start":"agent"===e.speaker?"justify-end":"justify-center"),children:"system"===e.speaker?(0,Da.jsx)("div",{className:"px-4 py-2 bg-yellow-50 border border-yellow-200 rounded-lg text-xs text-yellow-800",children:e.text}):(0,Da.jsxs)("div",{className:"max-w-[75%] px-4 py-3 rounded-lg ".concat("user"===e.speaker?"bg-gray-100 text-gray-900":"bg-blue-600 text-white"),children:[(0,Da.jsxs)("div",{className:"flex items-baseline space-x-2 mb-1",children:[(0,Da.jsx)("span",{className:"text-xs font-semibold uppercase opacity-75",children:e.speaker}),(0,Da.jsx)("span",{className:"text-xs opacity-50",children:new Date(e.timestamp).toLocaleTimeString()})]}),(0,Da.jsx)("p",{className:"text-sm leading-relaxed",children:e.text})]})},t))}),x.cost&&(0,Da.jsx)("div",{className:"px-6 py-3 border-t border-gray-200 bg-gray-50",children:(0,Da.jsxs)("div",{className:"grid grid-cols-4 gap-4 text-center text-xs",children:[(0,Da.jsxs)("div",{children:[(0,Da.jsx)("div",{className:"text-gray-500",children:"Audio In"}),(0,Da.jsxs)("div",{className:"font-semibold text-gray-900",children:[(null===(r=x.cost.audio)||void 0===r||null===(n=r.input)||void 0===n||null===(s=n.seconds)||void 0===s?void 0:s.toFixed(1))||0,"s"]})]}),(0,Da.jsxs)("div",{children:[(0,Da.jsx)("div",{className:"text-gray-500",children:"Audio Out"}),(0,Da.jsxs)("div",{className:"font-semibold text-gray-900",children:[(null===(i=x.cost.audio)||void 0===i||null===(o=i.output)||void 0===o||null===(l=o.seconds)||void 0===l?void 0:l.toFixed(1))||0,"s"]})]}),(0,Da.jsxs)("div",{children:[(0,Da.jsx)("div",{className:"text-gray-500",children:"Tokens In"}),(0,Da.jsx)("div",{className:"font-semibold text-gray-900",children:(null===(c=x.cost.text)||void 0===c||null===(d=c.input)||void 0===d?void 0:d.tokens)||0})]}),(0,Da.jsxs)("div",{children:[(0,Da.jsx)("div",{className:"text-gray-500",children:"Tokens Out"}),(0,Da.jsx)("div",{className:"font-semibold text-gray-900",children:(null===(u=x.cost.text)||void 0===u||null===(p=u.output)||void 0===p?void 0:p.tokens)||0})]})]})})]}):(0,Da.jsx)("div",{className:"flex items-center justify-center h-full text-gray-500",children:(0,Da.jsxs)("div",{className:"text-center",children:[(0,Da.jsx)(Ja,{className:"w-16 h-16 mx-auto mb-4 text-gray-300"}),(0,Da.jsx)("p",{className:"text-lg font-medium",children:"Select a call to view transcript"}),(0,Da.jsx)("p",{className:"text-sm mt-1",children:"Live transcripts will appear here"})]})})})})]})]})},Ds=Ha("MicOff",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M18.89 13.23A7.12 7.12 0 0 0 19 12v-2",key:"80xlxr"}],["path",{d:"M5 10v2a7 7 0 0 0 12 5",key:"p2k8kg"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]),Rs=Ha("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]),Fs=()=>{const[e,t]=(0,a.useState)([]),[r,n]=(0,a.useState)(null),[s,i]=(0,a.useState)(!1),[o,l]=(0,a.useState)(!1),[c,d]=(0,a.useState)([]),[u,p]=(0,a.useState)(0),[m,h]=(0,a.useState)(0),[f,g]=(0,a.useState)(null),[x,y]=(0,a.useState)(null),v=(0,a.useRef)([]),b=(0,a.useRef)(!1),j=(0,a.useRef)(null),w=(0,a.useRef)(null),N=(0,a.useRef)(0),[k,S]=(0,a.useState)(!1),_=(0,a.useRef)(null),C=(0,a.useRef)(null);(0,a.useEffect)(()=>(A(),()=>{B()}),[]);const A=async()=>{try{const e=await Oa();t(e.data.agents)}catch(e){nr.error("Failed to load agents")}};(0,a.useEffect)(()=>{if(!s)return;const e=setInterval(()=>{if(w.current){const e=(Date.now()-w.current)/6e4;h("deepgram"===x?.015*e:.024*e)}},1e3);return()=>clearInterval(e)},[s,x]);const O=async()=>{const e=await(t=r.id,Aa.post("/realtime/token",{agent_id:t}));var t;const{ephemeral_key:n,session_id:a}=e.data;g(a);const s=new WebSocket("wss://api.openai.com/v1/realtime?model=".concat(r.model),["realtime","openai-insecure-api-key.".concat(n),"openai-beta.realtime-v1"]);_.current=s,s.onopen=async()=>{console.log("Connected to OpenAI Realtime"),w.current=Date.now(),i(!0),S(!1),nr.success("Connected to OpenAI agent"),await M()},s.onmessage=e=>{const t=JSON.parse(e.data);E(t)},s.onerror=e=>{console.error("WebSocket error:",e),S(!1),nr.error("Connection error")},s.onclose=e=>{console.log("Disconnected from OpenAI"),i(!1),S(!1),L(),1005!==e.code&&nr.error("Connection closed: ".concat(e.reason||"Unknown error"))}},P=async()=>{const e=localStorage.getItem("token"),t=await Ca.post("".concat("/aiva/api","/realtime/token/deepgram"),{agent_id:r.id},{headers:{Authorization:"Bearer ".concat(e)}}),{api_key:n,session_id:a,agent:s}=t.data;g(a);const o=new WebSocket("wss://agent.deepgram.com/v1/agent/converse",["token",n]);_.current=o,o.onopen=async()=>{console.log("Connected to Deepgram Agent"),setTimeout(()=>{const e={type:"Settings",audio:{input:{encoding:"linear16",sample_rate:16e3},output:{encoding:"linear16",sample_rate:24e3,container:"none"}},agent:{listen:{provider:{type:"deepgram",model:s.model}},speak:{provider:{type:"deepgram",model:s.voice}},greeting:s.greeting||null,think:{provider:{type:"open_ai",model:"gpt-4o-mini"},prompt:s.instructions,functions:[]}}};console.log("\ud83d\udce4 Sending config"),_.current.send(JSON.stringify(e))},100)},o.onmessage=e=>{if(e.data instanceof Blob)e.data.arrayBuffer().then(e=>{const t=new Uint8Array(e);R(t)});else{const t=JSON.parse(e.data);T(t)}},o.onerror=e=>{console.error("Deepgram error:",e),S(!1),nr.error("Connection error")},o.onclose=e=>{var t;console.log("Disconnected from Deepgram:",e.code,e.reason),i(!1),S(!1),L(),null!==(t=_.current)&&void 0!==t&&t.keepaliveInterval&&clearInterval(_.current.keepaliveInterval),1e3!==e.code&&1005!==e.code&&nr.error("Connection closed: ".concat(e.reason||"Unknown error"))}},E=e=>{switch(console.log("OpenAI:",e.type),e.type){case"session.created":I();break;case"session.updated":setTimeout(()=>{var e;(null===(e=_.current)||void 0===e?void 0:e.readyState)===WebSocket.OPEN&&_.current.send(JSON.stringify({type:"response.create"}))},500);break;case"conversation.item.input_audio_transcription.completed":d(t=>[...t,{role:"user",content:e.transcript,timestamp:new Date}]);break;case"response.audio_transcript.done":d(t=>[...t,{role:"assistant",content:e.transcript,timestamp:new Date}]);break;case"response.audio.delta":D(e.delta)}},T=e=>{switch(console.log("Deepgram:",e.type,e.description),e.type){case"Welcome":console.log("\ud83d\udc4b Deepgram welcome");break;case"SettingsApplied":console.log("\u2705 Settings applied"),w.current=Date.now(),i(!0),S(!1),nr.success("Connected to Deepgram agent");const t=setInterval(()=>{var e;if((null===(e=_.current)||void 0===e?void 0:e.readyState)===WebSocket.OPEN)try{_.current.send(JSON.stringify({type:"KeepAlive"}))}catch(r){console.error("Keepalive error:",r),clearInterval(t)}else clearInterval(t)},5e3);_.current.keepaliveInterval=t,setTimeout(()=>{M()},500);break;case"ConversationText":"user"===e.role?d(t=>[...t,{role:"user",content:e.content,timestamp:new Date}]):"assistant"===e.role&&d(t=>[...t,{role:"assistant",content:e.content,timestamp:new Date}]);break;case"UserStartedSpeaking":console.log("\ud83c\udfa4 User speaking"),v.current=[],b.current=!1,N.current=0;break;case"AgentStartedSpeaking":console.log("\ud83d\udd0a Agent speaking");break;case"AgentAudioDone":console.log("\u2705 Agent audio done");break;case"Error":console.error("\u274c Deepgram error:",e),nr.error(e.description||e.error||"Deepgram error");break;default:console.log("\u2139\ufe0f Unhandled:",e.type)}},I=()=>{if(!_.current||_.current.readyState!==WebSocket.OPEN)return;const e={type:"session.update",session:{modalities:["text","audio"],instructions:r.instructions,voice:r.voice,input_audio_format:"pcm16",output_audio_format:"pcm16",input_audio_transcription:{model:"whisper-1",language:r.language},turn_detection:{type:"server_vad",threshold:parseFloat(r.vad_threshold||"0.5"),prefix_padding_ms:300,silence_duration_ms:parseInt(r.silence_duration_ms||"500"),create_response:!0},tools:[],max_response_output_tokens:parseInt(r.max_tokens||"4096"),temperature:parseFloat(r.temperature||"0.6")}};_.current.send(JSON.stringify(e))},M=async()=>{try{const e="deepgram"===x?16e3:24e3,t=await navigator.mediaDevices.getUserMedia({audio:{channelCount:1,sampleRate:e}});C.current=t;const r=new AudioContext({sampleRate:e});j.current=r;const n=r.createMediaStreamSource(t),a=r.createScriptProcessor(4096,1,1),i=r.createAnalyser();i.fftSize=256,n.connect(i);const l=new Uint8Array(i.frequencyBinCount),c=()=>{if(!s)return;i.getByteFrequencyData(l);const e=l.reduce((e,t)=>e+t)/l.length;p(e/255),requestAnimationFrame(c)};c(),a.onaudioprocess=e=>{if(!_.current||_.current.readyState!==WebSocket.OPEN||o)return;const t=e.inputBuffer.getChannelData(0),r=new Int16Array(t.length);for(let n=0;n<t.length;n++){const e=Math.max(-1,Math.min(1,t[n]));r[n]=e<0?32768*e:32767*e}if("openai"===x){const e=new Uint8Array(r.buffer);let t="";for(let r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);const n=btoa(t);_.current.send(JSON.stringify({type:"input_audio_buffer.append",audio:n}))}else"deepgram"===x&&_.current.send(r.buffer)},n.connect(a),a.connect(r.destination)}catch(e){console.error("Microphone error:",e),nr.error("Failed to access microphone")}},D=e=>{try{const t=atob(e),r=new Uint8Array(t.length);for(let e=0;e<t.length;e++)r[e]=t.charCodeAt(e);v.current.push(r),b.current||F()}catch(t){console.error("Audio error:",t)}},R=e=>{try{v.current.push(e),b.current||F()}catch(t){console.error("Error queueing audio:",t)}},F=async()=>{if("deepgram"===x){const e=2;if(v.current.length<e&&v.current.length>0)return void setTimeout(()=>F(),50)}if(0===v.current.length)return b.current=!1,void(N.current=0);b.current=!0;try{j.current&&"closed"!==j.current.state||(j.current=new(window.AudioContext||window.webkitAudioContext)({sampleRate:24e3}),N.current=j.current.currentTime);const e=j.current;let t;if("deepgram"===x){const e=Math.min(2,v.current.length);let r=0;const n=[];for(let t=0;t<e;t++){const e=v.current.shift(),t=new Int16Array(e.buffer||e);n.push(t),r+=t.length}t=new Int16Array(r);let a=0;for(const s of n)t.set(s,a),a+=s.length}else{const e=v.current.shift();t=new Int16Array(e.buffer||e)}const r=new Float32Array(t.length);for(let s=0;s<t.length;s++)r[s]=t[s]/(t[s]<0?32768:32767);const n=e.createBuffer(1,r.length,24e3);n.getChannelData(0).set(r);const a=e.createBufferSource();if(a.buffer=n,a.connect(e.destination),"deepgram"===x){const t=Math.max(N.current,e.currentTime);a.start(t),N.current=t+n.duration;const r=1e3*n.duration-50;setTimeout(()=>{F()},Math.max(0,r))}else a.onended=()=>{F()},a.start(0)}catch(e){console.error("Audio playback error:",e),b.current=!1,N.current=0,setTimeout(()=>F(),50)}},L=()=>{C.current&&(C.current.getTracks().forEach(e=>e.stop()),C.current=null),j.current&&(j.current.close(),j.current=null)},B=()=>{var e;if(null!==(e=_.current)&&void 0!==e&&e.keepaliveInterval&&clearInterval(_.current.keepaliveInterval),f&&_.current&&U(),_.current){if(_.current.readyState===WebSocket.OPEN)try{"deepgram"===x&&_.current.send(JSON.stringify({type:"EndSession"}))}catch(t){console.error("Error sending EndSession:",t)}_.current.close(),_.current=null}L(),v.current=[],b.current=!1,N.current=0,i(!1),g(null),y(null)},U=async()=>{try{const r=Date.now()-w.current,n=await(e=f,t=r,Aa.post("/realtime/finalize",{session_id:e,duration_ms:t}));n.data.success&&nr.success("Test call completed. Cost: $".concat(n.data.cost.toFixed(4)))}catch(r){console.error("Failed to finalize cost:",r)}var e,t};return(0,Da.jsxs)("div",{className:"space-y-6",children:[(0,Da.jsxs)("div",{children:[(0,Da.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Agent Test Utility"}),(0,Da.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Test your voice agents (OpenAI & Deepgram) in real-time"})]}),(0,Da.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,Da.jsx)("div",{className:"lg:col-span-1",children:(0,Da.jsxs)("div",{className:"bg-white shadow rounded-lg p-6",children:[(0,Da.jsx)("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:"Settings"}),(0,Da.jsxs)("div",{className:"space-y-4",children:[(0,Da.jsxs)("div",{children:[(0,Da.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Agent"}),(0,Da.jsxs)("select",{value:(null===r||void 0===r?void 0:r.id)||"",onChange:t=>n(e.find(e=>e.id===t.target.value)),className:"w-full border border-gray-300 rounded-md px-3 py-2",disabled:s,children:[(0,Da.jsx)("option",{value:"",children:"Choose an agent..."}),e.map(e=>(0,Da.jsxs)("option",{value:e.id,children:[e.name," (",e.provider||"openai",")"]},e.id))]})]}),r&&(0,Da.jsxs)("div",{className:"text-sm text-gray-600 space-y-2",children:[(0,Da.jsxs)("div",{className:"flex justify-between",children:[(0,Da.jsx)("span",{children:"Provider:"}),(0,Da.jsx)("span",{className:"font-medium",children:"deepgram"===r.provider?"Deepgram":"OpenAI"})]}),(0,Da.jsxs)("div",{className:"flex justify-between",children:[(0,Da.jsx)("span",{children:"Model:"}),(0,Da.jsx)("span",{className:"font-medium",children:"deepgram"===r.provider?r.deepgram_model:r.model})]}),(0,Da.jsxs)("div",{className:"flex justify-between",children:[(0,Da.jsx)("span",{children:"Voice:"}),(0,Da.jsx)("span",{className:"font-medium",children:"deepgram"===r.provider?r.deepgram_voice:r.voice})]})]}),(0,Da.jsx)("div",{className:"pt-4",children:s?(0,Da.jsxs)("button",{onClick:B,className:"w-full flex items-center justify-center px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700",children:[(0,Da.jsx)(Ps,{className:"w-5 h-5 mr-2"}),"Disconnect"]}):(0,Da.jsxs)("button",{onClick:async()=>{if(!r)return void nr.error("Please select an agent");const e=r.provider||"openai";y(e),S(!0);try{"openai"===e?await O():"deepgram"===e?await P():(nr.error("Unsupported provider"),S(!1))}catch(t){console.error("Connection error:",t),nr.error("Failed to connect"),S(!1)}},disabled:!r||k,className:"w-full flex items-center justify-center px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 disabled:opacity-50",children:[(0,Da.jsx)(Ja,{className:"w-5 h-5 mr-2"}),k?"Connecting...":"Connect"]})}),s&&(0,Da.jsxs)("div",{className:"space-y-3",children:[(0,Da.jsxs)("button",{onClick:()=>l(!o),className:"w-full flex items-center justify-center px-4 py-2 rounded-md ".concat(o?"bg-gray-600 hover:bg-gray-700":"bg-blue-600 hover:bg-blue-700"," text-white"),children:[o?(0,Da.jsx)(Ds,{className:"w-5 h-5 mr-2"}):(0,Da.jsx)(Rs,{className:"w-5 h-5 mr-2"}),o?"Unmute":"Mute"]}),(0,Da.jsxs)("div",{className:"bg-gray-50 rounded p-3",children:[(0,Da.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,Da.jsx)("span",{className:"text-sm text-gray-600",children:"Audio Level"}),(0,Da.jsx)(ls,{className:"w-4 h-4 text-gray-400"})]}),(0,Da.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,Da.jsx)("div",{className:"bg-blue-600 h-2 rounded-full transition-all",style:{width:"".concat(100*u,"%")}})})]}),(0,Da.jsxs)("div",{className:"bg-gray-50 rounded p-3",children:[(0,Da.jsx)("div",{className:"text-sm text-gray-600",children:"Estimated Cost"}),(0,Da.jsxs)("div",{className:"text-2xl font-bold text-gray-900",children:["$",m.toFixed(4)]})]})]})]})]})}),(0,Da.jsx)("div",{className:"lg:col-span-2",children:(0,Da.jsxs)("div",{className:"bg-white shadow rounded-lg p-6",children:[(0,Da.jsx)("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:"Conversation"}),(0,Da.jsx)("div",{className:"h-96 overflow-y-auto space-y-3 border border-gray-200 rounded-lg p-4",children:0===c.length?(0,Da.jsx)("div",{className:"text-center text-gray-500 mt-20",children:"No conversation yet. Connect and start talking!"}):c.map((e,t)=>(0,Da.jsx)("div",{className:"flex ".concat("user"===e.role?"justify-end":"justify-start"),children:(0,Da.jsxs)("div",{className:"max-w-xs px-4 py-2 rounded-lg ".concat("user"===e.role?"bg-blue-600 text-white":"bg-gray-200 text-gray-900"),children:[(0,Da.jsx)("div",{className:"text-xs opacity-75 mb-1",children:"user"===e.role?"You":"Agent"}),(0,Da.jsx)("div",{children:e.content})]})},t))})]})})]})]})},Ls=Ha("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]),Bs=Ha("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]),Us=Ha("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]),zs=Ha("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),qs=Ha("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]),Ws=Ha("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),Vs=Ha("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]),Gs=Ha("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]),Hs=Ha("Loader",[["line",{x1:"12",x2:"12",y1:"2",y2:"6",key:"gza1u7"}],["line",{x1:"12",x2:"12",y1:"18",y2:"22",key:"1qhbu9"}],["line",{x1:"4.93",x2:"7.76",y1:"4.93",y2:"7.76",key:"xae44r"}],["line",{x1:"16.24",x2:"19.07",y1:"16.24",y2:"19.07",key:"bxnmvf"}],["line",{x1:"2",x2:"6",y1:"12",y2:"12",key:"89khin"}],["line",{x1:"18",x2:"22",y1:"12",y2:"12",key:"pb8tfm"}],["line",{x1:"4.93",x2:"7.76",y1:"19.07",y2:"16.24",key:"1uxjnu"}],["line",{x1:"16.24",x2:"19.07",y1:"7.76",y2:"4.93",key:"6duxfx"}]]),Ks=Ha("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]),Ys=()=>{(0,a.useEffect)(()=>{const e=document.createElement("style");return e.textContent="\n      .knowledge-formatted-content img {\n        max-width: 100%;\n        height: auto;\n        border-radius: 8px;\n        margin: 8px 0;\n      }\n      .knowledge-formatted-content .inline-page-images {\n        margin-top: 15px;\n      }\n    ",document.head.appendChild(e),()=>document.head.removeChild(e)},[]);ee();const e=(0,a.useRef)(null),[t,r]=(0,a.useState)([]),[n,s]=(0,a.useState)(null),[i,o]=(0,a.useState)(null),[l,c]=(0,a.useState)(!1),[d,u]=(0,a.useState)([]),[p,m]=(0,a.useState)(""),[h,f]=(0,a.useState)(!1),[g,x]=(0,a.useState)(null),[y,v]=(0,a.useState)(!0),[b,j]=(0,a.useState)(!1),[w,N]=(0,a.useState)(null),[k,S]=(0,a.useState)(0);(0,a.useEffect)(()=>{C()},[]),(0,a.useEffect)(()=>{_()},[d]);const _=()=>{var t;null===(t=e.current)||void 0===t||t.scrollIntoView({behavior:"smooth"})},C=async()=>{try{const e=await Oa({status:"active"});r(e.data.agents||[])}catch(e){nr.error("Failed to load agents"),console.error(e)}},A=e=>"$".concat((e||0).toFixed(6));return(0,Da.jsxs)("div",{className:"h-screen flex flex-col bg-gray-50",children:[(0,Da.jsx)("div",{className:"bg-white border-b border-gray-200 px-6 py-4",children:(0,Da.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Da.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,Da.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Da.jsx)(rs,{className:"w-6 h-6 text-primary-600"}),(0,Da.jsx)("h1",{className:"text-xl font-bold text-gray-900",children:"Agent Test Chat"})]}),(0,Da.jsx)("div",{className:"ml-6",children:(0,Da.jsxs)("select",{value:n||"",onChange:e=>(async e=>{if(!e)return s(null),o(null),u([]),x(null),void S(0);try{c(!0);const t=(await Pa(e)).data.agent;s(e),o(t),u([{role:"assistant",content:t.greeting||"Hello! I'm ".concat(t.name,". How can I help you today?"),timestamp:(new Date).toISOString()}]),x(null),S(0),nr.success("Agent loaded: ".concat(t.name))}catch(t){nr.error("Failed to load agent details"),console.error(t)}finally{c(!1)}})(e.target.value),disabled:l,className:"block w-64 border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-primary-500 focus:border-primary-500",children:[(0,Da.jsx)("option",{value:"",children:"Select an agent..."}),t.map(e=>(0,Da.jsxs)("option",{value:e.id,children:[e.name," ",e.kb_id?"\ud83d\udcda":""]},e.id))]})})]}),(0,Da.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,Da.jsxs)("div",{className:"text-right",children:[(0,Da.jsx)("div",{className:"text-xs text-gray-500",children:"Total Cost"}),(0,Da.jsx)("div",{className:"text-lg font-bold text-gray-900",children:A(k)})]}),d.length>1&&(0,Da.jsxs)("button",{onClick:async()=>{if(g)try{await(e=>Ma.post("/chat/sessions/".concat(e,"/end")))(g)}catch(e){console.error("Failed to end session:",e)}u([{role:"assistant",content:(null===i||void 0===i?void 0:i.greeting)||"Hello! I'm ".concat(null===i||void 0===i?void 0:i.name,". How can I help you today?"),timestamp:(new Date).toISOString()}]),x(null),S(0),nr.success("Chat cleared")},className:"inline-flex items-center px-3 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50",children:[(0,Da.jsx)(Ls,{className:"w-4 h-4 mr-2"}),"Clear"]})]})]})}),(0,Da.jsx)("div",{className:"flex-1 flex overflow-hidden",children:(0,Da.jsxs)("div",{className:"flex-1 flex flex-col",children:[i&&(0,Da.jsxs)("div",{className:"bg-blue-50 border-b border-blue-200",children:[(0,Da.jsxs)("button",{onClick:()=>v(!y),className:"w-full px-6 py-3 flex items-center justify-between hover:bg-blue-100 transition-colors",children:[(0,Da.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Da.jsx)(Ya,{className:"w-5 h-5 text-blue-600"}),(0,Da.jsxs)("span",{className:"font-medium text-blue-900",children:["Agent: ",i.name]}),i.kb_id&&(0,Da.jsxs)("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-blue-200 text-blue-800",children:[(0,Da.jsx)(Bs,{className:"w-3 h-3 mr-1"}),"KB Enabled"]})]}),y?(0,Da.jsx)(Us,{className:"w-5 h-5 text-blue-600"}):(0,Da.jsx)(zs,{className:"w-5 h-5 text-blue-600"})]}),y&&(0,Da.jsxs)("div",{className:"px-6 pb-4 space-y-3",children:[(0,Da.jsxs)("div",{children:[(0,Da.jsx)("div",{className:"text-xs font-medium text-blue-900 mb-1",children:"Instructions (Persona)"}),(0,Da.jsx)("div",{className:"text-sm text-blue-800 bg-white rounded p-3 max-h-32 overflow-y-auto whitespace-pre-wrap font-mono text-xs",children:i.instructions})]}),(0,Da.jsxs)("div",{className:"grid grid-cols-4 gap-3",children:[(0,Da.jsxs)("div",{className:"bg-white rounded p-2",children:[(0,Da.jsx)("div",{className:"text-xs text-gray-500",children:"Model"}),(0,Da.jsx)("div",{className:"text-sm font-medium text-gray-900",children:i.model||"gpt-4o-mini"})]}),(0,Da.jsxs)("div",{className:"bg-white rounded p-2",children:[(0,Da.jsx)("div",{className:"text-xs text-gray-500",children:"Temperature"}),(0,Da.jsx)("div",{className:"text-sm font-medium text-gray-900",children:i.temperature||.7})]}),(0,Da.jsxs)("div",{className:"bg-white rounded p-2",children:[(0,Da.jsx)("div",{className:"text-xs text-gray-500",children:"Max Tokens"}),(0,Da.jsx)("div",{className:"text-sm font-medium text-gray-900",children:i.max_tokens||4096})]}),(0,Da.jsxs)("div",{className:"bg-white rounded p-2",children:[(0,Da.jsx)("div",{className:"text-xs text-gray-500",children:"Provider"}),(0,Da.jsx)("div",{className:"text-sm font-medium text-gray-900",children:i.provider||"openai"})]})]})]})]}),(0,Da.jsx)("div",{className:"flex-1 overflow-y-auto px-6 py-6",children:n?(0,Da.jsxs)("div",{className:"max-w-4xl mx-auto space-y-6",children:[d.map((e,t)=>(0,Da.jsx)("div",{className:"flex ".concat("user"===e.role?"justify-end":"justify-start"),children:(0,Da.jsxs)("div",{className:"flex max-w-3xl ".concat("user"===e.role?"flex-row-reverse":"flex-row"," gap-3"),children:[(0,Da.jsx)("div",{className:"flex-shrink-0 w-8 h-8 rounded-full flex items-center justify-center ".concat("user"===e.role?"bg-primary-600 text-white":"bg-gray-200 text-gray-600"),children:"user"===e.role?(0,Da.jsx)(Es,{className:"w-5 h-5"}):(0,Da.jsx)(Ya,{className:"w-5 h-5"})}),(0,Da.jsxs)("div",{className:"flex-1 ".concat("user"===e.role?"items-end":"items-start"),children:[(0,Da.jsxs)("div",{className:"rounded-lg px-4 py-3 ".concat("user"===e.role?"bg-primary-600 text-white":e.error?"bg-red-50 border border-red-200":"bg-white border border-gray-200"),children:[(0,Da.jsx)("div",{className:"prose prose-sm max-w-none",children:e.formatted_html?(0,Da.jsx)("div",{className:"knowledge-formatted-content",dangerouslySetInnerHTML:{__html:e.formatted_html}}):(0,Da.jsx)("p",{className:"whitespace-pre-wrap ".concat("user"===e.role?"text-white":"text-gray-900"),children:e.content})}),e.sources&&e.sources.length>0&&(0,Da.jsxs)("div",{className:"mt-3 pt-3 border-t border-gray-200",children:[(0,Da.jsxs)("div",{className:"flex items-center text-xs font-medium text-gray-700 mb-2",children:[(0,Da.jsx)(Bs,{className:"w-3 h-3 mr-1"}),"Knowledge Sources (",e.sources.length,")"]}),(0,Da.jsx)("div",{className:"space-y-1",children:e.sources.slice(0,3).map((e,t)=>(0,Da.jsx)("div",{className:"text-xs text-gray-600 bg-gray-50 rounded p-2",children:(0,Da.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Da.jsx)("span",{className:"font-medium truncate",children:e.title}),(0,Da.jsxs)("span",{className:"text-gray-500 ml-2",children:[(100*e.relevance_score).toFixed(0),"%"]})]})},t))})]}),e.images&&e.images.length>0&&(0,Da.jsxs)("div",{className:"mt-3 pt-3 border-t border-gray-200",children:[(0,Da.jsxs)("div",{className:"flex items-center text-xs font-medium text-gray-700 mb-2",children:[(0,Da.jsx)(qs,{className:"w-3 h-3 mr-1"}),"Images (",e.images.length,")"]}),(0,Da.jsx)("div",{className:"grid grid-cols-2 gap-2",children:e.images.slice(0,4).map((e,t)=>(0,Da.jsxs)("div",{className:"border border-gray-200 rounded overflow-hidden hover:border-primary-300 transition-colors cursor-pointer group",onClick:()=>window.open(e.url,"_blank"),children:[(0,Da.jsx)("div",{className:"aspect-square bg-gray-50 overflow-hidden",children:(0,Da.jsx)("img",{src:e.thumbnail_url||e.url,alt:e.title||"Image",className:"w-full h-full object-cover group-hover:scale-105 transition-transform",loading:"lazy",onError:e=>{e.target.src="data:image/svg+xml,%3Csvg xmlns=%22http://www.w3.org/2000/svg%22 width=%22100%22 height=%22100%22%3E%3Crect fill=%22%23f3f4f6%22 width=%22100%22 height=%22100%22/%3E%3Ctext x=%2250%25%22 y=%2250%25%22 text-anchor=%22middle%22 dy=%22.3em%22 fill=%22%239ca3af%22 font-size=%2214%22%3EImage%3C/text%3E%3C/svg%3E"}})}),(0,Da.jsxs)("div",{className:"p-1.5 bg-gray-50",children:[(0,Da.jsx)("p",{className:"text-xs text-gray-700 truncate",title:e.title||"Image",children:e.title||"Image"}),e.page_number&&(0,Da.jsxs)("p",{className:"text-xs text-gray-500",children:["Page ",e.page_number]})]})]},e.image_id||t))}),e.images.length>4&&(0,Da.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["+",e.images.length-4," more image",e.images.length-4!==1?"s":""]})]}),e.function_calls&&e.function_calls.length>0&&(0,Da.jsxs)("div",{className:"mt-3 pt-3 border-t border-gray-200",children:[(0,Da.jsxs)("div",{className:"flex items-center text-xs font-medium text-gray-700 mb-2",children:[(0,Da.jsx)(Ws,{className:"w-3 h-3 mr-1"}),"Function Calls (",e.function_calls.length,")"]}),e.function_calls.map((e,t)=>(0,Da.jsxs)("div",{className:"text-xs text-gray-600 bg-gray-50 rounded p-2 mb-1",children:[(0,Da.jsx)("span",{className:"font-medium",children:e.function_name}),(0,Da.jsxs)("span",{className:"text-green-600 ml-2",children:["\u2713 ",e.status]})]},t))]}),void 0!==e.cost&&(0,Da.jsxs)("div",{className:"mt-2 pt-2 border-t border-gray-200",children:[(0,Da.jsxs)("div",{className:"flex items-center justify-between text-xs",children:[(0,Da.jsx)("span",{className:"text-gray-500",children:e.context_used&&(0,Da.jsxs)(Da.Fragment,{children:[e.context_used.knowledge_base_chunks>0&&(0,Da.jsxs)("span",{className:"mr-2",children:["\ud83d\udcda ",e.context_used.knowledge_base_chunks," chunks"]}),(0,Da.jsxs)("span",{className:"mr-2",children:["\ud83d\udcac ",e.context_used.conversation_history_messages," history"]}),(0,Da.jsxs)("span",{children:["\ud83d\udd24 ",e.context_used.total_context_tokens," tokens"]})]})}),(0,Da.jsxs)("span",{className:"font-medium text-gray-700",children:[(0,Da.jsx)(Ka,{className:"w-3 h-3 inline mr-0.5"}),A(e.cost)]})]}),e.cost_breakdown&&e.cost_breakdown.operations&&(0,Da.jsxs)("div",{className:"mt-1 space-y-1",children:[e.cost_breakdown.operations.map((e,t)=>(0,Da.jsxs)("div",{className:"text-xs text-gray-600 flex items-center justify-between",children:[(0,Da.jsxs)("span",{className:"capitalize",children:[e.operation.replace(/_/g," "),e.details&&e.details.model&&(0,Da.jsxs)("span",{className:"text-gray-400 ml-1",children:["(",e.details.model,")"]})]}),(0,Da.jsx)("span",{className:"text-gray-500",children:A(e.total_cost)})]},t)),e.cost_breakdown.operations.length>1&&(0,Da.jsxs)("div",{className:"text-xs font-medium text-gray-700 flex items-center justify-between pt-1 border-t border-gray-100",children:[(0,Da.jsx)("span",{children:"Total"}),(0,Da.jsx)("span",{children:A(e.cost_breakdown.final_cost)})]})]})]})]}),(0,Da.jsxs)("div",{className:"flex items-center mt-1 space-x-2",children:[(0,Da.jsx)("span",{className:"text-xs text-gray-500",children:new Date(e.timestamp).toLocaleTimeString()}),(0,Da.jsx)("button",{onClick:()=>((e,t)=>{navigator.clipboard.writeText(e),N(t),setTimeout(()=>N(null),2e3),nr.success("Copied to clipboard")})(e.content,t),className:"text-gray-400 hover:text-gray-600",title:"Copy message",children:w===t?(0,Da.jsx)(Vs,{className:"w-3 h-3 text-green-500"}):(0,Da.jsx)(Gs,{className:"w-3 h-3"})})]})]})]})},t)),h&&(0,Da.jsx)("div",{className:"flex justify-start",children:(0,Da.jsxs)("div",{className:"flex gap-3 max-w-3xl",children:[(0,Da.jsx)("div",{className:"flex-shrink-0 w-8 h-8 rounded-full bg-gray-200 flex items-center justify-center",children:(0,Da.jsx)(Ya,{className:"w-5 h-5 text-gray-600"})}),(0,Da.jsx)("div",{className:"bg-white border border-gray-200 rounded-lg px-4 py-3",children:(0,Da.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Da.jsx)(Hs,{className:"w-4 h-4 animate-spin text-gray-400"}),(0,Da.jsx)("span",{className:"text-sm text-gray-500",children:"Thinking..."})]})})]})}),(0,Da.jsx)("div",{ref:e})]}):(0,Da.jsx)("div",{className:"h-full flex items-center justify-center",children:(0,Da.jsxs)("div",{className:"text-center",children:[(0,Da.jsx)(Ya,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),(0,Da.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Select an Agent"}),(0,Da.jsx)("p",{className:"text-sm text-gray-500",children:"Choose an agent from the dropdown to start testing"})]})})}),n&&(0,Da.jsx)("div",{className:"border-t border-gray-200 bg-white px-6 py-4",children:(0,Da.jsx)("form",{onSubmit:async e=>{if(e.preventDefault(),!p.trim()||h||!n)return;const t={role:"user",content:p.trim(),timestamp:(new Date).toISOString()};u(e=>[...e,t]),m(""),f(!0);try{const e=await(e=>Ma.post("/chat/message",e))({session_id:g,agent_id:n,message:p.trim()}),t=e.data.data;!g&&t.session_id&&x(t.session_id);const r={role:"assistant",content:t.response.text,html:t.response.html,markdown:t.response.markdown,formatted_html:t.formatted_html,timestamp:(new Date).toISOString(),sources:t.sources||[],images:t.images||[],function_calls:t.function_calls||[],cost:t.cost,cost_breakdown:t.cost_breakdown,context_used:t.context_used,agent_metadata:t.agent_metadata};u(e=>[...e,r]),S(e=>e+(t.cost||0))}catch(s){var r,a;console.error("Chat error:",s);const e={role:"assistant",content:"Sorry, I encountered an error. Please try again.",timestamp:(new Date).toISOString(),error:!0};u(t=>[...t,e]),nr.error((null===(r=s.response)||void 0===r||null===(a=r.data)||void 0===a?void 0:a.error)||"Failed to send message")}finally{f(!1)}},className:"max-w-4xl mx-auto",children:(0,Da.jsxs)("div",{className:"flex space-x-3",children:[(0,Da.jsx)("input",{type:"text",value:p,onChange:e=>m(e.target.value),disabled:h||!n,placeholder:h?"Waiting for response...":"Type your message...",className:"flex-1 border border-gray-300 rounded-lg px-4 py-3 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent disabled:bg-gray-100"}),(0,Da.jsx)("button",{type:"submit",disabled:h||!p.trim()||!n,className:"inline-flex items-center px-6 py-3 border border-transparent rounded-lg shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700 disabled:opacity-50 disabled:cursor-not-allowed",children:h?(0,Da.jsxs)(Da.Fragment,{children:[(0,Da.jsx)(Hs,{className:"w-4 h-4 mr-2 animate-spin"}),"Sending"]}):(0,Da.jsxs)(Da.Fragment,{children:[(0,Da.jsx)(Ks,{className:"w-4 h-4 mr-2"}),"Send"]})})]})})})]})})]})},Js=Ha("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]),Xs=Ha("Store",[["path",{d:"m2 7 4.41-4.41A2 2 0 0 1 7.83 2h8.34a2 2 0 0 1 1.42.59L22 7",key:"ztvudi"}],["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["path",{d:"M15 22v-4a2 2 0 0 0-2-2h-2a2 2 0 0 0-2 2v4",key:"2ebpfo"}],["path",{d:"M2 7h20",key:"1fcdvo"}],["path",{d:"M22 7v3a2 2 0 0 1-2 2v0a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 16 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 12 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 8 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 4 12v0a2 2 0 0 1-2-2V7",key:"jon5kx"}]]),$s=Ha("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]),Qs=Ha("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]),Zs=Ha("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]),ei=Ha("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),ti=Ha("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),ri=Ha("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]),ni=Ha("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]),ai=Ha("Key",[["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["path",{d:"m15.5 7.5 3 3L22 7l-3-3",key:"1rn1fs"}]]),si=Ha("HelpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),ii=Ha("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),oi=Ha("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),li=Ha("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),ci=Ha("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]),di=()=>{const{user:e,logout:t}=Fa(),r=Q(),[n,s]=(0,a.useState)(!1),[i,o]=(0,a.useState)(!1),[l,c]=(0,a.useState)(!1),[d,u]=(0,a.useState)(!1),p=(0,a.useRef)(null),m=(0,a.useRef)(0);(0,a.useEffect)(()=>{r.pathname.startsWith("/analytics")&&c(!0),r.pathname.startsWith("/settings")&&u(!0)},[r.pathname]),(0,a.useEffect)(()=>{const e=localStorage.getItem("sidebarCollapsed");e&&o("true"===e)},[]),(0,a.useEffect)(()=>{p.current&&(p.current.scrollTop=m.current)},[l,d]);const h=[{title:"Main",items:[{name:"Dashboard",href:"/",icon:Js,roles:["super_admin","admin","agent_manager","client"]},{name:"Live Monitor",href:"/monitor",icon:Is,roles:["super_admin","admin","agent_manager"],badge:"live"}]},{title:"AI Agents",items:[{name:"Agents",href:"/agents",icon:Ya,roles:["super_admin","admin","agent_manager","client"]},{name:"Knowledge Base",href:"/knowledge",icon:Bs,roles:["super_admin","admin","agent_manager","client"]},{name:"Shopify Stores",href:"/shopify",icon:Xs,roles:["super_admin","admin","agent_manager"]}]},{title:"Analytics & Reports",collapsible:!0,isOpen:l,setIsOpen:c,icon:$s,items:[{name:"Overview",href:"/analytics/dashboard",icon:Js,roles:["super_admin","admin","agent_manager"],submenu:!0},{name:"Calls Report",href:"/analytics/calls",icon:Ja,roles:["super_admin","admin","agent_manager"],submenu:!0},{name:"Chat Report",href:"/analytics/chats",icon:rs,roles:["super_admin","admin","agent_manager"],submenu:!0},{name:"Advanced Analytics",href:"/analytics/advanced",icon:Xa,roles:["super_admin","admin","agent_manager"],submenu:!0},{name:"Cost & Performance",href:"/analytics/costs",icon:Qs,roles:["super_admin","admin"],submenu:!0},{name:"Customer Satisfaction",href:"/analytics/satisfaction",icon:Zs,roles:["super_admin","admin","agent_manager"],submenu:!0}]},{title:"Testing & Development",items:[{name:"Test Voice Call",href:"/test",icon:Rs,roles:["super_admin","admin","agent_manager"]},{name:"Test Chat",href:"/agent-test",icon:rs,roles:["super_admin","admin","agent_manager"]}]},{title:"Administration",items:[{name:"Users",href:"/users",icon:ei,roles:["super_admin","admin"]}],collapsibleItems:[{title:"Settings",collapsible:!0,isOpen:d,setIsOpen:u,icon:ti,items:[{name:"System Settings",href:"/settings/system",icon:ti,roles:["super_admin"],submenu:!0},{name:"Notifications",href:"/settings/notifications",icon:ri,roles:["super_admin","admin"],submenu:!0}]}],bottomItems:[{name:"Tenant Manager",href:"/tenants",icon:ni,roles:["super_admin"]},{name:"API Settings",href:"/settings/api",icon:ai,roles:["super_admin","admin"]},{name:"Help Center",href:"/help",icon:si,roles:["super_admin","admin","agent_manager","client"]}]}],f=t=>!t||!(null===e||void 0===e||!e.role)&&t.includes(e.role),g=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!f(e.roles))return null;const n=e.icon,a="/"===(o=e.href)?"/"===r.pathname:r.pathname.startsWith(o);var o;return(0,Da.jsxs)(Ie,{to:e.href,className:"flex items-center px-4 py-2.5 text-sm font-medium rounded-md transition-all group ".concat(e.submenu?"pl-12":""," ").concat(a?"bg-primary-100 text-primary-700 border-r-3 border-primary-600":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"),onClick:e=>{p.current&&(m.current=p.current.scrollTop),t&&s(!1)},title:i?e.name:"",children:[(0,Da.jsx)(n,{className:"".concat("w-5 h-5"," ").concat(e.submenu&&!i?"mr-2":i?"":"mr-3"," flex-shrink-0")}),!i&&(0,Da.jsxs)(Da.Fragment,{children:[(0,Da.jsx)("span",{className:"flex-1",children:e.name}),"live"===e.badge&&(0,Da.jsxs)("span",{className:"ml-2 flex h-2 w-2",children:[(0,Da.jsx)("span",{className:"animate-ping absolute inline-flex h-2 w-2 rounded-full bg-red-400 opacity-75"}),(0,Da.jsx)("span",{className:"relative inline-flex rounded-full h-2 w-2 bg-red-500"})]})]})]},e.name)},x=e=>{var t;if(!f(null===(t=e.items[0])||void 0===t?void 0:t.roles))return null;const r=e.icon;return i?(0,Da.jsxs)("div",{className:"mb-1 relative group",children:[(0,Da.jsx)("div",{className:"flex items-center justify-center px-4 py-2.5 text-sm font-medium text-gray-600 hover:bg-gray-50 hover:text-gray-900 rounded-md cursor-pointer",children:(0,Da.jsx)(r,{className:"w-5 h-5 flex-shrink-0"})}),(0,Da.jsx)("div",{className:"absolute left-full ml-2 px-3 py-2 bg-gray-900 text-white text-sm rounded-md opacity-0 group-hover:opacity-100 pointer-events-none transition-opacity whitespace-nowrap z-50",children:e.title||"Settings"})]},e.title):(0,Da.jsxs)("div",{className:"mb-1",children:[(0,Da.jsxs)("button",{onClick:t=>{var r,n;t.preventDefault(),t.stopPropagation(),r=e.setIsOpen,n=e.isOpen,p.current&&(m.current=p.current.scrollTop),r(!n)},className:"flex items-center justify-between w-full px-4 py-2.5 text-sm font-medium text-gray-600 hover:bg-gray-50 hover:text-gray-900 rounded-md transition-all",children:[(0,Da.jsxs)("div",{className:"flex items-center",children:[(0,Da.jsx)(r,{className:"w-5 h-5 mr-3 flex-shrink-0"}),(0,Da.jsx)("span",{children:e.title||"Settings"})]}),(0,Da.jsx)(ii,{className:"w-4 h-4 transition-transform ".concat(e.isOpen?"rotate-90":"")})]}),e.isOpen&&(0,Da.jsx)("div",{className:"mt-1 space-y-1 bg-gray-50 rounded-md py-1",children:e.items.map(e=>g(e))})]},e.title)},y=r=>{var n,a,o;let{isMobile:l=!1}=r;return(0,Da.jsxs)(Da.Fragment,{children:[!i&&(0,Da.jsxs)("div",{className:"p-4 border-b border-gray-200",children:[(0,Da.jsxs)("div",{className:"flex items-center mb-3",children:[(0,Da.jsx)("div",{className:"flex-shrink-0 h-10 w-10 rounded-full bg-primary-100 flex items-center justify-center",children:(0,Da.jsx)("span",{className:"text-primary-600 font-medium text-lg",children:null===e||void 0===e||null===(n=e.name)||void 0===n?void 0:n.charAt(0).toUpperCase()})}),(0,Da.jsxs)("div",{className:"ml-3 flex-1 min-w-0",children:[(0,Da.jsx)("p",{className:"text-sm font-medium text-gray-900 truncate",children:null===e||void 0===e?void 0:e.name}),(0,Da.jsx)("p",{className:"text-xs text-gray-500 truncate capitalize",children:null===e||void 0===e||null===(a=e.role)||void 0===a?void 0:a.replace("_"," ")})]})]}),f(["super_admin","admin"])&&(0,Da.jsxs)(Ie,{to:"/credits",className:"flex items-center justify-between px-3 py-2 bg-amber-50 rounded-lg hover:bg-amber-100 transition-colors",onClick:()=>l&&s(!1),children:[(0,Da.jsxs)("div",{className:"flex items-center",children:[(0,Da.jsx)(Ka,{className:"w-4 h-4 text-amber-700 mr-2"}),(0,Da.jsx)("span",{className:"text-xs text-amber-700",children:"Credits"})]}),(0,Da.jsx)("span",{className:"text-sm font-bold text-amber-900",children:"View"})]})]}),i&&(0,Da.jsx)("div",{className:"p-4 border-b border-gray-200 flex justify-center",children:(0,Da.jsxs)("div",{className:"h-10 w-10 rounded-full bg-primary-100 flex items-center justify-center group relative",children:[(0,Da.jsx)("span",{className:"text-primary-600 font-medium text-lg",children:null===e||void 0===e||null===(o=e.name)||void 0===o?void 0:o.charAt(0).toUpperCase()}),(0,Da.jsx)("div",{className:"absolute left-full ml-2 px-3 py-2 bg-gray-900 text-white text-sm rounded-md opacity-0 group-hover:opacity-100 pointer-events-none transition-opacity whitespace-nowrap z-50",children:null===e||void 0===e?void 0:e.name})]})}),(0,Da.jsx)("nav",{ref:p,className:"flex-1 px-2 py-4 space-y-6 overflow-y-auto",style:{scrollBehavior:"auto"},children:h.map((e,t)=>{var r,n,a,s,o;return(null===(r=e.items)||void 0===r?void 0:r.some(e=>f(e.roles)))||(null===(n=e.collapsibleItems)||void 0===n?void 0:n.some(e=>e.items.some(e=>f(e.roles))))?(0,Da.jsxs)("div",{children:[e.title&&!i&&(0,Da.jsx)("div",{className:"px-4 mb-2",children:(0,Da.jsx)("h3",{className:"text-xs font-semibold text-gray-400 uppercase tracking-wider",children:e.title})}),(0,Da.jsx)("div",{className:"space-y-1 ".concat(i?"flex flex-col items-center":""),children:e.collapsible?x(e):(0,Da.jsxs)(Da.Fragment,{children:[null===(a=e.items)||void 0===a?void 0:a.map(e=>g(e,l)),null===(s=e.collapsibleItems)||void 0===s?void 0:s.map(e=>x(e)),null===(o=e.bottomItems)||void 0===o?void 0:o.map(e=>g(e,l))]})}),t<h.length-1&&!i&&(0,Da.jsx)("div",{className:"mt-4 border-t border-gray-200"})]},t):null})}),(0,Da.jsx)("div",{className:"p-4 border-t",children:(0,Da.jsxs)("button",{onClick:t,className:"flex items-center w-full px-4 py-2.5 text-sm font-medium text-gray-600 rounded-md hover:bg-gray-50 hover:text-gray-900 transition-all group relative ".concat(i?"justify-center":""),title:i?"Logout":"",children:[(0,Da.jsx)(oi,{className:"w-5 h-5 ".concat(i?"":"mr-3")}),!i&&"Logout",i&&(0,Da.jsx)("div",{className:"absolute left-full ml-2 px-3 py-2 bg-gray-900 text-white text-sm rounded-md opacity-0 group-hover:opacity-100 pointer-events-none transition-opacity whitespace-nowrap z-50",children:"Logout"})]})})]})};return(0,Da.jsxs)("div",{className:"min-h-screen bg-gray-100",children:[(0,Da.jsxs)("div",{className:"fixed inset-0 z-40 lg:hidden ".concat(n?"":"hidden"),children:[(0,Da.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-75",onClick:()=>s(!1)}),(0,Da.jsxs)("div",{className:"fixed inset-y-0 left-0 flex flex-col w-64 bg-white",children:[(0,Da.jsxs)("div",{className:"flex items-center justify-between h-16 px-4 border-b",children:[(0,Da.jsx)("span",{className:"text-xl font-bold text-primary-600",children:"AiVA Manager"}),(0,Da.jsx)("button",{onClick:()=>s(!1),children:(0,Da.jsx)(ss,{className:"w-6 h-6"})})]}),(0,Da.jsx)(y,{isMobile:!0})]})]}),(0,Da.jsx)("div",{className:"hidden lg:fixed lg:inset-y-0 lg:flex lg:flex-col transition-all duration-300 ".concat(i?"lg:w-20":"lg:w-64"),children:(0,Da.jsxs)("div",{className:"flex flex-col flex-1 min-h-0 bg-white border-r",children:[(0,Da.jsxs)("div",{className:"flex items-center justify-between h-16 px-4 border-b",children:[!i&&(0,Da.jsx)("span",{className:"text-xl font-bold text-primary-600",children:"AiVA Manager"}),i&&(0,Da.jsx)("span",{className:"text-xl font-bold text-primary-600",children:"AI"}),(0,Da.jsx)("button",{onClick:()=>{const e=!i;o(e),localStorage.setItem("sidebarCollapsed",e.toString())},className:"p-1.5 rounded-md hover:bg-gray-100 transition-colors",title:i?"Expand sidebar":"Collapse sidebar",children:i?(0,Da.jsx)(ii,{className:"w-5 h-5 text-gray-600"}):(0,Da.jsx)(li,{className:"w-5 h-5 text-gray-600"})})]}),(0,Da.jsx)(y,{})]})}),(0,Da.jsxs)("div",{className:"transition-all duration-300 ".concat(i?"lg:pl-20":"lg:pl-64"),children:[(0,Da.jsxs)("div",{className:"sticky top-0 z-10 flex h-16 bg-white border-b lg:hidden",children:[(0,Da.jsx)("button",{onClick:()=>s(!0),className:"px-4 text-gray-500 focus:outline-none",children:(0,Da.jsx)(ci,{className:"w-6 h-6"})}),(0,Da.jsx)("div",{className:"flex items-center flex-1 px-4",children:(0,Da.jsx)("span",{className:"text-xl font-bold text-primary-600",children:"AiVA Manager"})})]}),(0,Da.jsx)("main",{className:"py-6",children:(0,Da.jsx)("div",{className:"px-4 mx-auto max-w-7xl sm:px-6 lg:px-8",children:(0,Da.jsx)(ye,{})})})]})]})},ui=Ha("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),pi=Ha("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]),mi=Ha("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]]),hi=()=>{const[e,t]=(0,a.useState)([]),[r,n]=(0,a.useState)(!0),[s,i]=(0,a.useState)(""),[o,l]=(0,a.useState)("all");(0,a.useEffect)(()=>{c()},[o]);const c=async()=>{try{var e,r;n(!0);const a=(null===(e=(await ys({status:"all"!==o?o:void 0})).data)||void 0===e||null===(r=e.data)||void 0===r?void 0:r.knowledge_bases)||[];t(a)}catch(a){nr.error("Failed to load knowledge bases"),console.error(a),t([])}finally{n(!1)}},d=async e=>{if(window.confirm("Are you sure? This will delete all documents and data."))try{await(e=>Ma.delete("/knowledge/".concat(e)))(e),nr.success("Knowledge base deleted"),c()}catch(t){nr.error("Failed to delete knowledge base"),console.error(t)}},u=e.filter(e=>{var t;return e.name.toLowerCase().includes(s.toLowerCase())||(null===(t=e.description)||void 0===t?void 0:t.toLowerCase().includes(s.toLowerCase()))});return r?(0,Da.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,Da.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):(0,Da.jsxs)("div",{className:"space-y-6",children:[(0,Da.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Da.jsxs)("div",{children:[(0,Da.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Knowledge Bases"}),(0,Da.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Manage documents and knowledge for your AI agents"})]}),(0,Da.jsxs)(Ie,{to:"/knowledge/new",className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700",children:[(0,Da.jsx)(Qa,{className:"w-4 h-4 mr-2"}),"New Knowledge Base"]})]}),(0,Da.jsxs)("div",{className:"flex gap-4",children:[(0,Da.jsxs)("div",{className:"flex-1 relative",children:[(0,Da.jsx)(ui,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),(0,Da.jsx)("input",{type:"text",placeholder:"Search knowledge bases...",value:s,onChange:e=>i(e.target.value),className:"pl-10 w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500"})]}),(0,Da.jsxs)("select",{value:o,onChange:e=>l(e.target.value),className:"rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500",children:[(0,Da.jsx)("option",{value:"all",children:"All Status"}),(0,Da.jsx)("option",{value:"active",children:"Active"}),(0,Da.jsx)("option",{value:"inactive",children:"Inactive"})]})]}),0===u.length?(0,Da.jsxs)("div",{className:"text-center py-12",children:[(0,Da.jsx)(Bs,{className:"mx-auto h-12 w-12 text-gray-400"}),(0,Da.jsx)("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No knowledge bases"}),(0,Da.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Get started by creating a new knowledge base"}),(0,Da.jsx)("div",{className:"mt-6",children:(0,Da.jsxs)(Ie,{to:"/knowledge/new",className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700",children:[(0,Da.jsx)(Qa,{className:"w-4 h-4 mr-2"}),"New Knowledge Base"]})})]}):(0,Da.jsx)("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-3",children:u.map(e=>{var t,r,n,a;return(0,Da.jsx)("div",{className:"bg-white overflow-hidden shadow rounded-lg hover:shadow-lg transition-shadow",children:(0,Da.jsxs)("div",{className:"p-6",children:[(0,Da.jsx)("div",{className:"flex items-center justify-between mb-4",children:(0,Da.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,Da.jsx)("div",{className:"flex-shrink-0",children:(0,Da.jsx)(pi,{className:"h-8 w-8 text-primary-600"})}),(0,Da.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,Da.jsx)("h3",{className:"text-lg font-medium text-gray-900 truncate",children:e.name}),(0,Da.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat("active"===e.status?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"),children:e.status})]})]})}),(0,Da.jsx)("p",{className:"text-sm text-gray-500 mb-4 line-clamp-2",children:e.description||"No description"}),(0,Da.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,Da.jsx)("h3",{children:e.name}),(0,Da.jsxs)("div",{className:"grid grid-cols-2 gap-4 mt-4",children:[(0,Da.jsxs)("div",{children:[(0,Da.jsx)("p",{className:"text-gray-600",children:"Documents"}),(0,Da.jsx)("p",{className:"text-2xl font-bold",children:(null===(t=e.stats)||void 0===t?void 0:t.document_count)||0})]}),(0,Da.jsxs)("div",{children:[(0,Da.jsx)("p",{className:"text-gray-600",children:"Chunks"}),(0,Da.jsx)("p",{className:"text-2xl font-bold",children:(null===(r=e.stats)||void 0===r?void 0:r.chunk_count)||0})]}),(0,Da.jsxs)("div",{children:[(0,Da.jsx)("p",{className:"text-gray-600",children:"Images"}),(0,Da.jsx)("p",{className:"text-2xl font-bold",children:(null===(n=e.stats)||void 0===n?void 0:n.image_count)||0})]}),(0,Da.jsxs)("div",{children:[(0,Da.jsx)("p",{className:"text-gray-600",children:"Products"}),(0,Da.jsx)("p",{className:"text-2xl font-bold",children:(null===(a=e.stats)||void 0===a?void 0:a.product_count)||0})]})]})]}),(0,Da.jsxs)("div",{className:"flex items-center text-xs text-gray-400 mb-4",children:[(0,Da.jsx)(Ts,{className:"w-3 h-3 mr-1"}),"Updated ",new Date(e.updated_at).toLocaleDateString()]}),(0,Da.jsxs)("div",{className:"flex space-x-2",children:[(0,Da.jsxs)(Ie,{to:"/knowledge/".concat(e.id,"/documents"),className:"flex-1 inline-flex justify-center items-center px-3 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50",children:[(0,Da.jsx)(cs,{className:"w-4 h-4 mr-2"}),"Documents"]}),(0,Da.jsx)(Ie,{to:"/knowledge/".concat(e.id,"/edit"),className:"inline-flex items-center px-3 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50",children:(0,Da.jsx)(mi,{className:"w-4 h-4"})}),(0,Da.jsx)("button",{onClick:()=>d(e.id),className:"inline-flex items-center px-3 py-2 border border-red-300 shadow-sm text-sm font-medium rounded-md text-red-700 bg-white hover:bg-red-50",children:(0,Da.jsx)(ns,{className:"w-4 h-4"})})]})]})},e.id)})})]})},fi=Ha("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),gi=Ha("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),xi=()=>{const e=ee(),{id:t}=re(),r=!!t,[n,s]=(0,a.useState)(!1),[i,o]=(0,a.useState)({name:"",description:"",type:"general",status:"active",settings:{chunk_size:500,chunk_overlap:50,embedding_model:"text-embedding-3-small"}});(0,a.useEffect)(()=>{r&&l()},[t]);const l=async()=>{try{s(!0);const e=(await vs(t)).data.data;o({name:e.name,description:e.description||"",type:e.type,status:e.status,settings:e.settings||i.settings})}catch(e){nr.error("Failed to load knowledge base"),console.error(e)}finally{s(!1)}};return(0,Da.jsxs)("div",{className:"max-w-3xl mx-auto space-y-6",children:[(0,Da.jsx)("div",{className:"flex items-center justify-between",children:(0,Da.jsxs)("div",{children:[(0,Da.jsxs)("button",{onClick:()=>e("/knowledge"),className:"flex items-center text-sm text-gray-600 hover:text-gray-900 mb-2",children:[(0,Da.jsx)(fi,{className:"w-4 h-4 mr-1"}),"Back to Knowledge Bases"]}),(0,Da.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:r?"Edit Knowledge Base":"New Knowledge Base"})]})}),(0,Da.jsxs)("form",{onSubmit:async n=>{if(n.preventDefault(),i.name.trim())try{if(s(!0),!r){const t=await(e=>Ma.post("/knowledge",e))(i);return nr.success("Knowledge base created"),void e("/knowledge/".concat(t.data.data.id,"/documents"))}await((e,t)=>Ma.put("/knowledge/".concat(e),t))(t,i),nr.success("Knowledge base updated"),e("/knowledge")}catch(a){nr.error(r?"Failed to update":"Failed to create"),console.error(a)}finally{s(!1)}else nr.error("Name is required")},className:"bg-white shadow rounded-lg",children:[(0,Da.jsxs)("div",{className:"p-6 space-y-6",children:[(0,Da.jsxs)("div",{children:[(0,Da.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Basic Information"}),(0,Da.jsxs)("div",{className:"space-y-4",children:[(0,Da.jsxs)("div",{children:[(0,Da.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name *"}),(0,Da.jsx)("input",{type:"text",value:i.name,onChange:e=>o(qe(qe({},i),{},{name:e.target.value})),className:"w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500",placeholder:"e.g., Product Documentation",required:!0})]}),(0,Da.jsxs)("div",{children:[(0,Da.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),(0,Da.jsx)("textarea",{value:i.description,onChange:e=>o(qe(qe({},i),{},{description:e.target.value})),rows:3,className:"w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500",placeholder:"Describe what this knowledge base contains..."})]}),(0,Da.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,Da.jsxs)("div",{children:[(0,Da.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Type"}),(0,Da.jsxs)("select",{value:i.type,onChange:e=>o(qe(qe({},i),{},{type:e.target.value})),className:"w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500",children:[(0,Da.jsx)("option",{value:"general",children:"General"}),(0,Da.jsx)("option",{value:"documentation",children:"Documentation"}),(0,Da.jsx)("option",{value:"faq",children:"FAQ"}),(0,Da.jsx)("option",{value:"support",children:"Support"}),(0,Da.jsx)("option",{value:"product_catalog",children:"Product Catalog"})]})]}),(0,Da.jsxs)("div",{children:[(0,Da.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),(0,Da.jsxs)("select",{value:i.status,onChange:e=>o(qe(qe({},i),{},{status:e.target.value})),className:"w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500",children:[(0,Da.jsx)("option",{value:"active",children:"Active"}),(0,Da.jsx)("option",{value:"inactive",children:"Inactive"})]})]})]})]})]}),(0,Da.jsxs)("div",{children:[(0,Da.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Processing Settings"}),(0,Da.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-4",children:(0,Da.jsxs)("div",{className:"flex",children:[(0,Da.jsx)(gi,{className:"w-5 h-5 text-blue-600 mr-2 flex-shrink-0"}),(0,Da.jsx)("div",{className:"text-sm text-blue-700",children:"These settings control how documents are processed and indexed. Default values work well for most cases."})]})}),(0,Da.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,Da.jsxs)("div",{children:[(0,Da.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Chunk Size (tokens)"}),(0,Da.jsx)("input",{type:"number",value:i.settings.chunk_size,onChange:e=>o(qe(qe({},i),{},{settings:qe(qe({},i.settings),{},{chunk_size:parseInt(e.target.value)})})),min:100,max:2e3,className:"w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500"}),(0,Da.jsx)("p",{className:"mt-1 text-xs text-gray-500",children:"Recommended: 500"})]}),(0,Da.jsxs)("div",{children:[(0,Da.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Chunk Overlap (tokens)"}),(0,Da.jsx)("input",{type:"number",value:i.settings.chunk_overlap,onChange:e=>o(qe(qe({},i),{},{settings:qe(qe({},i.settings),{},{chunk_overlap:parseInt(e.target.value)})})),min:0,max:200,className:"w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500"}),(0,Da.jsx)("p",{className:"mt-1 text-xs text-gray-500",children:"Recommended: 50"})]})]}),(0,Da.jsxs)("div",{className:"mt-4",children:[(0,Da.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Embedding Model"}),(0,Da.jsxs)("select",{value:i.settings.embedding_model,onChange:e=>o(qe(qe({},i),{},{settings:qe(qe({},i.settings),{},{embedding_model:e.target.value})})),className:"w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500",children:[(0,Da.jsx)("option",{value:"text-embedding-3-small",children:"text-embedding-3-small (Fast, Affordable)"}),(0,Da.jsx)("option",{value:"text-embedding-3-large",children:"text-embedding-3-large (High Quality)"}),(0,Da.jsx)("option",{value:"text-embedding-ada-002",children:"text-embedding-ada-002 (Legacy)"})]})]})]})]}),(0,Da.jsxs)("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-200 flex items-center justify-between rounded-b-lg",children:[(0,Da.jsx)("button",{type:"button",onClick:()=>e("/knowledge"),className:"px-4 py-2 text-sm font-medium text-gray-700 hover:text-gray-900",children:"Cancel"}),(0,Da.jsxs)("button",{type:"submit",disabled:n,className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700 disabled:opacity-50",children:[(0,Da.jsx)(is,{className:"w-4 h-4 mr-2"}),n?"Saving...":r?"Update":"Create"]})]})]})]})},yi=Ha("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),vi=Ha("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),bi=e=>{let{kbId:t,onComplete:r}=e;const[n,s]=(0,a.useState)([]),[i,o]=(0,a.useState)(!1),[l,c]=(0,a.useState)({}),[d,u]=(0,a.useState)(!1),p=(0,a.useCallback)(e=>{e.preventDefault(),e.stopPropagation(),"dragenter"===e.type||"dragover"===e.type?u(!0):"dragleave"===e.type&&u(!1)},[]),m=(0,a.useCallback)(e=>{e.preventDefault(),e.stopPropagation(),u(!1);const t=Array.from(e.dataTransfer.files);h(t)},[]),h=e=>{const t=e.filter(e=>["application/pdf","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.openxmlformats-officedocument.presentationml.presentation","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","text/plain","text/html","text/markdown","application/json"].includes(e.type)||e.name.match(/\.(pdf|docx|pptx|xlsx|txt|html|md|json)$/i)?!(e.size>52428800)||(nr.error("".concat(e.name,": File too large (max 50MB)")),!1):(nr.error("".concat(e.name,": Invalid file type")),!1));s(e=>[...e,...t.map(e=>({file:e,id:Math.random().toString(36).substr(2,9),status:"pending"}))])},f=e=>{if(0===e)return"0 Bytes";const t=Math.floor(Math.log(e)/Math.log(1024));return Math.round(e/Math.pow(1024,t)*100)/100+" "+["Bytes","KB","MB","GB"][t]};return(0,Da.jsxs)("div",{className:"space-y-6",children:[(0,Da.jsxs)("div",{className:"relative border-2 border-dashed rounded-lg p-12 text-center ".concat(d?"border-primary-500 bg-primary-50":"border-gray-300 hover:border-gray-400"),onDragEnter:p,onDragLeave:p,onDragOver:p,onDrop:m,children:[(0,Da.jsx)(yi,{className:"mx-auto h-12 w-12 text-gray-400"}),(0,Da.jsxs)("div",{className:"mt-4",children:[(0,Da.jsxs)("label",{htmlFor:"file-upload",className:"cursor-pointer",children:[(0,Da.jsx)("span",{className:"text-primary-600 hover:text-primary-500 font-medium",children:"Choose files"}),(0,Da.jsx)("input",{id:"file-upload",type:"file",multiple:!0,className:"sr-only",onChange:e=>{const t=Array.from(e.target.files);h(t)},accept:".pdf,.docx,.pptx,.xlsx,.txt,.html,.md,.json"})]}),(0,Da.jsx)("span",{className:"text-gray-600",children:" or drag and drop"})]}),(0,Da.jsx)("p",{className:"mt-2 text-xs text-gray-500",children:"PDF, DOCX, PPTX, XLSX, TXT, HTML, MD, JSON up to 50MB"})]}),n.length>0&&(0,Da.jsxs)("div",{className:"space-y-3",children:[(0,Da.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Da.jsxs)("h3",{className:"text-sm font-medium text-gray-900",children:["Files (",n.length,")"]}),!i&&(0,Da.jsx)("button",{onClick:()=>s([]),className:"text-sm text-gray-500 hover:text-gray-700",children:"Clear all"})]}),(0,Da.jsx)("div",{className:"space-y-2",children:n.map(e=>(0,Da.jsxs)("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[(0,Da.jsxs)("div",{className:"flex items-center flex-1 min-w-0",children:[(0,Da.jsx)(cs,{className:"w-5 h-5 text-gray-400 flex-shrink-0"}),(0,Da.jsxs)("div",{className:"ml-3 flex-1 min-w-0",children:[(0,Da.jsx)("p",{className:"text-sm font-medium text-gray-900 truncate",children:e.file.name}),(0,Da.jsx)("p",{className:"text-xs text-gray-500",children:f(e.file.size)})]})]}),(0,Da.jsxs)("div",{className:"flex items-center ml-4",children:["pending"===e.status&&!i&&(0,Da.jsx)("button",{onClick:()=>{return t=e.id,void s(e=>e.filter(e=>e.id!==t));var t},className:"text-gray-400 hover:text-gray-600",children:(0,Da.jsx)(ss,{className:"w-5 h-5"})}),"uploading"===e.status&&(0,Da.jsxs)("div",{className:"flex items-center",children:[(0,Da.jsx)("div",{className:"w-32 bg-gray-200 rounded-full h-2 mr-3",children:(0,Da.jsx)("div",{className:"bg-primary-600 h-2 rounded-full transition-all",style:{width:"".concat(l[e.id]||0,"%")}})}),(0,Da.jsxs)("span",{className:"text-xs text-gray-500",children:[l[e.id]||0,"%"]})]}),"completed"===e.status&&(0,Da.jsx)(gs,{className:"w-5 h-5 text-green-500"}),"failed"===e.status&&(0,Da.jsx)(gi,{className:"w-5 h-5 text-red-500"})]})]},e.id))})]}),n.length>0&&(0,Da.jsx)("div",{className:"flex justify-end",children:(0,Da.jsxs)("button",{onClick:async()=>{if(0===n.length)return void nr.error("Please select files to upload");o(!0);for(const r of n)try{s(e=>e.map(e=>e.id===r.id?qe(qe({},e),{},{status:"uploading"}):e));const e=new FormData;e.append("file",r.file),e.append("metadata",JSON.stringify({source:"upload",uploaded_at:(new Date).toISOString()})),await bs(t,e,e=>{const t=Math.round(100*e.loaded/e.total);c(e=>qe(qe({},e),{},{[r.id]:t}))}),s(e=>e.map(e=>e.id===r.id?qe(qe({},e),{},{status:"completed"}):e)),nr.success("".concat(r.file.name," uploaded successfully"))}catch(a){console.error("Error uploading ".concat(r.file.name,":"),a),s(e=>e.map(e=>e.id===r.id?qe(qe({},e),{},{status:"failed"}):e)),nr.error("Failed to upload ".concat(r.file.name))}o(!1);const e=n.every(e=>"completed"===e.status||"failed"===e.status);e&&r&&setTimeout(r,1e3)},disabled:i,className:"inline-flex items-center px-6 py-3 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700 disabled:opacity-50 disabled:cursor-not-allowed",children:[(0,Da.jsx)(yi,{className:"w-4 h-4 mr-2"}),i?"Uploading...":"Upload ".concat(n.length," file").concat(n.length>1?"s":"")]})})]})},ji=Ha("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]),wi=e=>{var t;let{kbId:r,onComplete:n}=e;const[s,i]=(0,a.useState)("url"),[o,l]=(0,a.useState)(""),[c,d]=(0,a.useState)(2),[u,p]=(0,a.useState)(20),[m,h]=(0,a.useState)(!1),[f,g]=(0,a.useState)(!1),[x,y]=(0,a.useState)(null),[v,b]=(0,a.useState)(null);return(0,Da.jsxs)("div",{className:"space-y-6",children:[(0,Da.jsxs)("div",{className:"flex gap-4",children:[(0,Da.jsx)("button",{onClick:()=>i("url"),className:"flex-1 p-4 border-2 rounded-lg text-left transition-colors ".concat("url"===s?"border-primary-500 bg-primary-50":"border-gray-200 hover:border-gray-300"),children:(0,Da.jsxs)("div",{className:"flex items-center",children:[(0,Da.jsx)(ds,{className:"w-5 h-5 text-primary-600 mr-3"}),(0,Da.jsxs)("div",{children:[(0,Da.jsx)("div",{className:"font-medium text-gray-900",children:"Single URL"}),(0,Da.jsx)("div",{className:"text-sm text-gray-500",children:"Scrape a URL and follow links"})]})]})}),(0,Da.jsx)("button",{onClick:()=>i("sitemap"),className:"flex-1 p-4 border-2 rounded-lg text-left transition-colors ".concat("sitemap"===s?"border-primary-500 bg-primary-50":"border-gray-200 hover:border-gray-300"),children:(0,Da.jsxs)("div",{className:"flex items-center",children:[(0,Da.jsx)(cs,{className:"w-5 h-5 text-primary-600 mr-3"}),(0,Da.jsxs)("div",{children:[(0,Da.jsx)("div",{className:"font-medium text-gray-900",children:"Sitemap"}),(0,Da.jsx)("div",{className:"text-sm text-gray-500",children:"Import from sitemap.xml"})]})]})})]}),(0,Da.jsxs)("div",{children:[(0,Da.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"url"===s?"Website URL":"Sitemap URL"}),(0,Da.jsxs)("div",{className:"flex gap-2",children:[(0,Da.jsxs)("div",{className:"flex-1 relative",children:[(0,Da.jsx)(ji,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),(0,Da.jsx)("input",{type:"url",value:o,onChange:e=>l(e.target.value),placeholder:"url"===s?"https://example.com":"https://example.com/sitemap.xml",className:"pl-10 w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500"})]}),(0,Da.jsx)("button",{onClick:async()=>{if(o.trim())try{h(!0),y(null);const e=await(e=>Ma.post("/knowledge/test-url",{url:e}))(o);y(e.data.data),e.data.data.accessible?nr.success("URL is accessible!"):nr.error("URL is not accessible")}catch(e){nr.error("Failed to test URL"),console.error(e)}finally{h(!1)}else nr.error("Please enter a URL")},disabled:m||!o.trim(),className:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50",children:m?(0,Da.jsxs)(Da.Fragment,{children:[(0,Da.jsx)(Hs,{className:"w-4 h-4 mr-2 animate-spin inline"}),"Testing..."]}):"Test URL"})]}),x&&(0,Da.jsx)("div",{className:"mt-2 p-3 rounded-md ".concat(x.accessible?"bg-green-50 text-green-800":"bg-red-50 text-red-800"),children:(0,Da.jsxs)("div",{className:"flex items-center",children:[x.accessible?(0,Da.jsx)(gs,{className:"w-5 h-5 mr-2"}):(0,Da.jsx)(gi,{className:"w-5 h-5 mr-2"}),(0,Da.jsx)("div",{className:"text-sm",children:x.accessible?(0,Da.jsxs)(Da.Fragment,{children:["Accessible \u2022 Status: ",x.status_code," \u2022 Type: ",x.content_type]}):(0,Da.jsxs)(Da.Fragment,{children:["Not accessible \u2022 ",x.error||"Status: ".concat(x.status_code)]})})]})})]}),"url"===s&&(0,Da.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,Da.jsxs)("div",{children:[(0,Da.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Max Depth"}),(0,Da.jsx)("input",{type:"number",value:c,onChange:e=>d(parseInt(e.target.value)),min:1,max:5,className:"w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500"}),(0,Da.jsx)("p",{className:"mt-1 text-xs text-gray-500",children:"How many levels of links to follow (1-5)"})]}),(0,Da.jsxs)("div",{children:[(0,Da.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Max Pages"}),(0,Da.jsx)("input",{type:"number",value:u,onChange:e=>p(parseInt(e.target.value)),min:1,max:100,className:"w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500"}),(0,Da.jsx)("p",{className:"mt-1 text-xs text-gray-500",children:"Maximum pages to scrape (1-100)"})]})]}),"sitemap"===s&&(0,Da.jsxs)("div",{children:[(0,Da.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Max Pages"}),(0,Da.jsx)("input",{type:"number",value:u,onChange:e=>p(parseInt(e.target.value)),min:1,max:100,className:"w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500"}),(0,Da.jsx)("p",{className:"mt-1 text-xs text-gray-500",children:"Maximum pages to import from sitemap (1-100)"})]}),(0,Da.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:(0,Da.jsxs)("div",{className:"flex",children:[(0,Da.jsx)(gi,{className:"w-5 h-5 text-blue-600 mr-2 flex-shrink-0"}),(0,Da.jsxs)("div",{className:"text-sm text-blue-700",children:[(0,Da.jsx)("p",{className:"font-medium mb-1",children:"How web scraping works:"}),(0,Da.jsxs)("ul",{className:"list-disc list-inside space-y-1",children:[(0,Da.jsx)("li",{children:"Content is extracted from HTML pages"}),(0,Da.jsx)("li",{children:"Text is cleaned and processed automatically"}),(0,Da.jsx)("li",{children:"Documents are chunked and embedded for search"}),(0,Da.jsx)("li",{children:"Process may take several minutes depending on size"})]})]})]})}),(0,Da.jsx)("div",{className:"flex justify-end",children:(0,Da.jsx)("button",{onClick:async()=>{if(o.trim())try{let e;g(!0),b(null),e="url"===s?await((e,t,r)=>Ma.post("/knowledge/".concat(e,"/scrape-url"),t,{onUploadProgress:r}))(r,{url:o,max_depth:c,max_pages:u,metadata:{source:"web_scrape",scraped_at:(new Date).toISOString()}}):await((e,t,r)=>Ma.post("/knowledge/".concat(e,"/scrape-sitemap"),t,{onUploadProgress:r}))(r,{sitemap_url:o,max_pages:u,metadata:{source:"sitemap_scrape",scraped_at:(new Date).toISOString()}}),b(e.data.data),nr.success("Scraping completed!"),n&&setTimeout(n,2e3)}catch(e){nr.error("Failed to scrape website"),console.error(e)}finally{g(!1)}else nr.error("Please enter a URL")},disabled:f||!o.trim(),className:"inline-flex items-center px-6 py-3 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700 disabled:opacity-50 disabled:cursor-not-allowed",children:f?(0,Da.jsxs)(Da.Fragment,{children:[(0,Da.jsx)(Hs,{className:"w-4 h-4 mr-2 animate-spin"}),"Scraping..."]}):(0,Da.jsxs)(Da.Fragment,{children:[(0,Da.jsx)(ds,{className:"w-4 h-4 mr-2"}),"Start Scraping"]})})}),v&&(0,Da.jsx)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:(0,Da.jsxs)("div",{className:"flex items-start",children:[(0,Da.jsx)(gs,{className:"w-5 h-5 text-green-600 mr-2 flex-shrink-0 mt-0.5"}),(0,Da.jsxs)("div",{className:"text-sm text-green-700",children:[(0,Da.jsx)("p",{className:"font-medium mb-2",children:"Scraping completed successfully!"}),(0,Da.jsxs)("div",{className:"space-y-1",children:[(0,Da.jsxs)("p",{children:["\u2022 ","url"===s?"Pages scraped":"URLs found",": ",v.total_pages_scraped||v.total_urls_found]}),(0,Da.jsxs)("p",{children:["\u2022 Documents processed: ",v.documents_processed||(null===(t=v.documents)||void 0===t?void 0:t.length)]}),(0,Da.jsxs)("p",{children:["\u2022 Base URL: ",v.base_url||o]})]})]})]})})]})},Ni=e=>{let{kbId:t,onComplete:r}=e;const[n,s]=(0,a.useState)([]),[i,o]=(0,a.useState)(!1),[l,c]=(0,a.useState)({}),[d,u]=(0,a.useState)(!1),p=(0,a.useCallback)(e=>{e.preventDefault(),e.stopPropagation(),"dragenter"===e.type||"dragover"===e.type?u(!0):"dragleave"===e.type&&u(!1)},[]),m=(0,a.useCallback)(e=>{e.preventDefault(),e.stopPropagation(),u(!1);const t=Array.from(e.dataTransfer.files);h(t)},[]),h=e=>{const t=e.filter(e=>["image/jpeg","image/jpg","image/png","image/gif","image/webp"].includes(e.type)?!(e.size>10485760)||(nr.error("".concat(e.name,": Image too large (max 10MB)")),!1):(nr.error("".concat(e.name,": Invalid image type")),!1)).map(e=>({file:e,id:Math.random().toString(36).substr(2,9),status:"pending",preview:URL.createObjectURL(e),metadata:{title:"",description:"",tags:"",category:""}}));s(e=>[...e,...t])},f=(e,t,r)=>{s(n=>n.map(n=>n.id===e?qe(qe({},n),{},{metadata:qe(qe({},n.metadata),{},{[t]:r})}):n))},g=e=>{if(0===e)return"0 Bytes";const t=Math.floor(Math.log(e)/Math.log(1024));return Math.round(e/Math.pow(1024,t)*100)/100+" "+["Bytes","KB","MB"][t]};return(0,Da.jsxs)("div",{className:"space-y-6",children:[(0,Da.jsxs)("div",{className:"relative border-2 border-dashed rounded-lg p-12 text-center ".concat(d?"border-primary-500 bg-primary-50":"border-gray-300 hover:border-gray-400"),onDragEnter:p,onDragLeave:p,onDragOver:p,onDrop:m,children:[(0,Da.jsx)(qs,{className:"mx-auto h-12 w-12 text-gray-400"}),(0,Da.jsxs)("div",{className:"mt-4",children:[(0,Da.jsxs)("label",{htmlFor:"image-upload",className:"cursor-pointer",children:[(0,Da.jsx)("span",{className:"text-primary-600 hover:text-primary-500 font-medium",children:"Choose images"}),(0,Da.jsx)("input",{id:"image-upload",type:"file",multiple:!0,className:"sr-only",onChange:e=>{const t=Array.from(e.target.files);h(t)},accept:"image/jpeg,image/jpg,image/png,image/gif,image/webp"})]}),(0,Da.jsx)("span",{className:"text-gray-600",children:" or drag and drop"})]}),(0,Da.jsx)("p",{className:"mt-2 text-xs text-gray-500",children:"JPG, PNG, GIF, WEBP up to 10MB"})]}),n.length>0&&(0,Da.jsxs)("div",{className:"space-y-4",children:[(0,Da.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Da.jsxs)("h3",{className:"text-sm font-medium text-gray-900",children:["Images (",n.length,")"]}),!i&&(0,Da.jsx)("button",{onClick:()=>{n.forEach(e=>URL.revokeObjectURL(e.preview)),s([])},className:"text-sm text-gray-500 hover:text-gray-700",children:"Clear all"})]}),(0,Da.jsx)("div",{className:"space-y-4",children:n.map(e=>(0,Da.jsx)("div",{className:"border border-gray-200 rounded-lg p-4 bg-gray-50",children:(0,Da.jsxs)("div",{className:"flex gap-4",children:[(0,Da.jsx)("div",{className:"flex-shrink-0",children:(0,Da.jsx)("img",{src:e.preview,alt:"Preview",className:"w-24 h-24 object-cover rounded"})}),(0,Da.jsxs)("div",{className:"flex-1 space-y-3",children:[(0,Da.jsxs)("div",{className:"flex items-start justify-between",children:[(0,Da.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,Da.jsx)("p",{className:"text-sm font-medium text-gray-900 truncate",children:e.file.name}),(0,Da.jsx)("p",{className:"text-xs text-gray-500",children:g(e.file.size)})]}),(0,Da.jsxs)("div",{className:"flex items-center ml-4",children:["pending"===e.status&&!i&&(0,Da.jsx)("button",{onClick:()=>{return t=e.id,void s(e=>{const r=e.find(e=>e.id===t);return null!==r&&void 0!==r&&r.preview&&URL.revokeObjectURL(r.preview),e.filter(e=>e.id!==t)});var t},className:"text-gray-400 hover:text-gray-600",children:(0,Da.jsx)(ss,{className:"w-5 h-5"})}),"uploading"===e.status&&(0,Da.jsxs)("div",{className:"flex items-center",children:[(0,Da.jsx)("div",{className:"w-32 bg-gray-200 rounded-full h-2 mr-3",children:(0,Da.jsx)("div",{className:"bg-primary-600 h-2 rounded-full transition-all",style:{width:"".concat(l[e.id]||0,"%")}})}),(0,Da.jsxs)("span",{className:"text-xs text-gray-500",children:[l[e.id]||0,"%"]})]}),"completed"===e.status&&(0,Da.jsx)(gs,{className:"w-5 h-5 text-green-500"}),"failed"===e.status&&(0,Da.jsx)(gi,{className:"w-5 h-5 text-red-500"})]})]}),(0,Da.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,Da.jsx)("input",{type:"text",placeholder:"Title",value:e.metadata.title,onChange:t=>f(e.id,"title",t.target.value),disabled:i,className:"text-sm rounded border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 disabled:opacity-50"}),(0,Da.jsx)("input",{type:"text",placeholder:"Category",value:e.metadata.category,onChange:t=>f(e.id,"category",t.target.value),disabled:i,className:"text-sm rounded border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 disabled:opacity-50"})]}),(0,Da.jsx)("input",{type:"text",placeholder:"Tags (comma-separated)",value:e.metadata.tags,onChange:t=>f(e.id,"tags",t.target.value),disabled:i,className:"w-full text-sm rounded border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 disabled:opacity-50"}),(0,Da.jsx)("textarea",{placeholder:"Description",value:e.metadata.description,onChange:t=>f(e.id,"description",t.target.value),disabled:i,rows:2,className:"w-full text-sm rounded border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 disabled:opacity-50"})]})]})},e.id))})]}),n.length>0&&(0,Da.jsx)("div",{className:"flex justify-end",children:(0,Da.jsxs)("button",{onClick:async()=>{if(0===n.length)return void nr.error("Please select images to upload");o(!0);for(const r of n)try{s(e=>e.map(e=>e.id===r.id?qe(qe({},e),{},{status:"uploading"}):e));const e=new FormData;e.append("file",r.file),r.metadata.description&&e.append("description",r.metadata.description);const n={source:"image_upload",content_type:"image",uploaded_at:(new Date).toISOString(),title:r.metadata.title,category:r.metadata.category,tags:r.metadata.tags?r.metadata.tags.split(",").map(e=>e.trim()):[]};e.append("metadata",JSON.stringify(n)),await Ns(t,e,e=>{const t=Math.round(100*e.loaded/e.total);c(e=>qe(qe({},e),{},{[r.id]:t}))}),s(e=>e.map(e=>e.id===r.id?qe(qe({},e),{},{status:"completed"}):e)),nr.success("".concat(r.file.name," uploaded and embedded with CLIP"))}catch(e){console.error("Error uploading ".concat(r.file.name,":"),e),s(e=>e.map(e=>e.id===r.id?qe(qe({},e),{},{status:"failed"}):e)),nr.error("Failed to upload ".concat(r.file.name))}o(!1);n.every(e=>"completed"===e.status||"failed"===e.status)&&r&&setTimeout(r,1e3)},disabled:i,className:"inline-flex items-center px-6 py-3 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700 disabled:opacity-50 disabled:cursor-not-allowed",children:[(0,Da.jsx)(yi,{className:"w-4 h-4 mr-2"}),i?"Uploading...":"Upload ".concat(n.length," image").concat(n.length>1?"s":"")]})})]})},ki=Ha("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),Si=Ha("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),_i=e=>{var t,r;let{kbId:n,refreshTrigger:s}=e;const[i,o]=(0,a.useState)([]),[l,c]=(0,a.useState)(!0),[d,u]=(0,a.useState)(1),[p,m]=(0,a.useState)(1),[h,f]=(0,a.useState)(""),[g,x]=(0,a.useState)(null);(0,a.useEffect)(()=>{y()},[n,d,s]);const y=async()=>{try{c(!0);const e=await async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:20;try{const n=await Ma.get("/knowledge/".concat(e,"/images/list?page=").concat(t,"&limit=").concat(r));return n.data.data||n.data}catch(n){throw console.error("List images error:",n),n}}(n,d,20);o(e.images),m(e.total_pages)}catch(e){console.error("Error loading images:",e),nr.error("Failed to load images")}finally{c(!1)}},v=async e=>{if(confirm("Are you sure you want to delete this image?"))try{await(async(e,t)=>{try{const r=await Ma.delete("/knowledge/".concat(e,"/images/").concat(t,"?kb_id=").concat(e));return r.data.data||r.data}catch(r){throw console.error("Delete image error:",r),r}})(n,e),nr.success("Image deleted successfully"),y()}catch(t){console.error("Error deleting image:",t),nr.error("Failed to delete image")}},b=i.filter(e=>{var t,r,n;return(null===(t=e.filename)||void 0===t?void 0:t.toLowerCase().includes(h.toLowerCase()))||(null===(r=e.metadata)||void 0===r||null===(n=r.description)||void 0===n?void 0:n.toLowerCase().includes(h.toLowerCase()))});return l?(0,Da.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,Da.jsx)(ki,{className:"w-8 h-8 animate-spin text-primary-600"})}):0===i.length?(0,Da.jsxs)("div",{className:"text-center py-12",children:[(0,Da.jsx)(qs,{className:"w-16 h-16 mx-auto text-gray-400 mb-4"}),(0,Da.jsx)("p",{className:"text-gray-600",children:"No images uploaded yet"})]}):(0,Da.jsxs)("div",{className:"space-y-4",children:[(0,Da.jsxs)("div",{className:"relative",children:[(0,Da.jsx)(ui,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),(0,Da.jsx)("input",{type:"text",value:h,onChange:e=>f(e.target.value),placeholder:"Search images...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-primary-500 focus:border-primary-500"})]}),(0,Da.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:b.map(e=>{var t;return(0,Da.jsxs)("div",{className:"group relative bg-white border border-gray-200 rounded-lg overflow-hidden hover:shadow-lg transition-shadow cursor-pointer",onClick:()=>x(e),children:[(0,Da.jsxs)("div",{className:"aspect-square bg-gray-100 flex items-center justify-center overflow-hidden",children:[e.url||e.thumbnail_url?(0,Da.jsx)("img",{src:e.url||e.thumbnail_url,alt:e.filename,className:"w-full h-full object-cover",onError:e=>{e.target.style.display="none",e.target.nextSibling.style.display="flex"}}):null,(0,Da.jsx)("div",{className:"hidden w-full h-full items-center justify-center",children:(0,Da.jsx)(qs,{className:"w-12 h-12 text-gray-400"})})]}),(0,Da.jsxs)("div",{className:"p-3",children:[(0,Da.jsx)("p",{className:"text-sm font-medium text-gray-900 truncate",children:e.filename}),(0,Da.jsxs)("p",{className:"text-xs text-gray-500",children:[(e.file_size_bytes/1024).toFixed(1)," KB"]}),(null===(t=e.metadata)||void 0===t?void 0:t.description)&&(0,Da.jsx)("p",{className:"text-xs text-gray-600 mt-1 truncate",children:e.metadata.description})]}),(0,Da.jsx)("div",{className:"absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity flex gap-1",children:(0,Da.jsx)("button",{onClick:t=>{t.stopPropagation(),v(e.id)},className:"p-1.5 bg-red-500 text-white rounded hover:bg-red-600",title:"Delete",children:(0,Da.jsx)(ns,{className:"w-4 h-4"})})})]},e.id)})}),p>1&&(0,Da.jsxs)("div",{className:"flex justify-center gap-2 mt-6",children:[(0,Da.jsx)("button",{onClick:()=>u(e=>Math.max(1,e-1)),disabled:1===d,className:"px-4 py-2 border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),(0,Da.jsxs)("span",{className:"px-4 py-2",children:["Page ",d," of ",p]}),(0,Da.jsx)("button",{onClick:()=>u(e=>Math.min(p,e+1)),disabled:d===p,className:"px-4 py-2 border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]}),g&&(0,Da.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",onClick:()=>x(null),children:(0,Da.jsxs)("div",{className:"bg-white rounded-lg max-w-4xl w-full max-h-[90vh] overflow-y-auto p-6",onClick:e=>e.stopPropagation(),children:[(0,Da.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,Da.jsx)("h3",{className:"text-lg font-semibold",children:g.filename}),(0,Da.jsx)("button",{onClick:()=>x(null),className:"text-gray-500 hover:text-gray-700",children:(0,Da.jsx)(ss,{className:"w-5 h-5"})})]}),(0,Da.jsxs)("div",{className:"space-y-4",children:[(0,Da.jsxs)("div",{className:"w-full bg-gray-100 rounded flex items-center justify-center overflow-hidden",children:[g.url?(0,Da.jsx)("img",{src:g.url,alt:g.filename,className:"max-w-full max-h-[60vh] object-contain",onError:e=>{e.target.style.display="none",e.target.nextSibling.style.display="flex"}}):null,(0,Da.jsx)("div",{className:"hidden w-full h-64 items-center justify-center",children:(0,Da.jsx)(qs,{className:"w-16 h-16 text-gray-400"})})]}),(0,Da.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,Da.jsxs)("div",{children:[(0,Da.jsx)("span",{className:"text-gray-600",children:"File Size:"}),(0,Da.jsxs)("span",{className:"ml-2 font-medium",children:[(g.file_size_bytes/1024).toFixed(1)," KB"]})]}),(0,Da.jsxs)("div",{children:[(0,Da.jsx)("span",{className:"text-gray-600",children:"Type:"}),(0,Da.jsx)("span",{className:"ml-2 font-medium",children:g.content_type})]}),g.width&&g.height&&(0,Da.jsxs)("div",{children:[(0,Da.jsx)("span",{className:"text-gray-600",children:"Dimensions:"}),(0,Da.jsxs)("span",{className:"ml-2 font-medium",children:[g.width," \xd7 ",g.height]})]}),(0,Da.jsxs)("div",{children:[(0,Da.jsx)("span",{className:"text-gray-600",children:"Uploaded:"}),(0,Da.jsx)("span",{className:"ml-2 font-medium",children:new Date(g.created_at).toLocaleDateString()})]})]}),(null===(t=g.metadata)||void 0===t?void 0:t.description)&&(0,Da.jsxs)("div",{children:[(0,Da.jsx)("p",{className:"text-sm text-gray-600",children:"Description:"}),(0,Da.jsx)("p",{className:"text-sm mt-1",children:g.metadata.description})]}),(null===(r=g.metadata)||void 0===r?void 0:r.tags)&&(0,Da.jsxs)("div",{children:[(0,Da.jsx)("p",{className:"text-sm text-gray-600",children:"Tags:"}),(0,Da.jsx)("div",{className:"flex flex-wrap gap-2 mt-1",children:g.metadata.tags.map((e,t)=>(0,Da.jsx)("span",{className:"px-2 py-1 bg-primary-100 text-primary-700 text-xs rounded",children:e},t))})]}),(0,Da.jsx)("div",{className:"flex justify-end",children:(0,Da.jsxs)("a",{href:g.url,download:g.filename,className:"inline-flex items-center gap-2 px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700",onClick:e=>e.stopPropagation(),children:[(0,Da.jsx)(Si,{className:"w-4 h-4"}),"Download"]})})]})]})})]})},Ci=e=>{let{kbId:t}=e;const[r,n]=(0,a.useState)(""),[s,i]=(0,a.useState)([]),[o,l]=(0,a.useState)(!1),[c,d]=(0,a.useState)("text");return(0,Da.jsxs)("div",{className:"space-y-6",children:[(0,Da.jsx)("form",{onSubmit:async e=>{if(e.preventDefault(),r.trim())try{var n;l(!0);const e=await(async(e,t)=>{try{const r=await Ma.post("/knowledge/".concat(e,"/images/search"),t);return r.data.data||r.data}catch(r){throw console.error("Search images error:",r),r}})(t,{query:r,search_type:c,top_k:10});i(e.results||[]),0===(null===(n=e.results)||void 0===n?void 0:n.length)?nr("No images found matching your query"):nr.success("Found ".concat(e.results.length," images"))}catch(a){console.error("Search error:",a),nr.error("Failed to search images")}finally{l(!1)}else nr.error("Please enter a search query")},className:"space-y-4",children:(0,Da.jsxs)("div",{children:[(0,Da.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Search for images"}),(0,Da.jsxs)("div",{className:"flex gap-2",children:[(0,Da.jsx)("input",{type:"text",value:r,onChange:e=>n(e.target.value),placeholder:"e.g., red shoes, product images, etc.",className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:ring-primary-500 focus:border-primary-500",disabled:o}),(0,Da.jsx)("button",{type:"submit",disabled:o,className:"px-6 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center",children:o?(0,Da.jsxs)(Da.Fragment,{children:[(0,Da.jsx)(ki,{className:"w-4 h-4 mr-2 animate-spin"}),"Searching..."]}):(0,Da.jsxs)(Da.Fragment,{children:[(0,Da.jsx)(ui,{className:"w-4 h-4 mr-2"}),"Search"]})})]})]})}),s.length>0&&(0,Da.jsxs)("div",{children:[(0,Da.jsxs)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:["Search Results (",s.length,")"]}),(0,Da.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:s.map((e,t)=>{var r;return(0,Da.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg overflow-hidden hover:shadow-lg transition-shadow",children:[(0,Da.jsx)("div",{className:"aspect-square bg-gray-100 flex items-center justify-center",children:(0,Da.jsx)(qs,{className:"w-12 h-12 text-gray-400"})}),(0,Da.jsxs)("div",{className:"p-3",children:[(0,Da.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,Da.jsx)("p",{className:"text-sm font-medium text-gray-900 truncate",children:e.filename||"Image"}),(0,Da.jsxs)("span",{className:"text-xs font-semibold text-primary-600",children:[(100*e.score).toFixed(0),"%"]})]}),(null===(r=e.metadata)||void 0===r?void 0:r.description)&&(0,Da.jsx)("p",{className:"text-xs text-gray-600 truncate",children:e.metadata.description})]})]},e.result_id||t)})})]})]})},Ai=()=>{const{id:e}=re(),t=ee(),[r,n]=(0,a.useState)(null),[s,i]=(0,a.useState)([]),[o,l]=(0,a.useState)(null),[c,d]=(0,a.useState)(null),[u,p]=(0,a.useState)(!0),[m,h]=(0,a.useState)("documents"),[f,g]=(0,a.useState)(0),[x,y]=(0,a.useState)(""),[v,b]=(0,a.useState)("all");(0,a.useEffect)(()=>{j()},[e]);const j=async()=>{try{p(!0);const[a,s,o]=await Promise.all([vs(e),(t=e,Ma.get("/knowledge/".concat(t,"/documents"),{params:r})),ws(e)]);n(a.data.data),i(s.data.data.items||[]),l(o.data.data),await N()}catch(a){nr.error("Failed to load documents"),console.error(a)}finally{p(!1)}var t,r},w=async t=>{if(window.confirm("Are you sure? This will delete all chunks and embeddings."))try{await((e,t)=>Ma.delete("/knowledge/".concat(e,"/documents/").concat(t)))(e,t),nr.success("Document deleted"),j()}catch(r){nr.error("Failed to delete document"),console.error(r)}},N=async()=>{try{const t=await async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;const t=e?"/knowledge/cache/stats?kb_id=".concat(e):"/knowledge/cache/stats";return(await Ma.get(t)).data}(e);d(t.data.data)}catch(t){console.error("Failed to load cache stats:",t)}},k=s.filter(e=>{const t=e.original_filename.toLowerCase().includes(x.toLowerCase()),r="all"===v||e.status===v;return t&&r}),S=e=>{switch(e){case"completed":return(0,Da.jsx)(gs,{className:"w-5 h-5 text-green-500"});case"processing":return(0,Da.jsx)(Ts,{className:"w-5 h-5 text-yellow-500 animate-spin"});case"failed":return(0,Da.jsx)(gi,{className:"w-5 h-5 text-red-500"});default:return(0,Da.jsx)(cs,{className:"w-5 h-5 text-gray-500"})}},_=e=>{if(0===e)return"0 Bytes";const t=Math.floor(Math.log(e)/Math.log(1024));return Math.round(e/Math.pow(1024,t)*100)/100+" "+["Bytes","KB","MB","GB"][t]};return u?(0,Da.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,Da.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):(0,Da.jsxs)("div",{className:"space-y-6",children:[(0,Da.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Da.jsxs)("div",{children:[(0,Da.jsxs)("button",{onClick:()=>t("/knowledge"),className:"flex items-center text-sm text-gray-600 hover:text-gray-900 mb-2",children:[(0,Da.jsx)(fi,{className:"w-4 h-4 mr-1"}),"Back to Knowledge Bases"]}),(0,Da.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:null===r||void 0===r?void 0:r.name}),(0,Da.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:null===r||void 0===r?void 0:r.description})]}),(0,Da.jsxs)(Ie,{to:"/knowledge/".concat(e,"/chat"),className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700",children:[(0,Da.jsx)(rs,{className:"w-4 h-4 mr-2"}),"Test Chat"]})]}),o&&(0,Da.jsxs)("div",{className:"grid grid-cols-1 gap-5 sm:grid-cols-4",children:[(0,Da.jsx)("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:(0,Da.jsx)("div",{className:"p-5",children:(0,Da.jsxs)("div",{className:"flex items-center",children:[(0,Da.jsx)("div",{className:"flex-shrink-0",children:(0,Da.jsx)(cs,{className:"h-6 w-6 text-gray-400"})}),(0,Da.jsx)("div",{className:"ml-5 w-0 flex-1",children:(0,Da.jsxs)("dl",{children:[(0,Da.jsx)("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Total Documents"}),(0,Da.jsx)("dd",{className:"text-2xl font-semibold text-gray-900",children:o.total_documents||0})]})})]})})}),(0,Da.jsx)("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:(0,Da.jsx)("div",{className:"p-5",children:(0,Da.jsxs)("div",{className:"flex items-center",children:[(0,Da.jsx)("div",{className:"flex-shrink-0",children:(0,Da.jsx)(pi,{className:"h-6 w-6 text-gray-400"})}),(0,Da.jsx)("div",{className:"ml-5 w-0 flex-1",children:(0,Da.jsxs)("dl",{children:[(0,Da.jsx)("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Total Chunks"}),(0,Da.jsx)("dd",{className:"text-2xl font-semibold text-gray-900",children:o.total_chunks||0})]})})]})})}),(0,Da.jsx)("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:(0,Da.jsx)("div",{className:"p-5",children:(0,Da.jsxs)("div",{className:"flex items-center",children:[(0,Da.jsx)("div",{className:"flex-shrink-0",children:(0,Da.jsx)(pi,{className:"h-6 w-6 text-gray-400"})}),(0,Da.jsx)("div",{className:"ml-5 w-0 flex-1",children:(0,Da.jsxs)("dl",{children:[(0,Da.jsx)("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Vectors"}),(0,Da.jsx)("dd",{className:"text-2xl font-semibold text-gray-900",children:o.total_vectors||0})]})})]})})}),(0,Da.jsx)("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:(0,Da.jsx)("div",{className:"p-5",children:(0,Da.jsxs)("div",{className:"flex items-center",children:[(0,Da.jsx)("div",{className:"flex-shrink-0",children:(0,Da.jsx)(ui,{className:"h-6 w-6 text-gray-400"})}),(0,Da.jsx)("div",{className:"ml-5 w-0 flex-1",children:(0,Da.jsxs)("dl",{children:[(0,Da.jsx)("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Embedding Model"}),(0,Da.jsx)("dd",{className:"text-sm font-semibold text-gray-900",children:o.embedding_model||"N/A"})]})})]})})}),(0,Da.jsx)("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:(0,Da.jsx)("div",{className:"p-5",children:(0,Da.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Da.jsxs)("div",{className:"flex items-center flex-1",children:[(0,Da.jsx)("div",{className:"flex-shrink-0",children:(0,Da.jsx)(pi,{className:"h-6 w-6 text-blue-400"})}),(0,Da.jsx)("div",{className:"ml-5",children:(0,Da.jsxs)("dl",{children:[(0,Da.jsx)("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Cache"}),(0,Da.jsxs)("dd",{className:"text-lg font-medium text-gray-900",children:[(null===c||void 0===c?void 0:c.total_cached_queries)||0," queries"]}),c&&(0,Da.jsxs)("dd",{className:"text-xs text-gray-500 mt-1",children:[c.total_cache_hits," hits \u2022 ",c.cache_hit_rate," avg"]})]})})]}),(0,Da.jsxs)("button",{onClick:async()=>{if(window.confirm("Clear semantic cache for this knowledge base? This will force fresh searches but may increase API costs temporarily."))try{await async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;const t=e?"/knowledge/cache/clear?kb_id=".concat(e):"/knowledge/cache/clear";return(await Ma.delete(t)).data}(e),nr.success("Cache cleared successfully"),await N()}catch(t){nr.error("Failed to clear cache"),console.error(t)}},className:"ml-3 inline-flex items-center px-3 py-1.5 border border-red-300 text-xs font-medium rounded text-red-700 bg-white hover:bg-red-50",title:"Clear semantic cache",children:[(0,Da.jsx)(ns,{className:"w-3 h-3 mr-1"}),"Clear"]})]})})})]}),(0,Da.jsxs)("div",{className:"bg-white shadow rounded-lg",children:[(0,Da.jsx)("div",{className:"border-b border-gray-200",children:(0,Da.jsxs)("nav",{className:"-mb-px flex space-x-8 px-6","aria-label":"Tabs",children:[(0,Da.jsxs)("button",{onClick:()=>h("documents"),className:"".concat("documents"===m?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"," whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm flex items-center"),children:[(0,Da.jsx)(cs,{className:"w-5 h-5 mr-2"}),"Documents (",s.length,")"]}),(0,Da.jsxs)("button",{onClick:()=>h("upload"),className:"".concat("upload"===m?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"," whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm flex items-center"),children:[(0,Da.jsx)(yi,{className:"w-5 h-5 mr-2"}),"Upload Files"]}),(0,Da.jsxs)("button",{onClick:()=>h("scrape"),className:"".concat("scrape"===m?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"," whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm flex items-center"),children:[(0,Da.jsx)(ds,{className:"w-5 h-5 mr-2"}),"Web Scraping"]}),(0,Da.jsxs)("button",{onClick:()=>h("images"),className:"flex items-center px-4 py-2 text-sm font-medium rounded-md transition-colors ".concat("images"===m?"bg-primary-100 text-primary-700":"text-gray-700 hover:bg-gray-100"),children:[(0,Da.jsx)(qs,{className:"w-4 h-4 mr-2"}),"Images"]})]})}),(0,Da.jsxs)("div",{className:"p-6",children:["documents"===m&&(0,Da.jsxs)("div",{className:"space-y-4",children:[(0,Da.jsxs)("div",{className:"flex gap-4",children:[(0,Da.jsxs)("div",{className:"flex-1 relative",children:[(0,Da.jsx)(ui,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),(0,Da.jsx)("input",{type:"text",placeholder:"Search documents...",value:x,onChange:e=>y(e.target.value),className:"pl-10 w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500"})]}),(0,Da.jsxs)("select",{value:v,onChange:e=>b(e.target.value),className:"rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500",children:[(0,Da.jsx)("option",{value:"all",children:"All Status"}),(0,Da.jsx)("option",{value:"completed",children:"Completed"}),(0,Da.jsx)("option",{value:"processing",children:"Processing"}),(0,Da.jsx)("option",{value:"failed",children:"Failed"})]}),(0,Da.jsxs)("button",{onClick:j,className:"inline-flex items-center px-4 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50",children:[(0,Da.jsx)(vi,{className:"w-4 h-4 mr-2"}),"Refresh"]})]}),0===k.length?(0,Da.jsxs)("div",{className:"text-center py-12",children:[(0,Da.jsx)(cs,{className:"mx-auto h-12 w-12 text-gray-400"}),(0,Da.jsx)("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No documents"}),(0,Da.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Upload files or scrape websites to get started"})]}):(0,Da.jsx)("div",{className:"overflow-x-auto shadow ring-1 ring-black ring-opacity-5 rounded-lg",children:(0,Da.jsxs)("table",{className:"min-w-full divide-y divide-gray-300",children:[(0,Da.jsx)("thead",{className:"bg-gray-50",children:(0,Da.jsxs)("tr",{children:[(0,Da.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-2/5",children:"Document"}),(0,Da.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-24",children:"Type"}),(0,Da.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-24",children:"Size"}),(0,Da.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-28",children:"Status"}),(0,Da.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-32",children:"Stats"}),(0,Da.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-32",children:"Date"}),(0,Da.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider w-20",children:"Actions"})]})}),(0,Da.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:k.map(e=>{var t,r;return(0,Da.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,Da.jsx)("td",{className:"px-6 py-4",children:(0,Da.jsxs)("div",{className:"flex items-center min-w-0",children:[S(e.status),(0,Da.jsxs)("div",{className:"ml-3 min-w-0 flex-1",children:[(0,Da.jsx)("div",{className:"text-sm font-medium text-gray-900 truncate max-w-md",title:e.original_filename,children:e.original_filename}),(null===(t=e.metadata)||void 0===t?void 0:t.source_url)&&(0,Da.jsx)("div",{className:"text-xs text-gray-500 truncate max-w-md",title:e.metadata.source_url,children:e.metadata.source_url})]})]})}),(0,Da.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,Da.jsx)("span",{className:"text-xs text-gray-900 truncate block max-w-24",title:e.file_type,children:e.file_type.split("/")[1]||e.file_type})}),(0,Da.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:_(e.file_size_bytes)}),(0,Da.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,Da.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat((r=e.status,{completed:"bg-green-100 text-green-800",processing:"bg-yellow-100 text-yellow-800",failed:"bg-red-100 text-red-800",uploaded:"bg-blue-100 text-blue-800"}[r]||"bg-gray-100 text-gray-800")),children:e.status})}),(0,Da.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.processing_stats?(0,Da.jsxs)("div",{className:"flex gap-3",children:[(0,Da.jsxs)("span",{title:"Chunks",children:["\ud83d\udce6 ",e.processing_stats.total_chunks||0]}),e.processing_stats.total_pages>0&&(0,Da.jsxs)("span",{title:"Pages",children:["\ud83d\udcc4 ",e.processing_stats.total_pages]})]}):"-"}),(0,Da.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(e.created_at).toLocaleDateString()}),(0,Da.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:(0,Da.jsx)("button",{onClick:()=>w(e.id),className:"text-red-600 hover:text-red-900",title:"Delete document",children:(0,Da.jsx)(ns,{className:"w-4 h-4"})})})]},e.id)})})]})})]}),"upload"===m&&(0,Da.jsx)(bi,{kbId:e,onComplete:()=>{nr.success("Upload completed!"),j(),h("documents")}}),"scrape"===m&&(0,Da.jsx)(wi,{kbId:e,onComplete:()=>{nr.success("Scraping completed!"),j(),h("documents")}}),"images"===m&&(0,Da.jsxs)("div",{className:"space-y-6",children:[(0,Da.jsxs)("div",{className:"bg-white shadow rounded-lg p-6",children:[(0,Da.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Upload Images"}),(0,Da.jsx)(Ni,{kbId:e,onComplete:()=>g(e=>e+1)})]}),(0,Da.jsxs)("div",{className:"bg-white shadow rounded-lg p-6",children:[(0,Da.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Search Images"}),(0,Da.jsx)(Ci,{kbId:e})]}),(0,Da.jsxs)("div",{className:"bg-white shadow rounded-lg p-6",children:[(0,Da.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Image Gallery"}),(0,Da.jsx)(_i,{kbId:e,refreshTrigger:f})]})]})]})]})]})},Oi=()=>{const{id:e}=re(),t=ee(),[r,n]=(0,a.useState)(null),[s,i]=(0,a.useState)(""),[o,l]=(0,a.useState)(5),[c,d]=(0,a.useState)("text"),[u,p]=(0,a.useState)(!1),[m,h]=(0,a.useState)(null),[f,g]=(0,a.useState)([]);(0,a.useEffect)(()=>{x()},[e]);const x=async()=>{try{const t=await vs(e);n(t.data.data)}catch(t){nr.error("Failed to load knowledge base"),console.error(t)}},y=(e,t)=>{if(!t)return e;return e.split(new RegExp("(".concat(t,")"),"gi")).map((e,r)=>e.toLowerCase()===t.toLowerCase()?(0,Da.jsx)("mark",{className:"bg-yellow-200",children:e},r):e)};return(0,Da.jsxs)("div",{className:"space-y-6",children:[(0,Da.jsx)("div",{className:"flex items-center justify-between",children:(0,Da.jsxs)("div",{children:[(0,Da.jsxs)("button",{onClick:()=>t("/knowledge/".concat(e,"/documents")),className:"flex items-center text-sm text-gray-600 hover:text-gray-900 mb-2",children:[(0,Da.jsx)(fi,{className:"w-4 h-4 mr-1"}),"Back to Documents"]}),(0,Da.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Search Knowledge Base"}),(0,Da.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:null===r||void 0===r?void 0:r.name})]})}),(0,Da.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,Da.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[(0,Da.jsxs)("div",{className:"bg-white shadow rounded-lg p-6",children:[(0,Da.jsxs)("form",{onSubmit:async t=>{if(t.preventDefault(),s.trim())try{p(!0);const t=Date.now(),r=await js({kb_id:e,query:s,top_k:o,search_type:c}),n=Date.now()-t,a=qe(qe({},r.data.data),{},{query:s,timestamp:(new Date).toISOString(),searchTime:n});h(a),g(e=>[a,...e.slice(0,9)]),nr.success("Found ".concat(a.results.total_found," results"))}catch(r){nr.error("Search failed"),console.error(r)}finally{p(!1)}else nr.error("Please enter a search query")},className:"space-y-4",children:[(0,Da.jsxs)("div",{children:[(0,Da.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Search Query"}),(0,Da.jsxs)("div",{className:"relative",children:[(0,Da.jsx)(ui,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),(0,Da.jsx)("input",{type:"text",value:s,onChange:e=>i(e.target.value),placeholder:"Ask a question or enter search terms...",className:"pl-10 w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500"})]})]}),(0,Da.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,Da.jsxs)("div",{children:[(0,Da.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Results to Return"}),(0,Da.jsxs)("select",{value:o,onChange:e=>l(parseInt(e.target.value)),className:"w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500",children:[(0,Da.jsx)("option",{value:3,children:"Top 3"}),(0,Da.jsx)("option",{value:5,children:"Top 5"}),(0,Da.jsx)("option",{value:10,children:"Top 10"}),(0,Da.jsx)("option",{value:20,children:"Top 20"})]})]}),(0,Da.jsxs)("div",{children:[(0,Da.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Search Type"}),(0,Da.jsxs)("select",{value:c,onChange:e=>d(e.target.value),className:"w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500",children:[(0,Da.jsx)("option",{value:"text",children:"Text Only"}),(0,Da.jsx)("option",{value:"hybrid",children:"Hybrid (Text + Image)"}),(0,Da.jsx)("option",{value:"image",children:"Image Only"})]})]})]}),(0,Da.jsx)("button",{type:"submit",disabled:u,className:"w-full inline-flex justify-center items-center px-6 py-3 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700 disabled:opacity-50",children:u?(0,Da.jsxs)(Da.Fragment,{children:[(0,Da.jsx)(Ws,{className:"w-5 h-5 mr-2 animate-pulse"}),"Searching..."]}):(0,Da.jsxs)(Da.Fragment,{children:[(0,Da.jsx)(ui,{className:"w-5 h-5 mr-2"}),"Search"]})})]}),(0,Da.jsxs)("div",{className:"mt-4 pt-4 border-t border-gray-200",children:[(0,Da.jsx)("p",{className:"text-xs font-medium text-gray-700 mb-2",children:"Try these examples:"}),(0,Da.jsx)("div",{className:"flex flex-wrap gap-2",children:["What is AIVA?","How to create an agent?","Pricing information","Supported languages","Integration options"].map((e,t)=>(0,Da.jsx)("button",{onClick:()=>i(e),className:"px-3 py-1 text-xs bg-gray-100 hover:bg-gray-200 rounded-full text-gray-700",children:e},t))})]})]}),m&&(0,Da.jsxs)("div",{className:"space-y-4",children:[(0,Da.jsx)("div",{className:"bg-white shadow rounded-lg p-6",children:(0,Da.jsxs)("div",{className:"grid grid-cols-4 gap-4",children:[(0,Da.jsxs)("div",{className:"text-center",children:[(0,Da.jsx)("div",{className:"text-2xl font-bold text-primary-600",children:m.results.total_found}),(0,Da.jsx)("div",{className:"text-xs text-gray-500 mt-1",children:"Results Found"})]}),(0,Da.jsxs)("div",{className:"text-center",children:[(0,Da.jsxs)("div",{className:"text-2xl font-bold text-gray-900",children:[m.searchTime,"ms"]}),(0,Da.jsx)("div",{className:"text-xs text-gray-500 mt-1",children:"Search Time"})]}),(0,Da.jsxs)("div",{className:"text-center",children:[(0,Da.jsx)("div",{className:"text-2xl font-bold text-gray-900",children:m.metrics.chunks_searched}),(0,Da.jsx)("div",{className:"text-xs text-gray-500 mt-1",children:"Chunks Searched"})]}),(0,Da.jsxs)("div",{className:"text-center",children:[(0,Da.jsxs)("div",{className:"text-2xl font-bold text-green-600",children:["$",m.cost.toFixed(6)]}),(0,Da.jsx)("div",{className:"text-xs text-gray-500 mt-1",children:"Cost"})]})]})}),m.results.text_results.length>0&&(0,Da.jsxs)("div",{className:"bg-white shadow rounded-lg p-6",children:[(0,Da.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[(0,Da.jsx)(cs,{className:"w-5 h-5 mr-2"}),"Text Results (",m.results.text_results.length,")"]}),(0,Da.jsx)("div",{className:"space-y-4",children:m.results.text_results.map((e,t)=>(0,Da.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4 hover:border-primary-300 transition-colors",children:[(0,Da.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,Da.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,Da.jsx)("div",{className:"flex-shrink-0 w-8 h-8 bg-primary-100 rounded-full flex items-center justify-center",children:(0,Da.jsxs)("span",{className:"text-sm font-semibold text-primary-600",children:["#",t+1]})}),(0,Da.jsxs)("div",{children:[(0,Da.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.source.document_name}),(0,Da.jsxs)("div",{className:"text-xs text-gray-500",children:["Chunk ",e.source.chunk_index," \u2022 ",e.type]})]})]}),(0,Da.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Da.jsxs)("div",{className:"text-right",children:[(0,Da.jsx)("div",{className:"text-xs text-gray-500",children:"Relevance"}),(0,Da.jsxs)("div",{className:"text-sm font-semibold text-gray-900",children:[(100*e.score).toFixed(1),"%"]})]}),(0,Da.jsx)("div",{className:"w-16 bg-gray-200 rounded-full h-2",children:(0,Da.jsx)("div",{className:"bg-primary-600 h-2 rounded-full",style:{width:"".concat(100*e.score,"%")}})})]})]}),(0,Da.jsx)("div",{className:"text-sm text-gray-700 leading-relaxed",children:y(e.content,s)}),e.source.metadata&&Object.keys(e.source.metadata).length>0&&(0,Da.jsx)("div",{className:"mt-3 pt-3 border-t border-gray-100",children:(0,Da.jsx)("div",{className:"flex flex-wrap gap-2",children:Object.entries(e.source.metadata).map(e=>{let[t,r]=e;return(0,Da.jsxs)("span",{className:"inline-flex items-center px-2 py-1 rounded text-xs bg-gray-100 text-gray-600",children:[t,": ",String(r)]},t)})})})]},e.result_id))})]}),0===m.results.total_found&&(0,Da.jsxs)("div",{className:"bg-white shadow rounded-lg p-12 text-center",children:[(0,Da.jsx)(ui,{className:"mx-auto h-12 w-12 text-gray-400"}),(0,Da.jsx)("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No results found"}),(0,Da.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Try adjusting your search query or adding more documents"})]})]}),!m&&(0,Da.jsxs)("div",{className:"bg-white shadow rounded-lg p-12 text-center",children:[(0,Da.jsx)(ui,{className:"mx-auto h-12 w-12 text-gray-400"}),(0,Da.jsx)("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"Ready to search"}),(0,Da.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Enter a query above to search the knowledge base"})]})]}),(0,Da.jsxs)("div",{className:"space-y-6",children:[f.length>0&&(0,Da.jsxs)("div",{className:"bg-white shadow rounded-lg p-6",children:[(0,Da.jsxs)("h3",{className:"text-sm font-semibold text-gray-900 mb-4 flex items-center",children:[(0,Da.jsx)(Ts,{className:"w-4 h-4 mr-2"}),"Recent Searches"]}),(0,Da.jsx)("div",{className:"space-y-2",children:f.map((e,t)=>(0,Da.jsxs)("button",{onClick:()=>{return i((t=e).query),void h(t);var t},className:"w-full text-left p-3 rounded-lg hover:bg-gray-50 border border-gray-200 transition-colors",children:[(0,Da.jsx)("div",{className:"text-sm font-medium text-gray-900 truncate",children:e.query}),(0,Da.jsxs)("div",{className:"flex items-center justify-between mt-1",children:[(0,Da.jsxs)("span",{className:"text-xs text-gray-500",children:[e.results.total_found," results"]}),(0,Da.jsx)("span",{className:"text-xs text-gray-400",children:new Date(e.timestamp).toLocaleTimeString()})]})]},t))})]}),(0,Da.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[(0,Da.jsx)("h3",{className:"text-sm font-semibold text-blue-900 mb-2",children:"Search Tips"}),(0,Da.jsxs)("ul",{className:"text-xs text-blue-700 space-y-2",children:[(0,Da.jsx)("li",{children:"\u2022 Use natural language questions"}),(0,Da.jsx)("li",{children:"\u2022 Be specific for better results"}),(0,Da.jsx)("li",{children:"\u2022 Try different phrasings"}),(0,Da.jsx)("li",{children:"\u2022 Check relevance scores"}),(0,Da.jsx)("li",{children:"\u2022 Adjust top_k for more results"})]})]}),m&&(0,Da.jsxs)("div",{className:"bg-white shadow rounded-lg p-6",children:[(0,Da.jsx)("h3",{className:"text-sm font-semibold text-gray-900 mb-4",children:"Search Metrics"}),(0,Da.jsxs)("div",{className:"space-y-3",children:[(0,Da.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,Da.jsx)("span",{className:"text-gray-600",children:"Query Tokens"}),(0,Da.jsx)("span",{className:"font-medium text-gray-900",children:m.metrics.query_tokens||0})]}),(0,Da.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,Da.jsx)("span",{className:"text-gray-600",children:"Embedding Model"}),(0,Da.jsx)("span",{className:"font-medium text-gray-900 text-xs",children:m.metrics.embedding_model})]}),(0,Da.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,Da.jsx)("span",{className:"text-gray-600",children:"Processing Time"}),(0,Da.jsxs)("span",{className:"font-medium text-gray-900",children:[m.metrics.processing_time_ms,"ms"]})]}),(0,Da.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,Da.jsx)("span",{className:"text-gray-600",children:"Search Cost"}),(0,Da.jsxs)("span",{className:"font-medium text-green-600",children:["$",m.cost.toFixed(6)]})]})]})]})]})]})]})},Pi=()=>{const{id:e}=re(),t=ee(),[r,n]=(0,a.useState)(null),[s,i]=(0,a.useState)(null),[o,l]=(0,a.useState)([]),[c,d]=(0,a.useState)(!0),[u,p]=(0,a.useState)("7d");(0,a.useEffect)(()=>{m()},[e,u]);const m=async()=>{try{d(!0);const[a,s,o]=await Promise.all([vs(e),ws(e),(t=e,r={limit:50},Ma.get("/knowledge/".concat(t,"/searches"),{params:r}))]);n(a.data.data),i(s.data.data),l(o.data.data||[])}catch(a){nr.error("Failed to load statistics"),console.error(a)}finally{d(!1)}var t,r};if(c)return(0,Da.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,Da.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})});const h=(()=>{const e={};return o.forEach(t=>{const r=new Date(t.created_at).toLocaleDateString();e[r]=(e[r]||0)+1}),e})(),f=(()=>{const e={};return o.forEach(t=>{e[t.query]=(e[t.query]||0)+1}),Object.entries(e).sort((e,t)=>t[1]-e[1]).slice(0,10).map(e=>{let[t,r]=e;return{query:t,count:r}})})();return(0,Da.jsxs)("div",{className:"space-y-6",children:[(0,Da.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Da.jsxs)("div",{children:[(0,Da.jsxs)("button",{onClick:()=>t("/knowledge/".concat(e,"/documents")),className:"flex items-center text-sm text-gray-600 hover:text-gray-900 mb-2",children:[(0,Da.jsx)(fi,{className:"w-4 h-4 mr-1"}),"Back to Documents"]}),(0,Da.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Knowledge Base Statistics"}),(0,Da.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:null===r||void 0===r?void 0:r.name})]}),(0,Da.jsxs)("select",{value:u,onChange:e=>p(e.target.value),className:"rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500",children:[(0,Da.jsx)("option",{value:"24h",children:"Last 24 Hours"}),(0,Da.jsx)("option",{value:"7d",children:"Last 7 Days"}),(0,Da.jsx)("option",{value:"30d",children:"Last 30 Days"}),(0,Da.jsx)("option",{value:"90d",children:"Last 90 Days"})]})]}),(0,Da.jsxs)("div",{className:"grid grid-cols-1 gap-5 sm:grid-cols-2 lg:grid-cols-4",children:[(0,Da.jsx)("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:(0,Da.jsx)("div",{className:"p-5",children:(0,Da.jsxs)("div",{className:"flex items-center",children:[(0,Da.jsx)("div",{className:"flex-shrink-0",children:(0,Da.jsx)(cs,{className:"h-6 w-6 text-gray-400"})}),(0,Da.jsx)("div",{className:"ml-5 w-0 flex-1",children:(0,Da.jsxs)("dl",{children:[(0,Da.jsx)("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Total Documents"}),(0,Da.jsx)("dd",{className:"flex items-baseline",children:(0,Da.jsx)("div",{className:"text-2xl font-semibold text-gray-900",children:(null===s||void 0===s?void 0:s.total_documents)||0})})]})})]})})}),(0,Da.jsx)("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:(0,Da.jsx)("div",{className:"p-5",children:(0,Da.jsxs)("div",{className:"flex items-center",children:[(0,Da.jsx)("div",{className:"flex-shrink-0",children:(0,Da.jsx)(pi,{className:"h-6 w-6 text-gray-400"})}),(0,Da.jsx)("div",{className:"ml-5 w-0 flex-1",children:(0,Da.jsxs)("dl",{children:[(0,Da.jsx)("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Total Chunks"}),(0,Da.jsx)("dd",{className:"flex items-baseline",children:(0,Da.jsx)("div",{className:"text-2xl font-semibold text-gray-900",children:(null===s||void 0===s?void 0:s.total_chunks)||0})})]})})]})})}),(0,Da.jsx)("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:(0,Da.jsx)("div",{className:"p-5",children:(0,Da.jsxs)("div",{className:"flex items-center",children:[(0,Da.jsx)("div",{className:"flex-shrink-0",children:(0,Da.jsx)(ui,{className:"h-6 w-6 text-gray-400"})}),(0,Da.jsx)("div",{className:"ml-5 w-0 flex-1",children:(0,Da.jsxs)("dl",{children:[(0,Da.jsx)("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Total Searches"}),(0,Da.jsx)("dd",{className:"flex items-baseline",children:(0,Da.jsx)("div",{className:"text-2xl font-semibold text-gray-900",children:o.length})})]})})]})})}),(0,Da.jsx)("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:(0,Da.jsx)("div",{className:"p-5",children:(0,Da.jsxs)("div",{className:"flex items-center",children:[(0,Da.jsx)("div",{className:"flex-shrink-0",children:(0,Da.jsx)(Xa,{className:"h-6 w-6 text-gray-400"})}),(0,Da.jsx)("div",{className:"ml-5 w-0 flex-1",children:(0,Da.jsxs)("dl",{children:[(0,Da.jsx)("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Avg Relevance"}),(0,Da.jsx)("dd",{className:"flex items-baseline",children:(0,Da.jsxs)("div",{className:"text-2xl font-semibold text-gray-900",children:[(()=>{if(!o.length)return 0;return(o.reduce((e,t)=>e+(t.avg_relevance_score||0),0)/o.length).toFixed(2)})(),"%"]})})]})})]})})})]}),(0,Da.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,Da.jsxs)("div",{className:"bg-white shadow rounded-lg p-6",children:[(0,Da.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[(0,Da.jsx)(Is,{className:"w-5 h-5 mr-2"}),"Search Activity"]}),Object.keys(h).length>0?(0,Da.jsx)("div",{className:"space-y-3",children:Object.entries(h).sort((e,t)=>new Date(t[0])-new Date(e[0])).slice(0,7).map(e=>{let[t,r]=e;return(0,Da.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Da.jsx)("span",{className:"text-sm text-gray-600",children:t}),(0,Da.jsxs)("div",{className:"flex items-center",children:[(0,Da.jsx)("div",{className:"w-32 bg-gray-200 rounded-full h-2 mr-3",children:(0,Da.jsx)("div",{className:"bg-primary-600 h-2 rounded-full",style:{width:"".concat(r/Math.max(...Object.values(h))*100,"%")}})}),(0,Da.jsx)("span",{className:"text-sm font-medium text-gray-900 w-8 text-right",children:r})]})]},t)})}):(0,Da.jsx)("div",{className:"text-center py-8 text-gray-500",children:"No search activity yet"})]}),(0,Da.jsxs)("div",{className:"bg-white shadow rounded-lg p-6",children:[(0,Da.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[(0,Da.jsx)($s,{className:"w-5 h-5 mr-2"}),"Top Queries"]}),f.length>0?(0,Da.jsx)("div",{className:"space-y-3",children:f.map((e,t)=>(0,Da.jsxs)("div",{className:"flex items-start justify-between",children:[(0,Da.jsx)("div",{className:"flex-1 min-w-0 mr-4",children:(0,Da.jsxs)("div",{className:"flex items-center",children:[(0,Da.jsx)("span",{className:"flex-shrink-0 w-6 h-6 bg-primary-100 rounded-full flex items-center justify-center text-xs font-semibold text-primary-600 mr-2",children:t+1}),(0,Da.jsx)("span",{className:"text-sm text-gray-900 truncate",children:e.query})]})}),(0,Da.jsx)("span",{className:"flex-shrink-0 inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800",children:e.count})]},t))}):(0,Da.jsx)("div",{className:"text-center py-8 text-gray-500",children:"No queries yet"})]})]}),(0,Da.jsxs)("div",{className:"bg-white shadow rounded-lg p-6",children:[(0,Da.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[(0,Da.jsx)(Ts,{className:"w-5 h-5 mr-2"}),"Recent Searches"]}),o.length>0?(0,Da.jsx)("div",{className:"overflow-hidden shadow ring-1 ring-black ring-opacity-5 rounded-lg",children:(0,Da.jsxs)("table",{className:"min-w-full divide-y divide-gray-300",children:[(0,Da.jsx)("thead",{className:"bg-gray-50",children:(0,Da.jsxs)("tr",{children:[(0,Da.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Query"}),(0,Da.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Results"}),(0,Da.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Avg Score"}),(0,Da.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Time"}),(0,Da.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"})]})}),(0,Da.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:o.slice(0,20).map(e=>(0,Da.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,Da.jsx)("td",{className:"px-6 py-4 text-sm text-gray-900 max-w-md truncate",children:e.query}),(0,Da.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.results_count||0}),(0,Da.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.avg_relevance_score?"".concat((100*e.avg_relevance_score).toFixed(1),"%"):"N/A"}),(0,Da.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:[e.processing_time_ms,"ms"]}),(0,Da.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(e.created_at).toLocaleString()})]},e.id))})]})}):(0,Da.jsx)("div",{className:"text-center py-12 text-gray-500",children:"No search history available"})]}),(0,Da.jsxs)("div",{className:"bg-white shadow rounded-lg p-6",children:[(0,Da.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"System Information"}),(0,Da.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,Da.jsxs)("div",{children:[(0,Da.jsx)("dt",{className:"text-sm font-medium text-gray-500",children:"Embedding Model"}),(0,Da.jsx)("dd",{className:"mt-1 text-sm text-gray-900",children:(null===s||void 0===s?void 0:s.embedding_model)||"N/A"})]}),(0,Da.jsxs)("div",{children:[(0,Da.jsx)("dt",{className:"text-sm font-medium text-gray-500",children:"Vector Dimension"}),(0,Da.jsx)("dd",{className:"mt-1 text-sm text-gray-900",children:(null===s||void 0===s?void 0:s.vector_dimension)||"N/A"})]}),(0,Da.jsxs)("div",{children:[(0,Da.jsx)("dt",{className:"text-sm font-medium text-gray-500",children:"Total Vectors"}),(0,Da.jsx)("dd",{className:"mt-1 text-sm text-gray-900",children:(null===s||void 0===s?void 0:s.total_vectors)||0})]}),(0,Da.jsxs)("div",{children:[(0,Da.jsx)("dt",{className:"text-sm font-medium text-gray-500",children:"Status"}),(0,Da.jsx)("dd",{className:"mt-1",children:(0,Da.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:(null===r||void 0===r?void 0:r.status)||"active"})})]})]})]})]})},Ei=()=>{const{id:e}=re(),t=ee(),r=(0,a.useRef)(null),[n,s]=(0,a.useState)(null),[i,o]=(0,a.useState)(!0),[l,c]=(0,a.useState)([]),[d,u]=(0,a.useState)(""),[p,m]=(0,a.useState)(!1),[h]=(0,a.useState)("test-".concat(Date.now())),[f,g]=(0,a.useState)(null),[x,y]=(0,a.useState)(null),[v,b]=(0,a.useState)(null),j=(0,a.useRef)(null);(0,a.useEffect)(()=>{w()},[e]),(0,a.useEffect)(()=>{N()},[l]);const w=async()=>{try{o(!0);const t=await vs(e);s(t.data.data),c([{role:"assistant",content:"Hi! I'm ready to answer questions about **".concat(t.data.data.name,"**. Ask me anything!"),timestamp:(new Date).toISOString()}])}catch(t){nr.error("Failed to load knowledge base"),console.error(t)}finally{o(!1)}},N=()=>{var e;null===(e=r.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})},k=()=>{y(null),b(null),j.current&&(j.current.value="")};return i?(0,Da.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,Da.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):(0,Da.jsxs)("div",{className:"h-screen flex flex-col bg-gray-50",children:[(0,Da.jsx)("div",{className:"bg-white border-b border-gray-200 px-6 py-4",children:(0,Da.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Da.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,Da.jsx)("button",{onClick:()=>t("/knowledge/".concat(e,"/documents")),className:"text-gray-600 hover:text-gray-900",children:(0,Da.jsx)(fi,{className:"w-5 h-5"})}),(0,Da.jsxs)("div",{children:[(0,Da.jsx)("h1",{className:"text-xl font-bold text-gray-900",children:"Test Chat"}),(0,Da.jsx)("p",{className:"text-sm text-gray-500",children:null===n||void 0===n?void 0:n.name})]})]}),(0,Da.jsxs)("button",{onClick:()=>{c([{role:"assistant",content:"Chat cleared! Ask me anything about **".concat(null===n||void 0===n?void 0:n.name,"**."),timestamp:(new Date).toISOString()}])},className:"inline-flex items-center px-3 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50",children:[(0,Da.jsx)(Ls,{className:"w-4 h-4 mr-2"}),"Clear Chat"]})]})}),(0,Da.jsx)("div",{className:"flex-1 overflow-y-auto px-6 py-6",children:(0,Da.jsxs)("div",{className:"max-w-4xl mx-auto space-y-6",children:[l.map((e,t)=>(0,Da.jsx)("div",{className:"flex ".concat("user"===e.role?"justify-end":"justify-start"),children:(0,Da.jsxs)("div",{className:"flex max-w-3xl ".concat("user"===e.role?"flex-row-reverse":"flex-row"," gap-3"),children:[(0,Da.jsx)("div",{className:"flex-shrink-0 w-8 h-8 rounded-full flex items-center justify-center ".concat("user"===e.role?"bg-primary-600 text-white":"bg-gray-200 text-gray-600"),children:"user"===e.role?(0,Da.jsx)(Es,{className:"w-5 h-5"}):(0,Da.jsx)(Ya,{className:"w-5 h-5"})}),(0,Da.jsxs)("div",{className:"flex-1 ".concat("user"===e.role?"text-right":"text-left"),children:[(0,Da.jsx)("div",{className:"inline-block px-4 py-3 rounded-lg ".concat("user"===e.role?"bg-primary-600 text-white":e.error?"bg-red-50 text-red-900 border border-red-200":"bg-white text-gray-900 border border-gray-200"),children:(0,Da.jsx)("div",{className:"prose prose-sm max-w-none",children:e.content.split("\n").map((e,t)=>{const r=e.split(/(\*\*.*?\*\*)/g);return(0,Da.jsx)("p",{className:"mb-2 last:mb-0",children:r.map((e,t)=>e.startsWith("**")&&e.endsWith("**")?(0,Da.jsx)("strong",{children:e.slice(2,-2)},t):(0,Da.jsx)("span",{children:e},t))},t)})})}),(0,Da.jsxs)("div",{className:"flex items-center gap-2 mt-1 text-xs text-gray-500 ".concat("user"===e.role?"justify-end":"justify-start"),children:[(0,Da.jsx)("span",{children:new Date(e.timestamp).toLocaleTimeString()}),"assistant"===e.role&&(0,Da.jsx)("button",{onClick:()=>((e,t)=>{navigator.clipboard.writeText(e),g(t),setTimeout(()=>g(null),2e3),nr.success("Copied to clipboard")})(e.content,t),className:"hover:text-gray-700",children:f===t?(0,Da.jsx)(Vs,{className:"w-3 h-3"}):(0,Da.jsx)(Gs,{className:"w-3 h-3"})})]}),e.sources&&e.sources.length>0&&(0,Da.jsx)("div",{className:"mt-2 text-xs",children:(0,Da.jsxs)("details",{className:"cursor-pointer",children:[(0,Da.jsxs)("summary",{className:"text-gray-500 hover:text-gray-700",children:["View sources (",e.sources.length,")"]}),(0,Da.jsx)("div",{className:"mt-2 space-y-1 text-gray-600",children:e.sources.map((e,t)=>(0,Da.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Da.jsx)("span",{children:e.document}),(0,Da.jsxs)("span",{className:"text-gray-400",children:[(100*e.score).toFixed(0),"%"]})]},t))})]})})]})]})},t)),p&&(0,Da.jsx)("div",{className:"flex justify-start",children:(0,Da.jsxs)("div",{className:"flex gap-3 max-w-3xl",children:[(0,Da.jsx)("div",{className:"flex-shrink-0 w-8 h-8 rounded-full bg-gray-200 flex items-center justify-center",children:(0,Da.jsx)(Ya,{className:"w-5 h-5 text-gray-600"})}),(0,Da.jsx)("div",{className:"bg-white border border-gray-200 rounded-lg px-4 py-3",children:(0,Da.jsxs)("div",{className:"flex space-x-2",children:[(0,Da.jsx)("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce"}),(0,Da.jsx)("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),(0,Da.jsx)("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})})]})}),(0,Da.jsx)("div",{ref:r})]})}),(0,Da.jsx)("div",{className:"bg-white border-t border-gray-200 px-6 py-4",children:(0,Da.jsxs)("form",{onSubmit:async t=>{if(t.preventDefault(),!d.trim()&&!x||p)return;const r={role:"user",content:d.trim()||"[Image Query]",timestamp:(new Date).toISOString(),hasImage:!!x};c(e=>[...e,r]);const n=d.trim(),a=x,s=v;u(""),k(),m(!0);try{const t={kb_id:e,query:n||"Show me similar images",top_k:5,search_type:a?n?"hybrid":"image":"text"};a&&(t.image_base64=s.split(",")[1]);const r=await js(t),i=r.data.data.text_results||[],o=r.data.data.image_results||[];let l="";0===i.length&&0===o.length?l="I couldn't find any relevant information or images in the knowledge base for that query. Could you try rephrasing or asking something else?":(i.length>0&&(l="Based on the knowledge base:\n\n".concat(i[0].content,"\n\n"),i.length>1&&(l+="\n**Additional relevant information:**\n",i.slice(1,3).forEach((e,t)=>{l+="\n".concat(t+2,". ").concat(e.content.substring(0,200),"...")})),l+="\n\n**Text Sources:**\n",i.forEach((e,t)=>{l+="- ".concat(e.source.document_name," (relevance: ").concat((100*e.score).toFixed(0),"%)\n")})),o.length>0&&(i.length>0&&(l+="\n\n"),l+="**Found ".concat(o.length," relevant image").concat(o.length>1?"s":"",":**\n\n"),o.forEach((e,t)=>{var r;l+="".concat(t+1,". ").concat(e.filename||"Image"," (similarity: ").concat((100*e.score).toFixed(0),"%)\n"),null!==(r=e.metadata)&&void 0!==r&&r.description&&(l+="   Description: ".concat(e.metadata.description,"\n"))})));const d={role:"assistant",content:l,timestamp:(new Date).toISOString(),sources:i.map(e=>({document:e.source.document_name,score:e.score,chunk_index:e.source.chunk_index})),imageResults:o};c(e=>[...e,d])}catch(i){console.error("Chat error:",i);const e={role:"assistant",content:"Sorry, I encountered an error while searching the knowledge base. Please try again.",timestamp:(new Date).toISOString(),error:!0};c(t=>[...t,e]),nr.error("Failed to get response")}finally{m(!1)}},className:"max-w-4xl mx-auto",children:[v&&(0,Da.jsxs)("div",{className:"mb-3 flex items-start gap-3 p-3 bg-gray-50 rounded-lg border border-gray-200",children:[(0,Da.jsx)("img",{src:v,alt:"Selected",className:"w-20 h-20 object-cover rounded"}),(0,Da.jsxs)("div",{className:"flex-1",children:[(0,Da.jsx)("p",{className:"text-sm font-medium text-gray-900",children:null===x||void 0===x?void 0:x.name}),(0,Da.jsxs)("p",{className:"text-xs text-gray-500",children:[x&&(x.size/1024).toFixed(1)," KB"]})]}),(0,Da.jsx)("button",{type:"button",onClick:k,className:"text-gray-400 hover:text-gray-600",children:(0,Da.jsx)(ss,{className:"w-5 h-5"})})]}),(0,Da.jsxs)("div",{className:"flex gap-3",children:[(0,Da.jsx)("input",{ref:j,type:"file",accept:"image/jpeg,image/jpg,image/png,image/gif,image/webp",onChange:e=>{const t=e.target.files[0];if(!t)return;if(!["image/jpeg","image/jpg","image/png","image/gif","image/webp"].includes(t.type))return void nr.error("Invalid image type. Only JPG, PNG, GIF, and WEBP are supported.");if(t.size>10485760)return void nr.error("Image too large. Maximum size is 10MB.");const r=new FileReader;r.onloadend=()=>{y(t),b(r.result)},r.readAsDataURL(t)},className:"hidden"}),(0,Da.jsx)("button",{type:"button",onClick:()=>{var e;return null===(e=j.current)||void 0===e?void 0:e.click()},disabled:p,className:"inline-flex items-center p-2 border border-gray-300 rounded-lg shadow-sm hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",title:"Add image to search",children:(0,Da.jsx)(qs,{className:"w-5 h-5 text-gray-600"})}),(0,Da.jsx)("input",{type:"text",value:d,onChange:e=>u(e.target.value),placeholder:x?"Describe what you're looking for (optional)...":"Ask a question about the knowledge base...",disabled:p,className:"flex-1 rounded-lg border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 disabled:opacity-50"}),(0,Da.jsx)("button",{type:"submit",disabled:p||!d.trim()&&!x,className:"inline-flex items-center px-6 py-2 border border-transparent rounded-lg shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700 disabled:opacity-50 disabled:cursor-not-allowed",children:p?(0,Da.jsx)(Hs,{className:"w-5 h-5 animate-spin"}):(0,Da.jsx)(Ks,{className:"w-5 h-5"})})]})]})})]})},Ti=Ha("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),Ii=Ha("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]),Mi=Ha("ExternalLink",[["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}],["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["line",{x1:"10",x2:"21",y1:"14",y2:"3",key:"18c3s4"}]]),Di=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Ma.get("/shopify/stores",{params:e})},Ri=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Ma.post("/shopify/sync/".concat(e),t)},Fi=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Ma.get("/shopify/products",{params:e})},Li=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Ma.get("/shopify/stats",{params:e})},Bi=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Ma.get("/shopify/products/stats",{params:e})},Ui=()=>{const[e,t]=(0,a.useState)([]),[r,n]=(0,a.useState)(null),[s,i]=(0,a.useState)({}),[o,l]=(0,a.useState)(!0),[c,d]=(0,a.useState)(null),u=(0,a.useRef)(null),[p,m]=(0,a.useState)({});(0,a.useEffect)(()=>(h(),g(),()=>{x()}),[]),(0,a.useEffect)(()=>{e.length>0&&f()},[e]);const h=async()=>{try{l(!0);const[e,r]=await Promise.all([Di(),Li()]);t(e.data.data.stores||[]),n(r.data.data)}catch(e){console.error("Load data error:",e),d(e.message)}finally{l(!1)}},f=async()=>{if(e&&0!==e.length)try{const t=e.map(async e=>{try{const r=await(t=e.id,Ma.get("/shopify/stores/".concat(t,"/sync-status")));return{storeId:e.id,data:r.data.data}}catch(c){return console.error("Error loading sync status for store ".concat(e.id,":"),c),{storeId:e.id,data:{is_syncing:!1,last_sync:null,next_sync:{enabled:!1}}}}var t}),r=await Promise.allSettled(t),n={};let a=!1;r.forEach(e=>{"fulfilled"===e.status&&e.value&&(n[e.value.storeId]=e.value.data,e.value.data.is_syncing&&(a=!0))}),i(n),a?(u.current&&clearInterval(u.current),u.current=setInterval(f,3e3)):u.current&&(clearInterval(u.current),u.current=null)}catch(c){console.error("Error loading sync statuses:",c),u.current&&(clearInterval(u.current),u.current=null)}},g=()=>{f()},x=()=>{u.current&&(clearInterval(u.current),u.current=null)},y=async(e,t)=>{if(confirm("Are you sure you want to cancel this sync? Progress will be saved but sync will stop."))try{m(t=>qe(qe({},t),{},{[e]:!0})),await(e=>Ma.delete("/shopify/sync/".concat(e,"/cancel")))(e),alert("Sync cancelled successfully"),await f()}catch(a){var r,n;console.error("Cancel sync error:",a),alert("Failed to cancel sync: ".concat((null===(r=a.response)||void 0===r||null===(n=r.data)||void 0===n?void 0:n.error)||a.message))}finally{m(t=>qe(qe({},t),{},{[e]:!1}))}},v=e=>{switch(e){case"active":return(0,Da.jsx)(gs,{className:"w-5 h-5 text-green-500"});case"error":return(0,Da.jsx)(Ti,{className:"w-5 h-5 text-red-500"});default:return(0,Da.jsx)(gi,{className:"w-5 h-5 text-yellow-500"})}},b=e=>{if(!e)return"Never";const t=Math.floor((new Date-new Date(e))/1e3);return t<60?"".concat(t,"s ago"):t<3600?"".concat(Math.floor(t/60),"m ago"):t<86400?"".concat(Math.floor(t/3600),"h ago"):"".concat(Math.floor(t/86400),"d ago")},j=e=>e<60?"".concat(e,"s"):e<3600?"".concat(Math.floor(e/60),"m ").concat(e%60,"s"):"".concat(Math.floor(e/3600),"h ").concat(Math.floor(e%3600/60),"m"),w=e=>{var t;const r=s[e.id];if(!r)return(0,Da.jsx)("div",{className:"text-sm text-gray-500",children:"Loading status..."});if(r.is_syncing){const{progress:t,timing:n,job_id:a}=r,s=p[a];return(0,Da.jsxs)("div",{className:"space-y-2",children:[(0,Da.jsxs)("div",{className:"relative",children:[(0,Da.jsxs)("div",{className:"flex items-center justify-between text-sm mb-1",children:[(0,Da.jsxs)("span",{className:"text-blue-600 font-medium flex items-center",children:[(0,Da.jsx)(Hs,{className:"w-4 h-4 mr-1 animate-spin"}),"Syncing..."]}),(0,Da.jsxs)("span",{className:"text-gray-600",children:[t.percentage,"%"]})]}),(0,Da.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,Da.jsx)("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:"".concat(t.percentage,"%")}})})]}),(0,Da.jsxs)("div",{className:"flex items-center justify-between text-xs text-gray-600",children:[(0,Da.jsxs)("span",{children:[t.products.processed," / ",t.products.total," products"]}),(0,Da.jsx)("span",{children:n.estimated_remaining_seconds>0?"~".concat(j(n.estimated_remaining_seconds)," remaining"):"Calculating..."})]}),t.images.total>0&&(0,Da.jsxs)("div",{className:"text-xs text-gray-500",children:[t.images.processed," / ",t.images.total," images processed"]}),(0,Da.jsx)("div",{className:"pt-2 border-t border-gray-100",children:(0,Da.jsx)("button",{onClick:()=>y(a,e.id),disabled:s,className:"inline-flex items-center px-3 py-1.5 text-xs font-medium rounded-md text-red-700 bg-red-50 hover:bg-red-100 border border-red-200 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:s?(0,Da.jsxs)(Da.Fragment,{children:[(0,Da.jsx)(Hs,{className:"w-3 h-3 mr-1.5 animate-spin"}),"Cancelling..."]}):(0,Da.jsxs)(Da.Fragment,{children:[(0,Da.jsx)(Ti,{className:"w-3 h-3 mr-1.5"}),"Cancel Sync"]})})})]})}return(0,Da.jsxs)("div",{className:"space-y-1",children:[r.last_sync?(0,Da.jsxs)(Da.Fragment,{children:[(0,Da.jsxs)("div",{className:"flex items-center text-sm text-gray-600",children:[(0,Da.jsx)(gs,{className:"w-4 h-4 mr-1 text-green-500"}),(0,Da.jsxs)("span",{children:["Last synced: ",b(r.last_sync.completed_at)]})]}),(0,Da.jsxs)("div",{className:"text-xs text-gray-500",children:[r.last_sync.products_processed," products, ",r.last_sync.images_processed," images"]})]}):(0,Da.jsx)("div",{className:"text-sm text-gray-500",children:"Never synced"}),(null===(t=r.next_sync)||void 0===t?void 0:t.enabled)&&r.next_sync.next_sync_at&&(0,Da.jsxs)("div",{className:"flex items-center text-xs text-gray-500 mt-1",children:[(0,Da.jsx)(Ts,{className:"w-3 h-3 mr-1"}),(0,Da.jsxs)("span",{children:["Next sync: ",b(r.next_sync.next_sync_at)]})]})]})};return o?(0,Da.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,Da.jsx)(vi,{className:"w-8 h-8 animate-spin text-primary-600"})}):(0,Da.jsxs)("div",{className:"space-y-6",children:[(0,Da.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Da.jsxs)("div",{children:[(0,Da.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Shopify Integration"}),(0,Da.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Manage your Shopify stores and sync products"})]}),(0,Da.jsxs)(Ie,{to:"/shopify/connect",className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700",children:[(0,Da.jsx)(Qa,{className:"w-4 h-4 mr-2"}),"Connect Store"]})]}),c&&(0,Da.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:(0,Da.jsxs)("div",{className:"flex",children:[(0,Da.jsx)(Ti,{className:"w-5 h-5 text-red-400 mr-3"}),(0,Da.jsxs)("div",{children:[(0,Da.jsx)("h3",{className:"text-sm font-medium text-red-800",children:"Error"}),(0,Da.jsx)("p",{className:"mt-1 text-sm text-red-700",children:c})]})]})}),r&&(0,Da.jsxs)("div",{className:"grid grid-cols-1 gap-5 sm:grid-cols-2 lg:grid-cols-4",children:[(0,Da.jsx)("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:(0,Da.jsx)("div",{className:"p-5",children:(0,Da.jsxs)("div",{className:"flex items-center",children:[(0,Da.jsx)("div",{className:"flex-shrink-0",children:(0,Da.jsx)(Xs,{className:"h-6 w-6 text-gray-400"})}),(0,Da.jsx)("div",{className:"ml-5 w-0 flex-1",children:(0,Da.jsxs)("dl",{children:[(0,Da.jsx)("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Connected Stores"}),(0,Da.jsxs)("dd",{className:"flex items-baseline",children:[(0,Da.jsx)("div",{className:"text-2xl font-semibold text-gray-900",children:r.stores.active}),(0,Da.jsxs)("div",{className:"ml-2 text-sm text-gray-500",children:["/ ",r.stores.total]})]})]})})]})})}),(0,Da.jsx)("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:(0,Da.jsx)("div",{className:"p-5",children:(0,Da.jsxs)("div",{className:"flex items-center",children:[(0,Da.jsx)("div",{className:"flex-shrink-0",children:(0,Da.jsx)(Ii,{className:"h-6 w-6 text-gray-400"})}),(0,Da.jsx)("div",{className:"ml-5 w-0 flex-1",children:(0,Da.jsxs)("dl",{children:[(0,Da.jsx)("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Products"}),(0,Da.jsxs)("dd",{className:"flex items-baseline",children:[(0,Da.jsx)("div",{className:"text-2xl font-semibold text-gray-900",children:r.products.active}),(0,Da.jsxs)("div",{className:"ml-2 text-sm text-gray-500",children:["/ ",r.products.total]})]})]})})]})})}),(0,Da.jsx)("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:(0,Da.jsx)("div",{className:"p-5",children:(0,Da.jsxs)("div",{className:"flex items-center",children:[(0,Da.jsx)("div",{className:"flex-shrink-0",children:(0,Da.jsx)(qs,{className:"h-6 w-6 text-gray-400"})}),(0,Da.jsx)("div",{className:"ml-5 w-0 flex-1",children:(0,Da.jsxs)("dl",{children:[(0,Da.jsx)("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Images"}),(0,Da.jsx)("dd",{className:"text-2xl font-semibold text-gray-900",children:r.images.total})]})})]})})}),(0,Da.jsx)("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:(0,Da.jsx)("div",{className:"p-5",children:(0,Da.jsxs)("div",{className:"flex items-center",children:[(0,Da.jsx)("div",{className:"flex-shrink-0",children:(0,Da.jsx)(Xa,{className:"h-6 w-6 text-gray-400"})}),(0,Da.jsx)("div",{className:"ml-5 w-0 flex-1",children:(0,Da.jsxs)("dl",{children:[(0,Da.jsx)("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Sync Jobs"}),(0,Da.jsxs)("dd",{className:"flex items-baseline",children:[(0,Da.jsx)("div",{className:"text-2xl font-semibold text-gray-900",children:r.sync_jobs.completed}),(0,Da.jsxs)("div",{className:"ml-2 text-sm text-gray-500",children:["/ ",r.sync_jobs.total]})]})]})})]})})})]}),(0,Da.jsx)("div",{className:"bg-white shadow rounded-lg",children:(0,Da.jsxs)("div",{className:"px-4 py-5 sm:p-6",children:[(0,Da.jsx)("h3",{className:"text-lg leading-6 font-medium text-gray-900 mb-4",children:"Connected Stores"}),0===e.length?(0,Da.jsxs)("div",{className:"text-center py-12",children:[(0,Da.jsx)(Xs,{className:"mx-auto h-12 w-12 text-gray-400"}),(0,Da.jsx)("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No stores connected"}),(0,Da.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Get started by connecting your first Shopify store"}),(0,Da.jsx)("div",{className:"mt-6",children:(0,Da.jsxs)(Ie,{to:"/shopify/connect",className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700",children:[(0,Da.jsx)(Qa,{className:"w-4 h-4 mr-2"}),"Connect Store"]})})]}):(0,Da.jsx)("div",{className:"space-y-4",children:e.map(e=>{var t,r;return(0,Da.jsx)("div",{className:"border border-gray-200 rounded-lg p-4 hover:border-primary-300 transition-colors",children:(0,Da.jsxs)("div",{className:"flex items-start justify-between",children:[(0,Da.jsxs)("div",{className:"flex items-start space-x-3 flex-1",children:[v(e.status),(0,Da.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,Da.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Da.jsx)("h4",{className:"text-sm font-medium text-gray-900",children:e.shop_domain}),(0,Da.jsx)("a",{href:"https://".concat(e.shop_domain),target:"_blank",rel:"noopener noreferrer",className:"text-gray-400 hover:text-gray-600",children:(0,Da.jsx)(Mi,{className:"w-4 h-4"})})]}),(0,Da.jsx)("div",{className:"mt-3",children:w(e)})]})]}),(0,Da.jsxs)("div",{className:"flex items-center space-x-2 ml-4",children:[(0,Da.jsxs)("button",{onClick:()=>(async e=>{try{const t=await Ri(e);alert("Sync started! Job ID: ".concat(t.data.data.job_id)),await f()}catch(n){var t,r;alert("Sync failed: ".concat((null===(t=n.response)||void 0===t||null===(r=t.data)||void 0===r?void 0:r.error)||n.message))}})(e.id),disabled:null===(t=s[e.id])||void 0===t?void 0:t.is_syncing,className:"inline-flex items-center px-3 py-1.5 border border-gray-300 shadow-sm text-xs font-medium rounded text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:[(0,Da.jsx)(vi,{className:"w-3 h-3 mr-1 ".concat(null!==(r=s[e.id])&&void 0!==r&&r.is_syncing?"animate-spin":"")}),"Sync"]}),(0,Da.jsxs)(Ie,{to:"/shopify/stores/".concat(e.id),className:"inline-flex items-center px-3 py-1.5 border border-gray-300 shadow-sm text-xs font-medium rounded text-gray-700 bg-white hover:bg-gray-50",children:[(0,Da.jsx)(ti,{className:"w-3 h-3 mr-1"}),"Settings"]}),(0,Da.jsxs)(Ie,{to:"/shopify/products?kb_id=".concat(e.kb_id),className:"inline-flex items-center px-3 py-1.5 border border-primary-300 shadow-sm text-xs font-medium rounded text-primary-700 bg-primary-50 hover:bg-primary-100",children:[(0,Da.jsx)(Ii,{className:"w-3 h-3 mr-1"}),"Products"]})]})]})},e.id)})})]})})]})},zi=()=>{const e=ee(),[t,r]=(0,a.useState)([]),[n,s]=(0,a.useState)(!1),[i,o]=(0,a.useState)(!1),[l,c]=(0,a.useState)(null),[d,u]=(0,a.useState)({kb_id:"",shop_domain:"",access_token:"",sync_settings:{auto_sync_enabled:!0,sync_frequency_minutes:1440,sync_status_filter:"active",sync_reviews:!1}});(0,a.useEffect)(()=>{p()},[]);const p=async()=>{try{const e=await ys();r(e.data.data.knowledge_bases||[])}catch(e){console.error("Load KBs error:",e)}},m=e=>{const{name:t,value:r,type:n,checked:a}=e.target;if(t.startsWith("sync_")){const e=t.replace("sync_","");u(t=>qe(qe({},t),{},{sync_settings:qe(qe({},t.sync_settings),{},{[e]:"checkbox"===n?a:"number"===n?parseInt(r):r})}))}else u(e=>qe(qe({},e),{},{[t]:r}))};return(0,Da.jsxs)("div",{className:"max-w-3xl mx-auto",children:[(0,Da.jsxs)("div",{className:"mb-6",children:[(0,Da.jsxs)("button",{onClick:()=>e("/shopify"),className:"inline-flex items-center text-sm text-gray-500 hover:text-gray-700 mb-4",children:[(0,Da.jsx)(fi,{className:"w-4 h-4 mr-1"}),"Back to Stores"]}),(0,Da.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Connect Shopify Store"}),(0,Da.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Connect your Shopify store to sync products and enable AI-powered search"})]}),(0,Da.jsxs)("form",{onSubmit:async t=>{t.preventDefault(),s(!0);try{await(e=>Ma.post("/shopify/connect",e))(d),alert("Store connected successfully!"),e("/shopify")}catch(a){var r,n;alert("Connection failed: ".concat((null===(r=a.response)||void 0===r||null===(n=r.data)||void 0===n?void 0:n.message)||a.message))}finally{s(!1)}},className:"bg-white shadow rounded-lg",children:[(0,Da.jsxs)("div",{className:"p-6 space-y-6",children:[(0,Da.jsxs)("div",{children:[(0,Da.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Knowledge Base *"}),(0,Da.jsxs)("select",{name:"kb_id",value:d.kb_id,onChange:m,className:"w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500",required:!0,children:[(0,Da.jsx)("option",{value:"",children:"Select a knowledge base"}),t.map(e=>(0,Da.jsx)("option",{value:e.id,children:e.name},e.id))]}),(0,Da.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Products will be synced to this knowledge base"})]}),(0,Da.jsxs)("div",{children:[(0,Da.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Store Domain *"}),(0,Da.jsxs)("div",{className:"flex rounded-md shadow-sm",children:[(0,Da.jsxs)("span",{className:"inline-flex items-center px-3 rounded-l-md border border-r-0 border-gray-300 bg-gray-50 text-gray-500 text-sm",children:[(0,Da.jsx)(Xs,{className:"w-4 h-4 mr-1"}),"https://"]}),(0,Da.jsx)("input",{type:"text",name:"shop_domain",value:d.shop_domain,onChange:m,className:"flex-1 rounded-none rounded-r-md border-gray-300 focus:border-primary-500 focus:ring-primary-500",placeholder:"your-store.myshopify.com",required:!0})]}),(0,Da.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Your Shopify store domain (e.g., your-store.myshopify.com)"})]}),(0,Da.jsxs)("div",{children:[(0,Da.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Access Token *"}),(0,Da.jsxs)("div",{className:"flex rounded-md shadow-sm",children:[(0,Da.jsx)("span",{className:"inline-flex items-center px-3 rounded-l-md border border-r-0 border-gray-300 bg-gray-50 text-gray-500 text-sm",children:(0,Da.jsx)(ai,{className:"w-4 h-4"})}),(0,Da.jsx)("input",{type:"password",name:"access_token",value:d.access_token,onChange:m,className:"flex-1 rounded-none rounded-r-md border-gray-300 focus:border-primary-500 focus:ring-primary-500",placeholder:"shpat_xxxxxxxxxxxxx",required:!0})]}),(0,Da.jsxs)("p",{className:"mt-1 text-sm text-gray-500 flex items-start",children:[(0,Da.jsx)(si,{className:"w-4 h-4 mr-1 mt-0.5 flex-shrink-0"}),(0,Da.jsx)("span",{children:"Create a private app in Shopify Admin \u2192 Apps \u2192 Develop apps. Required scopes: read_products, read_inventory"})]})]}),(0,Da.jsxs)("div",{children:[(0,Da.jsx)("button",{type:"button",onClick:async()=>{o(!0),c(null);try{const e=await(e=>Ma.post("/shopify/test-connection",e))({shop_domain:d.shop_domain,access_token:d.access_token});e.data.data.connected?c({success:!0,message:e.data.data.credits||"Connection successful!",shop:e.data.data.shop}):c({success:!1,message:"Connection failed"})}catch(r){var e,t;c({success:!1,message:(null===(e=r.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.message)||r.message||"Connection failed"})}finally{o(!1)}},disabled:!d.shop_domain||!d.access_token||i,className:"inline-flex items-center px-4 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:i?"Testing...":"Test Connection"}),l&&(0,Da.jsx)("div",{className:"mt-3 p-4 rounded-md ".concat(l.success?"bg-green-50 border border-green-200":"bg-red-50 border border-red-200"),children:(0,Da.jsxs)("div",{className:"flex",children:[l.success?(0,Da.jsx)(gs,{className:"w-5 h-5 text-green-400 mr-2"}):(0,Da.jsx)(Ti,{className:"w-5 h-5 text-red-400 mr-2"}),(0,Da.jsxs)("div",{children:[(0,Da.jsx)("h4",{className:"text-sm font-medium ".concat(l.success?"text-green-800":"text-red-800"),children:l.success?"Connection Successful":"Connection Failed"}),(0,Da.jsx)("p",{className:"mt-1 text-sm ".concat(l.success?"text-green-700":"text-red-700"),children:l.message}),l.shop&&(0,Da.jsxs)("div",{className:"mt-2 text-sm text-green-700",children:[(0,Da.jsxs)("p",{children:["Shop: ",l.shop.name]}),(0,Da.jsxs)("p",{children:["Email: ",l.shop.email]}),(0,Da.jsxs)("p",{children:["Currency: ",l.shop.currency]})]})]})]})})]}),(0,Da.jsx)("hr",{}),(0,Da.jsxs)("div",{children:[(0,Da.jsx)("h3",{className:"text-base font-medium text-gray-900 mb-4",children:"Sync Settings"}),(0,Da.jsxs)("div",{className:"space-y-4",children:[(0,Da.jsxs)("div",{className:"flex items-start",children:[(0,Da.jsx)("div",{className:"flex items-center h-5",children:(0,Da.jsx)("input",{type:"checkbox",name:"sync_auto_sync_enabled",checked:d.sync_settings.auto_sync_enabled,onChange:m,className:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded"})}),(0,Da.jsxs)("div",{className:"ml-3",children:[(0,Da.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Enable automatic sync"}),(0,Da.jsx)("p",{className:"text-sm text-gray-500",children:"Automatically sync products on a schedule"})]})]}),d.sync_settings.auto_sync_enabled&&(0,Da.jsxs)("div",{children:[(0,Da.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Sync Frequency"}),(0,Da.jsxs)("select",{name:"sync_sync_frequency_minutes",value:d.sync_settings.sync_frequency_minutes,onChange:m,className:"w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500",children:[(0,Da.jsx)("option",{value:"60",children:"Every hour"}),(0,Da.jsx)("option",{value:"360",children:"Every 6 hours"}),(0,Da.jsx)("option",{value:"720",children:"Every 12 hours"}),(0,Da.jsx)("option",{value:"1440",children:"Daily"}),(0,Da.jsx)("option",{value:"10080",children:"Weekly"})]})]}),(0,Da.jsxs)("div",{children:[(0,Da.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Sync Products"}),(0,Da.jsxs)("select",{name:"sync_sync_status_filter",value:d.sync_settings.sync_status_filter,onChange:m,className:"w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500",children:[(0,Da.jsx)("option",{value:"active",children:"Active products only"}),(0,Da.jsx)("option",{value:"all",children:"All products"}),(0,Da.jsx)("option",{value:"draft",children:"Draft products only"})]})]}),(0,Da.jsxs)("div",{className:"flex items-start",children:[(0,Da.jsx)("div",{className:"flex items-center h-5",children:(0,Da.jsx)("input",{type:"checkbox",name:"sync_sync_reviews",checked:d.sync_settings.sync_reviews,onChange:m,className:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded"})}),(0,Da.jsxs)("div",{className:"ml-3",children:[(0,Da.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Sync product reviews"}),(0,Da.jsx)("p",{className:"text-sm text-gray-500",children:"Include product reviews in sync (if available)"})]})]})]})]})]}),(0,Da.jsxs)("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-200 flex items-center justify-end space-x-3",children:[(0,Da.jsx)("button",{type:"button",onClick:()=>e("/shopify"),className:"px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50",children:"Cancel"}),(0,Da.jsx)("button",{type:"submit",disabled:n||!(null!==l&&void 0!==l&&l.success),className:"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700 disabled:opacity-50 disabled:cursor-not-allowed",children:n?"Connecting...":"Connect Store"})]})]})]})},qi=Ha("ArrowUpDown",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]),Wi=Ha("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]]),Vi=Ha("Tag",[["path",{d:"M12 2H2v10l9.29 9.29c.94.94 2.48.94 3.42 0l6.58-6.58c.94-.94.94-2.48 0-3.42L12 2Z",key:"14b2ls"}],["path",{d:"M7 7h.01",key:"7u93v4"}]]),Gi=Ha("Box",[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]),Hi=Ha("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),Ki=Ha("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]),Yi=e=>{let{filters:t,onChange:r,onReset:n,vendors:s=[],productTypes:i=[]}=e;const[o,l]=a.useState(!1),c=(e,n)=>{r(qe(qe({},t),{},{[e]:n}))},d="all"!==t.vendor||"all"!==t.product_type||t.min_price||t.max_price;return(0,Da.jsxs)("div",{className:"space-y-4",children:[(0,Da.jsxs)("div",{className:"flex items-center gap-3",children:[(0,Da.jsxs)("button",{onClick:()=>l(!o),className:"inline-flex items-center px-3 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50",children:[(0,Da.jsx)(Ki,{className:"w-4 h-4 mr-2"}),"Advanced Filters"]}),d&&(0,Da.jsxs)("button",{onClick:n,className:"inline-flex items-center px-3 py-2 text-sm text-gray-600 hover:text-gray-900",children:[(0,Da.jsx)(ss,{className:"w-4 h-4 mr-1"}),"Clear Filters"]})]}),o&&(0,Da.jsx)("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:(0,Da.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,Da.jsxs)("div",{children:[(0,Da.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Vendor"}),(0,Da.jsxs)("select",{value:t.vendor||"all",onChange:e=>c("vendor",e.target.value),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 text-sm",children:[(0,Da.jsx)("option",{value:"all",children:"All Vendors"}),s.map(e=>(0,Da.jsx)("option",{value:e,children:e},e))]})]}),(0,Da.jsxs)("div",{children:[(0,Da.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Product Type"}),(0,Da.jsxs)("select",{value:t.product_type||"all",onChange:e=>c("product_type",e.target.value),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 text-sm",children:[(0,Da.jsx)("option",{value:"all",children:"All Types"}),i.map(e=>(0,Da.jsx)("option",{value:e,children:e},e))]})]}),(0,Da.jsxs)("div",{children:[(0,Da.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Min Price (PKR)"}),(0,Da.jsx)("input",{type:"number",min:"0",step:"100",value:t.min_price||"",onChange:e=>c("min_price",e.target.value),placeholder:"0",className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 text-sm"})]}),(0,Da.jsxs)("div",{children:[(0,Da.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Max Price (PKR)"}),(0,Da.jsx)("input",{type:"number",min:"0",step:"100",value:t.max_price||"",onChange:e=>c("max_price",e.target.value),placeholder:"No limit",className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 text-sm"})]})]})})]})},Ji=e=>{let{currentPage:t,totalPages:r,onPageChange:n,pageSize:a,onPageSizeChange:s,totalItems:i}=e;const o=[];let l=Math.max(1,t-Math.floor(3.5)),c=Math.min(r,l+7-1);c-l<6&&(l=Math.max(1,c-7+1));for(let d=l;d<=c;d++)o.push(d);return(0,Da.jsxs)("div",{className:"flex items-center justify-between border-t border-gray-200 bg-white px-4 py-3 sm:px-6",children:[(0,Da.jsxs)("div",{className:"flex items-center",children:[(0,Da.jsx)("span",{className:"text-sm text-gray-700 mr-2",children:"Show"}),(0,Da.jsxs)("select",{value:a,onChange:e=>s(parseInt(e.target.value)),className:"rounded-md border-gray-300 text-sm focus:border-primary-500 focus:ring-primary-500",children:[(0,Da.jsx)("option",{value:"10",children:"10"}),(0,Da.jsx)("option",{value:"20",children:"20"}),(0,Da.jsx)("option",{value:"50",children:"50"}),(0,Da.jsx)("option",{value:"100",children:"100"})]}),(0,Da.jsx)("span",{className:"text-sm text-gray-700 ml-2",children:"per page"})]}),(0,Da.jsx)("div",{className:"hidden sm:flex sm:flex-1 sm:items-center sm:justify-center",children:(0,Da.jsxs)("p",{className:"text-sm text-gray-700",children:["Showing"," ",(0,Da.jsx)("span",{className:"font-medium",children:(t-1)*a+1})," ","-"," ",(0,Da.jsx)("span",{className:"font-medium",children:Math.min(t*a,i)})," ","of"," ",(0,Da.jsx)("span",{className:"font-medium",children:i})," ","results"]})}),(0,Da.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Da.jsx)("button",{onClick:()=>n(t-1),disabled:1===t,className:"relative inline-flex items-center rounded-md border border-gray-300 bg-white px-2 py-2 text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:(0,Da.jsx)(li,{className:"h-4 w-4"})}),l>1&&(0,Da.jsxs)(Da.Fragment,{children:[(0,Da.jsx)("button",{onClick:()=>n(1),className:"relative inline-flex items-center rounded-md border border-gray-300 bg-white px-3 py-2 text-sm font-medium text-gray-700 hover:bg-gray-50",children:"1"}),l>2&&(0,Da.jsx)("span",{className:"text-gray-500",children:"..."})]}),o.map(e=>(0,Da.jsx)("button",{onClick:()=>n(e),className:"relative inline-flex items-center rounded-md px-3 py-2 text-sm font-medium ".concat(e===t?"bg-primary-600 text-white border border-primary-600":"border border-gray-300 bg-white text-gray-700 hover:bg-gray-50"),children:e},e)),c<r&&(0,Da.jsxs)(Da.Fragment,{children:[c<r-1&&(0,Da.jsx)("span",{className:"text-gray-500",children:"..."}),(0,Da.jsx)("button",{onClick:()=>n(r),className:"relative inline-flex items-center rounded-md border border-gray-300 bg-white px-3 py-2 text-sm font-medium text-gray-700 hover:bg-gray-50",children:r})]}),(0,Da.jsx)("button",{onClick:()=>n(t+1),disabled:t===r,className:"relative inline-flex items-center rounded-md border border-gray-300 bg-white px-2 py-2 text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:(0,Da.jsx)(ii,{className:"h-4 w-4"})})]})]})},Xi=()=>{const[e,t]=Re(),r=e.get("kb_id"),[n,s]=(0,a.useState)([]),[i,o]=(0,a.useState)(null),[l,c]=(0,a.useState)({vendors:[],product_types:[]}),[d,u]=(0,a.useState)({page:1,limit:20,total:0,total_pages:0,has_next:!1,has_prev:!1}),[p,m]=(0,a.useState)(!0),[h,f]=(0,a.useState)({search:"",status:"all",vendor:"all",product_type:"all",min_price:"",max_price:"",sort_by:"created_at",sort_order:"DESC"});(0,a.useEffect)(()=>{r&&g()},[r,d.page,d.limit,h]),(0,a.useEffect)(()=>{r&&x()},[r]);const g=async()=>{try{var e,t,n,a,i,l;m(!0);const c=qe({kb_id:r,page:d.page,limit:d.limit},h);Object.keys(c).forEach(e=>{""!==c[e]&&"all"!==c[e]||delete c[e]});const[p,f]=await Promise.all([Fi(c),Bi({kb_id:r})]);s(p.data.data.products||[]),u({page:(null===(e=p.data.data.pagination)||void 0===e?void 0:e.page)||1,limit:(null===(t=p.data.data.pagination)||void 0===t?void 0:t.limit)||20,total:(null===(n=p.data.data.pagination)||void 0===n?void 0:n.total)||0,total_pages:(null===(a=p.data.data.pagination)||void 0===a?void 0:a.total_pages)||0,has_next:(null===(i=p.data.data.pagination)||void 0===i?void 0:i.has_next)||!1,has_prev:(null===(l=p.data.data.pagination)||void 0===l?void 0:l.has_prev)||!1}),o(f.data.data)}catch(c){console.error("Load data error:",c)}finally{m(!1)}},x=async()=>{try{const e=await(e=>Ma.get("/shopify/products/filters/".concat(e)))(r);c(e.data.data)}catch(e){console.error("Load filter options error:",e)}},y=e=>{f(e),u(e=>qe(qe({},e),{},{page:1}))},v=e=>{f(t=>qe(qe({},t),{},{sort_by:e,sort_order:t.sort_by===e&&"DESC"===t.sort_order?"ASC":"DESC"})),u(e=>qe(qe({},e),{},{page:1}))},b=e=>{const t={active:"bg-green-100 text-green-800",draft:"bg-yellow-100 text-yellow-800",archived:"bg-gray-100 text-gray-800"};return t[e]||t.active},j=e=>h.sort_by!==e?(0,Da.jsx)(qi,{className:"w-4 h-4 text-gray-400"}):"DESC"===h.sort_order?(0,Da.jsx)(qi,{className:"w-4 h-4 text-primary-600"}):(0,Da.jsx)(qi,{className:"w-4 h-4 text-primary-600 transform rotate-180"});return(0,Da.jsxs)("div",{className:"space-y-6",children:[(0,Da.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Da.jsxs)("div",{children:[(0,Da.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Products"}),(0,Da.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Browse and manage synced products"})]}),(0,Da.jsx)(Ie,{to:"/shopify",className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50",children:"Back to Stores"})]}),i&&(0,Da.jsxs)("div",{className:"grid grid-cols-1 gap-5 sm:grid-cols-2 lg:grid-cols-4",children:[(0,Da.jsx)("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:(0,Da.jsx)("div",{className:"p-5",children:(0,Da.jsxs)("div",{className:"flex items-center",children:[(0,Da.jsx)("div",{className:"flex-shrink-0",children:(0,Da.jsx)(Ii,{className:"h-6 w-6 text-blue-600"})}),(0,Da.jsx)("div",{className:"ml-5 w-0 flex-1",children:(0,Da.jsxs)("dl",{children:[(0,Da.jsx)("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Total Products"}),(0,Da.jsxs)("dd",{className:"flex items-baseline",children:[(0,Da.jsx)("div",{className:"text-2xl font-semibold text-gray-900",children:i.summary.total_products}),(0,Da.jsx)("div",{className:"ml-2 flex items-baseline text-sm text-gray-600",children:(0,Da.jsxs)("span",{className:"text-green-600",children:[i.by_status.active," active"]})})]})]})})]})})}),(0,Da.jsx)("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:(0,Da.jsx)("div",{className:"p-5",children:(0,Da.jsxs)("div",{className:"flex items-center",children:[(0,Da.jsx)("div",{className:"flex-shrink-0",children:(0,Da.jsx)(Wi,{className:"h-6 w-6 text-purple-600"})}),(0,Da.jsx)("div",{className:"ml-5 w-0 flex-1",children:(0,Da.jsxs)("dl",{children:[(0,Da.jsx)("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Vendors"}),(0,Da.jsx)("dd",{className:"text-2xl font-semibold text-gray-900",children:i.summary.total_vendors})]})})]})})}),(0,Da.jsx)("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:(0,Da.jsx)("div",{className:"p-5",children:(0,Da.jsxs)("div",{className:"flex items-center",children:[(0,Da.jsx)("div",{className:"flex-shrink-0",children:(0,Da.jsx)(Vi,{className:"h-6 w-6 text-orange-600"})}),(0,Da.jsx)("div",{className:"ml-5 w-0 flex-1",children:(0,Da.jsxs)("dl",{children:[(0,Da.jsx)("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Product Types"}),(0,Da.jsx)("dd",{className:"text-2xl font-semibold text-gray-900",children:i.summary.total_product_types})]})})]})})}),(0,Da.jsx)("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:(0,Da.jsx)("div",{className:"p-5",children:(0,Da.jsxs)("div",{className:"flex items-center",children:[(0,Da.jsx)("div",{className:"flex-shrink-0",children:(0,Da.jsx)(Gi,{className:"h-6 w-6 text-green-600"})}),(0,Da.jsx)("div",{className:"ml-5 w-0 flex-1",children:(0,Da.jsxs)("dl",{children:[(0,Da.jsx)("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Total Inventory"}),(0,Da.jsx)("dd",{className:"text-2xl font-semibold text-gray-900",children:i.summary.total_inventory.toLocaleString()})]})})]})})})]}),(0,Da.jsxs)("div",{className:"bg-white shadow rounded-lg",children:[(0,Da.jsx)("div",{className:"p-4 border-b border-gray-200",children:(0,Da.jsxs)("div",{className:"flex flex-col space-y-4",children:[(0,Da.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,Da.jsx)("form",{onSubmit:e=>{e.preventDefault(),u(e=>qe(qe({},e),{},{page:1}))},className:"flex-1",children:(0,Da.jsxs)("div",{className:"relative",children:[(0,Da.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,Da.jsx)(ui,{className:"h-5 w-5 text-gray-400"})}),(0,Da.jsx)("input",{type:"text",value:h.search,onChange:e=>f(t=>qe(qe({},t),{},{search:e.target.value})),className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-primary-500 focus:border-primary-500",placeholder:"Search products, vendors, types..."})]})}),(0,Da.jsxs)("select",{value:h.status,onChange:e=>y(qe(qe({},h),{},{status:e.target.value})),className:"block rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500",children:[(0,Da.jsx)("option",{value:"all",children:"All Status"}),(0,Da.jsx)("option",{value:"active",children:"Active"}),(0,Da.jsx)("option",{value:"draft",children:"Draft"}),(0,Da.jsx)("option",{value:"archived",children:"Archived"})]}),(0,Da.jsxs)("button",{onClick:g,className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50",children:[(0,Da.jsx)(vi,{className:"w-4 h-4 mr-2"}),"Refresh"]})]}),(0,Da.jsx)(Yi,{filters:h,onChange:y,onReset:()=>{f({search:"",status:"all",vendor:"all",product_type:"all",min_price:"",max_price:"",sort_by:"created_at",sort_order:"DESC"}),u(e=>qe(qe({},e),{},{page:1}))},vendors:l.vendors,productTypes:l.product_types})]})}),p?(0,Da.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,Da.jsx)(vi,{className:"w-8 h-8 animate-spin text-primary-600"})}):0===n.length?(0,Da.jsxs)("div",{className:"text-center py-12",children:[(0,Da.jsx)(Ii,{className:"mx-auto h-12 w-12 text-gray-400"}),(0,Da.jsx)("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No products found"}),(0,Da.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Try adjusting your search or filters"})]}):(0,Da.jsxs)(Da.Fragment,{children:[(0,Da.jsx)("div",{className:"overflow-x-auto",children:(0,Da.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,Da.jsx)("thead",{className:"bg-gray-50",children:(0,Da.jsxs)("tr",{children:[(0,Da.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:(0,Da.jsxs)("button",{onClick:()=>v("title"),className:"flex items-center space-x-1 hover:text-gray-700",children:[(0,Da.jsx)("span",{children:"Product"}),j("title")]})}),(0,Da.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:(0,Da.jsxs)("button",{onClick:()=>v("vendor"),className:"flex items-center space-x-1 hover:text-gray-700",children:[(0,Da.jsx)("span",{children:"Vendor"}),j("vendor")]})}),(0,Da.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:(0,Da.jsxs)("button",{onClick:()=>v("price"),className:"flex items-center space-x-1 hover:text-gray-700",children:[(0,Da.jsx)("span",{children:"Price"}),j("price")]})}),(0,Da.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:(0,Da.jsxs)("button",{onClick:()=>v("total_inventory"),className:"flex items-center space-x-1 hover:text-gray-700",children:[(0,Da.jsx)("span",{children:"Stock"}),j("total_inventory")]})}),(0,Da.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,Da.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,Da.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:n.map(e=>{var t,r;return(0,Da.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,Da.jsx)("td",{className:"px-6 py-4",children:(0,Da.jsxs)("div",{className:"flex items-center",children:[(0,Da.jsx)("div",{className:"flex-shrink-0 h-12 w-12",children:e.image_url?(0,Da.jsx)("img",{src:e.image_url,alt:e.title,className:"h-12 w-12 rounded object-cover"}):(0,Da.jsx)("div",{className:"h-12 w-12 rounded bg-gray-200 flex items-center justify-center",children:(0,Da.jsx)(Ii,{className:"h-6 w-6 text-gray-400"})})}),(0,Da.jsxs)("div",{className:"ml-4",children:[(0,Da.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.title}),e.product_type&&(0,Da.jsx)("div",{className:"text-sm text-gray-500",children:e.product_type})]})]})}),(0,Da.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,Da.jsx)("div",{className:"text-sm text-gray-900",children:e.vendor||"-"})}),(0,Da.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,Da.jsx)("div",{className:"text-sm text-gray-900",children:(r=e.price,"PKR ".concat(parseFloat(r).toLocaleString()))})}),(0,Da.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,Da.jsx)("div",{className:"text-sm text-gray-900",children:e.total_inventory||0})}),(0,Da.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,Da.jsx)("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full ".concat(b(e.status)),children:e.status})}),(0,Da.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[(0,Da.jsx)(Ie,{to:"/shopify/products/".concat(e.id),className:"text-primary-600 hover:text-primary-900 mr-3",children:(0,Da.jsx)(Hi,{className:"w-4 h-4 inline"})}),(null===(t=e.shopify_metadata)||void 0===t?void 0:t.handle)&&(0,Da.jsx)("a",{href:"https://".concat(e.shop_domain,"/products/").concat(e.shopify_metadata.handle),target:"_blank",rel:"noopener noreferrer",className:"text-gray-400 hover:text-gray-600",children:(0,Da.jsx)(Mi,{className:"w-4 h-4 inline"})})]})]},e.id)})})]})}),(0,Da.jsx)(Ji,{currentPage:d.page,totalPages:d.total_pages,onPageChange:e=>{u(t=>qe(qe({},t),{},{page:e})),window.scrollTo({top:0,behavior:"smooth"})},pageSize:d.limit,onPageSizeChange:e=>{u(t=>qe(qe({},t),{},{limit:e,page:1}))},totalItems:d.total})]})]})]})},$i=()=>{const{storeId:e}=re(),t=ee(),[r,n]=(0,a.useState)(!0),[s,i]=(0,a.useState)(!1),[o,l]=(0,a.useState)(!1),[c,d]=(0,a.useState)(null),[u,p]=(0,a.useState)({auto_sync_enabled:!0,sync_frequency_minutes:1440,sync_status_filter:"active",sync_reviews:!1});(0,a.useEffect)(()=>{m()},[e]);const m=async()=>{try{n(!0);const t=await(e=>Ma.get("/shopify/stores/".concat(e)))(e);d(t.data),t.data.sync_settings&&p(t.data.sync_settings)}catch(t){console.error("Load store error:",t),nr.error("Failed to load store settings")}finally{n(!1)}},h=e=>{const{name:t,value:r,type:n,checked:a}=e.target;p(e=>qe(qe({},e),{},{[t]:"checkbox"===n?a:"number"===n?parseInt(r):r}))};return r?(0,Da.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,Da.jsx)(vi,{className:"w-8 h-8 animate-spin text-primary-600"})}):c?(0,Da.jsxs)("div",{className:"max-w-3xl mx-auto",children:[(0,Da.jsxs)("div",{className:"mb-6",children:[(0,Da.jsxs)("button",{onClick:()=>t("/shopify"),className:"inline-flex items-center text-sm text-gray-500 hover:text-gray-700 mb-4",children:[(0,Da.jsx)(fi,{className:"w-4 h-4 mr-1"}),"Back to Stores"]}),(0,Da.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Da.jsxs)("div",{className:"flex items-center",children:[(0,Da.jsx)(Xs,{className:"w-8 h-8 text-gray-400 mr-3"}),(0,Da.jsxs)("div",{children:[(0,Da.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:c.shop_domain}),(0,Da.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Store Settings"})]})]}),(0,Da.jsx)("div",{className:"px-3 py-1 rounded-full text-sm font-medium ".concat("active"===c.status?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"),children:c.status})]})]}),(0,Da.jsxs)("div",{className:"bg-white shadow rounded-lg p-6 mb-6",children:[(0,Da.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Store Information"}),(0,Da.jsxs)("dl",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2",children:[(0,Da.jsxs)("div",{children:[(0,Da.jsx)("dt",{className:"text-sm font-medium text-gray-500",children:"Shop Domain"}),(0,Da.jsx)("dd",{className:"mt-1 text-sm text-gray-900",children:c.shop_domain})]}),(0,Da.jsxs)("div",{children:[(0,Da.jsx)("dt",{className:"text-sm font-medium text-gray-500",children:"Status"}),(0,Da.jsx)("dd",{className:"mt-1 text-sm text-gray-900",children:c.status})]}),(0,Da.jsxs)("div",{children:[(0,Da.jsx)("dt",{className:"text-sm font-medium text-gray-500",children:"Products Synced"}),(0,Da.jsx)("dd",{className:"mt-1 text-sm text-gray-900",children:c.total_products_synced||0})]}),(0,Da.jsxs)("div",{children:[(0,Da.jsx)("dt",{className:"text-sm font-medium text-gray-500",children:"Last Sync"}),(0,Da.jsx)("dd",{className:"mt-1 text-sm text-gray-900",children:c.last_sync_at?new Date(c.last_sync_at).toLocaleString():"Never"})]}),(0,Da.jsxs)("div",{children:[(0,Da.jsx)("dt",{className:"text-sm font-medium text-gray-500",children:"Last Sync Status"}),(0,Da.jsx)("dd",{className:"mt-1",children:c.last_sync_status?(0,Da.jsxs)("span",{className:"inline-flex items-center text-sm ".concat("success"===c.last_sync_status?"text-green-600":"text-red-600"),children:["success"===c.last_sync_status?(0,Da.jsx)(gs,{className:"w-4 h-4 mr-1"}):(0,Da.jsx)(gi,{className:"w-4 h-4 mr-1"}),c.last_sync_status]}):(0,Da.jsx)("span",{className:"text-sm text-gray-500",children:"N/A"})})]}),(0,Da.jsxs)("div",{children:[(0,Da.jsx)("dt",{className:"text-sm font-medium text-gray-500",children:"Created"}),(0,Da.jsx)("dd",{className:"mt-1 text-sm text-gray-900",children:new Date(c.created_at).toLocaleDateString()})]})]})]}),(0,Da.jsxs)("form",{onSubmit:async r=>{r.preventDefault(),i(!0);try{await((e,t)=>Ma.put("/shopify/stores/".concat(e,"/settings"),t))(e,{sync_settings:u}),nr.success("Settings saved successfully!"),t("/shopify")}catch(s){var n,a;console.error("Save error:",s),nr.error((null===(n=s.response)||void 0===n||null===(a=n.data)||void 0===a?void 0:a.message)||"Failed to save settings")}finally{i(!1)}},className:"bg-white shadow rounded-lg",children:[(0,Da.jsxs)("div",{className:"p-6 space-y-6",children:[(0,Da.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Sync Settings"}),(0,Da.jsxs)("div",{className:"flex items-start",children:[(0,Da.jsx)("div",{className:"flex items-center h-5",children:(0,Da.jsx)("input",{type:"checkbox",name:"auto_sync_enabled",checked:u.auto_sync_enabled,onChange:h,className:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded"})}),(0,Da.jsxs)("div",{className:"ml-3",children:[(0,Da.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Enable automatic sync"}),(0,Da.jsx)("p",{className:"text-sm text-gray-500",children:"Automatically sync products on a schedule"})]})]}),u.auto_sync_enabled&&(0,Da.jsxs)("div",{children:[(0,Da.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Sync Frequency"}),(0,Da.jsxs)("select",{name:"sync_frequency_minutes",value:u.sync_frequency_minutes,onChange:h,className:"w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500",children:[(0,Da.jsx)("option",{value:"60",children:"Every hour"}),(0,Da.jsx)("option",{value:"360",children:"Every 6 hours"}),(0,Da.jsx)("option",{value:"720",children:"Every 12 hours"}),(0,Da.jsx)("option",{value:"1440",children:"Daily"}),(0,Da.jsx)("option",{value:"10080",children:"Weekly"})]})]}),(0,Da.jsxs)("div",{children:[(0,Da.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Sync Products"}),(0,Da.jsxs)("select",{name:"sync_status_filter",value:u.sync_status_filter,onChange:h,className:"w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500",children:[(0,Da.jsx)("option",{value:"active",children:"Active products only"}),(0,Da.jsx)("option",{value:"all",children:"All products"}),(0,Da.jsx)("option",{value:"draft",children:"Draft products only"})]})]}),(0,Da.jsxs)("div",{className:"flex items-start",children:[(0,Da.jsx)("div",{className:"flex items-center h-5",children:(0,Da.jsx)("input",{type:"checkbox",name:"sync_reviews",checked:u.sync_reviews,onChange:h,className:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded"})}),(0,Da.jsxs)("div",{className:"ml-3",children:[(0,Da.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Sync product reviews"}),(0,Da.jsx)("p",{className:"text-sm text-gray-500",children:"Include product reviews in sync (if available)"})]})]})]}),(0,Da.jsxs)("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-200 flex items-center justify-between",children:[(0,Da.jsxs)("button",{type:"button",onClick:async()=>{try{const t=await Ri(e,{job_type:"full_sync"});nr.success("Sync started! Job ID: ".concat(t.data.job_id))}catch(t){nr.error("Failed to start sync")}},className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50",children:[(0,Da.jsx)(vi,{className:"w-4 h-4 mr-2"}),"Test Sync Now"]}),(0,Da.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,Da.jsx)("button",{type:"button",onClick:()=>t("/shopify"),className:"px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50",children:"Cancel"}),(0,Da.jsxs)("button",{type:"submit",disabled:s,className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700 disabled:opacity-50",children:[(0,Da.jsx)(is,{className:"w-4 h-4 mr-2"}),s?"Saving...":"Save Settings"]})]})]})]}),(0,Da.jsx)("div",{className:"mt-6 bg-white shadow rounded-lg border-2 border-red-200",children:(0,Da.jsxs)("div",{className:"p-6",children:[(0,Da.jsx)("h3",{className:"text-lg font-medium text-red-900",children:"Danger Zone"}),(0,Da.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Once you disconnect this store, you won't be able to sync new products. Existing synced data will remain in your knowledge base."}),(0,Da.jsx)("div",{className:"mt-4",children:(0,Da.jsxs)("button",{type:"button",onClick:async()=>{if(window.confirm("Are you sure you want to disconnect this store? All synced data will remain but new syncs will stop.")){l(!0);try{await(e=>Ma.delete("/shopify/stores/".concat(e)))(e),nr.success("Store disconnected successfully"),t("/shopify")}catch(r){console.error("Delete error:",r),nr.error("Failed to disconnect store")}finally{l(!1)}}},disabled:o,className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-red-600 hover:bg-red-700 disabled:opacity-50",children:[(0,Da.jsx)(ns,{className:"w-4 h-4 mr-2"}),o?"Disconnecting...":"Disconnect Store"]})})]})})]}):(0,Da.jsxs)("div",{className:"text-center py-12",children:[(0,Da.jsx)(gi,{className:"mx-auto h-12 w-12 text-red-400"}),(0,Da.jsx)("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"Store not found"}),(0,Da.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"The store you're looking for doesn't exist or has been removed."}),(0,Da.jsx)("div",{className:"mt-6",children:(0,Da.jsxs)("button",{onClick:()=>t("/shopify"),className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50",children:[(0,Da.jsx)(fi,{className:"w-4 h-4 mr-2"}),"Back to Stores"]})})]})},Qi=Ha("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]),Zi=()=>{var e,t;const{id:r}=re(),n=ee(),[s,i]=(0,a.useState)(null),[o,l]=(0,a.useState)(!0),[c,d]=(0,a.useState)(!1),[u,p]=(0,a.useState)(0);(0,a.useEffect)(()=>{m()},[r]);const m=async()=>{try{l(!0);const e=await(async e=>{try{const t=await Ma.get("/shopify/products/".concat(e));return t.data.data||t.data}catch(t){throw console.error("Get product error:",t),t}})(r);i(e),p(0)}catch(e){console.error("Error loading product:",e),nr.error("Failed to load product details")}finally{l(!1)}};if(o)return(0,Da.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,Da.jsx)(ki,{className:"w-8 h-8 animate-spin text-primary-600"})});if(!s)return(0,Da.jsxs)("div",{className:"flex flex-col items-center justify-center min-h-screen",children:[(0,Da.jsx)(gi,{className:"w-16 h-16 text-gray-400 mb-4"}),(0,Da.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Product Not Found"}),(0,Da.jsx)("p",{className:"text-gray-600 mb-4",children:"The product you're looking for doesn't exist."}),(0,Da.jsxs)("button",{onClick:()=>n(-1),className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50",children:[(0,Da.jsx)(fi,{className:"w-4 h-4 mr-2"}),"Go Back"]})]});const h=s.images||[],f=s.variants||[],g=s.tags?s.tags.map(e=>e.trim()).filter(Boolean):[];return(0,Da.jsx)("div",{className:"min-h-screen bg-gray-50 py-8",children:(0,Da.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,Da.jsxs)("div",{className:"mb-6",children:[(0,Da.jsxs)("button",{onClick:()=>n(-1),className:"inline-flex items-center text-sm text-gray-600 hover:text-gray-900 mb-4",children:[(0,Da.jsx)(fi,{className:"w-4 h-4 mr-1"}),"Back to Products"]}),(0,Da.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Da.jsxs)("div",{children:[(0,Da.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:s.title}),(0,Da.jsxs)("p",{className:"mt-1 text-sm text-gray-500",children:["Product ID: ",s.shopify_product_id]})]}),(0,Da.jsxs)("div",{className:"flex gap-2",children:[(0,Da.jsxs)("button",{onClick:async()=>{try{d(!0),await(async e=>{try{const t=await Ma.post("/shopify/products/".concat(e,"/refresh"));return t.data.data||t.data}catch(t){throw console.error("Refresh product error:",t),t}})(r),nr.success("Product refreshed successfully"),m()}catch(e){console.error("Error refreshing product:",e),nr.error("Failed to refresh product")}finally{d(!1)}},disabled:c,className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50",children:[(0,Da.jsx)(vi,{className:"w-4 h-4 mr-2 ".concat(c?"animate-spin":"")}),"Refresh"]}),(0,Da.jsxs)("button",{onClick:()=>{var e;null!==s&&void 0!==s&&null!==(e=s.shopify_metadata)&&void 0!==e&&e.admin_url?window.open(s.shopify_metadata.admin_url,"_blank"):null!==s&&void 0!==s&&s.shop_domain&&null!==s&&void 0!==s&&s.shopify_product_id&&window.open("https://".concat(s.shop_domain,"/admin/products/").concat(s.shopify_product_id),"_blank")},className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50",children:[(0,Da.jsx)(Mi,{className:"w-4 h-4 mr-2"}),"Edit in Shopify"]}),(0,Da.jsxs)("button",{onClick:async()=>{if(confirm("Are you sure you want to delete this product from the knowledge base? This will not affect your Shopify store."))try{await(async e=>{try{const t=await Ma.delete("/shopify/products/".concat(e));return t.data.data||t.data}catch(t){throw console.error("Delete product error:",t),t}})(r),nr.success("Product deleted successfully"),n(-1)}catch(e){console.error("Error deleting product:",e),nr.error("Failed to delete product")}},className:"inline-flex items-center px-4 py-2 border border-red-300 rounded-md shadow-sm text-sm font-medium text-red-700 bg-white hover:bg-red-50",children:[(0,Da.jsx)(ns,{className:"w-4 h-4 mr-2"}),"Delete"]})]})]})]}),(0,Da.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(0,Da.jsxs)("div",{className:"space-y-4",children:[(0,Da.jsx)("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:h.length>0?(0,Da.jsxs)(Da.Fragment,{children:[(0,Da.jsx)("div",{className:"aspect-square bg-gray-100 flex items-center justify-center",children:(0,Da.jsx)("img",{src:null===(e=h[u])||void 0===e?void 0:e.url,alt:s.title,className:"w-full h-full object-contain",onError:e=>{e.target.src="/placeholder-image.png"}})}),h.length>1&&(0,Da.jsx)("div",{className:"p-4 grid grid-cols-4 gap-2",children:h.map((e,t)=>(0,Da.jsx)("button",{onClick:()=>p(t),className:"aspect-square rounded-lg overflow-hidden border-2 ".concat(u===t?"border-primary-500":"border-gray-200 hover:border-gray-300"),children:(0,Da.jsx)("img",{src:e.url,alt:"".concat(s.title," ").concat(t+1),className:"w-full h-full object-cover"})},t))})]}):(0,Da.jsx)("div",{className:"aspect-square bg-gray-100 flex items-center justify-center",children:(0,Da.jsx)(qs,{className:"w-24 h-24 text-gray-400"})})}),(0,Da.jsxs)("div",{className:"bg-white rounded-lg shadow p-4",children:[(0,Da.jsx)("h3",{className:"text-sm font-medium text-gray-900 mb-2",children:"Image Information"}),(0,Da.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,Da.jsxs)("div",{children:[(0,Da.jsx)("span",{className:"text-gray-600",children:"Total Images:"}),(0,Da.jsx)("span",{className:"ml-2 font-medium",children:h.length})]}),(0,Da.jsxs)("div",{children:[(0,Da.jsx)("span",{className:"text-gray-600",children:"Primary Image:"}),(0,Da.jsx)("span",{className:"ml-2 font-medium",children:s.primary_image_id?"Set":"Not set"})]})]})]})]}),(0,Da.jsxs)("div",{className:"space-y-6",children:[(0,Da.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,Da.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,Da.jsxs)("div",{children:[(0,Da.jsx)("p",{className:"text-sm text-gray-600",children:"Price"}),(0,Da.jsxs)("p",{className:"text-3xl font-bold text-gray-900",children:["$",parseFloat(s.price||0).toFixed(2)]})]}),(0,Da.jsxs)("div",{className:"text-right",children:[(0,Da.jsx)("p",{className:"text-sm text-gray-600",children:"Status"}),(0,Da.jsx)("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium ".concat("active"===s.status?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"),children:s.status||"Unknown"})]})]}),s.compare_at_price&&parseFloat(s.compare_at_price)>parseFloat(s.price)&&(0,Da.jsx)("div",{className:"mt-2",children:(0,Da.jsxs)("p",{className:"text-sm text-gray-600",children:["Compare at:"," ",(0,Da.jsxs)("span",{className:"line-through",children:["$",parseFloat(s.compare_at_price).toFixed(2)]}),(0,Da.jsxs)("span",{className:"ml-2 text-red-600 font-medium",children:["Save $",(parseFloat(s.compare_at_price)-parseFloat(s.price)).toFixed(2)]})]})})]}),s.description&&(0,Da.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,Da.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-3 flex items-center",children:[(0,Da.jsx)(us,{className:"w-5 h-5 mr-2"}),"Description"]}),(0,Da.jsx)("div",{className:"text-gray-700 prose prose-sm max-w-none",dangerouslySetInnerHTML:{__html:s.description}})]}),f.length>0&&(0,Da.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,Da.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[(0,Da.jsx)(Ii,{className:"w-5 h-5 mr-2"}),"Variants (",f.length,")"]}),(0,Da.jsx)("div",{className:"space-y-3",children:f.map((e,t)=>(0,Da.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4",children:[(0,Da.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,Da.jsxs)("div",{children:[(0,Da.jsx)("p",{className:"font-medium text-gray-900",children:e.title}),e.sku&&(0,Da.jsxs)("p",{className:"text-sm text-gray-600",children:["SKU: ",e.sku]})]}),(0,Da.jsxs)("div",{className:"text-right",children:[(0,Da.jsxs)("p",{className:"font-semibold text-gray-900",children:["$",parseFloat(e.price||0).toFixed(2)]}),e.compare_at_price&&(0,Da.jsxs)("p",{className:"text-sm text-gray-500 line-through",children:["$",parseFloat(e.compare_at_price).toFixed(2)]})]})]}),(0,Da.jsxs)("div",{className:"grid grid-cols-2 gap-4 mt-3 text-sm",children:[(0,Da.jsxs)("div",{children:[(0,Da.jsx)("span",{className:"text-gray-600",children:"Inventory:"}),(0,Da.jsxs)("span",{className:"ml-2 font-medium ".concat(e.inventory_quantity>0?"text-green-600":"text-red-600"),children:[e.inventory_quantity||0," units"]})]}),e.weight&&(0,Da.jsxs)("div",{children:[(0,Da.jsx)("span",{className:"text-gray-600",children:"Weight:"}),(0,Da.jsxs)("span",{className:"ml-2 font-medium",children:[e.weight," ",e.weight_unit]})]})]}),e.barcode&&(0,Da.jsxs)("div",{className:"mt-2 text-sm",children:[(0,Da.jsx)("span",{className:"text-gray-600",children:"Barcode:"}),(0,Da.jsx)("span",{className:"ml-2 font-mono text-gray-900",children:e.barcode})]})]},t))})]}),(0,Da.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,Da.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Product Information"}),(0,Da.jsxs)("dl",{className:"grid grid-cols-1 gap-4",children:[s.vendor&&(0,Da.jsxs)("div",{children:[(0,Da.jsx)("dt",{className:"text-sm font-medium text-gray-600",children:"Vendor"}),(0,Da.jsx)("dd",{className:"mt-1 text-sm text-gray-900",children:s.vendor})]}),s.product_type&&(0,Da.jsxs)("div",{children:[(0,Da.jsx)("dt",{className:"text-sm font-medium text-gray-600",children:"Product Type"}),(0,Da.jsx)("dd",{className:"mt-1 text-sm text-gray-900",children:s.product_type})]}),g.length>0&&(0,Da.jsxs)("div",{children:[(0,Da.jsx)("dt",{className:"text-sm font-medium text-gray-600 mb-2",children:"Tags"}),(0,Da.jsx)("dd",{className:"flex flex-wrap gap-2",children:g.map((e,t)=>(0,Da.jsxs)("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-blue-100 text-blue-800",children:[(0,Da.jsx)(Vi,{className:"w-3 h-3 mr-1"}),e]},t))})]}),(0,Da.jsxs)("div",{children:[(0,Da.jsx)("dt",{className:"text-sm font-medium text-gray-600",children:"Created"}),(0,Da.jsxs)("dd",{className:"mt-1 text-sm text-gray-900 flex items-center",children:[(0,Da.jsx)(Qi,{className:"w-4 h-4 mr-1"}),new Date(s.created_at).toLocaleString()]})]}),(0,Da.jsxs)("div",{children:[(0,Da.jsx)("dt",{className:"text-sm font-medium text-gray-600",children:"Last Updated"}),(0,Da.jsxs)("dd",{className:"mt-1 text-sm text-gray-900 flex items-center",children:[(0,Da.jsx)(Qi,{className:"w-4 h-4 mr-1"}),new Date(s.updated_at).toLocaleString()]})]}),(null===(t=s.shopify_metadata)||void 0===t?void 0:t.handle)&&(0,Da.jsxs)("div",{children:[(0,Da.jsx)("dt",{className:"text-sm font-medium text-gray-600",children:"Product Handle"}),(0,Da.jsx)("dd",{className:"mt-1 text-sm text-gray-900 font-mono",children:s.shopify_metadata.handle})]})]})]}),s.shopify_metadata&&Object.keys(s.shopify_metadata).length>0&&(0,Da.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,Da.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Shopify Metadata"}),(0,Da.jsxs)("div",{className:"space-y-2 text-sm",children:[s.shopify_metadata.published_at&&(0,Da.jsxs)("div",{className:"flex justify-between",children:[(0,Da.jsx)("span",{className:"text-gray-600",children:"Published:"}),(0,Da.jsx)("span",{className:"text-gray-900",children:new Date(s.shopify_metadata.published_at).toLocaleDateString()})]}),s.shopify_metadata.template_suffix&&(0,Da.jsxs)("div",{className:"flex justify-between",children:[(0,Da.jsx)("span",{className:"text-gray-600",children:"Template:"}),(0,Da.jsx)("span",{className:"text-gray-900",children:s.shopify_metadata.template_suffix})]})]})]})]})]})]})})},eo=()=>{var e;const{id:t}=re(),r=ee(),[n,s]=(0,a.useState)(!0),[i,o]=(0,a.useState)(!1),[l,c]=(0,a.useState)(null),[d,u]=(0,a.useState)([]);(0,a.useEffect)(()=>{p()},[t]);const p=async()=>{try{s(!0);const[r,n]=await Promise.all([(e=t,Ma.get("/conversation-strategy/".concat(e))),ks()]);c(r.data.data),u(n.data.data)}catch(r){console.error("Error loading conversation strategy:",r),nr.error("Failed to load conversation strategy")}finally{s(!1)}var e},m=async e=>{try{o(!0);const r=await((e,t)=>Ma.post("/conversation-strategy/apply-preset/".concat(e),{preset_id:t}))(t,e);c(r.data.data),nr.success("Preset applied successfully")}catch(r){console.error("Error applying preset:",r),nr.error("Failed to apply preset")}finally{o(!1)}},h=e=>{c(qe(qe({},l),{},{preference_collection:qe(qe({},l.preference_collection),{},{strategy:e})}))};if(n)return(0,Da.jsx)("div",{className:"flex items-center justify-center h-screen",children:(0,Da.jsx)(Hs,{className:"animate-spin",size:32})});if(!l)return(0,Da.jsx)("div",{className:"flex items-center justify-center h-screen",children:(0,Da.jsxs)("div",{className:"text-center",children:[(0,Da.jsx)(gi,{size:48,className:"mx-auto mb-4 text-red-500"}),(0,Da.jsx)("p",{className:"text-gray-600",children:"Failed to load conversation strategy"})]})});const f=(null===(e=l.preference_collection)||void 0===e?void 0:e.strategy)||"immediate_search";return(0,Da.jsxs)("div",{className:"p-6 max-w-5xl mx-auto",children:[(0,Da.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,Da.jsxs)("div",{className:"flex items-center gap-4",children:[(0,Da.jsx)("button",{onClick:()=>r("/agents/".concat(t)),className:"p-2 hover:bg-gray-100 rounded-lg",children:(0,Da.jsx)(fi,{size:20})}),(0,Da.jsxs)("div",{children:[(0,Da.jsx)("h1",{className:"text-2xl font-bold",children:"Conversation Strategy"}),(0,Da.jsx)("p",{className:"text-gray-600 text-sm mt-1",children:"Configure how your agent collects preferences and searches"})]})]}),(0,Da.jsx)("button",{onClick:async()=>{try{o(!0),await((e,t)=>Ma.put("/conversation-strategy/".concat(e),t))(t,l),nr.success("Conversation strategy saved successfully")}catch(e){console.error("Error saving strategy:",e),nr.error("Failed to save conversation strategy")}finally{o(!1)}},disabled:i,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50",children:i?(0,Da.jsxs)(Da.Fragment,{children:[(0,Da.jsx)(Hs,{size:18,className:"animate-spin"}),"Saving..."]}):(0,Da.jsxs)(Da.Fragment,{children:[(0,Da.jsx)(is,{size:18}),"Save Changes"]})})]}),(0,Da.jsxs)("div",{className:"bg-white rounded-lg shadow p-6 mb-6",children:[(0,Da.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,Da.jsx)(us,{size:20,className:"text-blue-500"}),(0,Da.jsx)("h2",{className:"text-lg font-semibold",children:"Quick Presets"})]}),(0,Da.jsx)("p",{className:"text-gray-600 text-sm mb-4",children:"Apply a preset configuration based on your business type"}),(0,Da.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:d.map(e=>{const t={shirt:ps,laptop:ms,couch:hs,utensils:fs}[e.icon]||us;return(0,Da.jsxs)("button",{onClick:()=>m(e.id),disabled:i,className:"p-4 border-2 border-gray-200 rounded-lg hover:border-blue-500 hover:bg-blue-50 transition-colors text-left disabled:opacity-50",children:[(0,Da.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,Da.jsx)(t,{size:24,className:"text-blue-600"}),(0,Da.jsx)("h3",{className:"font-semibold",children:e.name})]}),(0,Da.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:e.description}),(0,Da.jsx)("div",{className:"flex items-center gap-2",children:(0,Da.jsx)("span",{className:"text-xs px-2 py-1 bg-gray-100 rounded",children:0===e.strategy.preference_collection.max_questions?"No questions":"".concat(e.strategy.preference_collection.max_questions," questions")})})]},e.id)})})]}),(0,Da.jsxs)("div",{className:"bg-white rounded-lg shadow p-6 mb-6",children:[(0,Da.jsx)("h2",{className:"text-lg font-semibold mb-4",children:"\ud83d\udecd\ufe0f Product Search Strategy"}),(0,Da.jsx)("p",{className:"text-gray-600 text-sm mb-6",children:"Configure how your agent searches for products"}),(0,Da.jsxs)("div",{className:"space-y-4",children:[(0,Da.jsxs)("label",{className:"flex items-start gap-3 p-4 border-2 rounded-lg cursor-pointer hover:bg-gray-50 transition-colors",children:[(0,Da.jsx)("input",{type:"radio",name:"strategy",value:"immediate_search",checked:"immediate_search"===f,onChange:e=>h(e.target.value),className:"mt-1"}),(0,Da.jsxs)("div",{className:"flex-1",children:[(0,Da.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,Da.jsx)("span",{className:"font-semibold",children:"Immediate Search"}),(0,Da.jsx)("span",{className:"text-xs px-2 py-1 bg-green-100 text-green-700 rounded",children:"Fast"})]}),(0,Da.jsx)("p",{className:"text-sm text-gray-600",children:"Search as soon as user requests products. No questions asked."}),(0,Da.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Best for: Furniture, Food, Low-ticket items"})]})]}),(0,Da.jsxs)("label",{className:"flex items-start gap-3 p-4 border-2 rounded-lg cursor-pointer hover:bg-gray-50 transition-colors",children:[(0,Da.jsx)("input",{type:"radio",name:"strategy",value:"ask_questions",checked:"ask_questions"===f,onChange:e=>h(e.target.value),className:"mt-1"}),(0,Da.jsxs)("div",{className:"flex-1",children:[(0,Da.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,Da.jsx)("span",{className:"font-semibold",children:"Ask Questions First"}),(0,Da.jsx)("span",{className:"text-xs px-2 py-1 bg-blue-100 text-blue-700 rounded",children:"Personalized"})]}),(0,Da.jsx)("p",{className:"text-sm text-gray-600",children:"Collect user preferences before searching for products."}),(0,Da.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Best for: Clothing, Fashion, High-value items"}),"ask_questions"===f&&(0,Da.jsxs)("div",{className:"mt-3 p-3 bg-blue-50 rounded text-sm text-blue-700",children:[(0,Da.jsx)(us,{size:16,className:"inline mr-1"}),"Advanced configuration coming in Phase 2"]})]})]}),(0,Da.jsxs)("label",{className:"flex items-start gap-3 p-4 border-2 rounded-lg cursor-pointer hover:bg-gray-50 transition-colors",children:[(0,Da.jsx)("input",{type:"radio",name:"strategy",value:"minimal_questions",checked:"minimal_questions"===f,onChange:e=>h(e.target.value),className:"mt-1"}),(0,Da.jsxs)("div",{className:"flex-1",children:[(0,Da.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,Da.jsx)("span",{className:"font-semibold",children:"Minimal Questions (1-2)"}),(0,Da.jsx)("span",{className:"text-xs px-2 py-1 bg-yellow-100 text-yellow-700 rounded",children:"Balanced"})]}),(0,Da.jsx)("p",{className:"text-sm text-gray-600",children:"Ask only 1-2 critical questions before searching."}),(0,Da.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Best for: Electronics, Mid-range items"})]})]}),(0,Da.jsxs)("label",{className:"flex items-start gap-3 p-4 border-2 rounded-lg cursor-pointer hover:bg-gray-50 transition-colors",children:[(0,Da.jsx)("input",{type:"radio",name:"strategy",value:"adaptive",checked:"adaptive"===f,onChange:e=>h(e.target.value),className:"mt-1"}),(0,Da.jsxs)("div",{className:"flex-1",children:[(0,Da.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,Da.jsx)("span",{className:"font-semibold",children:"Adaptive (Smart)"}),(0,Da.jsx)("span",{className:"text-xs px-2 py-1 bg-purple-100 text-purple-700 rounded",children:"Intelligent"})]}),(0,Da.jsx)("p",{className:"text-sm text-gray-600",children:"AI decides based on product type, value, and context."}),(0,Da.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Best for: Multi-category stores"})]})]})]})]}),(0,Da.jsx)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:(0,Da.jsxs)("div",{className:"flex items-start gap-3",children:[(0,Da.jsx)(gs,{size:20,className:"text-green-600 mt-0.5"}),(0,Da.jsxs)("div",{children:[(0,Da.jsx)("h3",{className:"font-semibold text-green-900 mb-1",children:"Current Configuration"}),(0,Da.jsxs)("p",{className:"text-sm text-green-700",children:["Your agent is using ",(0,Da.jsx)("strong",{children:f.replace("_"," ")})," strategy.","immediate_search"===f&&" Products will be shown immediately.","ask_questions"===f&&" Agent will collect preferences before searching.","minimal_questions"===f&&" Agent will ask 1-2 quick questions.","adaptive"===f&&" AI will decide the best approach."]})]})]})})]})},to=e=>{let{user:t,onSave:r,onClose:n}=e;const{user:s}=Fa(),[i,o]=(0,a.useState)({name:"",email:"",password:"",role:"client",is_active:!0}),[l,c]=(0,a.useState)(!1),[d,u]=(0,a.useState)(null);(0,a.useEffect)(()=>{t&&o({name:t.name,email:t.email,password:"",role:t.role,is_active:t.is_active})},[t]);const p=(e,t)=>{o(r=>qe(qe({},r),{},{[e]:t}))};return(0,Da.jsx)("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 flex items-center justify-center p-4 z-50",children:(0,Da.jsxs)("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full",children:[(0,Da.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[(0,Da.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:t?"Edit User":"Create User"}),(0,Da.jsx)("button",{onClick:n,className:"text-gray-400 hover:text-gray-500",children:(0,Da.jsx)(ss,{className:"w-5 h-5"})})]}),(0,Da.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),u(null),c(!0);try{if(!i.name||!i.email)throw new Error("Name and email are required");if(!t&&!i.password)throw new Error("Password is required for new users");if(i.password&&i.password.length<6)throw new Error("Password must be at least 6 characters");const e={name:i.name,email:i.email,role:i.role,is_active:i.is_active};i.password&&(e.password=i.password),await r(e)}catch(n){u(n.message),c(!1)}},className:"p-6 space-y-4",children:[d&&(0,Da.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-md p-3",children:(0,Da.jsx)("p",{className:"text-sm text-red-800",children:d})}),(0,Da.jsxs)("div",{children:[(0,Da.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Full Name *"}),(0,Da.jsx)("input",{type:"text",required:!0,value:i.name,onChange:e=>p("name",e.target.value),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500",placeholder:"John Doe"})]}),(0,Da.jsxs)("div",{children:[(0,Da.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email *"}),(0,Da.jsx)("input",{type:"email",required:!0,value:i.email,onChange:e=>p("email",e.target.value),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500",placeholder:"john@example.com"})]}),(0,Da.jsxs)("div",{children:[(0,Da.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Password ",!t&&"*"]}),(0,Da.jsx)("input",{type:"password",required:!t,value:i.password,onChange:e=>p("password",e.target.value),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500",placeholder:t?"Leave blank to keep current":"Min 6 characters",minLength:6}),t&&(0,Da.jsx)("p",{className:"mt-1 text-xs text-gray-500",children:"Leave blank to keep current password"})]}),(0,Da.jsxs)("div",{children:[(0,Da.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Role *"}),(0,Da.jsx)("select",{required:!0,value:i.role,onChange:e=>p("role",e.target.value),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500",children:("super_admin"===(null===s||void 0===s?void 0:s.role)?[{value:"super_admin",label:"Super Admin"},{value:"admin",label:"Admin"},{value:"agent_manager",label:"Agent Manager"},{value:"client",label:"Client"}]:"admin"===(null===s||void 0===s?void 0:s.role)?[{value:"admin",label:"Admin"},{value:"agent_manager",label:"Agent Manager"},{value:"client",label:"Client"}]:[{value:"agent_manager",label:"Agent Manager"},{value:"client",label:"Client"}]).map(e=>(0,Da.jsx)("option",{value:e.value,children:e.label},e.value))})]}),(0,Da.jsxs)("div",{className:"bg-gray-50 rounded-md p-3 text-xs text-gray-600",children:[(0,Da.jsx)("p",{className:"font-medium mb-1",children:"Role Permissions:"}),(0,Da.jsxs)("ul",{className:"space-y-1",children:[(0,Da.jsxs)("li",{children:[(0,Da.jsx)("strong",{children:"Super Admin:"})," Full system access"]}),(0,Da.jsxs)("li",{children:[(0,Da.jsx)("strong",{children:"Admin:"})," Manage users, credits, agents"]}),(0,Da.jsxs)("li",{children:[(0,Da.jsx)("strong",{children:"Agent Manager:"})," Create and manage agents"]}),(0,Da.jsxs)("li",{children:[(0,Da.jsx)("strong",{children:"Client:"})," View-only access"]})]})]}),t&&(0,Da.jsxs)("div",{className:"flex items-center",children:[(0,Da.jsx)("input",{type:"checkbox",id:"is_active",checked:i.is_active,onChange:e=>p("is_active",e.target.checked),className:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded"}),(0,Da.jsx)("label",{htmlFor:"is_active",className:"ml-2 block text-sm text-gray-700",children:"Account is active"})]}),(0,Da.jsxs)("div",{className:"flex items-center justify-end space-x-3 pt-4 border-t border-gray-200",children:[(0,Da.jsx)("button",{type:"button",onClick:n,className:"px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50",children:"Cancel"}),(0,Da.jsx)("button",{type:"submit",disabled:l,className:"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700 disabled:opacity-50",children:l?"Saving...":t?"Update User":"Create User"})]})]})]})})},ro=Ha("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),no=e=>{let{title:t,message:r,confirmText:n="Confirm",cancelText:a="Cancel",confirmStyle:s="primary",onConfirm:i,onCancel:o}=e;const l="danger"===s?"bg-red-600 hover:bg-red-700 text-white":"bg-primary-600 hover:bg-primary-700 text-white";return(0,Da.jsx)("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 flex items-center justify-center p-4 z-50",children:(0,Da.jsxs)("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full",children:[(0,Da.jsxs)("div",{className:"flex items-start p-6",children:[(0,Da.jsx)("div",{className:"flex-shrink-0",children:(0,Da.jsx)(ro,{className:"h-6 w-6 ".concat("danger"===s?"text-red-600":"text-yellow-600")})}),(0,Da.jsxs)("div",{className:"ml-3 flex-1",children:[(0,Da.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:t}),(0,Da.jsx)("div",{className:"mt-2",children:(0,Da.jsx)("p",{className:"text-sm text-gray-500",children:r})})]}),(0,Da.jsx)("button",{onClick:o,className:"text-gray-400 hover:text-gray-500",children:(0,Da.jsx)(ss,{className:"w-5 h-5"})})]}),(0,Da.jsxs)("div",{className:"bg-gray-50 px-6 py-3 flex items-center justify-end space-x-3",children:[(0,Da.jsx)("button",{onClick:o,className:"px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50",children:a}),(0,Da.jsx)("button",{onClick:i,className:"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium ".concat(l),children:n})]})]})})},ao=()=>{const{user:e}=Fa(),[t,r]=(0,a.useState)([]),[n,s]=(0,a.useState)(!0),[i,o]=(0,a.useState)(""),[l,c]=(0,a.useState)("all"),[d,u]=(0,a.useState)(!1),[p,m]=(0,a.useState)(null),[h,f]=(0,a.useState)(null);(0,a.useEffect)(()=>{g()},[l]);const g=async()=>{try{s(!0);const e={};"all"!==l&&(e.role=l);const t=await function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Ma.get("/users",{params:e})}(e);r(t.data.data.users||[])}catch(e){console.error("Load users error:",e),nr.error("Failed to load users")}finally{s(!1)}},x=e=>e?new Date(e).toLocaleString():"Never",y=t.filter(e=>e.name.toLowerCase().includes(i.toLowerCase())||e.email.toLowerCase().includes(i.toLowerCase())),v=["admin","super_admin"].includes(null===e||void 0===e?void 0:e.role);return(0,Da.jsxs)("div",{className:"space-y-6",children:[(0,Da.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Da.jsxs)("div",{children:[(0,Da.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"User Management"}),(0,Da.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Manage users and their permissions"})]}),v&&(0,Da.jsxs)("button",{onClick:()=>{m(null),u(!0)},className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700",children:[(0,Da.jsx)(Qa,{className:"w-4 h-4 mr-2"}),"Add User"]})]}),(0,Da.jsx)("div",{className:"bg-white shadow rounded-lg p-4",children:(0,Da.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,Da.jsx)("div",{className:"flex-1",children:(0,Da.jsxs)("div",{className:"relative",children:[(0,Da.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,Da.jsx)(ui,{className:"h-5 w-5 text-gray-400"})}),(0,Da.jsx)("input",{type:"text",value:i,onChange:e=>o(e.target.value),className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:ring-1 focus:ring-primary-500 focus:border-primary-500",placeholder:"Search users..."})]})}),(0,Da.jsxs)("select",{value:l,onChange:e=>c(e.target.value),className:"block rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500",children:[(0,Da.jsx)("option",{value:"all",children:"All Roles"}),(0,Da.jsx)("option",{value:"super_admin",children:"Super Admin"}),(0,Da.jsx)("option",{value:"admin",children:"Admin"}),(0,Da.jsx)("option",{value:"agent_manager",children:"Agent Manager"}),(0,Da.jsx)("option",{value:"client",children:"Client"})]}),(0,Da.jsxs)("button",{onClick:g,className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50",children:[(0,Da.jsx)(vi,{className:"w-4 h-4 mr-2"}),"Refresh"]})]})}),(0,Da.jsx)("div",{className:"bg-white shadow rounded-lg overflow-hidden",children:n?(0,Da.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,Da.jsx)(vi,{className:"w-8 h-8 animate-spin text-primary-600"})}):0===y.length?(0,Da.jsxs)("div",{className:"text-center py-12",children:[(0,Da.jsx)(ei,{className:"mx-auto h-12 w-12 text-gray-400"}),(0,Da.jsx)("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No users found"}),(0,Da.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:i?"Try adjusting your search":"Get started by adding a user"})]}):(0,Da.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,Da.jsx)("thead",{className:"bg-gray-50",children:(0,Da.jsxs)("tr",{children:[(0,Da.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User"}),(0,Da.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Role"}),(0,Da.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,Da.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Last Login"}),v&&(0,Da.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,Da.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:y.map(t=>{return(0,Da.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,Da.jsx)("td",{className:"px-6 py-4",children:(0,Da.jsxs)("div",{className:"flex items-center",children:[(0,Da.jsx)("div",{className:"flex-shrink-0 h-10 w-10",children:(0,Da.jsx)("div",{className:"h-10 w-10 rounded-full bg-primary-100 flex items-center justify-center",children:(0,Da.jsx)("span",{className:"text-primary-600 font-medium text-sm",children:t.name.charAt(0).toUpperCase()})})}),(0,Da.jsxs)("div",{className:"ml-4",children:[(0,Da.jsxs)("div",{className:"text-sm font-medium text-gray-900",children:[t.name,t.id===(null===e||void 0===e?void 0:e.id)&&(0,Da.jsx)("span",{className:"ml-2 text-xs text-gray-500",children:"(You)"})]}),(0,Da.jsx)("div",{className:"text-sm text-gray-500",children:t.email})]})]})}),(0,Da.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(r=t.role,(0,Da.jsx)("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full ".concat({super_admin:"bg-purple-100 text-purple-800",admin:"bg-blue-100 text-blue-800",agent_manager:"bg-green-100 text-green-800",client:"bg-gray-100 text-gray-800"}[r]),children:{super_admin:"Super Admin",admin:"Admin",agent_manager:"Agent Manager",client:"Client"}[r]}))}),(0,Da.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:t.is_active?(0,Da.jsxs)("span",{className:"inline-flex items-center text-sm text-green-600",children:[(0,Da.jsx)(gs,{className:"w-4 h-4 mr-1"}),"Active"]}):(0,Da.jsxs)("span",{className:"inline-flex items-center text-sm text-red-600",children:[(0,Da.jsx)(Ti,{className:"w-4 h-4 mr-1"}),"Inactive"]})}),(0,Da.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:x(t.last_login_at)}),v&&(0,Da.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[(0,Da.jsx)("button",{onClick:()=>(e=>{m(e),u(!0)})(t),className:"text-primary-600 hover:text-primary-900 mr-3",children:(0,Da.jsx)(mi,{className:"w-4 h-4 inline"})}),t.id!==(null===e||void 0===e?void 0:e.id)&&(0,Da.jsx)("button",{onClick:()=>(e=>{f(e)})(t),className:"text-red-600 hover:text-red-900",children:(0,Da.jsx)(ns,{className:"w-4 h-4 inline"})})]})]},t.id);var r})})]})}),d&&(0,Da.jsx)(to,{user:p,onSave:async e=>{try{p?(await((e,t)=>Ma.put("/users/".concat(e),t))(p.id,e),nr.success("User updated successfully")):(await(e=>Ma.post("/users",e))(e),nr.success("User created successfully")),u(!1),g()}catch(n){var t,r;throw console.error("Save user error:",n),new Error((null===(t=n.response)||void 0===t||null===(r=t.data)||void 0===r?void 0:r.error)||"Failed to save user")}},onClose:()=>u(!1)}),h&&(0,Da.jsx)(no,{title:"Delete User",message:"Are you sure you want to delete ".concat(h.name,"? This action cannot be undone."),confirmText:"Delete",confirmStyle:"danger",onConfirm:async()=>{try{await(r=h.id,Ma.delete("/users/".concat(r))),nr.success("User deleted successfully"),f(null),g()}catch(n){var e,t;console.error("Delete user error:",n),nr.error((null===(e=n.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.error)||"Failed to delete user")}var r},onCancel:()=>f(null)})]})},so=()=>{const{id:e}=re(),[t,r]=(0,a.useState)(null),[n,s]=(0,a.useState)(!0),[i,o]=(0,a.useState)(!1),[l,c]=(0,a.useState)(!1),[d,u]=(0,a.useState)({enable_chat_integration:!1,chat_page_enabled:!1,chat_page_slug:"",widget_config:{primary_color:"#6366f1",position:"bottom-right",button_text:"Chat with us",greeting_message:"Hello! How can I help you today?"}});(0,a.useEffect)(()=>{p()},[e]);const p=async()=>{try{s(!0);const t=(await Pa(e)).data.agent;r(t),u({enable_chat_integration:t.enable_chat_integration||!1,chat_page_enabled:t.chat_page_enabled||!1,chat_page_slug:t.chat_page_slug||"",widget_config:t.widget_config||d.widget_config})}catch(t){console.error("Load agent error:",t),nr.error("Failed to load agent")}finally{s(!1)}},m=e=>{navigator.clipboard.writeText(e),o(!0),nr.success("Copied to clipboard!"),setTimeout(()=>o(!1),2e3)},h="\x3c!-- AIVA Chat Widget --\x3e\n<script>\n  (function(w,d,s,o,f,js,fjs){\n    w['AIVAWidget']=o;w[o] = w[o] || function () { (w[o].q = w[o].q || []).push(arguments) };\n    js = d.createElement(s), fjs = d.getElementsByTagName(s)[0];\n    js.id = o; js.src = f; js.async = 1; fjs.parentNode.insertBefore(js, fjs);\n  }(window, document, 'script', 'aiva', '".concat(window.location.origin,"/aiva/widget.js'));\n  aiva('init', {\n    agentId: '").concat(e,"',\n    // API URL will auto-detect from widget source\n    // Or explicitly set: apiUrl: 'https://your-domain.com/aiva/api/public/chat',\n    primaryColor: '").concat(d.widget_config.primary_color,"',\n    position: '").concat(d.widget_config.position,"'\n  });\n<\/script>"),f=d.chat_page_slug?"".concat(window.location.origin,"/aiva/chat/").concat(d.chat_page_slug):"".concat(window.location.origin,"/aiva/chat/").concat(e);return n?(0,Da.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,Da.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}):(0,Da.jsxs)("div",{className:"space-y-6",children:[(0,Da.jsx)("div",{className:"flex items-center justify-between",children:(0,Da.jsxs)("div",{children:[(0,Da.jsxs)(Ie,{to:"/agents/".concat(e),className:"inline-flex items-center text-sm text-gray-500 hover:text-gray-700 mb-2",children:[(0,Da.jsx)(fi,{className:"w-4 h-4 mr-1"}),"Back to Agent"]}),(0,Da.jsxs)("h1",{className:"text-2xl font-bold text-gray-900",children:["Chat Integration - ",null===t||void 0===t?void 0:t.name]}),(0,Da.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Embed your AI agent on websites or share a standalone chat page"})]})}),(0,Da.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,Da.jsxs)("div",{className:"bg-white shadow rounded-lg overflow-hidden",children:[(0,Da.jsx)("div",{className:"p-6 border-b border-gray-200",children:(0,Da.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Da.jsxs)("div",{className:"flex items-center",children:[(0,Da.jsx)("div",{className:"flex-shrink-0",children:(0,Da.jsx)(rs,{className:"h-8 w-8 text-primary-600"})}),(0,Da.jsxs)("div",{className:"ml-4",children:[(0,Da.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Chat Widget"}),(0,Da.jsx)("p",{className:"text-sm text-gray-500",children:"Embeddable chat bubble for your website"})]})]}),(0,Da.jsxs)("label",{className:"relative inline-flex items-center cursor-pointer",children:[(0,Da.jsx)("input",{type:"checkbox",checked:d.enable_chat_integration,onChange:e=>u(t=>qe(qe({},t),{},{enable_chat_integration:e.target.checked})),className:"sr-only peer"}),(0,Da.jsx)("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary-600"})]})]})}),d.enable_chat_integration&&(0,Da.jsxs)("div",{className:"p-6 space-y-6",children:[(0,Da.jsxs)("div",{className:"space-y-4",children:[(0,Da.jsx)("h4",{className:"text-sm font-medium text-gray-900",children:"Widget Appearance"}),(0,Da.jsxs)("div",{children:[(0,Da.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Primary Color"}),(0,Da.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Da.jsx)("input",{type:"color",value:d.widget_config.primary_color,onChange:e=>u(t=>qe(qe({},t),{},{widget_config:qe(qe({},t.widget_config),{},{primary_color:e.target.value})})),className:"h-10 w-20 rounded border border-gray-300"}),(0,Da.jsx)("input",{type:"text",value:d.widget_config.primary_color,onChange:e=>u(t=>qe(qe({},t),{},{widget_config:qe(qe({},t.widget_config),{},{primary_color:e.target.value})})),className:"flex-1 rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500"})]})]}),(0,Da.jsxs)("div",{children:[(0,Da.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Position"}),(0,Da.jsxs)("select",{value:d.widget_config.position,onChange:e=>u(t=>qe(qe({},t),{},{widget_config:qe(qe({},t.widget_config),{},{position:e.target.value})})),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500",children:[(0,Da.jsx)("option",{value:"bottom-right",children:"Bottom Right"}),(0,Da.jsx)("option",{value:"bottom-left",children:"Bottom Left"})]})]}),(0,Da.jsxs)("div",{children:[(0,Da.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Button Text"}),(0,Da.jsx)("input",{type:"text",value:d.widget_config.button_text,onChange:e=>u(t=>qe(qe({},t),{},{widget_config:qe(qe({},t.widget_config),{},{button_text:e.target.value})})),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500"})]})]}),(0,Da.jsxs)("div",{children:[(0,Da.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,Da.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Embed Code"}),(0,Da.jsx)("button",{onClick:()=>m(h),className:"inline-flex items-center text-sm text-primary-600 hover:text-primary-700",children:i?(0,Da.jsxs)(Da.Fragment,{children:[(0,Da.jsx)(Vs,{className:"w-4 h-4 mr-1"}),"Copied!"]}):(0,Da.jsxs)(Da.Fragment,{children:[(0,Da.jsx)(Gs,{className:"w-4 h-4 mr-1"}),"Copy"]})})]}),(0,Da.jsx)("div",{className:"relative",children:(0,Da.jsx)("pre",{className:"bg-gray-900 text-gray-100 p-4 rounded-lg overflow-x-auto text-xs",children:(0,Da.jsx)("code",{children:h})})}),(0,Da.jsx)("p",{className:"mt-2 text-xs text-gray-500",children:"Paste this code before the closing </body> tag of your website"})]})]})]}),(0,Da.jsxs)("div",{className:"bg-white shadow rounded-lg overflow-hidden",children:[(0,Da.jsx)("div",{className:"p-6 border-b border-gray-200",children:(0,Da.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Da.jsxs)("div",{className:"flex items-center",children:[(0,Da.jsx)("div",{className:"flex-shrink-0",children:(0,Da.jsx)(ds,{className:"h-8 w-8 text-primary-600"})}),(0,Da.jsxs)("div",{className:"ml-4",children:[(0,Da.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Standalone Chat Page"}),(0,Da.jsx)("p",{className:"text-sm text-gray-500",children:"Full-page OpenAI-style chat interface"})]})]}),(0,Da.jsxs)("label",{className:"relative inline-flex items-center cursor-pointer",children:[(0,Da.jsx)("input",{type:"checkbox",checked:d.chat_page_enabled,onChange:e=>u(t=>qe(qe({},t),{},{chat_page_enabled:e.target.checked})),className:"sr-only peer"}),(0,Da.jsx)("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary-600"})]})]})}),d.chat_page_enabled&&(0,Da.jsxs)("div",{className:"p-6 space-y-6",children:[(0,Da.jsxs)("div",{children:[(0,Da.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Custom URL Slug (optional)"}),(0,Da.jsxs)("div",{className:"flex rounded-md shadow-sm",children:[(0,Da.jsxs)("span",{className:"inline-flex items-center px-3 rounded-l-md border border-r-0 border-gray-300 bg-gray-50 text-gray-500 text-sm",children:[window.location.origin,"/aiva/chat/"]}),(0,Da.jsx)("input",{type:"text",value:d.chat_page_slug,onChange:e=>u(t=>qe(qe({},t),{},{chat_page_slug:e.target.value.toLowerCase().replace(/[^a-z0-9-]/g,"")})),placeholder:e,className:"flex-1 min-w-0 block w-full px-3 py-2 rounded-none rounded-r-md border-gray-300 focus:border-primary-500 focus:ring-primary-500"})]}),(0,Da.jsx)("p",{className:"mt-1 text-xs text-gray-500",children:"Leave empty to use agent ID"})]}),(0,Da.jsxs)("div",{children:[(0,Da.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Your Chat Page URL"}),(0,Da.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Da.jsx)("div",{className:"flex-1 bg-gray-50 border border-gray-300 rounded-md px-3 py-2 text-sm text-gray-700 font-mono",children:f}),(0,Da.jsx)("button",{onClick:()=>m(f),className:"inline-flex items-center px-3 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50",children:(0,Da.jsx)(Gs,{className:"w-4 h-4"})}),(0,Da.jsx)("a",{href:f,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center px-3 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-primary-600 hover:bg-primary-700",children:(0,Da.jsx)(Mi,{className:"w-4 h-4"})})]})]}),(0,Da.jsxs)("div",{children:[(0,Da.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Preview"}),(0,Da.jsx)("div",{className:"border border-gray-300 rounded-lg overflow-hidden",children:(0,Da.jsx)("iframe",{src:f,className:"w-full h-96",title:"Chat Preview"})})]})]})]})]}),(0,Da.jsx)("div",{className:"flex justify-end",children:(0,Da.jsx)("button",{onClick:async()=>{try{c(!0),await((e,t)=>Aa.put("/agents/".concat(e,"/chat-integration"),t))(e,d),nr.success("Integration settings saved"),p()}catch(t){console.error("Save error:",t),nr.error("Failed to save settings")}finally{c(!1)}},disabled:l,className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700 disabled:opacity-50",children:l?"Saving...":"Save Settings"})})]})},io=Ha("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]),oo=Ha("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]),lo=e=>{let{audioUrl:t,label:r,isPlaying:n,onTogglePlay:s,variant:i="default"}=e;const[o,l]=(0,a.useState)(null),[c,d]=(0,a.useState)(0),u=(0,a.useRef)(null);(0,a.useEffect)(()=>{u.current&&(u.current.addEventListener("loadedmetadata",()=>{l(u.current.duration)}),u.current.addEventListener("timeupdate",()=>{d(u.current.currentTime)}),u.current.addEventListener("ended",()=>{d(0),s(!1)}))},[]),(0,a.useEffect)(()=>{u.current&&(n?u.current.play().catch(e=>console.log("Playback error:",e)):u.current.pause())},[n]);const p=e=>{if(!e||isNaN(e))return"0:00";const t=Math.floor(e/60),r=Math.floor(e%60);return"".concat(t,":").concat(r.toString().padStart(2,"0"))},m=o?c/o*100:0,h="user"===i?"bg-primary-500/20":"bg-gray-100",f="user"===i?"bg-white text-primary-600":"bg-primary-500 text-white",g="user"===i?"text-primary-100":"text-gray-600",x="user"===i?"bg-primary-400/30":"bg-gray-200",y="user"===i?"bg-white":"bg-primary-500";return(0,Da.jsxs)("div",{className:"flex items-center gap-3 p-2 ".concat(h," rounded-lg"),children:[(0,Da.jsx)("audio",{ref:u,src:t,preload:"metadata"}),(0,Da.jsx)("button",{onClick:()=>s(!n),className:"p-2 ".concat(f," rounded-full hover:opacity-80 transition-opacity flex-shrink-0"),children:n?(0,Da.jsx)(io,{className:"w-4 h-4"}):(0,Da.jsx)(ls,{className:"w-4 h-4"})}),(0,Da.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,Da.jsx)("div",{className:"h-1 ".concat(x," rounded-full overflow-hidden"),children:(0,Da.jsx)("div",{className:"h-full ".concat(y," transition-all duration-100"),style:{width:"".concat(m,"%")}})}),(0,Da.jsxs)("div",{className:"flex justify-between mt-1 text-xs ".concat(g),children:[(0,Da.jsx)("span",{children:p(c)}),(0,Da.jsx)("span",{children:r||p(o)})]})]})]})},co=e=>{let{sources:t=[],images:r=[]}=e;const[n,s]=(0,a.useState)(!1);if((!t||0===t.length)&&(!r||0===r.length))return null;const i=(null===t||void 0===t?void 0:t.length)||0,o=(null===r||void 0===r?void 0:r.length)||0;return(0,Da.jsxs)("div",{className:"mt-3 pt-3 border-t border-gray-200",children:[(0,Da.jsxs)("button",{onClick:()=>s(!n),className:"flex items-center gap-2 text-xs text-gray-500 hover:text-gray-700 transition-colors w-full",children:[n?(0,Da.jsx)(zs,{className:"w-4 h-4"}):(0,Da.jsx)(ii,{className:"w-4 h-4"}),(0,Da.jsxs)("span",{className:"flex items-center gap-2",children:[i>0&&(0,Da.jsxs)("span",{className:"flex items-center gap-1",children:[(0,Da.jsx)(cs,{className:"w-3 h-3"}),i," source",i>1?"s":""]}),i>0&&o>0&&(0,Da.jsx)("span",{children:"\xb7"}),o>0&&(0,Da.jsxs)("span",{className:"flex items-center gap-1",children:[(0,Da.jsx)(qs,{className:"w-3 h-3"}),o," image",o>1?"s":""]})]})]}),n&&(0,Da.jsxs)("div",{className:"mt-2 space-y-3 max-h-80 overflow-y-auto",children:[t&&t.length>0&&(0,Da.jsx)("div",{className:"space-y-2",children:t.map((e,t)=>{var r,n,a,s;const i=(null===(r=e.source)||void 0===r?void 0:r.document_name)||e.document||"Unknown",o=(null===(n=e.source)||void 0===n?void 0:n.page)||(null===(a=e.source)||void 0===a||null===(s=a.metadata)||void 0===s?void 0:s.page_number)||e.page||"",l=Math.round(100*(e.score||e.relevance||0)),c=e.content||"",d=c.substring(0,200)+(c.length>200?"...":"");return(0,Da.jsxs)("div",{className:"bg-gray-50 rounded-lg p-3 border border-gray-200",children:[(0,Da.jsxs)("div",{className:"flex items-center gap-2 mb-1 flex-wrap",children:[(0,Da.jsx)("span",{className:"bg-blue-500 text-white text-xs px-2 py-0.5 rounded-full font-medium",children:t+1}),(0,Da.jsx)("span",{className:"text-xs font-medium text-gray-700 truncate max-w-[200px]",children:i}),o&&(0,Da.jsxs)("span",{className:"text-xs text-gray-500",children:["Page ",o]}),(0,Da.jsxs)("span",{className:"text-xs text-green-600 font-medium ml-auto",children:[l,"%"]})]}),(0,Da.jsx)("p",{className:"text-xs text-gray-600 leading-relaxed",children:d})]},e.result_id||t)})}),r&&r.length>0&&(0,Da.jsxs)("div",{className:"grid grid-cols-3 gap-2",children:[r.slice(0,9).map((e,t)=>(0,Da.jsx)("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",className:"block rounded-lg overflow-hidden border border-gray-200 hover:border-blue-400 transition-colors",children:(0,Da.jsx)("img",{src:e.thumbnail_url||e.url,alt:e.title||"Image ".concat(t+1),className:"w-full h-16 object-cover",loading:"lazy",onError:e=>{e.target.src="data:image/svg+xml,%3Csvg xmlns=%22http://www.w3.org/2000/svg%22 width=%22100%22 height=%2264%22%3E%3Crect fill=%22%23f3f4f6%22 width=%22100%22 height=%2264%22/%3E%3Ctext x=%2250%25%22 y=%2250%25%22 text-anchor=%22middle%22 dy=%22.3em%22 fill=%22%239ca3af%22 font-size=%2212%22%3EImage%3C/text%3E%3C/svg%3E"}})},e.image_id||t)),r.length>9&&(0,Da.jsxs)("div",{className:"flex items-center justify-center bg-gray-100 rounded-lg text-xs text-gray-500",children:["+",r.length-9," more"]})]})]})]})},uo=()=>{const{agentId:e}=re(),[t,r]=(0,a.useState)(null),[n,s]=(0,a.useState)(null),[i,o]=(0,a.useState)([]),[l,c]=(0,a.useState)(""),[d,u]=(0,a.useState)(!0),[p,m]=(0,a.useState)(!1),[h,f]=(0,a.useState)(!1),[g,x]=(0,a.useState)(!1),[y,v]=(0,a.useState)(null),[b,j]=(0,a.useState)(null),w=(0,a.useRef)(null),[N,k]=(0,a.useState)(!1),[S,_]=(0,a.useState)(null),[C,A]=(0,a.useState)(0),[O,P]=(0,a.useState)(null),E=(0,a.useRef)(null),T=(0,a.useRef)([]),I=(0,a.useRef)(null),M=(0,a.useRef)(null),D=(0,a.useRef)(null),R=window.location.origin+"/aiva/api/public/chat";(0,a.useEffect)(()=>{F()},[e]),(0,a.useEffect)(()=>{W()},[i]);const F=async()=>{try{u(!0);const t=localStorage.getItem("aiva_chat_".concat(e));t&&(r(t),await L(t));const n=await Ca.get("".concat(R,"/agent/").concat(e,"/config"));if(n.data.success&&s(n.data.data),!t){const t=await Ca.post("".concat(R,"/init"),{agent_id:e,visitor_info:{url:window.location.href,referrer:document.referrer}});if(t.data.success){const n=t.data.data.session_id;r(n),localStorage.setItem("aiva_chat_".concat(e),n),t.data.data.agent.greeting&&o([{id:"greeting",role:"assistant",content:t.data.data.agent.greeting,created_at:(new Date).toISOString()}])}}}catch(t){console.error("Init error:",t)}finally{u(!1)}},L=async e=>{try{const t=await Ca.get("".concat(R,"/history/").concat(e));if(t.data.success){const e=t.data.data.messages.map(e=>({id:e.id,role:e.role,content:e.content,html:e.content_html,response:e.response,sources:e.sources||[],images:e.images||[],products:e.products||[],agent_transfer:e.agent_transfer_requested,created_at:e.created_at}));o(e)}}catch(t){console.error("Load history error:",t)}},B=()=>{v(null),j(null),w.current&&(w.current.value="")},U=()=>{_(null),A(0)},z=e=>{const t=Math.floor(e/60),r=e%60;return"".concat(t,":").concat(r.toString().padStart(2,"0"))},q=async n=>{if(n.preventDefault(),!l.trim()&&!y&&!S)return;if(p)return;const a=l.trim();c(""),m(!0);let s=null;if(y)try{s=await(i=y,new Promise((e,t)=>{const r=new FileReader;r.onload=()=>e(r.result),r.onerror=t,r.readAsDataURL(i)}))}catch(x){console.error("Failed to convert image:",x)}var i;let d=a;!d&&y&&(d="\ud83d\udcf7 [Image]"),!d&&S&&(d="\ud83c\udfa4 [Voice Message]");const u=b,h=S;let g=null;h&&(g=URL.createObjectURL(h)),o(e=>[...e,{id:Date.now().toString(),role:"user",content:d,image:u,isAudio:!!h,audioUrl:g,created_at:(new Date).toISOString()}]),B(),U();try{let n;if(h){const r=new FormData;r.append("audio",h,"recording.webm"),r.append("session_id",t||""),r.append("agent_id",e),r.append("generate_audio_response","true"),a&&r.append("message",a),n=await Ca.post("".concat(R,"/message"),r,{headers:{"Content-Type":"multipart/form-data"}})}else n=await Ca.post("".concat(R,"/message"),{session_id:t,agent_id:e,message:a||".",image:s});const i=n.data.data;!t&&i.session_id&&(r(i.session_id),localStorage.setItem("aiva_chat_".concat(e),i.session_id)),o(e=>{var t,r;return[...e,{id:i.message_id||Date.now().toString(),role:"assistant",content:(null===(t=i.response)||void 0===t?void 0:t.text)||"",content_html:null===(r=i.response)||void 0===r?void 0:r.html,sources:i.sources||[],images:i.images||[],products:i.products||[],transcription:i.transcription,audio_response:i.audio_response,created_at:(new Date).toISOString()}]}),(i.show_feedback_prompt||i.interaction_closed)&&f(!0)}catch(v){console.error("Send message error:",v),o(e=>[...e,{id:Date.now().toString(),role:"assistant",content:"Sorry, I encountered an error. Please try again.",error:!0,created_at:(new Date).toISOString()}])}finally{m(!1)}},W=()=>{var e;null===(e=D.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})},V=async function(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";try{(await Ca.post("".concat(R.replace("/message",""),"/feedback/session"),{session_id:t,rating:e,comment:r})).data.success&&(x(!0),f(!1),o(e=>[...e,{id:"feedback-thanks-"+Date.now(),role:"system",content:"\u2705 Thank you for your feedback!",created_at:(new Date).toISOString()}]))}catch(n){console.error("Submit feedback error:",n)}},G=async(e,t)=>{try{(await Ca.post("".concat(R.replace("/message",""),"/feedback/message"),{message_id:e,rating:t})).data.success&&console.log("\u2705 Message feedback submitted")}catch(r){console.error("Submit message feedback error:",r)}},H=e=>{var t,r,n;if("user"===e.role&&e.image)return(0,Da.jsxs)("div",{children:[e.content&&"\ud83d\udcf7 [Image]"!==e.content&&(0,Da.jsx)("p",{className:"text-sm mb-2",children:e.content}),(0,Da.jsx)("img",{src:e.image,alt:"Uploaded",className:"max-w-xs rounded-lg"})]});if("user"===e.role&&e.isAudio)return(0,Da.jsxs)("div",{children:[e.content&&"\ud83c\udfa4 [Voice Message]"!==e.content&&(0,Da.jsx)("p",{className:"text-sm mb-2",children:e.content}),e.audioUrl?(0,Da.jsx)(lo,{audioUrl:e.audioUrl,label:"Voice message",isPlaying:O==="user-".concat(e.id),onTogglePlay:t=>P(t?"user-".concat(e.id):null),variant:"user"}):(0,Da.jsxs)("div",{className:"flex items-center gap-2 text-sm opacity-80",children:[(0,Da.jsx)(Rs,{className:"w-4 h-4"}),(0,Da.jsx)("span",{children:"Voice message sent"})]})]});const a=(null===(t=e.response)||void 0===t?void 0:t.html)||(null===(r=e.response)||void 0===r?void 0:r.text)||e.html||e.content||"";return(0,Da.jsxs)(Da.Fragment,{children:[e.transcription&&(0,Da.jsxs)("div",{className:"mb-2 text-xs text-gray-500 italic flex items-center gap-1",children:[(0,Da.jsx)(Rs,{className:"w-3 h-3"}),(0,Da.jsxs)("span",{children:["Transcribed from voice (",e.transcription.language,")"]})]}),(0,Da.jsx)("div",{className:"text-sm whitespace-pre-wrap prose prose-sm max-w-none",dangerouslySetInnerHTML:{__html:a}}),(null===(n=e.audio_response)||void 0===n?void 0:n.url)&&(0,Da.jsx)("div",{className:"mt-3",children:(0,Da.jsx)(lo,{audioUrl:e.audio_response.url,label:e.audio_response.estimated_duration?"".concat(Math.round(e.audio_response.estimated_duration),"s"):"Audio response",isPlaying:O==="assistant-".concat(e.id),onTogglePlay:t=>P(t?"assistant-".concat(e.id):null),variant:"default"})}),(0,Da.jsx)(co,{sources:e.sources,images:e.images}),e.products&&e.products.length>0&&(0,Da.jsxs)("div",{className:"mt-4 pt-4 border-t border-gray-200",children:[(0,Da.jsxs)("div",{className:"text-xs font-semibold text-gray-600 mb-3 flex items-center gap-1",children:[(0,Da.jsx)(Wi,{className:"w-4 h-4"}),"Products (",e.products.length,")"]}),(0,Da.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:e.products.map((e,t)=>(0,Da.jsxs)("div",{className:"bg-gray-50 rounded-lg p-3 text-center hover:shadow-md transition-shadow",children:[e.image&&(0,Da.jsx)("img",{src:e.image,alt:e.name,className:"w-full h-32 object-cover rounded-md mb-2"}),(0,Da.jsx)("div",{className:"text-sm font-medium text-gray-900 mb-1 line-clamp-2",children:e.name}),(0,Da.jsx)("div",{className:"text-sm font-semibold text-primary-600 mb-2",children:e.price}),e.purchase_url&&(0,Da.jsx)("a",{href:e.purchase_url,target:"_blank",rel:"noopener noreferrer",className:"inline-block bg-primary-600 text-white text-xs px-3 py-1 rounded-md hover:bg-primary-700 transition-colors",children:"View Product"})]},t))})]}),"assistant"===e.role&&e.id&&"greeting"!==e.id&&(0,Da.jsx)("div",{className:"mt-3 pt-3 border-t border-gray-200",children:(0,Da.jsxs)("div",{className:"flex items-center gap-2 text-xs text-gray-500",children:[(0,Da.jsx)("span",{children:"Was this helpful?"}),(0,Da.jsx)("button",{onClick:()=>G(e.id,"useful"),className:"p-1 hover:bg-gray-100 rounded transition-colors",title:"Helpful",children:"\ud83d\udc4d"}),(0,Da.jsx)("button",{onClick:()=>G(e.id,"not_useful"),className:"p-1 hover:bg-gray-100 rounded transition-colors",title:"Not helpful",children:"\ud83d\udc4e"})]})})]})};return d?(0,Da.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,Da.jsx)(Hs,{className:"w-8 h-8 animate-spin text-primary-600"})}):(0,Da.jsxs)("div",{className:"flex flex-col h-screen bg-gray-50",children:[(0,Da.jsx)("div",{className:"bg-white border-b border-gray-200 px-4 py-4 shadow-sm",children:(0,Da.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,Da.jsx)("h1",{className:"text-xl font-semibold text-gray-900",children:(null===n||void 0===n?void 0:n.name)||"AI Assistant"}),(0,Da.jsx)("p",{className:"text-sm text-gray-500",children:"Powered by Intellicon AiVA"})]})}),(0,Da.jsx)("div",{className:"flex-1 overflow-y-auto",children:(0,Da.jsxs)("div",{className:"max-w-4xl mx-auto px-4 py-6 space-y-6",children:[0===i.length?(0,Da.jsxs)("div",{className:"text-center py-12",children:[(0,Da.jsx)("div",{className:"text-6xl mb-4",children:"\ud83d\udc4b"}),(0,Da.jsx)("h2",{className:"text-2xl font-semibold text-gray-900 mb-2",children:"Hello! How can I help you today?"}),(0,Da.jsx)("p",{className:"text-gray-500",children:"Ask me anything and I'll do my best to assist you."})]}):i.map(e=>(0,Da.jsx)("div",{className:"flex ".concat("user"===e.role?"justify-end":"system"===e.role?"justify-center":"justify-start"),children:(0,Da.jsx)("div",{className:"rounded-2xl px-4 py-3 ".concat("user"===e.role?"max-w-3xl bg-primary-600 text-white":"system"===e.role?"bg-yellow-50 text-yellow-800 border border-yellow-200 px-6":"max-w-3xl bg-white text-gray-900 shadow-sm border border-gray-200"),children:"system"===e.role?(0,Da.jsx)("p",{className:"text-sm text-center",children:e.content}):H(e)})},e.id)),p&&(0,Da.jsx)("div",{className:"flex justify-start",children:(0,Da.jsx)("div",{className:"bg-white rounded-2xl px-4 py-3 shadow-sm border border-gray-200",children:(0,Da.jsxs)("div",{className:"flex space-x-2",children:[(0,Da.jsx)("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0ms"}}),(0,Da.jsx)("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"150ms"}}),(0,Da.jsx)("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"300ms"}})]})})}),(0,Da.jsx)("div",{ref:D})]})}),h&&!g&&(0,Da.jsx)("div",{className:"bg-blue-50 border-t border-blue-200 px-4 py-4",children:(0,Da.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,Da.jsxs)("div",{className:"text-center mb-3",children:[(0,Da.jsx)("p",{className:"text-sm font-medium text-gray-900 mb-1",children:"How was your experience?"}),(0,Da.jsx)("p",{className:"text-xs text-gray-600",children:"Your feedback helps us improve"})]}),(0,Da.jsxs)("div",{className:"flex items-center justify-center gap-3",children:[(0,Da.jsxs)("button",{onClick:()=>V("good"),className:"flex items-center gap-2 px-4 py-2 bg-green-500 hover:bg-green-600 text-white rounded-lg transition-colors",children:[(0,Da.jsx)("span",{className:"text-lg",children:"\ud83d\udc4d"}),(0,Da.jsx)("span",{className:"text-sm font-medium",children:"Good"})]}),(0,Da.jsxs)("button",{onClick:()=>V("bad"),className:"flex items-center gap-2 px-4 py-2 bg-red-500 hover:bg-red-600 text-white rounded-lg transition-colors",children:[(0,Da.jsx)("span",{className:"text-lg",children:"\ud83d\udc4e"}),(0,Da.jsx)("span",{className:"text-sm font-medium",children:"Bad"})]})]})]})}),(0,Da.jsx)("div",{className:"bg-white border-t border-gray-200 px-4 py-4",children:(0,Da.jsxs)("div",{className:"max-w-4xl mx-auto",children:[b&&(0,Da.jsxs)("div",{className:"mb-3 flex items-start gap-3 p-3 bg-gray-50 rounded-xl border border-gray-200",children:[(0,Da.jsx)("img",{src:b,alt:"Selected",className:"w-16 h-16 object-cover rounded-lg"}),(0,Da.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,Da.jsx)("p",{className:"text-sm font-medium text-gray-900 truncate",children:null===y||void 0===y?void 0:y.name}),(0,Da.jsxs)("p",{className:"text-xs text-gray-500",children:[y&&(y.size/1024).toFixed(1)," KB"]})]}),(0,Da.jsx)("button",{type:"button",onClick:B,className:"text-gray-400 hover:text-gray-600 p-1",children:(0,Da.jsx)(ss,{className:"w-5 h-5"})})]}),S&&!N&&(0,Da.jsxs)("div",{className:"mb-3 flex items-center gap-3 p-3 bg-blue-50 rounded-xl border border-blue-200",children:[(0,Da.jsx)("div",{className:"p-2 bg-blue-500 rounded-full",children:(0,Da.jsx)(Rs,{className:"w-5 h-5 text-white"})}),(0,Da.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,Da.jsx)("p",{className:"text-sm font-medium text-gray-900",children:"Voice Message"}),(0,Da.jsxs)("p",{className:"text-xs text-gray-500",children:[z(C)," \u2022 Ready to send"]})]}),(0,Da.jsx)("button",{type:"button",onClick:U,className:"text-gray-400 hover:text-gray-600 p-1",children:(0,Da.jsx)(ss,{className:"w-5 h-5"})})]}),(0,Da.jsxs)("form",{onSubmit:q,className:"flex items-end space-x-3",children:[(0,Da.jsx)("input",{ref:w,type:"file",accept:"image/jpeg,image/jpg,image/png,image/gif,image/webp",onChange:e=>{const t=e.target.files[0];if(!t)return;if(!["image/jpeg","image/jpg","image/png","image/gif","image/webp"].includes(t.type))return void alert("Please select a valid image file (JPEG, PNG, GIF, or WebP)");if(t.size>10485760)return void alert("Image size must be less than 10MB");v(t);const r=new FileReader;r.onload=e=>{j(e.target.result)},r.readAsDataURL(t)},className:"hidden"}),(0,Da.jsx)("input",{ref:M,type:"file",accept:"audio/*,.mp3,.wav,.webm,.ogg,.m4a,.flac",onChange:e=>{const t=e.target.files[0];if(!t)return;const r=t.name.substring(t.name.lastIndexOf(".")).toLowerCase();["audio/mpeg","audio/mp3","audio/wav","audio/webm","audio/ogg","audio/m4a","audio/mp4"].includes(t.type)||[".mp3",".wav",".webm",".ogg",".m4a",".mp4",".flac"].includes(r)?t.size>26214400?alert("Audio file must be less than 25MB"):_(t):alert("Please select a valid audio file (MP3, WAV, WebM, OGG, M4A, FLAC)")},className:"hidden"}),(0,Da.jsx)("button",{type:"button",onClick:()=>{var e;return null===(e=w.current)||void 0===e?void 0:e.click()},disabled:p||N,className:"flex-shrink-0 p-3 border border-gray-300 rounded-xl hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",title:"Upload image",children:(0,Da.jsx)(oo,{className:"w-5 h-5 text-gray-600"})}),!S&&(0,Da.jsx)("button",{type:"button",onClick:N?()=>{E.current&&N&&(E.current.stop(),k(!1),I.current&&(clearInterval(I.current),I.current=null))}:async()=>{try{const e=await navigator.mediaDevices.getUserMedia({audio:!0});E.current=new MediaRecorder(e,{mimeType:"audio/webm;codecs=opus"}),T.current=[],E.current.ondataavailable=e=>{e.data.size>0&&T.current.push(e.data)},E.current.onstop=()=>{const t=new Blob(T.current,{type:"audio/webm"});_(t),e.getTracks().forEach(e=>e.stop())},E.current.start(100),k(!0),A(0),I.current=setInterval(()=>{A(e=>e+1)},1e3)}catch(e){console.error("Failed to start recording:",e),alert("Could not access microphone. Please check permissions.")}},disabled:p,className:"flex-shrink-0 p-3 border rounded-xl transition-colors ".concat(N?"bg-red-500 border-red-500 text-white animate-pulse":"border-gray-300 hover:bg-gray-50 text-gray-600"," disabled:opacity-50 disabled:cursor-not-allowed"),title:N?"Stop recording":"Start voice recording",children:N?(0,Da.jsx)(Ds,{className:"w-5 h-5"}):(0,Da.jsx)(Rs,{className:"w-5 h-5"})}),N&&(0,Da.jsxs)("div",{className:"flex items-center gap-2 px-3 py-2 bg-red-50 border border-red-200 rounded-xl",children:[(0,Da.jsx)("span",{className:"w-2 h-2 bg-red-500 rounded-full animate-pulse"}),(0,Da.jsx)("span",{className:"text-sm text-red-600 font-medium",children:z(C)}),(0,Da.jsx)("button",{type:"button",onClick:()=>{E.current&&N&&E.current.stop(),k(!1),_(null),A(0),I.current&&(clearInterval(I.current),I.current=null)},className:"text-red-500 hover:text-red-700",children:(0,Da.jsx)(ss,{className:"w-4 h-4"})})]}),(0,Da.jsx)("div",{className:"flex-1",children:(0,Da.jsx)("textarea",{value:l,onChange:e=>c(e.target.value),onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),q(e))},placeholder:S?"Add a message or just send the audio...":N?"Recording...":y?"Add a message or just send the image...":"Type your message...",disabled:N,rows:"1",className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent resize-none disabled:bg-gray-100",style:{minHeight:"52px",maxHeight:"200px"}})}),(0,Da.jsx)("button",{type:"submit",disabled:!l.trim()&&!y&&!S||p||N,className:"flex-shrink-0 bg-primary-600 text-white rounded-xl px-4 py-3 hover:bg-primary-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:p?(0,Da.jsx)(Hs,{className:"w-5 h-5 animate-spin"}):(0,Da.jsx)(Ks,{className:"w-5 h-5"})})]}),(0,Da.jsx)("p",{className:"text-xs text-gray-500 text-center mt-2",children:y?"Press Enter to send with image":"Press Enter to send, Shift+Enter for new line"})]})})]})},po=Ha("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]),mo=Ha("PlayCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"10 8 16 12 10 16 10 8",key:"1cimsy"}]]),ho=()=>{var e;const{user:t}=Fa(),[r,n]=(0,a.useState)(""),[s,i]=(0,a.useState)("all"),o=[{id:"all",name:"All Topics",icon:Bs,color:"primary"},{id:"getting-started",name:"Getting Started",icon:po,color:"green"},{id:"agents",name:"AI Agents",icon:Ya,color:"purple"},{id:"knowledge",name:"Knowledge Base",icon:pi,color:"blue"},{id:"shopify",name:"Shopify",icon:Xs,color:"yellow"},{id:"chat",name:"Chat Integration",icon:rs,color:"pink"},{id:"voice",name:"Voice Calls",icon:Ja,color:"indigo"},{id:"users",name:"User Management",icon:ei,color:"cyan"},{id:"settings",name:"Settings",icon:ti,color:"gray"}],l=[{id:"intro",category:"getting-started",title:"Introduction to AIVA",description:"Learn about AIVA platform capabilities and features",content:"intro",icon:Bs,quickStart:!0},{id:"first-agent",category:"getting-started",title:"Create Your First AI Agent (5 min)",description:"Step-by-step guide to creating your first voice or chat agent",content:"first-agent",icon:Ws,quickStart:!0},{id:"dashboard-overview",category:"getting-started",title:"Dashboard Overview",description:"Understanding the dashboard and navigation",content:"dashboard",icon:po},{id:"user-roles",category:"getting-started",title:"User Roles & Permissions",description:"Understanding different user roles and their capabilities",content:"roles",icon:ei},{id:"agent-basics",category:"agents",title:"Understanding AI Agents",description:"What are AI agents and how do they work?",content:"agent-basics",icon:Ya},{id:"create-agent",category:"agents",title:"Creating & Configuring Agents",description:"Complete guide to agent creation and settings",content:"create-agent",icon:Ya,video:!0},{id:"agent-voice",category:"agents",title:"Voice Settings & Configuration",description:"Configure voice, speed, and tone for voice agents",content:"agent-voice",icon:Ja},{id:"agent-testing",category:"agents",title:"Testing Your Agents",description:"How to test voice and chat agents",content:"agent-testing",icon:mo},{id:"conversation-strategy",category:"agents",title:"Conversation Strategy",description:"Turn detection, interruptions, and conversation flow",content:"conversation-strategy",icon:rs},{id:"kb-overview",category:"knowledge",title:"Knowledge Base Overview",description:"What is a knowledge base and how to use it",content:"kb-overview",icon:pi},{id:"upload-documents",category:"knowledge",title:"Uploading Documents",description:"Upload PDFs, Word docs, presentations, and more",content:"upload-documents",icon:cs,quickStart:!0},{id:"web-scraping",category:"knowledge",title:"Web Scraping Guide",description:"Scrape websites and import content",content:"web-scraping",icon:pi},{id:"image-management",category:"knowledge",title:"Image Upload & Search",description:"Managing images and visual search",content:"image-management",icon:pi},{id:"kb-search",category:"knowledge",title:"Testing Knowledge Search",description:"How to test and optimize search results",content:"kb-search",icon:ui},{id:"semantic-cache",category:"knowledge",title:"Semantic Cache Management",description:"Understanding and managing semantic cache",content:"semantic-cache",icon:Ws},{id:"shopify-overview",category:"shopify",title:"Shopify Integration Overview",description:"Connect your Shopify store to AIVA",content:"shopify-overview",icon:Xs},{id:"connect-shopify",category:"shopify",title:"Connecting Your Shopify Store",description:"Step-by-step guide to connect Shopify",content:"connect-shopify",icon:Xs,quickStart:!0,video:!0},{id:"product-sync",category:"shopify",title:"Product Synchronization",description:"Auto-sync and manual sync explained",content:"product-sync",icon:Xs},{id:"product-recommendations",category:"shopify",title:"AI Product Recommendations",description:"How AI recommends products to customers",content:"product-recommendations",icon:Xs},{id:"chat-overview",category:"chat",title:"Chat Integration Overview",description:"Widget vs standalone chat page",content:"chat-overview",icon:rs},{id:"chat-widget",category:"chat",title:"Installing Chat Widget",description:"Add chat widget to your website",content:"chat-widget",icon:rs,quickStart:!0,video:!0},{id:"chat-page",category:"chat",title:"Standalone Chat Page",description:"Create a public chat page",content:"chat-page",icon:rs},{id:"chat-customization",category:"chat",title:"Customizing Chat Interface",description:"Colors, branding, and styling",content:"chat-customization",icon:ti},{id:"voice-overview",category:"voice",title:"Voice Calls Overview",description:"How voice integration works",content:"voice-overview",icon:Ja},{id:"test-call",category:"voice",title:"Making Test Calls",description:"Test your voice agents",content:"test-call",icon:Ja},{id:"call-monitoring",category:"voice",title:"Call Monitoring & Logs",description:"Monitor active calls and view history",content:"call-monitoring",icon:Ja},{id:"create-users",category:"users",title:"Creating & Managing Users",description:"Add team members and assign roles",content:"create-users",icon:ei,roles:["super_admin","admin"]},{id:"user-permissions",category:"users",title:"User Permissions",description:"Understanding permission levels",content:"user-permissions",icon:ei,roles:["super_admin","admin"]},{id:"account-settings",category:"settings",title:"Account Settings",description:"Manage your profile and preferences",content:"account-settings",icon:ti},{id:"api-keys",category:"settings",title:"API Keys Management",description:"Generate and manage API keys",content:"api-keys",icon:ti,roles:["super_admin","admin"]},{id:"credits-billing",category:"settings",title:"Credits & Billing",description:"Manage credits and track usage",content:"credits-billing",icon:ti,roles:["super_admin","admin"]}],c=(0,a.useMemo)(()=>{let e=l;if(t&&(e=e.filter(e=>!e.roles||e.roles.includes(t.role))),"all"!==s&&(e=e.filter(e=>e.category===s)),r){const t=r.toLowerCase();e=e.filter(e=>e.title.toLowerCase().includes(t)||e.description.toLowerCase().includes(t))}return e},[l,s,r,t]),d=l.filter(e=>e.quickStart);return(0,Da.jsxs)("div",{className:"space-y-6",children:[(0,Da.jsxs)("div",{className:"bg-gradient-to-r from-primary-600 to-primary-700 rounded-lg shadow-lg p-8 text-white",children:[(0,Da.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Da.jsxs)("div",{children:[(0,Da.jsx)("h1",{className:"text-3xl font-bold mb-2",children:"Help Center"}),(0,Da.jsx)("p",{className:"text-primary-100",children:"Everything you need to know about AIVA"})]}),(0,Da.jsx)(Bs,{className:"w-16 h-16 text-primary-200"})]}),(0,Da.jsx)("div",{className:"mt-6",children:(0,Da.jsxs)("div",{className:"relative",children:[(0,Da.jsx)(ui,{className:"absolute left-4 top-3.5 h-5 w-5 text-gray-400"}),(0,Da.jsx)("input",{type:"text",value:r,onChange:e=>n(e.target.value),placeholder:"Search for help articles...",className:"w-full pl-12 pr-4 py-3 rounded-lg bg-white text-gray-900 placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-white"})]})})]}),!r&&"all"===s&&(0,Da.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,Da.jsxs)("div",{className:"flex items-center mb-4",children:[(0,Da.jsx)(Ws,{className:"w-6 h-6 text-yellow-500 mr-2"}),(0,Da.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Quick Start Guides"})]}),(0,Da.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:d.map(e=>(0,Da.jsx)(Ie,{to:"/help/".concat(e.id),className:"p-4 border-2 border-primary-200 rounded-lg hover:border-primary-500 hover:bg-primary-50 transition-colors",children:(0,Da.jsxs)("div",{className:"flex items-start",children:[(0,Da.jsx)(e.icon,{className:"w-6 h-6 text-primary-600 mr-3 flex-shrink-0 mt-0.5"}),(0,Da.jsxs)("div",{children:[(0,Da.jsx)("h3",{className:"font-medium text-gray-900 mb-1",children:e.title}),(0,Da.jsx)("p",{className:"text-sm text-gray-600",children:e.description}),e.video&&(0,Da.jsxs)("span",{className:"inline-flex items-center mt-2 text-xs text-primary-600",children:[(0,Da.jsx)(mo,{className:"w-3 h-3 mr-1"}),"Video available"]})]})]})},e.id))})]}),(0,Da.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,Da.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Browse by Category"}),(0,Da.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-3",children:o.map(e=>(0,Da.jsxs)("button",{onClick:()=>i(e.id),className:"p-4 rounded-lg border-2 transition-all ".concat(s===e.id?"border-".concat(e.color,"-500 bg-").concat(e.color,"-50"):"border-gray-200 hover:border-gray-300"),children:[(0,Da.jsx)(e.icon,{className:"w-6 h-6 mx-auto mb-2 ".concat(s===e.id?"text-".concat(e.color,"-600"):"text-gray-400")}),(0,Da.jsx)("div",{className:"text-sm font-medium text-gray-900 text-center",children:e.name})]},e.id))})]}),(0,Da.jsxs)("div",{className:"bg-white rounded-lg shadow",children:[(0,Da.jsx)("div",{className:"p-6 border-b",children:(0,Da.jsxs)("h2",{className:"text-lg font-semibold text-gray-900",children:["all"===s?"All Articles":null===(e=o.find(e=>e.id===s))||void 0===e?void 0:e.name,(0,Da.jsxs)("span",{className:"ml-2 text-sm font-normal text-gray-500",children:["(",c.length," articles)"]})]})}),0===c.length?(0,Da.jsxs)("div",{className:"p-12 text-center",children:[(0,Da.jsx)(si,{className:"w-12 h-12 text-gray-400 mx-auto mb-3"}),(0,Da.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-1",children:"No articles found"}),(0,Da.jsx)("p",{className:"text-gray-500",children:"Try adjusting your search or browse different categories"})]}):(0,Da.jsx)("div",{className:"divide-y divide-gray-200",children:c.map(e=>(0,Da.jsx)(Ie,{to:"/help/".concat(e.id),className:"block p-6 hover:bg-gray-50 transition-colors",children:(0,Da.jsxs)("div",{className:"flex items-start justify-between",children:[(0,Da.jsxs)("div",{className:"flex items-start flex-1",children:[(0,Da.jsx)(e.icon,{className:"w-6 h-6 text-primary-600 mr-4 flex-shrink-0 mt-0.5"}),(0,Da.jsxs)("div",{className:"flex-1",children:[(0,Da.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-1",children:e.title}),(0,Da.jsx)("p",{className:"text-gray-600",children:e.description}),(0,Da.jsxs)("div",{className:"flex items-center mt-2 space-x-3",children:[e.quickStart&&(0,Da.jsxs)("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-yellow-100 text-yellow-800",children:[(0,Da.jsx)(Ws,{className:"w-3 h-3 mr-1"}),"Quick Start"]}),e.video&&(0,Da.jsxs)("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-purple-100 text-purple-800",children:[(0,Da.jsx)(mo,{className:"w-3 h-3 mr-1"}),"Video"]})]})]})]}),(0,Da.jsx)(ii,{className:"w-5 h-5 text-gray-400 flex-shrink-0 ml-4"})]})},e.id))})]}),(0,Da.jsx)("div",{className:"bg-gray-50 rounded-lg p-6",children:(0,Da.jsxs)("div",{className:"flex items-start",children:[(0,Da.jsx)(si,{className:"w-6 h-6 text-primary-600 mr-3 flex-shrink-0 mt-0.5"}),(0,Da.jsxs)("div",{children:[(0,Da.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-1",children:"Still need help?"}),(0,Da.jsx)("p",{className:"text-gray-600 mb-3",children:"Can't find what you're looking for? Our support team is here to help."}),(0,Da.jsx)("a",{href:"mailto:support@contegris.com",className:"inline-flex items-center px-4 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700 transition-colors",children:"Contact Support"})]})]})})]})},fo={intro:{title:"Introduction to AIVA",description:"Learn about AIVA platform capabilities and features",category:"Getting Started",readTime:"5 min read",difficulty:"Beginner",sections:[{title:"What is AIVA?",content:"\n          <p>AIVA (AI Voice & Chat Agent) is a comprehensive AI platform that enables businesses to create intelligent voice and chat agents powered by OpenAI's advanced language models.</p>\n          <p>With AIVA, you can:</p>\n          <ul>\n            <li><strong>Create AI voice agents</strong> that can handle phone calls naturally and efficiently</li>\n            <li><strong>Deploy chat widgets</strong> on your website for instant customer support</li>\n            <li><strong>Build knowledge bases</strong> from your documents, websites, and content</li>\n            <li><strong>Integrate with Shopify</strong> for intelligent product recommendations</li>\n            <li><strong>Monitor and analyze</strong> all interactions in real-time</li>\n          </ul>\n        "},{title:"Key Features",content:"\n          <h4>\ud83c\udf99\ufe0f Voice AI Agents</h4>\n          <p>Create intelligent voice agents that can answer calls, provide information, and interact naturally with customers using OpenAI's Realtime API. Agents can:</p>\n          <ul>\n            <li>Handle incoming phone calls automatically</li>\n            <li>Search your knowledge base for answers</li>\n            <li>Recommend products from your Shopify store</li>\n            <li>Transfer calls to human agents when needed</li>\n          </ul>\n          \n          <h4>\ud83d\udcac Chat Integration</h4>\n          <p>Add AI-powered chat to your website with:</p>\n          <ul>\n            <li>Embeddable chat widgets that match your brand</li>\n            <li>Standalone chat pages for dedicated support</li>\n            <li>Rich content display (images, products, sources)</li>\n            <li>Session persistence and conversation history</li>\n          </ul>\n          \n          <h4>\ud83d\udcda Knowledge Management</h4>\n          <p>Upload documents, scrape websites, and build a searchable knowledge base:</p>\n          <ul>\n            <li>Support for PDFs, Word, PowerPoint, Excel, and more</li>\n            <li>Automatic image extraction from documents</li>\n            <li>Web scraping for entire websites</li>\n            <li>Semantic search with caching for cost optimization</li>\n          </ul>\n          \n          <h4>\ud83d\udecd\ufe0f Shopify Integration</h4>\n          <p>Connect your Shopify store and let AI:</p>\n          <ul>\n            <li>Automatically sync products and images</li>\n            <li>Recommend products based on customer needs</li>\n            <li>Answer questions about pricing and availability</li>\n            <li>Include product reviews in recommendations</li>\n          </ul>\n        "},{title:"Who is AIVA For?",content:"\n          <h4>\ud83d\uded2 E-commerce Businesses</h4>\n          <p>Provide instant product recommendations, answer customer questions 24/7, and increase conversions with AI-powered shopping assistants.</p>\n          \n          <h4>\ud83c\udfe2 Service Companies</h4>\n          <p>Answer common questions, schedule appointments, provide quotes, and handle customer inquiries without human intervention.</p>\n          \n          <h4>\ud83d\udcac Support Teams</h4>\n          <p>Scale customer support with AI agents that can handle routine queries, search documentation, and escalate complex issues to humans.</p>\n          \n          <h4>\ud83d\udcc8 Sales Teams</h4>\n          <p>Qualify leads automatically, provide instant information, schedule demos, and capture customer requirements before human follow-up.</p>\n          \n          <h4>\ud83d\udcde Call Centers</h4>\n          <p>Reduce call volume by handling routine inquiries, provide after-hours support, and improve response times for customers.</p>\n        "},{title:"Platform Architecture",content:"\n          <p>AIVA consists of several integrated components:</p>\n          <ul>\n            <li><strong>Dashboard:</strong> Web-based management interface for configuration</li>\n            <li><strong>Voice Bridge:</strong> Connects Asterisk PBX to OpenAI Realtime API</li>\n            <li><strong>Knowledge Engine:</strong> Processes documents and enables semantic search</li>\n            <li><strong>Chat System:</strong> Handles web-based chat interactions</li>\n            <li><strong>Integration Layer:</strong> Connects to Shopify and other platforms</li>\n          </ul>\n        "}],nextSteps:[{text:"Create Your First Agent",link:"/help/first-agent"},{text:"Upload Documents to Knowledge Base",link:"/help/upload-documents"},{text:"Understand User Roles",link:"/help/user-roles"}],relatedArticles:["first-agent","dashboard-overview","user-roles"]},"first-agent":{title:"Create Your First AI Agent (5 minutes)",description:"Step-by-step guide to creating your first voice or chat agent",category:"Getting Started",readTime:"5 min read",difficulty:"Beginner",sections:[{title:"Getting Started",content:"\n          <p>Creating your first AI agent is quick and easy. Follow these steps to have your agent up and running in just 5 minutes!</p>\n        ",steps:[{title:"Navigate to Agents Page",description:'Click on "Agents" in the sidebar menu, then click the "Create Agent" button in the top right.'},{title:"Enter Basic Information",description:'Give your agent a name (e.g., "Customer Support Bot"), select the type (Voice or Chat), and add a greeting message that users will see or hear first.'},{title:"Configure Agent Settings",description:"Choose a voice for voice agents (Alloy, Echo, Shimmer, etc.), select the AI model (GPT-4 recommended), and write clear instructions for your agent's behavior and personality."},{title:"Enable Tools (Optional)",description:'Toggle on "Knowledge Base Search" if you want your agent to access uploaded documents. Enable "Product Search" if you have a connected Shopify store.'},{title:"Save and Test",description:'Click "Save Agent" and then use the "Test Call" button (for voice agents) or "Test Chat" button (for chat agents) to try out your new agent!'}],tips:'Start with simple instructions like "You are a helpful customer service agent. Be friendly and concise." You can always add more complexity later as you learn how the agent responds.'},{title:"Agent Configuration Explained",content:'\n          <h4>Name</h4>\n          <p>Choose a descriptive name that indicates the agent\'s purpose:</p>\n          <ul>\n            <li>"Customer Support Bot" - For general support</li>\n            <li>"Product Advisor" - For product recommendations</li>\n            <li>"Appointment Scheduler" - For booking appointments</li>\n            <li>"Lead Qualifier" - For sales inquiries</li>\n          </ul>\n          \n          <h4>Type</h4>\n          <p><strong>Voice:</strong> Handles phone calls using speech-to-text and text-to-speech. Perfect for call centers and phone-based support.</p>\n          <p><strong>Chat:</strong> Text-based conversations for website chat widgets. Ideal for web-based customer support.</p>\n          \n          <h4>Greeting Message</h4>\n          <p>The first message users will see or hear. Make it welcoming and set expectations:</p>\n          <ul>\n            <li>"Hello! I\'m here to help you find the perfect product. What are you looking for today?"</li>\n            <li>"Hi! I\'m your virtual assistant. I can answer questions about our services, pricing, and features."</li>\n            <li>"Welcome! I can help you schedule an appointment or answer questions about our hours and services."</li>\n          </ul>\n          \n          <h4>Instructions (System Prompt)</h4>\n          <p>This is the most important part - it tells the AI how to behave. Be specific about:</p>\n          <ul>\n            <li><strong>Role:</strong> "You are a friendly customer support agent for [Company Name]"</li>\n            <li><strong>Capabilities:</strong> What the agent can and cannot do</li>\n            <li><strong>Tone:</strong> Professional, friendly, casual, formal, etc.</li>\n            <li><strong>Boundaries:</strong> What topics to avoid or escalate</li>\n            <li><strong>Response Style:</strong> Concise vs detailed, use of examples, etc.</li>\n          </ul>\n        ',code:"You are a friendly customer support agent for Acme Corporation.\n\nYour role is to:\n- Answer questions about our products and services\n- Help customers find what they're looking for\n- Provide accurate information from the knowledge base\n- Transfer to a human agent for complex billing or technical issues\n\nGuidelines:\n- Keep responses concise (2-3 sentences when possible)\n- Always be helpful, patient, and professional\n- If you don't know something, say so and offer to connect them with someone who can help\n- Never make up information or pricing\n- Use the knowledge base to find accurate answers\n\nTopics to avoid:\n- Making promises about delivery dates\n- Providing medical or legal advice\n- Discussing competitors\n- Sharing confidential company information"}],nextSteps:[{text:"Test Your Agent",link:"/help/agent-testing"},{text:"Add Knowledge Base",link:"/help/kb-overview"},{text:"Configure Voice Settings",link:"/help/agent-voice"}],relatedArticles:["agent-basics","agent-testing","create-agent"]},"dashboard-overview":{title:"Dashboard Overview",description:"Understanding the dashboard and navigation",category:"Getting Started",readTime:"4 min read",difficulty:"Beginner",sections:[{title:"Main Dashboard",content:"\n          <p>The dashboard is your command center in AIVA. It provides a quick overview of your platform usage and activity.</p>\n          <h4>Key Metrics Displayed:</h4>\n          <ul>\n            <li><strong>Total Agents:</strong> Number of active agents in your account</li>\n            <li><strong>Total Calls:</strong> Number of voice calls handled</li>\n            <li><strong>Knowledge Bases:</strong> Number of knowledge bases created</li>\n            <li><strong>Credit Balance:</strong> Remaining API credits</li>\n          </ul>\n          <h4>Quick Actions:</h4>\n          <ul>\n            <li><strong>Create New Agent:</strong> Jump directly to agent creation</li>\n            <li><strong>Manage Credits:</strong> Add or view credit usage</li>\n            <li><strong>View Call Logs:</strong> See recent call activity</li>\n          </ul>\n        "},{title:"Navigation Menu",content:"\n          <p>The sidebar menu provides access to all AIVA features:</p>\n          <ul>\n            <li><strong>Dashboard:</strong> Overview and statistics</li>\n            <li><strong>Agents:</strong> Create and manage AI agents</li>\n            <li><strong>Knowledge Base:</strong> Upload documents and manage content</li>\n            <li><strong>Shopify:</strong> Connect stores and manage products</li>\n            <li><strong>Live Monitor:</strong> Watch active calls in real-time</li>\n            <li><strong>Credits:</strong> Manage API credits and billing (Admin only)</li>\n            <li><strong>Calls:</strong> View call logs and history</li>\n            <li><strong>Users:</strong> Manage team members (Admin only)</li>\n            <li><strong>Test Call:</strong> Test voice agents</li>\n            <li><strong>Test Chat:</strong> Test chat agents</li>\n            <li><strong>Help:</strong> Access this help center</li>\n          </ul>\n        "},{title:"User Profile",content:"\n          <p>Your profile information is displayed in the sidebar showing:</p>\n          <ul>\n            <li>Your name and email</li>\n            <li>Your role (Super Admin, Admin, Agent Manager, or Client)</li>\n            <li>Organization/Tenant name</li>\n          </ul>\n          <p>Click the logout button to sign out of your account.</p>\n        "}],nextSteps:[{text:"Understand User Roles",link:"/help/user-roles"},{text:"Create Your First Agent",link:"/help/first-agent"}],relatedArticles:["user-roles","intro"]},"user-roles":{title:"User Roles & Permissions",description:"Understanding different user roles and their capabilities",category:"Getting Started",readTime:"6 min read",difficulty:"Beginner",sections:[{title:"Overview",content:"\n          <p>AIVA uses a role-based access control system to manage what users can see and do. Each user is assigned one of four roles, each with different permissions.</p>\n        "},{title:"Super Admin",content:"\n          <h4>Highest Level Access</h4>\n          <p>Super Admins have complete control over the entire AIVA platform.</p>\n          <h4>Capabilities:</h4>\n          <ul>\n            <li>\u2705 Manage all tenants and organizations</li>\n            <li>\u2705 Create and delete organizations</li>\n            <li>\u2705 View all data across all tenants</li>\n            <li>\u2705 Manage system-wide settings</li>\n            <li>\u2705 All Admin, Agent Manager, and Client capabilities</li>\n          </ul>\n          <h4>Use Case:</h4>\n          <p>Platform administrators and owners</p>\n        "},{title:"Admin",content:"\n          <h4>Organization-Level Access</h4>\n          <p>Admins have full control within their organization/tenant.</p>\n          <h4>Capabilities:</h4>\n          <ul>\n            <li>\u2705 Create, edit, and delete agents</li>\n            <li>\u2705 Manage knowledge bases and documents</li>\n            <li>\u2705 Connect and manage Shopify stores</li>\n            <li>\u2705 Create and manage users in their organization</li>\n            <li>\u2705 Manage credits and billing</li>\n            <li>\u2705 View all call logs and analytics</li>\n            <li>\u2705 Configure chat integration</li>\n            <li>\u2705 Generate and manage API keys</li>\n          </ul>\n          <h4>Use Case:</h4>\n          <p>Business owners, managers, team leads</p>\n        "},{title:"Agent Manager",content:"\n          <h4>Agent & Content Management</h4>\n          <p>Agent Managers can create and configure agents and manage knowledge.</p>\n          <h4>Capabilities:</h4>\n          <ul>\n            <li>\u2705 Create, edit, and delete agents</li>\n            <li>\u2705 Upload documents to knowledge bases</li>\n            <li>\u2705 Test agents (voice and chat)</li>\n            <li>\u2705 View call logs for their agents</li>\n            <li>\u2705 Configure agent settings</li>\n            <li>\u2705 Monitor live calls</li>\n            <li>\u274c Cannot manage users</li>\n            <li>\u274c Cannot manage credits/billing</li>\n            <li>\u274c Cannot connect Shopify stores</li>\n          </ul>\n          <h4>Use Case:</h4>\n          <p>Content managers, support team leads, agent trainers</p>\n        "},{title:"Client",content:"\n          <h4>Read-Only Access</h4>\n          <p>Clients have limited access to view information only.</p>\n          <h4>Capabilities:</h4>\n          <ul>\n            <li>\u2705 View agents (cannot edit)</li>\n            <li>\u2705 View knowledge bases (cannot upload)</li>\n            <li>\u2705 View call logs</li>\n            <li>\u2705 Access help documentation</li>\n            <li>\u274c Cannot create or edit anything</li>\n            <li>\u274c Cannot manage users</li>\n            <li>\u274c Cannot access billing</li>\n            <li>\u274c Cannot test agents</li>\n          </ul>\n          <h4>Use Case:</h4>\n          <p>Stakeholders, viewers, auditors, read-only access needs</p>\n        "},{title:"Permission Matrix",content:'\n          <table style="width:100%; border-collapse: collapse;">\n            <thead>\n              <tr style="background:#f3f4f6;">\n                <th style="border:1px solid #ddd; padding:8px; text-align:left;">Feature</th>\n                <th style="border:1px solid #ddd; padding:8px;">Super Admin</th>\n                <th style="border:1px solid #ddd; padding:8px;">Admin</th>\n                <th style="border:1px solid #ddd; padding:8px;">Agent Manager</th>\n                <th style="border:1px solid #ddd; padding:8px;">Client</th>\n              </tr>\n            </thead>\n            <tbody>\n              <tr>\n                <td style="border:1px solid #ddd; padding:8px;">Manage Agents</td>\n                <td style="border:1px solid #ddd; padding:8px; text-align:center;">\u2705</td>\n                <td style="border:1px solid #ddd; padding:8px; text-align:center;">\u2705</td>\n                <td style="border:1px solid #ddd; padding:8px; text-align:center;">\u2705</td>\n                <td style="border:1px solid #ddd; padding:8px; text-align:center;">\ud83d\udc41\ufe0f View Only</td>\n              </tr>\n              <tr>\n                <td style="border:1px solid #ddd; padding:8px;">Knowledge Base</td>\n                <td style="border:1px solid #ddd; padding:8px; text-align:center;">\u2705</td>\n                <td style="border:1px solid #ddd; padding:8px; text-align:center;">\u2705</td>\n                <td style="border:1px solid #ddd; padding:8px; text-align:center;">\u2705</td>\n                <td style="border:1px solid #ddd; padding:8px; text-align:center;">\ud83d\udc41\ufe0f View Only</td>\n              </tr>\n              <tr>\n                <td style="border:1px solid #ddd; padding:8px;">Shopify Integration</td>\n                <td style="border:1px solid #ddd; padding:8px; text-align:center;">\u2705</td>\n                <td style="border:1px solid #ddd; padding:8px; text-align:center;">\u2705</td>\n                <td style="border:1px solid #ddd; padding:8px; text-align:center;">\u274c</td>\n                <td style="border:1px solid #ddd; padding:8px; text-align:center;">\u274c</td>\n              </tr>\n              <tr>\n                <td style="border:1px solid #ddd; padding:8px;">User Management</td>\n                <td style="border:1px solid #ddd; padding:8px; text-align:center;">\u2705</td>\n                <td style="border:1px solid #ddd; padding:8px; text-align:center;">\u2705</td>\n                <td style="border:1px solid #ddd; padding:8px; text-align:center;">\u274c</td>\n                <td style="border:1px solid #ddd; padding:8px; text-align:center;">\u274c</td>\n              </tr>\n              <tr>\n                <td style="border:1px solid #ddd; padding:8px;">Credits & Billing</td>\n                <td style="border:1px solid #ddd; padding:8px; text-align:center;">\u2705</td>\n                <td style="border:1px solid #ddd; padding:8px; text-align:center;">\u2705</td>\n                <td style="border:1px solid #ddd; padding:8px; text-align:center;">\u274c</td>\n                <td style="border:1px solid #ddd; padding:8px; text-align:center;">\u274c</td>\n              </tr>\n              <tr>\n                <td style="border:1px solid #ddd; padding:8px;">Test Agents</td>\n                <td style="border:1px solid #ddd; padding:8px; text-align:center;">\u2705</td>\n                <td style="border:1px solid #ddd; padding:8px; text-align:center;">\u2705</td>\n                <td style="border:1px solid #ddd; padding:8px; text-align:center;">\u2705</td>\n                <td style="border:1px solid #ddd; padding:8px; text-align:center;">\u274c</td>\n              </tr>\n              <tr>\n                <td style="border:1px solid #ddd; padding:8px;">View Call Logs</td>\n                <td style="border:1px solid #ddd; padding:8px; text-align:center;">\u2705</td>\n                <td style="border:1px solid #ddd; padding:8px; text-align:center;">\u2705</td>\n                <td style="border:1px solid #ddd; padding:8px; text-align:center;">\u2705</td>\n                <td style="border:1px solid #ddd; padding:8px; text-align:center;">\u2705</td>\n              </tr>\n            </tbody>\n          </table>\n        '}],nextSteps:[{text:"Create Users (Admin)",link:"/help/create-users"},{text:"Understand Permissions",link:"/help/user-permissions"}],relatedArticles:["create-users","user-permissions"]},"agent-basics":{title:"Understanding AI Agents",description:"What are AI agents and how do they work in AIVA?",category:"AI Agents",readTime:"7 min read",difficulty:"Beginner",sections:[{title:"What is an AI Agent?",content:"\n          <p>An AI Agent in AIVA is an intelligent virtual assistant powered by OpenAI's advanced language models (like GPT-4). It can understand natural language, access information from knowledge bases, and respond to users in a helpful, context-aware manner.</p>\n          <h4>Think of an AI Agent as:</h4>\n          <ul>\n            <li>A knowledgeable employee who can answer questions instantly</li>\n            <li>A personal assistant that never sleeps</li>\n            <li>A search engine that understands conversational language</li>\n            <li>A customer service representative with perfect memory</li>\n          </ul>\n        "},{title:"Types of Agents",content:"\n          <h4>Voice Agents</h4>\n          <p><strong>Purpose:</strong> Handle phone calls using natural speech</p>\n          <p><strong>Technology:</strong> Speech-to-Text \u2192 AI Processing \u2192 Text-to-Speech</p>\n          <p><strong>Use Cases:</strong></p>\n          <ul>\n            <li>Customer support hotlines</li>\n            <li>Appointment scheduling</li>\n            <li>Order status inquiries</li>\n            <li>Product information requests</li>\n            <li>Lead qualification</li>\n          </ul>\n          \n          <h4>Chat Agents</h4>\n          <p><strong>Purpose:</strong> Handle text-based conversations on websites</p>\n          <p><strong>Technology:</strong> Direct text processing and response generation</p>\n          <p><strong>Use Cases:</strong></p>\n          <ul>\n            <li>Website live chat</li>\n            <li>Customer support widget</li>\n            <li>Product recommendations</li>\n            <li>FAQ answering</li>\n            <li>Shopping assistance</li>\n          </ul>\n        "},{title:"How Agents Work",content:"\n          <p>When a user interacts with an agent, here's what happens:</p>\n          <ol>\n            <li><strong>Input Reception:</strong> Agent receives user's question (text or voice)</li>\n            <li><strong>Context Building:</strong> Agent considers:\n              <ul>\n                <li>Conversation history</li>\n                <li>System instructions (your configuration)</li>\n                <li>Available tools (knowledge base, product search)</li>\n              </ul>\n            </li>\n            <li><strong>Tool Usage (if needed):</strong>\n              <ul>\n                <li>Search knowledge base for relevant information</li>\n                <li>Look up products in Shopify</li>\n                <li>Execute custom functions</li>\n              </ul>\n            </li>\n            <li><strong>Response Generation:</strong> AI formulates natural, helpful response</li>\n            <li><strong>Output Delivery:</strong> Response sent to user (text or speech)</li>\n          </ol>\n        "},{title:"Agent Capabilities",content:"\n          <h4>What Agents CAN Do:</h4>\n          <ul>\n            <li>\u2705 Answer questions based on knowledge bases</li>\n            <li>\u2705 Recommend products from Shopify</li>\n            <li>\u2705 Maintain context throughout conversation</li>\n            <li>\u2705 Handle multiple topics in one conversation</li>\n            <li>\u2705 Adapt tone and style based on instructions</li>\n            <li>\u2705 Recognize when to escalate to humans</li>\n            <li>\u2705 Provide structured information (lists, comparisons)</li>\n            <li>\u2705 Remember user preferences within a session</li>\n          </ul>\n          \n          <h4>What Agents CANNOT Do:</h4>\n          <ul>\n            <li>\u274c Access real-time external data (unless via functions)</li>\n            <li>\u274c Remember conversations across sessions (without custom setup)</li>\n            <li>\u274c Make actual purchases or transactions</li>\n            <li>\u274c Access private customer data automatically</li>\n            <li>\u274c Send emails or notifications directly</li>\n          </ul>\n        "},{title:"Best Practices",content:"\n          <h4>For Effective Agents:</h4>\n          <ul>\n            <li><strong>Clear Instructions:</strong> Be specific about the agent's role and boundaries</li>\n            <li><strong>Good Knowledge Base:</strong> Upload comprehensive, well-organized documents</li>\n            <li><strong>Test Thoroughly:</strong> Try various scenarios before deploying</li>\n            <li><strong>Monitor Performance:</strong> Review call logs and chat transcripts</li>\n            <li><strong>Iterate:</strong> Continuously improve based on real usage</li>\n            <li><strong>Set Expectations:</strong> Let users know they're talking to AI</li>\n            <li><strong>Provide Escalation:</strong> Always offer a way to reach humans</li>\n          </ul>\n        "}],nextSteps:[{text:"Create Your First Agent",link:"/help/first-agent"},{text:"Configure Agent Settings",link:"/help/create-agent"},{text:"Test Your Agent",link:"/help/agent-testing"}],relatedArticles:["first-agent","create-agent","agent-testing"]},"create-agent":{title:"Creating & Configuring Agents",description:"Complete guide to agent creation and advanced settings",category:"AI Agents",readTime:"12 min read",difficulty:"Intermediate",sections:[{title:"Basic Configuration",content:"\n          <p>Start by configuring the essential settings for your agent.</p>\n        ",steps:[{title:"Agent Name",description:'Choose a descriptive name (e.g., "Customer Support Agent", "Sales Bot", "Appointment Scheduler"). This is for your internal reference only.'},{title:"Agent Type",description:'Select "Voice" for phone calls or "Chat" for text-based conversations. This cannot be changed later.'},{title:"Greeting Message",description:"Write the first message users will hear or see. Keep it friendly and set clear expectations about what the agent can help with."},{title:"System Instructions",description:"Write detailed instructions about the agent's role, personality, capabilities, and limitations. This is the most important configuration!"}]},{title:"Writing Effective Instructions",content:'\n          <p>System instructions (also called the "system prompt") tell the AI how to behave. Follow this template:</p>\n        ',code:'# Role Definition\nYou are [role description] for [company name].\n\n# Primary Responsibilities\nYour main tasks are to:\n- [Responsibility 1]\n- [Responsibility 2]\n- [Responsibility 3]\n\n# Communication Style\n- [Style guideline 1 - e.g., "Be friendly and conversational"]\n- [Style guideline 2 - e.g., "Keep responses under 3 sentences"]\n- [Style guideline 3 - e.g., "Use simple, jargon-free language"]\n\n# Knowledge Sources\nYou have access to:\n- [Source 1 - e.g., "Product catalog"]\n- [Source 2 - e.g., "Company knowledge base"]\n- [Source 3 - e.g., "FAQ documents"]\n\n# Boundaries\nYou should NOT:\n- [Boundary 1 - e.g., "Make promises about delivery dates"]\n- [Boundary 2 - e.g., "Provide medical advice"]\n- [Boundary 3 - e.g., "Discuss competitors"]\n\n# Escalation\nTransfer to a human agent when:\n- [Scenario 1 - e.g., "Customer is frustrated"]\n- [Scenario 2 - e.g., "Question requires manager approval"]\n- [Scenario 3 - e.g., "Technical issue beyond your knowledge"]\n\n# Special Instructions\n- [Any specific rules for your use case]',tips:"Be as specific as possible. The more detailed your instructions, the more consistently your agent will behave the way you want."},{title:"Model Selection",content:"\n          <h4>Available Models:</h4>\n          <p><strong>GPT-4 (Recommended):</strong></p>\n          <ul>\n            <li>Most capable and intelligent</li>\n            <li>Best understanding of complex instructions</li>\n            <li>Most accurate responses</li>\n            <li>Higher cost per interaction</li>\n            <li><strong>Use for:</strong> Customer-facing agents, complex scenarios</li>\n          </ul>\n          \n          <p><strong>GPT-3.5 Turbo:</strong></p>\n          <ul>\n            <li>Fast and efficient</li>\n            <li>Good for straightforward tasks</li>\n            <li>Lower cost per interaction</li>\n            <li>May struggle with complex instructions</li>\n            <li><strong>Use for:</strong> Simple FAQ bots, internal tools, high-volume use cases</li>\n          </ul>\n        "},{title:"Temperature & Max Tokens",content:"\n          <h4>Temperature (0.0 - 1.0)</h4>\n          <p>Controls randomness and creativity in responses:</p>\n          <ul>\n            <li><strong>0.0-0.3:</strong> Very consistent, focused responses. Best for factual Q&A.</li>\n            <li><strong>0.4-0.7:</strong> Balanced (recommended for most use cases)</li>\n            <li><strong>0.8-1.0:</strong> Creative, varied responses. Use for conversational agents.</li>\n          </ul>\n          <p><strong>Recommended:</strong> Start with 0.7 and adjust based on results.</p>\n          \n          <h4>Max Tokens</h4>\n          <p>Limits response length:</p>\n          <ul>\n            <li><strong>256-512:</strong> Very brief responses (1-2 sentences)</li>\n            <li><strong>1024:</strong> Short responses (3-5 sentences) - Good for chat</li>\n            <li><strong>2048-4096:</strong> Detailed responses - Good for complex questions</li>\n          </ul>\n          <p><strong>Recommended:</strong> 1024 for chat, 2048 for voice</p>\n        "},{title:"Enabling Knowledge Base",content:'\n          <p>Knowledge Base Search allows your agent to search through uploaded documents to find answers.</p>\n          <h4>To Enable:</h4>\n          <ol>\n            <li>Toggle "Enable Knowledge Base Search"</li>\n            <li>Select which knowledge base to use</li>\n            <li>Choose search settings:\n              <ul>\n                <li><strong>Top K Results:</strong> How many relevant chunks to retrieve (5-10 recommended)</li>\n                <li><strong>Search Type:</strong> Text, Image, or Hybrid</li>\n              </ul>\n            </li>\n          </ol>\n        ',tips:"Always test your agent with knowledge search enabled to ensure it finds and uses the information correctly. The quality of your knowledge base directly affects response quality."},{title:"Enabling Product Search",content:'\n          <p>Product Search allows your agent to recommend products from your connected Shopify store.</p>\n          <h4>Prerequisites:</h4>\n          <ul>\n            <li>Shopify store must be connected</li>\n            <li>Products must be synced to a knowledge base</li>\n            <li>Agent must have access to that knowledge base</li>\n          </ul>\n          <h4>To Enable:</h4>\n          <ol>\n            <li>Toggle "Enable Product Search"</li>\n            <li>Select the Shopify store to use</li>\n            <li>Configure search parameters</li>\n          </ol>\n          <h4>Agent Instructions:</h4>\n          <p>Add to your system prompt:</p>\n        ',code:"When users ask about products:\n1. Ask clarifying questions to understand their needs\n2. Use product search to find relevant items\n3. Present 2-3 best options with:\n   - Product name\n   - Price\n   - Key features\n   - Why it matches their needs\n4. Offer to provide more details or alternatives"},{title:"Function Calling (Advanced)",content:"\n          <p>Functions allow your agent to perform actions or retrieve dynamic data.</p>\n          <h4>Common Use Cases:</h4>\n          <ul>\n            <li>Check order status in external system</li>\n            <li>Book appointments in calendar</li>\n            <li>Look up real-time inventory</li>\n            <li>Send notifications or alerts</li>\n            <li>Update CRM records</li>\n          </ul>\n          <h4>Function Types:</h4>\n          <p><strong>API Functions:</strong> Call external APIs</p>\n          <ul>\n            <li>Provide endpoint URL</li>\n            <li>Set authentication headers</li>\n            <li>Define parameters</li>\n          </ul>\n        ",warning:"Functions require technical knowledge to set up correctly. Test thoroughly in a safe environment before using in production."}],nextSteps:[{text:"Configure Voice Settings",link:"/help/agent-voice"},{text:"Test Your Agent",link:"/help/agent-testing"},{text:"Set Conversation Strategy",link:"/help/conversation-strategy"}],relatedArticles:["agent-basics","agent-voice","conversation-strategy"]},"agent-voice":{title:"Voice Settings & Configuration",description:"Configure voice, speed, and tone for voice agents",category:"AI Agents",readTime:"8 min read",difficulty:"Intermediate",sections:[{title:"Voice Selection",content:"\n          <p>AIVA offers multiple voice options powered by OpenAI's text-to-speech models. Each voice has a distinct personality and tone.</p>\n        "},{title:"Available Voices",content:"\n          <h4>Alloy</h4>\n          <ul>\n            <li><strong>Gender:</strong> Neutral</li>\n            <li><strong>Tone:</strong> Balanced, professional, clear</li>\n            <li><strong>Best for:</strong> Customer service, general support</li>\n            <li><strong>Characteristics:</strong> Versatile, easy to understand, professional without being robotic</li>\n          </ul>\n          \n          <h4>Echo</h4>\n          <ul>\n            <li><strong>Gender:</strong> Male</li>\n            <li><strong>Tone:</strong> Warm, friendly, approachable</li>\n            <li><strong>Best for:</strong> Sales, friendly conversations, hospitality</li>\n            <li><strong>Characteristics:</strong> Conversational, puts people at ease</li>\n          </ul>\n          \n          <h4>Fable</h4>\n          <ul>\n            <li><strong>Gender:</strong> Male</li>\n            <li><strong>Tone:</strong> Authoritative, confident</li>\n            <li><strong>Best for:</strong> Professional services, expert advice</li>\n            <li><strong>Characteristics:</strong> Clear enunciation, commanding presence</li>\n          </ul>\n          \n          <h4>Onyx</h4>\n          <ul>\n            <li><strong>Gender:</strong> Male</li>\n            <li><strong>Tone:</strong> Deep, calm, reassuring</li>\n            <li><strong>Best for:</strong> Financial services, serious topics</li>\n            <li><strong>Characteristics:</strong> Professional, trustworthy sound</li>\n          </ul>\n          \n          <h4>Nova</h4>\n          <ul>\n            <li><strong>Gender:</strong> Female</li>\n            <li><strong>Tone:</strong> Energetic, upbeat, friendly</li>\n            <li><strong>Best for:</strong> Retail, entertainment, youth-focused brands</li>\n            <li><strong>Characteristics:</strong> Enthusiastic, engaging</li>\n          </ul>\n          \n          <h4>Shimmer</h4>\n          <ul>\n            <li><strong>Gender:</strong> Female</li>\n            <li><strong>Tone:</strong> Professional, clear, polished</li>\n            <li><strong>Best for:</strong> Corporate, healthcare, education</li>\n            <li><strong>Characteristics:</strong> Articulate, professional, trustworthy</li>\n          </ul>\n        ",tips:"Test each voice with your actual agent content. The best voice depends on your brand, audience, and use case. Consider recording sample calls with different voices to compare."},{title:"Speed Control",content:"\n          <p>Adjust speaking speed to match your audience and use case:</p>\n          <ul>\n            <li><strong>0.75x - 0.9x (Slower):</strong>\n              <ul>\n                <li>Better for complex information</li>\n                <li>Elderly audience</li>\n                <li>Technical or medical content</li>\n                <li>Non-native speakers</li>\n              </ul>\n            </li>\n            <li><strong>1.0x (Normal - Recommended):</strong>\n              <ul>\n                <li>Natural conversation pace</li>\n                <li>Most use cases</li>\n                <li>Easy to understand</li>\n              </ul>\n            </li>\n            <li><strong>1.1x - 1.25x (Faster):</strong>\n              <ul>\n                <li>Quick interactions</li>\n                <li>Simple information</li>\n                <li>Time-sensitive calls</li>\n                <li>May reduce clarity</li>\n              </ul>\n            </li>\n          </ul>\n        ",warning:"Speeds above 1.25x can become difficult to understand. Test thoroughly before using faster speeds in production."},{title:"Advanced Audio Settings",content:"\n          <h4>Audio Format</h4>\n          <p>The system handles audio format automatically based on your phone system setup. Most installations use:</p>\n          <ul>\n            <li><strong>Sample Rate:</strong> 8000 Hz or 16000 Hz (standard for telephony)</li>\n            <li><strong>Encoding:</strong> \u03bc-law or linear PCM</li>\n            <li><strong>Channels:</strong> Mono (single channel)</li>\n          </ul>\n          \n          <h4>Silence Detection</h4>\n          <p>Configure when the agent stops speaking:</p>\n          <ul>\n            <li><strong>Threshold:</strong> Silence duration before ending response (500-1000ms recommended)</li>\n            <li><strong>Prefix Padding:</strong> Start speaking slightly before detected (reduces delay)</li>\n          </ul>\n        "},{title:"Testing Voice Settings",content:'\n          <p>Always test voice settings before deploying:</p>\n          <ol>\n            <li>Use the "Test Call" feature in AIVA</li>\n            <li>Try different scenarios:\n              <ul>\n                <li>Long responses</li>\n                <li>Short responses</li>\n                <li>Technical terms</li>\n                <li>Numbers and dates</li>\n              </ul>\n            </li>\n            <li>Test in a quiet and noisy environment</li>\n            <li>Get feedback from others on clarity and pace</li>\n            <li>Adjust settings based on results</li>\n          </ol>\n        ',tips:"Record test calls and listen to them multiple times. Sometimes issues only become apparent after multiple listens. Share recordings with team members for feedback."}],nextSteps:[{text:"Test Your Voice Agent",link:"/help/test-call"},{text:"Configure Conversation Strategy",link:"/help/conversation-strategy"},{text:"Monitor Live Calls",link:"/help/call-monitoring"}],relatedArticles:["create-agent","conversation-strategy","test-call"]},"agent-testing":{title:"Testing Your Agents",description:"How to thoroughly test voice and chat agents before deployment",category:"AI Agents",readTime:"10 min read",difficulty:"Intermediate",sections:[{title:"Why Testing is Critical",content:"\n          <p>Thorough testing ensures your agent:</p>\n          <ul>\n            <li>\u2705 Understands user questions correctly</li>\n            <li>\u2705 Provides accurate, helpful responses</li>\n            <li>\u2705 Handles edge cases gracefully</li>\n            <li>\u2705 Maintains appropriate tone and style</li>\n            <li>\u2705 Escalates properly when needed</li>\n            <li>\u2705 Uses knowledge base effectively</li>\n          </ul>\n          <p><strong>Never deploy an agent without testing!</strong> Real users will quickly find issues you didn't anticipate.</p>\n        "},{title:"Testing Voice Agents",content:"\n          <h4>Using Test Call Feature:</h4>\n        ",steps:[{title:"Navigate to Test Call",description:'Click "Test Call" in the sidebar menu, then select your agent from the dropdown.'},{title:"Start the Call",description:'Click "Start Test Call" button. The system will initiate a call simulation.'},{title:"Interact with Agent",description:"Speak naturally as if you're a real customer. Try different questions and scenarios."},{title:"Review the Conversation",description:"After ending the call, review the transcript and check for accuracy and appropriateness."},{title:"Iterate",description:"Make adjustments to agent configuration based on what you learned, then test again."}],tips:"Test in both quiet and noisy environments. Background noise can significantly affect speech recognition quality."},{title:"Testing Chat Agents",content:"\n          <h4>Using Test Chat Feature:</h4>\n        ",steps:[{title:"Navigate to Test Chat",description:'Click "Test Chat" in the sidebar, then select your agent.'},{title:"Start a Conversation",description:"Type messages as if you're a customer. The chat interface looks like the real widget."},{title:"Try Multiple Sessions",description:"Test multiple conversations to ensure consistency. Each test creates a new session."},{title:"Check Rich Content",description:"Verify that images, products, and sources display correctly when the agent references them."}]},{title:"Test Scenarios",content:'\n          <p>Test your agent with these common scenarios:</p>\n          \n          <h4>Happy Path (Easy Questions)</h4>\n          <ul>\n            <li>"What are your business hours?"</li>\n            <li>"Do you ship internationally?"</li>\n            <li>"Tell me about [product name]"</li>\n            <li>"How do I return an item?"</li>\n          </ul>\n          \n          <h4>Knowledge Base Testing</h4>\n          <ul>\n            <li>Ask questions answered in your documents</li>\n            <li>Ask questions NOT in your documents (should say "I don\'t know")</li>\n            <li>Ask vague questions that need clarification</li>\n            <li>Ask about specific details (dates, numbers, policies)</li>\n          </ul>\n          \n          <h4>Product Search (if enabled)</h4>\n          <ul>\n            <li>"I\'m looking for a red dress under $100"</li>\n            <li>"Show me your best-selling products"</li>\n            <li>"What\'s in stock in size medium?"</li>\n            <li>"Compare [product A] and [product B]"</li>\n          </ul>\n          \n          <h4>Edge Cases</h4>\n          <ul>\n            <li>Nonsensical questions</li>\n            <li>Questions in different languages</li>\n            <li>Very long, rambling questions</li>\n            <li>Rude or frustrated language</li>\n            <li>Questions outside the agent\'s scope</li>\n          </ul>\n          \n          <h4>Conversation Flow</h4>\n          <ul>\n            <li>Multi-turn conversations</li>\n            <li>Topic changes mid-conversation</li>\n            <li>Follow-up questions</li>\n            <li>Referring back to earlier messages</li>\n          </ul>\n        '},{title:"What to Look For",content:"\n          <h4>Accuracy</h4>\n          <ul>\n            <li>\u2705 Facts are correct</li>\n            <li>\u2705 Prices and availability are accurate</li>\n            <li>\u2705 Policy information matches documentation</li>\n            <li>\u274c No hallucinations (making up information)</li>\n          </ul>\n          \n          <h4>Tone & Style</h4>\n          <ul>\n            <li>\u2705 Matches your brand voice</li>\n            <li>\u2705 Appropriate formality level</li>\n            <li>\u2705 Friendly but professional</li>\n            <li>\u274c Not too robotic or overly casual</li>\n          </ul>\n          \n          <h4>Helpfulness</h4>\n          <ul>\n            <li>\u2705 Actually answers the question</li>\n            <li>\u2705 Provides useful details</li>\n            <li>\u2705 Offers next steps</li>\n            <li>\u274c Doesn't give vague or evasive responses</li>\n          </ul>\n          \n          <h4>Error Handling</h4>\n          <ul>\n            <li>\u2705 Asks for clarification when needed</li>\n            <li>\u2705 Admits when it doesn't know something</li>\n            <li>\u2705 Suggests contacting human support appropriately</li>\n            <li>\u274c Doesn't make up answers</li>\n          </ul>\n        "},{title:"Common Issues & Fixes",content:'\n          <table style="width:100%; border-collapse: collapse;">\n            <thead>\n              <tr style="background:#f3f4f6;">\n                <th style="border:1px solid #ddd; padding:8px; text-align:left;">Issue</th>\n                <th style="border:1px solid #ddd; padding:8px; text-align:left;">Likely Cause</th>\n                <th style="border:1px solid #ddd; padding:8px; text-align:left;">Solution</th>\n              </tr>\n            </thead>\n            <tbody>\n              <tr>\n                <td style="border:1px solid #ddd; padding:8px;">Agent gives vague answers</td>\n                <td style="border:1px solid #ddd; padding:8px;">Instructions too general</td>\n                <td style="border:1px solid #ddd; padding:8px;">Add specific examples and requirements</td>\n              </tr>\n              <tr>\n                <td style="border:1px solid #ddd; padding:8px;">Can\'t find info in knowledge base</td>\n                <td style="border:1px solid #ddd; padding:8px;">Poor document organization</td>\n                <td style="border:1px solid #ddd; padding:8px;">Reorganize documents with clear headings</td>\n              </tr>\n              <tr>\n                <td style="border:1px solid #ddd; padding:8px;">Responses too long</td>\n                <td style="border:1px solid #ddd; padding:8px;">Max tokens too high</td>\n                <td style="border:1px solid #ddd; padding:8px;">Lower max tokens, add "be concise" to instructions</td>\n              </tr>\n              <tr>\n                <td style="border:1px solid #ddd; padding:8px;">Agent sounds robotic</td>\n                <td style="border:1px solid #ddd; padding:8px;">Instructions too rigid</td>\n                <td style="border:1px solid #ddd; padding:8px;">Add personality, use conversational examples</td>\n              </tr>\n              <tr>\n                <td style="border:1px solid #ddd; padding:8px;">Makes up information</td>\n                <td style="border:1px solid #ddd; padding:8px;">No explicit instruction to admit unknowns</td>\n                <td style="border:1px solid #ddd; padding:8px;">Add: "If you don\'t know, say so"</td>\n              </tr>\n            </tbody>\n          </table>\n        '},{title:"Testing Checklist",content:"\n          <p>Before deploying to production, ensure you've tested:</p>\n          <ul>\n            <li>\u2610 At least 20 different questions</li>\n            <li>\u2610 Questions that should AND shouldn't be in knowledge base</li>\n            <li>\u2610 Multi-turn conversations (at least 5)</li>\n            <li>\u2610 Edge cases and error scenarios</li>\n            <li>\u2610 Voice quality and clarity (for voice agents)</li>\n            <li>\u2610 Response times are acceptable</li>\n            <li>\u2610 Escalation to human works (if configured)</li>\n            <li>\u2610 Product search returns relevant results (if enabled)</li>\n            <li>\u2610 Tone and style match brand guidelines</li>\n            <li>\u2610 All team members reviewed and approved</li>\n          </ul>\n        "}],nextSteps:[{text:"Deploy to Production",link:"/help/chat-widget"},{text:"Monitor Call Logs",link:"/help/call-monitoring"},{text:"Optimize Performance",link:"/help/conversation-strategy"}],relatedArticles:["test-call","call-monitoring","create-agent"]},"conversation-strategy":{title:"Conversation Strategy",description:"Configure turn detection, interruptions, and conversation flow",category:"AI Agents",readTime:"9 min read",difficulty:"Advanced",sections:[{title:"Overview",content:"\n          <p>Conversation Strategy settings control how your voice agent manages the natural flow of conversation, including when to listen, when to speak, and how to handle interruptions.</p>\n          <p><strong>Note:</strong> These settings only apply to Voice agents, not Chat agents.</p>\n        "},{title:"Turn Detection Mode",content:"\n          <p>Turn detection determines how the agent knows when the user has finished speaking.</p>\n          \n          <h4>Server VAD (Voice Activity Detection) - Recommended</h4>\n          <p><strong>How it works:</strong> The server analyzes audio to detect when the user stops speaking.</p>\n          <p><strong>Pros:</strong></p>\n          <ul>\n            <li>More reliable than client-side detection</li>\n            <li>Works well in noisy environments</li>\n            <li>Consistent across all calls</li>\n          </ul>\n          <p><strong>Cons:</strong></p>\n          <ul>\n            <li>Slight delay in processing</li>\n          </ul>\n          <p><strong>Best for:</strong> Production deployments, customer-facing agents</p>\n          \n          <h4>Client VAD</h4>\n          <p><strong>How it works:</strong> Detection happens on the user's device/phone before sending to server.</p>\n          <p><strong>Pros:</strong></p>\n          <ul>\n            <li>Lower latency (faster response)</li>\n            <li>Reduced bandwidth usage</li>\n          </ul>\n          <p><strong>Cons:</strong></p>\n          <ul>\n            <li>Less reliable in noisy environments</li>\n            <li>Depends on client implementation</li>\n          </ul>\n          <p><strong>Best for:</strong> Low-latency requirements, controlled environments</p>\n          \n          <h4>Manual</h4>\n          <p><strong>How it works:</strong> User must press a button or give a signal to indicate they're done speaking.</p>\n          <p><strong>Best for:</strong> Special applications, testing scenarios</p>\n        ",tips:"Start with Server VAD. It provides the best balance of reliability and performance for most use cases."},{title:"Silence Detection Settings",content:"\n          <h4>Silence Threshold</h4>\n          <p>How long to wait for user to start speaking before considering it silence:</p>\n          <ul>\n            <li><strong>300-500ms:</strong> Aggressive (quick response, may cut off user)</li>\n            <li><strong>700-900ms:</strong> Balanced (recommended)</li>\n            <li><strong>1000-1500ms:</strong> Patient (good for elderly or deliberate speakers)</li>\n          </ul>\n          \n          <h4>Speech Threshold</h4>\n          <p>Minimum duration of speech to consider it an intentional input:</p>\n          <ul>\n            <li><strong>100-200ms:</strong> Sensitive (picks up short sounds)</li>\n            <li><strong>300-400ms:</strong> Balanced (recommended)</li>\n            <li><strong>500ms+:</strong> Requires clear speech (reduces false triggers)</li>\n          </ul>\n        ",warning:"Too aggressive settings can make the agent interrupt users. Too patient settings can feel sluggish. Test with real users to find the right balance."},{title:"Interruption Handling",content:"\n          <p>How the agent responds when the user interrupts while it's speaking.</p>\n          \n          <h4>Allow Interruptions (Recommended)</h4>\n          <p>Agent stops talking immediately when user starts speaking.</p>\n          <p><strong>Pros:</strong></p>\n          <ul>\n            <li>Feels more natural and conversational</li>\n            <li>User can skip long responses</li>\n            <li>Better user experience</li>\n          </ul>\n          <p><strong>Configure:</strong></p>\n          <ul>\n            <li><strong>Interrupt Sensitivity:</strong> How quickly to detect interruption\n              <ul>\n                <li>Low: User must speak louder/longer</li>\n                <li>Medium: Balanced (recommended)</li>\n                <li>High: Very responsive, may trigger on background noise</li>\n              </ul>\n            </li>\n          </ul>\n          \n          <h4>Disable Interruptions</h4>\n          <p>Agent continues speaking even if user tries to interrupt.</p>\n          <p><strong>Use when:</strong></p>\n          <ul>\n            <li>Delivering critical information (disclaimers, legal)</li>\n            <li>Reading lengthy content that shouldn't be skipped</li>\n            <li>Testing in very noisy environments</li>\n          </ul>\n          <p><strong>Warning:</strong> Can frustrate users who want to jump in quickly.</p>\n        "},{title:"Response Pacing",content:"\n          <h4>First Response Delay</h4>\n          <p>Brief pause before agent starts responding:</p>\n          <ul>\n            <li><strong>0-100ms:</strong> Instant (can feel too aggressive)</li>\n            <li><strong>200-400ms:</strong> Natural (recommended)</li>\n            <li><strong>500ms+:</strong> Thoughtful (good for complex questions)</li>\n          </ul>\n          \n          <h4>Between Sentences</h4>\n          <p>Pause between sentences in agent's response:</p>\n          <ul>\n            <li><strong>100-200ms:</strong> Fast-paced</li>\n            <li><strong>300-500ms:</strong> Natural (recommended)</li>\n            <li><strong>600ms+:</strong> Emphasizes each sentence</li>\n          </ul>\n        ",tips:"Natural pauses make the agent sound more human. Too short feels rushed, too long feels slow. Test with actual content to find the right rhythm."},{title:"Advanced Settings",content:"\n          <h4>Prefix Padding</h4>\n          <p>Start playing agent's response slightly before it's fully generated:</p>\n          <ul>\n            <li>Reduces perceived latency</li>\n            <li>Makes conversation feel snappier</li>\n            <li>Risk: May start with wrong intonation if generation changes</li>\n          </ul>\n          <p><strong>Recommended:</strong> 0.3-0.5 seconds</p>\n          \n          <h4>Audio Buffering</h4>\n          <p>How much audio to buffer before starting playback:</p>\n          <ul>\n            <li><strong>Low Buffer:</strong> Faster start, risk of stuttering</li>\n            <li><strong>Medium Buffer:</strong> Balanced (recommended)</li>\n            <li><strong>High Buffer:</strong> Smooth playback, slower start</li>\n          </ul>\n        "},{title:"Testing Conversation Flow",content:"\n          <p>Test these scenarios to ensure natural conversation:</p>\n          <ol>\n            <li><strong>Natural Pauses:</strong> Does agent wait appropriately for user to finish thinking?</li>\n            <li><strong>Quick Back-and-Forth:</strong> Can users ask follow-up questions smoothly?</li>\n            <li><strong>Interruptions:</strong> Does agent stop gracefully when interrupted?</li>\n            <li><strong>Long Responses:</strong> Can users interrupt when agent is giving long answers?</li>\n            <li><strong>Silence:</strong> What happens if user doesn't respond? Does agent prompt?</li>\n            <li><strong>Background Noise:</strong> Does agent incorrectly detect speech from noise?</li>\n          </ol>\n        "},{title:"Best Practices",content:"\n          <ul>\n            <li>\u2705 <strong>Test with real users:</strong> What feels natural varies by audience</li>\n            <li>\u2705 <strong>Start conservative:</strong> Longer timeouts are better than interrupting users</li>\n            <li>\u2705 <strong>Monitor call logs:</strong> Look for patterns of interruption or delay issues</li>\n            <li>\u2705 <strong>Adjust gradually:</strong> Make small changes and test impact</li>\n            <li>\u2705 <strong>Consider use case:</strong> Customer service needs differ from sales</li>\n            <li>\u274c <strong>Don't set too aggressive:</strong> Users need time to think</li>\n            <li>\u274c <strong>Don't disable interruptions:</strong> Unless absolutely necessary</li>\n          </ul>\n        "}],nextSteps:[{text:"Test Your Voice Agent",link:"/help/test-call"},{text:"Monitor Live Calls",link:"/help/call-monitoring"},{text:"Configure Voice Settings",link:"/help/agent-voice"}],relatedArticles:["agent-voice","test-call","call-monitoring"]},"kb-overview":{title:"Knowledge Base Overview",description:"What is a knowledge base and how to use it effectively",category:"Knowledge Base",readTime:"8 min read",difficulty:"Beginner",sections:[{title:"What is a Knowledge Base?",content:"\n          <p>A Knowledge Base in AIVA is a collection of documents, web content, and information that your AI agents can search through to answer questions.</p>\n          <p>Think of it as your agent's brain - the more comprehensive and well-organized your knowledge base, the better your agent can help users.</p>\n        "},{title:"How It Works",content:"\n          <p>When you upload content to a knowledge base:</p>\n          <ol>\n            <li><strong>Content Extraction:</strong> Text, images, and tables are extracted from documents</li>\n            <li><strong>Chunking:</strong> Content is split into searchable pieces (500-1000 characters each)</li>\n            <li><strong>Embedding:</strong> Each chunk is converted to a vector representation</li>\n            <li><strong>Indexing:</strong> Vectors are stored in a searchable database</li>\n            <li><strong>Search:</strong> When agent searches, it finds most relevant chunks using semantic similarity</li>\n          </ol>\n        "},{title:"What to Include",content:"\n          <h4>Essential Content:</h4>\n          <ul>\n            <li>Product documentation and specifications</li>\n            <li>Frequently asked questions (FAQs)</li>\n            <li>Company policies (returns, shipping, privacy)</li>\n            <li>How-to guides and tutorials</li>\n            <li>Pricing information</li>\n            <li>Contact information and hours</li>\n          </ul>\n          \n          <h4>Optional Content:</h4>\n          <ul>\n            <li>Blog posts and articles</li>\n            <li>Product comparisons</li>\n            <li>Case studies and testimonials</li>\n            <li>Technical specifications</li>\n            <li>Training materials</li>\n          </ul>\n        "},{title:"Organization Tips",content:"\n          <ul>\n            <li><strong>One topic per document:</strong> Don't mix unrelated content</li>\n            <li><strong>Clear headings:</strong> Use descriptive section titles</li>\n            <li><strong>Consistent formatting:</strong> Maintain structure across documents</li>\n            <li><strong>Keep it current:</strong> Update outdated information regularly</li>\n            <li><strong>Remove duplicates:</strong> Don't upload the same info multiple times</li>\n          </ul>\n        "},{title:"Multiple Knowledge Bases",content:"\n          <p>You can create multiple knowledge bases for:</p>\n          <ul>\n            <li><strong>Different products or services</strong></li>\n            <li><strong>Different departments</strong> (Sales, Support, Technical)</li>\n            <li><strong>Different languages</strong></li>\n            <li><strong>Internal vs external</strong> information</li>\n          </ul>\n          <p>Each agent can be configured to use one or more knowledge bases.</p>\n        "}],nextSteps:[{text:"Upload Documents",link:"/help/upload-documents"},{text:"Scrape Websites",link:"/help/web-scraping"},{text:"Test Knowledge Search",link:"/help/kb-search"}],relatedArticles:["upload-documents","web-scraping","kb-search"]},"upload-documents":{title:"Uploading Documents",description:"Upload PDFs, Word docs, presentations, and more to your knowledge base",category:"Knowledge Base",readTime:"5 min read",difficulty:"Beginner",sections:[{title:"Supported File Types",content:"\n          <p>AIVA supports a wide variety of document formats:</p>\n          <ul>\n            <li><strong>PDF</strong> (.pdf) - Including scanned documents with OCR</li>\n            <li><strong>Microsoft Word</strong> (.docx) - Text, tables, images</li>\n            <li><strong>PowerPoint</strong> (.pptx) - Slides with text and images</li>\n            <li><strong>Excel</strong> (.xlsx) - Spreadsheets and data tables</li>\n            <li><strong>Text Files</strong> (.txt) - Plain text documents</li>\n            <li><strong>HTML</strong> (.html) - Web pages with formatting</li>\n            <li><strong>Markdown</strong> (.md) - Formatted text files</li>\n            <li><strong>JSON</strong> (.json) - Structured data</li>\n          </ul>\n          <p><strong>Maximum File Size:</strong> 50MB per file</p>\n        "},{title:"Upload Process",steps:[{title:"Navigate to Knowledge Base",description:'Go to "Knowledge Base" in the sidebar and select the knowledge base you want to add documents to.'},{title:"Click Documents Tab",description:'Select the "Documents" tab to see your document management interface.'},{title:"Choose Upload Tab",description:'Click the "Upload" tab to access the file upload interface.'},{title:"Select Files",description:'Drag and drop files onto the upload area, or click "Choose files" to browse your computer. You can upload multiple files at once.'},{title:"Wait for Processing",description:'Files will automatically begin processing. Status will show "Processing" and then "Completed". This typically takes 30 seconds to 2 minutes per document.'}]},{title:"What Happens During Processing",content:"\n          <p>When you upload a document, AIVA performs several operations:</p>\n          <ol>\n            <li><strong>Content Extraction:</strong>\n              <ul>\n                <li>Text is extracted from all pages</li>\n                <li>Images are extracted and processed separately</li>\n                <li>Tables are identified and preserved</li>\n                <li>Document structure is analyzed</li>\n              </ul>\n            </li>\n            <li><strong>Text Processing:</strong>\n              <ul>\n                <li>Content is split into searchable chunks</li>\n                <li>Each chunk is 500-1000 characters for optimal search</li>\n                <li>Overlap between chunks ensures context isn't lost</li>\n              </ul>\n            </li>\n            <li><strong>Embedding Generation:</strong>\n              <ul>\n                <li>OpenAI generates vector embeddings for each chunk</li>\n                <li>Embeddings enable semantic search (meaning-based, not keyword-based)</li>\n              </ul>\n            </li>\n            <li><strong>Storage:</strong>\n              <ul>\n                <li>Chunks and embeddings are stored in the database</li>\n                <li>Images are stored separately with their own embeddings</li>\n              </ul>\n            </li>\n          </ol>\n        "},{title:"Processing Statistics",content:"\n          <p>After processing completes, you'll see these statistics:</p>\n          <ul>\n            <li><strong>Total Pages:</strong> Number of pages in the document</li>\n            <li><strong>Total Chunks:</strong> Number of searchable text pieces created</li>\n            <li><strong>Extracted Images:</strong> Number of images found and extracted (PDFs only)</li>\n            <li><strong>Detected Tables:</strong> Number of data tables identified</li>\n            <li><strong>File Size:</strong> Size of the uploaded file</li>\n            <li><strong>Processing Time:</strong> How long it took to process</li>\n          </ul>\n        "},{title:"Best Practices",content:"\n          <h4>Document Preparation:</h4>\n          <ul>\n            <li>\u2705 Use clear, descriptive filenames</li>\n            <li>\u2705 Ensure text is selectable (not scanned images)</li>\n            <li>\u2705 Include proper headings and structure</li>\n            <li>\u2705 Remove unnecessary pages (covers, blank pages)</li>\n            <li>\u2705 Check for outdated information before uploading</li>\n          </ul>\n          \n          <h4>Organization:</h4>\n          <ul>\n            <li>\u2705 Group related documents in the same knowledge base</li>\n            <li>\u2705 Use consistent formatting across documents</li>\n            <li>\u2705 Break very long documents into logical sections</li>\n            <li>\u2705 Update documents when information changes</li>\n          </ul>\n          \n          <h4>What to Avoid:</h4>\n          <ul>\n            <li>\u274c Uploading duplicate documents</li>\n            <li>\u274c Including sensitive personal information</li>\n            <li>\u274c Using password-protected files</li>\n            <li>\u274c Uploading corrupted or damaged files</li>\n          </ul>\n        "},{title:"Troubleshooting Upload Issues",content:"\n          <h4>File Won't Upload:</h4>\n          <ul>\n            <li>Check file size (must be under 50MB)</li>\n            <li>Verify file format is supported</li>\n            <li>Ensure file isn't corrupted</li>\n            <li>Try a different browser</li>\n          </ul>\n          \n          <h4>Processing Stuck:</h4>\n          <ul>\n            <li>Wait 5-10 minutes (large files take time)</li>\n            <li>Refresh the page to check updated status</li>\n            <li>If still stuck after 15 minutes, contact support</li>\n          </ul>\n          \n          <h4>Processing Failed:</h4>\n          <ul>\n            <li>Check that the file isn't corrupted</li>\n            <li>Ensure it's not password-protected</li>\n            <li>Try re-uploading the file</li>\n            <li>Check error message for specific issue</li>\n          </ul>\n        "}],nextSteps:[{text:"Test Knowledge Search",link:"/help/kb-search"},{text:"Upload Images",link:"/help/image-management"},{text:"Scrape Websites",link:"/help/web-scraping"}],relatedArticles:["kb-overview","web-scraping","kb-search"]},"web-scraping":{title:"Web Scraping Guide",description:"Scrape websites and automatically import content to your knowledge base",category:"Knowledge Base",readTime:"10 min read",difficulty:"Intermediate",sections:[{title:"What is Web Scraping?",content:"<p>Web scraping allows you to automatically import content from websites into your knowledge base without manually downloading and uploading files.</p>"},{title:"Single URL Scraping",content:"<p>Import content from a single web page...</p>"},{title:"Website Crawling",content:"<p>Crawl an entire website up to a specified depth...</p>"},{title:"Sitemap Import",content:"<p>Import all pages listed in a sitemap.xml file...</p>"},{title:"Configuration Options",content:"<p>Max depth, max pages, URL filters...</p>"},{title:"Best Practices",content:"<p>Tips for effective web scraping...</p>"}],relatedArticles:["upload-documents","kb-overview"]},"image-management":{title:"Image Upload & Search",description:"Managing images and using visual search capabilities",category:"Knowledge Base",readTime:"7 min read",difficulty:"Intermediate",sections:[{title:"Image Capabilities",content:"<p>AIVA can process images using CLIP embeddings for visual search...</p>"},{title:"Uploading Images",content:"<p>How to upload standalone images to your knowledge base...</p>"},{title:"Image Metadata",content:"<p>Adding titles, descriptions, tags, and categories...</p>"},{title:"Visual Search",content:"<p>Search by image similarity or text description...</p>"},{title:"Extracted Images",content:"<p>Images automatically extracted from PDFs...</p>"}],relatedArticles:["upload-documents","kb-search"]},"kb-search":{title:"Testing Knowledge Search",description:"Test and optimize knowledge base search functionality",category:"Knowledge Base",readTime:"8 min read",difficulty:"Intermediate",sections:[{title:"Using the Search Test Page",content:"<p>Access the knowledge base search testing interface...</p>"},{title:"Understanding Search Results",content:"<p>How to interpret relevance scores and sources...</p>"},{title:"Search Types",content:"<p>Text search, image search, and hybrid search explained...</p>"},{title:"Improving Search Quality",content:"<p>Tips for better search results...</p>"}],relatedArticles:["kb-overview","upload-documents","semantic-cache"]},"semantic-cache":{title:"Semantic Cache Management",description:"Understanding and managing semantic cache to reduce costs",category:"Knowledge Base",readTime:"6 min read",difficulty:"Advanced",sections:[{title:"What is Semantic Cache?",content:"<p>Semantic cache stores search results for similar queries to reduce API costs...</p>"},{title:"How It Works",content:"<p>When a user asks a similar question, cached results are returned...</p>"},{title:"Cache Statistics",content:"<p>Viewing hit rate, cost savings, and cache size...</p>"},{title:"Managing Cache",content:"<p>When and how to clear the cache...</p>"},{title:"Cost Optimization",content:"<p>Balancing cache usage with freshness...</p>"}],relatedArticles:["kb-search","kb-overview"]},"shopify-overview":{title:"Shopify Integration Overview",description:"Learn how AIVA connects with your Shopify store",category:"Shopify",readTime:"5 min read",difficulty:"Beginner",sections:[{title:"What Can AIVA Do with Shopify?",content:"<p>AI-powered product recommendations, inventory awareness, and customer support...</p>"},{title:"How It Works",content:"<p>Products are synced to a knowledge base for AI search...</p>"},{title:"Use Cases",content:"<p>Shopping assistants, product finders, inventory inquiries...</p>"}],relatedArticles:["connect-shopify","product-sync","product-recommendations"]},"connect-shopify":{title:"Connecting Your Shopify Store",description:"Step-by-step guide to connect Shopify to AIVA",category:"Shopify",readTime:"12 min read",difficulty:"Intermediate",sections:[{title:"Prerequisites",content:"<p>What you need before connecting...</p>"},{title:"Getting API Credentials",content:"<p>Creating a custom app in Shopify admin...</p>"},{title:"Connecting in AIVA",content:"<p>Enter credentials and test connection...</p>"},{title:"Sync Configuration",content:"<p>Auto-sync settings and frequency...</p>"}],relatedArticles:["shopify-overview","product-sync"]},"product-sync":{title:"Product Synchronization",description:"Understanding product sync jobs and monitoring",category:"Shopify",readTime:"8 min read",difficulty:"Intermediate",sections:[{title:"Sync Types",content:"<p>Manual sync vs automatic sync...</p>"},{title:"What Gets Synced",content:"<p>Products, variants, images, prices, inventory...</p>"},{title:"Monitoring Sync Jobs",content:"<p>Viewing sync status and statistics...</p>"},{title:"Troubleshooting",content:"<p>Common sync issues and solutions...</p>"}],relatedArticles:["connect-shopify","product-recommendations"]},"product-recommendations":{title:"AI Product Recommendations",description:"How agents recommend products from your Shopify store",category:"Shopify",readTime:"7 min read",difficulty:"Intermediate",sections:[{title:"How AI Recommends Products",content:"<p>Semantic search matches customer needs to products...</p>"},{title:"Configuring Product Search",content:"<p>Enable and configure in agent settings...</p>"},{title:"Agent Instructions for Products",content:"<p>How to prompt agents to recommend effectively...</p>"},{title:"Testing Recommendations",content:"<p>Ensure AI recommends appropriate products...</p>"}],relatedArticles:["connect-shopify","product-sync"]},"chat-overview":{title:"Chat Integration Overview",description:"Understanding chat widgets and standalone chat pages",category:"Chat Integration",readTime:"5 min read",difficulty:"Beginner",sections:[{title:"Chat Options",content:"<p>Widget vs standalone page comparison...</p>"},{title:"Features",content:"<p>Rich content, image display, product cards, sources...</p>"},{title:"Use Cases",content:"<p>Customer support, sales, shopping assistance...</p>"}],relatedArticles:["chat-widget","chat-page"]},"chat-widget":{title:"Installing Chat Widget",description:"Add AIVA chat widget to your website",category:"Chat Integration",readTime:"10 min read",difficulty:"Intermediate",sections:[{title:"Enable Chat Integration",content:"<p>Toggle on and configure colors/position...</p>"},{title:"Get Embed Code",content:"<p>Copy the JavaScript code snippet...</p>"},{title:"Installation Methods",content:"<p>Direct HTML, WordPress, Shopify, Google Tag Manager...</p>"},{title:"Testing Your Widget",content:"<p>Verify widget loads and functions correctly...</p>"}],relatedArticles:["chat-overview","chat-customization"]},"chat-page":{title:"Standalone Chat Page",description:"Create a public chat page with custom URL",category:"Chat Integration",readTime:"6 min read",difficulty:"Beginner",sections:[{title:"Enabling Public Chat Page",content:"<p>Toggle on and configure slug...</p>"},{title:"Custom URL Slug",content:"<p>Choose a memorable URL for your chat page...</p>"},{title:"Sharing Your Chat Page",content:"<p>Public link, QR codes, embedding...</p>"},{title:"Chat Page Features",content:"<p>Full-screen interface, rich content support...</p>"}],relatedArticles:["chat-overview","chat-widget"]},"chat-customization":{title:"Customizing Chat Interface",description:"Customize colors, branding, and appearance",category:"Chat Integration",readTime:"7 min read",difficulty:"Intermediate",sections:[{title:"Color Customization",content:"<p>Primary color, button colors, header...</p>"},{title:"Position Options",content:"<p>Bottom-right, bottom-left placement...</p>"},{title:"Button Text",content:"<p>Customize the chat button label...</p>"},{title:"Greeting Message",content:"<p>First message users see...</p>"}],relatedArticles:["chat-widget","chat-page"]},"voice-overview":{title:"Voice Calls Overview",description:"Understanding voice agent capabilities",category:"Voice Calls",readTime:"6 min read",difficulty:"Beginner",sections:[{title:"How Voice Works",content:"<p>Asterisk PBX + OpenAI Realtime API...</p>"},{title:"Voice Agent Capabilities",content:"<p>Natural conversation, knowledge access, product search...</p>"},{title:"Use Cases",content:"<p>Customer support lines, appointment booking, FAQs...</p>"}],relatedArticles:["test-call","call-monitoring"]},"test-call":{title:"Making Test Calls",description:"Use the test call feature to verify voice agents",category:"Voice Calls",readTime:"5 min read",difficulty:"Beginner",sections:[{title:"Accessing Test Call",content:"<p>Navigate to test call page and select agent...</p>"},{title:"Starting a Test Call",content:"<p>Click start and speak naturally...</p>"},{title:"Reviewing Results",content:"<p>Check transcript and agent responses...</p>"},{title:"Common Test Scenarios",content:"<p>What to test before going live...</p>"}],relatedArticles:["agent-testing","voice-overview"]},"call-monitoring":{title:"Call Monitoring & Logs",description:"Monitor live calls and review call history",category:"Voice Calls",readTime:"8 min read",difficulty:"Intermediate",sections:[{title:"Live Monitor",content:"<p>Watch active calls in real-time...</p>"},{title:"Call Logs",content:"<p>Review past call transcripts and details...</p>"},{title:"Call Analytics",content:"<p>Duration, cost, success rate metrics...</p>"},{title:"Filtering and Search",content:"<p>Find specific calls by date, agent, duration...</p>"}],relatedArticles:["test-call","voice-overview"]},"create-users":{title:"Creating & Managing Users",description:"Add team members and manage their access",category:"User Management",readTime:"7 min read",difficulty:"Beginner",sections:[{title:"Creating New Users",content:"<p>Navigate to Users page and click Create User...</p>"},{title:"Required Information",content:"<p>Name, email, password, role assignment...</p>"},{title:"Editing Users",content:"<p>Update user details and permissions...</p>"},{title:"Deactivating Users",content:"<p>Disable access without deleting...</p>"}],relatedArticles:["user-roles","user-permissions"]},"user-permissions":{title:"User Permissions",description:"Understanding permission levels and capabilities",category:"User Management",readTime:"6 min read",difficulty:"Intermediate",sections:[{title:"Permission System",content:"<p>How role-based access control works...</p>"},{title:"Role Capabilities",content:"<p>Detailed breakdown of what each role can do...</p>"},{title:"Best Practices",content:"<p>Assigning appropriate roles to team members...</p>"}],relatedArticles:["user-roles","create-users"]},"account-settings":{title:"Account Settings",description:"Manage your profile and preferences",category:"Settings",readTime:"4 min read",difficulty:"Beginner",sections:[{title:"Profile Management",content:"<p>Update name, email, password...</p>"},{title:"Notification Preferences",content:"<p>Email alerts and notifications...</p>"},{title:"Security",content:"<p>Password requirements and two-factor authentication...</p>"}],relatedArticles:["user-roles"]},"api-keys":{title:"API Keys Management",description:"Generate and manage API keys for integrations",category:"Settings",readTime:"8 min read",difficulty:"Advanced",sections:[{title:"What are API Keys?",content:"<p>Authentication for programmatic access...</p>"},{title:"Generating API Keys",content:"<p>Create new keys for applications...</p>"},{title:"Key Security",content:"<p>Best practices for storing and rotating keys...</p>"},{title:"Using API Keys",content:"<p>Authentication header format and examples...</p>"}],relatedArticles:["account-settings"]},"credits-billing":{title:"Credits & Billing",description:"Manage credits, track usage, and understand costs",category:"Settings",readTime:"10 min read",difficulty:"Beginner",sections:[{title:"Understanding Credits",content:"<p>How credits work and what they cover...</p>"},{title:"Viewing Credit Balance",content:"<p>Check remaining credits...</p>"},{title:"Adding Credits",content:"<p>Purchase additional credits...</p>"},{title:"Usage Tracking",content:"<p>Monitor costs by agent, knowledge base, operation...</p>"},{title:"Cost Breakdown",content:"<p>Understanding charges for different operations...</p>"}],relatedArticles:["account-settings"]}},go=()=>{var e;const{articleId:t}=re(),r=(ee(),fo[t]);return(0,a.useEffect)(()=>{window.scrollTo(0,0)},[t]),r?(0,Da.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,Da.jsx)("nav",{className:"mb-6",children:(0,Da.jsxs)(Ie,{to:"/help",className:"inline-flex items-center text-primary-600 hover:text-primary-700",children:[(0,Da.jsx)(fi,{className:"w-4 h-4 mr-2"}),"Back to Help Center"]})}),(0,Da.jsxs)("div",{className:"bg-white rounded-lg shadow-lg overflow-hidden mb-6",children:[(0,Da.jsx)("div",{className:"bg-gradient-to-r from-primary-600 to-primary-700 p-8 text-white",children:(0,Da.jsxs)("div",{className:"flex items-start justify-between",children:[(0,Da.jsxs)("div",{className:"flex-1",children:[r.category&&(0,Da.jsx)("div",{className:"mb-3",children:(0,Da.jsx)("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-white bg-opacity-20 text-white",children:r.category})}),(0,Da.jsx)("h1",{className:"text-3xl font-bold mb-3",children:r.title}),(0,Da.jsx)("p",{className:"text-primary-100 text-lg",children:r.description}),(0,Da.jsxs)("div",{className:"flex items-center mt-4 space-x-4 text-sm text-primary-100",children:[r.readTime&&(0,Da.jsxs)("div",{className:"flex items-center",children:[(0,Da.jsx)(Ts,{className:"w-4 h-4 mr-1"}),r.readTime]}),r.difficulty&&(0,Da.jsxs)("div",{className:"flex items-center",children:[(0,Da.jsx)(Vi,{className:"w-4 h-4 mr-1"}),r.difficulty]})]})]}),(0,Da.jsx)(Bs,{className:"w-12 h-12 text-primary-200 flex-shrink-0 ml-6"})]})}),r.videoUrl&&(0,Da.jsxs)("div",{className:"p-6 bg-gray-50 border-b",children:[(0,Da.jsxs)("div",{className:"flex items-center mb-3",children:[(0,Da.jsx)(mo,{className:"w-5 h-5 text-primary-600 mr-2"}),(0,Da.jsx)("h3",{className:"font-semibold text-gray-900",children:"Video Tutorial"})]}),(0,Da.jsx)("div",{className:"aspect-video bg-gray-900 rounded-lg overflow-hidden",children:(0,Da.jsx)("iframe",{src:r.videoUrl,className:"w-full h-full",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})})]}),r.sections&&r.sections.length>0&&(0,Da.jsxs)("div",{className:"p-6 bg-blue-50 border-b",children:[(0,Da.jsx)("h3",{className:"font-semibold text-gray-900 mb-3",children:"In This Article"}),(0,Da.jsx)("nav",{className:"space-y-2",children:r.sections.map((e,t)=>(0,Da.jsxs)("a",{href:"#section-".concat(t),className:"block text-primary-600 hover:text-primary-700 text-sm",children:[t+1,". ",e.title]},t))})]}),(0,Da.jsx)("div",{className:"p-8",children:(0,Da.jsxs)("div",{className:"prose prose-primary max-w-none",children:[null===(e=r.sections)||void 0===e?void 0:e.map((e,t)=>(0,Da.jsxs)("div",{id:"section-".concat(t),className:"mb-8",children:[(0,Da.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:e.title}),(0,Da.jsx)("div",{className:"text-gray-700 leading-relaxed",dangerouslySetInnerHTML:{__html:e.content}}),e.steps&&(0,Da.jsx)("div",{className:"mt-6 space-y-4",children:e.steps.map((e,t)=>(0,Da.jsxs)("div",{className:"flex items-start",children:[(0,Da.jsx)("div",{className:"flex-shrink-0 w-8 h-8 bg-primary-600 text-white rounded-full flex items-center justify-center font-semibold mr-4",children:t+1}),(0,Da.jsxs)("div",{className:"flex-1",children:[(0,Da.jsx)("h4",{className:"font-medium text-gray-900 mb-1",children:e.title}),(0,Da.jsx)("p",{className:"text-gray-600",children:e.description}),e.image&&(0,Da.jsx)("img",{src:e.image,alt:e.title,className:"mt-3 rounded-lg border shadow-sm"})]})]},t))}),e.code&&(0,Da.jsx)("div",{className:"mt-4",children:(0,Da.jsx)("pre",{className:"bg-gray-900 text-gray-100 p-4 rounded-lg overflow-x-auto",children:(0,Da.jsx)("code",{children:e.code})})}),e.tips&&(0,Da.jsx)("div",{className:"mt-6 bg-blue-50 border-l-4 border-blue-500 p-4 rounded-r-lg",children:(0,Da.jsxs)("div",{className:"flex items-start",children:[(0,Da.jsx)(us,{className:"w-5 h-5 text-blue-600 mr-3 flex-shrink-0 mt-0.5"}),(0,Da.jsxs)("div",{children:[(0,Da.jsx)("h5",{className:"font-medium text-blue-900 mb-2",children:"\ud83d\udca1 Tip"}),(0,Da.jsx)("p",{className:"text-blue-800",children:e.tips})]})]})}),e.warning&&(0,Da.jsx)("div",{className:"mt-6 bg-yellow-50 border-l-4 border-yellow-500 p-4 rounded-r-lg",children:(0,Da.jsxs)("div",{className:"flex items-start",children:[(0,Da.jsx)(gi,{className:"w-5 h-5 text-yellow-600 mr-3 flex-shrink-0 mt-0.5"}),(0,Da.jsxs)("div",{children:[(0,Da.jsx)("h5",{className:"font-medium text-yellow-900 mb-2",children:"\u26a0\ufe0f Warning"}),(0,Da.jsx)("p",{className:"text-yellow-800",children:e.warning})]})]})})]},t)),r.nextSteps&&(0,Da.jsx)("div",{className:"mt-8 p-6 bg-green-50 rounded-lg border border-green-200",children:(0,Da.jsxs)("div",{className:"flex items-start",children:[(0,Da.jsx)(gs,{className:"w-6 h-6 text-green-600 mr-3 flex-shrink-0 mt-0.5"}),(0,Da.jsxs)("div",{children:[(0,Da.jsx)("h3",{className:"text-lg font-semibold text-green-900 mb-3",children:"\ud83c\udf89 Next Steps"}),(0,Da.jsx)("ul",{className:"space-y-2",children:r.nextSteps.map((e,t)=>(0,Da.jsxs)("li",{className:"flex items-start",children:[(0,Da.jsx)("span",{className:"text-green-600 mr-2",children:"\u2192"}),e.link?(0,Da.jsx)(Ie,{to:e.link,className:"text-green-700 hover:text-green-800 font-medium",children:e.text}):(0,Da.jsx)("span",{className:"text-green-800",children:e.text})]},t))})]})]})})]})}),r.relatedArticles&&r.relatedArticles.length>0&&(0,Da.jsxs)("div",{className:"p-6 bg-gray-50 border-t",children:[(0,Da.jsx)("h3",{className:"font-semibold text-gray-900 mb-4",children:"Related Articles"}),(0,Da.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:r.relatedArticles.map(e=>{const t=fo[e];return t?(0,Da.jsxs)(Ie,{to:"/help/".concat(e),className:"p-4 bg-white rounded-lg border hover:border-primary-500 hover:shadow transition-all",children:[(0,Da.jsx)("h4",{className:"font-medium text-gray-900 mb-1",children:t.title}),(0,Da.jsx)("p",{className:"text-sm text-gray-600",children:t.description})]},e):null})})]}),(0,Da.jsx)("div",{className:"p-6 bg-gray-100 border-t",children:(0,Da.jsxs)("div",{className:"text-center",children:[(0,Da.jsx)("h3",{className:"font-medium text-gray-900 mb-3",children:"Was this article helpful?"}),(0,Da.jsxs)("div",{className:"flex items-center justify-center space-x-4",children:[(0,Da.jsx)("button",{className:"px-6 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition-colors",children:"\ud83d\udc4d Yes"}),(0,Da.jsx)("button",{className:"px-6 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 transition-colors",children:"\ud83d\udc4e No"})]}),(0,Da.jsx)("p",{className:"text-sm text-gray-500 mt-4",children:"Your feedback helps us improve our documentation"})]})})]})]}):(0,Da.jsx)("div",{className:"max-w-4xl mx-auto",children:(0,Da.jsxs)("div",{className:"bg-white rounded-lg shadow p-12 text-center",children:[(0,Da.jsx)(gi,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),(0,Da.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Article Not Found"}),(0,Da.jsx)("p",{className:"text-gray-600 mb-6",children:"The help article you're looking for doesn't exist."}),(0,Da.jsxs)(Ie,{to:"/help",className:"inline-flex items-center px-4 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700",children:[(0,Da.jsx)(fi,{className:"w-4 h-4 mr-2"}),"Back to Help Center"]})]})})},xo=Ha("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]),yo=Ha("Server",[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]]),vo=Ha("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),bo=Ha("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]),jo=()=>{const[e,t]=(0,a.useState)(!0),[r,n]=(0,a.useState)(!1),[s,i]=(0,a.useState)(!1),[o,l]=(0,a.useState)(!1),[c,d]=(0,a.useState)({host:"",port:"587",secure:"false",user:"",password:"",from_name:"AIVA Platform",from_email:"",enabled:"false"}),[u,p]=(0,a.useState)(""),[m,h]=(0,a.useState)(null);(0,a.useEffect)(()=>{f()},[]);const f=async()=>{try{const e=await Ma.get("/settings/system/smtp");d(e.data.data),t(!1)}catch(e){console.error("Load config error:",e),nr.error("Failed to load SMTP configuration"),t(!1)}},g=e=>{const{name:t,value:r}=e.target;d(e=>qe(qe({},e),{},{[t]:r}))};return e?(0,Da.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,Da.jsx)(vi,{className:"w-8 h-8 animate-spin text-primary-600"})}):(0,Da.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,Da.jsxs)("div",{className:"mb-6",children:[(0,Da.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"System Settings"}),(0,Da.jsx)("p",{className:"text-gray-600 mt-1",children:"Configure SMTP email settings for the platform"})]}),(0,Da.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-6",children:[(0,Da.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,Da.jsxs)("div",{className:"flex items-center",children:[(0,Da.jsx)(xo,{className:"w-6 h-6 text-primary-600 mr-3"}),(0,Da.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"SMTP Configuration"})]}),(0,Da.jsxs)("label",{className:"flex items-center cursor-pointer",children:[(0,Da.jsx)("span",{className:"mr-3 text-sm font-medium text-gray-700",children:"Email Sending"}),(0,Da.jsxs)("div",{className:"relative",children:[(0,Da.jsx)("input",{type:"checkbox",checked:"true"===c.enabled,onChange:e=>d(t=>qe(qe({},t),{},{enabled:e.target.checked?"true":"false"})),className:"sr-only"}),(0,Da.jsx)("div",{className:"block w-14 h-8 rounded-full transition ".concat("true"===c.enabled?"bg-primary-600":"bg-gray-300")}),(0,Da.jsx)("div",{className:"dot absolute left-1 top-1 bg-white w-6 h-6 rounded-full transition ".concat("true"===c.enabled?"transform translate-x-6":"")})]})]})]}),(0,Da.jsxs)("div",{className:"space-y-4",children:[(0,Da.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,Da.jsxs)("div",{className:"md:col-span-2",children:[(0,Da.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[(0,Da.jsx)(yo,{className:"w-4 h-4 inline mr-1"}),"SMTP Host"]}),(0,Da.jsx)("input",{type:"text",name:"host",value:c.host,onChange:g,placeholder:"smtp.gmail.com",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent"})]}),(0,Da.jsxs)("div",{children:[(0,Da.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Port"}),(0,Da.jsx)("input",{type:"text",name:"port",value:c.port,onChange:g,placeholder:"587",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent"})]})]}),(0,Da.jsxs)("div",{children:[(0,Da.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[(0,Da.jsx)(vo,{className:"w-4 h-4 inline mr-1"}),"Connection Security"]}),(0,Da.jsxs)("select",{name:"secure",value:c.secure,onChange:g,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",children:[(0,Da.jsx)("option",{value:"false",children:"TLS/STARTTLS (Port 587)"}),(0,Da.jsx)("option",{value:"true",children:"SSL (Port 465)"})]}),(0,Da.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Use TLS/STARTTLS for port 587, SSL for port 465"})]}),(0,Da.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,Da.jsxs)("div",{children:[(0,Da.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[(0,Da.jsx)(Es,{className:"w-4 h-4 inline mr-1"}),"SMTP Username / Email"]}),(0,Da.jsx)("input",{type:"text",name:"user",value:c.user,onChange:g,placeholder:"your-email@gmail.com",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent"})]}),(0,Da.jsxs)("div",{children:[(0,Da.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[(0,Da.jsx)(vo,{className:"w-4 h-4 inline mr-1"}),"SMTP Password"]}),(0,Da.jsxs)("div",{className:"relative",children:[(0,Da.jsx)("input",{type:o?"text":"password",name:"password",value:c.password,onChange:g,placeholder:"\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022",className:"w-full px-4 py-2 pr-10 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent"}),(0,Da.jsx)("button",{type:"button",onClick:()=>l(!o),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:o?(0,Da.jsx)(bo,{className:"w-5 h-5"}):(0,Da.jsx)(Hi,{className:"w-5 h-5"})})]}),(0,Da.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"For Gmail: Use App Password, not regular password"})]})]}),(0,Da.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,Da.jsxs)("div",{children:[(0,Da.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[(0,Da.jsx)(xo,{className:"w-4 h-4 inline mr-1"}),"From Name"]}),(0,Da.jsx)("input",{type:"text",name:"from_name",value:c.from_name,onChange:g,placeholder:"AIVA Platform",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent"})]}),(0,Da.jsxs)("div",{children:[(0,Da.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[(0,Da.jsx)(xo,{className:"w-4 h-4 inline mr-1"}),"From Email"]}),(0,Da.jsx)("input",{type:"email",name:"from_email",value:c.from_email,onChange:g,placeholder:"noreply@yourdomain.com",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent"})]})]})]}),(0,Da.jsxs)("div",{className:"flex flex-wrap gap-3 mt-6 pt-6 border-t",children:[(0,Da.jsx)("button",{onClick:async()=>{n(!0);try{const e={smtp_host:c.host,smtp_port:c.port,smtp_secure:c.secure,smtp_user:c.user,smtp_password:c.password,smtp_from_name:c.from_name,smtp_from_email:c.from_email,smtp_enabled:c.enabled};await Ma.put("/settings/system",e),nr.success("SMTP configuration saved successfully!"),h(null)}catch(r){var e,t;console.error("Save config error:",r),nr.error((null===(e=r.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.message)||"Failed to save configuration")}finally{n(!1)}},disabled:r,className:"flex items-center px-6 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 disabled:opacity-50 disabled:cursor-not-allowed transition",children:r?(0,Da.jsxs)(Da.Fragment,{children:[(0,Da.jsx)(vi,{className:"w-5 h-5 mr-2 animate-spin"}),"Saving..."]}):(0,Da.jsxs)(Da.Fragment,{children:[(0,Da.jsx)(is,{className:"w-5 h-5 mr-2"}),"Save Configuration"]})}),(0,Da.jsx)("button",{onClick:async()=>{i(!0),h(null);try{const e=(await Ma.post("/settings/system/smtp/test",{config:{host:c.host,port:c.port,secure:c.secure,user:c.user,password:c.password}})).data.data;h(e),e.success?nr.success("SMTP connection successful!"):nr.error("Connection failed: ".concat(e.message))}catch(r){var e,t;console.error("Test connection error:",r);const n=(null===(e=r.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.message)||"Failed to test connection";h({success:!1,message:n}),nr.error(n)}finally{i(!1)}},disabled:s||!c.host||!c.user||!c.password,className:"flex items-center px-6 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed transition",children:s?(0,Da.jsxs)(Da.Fragment,{children:[(0,Da.jsx)(vi,{className:"w-5 h-5 mr-2 animate-spin"}),"Testing..."]}):(0,Da.jsxs)(Da.Fragment,{children:[(0,Da.jsx)(yo,{className:"w-5 h-5 mr-2"}),"Test Connection"]})})]}),m&&(0,Da.jsxs)("div",{className:"mt-4 p-4 rounded-lg flex items-start ".concat(m.success?"bg-green-50 border border-green-200":"bg-red-50 border border-red-200"),children:[m.success?(0,Da.jsx)(gs,{className:"w-5 h-5 text-green-600 mr-3 flex-shrink-0 mt-0.5"}):(0,Da.jsx)(gi,{className:"w-5 h-5 text-red-600 mr-3 flex-shrink-0 mt-0.5"}),(0,Da.jsxs)("div",{children:[(0,Da.jsx)("p",{className:"font-medium ".concat(m.success?"text-green-900":"text-red-900"),children:m.success?"Success!":"Failed"}),(0,Da.jsx)("p",{className:"text-sm mt-1 ".concat(m.success?"text-green-700":"text-red-700"),children:m.message})]})]})]}),(0,Da.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[(0,Da.jsxs)("div",{className:"flex items-center mb-4",children:[(0,Da.jsx)(Ks,{className:"w-6 h-6 text-primary-600 mr-3"}),(0,Da.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Send Test Email"})]}),(0,Da.jsx)("p",{className:"text-gray-600 mb-4",children:"Send a test email to verify that your SMTP configuration is working correctly."}),(0,Da.jsxs)("div",{className:"flex gap-3",children:[(0,Da.jsx)("div",{className:"flex-1",children:(0,Da.jsx)("input",{type:"email",value:u,onChange:e=>p(e.target.value),placeholder:"recipient@example.com",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent"})}),(0,Da.jsx)("button",{onClick:async()=>{if(u){i(!0),h(null);try{const e=(await Ma.post("/settings/system/smtp/test",{test_email:u})).data.data;h(e),e.success?nr.success("Test email sent successfully!"):nr.error("Test failed: ".concat(e.error||e.message))}catch(r){var e,t;console.error("Test email error:",r);const n=(null===(e=r.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.message)||"Failed to send test email";h({success:!1,message:n}),nr.error(n)}finally{i(!1)}}else nr.error("Please enter a test email address")},disabled:s||!u||"true"!==c.enabled,className:"flex items-center px-6 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 disabled:opacity-50 disabled:cursor-not-allowed transition",children:s?(0,Da.jsxs)(Da.Fragment,{children:[(0,Da.jsx)(vi,{className:"w-5 h-5 mr-2 animate-spin"}),"Sending..."]}):(0,Da.jsxs)(Da.Fragment,{children:[(0,Da.jsx)(Ks,{className:"w-5 h-5 mr-2"}),"Send Test"]})})]}),"true"!==c.enabled&&(0,Da.jsxs)("p",{className:"text-sm text-amber-600 mt-2 flex items-center",children:[(0,Da.jsx)(gi,{className:"w-4 h-4 mr-1"}),"Email sending is currently disabled. Enable it above to send test emails."]})]}),(0,Da.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mt-6",children:[(0,Da.jsx)("h3",{className:"font-semibold text-blue-900 mb-2",children:"\ud83d\udcf1 Gmail Configuration Tips"}),(0,Da.jsxs)("ol",{className:"list-decimal list-inside space-y-1 text-sm text-blue-800",children:[(0,Da.jsx)("li",{children:"Enable 2-Factor Authentication in your Google Account"}),(0,Da.jsx)("li",{children:"Go to Security \u2192 App passwords"}),(0,Da.jsx)("li",{children:'Generate a new app password for "Mail"'}),(0,Da.jsx)("li",{children:"Use the 16-character app password (not your regular password)"}),(0,Da.jsx)("li",{children:"Host: smtp.gmail.com, Port: 587, Security: TLS"})]})]})]})},wo=()=>{const[e,t]=(0,a.useState)(!0),[r,n]=(0,a.useState)(!1),[s,i]=(0,a.useState)(!1),[o,l]=(0,a.useState)({is_enabled:!1,threshold_value:10,recipient_emails:[],notification_frequency:"immediate"}),[c,d]=(0,a.useState)(""),[u,p]=(0,a.useState)(""),[m,h]=(0,a.useState)([]),[f,g]=(0,a.useState)(!1);(0,a.useEffect)(()=>{x()},[]);const x=async()=>{try{const e=await Ma.get("/settings/notifications/low_balance");e.data.data&&l(e.data.data)}catch(r){var e;404!==(null===(e=r.response)||void 0===e?void 0:e.status)&&(console.error("Load settings error:",r),nr.error("Failed to load notification settings"))}finally{t(!1)}},y=async()=>{try{const e=await Ma.get("/settings/notifications-logs?notification_type=low_balance&limit=20");h(e.data.data.logs||[])}catch(e){console.error("Load logs error:",e),nr.error("Failed to load notification logs")}},v=()=>{if(!c)return void nr.error("Please enter an email address");/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(c)?o.recipient_emails.includes(c)?nr.error("This email is already in the list"):(l(e=>qe(qe({},e),{},{recipient_emails:[...e.recipient_emails,c]})),d(""),nr.success("Email added")):nr.error("Please enter a valid email address")};return e?(0,Da.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,Da.jsx)(vi,{className:"w-8 h-8 animate-spin text-primary-600"})}):(0,Da.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,Da.jsxs)("div",{className:"mb-6",children:[(0,Da.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Notification Settings"}),(0,Da.jsx)("p",{className:"text-gray-600 mt-1",children:"Configure email alerts and notifications for your account"})]}),(0,Da.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-6",children:[(0,Da.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,Da.jsxs)("div",{className:"flex items-center",children:[(0,Da.jsx)(ro,{className:"w-6 h-6 text-amber-600 mr-3"}),(0,Da.jsxs)("div",{children:[(0,Da.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Low Balance Alert"}),(0,Da.jsx)("p",{className:"text-sm text-gray-600 mt-0.5",children:"Get notified when your credit balance falls below a threshold"})]})]}),(0,Da.jsxs)("label",{className:"flex items-center cursor-pointer",children:[(0,Da.jsx)("span",{className:"mr-3 text-sm font-medium text-gray-700",children:"Enabled"}),(0,Da.jsxs)("div",{className:"relative",children:[(0,Da.jsx)("input",{type:"checkbox",checked:o.is_enabled,onChange:e=>l(t=>qe(qe({},t),{},{is_enabled:e.target.checked})),className:"sr-only"}),(0,Da.jsx)("div",{className:"block w-14 h-8 rounded-full transition ".concat(o.is_enabled?"bg-primary-600":"bg-gray-300")}),(0,Da.jsx)("div",{className:"dot absolute left-1 top-1 bg-white w-6 h-6 rounded-full transition ".concat(o.is_enabled?"transform translate-x-6":"")})]})]})]}),(0,Da.jsxs)("div",{className:"space-y-6",children:[(0,Da.jsxs)("div",{children:[(0,Da.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[(0,Da.jsx)(Ka,{className:"w-4 h-4 inline mr-1"}),"Alert Threshold"]}),(0,Da.jsxs)("div",{className:"flex items-center",children:[(0,Da.jsx)("span",{className:"text-gray-500 mr-2",children:"$"}),(0,Da.jsx)("input",{type:"number",step:"0.01",min:"0",value:o.threshold_value,onChange:e=>l(t=>qe(qe({},t),{},{threshold_value:parseFloat(e.target.value)||0})),className:"w-32 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent"}),(0,Da.jsx)("span",{className:"text-sm text-gray-600 ml-3",children:"Alert when balance falls below this amount"})]}),(0,Da.jsx)("p",{className:"text-xs text-gray-500 mt-2",children:"\ud83d\udca1 Tip: Set this to at least 2-3 days worth of your average daily usage"})]}),(0,Da.jsxs)("div",{children:[(0,Da.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[(0,Da.jsx)(Ts,{className:"w-4 h-4 inline mr-1"}),"Notification Frequency"]}),(0,Da.jsxs)("select",{value:o.notification_frequency,onChange:e=>l(t=>qe(qe({},t),{},{notification_frequency:e.target.value})),className:"w-full md:w-64 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",children:[(0,Da.jsx)("option",{value:"immediate",children:"Immediate (once per day max)"}),(0,Da.jsx)("option",{value:"daily",children:"Daily Digest"}),(0,Da.jsx)("option",{value:"weekly",children:"Weekly Summary"})]}),(0,Da.jsx)("p",{className:"text-xs text-gray-500 mt-2",children:"Prevents spam by limiting notification frequency"})]}),(0,Da.jsxs)("div",{children:[(0,Da.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[(0,Da.jsx)(xo,{className:"w-4 h-4 inline mr-1"}),"Recipient Email Addresses"]}),(0,Da.jsxs)("div",{className:"flex gap-2 mb-3",children:[(0,Da.jsx)("input",{type:"email",value:c,onChange:e=>d(e.target.value),onKeyPress:e=>"Enter"===e.key&&v(),placeholder:"email@example.com",className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent"}),(0,Da.jsxs)("button",{onClick:v,className:"flex items-center px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition",children:[(0,Da.jsx)(Qa,{className:"w-5 h-5 mr-1"}),"Add"]})]}),0===o.recipient_emails.length?(0,Da.jsxs)("div",{className:"text-center py-8 bg-gray-50 rounded-lg border-2 border-dashed border-gray-300",children:[(0,Da.jsx)(xo,{className:"w-12 h-12 text-gray-400 mx-auto mb-2"}),(0,Da.jsx)("p",{className:"text-gray-600",children:"No recipients added yet"}),(0,Da.jsx)("p",{className:"text-sm text-gray-500",children:"Add email addresses to receive notifications"})]}):(0,Da.jsx)("div",{className:"space-y-2",children:o.recipient_emails.map((e,t)=>(0,Da.jsxs)("div",{className:"flex items-center justify-between px-4 py-3 bg-gray-50 rounded-lg border border-gray-200",children:[(0,Da.jsxs)("div",{className:"flex items-center",children:[(0,Da.jsx)(xo,{className:"w-4 h-4 text-gray-500 mr-2"}),(0,Da.jsx)("span",{className:"text-gray-900",children:e})]}),(0,Da.jsx)("button",{onClick:()=>(e=>{l(t=>qe(qe({},t),{},{recipient_emails:t.recipient_emails.filter(t=>t!==e)})),nr.success("Email removed")})(e),className:"text-red-600 hover:text-red-700 p-1 hover:bg-red-50 rounded transition",children:(0,Da.jsx)(ns,{className:"w-4 h-4"})})]},t))})]})]}),(0,Da.jsxs)("div",{className:"flex gap-3 mt-6 pt-6 border-t",children:[(0,Da.jsx)("button",{onClick:async()=>{n(!0);try{await Ma.put("/settings/notifications/low_balance",o),nr.success("Notification settings saved successfully!")}catch(r){var e,t;console.error("Save settings error:",r),nr.error((null===(e=r.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.message)||"Failed to save settings")}finally{n(!1)}},disabled:r||0===o.recipient_emails.length,className:"flex items-center px-6 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 disabled:opacity-50 disabled:cursor-not-allowed transition",children:r?(0,Da.jsxs)(Da.Fragment,{children:[(0,Da.jsx)(vi,{className:"w-5 h-5 mr-2 animate-spin"}),"Saving..."]}):(0,Da.jsxs)(Da.Fragment,{children:[(0,Da.jsx)(gs,{className:"w-5 h-5 mr-2"}),"Save Settings"]})}),(0,Da.jsxs)("button",{onClick:async()=>{f||await y(),g(!f)},className:"flex items-center px-6 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition",children:[(0,Da.jsx)(Hi,{className:"w-5 h-5 mr-2"}),f?"Hide":"View"," Notification History"]})]}),0===o.recipient_emails.length&&(0,Da.jsxs)("p",{className:"text-sm text-amber-600 mt-4 flex items-center",children:[(0,Da.jsx)(ro,{className:"w-4 h-4 mr-1"}),"Please add at least one recipient email address before saving"]})]}),(0,Da.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-6",children:[(0,Da.jsxs)("div",{className:"flex items-center mb-4",children:[(0,Da.jsx)(Ks,{className:"w-6 h-6 text-primary-600 mr-3"}),(0,Da.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Send Test Notification"})]}),(0,Da.jsx)("p",{className:"text-gray-600 mb-4",children:"Send a test low balance notification to verify your settings."}),(0,Da.jsxs)("div",{className:"flex gap-3",children:[(0,Da.jsx)("div",{className:"flex-1",children:(0,Da.jsx)("input",{type:"email",value:u,onChange:e=>p(e.target.value),placeholder:"recipient@example.com",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent"})}),(0,Da.jsx)("button",{onClick:async()=>{if(u){i(!0);try{await Ma.post("/settings/notifications/test",{notification_type:"low_balance",recipient_email:u}),nr.success("Test notification sent successfully!")}catch(r){var e,t;console.error("Test notification error:",r),nr.error((null===(e=r.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.message)||"Failed to send test notification")}finally{i(!1)}}else nr.error("Please enter a test email address")},disabled:s||!u,className:"flex items-center px-6 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 disabled:opacity-50 disabled:cursor-not-allowed transition",children:s?(0,Da.jsxs)(Da.Fragment,{children:[(0,Da.jsx)(vi,{className:"w-5 h-5 mr-2 animate-spin"}),"Sending..."]}):(0,Da.jsxs)(Da.Fragment,{children:[(0,Da.jsx)(Ks,{className:"w-5 h-5 mr-2"}),"Send Test"]})})]})]}),f&&(0,Da.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[(0,Da.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,Da.jsxs)("div",{className:"flex items-center",children:[(0,Da.jsx)(Ts,{className:"w-6 h-6 text-primary-600 mr-3"}),(0,Da.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Notification History"})]}),(0,Da.jsx)("button",{onClick:y,className:"text-primary-600 hover:text-primary-700 p-2 hover:bg-primary-50 rounded transition",children:(0,Da.jsx)(vi,{className:"w-5 h-5"})})]}),0===m.length?(0,Da.jsxs)("div",{className:"text-center py-8 bg-gray-50 rounded-lg",children:[(0,Da.jsx)(ri,{className:"w-12 h-12 text-gray-400 mx-auto mb-2"}),(0,Da.jsx)("p",{className:"text-gray-600",children:"No notifications sent yet"})]}):(0,Da.jsx)("div",{className:"space-y-3",children:m.map(e=>(0,Da.jsxs)("div",{className:"flex items-start justify-between p-4 rounded-lg border ".concat("sent"===e.status?"bg-green-50 border-green-200":"bg-red-50 border-red-200"),children:[(0,Da.jsxs)("div",{className:"flex items-start flex-1",children:["sent"===e.status?(0,Da.jsx)(gs,{className:"w-5 h-5 text-green-600 mr-3 flex-shrink-0 mt-0.5"}):(0,Da.jsx)(ro,{className:"w-5 h-5 text-red-600 mr-3 flex-shrink-0 mt-0.5"}),(0,Da.jsxs)("div",{className:"flex-1",children:[(0,Da.jsx)("p",{className:"font-medium ".concat("sent"===e.status?"text-green-900":"text-red-900"),children:e.recipient_email}),(0,Da.jsx)("p",{className:"text-sm text-gray-600 mt-0.5",children:e.subject}),e.error_message&&(0,Da.jsx)("p",{className:"text-sm text-red-700 mt-1",children:e.error_message})]})]}),(0,Da.jsx)("span",{className:"text-xs text-gray-500 ml-4 whitespace-nowrap",children:new Date(e.sent_at||e.created_at).toLocaleString()})]},e.id))})]}),(0,Da.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mt-6",children:[(0,Da.jsx)("h3",{className:"font-semibold text-blue-900 mb-2",children:"\ud83d\udca1 How Low Balance Alerts Work"}),(0,Da.jsxs)("ul",{className:"list-disc list-inside space-y-1 text-sm text-blue-800",children:[(0,Da.jsx)("li",{children:"Alerts are sent when your balance drops below the threshold"}),(0,Da.jsx)("li",{children:"Maximum one alert per 24 hours to prevent spam"}),(0,Da.jsx)("li",{children:"All recipients will receive the notification"}),(0,Da.jsx)("li",{children:"Notifications include current balance and threshold"}),(0,Da.jsx)("li",{children:"You'll receive a link to add more credits"})]})]})]})};function No(e){var t,r,n="";if("string"==typeof e||"number"==typeof e)n+=e;else if("object"==typeof e)if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(r=No(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}const ko=function(){for(var e,t,r=0,n="",a=arguments.length;r<a;r++)(e=arguments[r])&&(t=No(e))&&(n&&(n+=" "),n+=t);return n};var So=r(9889),_o=r.n(So),Co=r(620),Ao=r.n(Co),Oo=r(5268),Po=r.n(Oo),Eo=r(3097),To=r.n(Eo),Io=r(9160),Mo=r.n(Io),Do=r(9686),Ro=r.n(Do),Fo=function(e){return 0===e?0:e>0?1:-1},Lo=function(e){return Ao()(e)&&e.indexOf("%")===e.length-1},Bo=function(e){return Mo()(e)&&!Po()(e)},Uo=function(e){return Bo(e)||Ao()(e)},zo=0,qo=function(e){var t=++zo;return"".concat(e||"").concat(t)},Wo=function(e,t){var r,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(!Bo(e)&&!Ao()(e))return n;if(Lo(e)){var s=e.indexOf("%");r=t*parseFloat(e.slice(0,s))/100}else r=+e;return Po()(r)&&(r=n),a&&r>t&&(r=t),r},Vo=function(e){if(!e)return null;var t=Object.keys(e);return t&&t.length?e[t[0]]:null},Go=function(e,t){return Bo(e)&&Bo(t)?function(r){return e+r*(t-e)}:function(){return t}};function Ho(e,t,r){return e&&e.length?e.find(function(e){return e&&("function"===typeof t?t(e):To()(e,t))===r}):null}var Ko=function(e,t){return Bo(e)&&Bo(t)?e-t:Ao()(e)&&Ao()(t)?e.localeCompare(t):e instanceof Date&&t instanceof Date?e.getTime()-t.getTime():String(e).localeCompare(String(t))},Yo=function(e,t){for(var r=arguments.length,n=new Array(r>2?r-2:0),a=2;a<r;a++)n[a-2]=arguments[a]},Jo=r(1629),Xo=r.n(Jo),$o=r(6686),Qo=r.n($o),Zo=r(9062);function el(e,t){for(var r in e)if({}.hasOwnProperty.call(e,r)&&(!{}.hasOwnProperty.call(t,r)||e[r]!==t[r]))return!1;for(var n in t)if({}.hasOwnProperty.call(t,n)&&!{}.hasOwnProperty.call(e,n))return!1;return!0}function tl(e){return tl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},tl(e)}var rl=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],nl=["points","pathLength"],al={svg:["viewBox","children"],polygon:nl,polyline:nl},sl=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],il=function(e,t){if(!e||"function"===typeof e||"boolean"===typeof e)return null;var r=e;if((0,a.isValidElement)(e)&&(r=e.props),!Qo()(r))return null;var n={};return Object.keys(r).forEach(function(e){sl.includes(e)&&(n[e]=t||function(t){return r[e](r,t)})}),n},ol=function(e,t,r){if(!Qo()(e)||"object"!==tl(e))return null;var n=null;return Object.keys(e).forEach(function(a){var s=e[a];sl.includes(a)&&"function"===typeof s&&(n||(n={}),n[a]=function(e,t,r){return function(n){return e(t,r,n),null}}(s,t,r))}),n},ll=["children"],cl=["children"];function dl(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function ul(e){return ul="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ul(e)}var pl={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},ml=function(e){return"string"===typeof e?e:e?e.displayName||e.name||"Component":""},hl=null,fl=null,gl=function e(t){if(t===hl&&Array.isArray(fl))return fl;var r=[];return a.Children.forEach(t,function(t){Ro()(t)||((0,Zo.isFragment)(t)?r=r.concat(e(t.props.children)):r.push(t))}),fl=r,hl=t,r};function xl(e,t){var r=[],n=[];return n=Array.isArray(t)?t.map(function(e){return ml(e)}):[ml(t)],gl(e).forEach(function(e){var t=To()(e,"type.displayName")||To()(e,"type.name");-1!==n.indexOf(t)&&r.push(e)}),r}function yl(e,t){var r=xl(e,t);return r&&r[0]}var vl=function(e){if(!e||!e.props)return!1;var t=e.props,r=t.width,n=t.height;return!(!Bo(r)||r<=0||!Bo(n)||n<=0)},bl=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],jl=function(e){return e&&e.type&&Ao()(e.type)&&bl.indexOf(e.type)>=0},wl=function(e,t,r){if(!e||"function"===typeof e||"boolean"===typeof e)return null;var n=e;if((0,a.isValidElement)(e)&&(n=e.props),!Qo()(n))return null;var s={};return Object.keys(n).forEach(function(e){var a;(function(e,t,r,n){var a,s=null!==(a=null===al||void 0===al?void 0:al[n])&&void 0!==a?a:[];return t.startsWith("data-")||!Xo()(e)&&(n&&s.includes(t)||rl.includes(t))||r&&sl.includes(t)})(null===(a=n)||void 0===a?void 0:a[e],e,t,r)&&(s[e]=n[e])}),s},Nl=function e(t,r){if(t===r)return!0;var n=a.Children.count(t);if(n!==a.Children.count(r))return!1;if(0===n)return!0;if(1===n)return kl(Array.isArray(t)?t[0]:t,Array.isArray(r)?r[0]:r);for(var s=0;s<n;s++){var i=t[s],o=r[s];if(Array.isArray(i)||Array.isArray(o)){if(!e(i,o))return!1}else if(!kl(i,o))return!1}return!0},kl=function(e,t){if(Ro()(e)&&Ro()(t))return!0;if(!Ro()(e)&&!Ro()(t)){var r=e.props||{},n=r.children,a=dl(r,ll),s=t.props||{},i=s.children,o=dl(s,cl);return n&&i?el(a,o)&&Nl(n,i):!n&&!i&&el(a,o)}return!1},Sl=function(e,t){var r=[],n={};return gl(e).forEach(function(e,a){if(jl(e))r.push(e);else if(e){var s=ml(e.type),i=t[s]||{},o=i.handler,l=i.once;if(o&&(!l||!n[s])){var c=o(e,s,a);r.push(c),n[s]=!0}}}),r};function _l(e){return _l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_l(e)}function Cl(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Al(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Cl(Object(r),!0).forEach(function(t){Ol(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Cl(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function Ol(e,t,r){return t=function(e){var t=function(e,t){if("object"!=_l(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=_l(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==_l(t)?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Pl(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,s,i,o=[],l=!0,c=!1;try{if(s=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=s.call(r)).done)&&(o.push(n.value),o.length!==t);l=!0);}catch(e){c=!0,a=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(c)throw a}}return o}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return El(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return El(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function El(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Tl=(0,a.forwardRef)(function(e,t){var r=e.aspect,n=e.initialDimension,s=void 0===n?{width:-1,height:-1}:n,i=e.width,o=void 0===i?"100%":i,l=e.height,c=void 0===l?"100%":l,d=e.minWidth,u=void 0===d?0:d,p=e.minHeight,m=e.maxHeight,h=e.children,f=e.debounce,g=void 0===f?0:f,x=e.id,y=e.className,v=e.onResize,b=e.style,j=void 0===b?{}:b,w=(0,a.useRef)(null),N=(0,a.useRef)();N.current=v,(0,a.useImperativeHandle)(t,function(){return Object.defineProperty(w.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),w.current},configurable:!0})});var k=Pl((0,a.useState)({containerWidth:s.width,containerHeight:s.height}),2),S=k[0],_=k[1],C=(0,a.useCallback)(function(e,t){_(function(r){var n=Math.round(e),a=Math.round(t);return r.containerWidth===n&&r.containerHeight===a?r:{containerWidth:n,containerHeight:a}})},[]);(0,a.useEffect)(function(){var e=function(e){var t,r=e[0].contentRect,n=r.width,a=r.height;C(n,a),null===(t=N.current)||void 0===t||t.call(N,n,a)};g>0&&(e=_o()(e,g,{trailing:!0,leading:!1}));var t=new ResizeObserver(e),r=w.current.getBoundingClientRect(),n=r.width,a=r.height;return C(n,a),t.observe(w.current),function(){t.disconnect()}},[C,g]);var A=(0,a.useMemo)(function(){var e=S.containerWidth,t=S.containerHeight;if(e<0||t<0)return null;Yo(Lo(o)||Lo(c),"The width(%s) and height(%s) are both fixed numbers,\n       maybe you don't need to use a ResponsiveContainer.",o,c),Yo(!r||r>0,"The aspect(%s) must be greater than zero.",r);var n=Lo(o)?e:o,s=Lo(c)?t:c;r&&r>0&&(n?s=n/r:s&&(n=s*r),m&&s>m&&(s=m)),Yo(n>0||s>0,"The width(%s) and height(%s) of chart should be greater than 0,\n       please check the style of container, or the props width(%s) and height(%s),\n       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the\n       height and width.",n,s,o,c,u,p,r);var i=!Array.isArray(h)&&ml(h.type).endsWith("Chart");return a.Children.map(h,function(e){return a.isValidElement(e)?(0,a.cloneElement)(e,Al({width:n,height:s},i?{style:Al({height:"100%",width:"100%",maxHeight:s,maxWidth:n},e.props.style)}:{})):e})},[r,h,c,m,p,u,S,o]);return a.createElement("div",{id:x?"".concat(x):void 0,className:ko("recharts-responsive-container",y),style:Al(Al({},j),{},{width:o,height:c,minWidth:u,minHeight:p,maxHeight:m}),ref:w},A)}),Il=r(6604),Ml=r.n(Il),Dl=r(7424),Rl=r.n(Dl),Fl="Invariant failed";function Ll(e,t){if(!e)throw new Error(Fl)}var Bl=["children","width","height","viewBox","className","style","title","desc"];function Ul(){return Ul=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ul.apply(this,arguments)}function zl(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function ql(e){var t=e.children,r=e.width,n=e.height,s=e.viewBox,i=e.className,o=e.style,l=e.title,c=e.desc,d=zl(e,Bl),u=s||{width:r,height:n,x:0,y:0},p=ko("recharts-surface",i);return a.createElement("svg",Ul({},wl(d,!0,"svg"),{className:p,width:r,height:n,style:o,viewBox:"".concat(u.x," ").concat(u.y," ").concat(u.width," ").concat(u.height)}),a.createElement("title",null,l),a.createElement("desc",null,c),t)}var Wl=["children","className"];function Vl(){return Vl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Vl.apply(this,arguments)}function Gl(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var Hl=a.forwardRef(function(e,t){var r=e.children,n=e.className,s=Gl(e,Wl),i=ko("recharts-layer",n);return a.createElement("g",Vl({className:i},wl(s,!0),{ref:t}),r)});function Kl(e){return Kl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Kl(e)}function Yl(){return Yl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Yl.apply(this,arguments)}function Jl(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,s,i,o=[],l=!0,c=!1;try{if(s=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=s.call(r)).done)&&(o.push(n.value),o.length!==t);l=!0);}catch(e){c=!0,a=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(c)throw a}}return o}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Xl(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Xl(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Xl(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function $l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Ql(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?$l(Object(r),!0).forEach(function(t){Zl(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$l(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function Zl(e,t,r){return t=function(e){var t=function(e,t){if("object"!=Kl(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Kl(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Kl(t)?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ec(e){return Array.isArray(e)&&Uo(e[0])&&Uo(e[1])?e.join(" ~ "):e}var tc=function(e){var t=e.separator,r=void 0===t?" : ":t,n=e.contentStyle,s=void 0===n?{}:n,i=e.itemStyle,o=void 0===i?{}:i,l=e.labelStyle,c=void 0===l?{}:l,d=e.payload,u=e.formatter,p=e.itemSorter,m=e.wrapperClassName,h=e.labelClassName,f=e.label,g=e.labelFormatter,x=e.accessibilityLayer,y=void 0!==x&&x,v=Ql({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},s),b=Ql({margin:0},c),j=!Ro()(f),w=j?f:"",N=ko("recharts-default-tooltip",m),k=ko("recharts-tooltip-label",h);j&&g&&void 0!==d&&null!==d&&(w=g(f,d));var S=y?{role:"status","aria-live":"assertive"}:{};return a.createElement("div",Yl({className:N,style:v},S),a.createElement("p",{className:k,style:b},a.isValidElement(w)?w:"".concat(w)),function(){if(d&&d.length){var e=(p?Rl()(d,p):d).map(function(e,t){if("none"===e.type)return null;var n=Ql({display:"block",paddingTop:4,paddingBottom:4,color:e.color||"#000"},o),s=e.formatter||u||ec,i=e.value,l=e.name,c=i,p=l;if(s&&null!=c&&null!=p){var m=s(i,l,e,t,d);if(Array.isArray(m)){var h=Jl(m,2);c=h[0],p=h[1]}else c=m}return a.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(t),style:n},Uo(p)?a.createElement("span",{className:"recharts-tooltip-item-name"},p):null,Uo(p)?a.createElement("span",{className:"recharts-tooltip-item-separator"},r):null,a.createElement("span",{className:"recharts-tooltip-item-value"},c),a.createElement("span",{className:"recharts-tooltip-item-unit"},e.unit||""))});return a.createElement("ul",{className:"recharts-tooltip-item-list",style:{padding:0,margin:0}},e)}return null}())};function rc(e){return rc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},rc(e)}function nc(e,t,r){return t=function(e){var t=function(e,t){if("object"!=rc(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=rc(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==rc(t)?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var ac="recharts-tooltip-wrapper",sc={visibility:"hidden"};function ic(e){var t=e.coordinate,r=e.translateX,n=e.translateY;return ko(ac,nc(nc(nc(nc({},"".concat(ac,"-right"),Bo(r)&&t&&Bo(t.x)&&r>=t.x),"".concat(ac,"-left"),Bo(r)&&t&&Bo(t.x)&&r<t.x),"".concat(ac,"-bottom"),Bo(n)&&t&&Bo(t.y)&&n>=t.y),"".concat(ac,"-top"),Bo(n)&&t&&Bo(t.y)&&n<t.y))}function oc(e){var t=e.allowEscapeViewBox,r=e.coordinate,n=e.key,a=e.offsetTopLeft,s=e.position,i=e.reverseDirection,o=e.tooltipDimension,l=e.viewBox,c=e.viewBoxDimension;if(s&&Bo(s[n]))return s[n];var d=r[n]-o-a,u=r[n]+a;return t[n]?i[n]?d:u:i[n]?d<l[n]?Math.max(u,l[n]):Math.max(d,l[n]):u+o>l[n]+c?Math.max(d,l[n]):Math.max(u,l[n])}function lc(e){return lc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},lc(e)}function cc(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function dc(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?cc(Object(r),!0).forEach(function(t){gc(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):cc(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function uc(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,xc(n.key),n)}}function pc(e,t,r){return t=hc(t),function(e,t){if(t&&("object"===lc(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,mc()?Reflect.construct(t,r||[],hc(e).constructor):t.apply(e,r))}function mc(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(mc=function(){return!!e})()}function hc(e){return hc=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},hc(e)}function fc(e,t){return fc=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},fc(e,t)}function gc(e,t,r){return(t=xc(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function xc(e){var t=function(e,t){if("object"!=lc(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=lc(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==lc(t)?t:t+""}var yc=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return gc(e=pc(this,t,[].concat(n)),"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),gc(e,"handleKeyDown",function(t){var r,n,a,s;"Escape"===t.key&&e.setState({dismissed:!0,dismissedAtCoordinate:{x:null!==(r=null===(n=e.props.coordinate)||void 0===n?void 0:n.x)&&void 0!==r?r:0,y:null!==(a=null===(s=e.props.coordinate)||void 0===s?void 0:s.y)&&void 0!==a?a:0}})}),e}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&fc(e,t)}(t,e),r=t,n=[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var e=this.wrapperNode.getBoundingClientRect();(Math.abs(e.width-this.state.lastBoundingBox.width)>1||Math.abs(e.height-this.state.lastBoundingBox.height)>1)&&this.setState({lastBoundingBox:{width:e.width,height:e.height}})}else-1===this.state.lastBoundingBox.width&&-1===this.state.lastBoundingBox.height||this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var e,t;this.props.active&&this.updateBBox(),this.state.dismissed&&((null===(e=this.props.coordinate)||void 0===e?void 0:e.x)===this.state.dismissedAtCoordinate.x&&(null===(t=this.props.coordinate)||void 0===t?void 0:t.y)===this.state.dismissedAtCoordinate.y||(this.state.dismissed=!1))}},{key:"render",value:function(){var e=this,t=this.props,r=t.active,n=t.allowEscapeViewBox,s=t.animationDuration,i=t.animationEasing,o=t.children,l=t.coordinate,c=t.hasPayload,d=t.isAnimationActive,u=t.offset,p=t.position,m=t.reverseDirection,h=t.useTranslate3d,f=t.viewBox,g=t.wrapperStyle,x=function(e){var t,r,n=e.allowEscapeViewBox,a=e.coordinate,s=e.offsetTopLeft,i=e.position,o=e.reverseDirection,l=e.tooltipBox,c=e.useTranslate3d,d=e.viewBox;return{cssProperties:l.height>0&&l.width>0&&a?function(e){var t=e.translateX,r=e.translateY;return{transform:e.useTranslate3d?"translate3d(".concat(t,"px, ").concat(r,"px, 0)"):"translate(".concat(t,"px, ").concat(r,"px)")}}({translateX:t=oc({allowEscapeViewBox:n,coordinate:a,key:"x",offsetTopLeft:s,position:i,reverseDirection:o,tooltipDimension:l.width,viewBox:d,viewBoxDimension:d.width}),translateY:r=oc({allowEscapeViewBox:n,coordinate:a,key:"y",offsetTopLeft:s,position:i,reverseDirection:o,tooltipDimension:l.height,viewBox:d,viewBoxDimension:d.height}),useTranslate3d:c}):sc,cssClasses:ic({translateX:t,translateY:r,coordinate:a})}}({allowEscapeViewBox:n,coordinate:l,offsetTopLeft:u,position:p,reverseDirection:m,tooltipBox:this.state.lastBoundingBox,useTranslate3d:h,viewBox:f}),y=x.cssClasses,v=x.cssProperties,b=dc(dc({transition:d&&r?"transform ".concat(s,"ms ").concat(i):void 0},v),{},{pointerEvents:"none",visibility:!this.state.dismissed&&r&&c?"visible":"hidden",position:"absolute",top:0,left:0},g);return a.createElement("div",{tabIndex:-1,className:y,style:b,ref:function(t){e.wrapperNode=t}},o)}}],n&&uc(r.prototype,n),s&&uc(r,s),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,s}(a.PureComponent),vc={isSsr:!("undefined"!==typeof window&&window.document&&window.document.createElement&&window.setTimeout),get:function(e){return vc[e]},set:function(e,t){if("string"===typeof e)vc[e]=t;else{var r=Object.keys(e);r&&r.length&&r.forEach(function(t){vc[t]=e[t]})}}},bc=r(977),jc=r.n(bc);function wc(e,t,r){return!0===t?jc()(e,r):Xo()(t)?jc()(e,t):e}function Nc(e){return Nc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Nc(e)}function kc(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Sc(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?kc(Object(r),!0).forEach(function(t){Ec(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):kc(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function _c(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Tc(n.key),n)}}function Cc(e,t,r){return t=Oc(t),function(e,t){if(t&&("object"===Nc(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Ac()?Reflect.construct(t,r||[],Oc(e).constructor):t.apply(e,r))}function Ac(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(Ac=function(){return!!e})()}function Oc(e){return Oc=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Oc(e)}function Pc(e,t){return Pc=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Pc(e,t)}function Ec(e,t,r){return(t=Tc(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Tc(e){var t=function(e,t){if("object"!=Nc(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Nc(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Nc(t)?t:t+""}function Ic(e){return e.dataKey}var Mc=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Cc(this,t,arguments)}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Pc(e,t)}(t,e),r=t,n=[{key:"render",value:function(){var e=this,t=this.props,r=t.active,n=t.allowEscapeViewBox,s=t.animationDuration,i=t.animationEasing,o=t.content,l=t.coordinate,c=t.filterNull,d=t.isAnimationActive,u=t.offset,p=t.payload,m=t.payloadUniqBy,h=t.position,f=t.reverseDirection,g=t.useTranslate3d,x=t.viewBox,y=t.wrapperStyle,v=null!==p&&void 0!==p?p:[];c&&v.length&&(v=wc(p.filter(function(t){return null!=t.value&&(!0!==t.hide||e.props.includeHidden)}),m,Ic));var b=v.length>0;return a.createElement(yc,{allowEscapeViewBox:n,animationDuration:s,animationEasing:i,isAnimationActive:d,active:r,coordinate:l,hasPayload:b,offset:u,position:h,reverseDirection:f,useTranslate3d:g,viewBox:x,wrapperStyle:y},function(e,t){return a.isValidElement(e)?a.cloneElement(e,t):"function"===typeof e?a.createElement(e,t):a.createElement(tc,t)}(o,Sc(Sc({},this.props),{},{payload:v})))}}],n&&_c(r.prototype,n),s&&_c(r,s),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,s}(a.PureComponent);Ec(Mc,"displayName","Tooltip"),Ec(Mc,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!vc.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var Dc=r(643),Rc=r.n(Dc);Math.abs,Math.atan2;const Fc=Math.cos,Lc=(Math.max,Math.min,Math.sin),Bc=Math.sqrt,Uc=Math.PI,zc=2*Uc;const qc={draw(e,t){const r=Bc(t/Uc);e.moveTo(r,0),e.arc(0,0,r,0,zc)}},Wc={draw(e,t){const r=Bc(t/5)/2;e.moveTo(-3*r,-r),e.lineTo(-r,-r),e.lineTo(-r,-3*r),e.lineTo(r,-3*r),e.lineTo(r,-r),e.lineTo(3*r,-r),e.lineTo(3*r,r),e.lineTo(r,r),e.lineTo(r,3*r),e.lineTo(-r,3*r),e.lineTo(-r,r),e.lineTo(-3*r,r),e.closePath()}},Vc=Bc(1/3),Gc=2*Vc,Hc={draw(e,t){const r=Bc(t/Gc),n=r*Vc;e.moveTo(0,-r),e.lineTo(n,0),e.lineTo(0,r),e.lineTo(-n,0),e.closePath()}},Kc={draw(e,t){const r=Bc(t),n=-r/2;e.rect(n,n,r,r)}},Yc=Lc(Uc/10)/Lc(7*Uc/10),Jc=Lc(zc/10)*Yc,Xc=-Fc(zc/10)*Yc,$c={draw(e,t){const r=Bc(.8908130915292852*t),n=Jc*r,a=Xc*r;e.moveTo(0,-r),e.lineTo(n,a);for(let s=1;s<5;++s){const t=zc*s/5,i=Fc(t),o=Lc(t);e.lineTo(o*r,-i*r),e.lineTo(i*n-o*a,o*n+i*a)}e.closePath()}},Qc=Bc(3),Zc={draw(e,t){const r=-Bc(t/(3*Qc));e.moveTo(0,2*r),e.lineTo(-Qc*r,-r),e.lineTo(Qc*r,-r),e.closePath()}},ed=-.5,td=Bc(3)/2,rd=1/Bc(12),nd=3*(rd/2+1),ad={draw(e,t){const r=Bc(t/nd),n=r/2,a=r*rd,s=n,i=r*rd+r,o=-s,l=i;e.moveTo(n,a),e.lineTo(s,i),e.lineTo(o,l),e.lineTo(ed*n-td*a,td*n+ed*a),e.lineTo(ed*s-td*i,td*s+ed*i),e.lineTo(ed*o-td*l,td*o+ed*l),e.lineTo(ed*n+td*a,ed*a-td*n),e.lineTo(ed*s+td*i,ed*i-td*s),e.lineTo(ed*o+td*l,ed*l-td*o),e.closePath()}};function sd(e){return function(){return e}}var id,od,ld,cd,dd,ud,pd,md,hd,fd,gd,xd,yd,vd;const bd=Math.PI,jd=2*bd,wd=1e-6,Nd=jd-wd;function kd(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}class Sd{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=null==e?kd:function(e){let t=Math.floor(e);if(!(t>=0))throw new Error("invalid digits: ".concat(e));if(t>15)return kd;const r=10**t;return function(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=Math.round(arguments[t]*r)/r+e[t]}}(e)}moveTo(e,t){this._append(id||(id=Fe(["M",",",""])),this._x0=this._x1=+e,this._y0=this._y1=+t)}closePath(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._append(od||(od=Fe(["Z"]))))}lineTo(e,t){this._append(ld||(ld=Fe(["L",",",""])),this._x1=+e,this._y1=+t)}quadraticCurveTo(e,t,r,n){this._append(cd||(cd=Fe(["Q",",",",",",",""])),+e,+t,this._x1=+r,this._y1=+n)}bezierCurveTo(e,t,r,n,a,s){this._append(dd||(dd=Fe(["C",",",",",",",",",",",""])),+e,+t,+r,+n,this._x1=+a,this._y1=+s)}arcTo(e,t,r,n,a){if(e=+e,t=+t,r=+r,n=+n,(a=+a)<0)throw new Error("negative radius: ".concat(a));let s=this._x1,i=this._y1,o=r-e,l=n-t,c=s-e,d=i-t,u=c*c+d*d;if(null===this._x1)this._append(ud||(ud=Fe(["M",",",""])),this._x1=e,this._y1=t);else if(u>wd)if(Math.abs(d*o-l*c)>wd&&a){let p=r-s,m=n-i,h=o*o+l*l,f=p*p+m*m,g=Math.sqrt(h),x=Math.sqrt(u),y=a*Math.tan((bd-Math.acos((h+u-f)/(2*g*x)))/2),v=y/x,b=y/g;Math.abs(v-1)>wd&&this._append(md||(md=Fe(["L",",",""])),e+v*c,t+v*d),this._append(hd||(hd=Fe(["A",",",",0,0,",",",",",""])),a,a,+(d*p>c*m),this._x1=e+b*o,this._y1=t+b*l)}else this._append(pd||(pd=Fe(["L",",",""])),this._x1=e,this._y1=t);else;}arc(e,t,r,n,a,s){if(e=+e,t=+t,s=!!s,(r=+r)<0)throw new Error("negative radius: ".concat(r));let i=r*Math.cos(n),o=r*Math.sin(n),l=e+i,c=t+o,d=1^s,u=s?n-a:a-n;null===this._x1?this._append(fd||(fd=Fe(["M",",",""])),l,c):(Math.abs(this._x1-l)>wd||Math.abs(this._y1-c)>wd)&&this._append(gd||(gd=Fe(["L",",",""])),l,c),r&&(u<0&&(u=u%jd+jd),u>Nd?this._append(xd||(xd=Fe(["A",",",",0,1,",",",",","A",",",",0,1,",",",",",""])),r,r,d,e-i,t-o,r,r,d,this._x1=l,this._y1=c):u>wd&&this._append(yd||(yd=Fe(["A",",",",0,",",",",",",",""])),r,r,+(u>=bd),d,this._x1=e+r*Math.cos(a),this._y1=t+r*Math.sin(a)))}rect(e,t,r,n){this._append(vd||(vd=Fe(["M",",","h","v","h","Z"])),this._x0=this._x1=+e,this._y0=this._y1=+t,r=+r,+n,-r)}toString(){return this._}}function _d(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(null==r)t=null;else{const e=Math.floor(r);if(!(e>=0))throw new RangeError("invalid digits: ".concat(r));t=e}return e},()=>new Sd(t)}Bc(3),Bc(3);function Cd(e){return Cd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Cd(e)}var Ad=["type","size","sizeType"];function Od(){return Od=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Od.apply(this,arguments)}function Pd(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Ed(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Pd(Object(r),!0).forEach(function(t){Td(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Pd(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function Td(e,t,r){return t=function(e){var t=function(e,t){if("object"!=Cd(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Cd(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Cd(t)?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Id(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var Md={symbolCircle:qc,symbolCross:Wc,symbolDiamond:Hc,symbolSquare:Kc,symbolStar:$c,symbolTriangle:Zc,symbolWye:ad},Dd=Math.PI/180,Rd=function(e){var t=e.type,r=void 0===t?"circle":t,n=e.size,s=void 0===n?64:n,i=e.sizeType,o=void 0===i?"area":i,l=Ed(Ed({},Id(e,Ad)),{},{type:r,size:s,sizeType:o}),c=l.className,d=l.cx,u=l.cy,p=wl(l,!0);return d===+d&&u===+u&&s===+s?a.createElement("path",Od({},p,{className:ko("recharts-symbols",c),transform:"translate(".concat(d,", ").concat(u,")"),d:function(){var e=function(e){var t="symbol".concat(Rc()(e));return Md[t]||qc}(r),t=function(e,t){let r=null,n=_d(a);function a(){let a;if(r||(r=a=n()),e.apply(this,arguments).draw(r,+t.apply(this,arguments)),a)return r=null,a+""||null}return e="function"===typeof e?e:sd(e||qc),t="function"===typeof t?t:sd(void 0===t?64:+t),a.type=function(t){return arguments.length?(e="function"===typeof t?t:sd(t),a):e},a.size=function(e){return arguments.length?(t="function"===typeof e?e:sd(+e),a):t},a.context=function(e){return arguments.length?(r=null==e?null:e,a):r},a}().type(e).size(function(e,t,r){if("area"===t)return e;switch(r){case"cross":return 5*e*e/9;case"diamond":return.5*e*e/Math.sqrt(3);case"square":return e*e;case"star":var n=18*Dd;return 1.25*e*e*(Math.tan(n)-Math.tan(2*n)*Math.pow(Math.tan(n),2));case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}}(s,o,r));return t()}()})):null};function Fd(e){return Fd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Fd(e)}function Ld(){return Ld=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ld.apply(this,arguments)}function Bd(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Ud(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Hd(n.key),n)}}function zd(e,t,r){return t=Wd(t),function(e,t){if(t&&("object"===Fd(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,qd()?Reflect.construct(t,r||[],Wd(e).constructor):t.apply(e,r))}function qd(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(qd=function(){return!!e})()}function Wd(e){return Wd=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Wd(e)}function Vd(e,t){return Vd=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Vd(e,t)}function Gd(e,t,r){return(t=Hd(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Hd(e){var t=function(e,t){if("object"!=Fd(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Fd(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Fd(t)?t:t+""}Rd.registerSymbol=function(e,t){Md["symbol".concat(Rc()(e))]=t};var Kd=32,Yd=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),zd(this,t,arguments)}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Vd(e,t)}(t,e),r=t,n=[{key:"renderIcon",value:function(e){var t=this.props.inactiveColor,r=16,n=Kd/6,s=Kd/3,i=e.inactive?t:e.color;if("plainline"===e.type)return a.createElement("line",{strokeWidth:4,fill:"none",stroke:i,strokeDasharray:e.payload.strokeDasharray,x1:0,y1:r,x2:Kd,y2:r,className:"recharts-legend-icon"});if("line"===e.type)return a.createElement("path",{strokeWidth:4,fill:"none",stroke:i,d:"M0,".concat(r,"h").concat(s,"\n            A").concat(n,",").concat(n,",0,1,1,").concat(2*s,",").concat(r,"\n            H").concat(Kd,"M").concat(2*s,",").concat(r,"\n            A").concat(n,",").concat(n,",0,1,1,").concat(s,",").concat(r),className:"recharts-legend-icon"});if("rect"===e.type)return a.createElement("path",{stroke:"none",fill:i,d:"M0,".concat(4,"h").concat(Kd,"v").concat(24,"h").concat(-32,"z"),className:"recharts-legend-icon"});if(a.isValidElement(e.legendIcon)){var o=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Bd(Object(r),!0).forEach(function(t){Gd(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Bd(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({},e);return delete o.legendIcon,a.cloneElement(e.legendIcon,o)}return a.createElement(Rd,{fill:i,cx:r,cy:r,size:Kd,sizeType:"diameter",type:e.type})}},{key:"renderItems",value:function(){var e=this,t=this.props,r=t.payload,n=t.iconSize,s=t.layout,i=t.formatter,o=t.inactiveColor,l={x:0,y:0,width:Kd,height:Kd},c={display:"horizontal"===s?"inline-block":"block",marginRight:10},d={display:"inline-block",verticalAlign:"middle",marginRight:4};return r.map(function(t,r){var s=t.formatter||i,u=ko(Gd(Gd({"recharts-legend-item":!0},"legend-item-".concat(r),!0),"inactive",t.inactive));if("none"===t.type)return null;var p=Xo()(t.value)?null:t.value;Yo(!Xo()(t.value),'The name property is also required when using a function for the dataKey of a chart\'s cartesian components. Ex: <Bar name="Name of my Data"/>');var m=t.inactive?o:t.color;return a.createElement("li",Ld({className:u,style:c,key:"legend-item-".concat(r)},ol(e.props,t,r)),a.createElement(ql,{width:n,height:n,viewBox:l,style:d},e.renderIcon(t)),a.createElement("span",{className:"recharts-legend-item-text",style:{color:m}},s?s(p,t,r):p))})}},{key:"render",value:function(){var e=this.props,t=e.payload,r=e.layout,n=e.align;if(!t||!t.length)return null;var s={padding:0,margin:0,textAlign:"horizontal"===r?n:"left"};return a.createElement("ul",{className:"recharts-default-legend",style:s},this.renderItems())}}],n&&Ud(r.prototype,n),s&&Ud(r,s),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,s}(a.PureComponent);function Jd(e){return Jd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Jd(e)}Gd(Yd,"displayName","Legend"),Gd(Yd,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var Xd=["ref"];function $d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Qd(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?$d(Object(r),!0).forEach(function(t){au(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$d(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function Zd(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,su(n.key),n)}}function eu(e,t,r){return t=ru(t),function(e,t){if(t&&("object"===Jd(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,tu()?Reflect.construct(t,r||[],ru(e).constructor):t.apply(e,r))}function tu(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(tu=function(){return!!e})()}function ru(e){return ru=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ru(e)}function nu(e,t){return nu=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},nu(e,t)}function au(e,t,r){return(t=su(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function su(e){var t=function(e,t){if("object"!=Jd(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Jd(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Jd(t)?t:t+""}function iu(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function ou(e){return e.value}var lu=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return au(e=eu(this,t,[].concat(n)),"lastBoundingBox",{width:-1,height:-1}),e}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&nu(e,t)}(t,e),r=t,n=[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var e=this.wrapperNode.getBoundingClientRect();return e.height=this.wrapperNode.offsetHeight,e.width=this.wrapperNode.offsetWidth,e}return null}},{key:"updateBBox",value:function(){var e=this.props.onBBoxUpdate,t=this.getBBox();t?(Math.abs(t.width-this.lastBoundingBox.width)>1||Math.abs(t.height-this.lastBoundingBox.height)>1)&&(this.lastBoundingBox.width=t.width,this.lastBoundingBox.height=t.height,e&&e(t)):-1===this.lastBoundingBox.width&&-1===this.lastBoundingBox.height||(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,e&&e(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?Qd({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(e){var t,r,n=this.props,a=n.layout,s=n.align,i=n.verticalAlign,o=n.margin,l=n.chartWidth,c=n.chartHeight;return e&&(void 0!==e.left&&null!==e.left||void 0!==e.right&&null!==e.right)||(t="center"===s&&"vertical"===a?{left:((l||0)-this.getBBoxSnapshot().width)/2}:"right"===s?{right:o&&o.right||0}:{left:o&&o.left||0}),e&&(void 0!==e.top&&null!==e.top||void 0!==e.bottom&&null!==e.bottom)||(r="middle"===i?{top:((c||0)-this.getBBoxSnapshot().height)/2}:"bottom"===i?{bottom:o&&o.bottom||0}:{top:o&&o.top||0}),Qd(Qd({},t),r)}},{key:"render",value:function(){var e=this,t=this.props,r=t.content,n=t.width,s=t.height,i=t.wrapperStyle,o=t.payloadUniqBy,l=t.payload,c=Qd(Qd({position:"absolute",width:n||"auto",height:s||"auto"},this.getDefaultPosition(i)),i);return a.createElement("div",{className:"recharts-legend-wrapper",style:c,ref:function(t){e.wrapperNode=t}},function(e,t){if(a.isValidElement(e))return a.cloneElement(e,t);if("function"===typeof e)return a.createElement(e,t);t.ref;var r=iu(t,Xd);return a.createElement(Yd,r)}(r,Qd(Qd({},this.props),{},{payload:wc(l,o,ou)})))}}],s=[{key:"getWithHeight",value:function(e,t){var r=Qd(Qd({},this.defaultProps),e.props).layout;return"vertical"===r&&Bo(e.props.height)?{height:e.props.height}:"horizontal"===r?{width:e.props.width||t}:null}}],n&&Zd(r.prototype,n),s&&Zd(r,s),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,s}(a.PureComponent);function cu(){return cu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},cu.apply(this,arguments)}au(lu,"displayName","Legend"),au(lu,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var du=function(e){var t=e.cx,r=e.cy,n=e.r,s=e.className,i=ko("recharts-dot",s);return t===+t&&r===+r&&n===+n?a.createElement("circle",cu({},wl(e,!1),il(e),{className:i,cx:t,cy:r,r:n})):null},uu=r(5173),pu=r.n(uu),mu=Object.getOwnPropertyNames,hu=Object.getOwnPropertySymbols,fu=Object.prototype.hasOwnProperty;function gu(e,t){return function(r,n,a){return e(r,n,a)&&t(r,n,a)}}function xu(e){return function(t,r,n){if(!t||!r||"object"!==typeof t||"object"!==typeof r)return e(t,r,n);var a=n.cache,s=a.get(t),i=a.get(r);if(s&&i)return s===r&&i===t;a.set(t,r),a.set(r,t);var o=e(t,r,n);return a.delete(t),a.delete(r),o}}function yu(e){return mu(e).concat(hu(e))}var vu=Object.hasOwn||function(e,t){return fu.call(e,t)};function bu(e,t){return e===t||!e&&!t&&e!==e&&t!==t}var ju=Object.getOwnPropertyDescriptor,wu=Object.keys;function Nu(e,t,r){var n=e.length;if(t.length!==n)return!1;for(;n-- >0;)if(!r.equals(e[n],t[n],n,n,e,t,r))return!1;return!0}function ku(e,t){return bu(e.getTime(),t.getTime())}function Su(e,t){return e.name===t.name&&e.message===t.message&&e.cause===t.cause&&e.stack===t.stack}function _u(e,t){return e===t}function Cu(e,t,r){var n=e.size;if(n!==t.size)return!1;if(!n)return!0;for(var a,s,i=new Array(n),o=e.entries(),l=0;(a=o.next())&&!a.done;){for(var c=t.entries(),d=!1,u=0;(s=c.next())&&!s.done;)if(i[u])u++;else{var p=a.value,m=s.value;if(r.equals(p[0],m[0],l,u,e,t,r)&&r.equals(p[1],m[1],p[0],m[0],e,t,r)){d=i[u]=!0;break}u++}if(!d)return!1;l++}return!0}var Au=bu;function Ou(e,t,r){var n=wu(e),a=n.length;if(wu(t).length!==a)return!1;for(;a-- >0;)if(!Ru(e,t,r,n[a]))return!1;return!0}function Pu(e,t,r){var n,a,s,i=yu(e),o=i.length;if(yu(t).length!==o)return!1;for(;o-- >0;){if(!Ru(e,t,r,n=i[o]))return!1;if(a=ju(e,n),s=ju(t,n),(a||s)&&(!a||!s||a.configurable!==s.configurable||a.enumerable!==s.enumerable||a.writable!==s.writable))return!1}return!0}function Eu(e,t){return bu(e.valueOf(),t.valueOf())}function Tu(e,t){return e.source===t.source&&e.flags===t.flags}function Iu(e,t,r){var n=e.size;if(n!==t.size)return!1;if(!n)return!0;for(var a,s,i=new Array(n),o=e.values();(a=o.next())&&!a.done;){for(var l=t.values(),c=!1,d=0;(s=l.next())&&!s.done;){if(!i[d]&&r.equals(a.value,s.value,a.value,s.value,e,t,r)){c=i[d]=!0;break}d++}if(!c)return!1}return!0}function Mu(e,t){var r=e.length;if(t.length!==r)return!1;for(;r-- >0;)if(e[r]!==t[r])return!1;return!0}function Du(e,t){return e.hostname===t.hostname&&e.pathname===t.pathname&&e.protocol===t.protocol&&e.port===t.port&&e.hash===t.hash&&e.username===t.username&&e.password===t.password}function Ru(e,t,r,n){return!("_owner"!==n&&"__o"!==n&&"__v"!==n||!e.$$typeof&&!t.$$typeof)||vu(t,n)&&r.equals(e[n],t[n],n,n,e,t,r)}var Fu=Array.isArray,Lu="function"===typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView:null,Bu=Object.assign,Uu=Object.prototype.toString.call.bind(Object.prototype.toString);function zu(e){var t=e.areArraysEqual,r=e.areDatesEqual,n=e.areErrorsEqual,a=e.areFunctionsEqual,s=e.areMapsEqual,i=e.areNumbersEqual,o=e.areObjectsEqual,l=e.arePrimitiveWrappersEqual,c=e.areRegExpsEqual,d=e.areSetsEqual,u=e.areTypedArraysEqual,p=e.areUrlsEqual,m=e.unknownTagComparators;return function(e,h,f){if(e===h)return!0;if(null==e||null==h)return!1;var g=typeof e;if(g!==typeof h)return!1;if("object"!==g)return"number"===g?i(e,h,f):"function"===g&&a(e,h,f);var x=e.constructor;if(x!==h.constructor)return!1;if(x===Object)return o(e,h,f);if(Fu(e))return t(e,h,f);if(null!=Lu&&Lu(e))return u(e,h,f);if(x===Date)return r(e,h,f);if(x===RegExp)return c(e,h,f);if(x===Map)return s(e,h,f);if(x===Set)return d(e,h,f);var y=Uu(e);if("[object Date]"===y)return r(e,h,f);if("[object RegExp]"===y)return c(e,h,f);if("[object Map]"===y)return s(e,h,f);if("[object Set]"===y)return d(e,h,f);if("[object Object]"===y)return"function"!==typeof e.then&&"function"!==typeof h.then&&o(e,h,f);if("[object URL]"===y)return p(e,h,f);if("[object Error]"===y)return n(e,h,f);if("[object Arguments]"===y)return o(e,h,f);if("[object Boolean]"===y||"[object Number]"===y||"[object String]"===y)return l(e,h,f);if(m){var v=m[y];if(!v){var b=function(e){return null!=e?e[Symbol.toStringTag]:void 0}(e);b&&(v=m[b])}if(v)return v(e,h,f)}return!1}}var qu=Wu();Wu({strict:!0}),Wu({circular:!0}),Wu({circular:!0,strict:!0}),Wu({createInternalComparator:function(){return bu}}),Wu({strict:!0,createInternalComparator:function(){return bu}}),Wu({circular:!0,createInternalComparator:function(){return bu}}),Wu({circular:!0,createInternalComparator:function(){return bu},strict:!0});function Wu(e){void 0===e&&(e={});var t,r=e.circular,n=void 0!==r&&r,a=e.createInternalComparator,s=e.createState,i=e.strict,o=void 0!==i&&i,l=function(e){var t=e.circular,r=e.createCustomConfig,n=e.strict,a={areArraysEqual:n?Pu:Nu,areDatesEqual:ku,areErrorsEqual:Su,areFunctionsEqual:_u,areMapsEqual:n?gu(Cu,Pu):Cu,areNumbersEqual:Au,areObjectsEqual:n?Pu:Ou,arePrimitiveWrappersEqual:Eu,areRegExpsEqual:Tu,areSetsEqual:n?gu(Iu,Pu):Iu,areTypedArraysEqual:n?Pu:Mu,areUrlsEqual:Du,unknownTagComparators:void 0};if(r&&(a=Bu({},a,r(a))),t){var s=xu(a.areArraysEqual),i=xu(a.areMapsEqual),o=xu(a.areObjectsEqual),l=xu(a.areSetsEqual);a=Bu({},a,{areArraysEqual:s,areMapsEqual:i,areObjectsEqual:o,areSetsEqual:l})}return a}(e),c=zu(l),d=a?a(c):(t=c,function(e,r,n,a,s,i,o){return t(e,r,o)});return function(e){var t=e.circular,r=e.comparator,n=e.createState,a=e.equals,s=e.strict;if(n)return function(e,i){var o=n(),l=o.cache,c=void 0===l?t?new WeakMap:void 0:l,d=o.meta;return r(e,i,{cache:c,equals:a,meta:d,strict:s})};if(t)return function(e,t){return r(e,t,{cache:new WeakMap,equals:a,meta:void 0,strict:s})};var i={cache:void 0,equals:a,meta:void 0,strict:s};return function(e,t){return r(e,t,i)}}({circular:n,comparator:c,createState:s,equals:d,strict:o})}function Vu(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=-1;requestAnimationFrame(function n(a){r<0&&(r=a),a-r>t?(e(a),r=-1):function(e){"undefined"!==typeof requestAnimationFrame&&requestAnimationFrame(e)}(n)})}function Gu(e){return Gu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Gu(e)}function Hu(e){return function(e){if(Array.isArray(e))return e}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return Ku(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ku(e,t)}(e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ku(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Yu(){var e=function(){return null},t=!1,r=function r(n){if(!t){if(Array.isArray(n)){if(!n.length)return;var a=Hu(n),s=a[0],i=a.slice(1);return"number"===typeof s?void Vu(r.bind(null,i),s):(r(s),void Vu(r.bind(null,i)))}"object"===Gu(n)&&e(n),"function"===typeof n&&n()}};return{stop:function(){t=!0},start:function(e){t=!1,r(e)},subscribe:function(t){return e=t,function(){e=function(){return null}}}}}function Ju(e){return Ju="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ju(e)}function Xu(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function $u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Xu(Object(r),!0).forEach(function(t){Qu(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Xu(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function Qu(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==Ju(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==Ju(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Ju(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Zu=function(e){return e},ep=function(e,t){return Object.keys(t).reduce(function(r,n){return $u($u({},r),{},Qu({},n,e(n,t[n])))},{})},tp=function(e,t,r){return e.map(function(e){return"".concat((n=e,n.replace(/([A-Z])/g,function(e){return"-".concat(e.toLowerCase())}))," ").concat(t,"ms ").concat(r);var n}).join(",")};function rp(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,s,i,o=[],l=!0,c=!1;try{if(s=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=s.call(r)).done)&&(o.push(n.value),o.length!==t);l=!0);}catch(e){c=!0,a=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(c)throw a}}return o}}(e,t)||ap(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function np(e){return function(e){if(Array.isArray(e))return sp(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||ap(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ap(e,t){if(e){if("string"===typeof e)return sp(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?sp(e,t):void 0}}function sp(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var ip=1e-4,op=function(e,t){return[0,3*e,3*t-6*e,3*e-3*t+1]},lp=function(e,t){return e.map(function(e,r){return e*Math.pow(t,r)}).reduce(function(e,t){return e+t})},cp=function(e,t){return function(r){var n=op(e,t);return lp(n,r)}},dp=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=t[0],a=t[1],s=t[2],i=t[3];if(1===t.length)switch(t[0]){case"linear":n=0,a=0,s=1,i=1;break;case"ease":n=.25,a=.1,s=.25,i=1;break;case"ease-in":n=.42,a=0,s=1,i=1;break;case"ease-out":n=.42,a=0,s=.58,i=1;break;case"ease-in-out":n=0,a=0,s=.58,i=1;break;default:var o=t[0].split("(");if("cubic-bezier"===o[0]&&4===o[1].split(")")[0].split(",").length){var l=rp(o[1].split(")")[0].split(",").map(function(e){return parseFloat(e)}),4);n=l[0],a=l[1],s=l[2],i=l[3]}}[n,s,a,i].every(function(e){return"number"===typeof e&&e>=0&&e<=1});var c,d,u=cp(n,s),p=cp(a,i),m=(c=n,d=s,function(e){var t=op(c,d),r=[].concat(np(t.map(function(e,t){return e*t}).slice(1)),[0]);return lp(r,e)}),h=function(e){return e>1?1:e<0?0:e},f=function(e){for(var t=e>1?1:e,r=t,n=0;n<8;++n){var a=u(r)-t,s=m(r);if(Math.abs(a-t)<ip||s<ip)return p(r);r=h(r-a/s)}return p(r)};return f.isStepper=!1,f},up=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=t[0];if("string"===typeof n)switch(n){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return dp(n);case"spring":return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.stiff,r=void 0===t?100:t,n=e.damping,a=void 0===n?8:n,s=e.dt,i=void 0===s?17:s,o=function(e,t,n){var s=n+(-(e-t)*r-n*a)*i/1e3,o=n*i/1e3+e;return Math.abs(o-t)<ip&&Math.abs(s)<ip?[t,0]:[o,s]};return o.isStepper=!0,o.dt=i,o}();default:if("cubic-bezier"===n.split("(")[0])return dp(n)}return"function"===typeof n?n:null};function pp(e){return pp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pp(e)}function mp(e){return function(e){if(Array.isArray(e))return vp(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||yp(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function hp(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function fp(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?hp(Object(r),!0).forEach(function(t){gp(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):hp(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function gp(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==pp(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==pp(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===pp(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function xp(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,s,i,o=[],l=!0,c=!1;try{if(s=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=s.call(r)).done)&&(o.push(n.value),o.length!==t);l=!0);}catch(e){c=!0,a=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(c)throw a}}return o}}(e,t)||yp(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function yp(e,t){if(e){if("string"===typeof e)return vp(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?vp(e,t):void 0}}function vp(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var bp=function(e,t,r){return e+(t-e)*r},jp=function(e){return e.from!==e.to},wp=function e(t,r,n){var a=ep(function(e,r){if(jp(r)){var n=xp(t(r.from,r.to,r.velocity),2),a=n[0],s=n[1];return fp(fp({},r),{},{from:a,velocity:s})}return r},r);return n<1?ep(function(e,t){return jp(t)?fp(fp({},t),{},{velocity:bp(t.velocity,a[e].velocity,n),from:bp(t.from,a[e].from,n)}):t},r):e(t,a,n-1)};const Np=function(e,t,r,n,a){var s,i,o,l,c=(s=e,i=t,[Object.keys(s),Object.keys(i)].reduce(function(e,t){return e.filter(function(e){return t.includes(e)})})),d=c.reduce(function(r,n){return fp(fp({},r),{},gp({},n,[e[n],t[n]]))},{}),u=c.reduce(function(r,n){return fp(fp({},r),{},gp({},n,{from:e[n],velocity:0,to:t[n]}))},{}),p=-1,m=function(){return null};return m=r.isStepper?function(n){o||(o=n);var s=(n-o)/r.dt;u=wp(r,u,s),a(fp(fp(fp({},e),t),ep(function(e,t){return t.from},u))),o=n,Object.values(u).filter(jp).length&&(p=requestAnimationFrame(m))}:function(s){l||(l=s);var i=(s-l)/n,o=ep(function(e,t){return bp.apply(void 0,mp(t).concat([r(i)]))},d);if(a(fp(fp(fp({},e),t),o)),i<1)p=requestAnimationFrame(m);else{var c=ep(function(e,t){return bp.apply(void 0,mp(t).concat([r(1)]))},d);a(fp(fp(fp({},e),t),c))}},function(){return requestAnimationFrame(m),function(){cancelAnimationFrame(p)}}};function kp(e){return kp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},kp(e)}var Sp=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function _p(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},s=Object.keys(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Cp(e){return function(e){if(Array.isArray(e))return Ap(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return Ap(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ap(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ap(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Op(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Pp(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Op(Object(r),!0).forEach(function(t){Ep(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Op(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function Ep(e,t,r){return(t=Ip(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Tp(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Ip(n.key),n)}}function Ip(e){var t=function(e,t){if("object"!==kp(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==kp(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===kp(t)?t:String(t)}function Mp(e,t){return Mp=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Mp(e,t)}function Dp(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(We){return!1}}();return function(){var r,n=Lp(e);if(t){var a=Lp(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return Rp(this,r)}}function Rp(e,t){if(t&&("object"===kp(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Fp(e)}function Fp(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Lp(e){return Lp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Lp(e)}var Bp=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Mp(e,t)}(i,e);var t,r,n,s=Dp(i);function i(e,t){var r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i);var n=(r=s.call(this,e,t)).props,a=n.isActive,o=n.attributeName,l=n.from,c=n.to,d=n.steps,u=n.children,p=n.duration;if(r.handleStyleChange=r.handleStyleChange.bind(Fp(r)),r.changeStyle=r.changeStyle.bind(Fp(r)),!a||p<=0)return r.state={style:{}},"function"===typeof u&&(r.state={style:c}),Rp(r);if(d&&d.length)r.state={style:d[0].style};else if(l){if("function"===typeof u)return r.state={style:l},Rp(r);r.state={style:o?Ep({},o,l):l}}else r.state={style:{}};return r}return t=i,r=[{key:"componentDidMount",value:function(){var e=this.props,t=e.isActive,r=e.canBegin;this.mounted=!0,t&&r&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(e){var t=this.props,r=t.isActive,n=t.canBegin,a=t.attributeName,s=t.shouldReAnimate,i=t.to,o=t.from,l=this.state.style;if(n)if(r){if(!(qu(e.to,i)&&e.canBegin&&e.isActive)){var c=!e.canBegin||!e.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var d=c||s?o:e.to;if(this.state&&l){var u={style:a?Ep({},a,d):d};(a&&l[a]!==d||!a&&l!==d)&&this.setState(u)}this.runAnimation(Pp(Pp({},this.props),{},{from:d,begin:0}))}}else{var p={style:a?Ep({},a,i):i};this.state&&l&&(a&&l[a]!==i||!a&&l!==i)&&this.setState(p)}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var e=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),e&&e()}},{key:"handleStyleChange",value:function(e){this.changeStyle(e)}},{key:"changeStyle",value:function(e){this.mounted&&this.setState({style:e})}},{key:"runJSAnimation",value:function(e){var t=this,r=e.from,n=e.to,a=e.duration,s=e.easing,i=e.begin,o=e.onAnimationEnd,l=e.onAnimationStart,c=Np(r,n,up(s),a,this.changeStyle);this.manager.start([l,i,function(){t.stopJSAnimation=c()},a,o])}},{key:"runStepAnimation",value:function(e){var t=this,r=e.steps,n=e.begin,a=e.onAnimationStart,s=r[0],i=s.style,o=s.duration,l=void 0===o?0:o;return this.manager.start([a].concat(Cp(r.reduce(function(e,n,a){if(0===a)return e;var s=n.duration,i=n.easing,o=void 0===i?"ease":i,l=n.style,c=n.properties,d=n.onAnimationEnd,u=a>0?r[a-1]:n,p=c||Object.keys(l);if("function"===typeof o||"spring"===o)return[].concat(Cp(e),[t.runJSAnimation.bind(t,{from:u.style,to:l,duration:s,easing:o}),s]);var m=tp(p,s,o),h=Pp(Pp(Pp({},u.style),l),{},{transition:m});return[].concat(Cp(e),[h,s,d]).filter(Zu)},[i,Math.max(l,n)])),[e.onAnimationEnd]))}},{key:"runAnimation",value:function(e){this.manager||(this.manager=Yu());var t=e.begin,r=e.duration,n=e.attributeName,a=e.to,s=e.easing,i=e.onAnimationStart,o=e.onAnimationEnd,l=e.steps,c=e.children,d=this.manager;if(this.unSubscribe=d.subscribe(this.handleStyleChange),"function"!==typeof s&&"function"!==typeof c&&"spring"!==s)if(l.length>1)this.runStepAnimation(e);else{var u=n?Ep({},n,a):a,p=tp(Object.keys(u),r,s);d.start([i,t,Pp(Pp({},u),{},{transition:p}),r,o])}else this.runJSAnimation(e)}},{key:"render",value:function(){var e=this.props,t=e.children,r=(e.begin,e.duration),n=(e.attributeName,e.easing,e.isActive),s=(e.steps,e.from,e.to,e.canBegin,e.onAnimationEnd,e.shouldReAnimate,e.onAnimationReStart,_p(e,Sp)),i=a.Children.count(t),o=this.state.style;if("function"===typeof t)return t(o);if(!n||0===i||r<=0)return t;var l=function(e){var t=e.props,r=t.style,n=void 0===r?{}:r,i=t.className;return(0,a.cloneElement)(e,Pp(Pp({},s),{},{style:Pp(Pp({},n),o),className:i}))};return 1===i?l(a.Children.only(t)):a.createElement("div",null,a.Children.map(t,function(e){return l(e)}))}}],r&&Tp(t.prototype,r),n&&Tp(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}(a.PureComponent);Bp.displayName="Animate",Bp.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}},Bp.propTypes={from:pu().oneOfType([pu().object,pu().string]),to:pu().oneOfType([pu().object,pu().string]),attributeName:pu().string,duration:pu().number,begin:pu().number,easing:pu().oneOfType([pu().string,pu().func]),steps:pu().arrayOf(pu().shape({duration:pu().number.isRequired,style:pu().object.isRequired,easing:pu().oneOfType([pu().oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),pu().func]),properties:pu().arrayOf("string"),onAnimationEnd:pu().func})),children:pu().oneOfType([pu().node,pu().func]),isActive:pu().bool,canBegin:pu().bool,onAnimationEnd:pu().func,shouldReAnimate:pu().bool,onAnimationStart:pu().func,onAnimationReStart:pu().func};const Up=Bp;function zp(e){return zp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zp(e)}function qp(){return qp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},qp.apply(this,arguments)}function Wp(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,s,i,o=[],l=!0,c=!1;try{if(s=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=s.call(r)).done)&&(o.push(n.value),o.length!==t);l=!0);}catch(e){c=!0,a=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(c)throw a}}return o}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Vp(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Vp(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Vp(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Gp(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Hp(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Gp(Object(r),!0).forEach(function(t){Kp(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Gp(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function Kp(e,t,r){return t=function(e){var t=function(e,t){if("object"!=zp(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=zp(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==zp(t)?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Yp=function(e,t,r,n,a){var s,i=Math.min(Math.abs(r)/2,Math.abs(n)/2),o=n>=0?1:-1,l=r>=0?1:-1,c=n>=0&&r>=0||n<0&&r<0?1:0;if(i>0&&a instanceof Array){for(var d=[0,0,0,0],u=0;u<4;u++)d[u]=a[u]>i?i:a[u];s="M".concat(e,",").concat(t+o*d[0]),d[0]>0&&(s+="A ".concat(d[0],",").concat(d[0],",0,0,").concat(c,",").concat(e+l*d[0],",").concat(t)),s+="L ".concat(e+r-l*d[1],",").concat(t),d[1]>0&&(s+="A ".concat(d[1],",").concat(d[1],",0,0,").concat(c,",\n        ").concat(e+r,",").concat(t+o*d[1])),s+="L ".concat(e+r,",").concat(t+n-o*d[2]),d[2]>0&&(s+="A ".concat(d[2],",").concat(d[2],",0,0,").concat(c,",\n        ").concat(e+r-l*d[2],",").concat(t+n)),s+="L ".concat(e+l*d[3],",").concat(t+n),d[3]>0&&(s+="A ".concat(d[3],",").concat(d[3],",0,0,").concat(c,",\n        ").concat(e,",").concat(t+n-o*d[3])),s+="Z"}else if(i>0&&a===+a&&a>0){var p=Math.min(i,a);s="M ".concat(e,",").concat(t+o*p,"\n            A ").concat(p,",").concat(p,",0,0,").concat(c,",").concat(e+l*p,",").concat(t,"\n            L ").concat(e+r-l*p,",").concat(t,"\n            A ").concat(p,",").concat(p,",0,0,").concat(c,",").concat(e+r,",").concat(t+o*p,"\n            L ").concat(e+r,",").concat(t+n-o*p,"\n            A ").concat(p,",").concat(p,",0,0,").concat(c,",").concat(e+r-l*p,",").concat(t+n,"\n            L ").concat(e+l*p,",").concat(t+n,"\n            A ").concat(p,",").concat(p,",0,0,").concat(c,",").concat(e,",").concat(t+n-o*p," Z")}else s="M ".concat(e,",").concat(t," h ").concat(r," v ").concat(n," h ").concat(-r," Z");return s},Jp=function(e,t){if(!e||!t)return!1;var r=e.x,n=e.y,a=t.x,s=t.y,i=t.width,o=t.height;if(Math.abs(i)>0&&Math.abs(o)>0){var l=Math.min(a,a+i),c=Math.max(a,a+i),d=Math.min(s,s+o),u=Math.max(s,s+o);return r>=l&&r<=c&&n>=d&&n<=u}return!1},Xp={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},$p=function(e){var t=Hp(Hp({},Xp),e),r=(0,a.useRef)(),n=Wp((0,a.useState)(-1),2),s=n[0],i=n[1];(0,a.useEffect)(function(){if(r.current&&r.current.getTotalLength)try{var e=r.current.getTotalLength();e&&i(e)}catch(t){}},[]);var o=t.x,l=t.y,c=t.width,d=t.height,u=t.radius,p=t.className,m=t.animationEasing,h=t.animationDuration,f=t.animationBegin,g=t.isAnimationActive,x=t.isUpdateAnimationActive;if(o!==+o||l!==+l||c!==+c||d!==+d||0===c||0===d)return null;var y=ko("recharts-rectangle",p);return x?a.createElement(Up,{canBegin:s>0,from:{width:c,height:d,x:o,y:l},to:{width:c,height:d,x:o,y:l},duration:h,animationEasing:m,isActive:x},function(e){var n=e.width,i=e.height,o=e.x,l=e.y;return a.createElement(Up,{canBegin:s>0,from:"0px ".concat(-1===s?1:s,"px"),to:"".concat(s,"px 0px"),attributeName:"strokeDasharray",begin:f,duration:h,isActive:g,easing:m},a.createElement("path",qp({},wl(t,!0),{className:y,d:Yp(o,l,n,i,u),ref:r})))}):a.createElement("path",qp({},wl(t,!0),{className:y,d:Yp(o,l,c,d,u)}))};function Qp(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e)}return this}function Zp(e,t){switch(arguments.length){case 0:break;case 1:"function"===typeof e?this.interpolator(e):this.range(e);break;default:this.domain(e),"function"===typeof t?this.interpolator(t):this.range(t)}return this}class em extends Map{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:am;if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:t}}),null!=e)for(const[r,n]of e)this.set(r,n)}get(e){return super.get(tm(this,e))}has(e){return super.has(tm(this,e))}set(e,t){return super.set(rm(this,e),t)}delete(e){return super.delete(nm(this,e))}}Set;function tm(e,t){let{_intern:r,_key:n}=e;const a=n(t);return r.has(a)?r.get(a):t}function rm(e,t){let{_intern:r,_key:n}=e;const a=n(t);return r.has(a)?r.get(a):(r.set(a,t),t)}function nm(e,t){let{_intern:r,_key:n}=e;const a=n(t);return r.has(a)&&(t=r.get(a),r.delete(a)),t}function am(e){return null!==e&&"object"===typeof e?e.valueOf():e}const sm=Symbol("implicit");function im(){var e=new em,t=[],r=[],n=sm;function a(a){let s=e.get(a);if(void 0===s){if(n!==sm)return n;e.set(a,s=t.push(a)-1)}return r[s%r.length]}return a.domain=function(r){if(!arguments.length)return t.slice();t=[],e=new em;for(const n of r)e.has(n)||e.set(n,t.push(n)-1);return a},a.range=function(e){return arguments.length?(r=Array.from(e),a):r.slice()},a.unknown=function(e){return arguments.length?(n=e,a):n},a.copy=function(){return im(t,r).unknown(n)},Qp.apply(a,arguments),a}function om(){var e,t,r=im().unknown(void 0),n=r.domain,a=r.range,s=0,i=1,o=!1,l=0,c=0,d=.5;function u(){var r=n().length,u=i<s,p=u?i:s,m=u?s:i;e=(m-p)/Math.max(1,r-l+2*c),o&&(e=Math.floor(e)),p+=(m-p-e*(r-l))*d,t=e*(1-l),o&&(p=Math.round(p),t=Math.round(t));var h=function(e,t,r){e=+e,t=+t,r=(a=arguments.length)<2?(t=e,e=0,1):a<3?1:+r;for(var n=-1,a=0|Math.max(0,Math.ceil((t-e)/r)),s=new Array(a);++n<a;)s[n]=e+n*r;return s}(r).map(function(t){return p+e*t});return a(u?h.reverse():h)}return delete r.unknown,r.domain=function(e){return arguments.length?(n(e),u()):n()},r.range=function(e){return arguments.length?([s,i]=e,s=+s,i=+i,u()):[s,i]},r.rangeRound=function(e){return[s,i]=e,s=+s,i=+i,o=!0,u()},r.bandwidth=function(){return t},r.step=function(){return e},r.round=function(e){return arguments.length?(o=!!e,u()):o},r.padding=function(e){return arguments.length?(l=Math.min(1,c=+e),u()):l},r.paddingInner=function(e){return arguments.length?(l=Math.min(1,e),u()):l},r.paddingOuter=function(e){return arguments.length?(c=+e,u()):c},r.align=function(e){return arguments.length?(d=Math.max(0,Math.min(1,e)),u()):d},r.copy=function(){return om(n(),[s,i]).round(o).paddingInner(l).paddingOuter(c).align(d)},Qp.apply(u(),arguments)}function lm(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return lm(t())},e}function cm(){return lm(om.apply(null,arguments).paddingInner(1))}function dm(e){return dm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},dm(e)}function um(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function pm(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?um(Object(r),!0).forEach(function(t){mm(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):um(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function mm(e,t,r){return t=function(e){var t=function(e,t){if("object"!=dm(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=dm(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==dm(t)?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var hm={widthCache:{},cacheCount:0},fm={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},gm="recharts_measurement_span";var xm=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(void 0===e||null===e||vc.isSsr)return{width:0,height:0};var r=function(e){var t=pm({},e);return Object.keys(t).forEach(function(e){t[e]||delete t[e]}),t}(t),n=JSON.stringify({text:e,copyStyle:r});if(hm.widthCache[n])return hm.widthCache[n];try{var a=document.getElementById(gm);a||((a=document.createElement("span")).setAttribute("id",gm),a.setAttribute("aria-hidden","true"),document.body.appendChild(a));var s=pm(pm({},fm),r);Object.assign(a.style,s),a.textContent="".concat(e);var i=a.getBoundingClientRect(),o={width:i.width,height:i.height};return hm.widthCache[n]=o,++hm.cacheCount>2e3&&(hm.cacheCount=0,hm.widthCache={}),o}catch(We){return{width:0,height:0}}};function ym(e){return ym="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ym(e)}function vm(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,s,i,o=[],l=!0,c=!1;try{if(s=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=s.call(r)).done)&&(o.push(n.value),o.length!==t);l=!0);}catch(e){c=!0,a=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(c)throw a}}return o}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return bm(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return bm(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function bm(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function jm(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,wm(n.key),n)}}function wm(e){var t=function(e,t){if("object"!=ym(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=ym(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ym(t)?t:t+""}var Nm=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,km=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,Sm=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,_m=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,Cm={cm:96/2.54,mm:96/25.4,pt:96/72,pc:16,in:96,Q:96/101.6,px:1},Am=Object.keys(Cm),Om="NaN";var Pm=function(){function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.num=t,this.unit=r,this.num=t,this.unit=r,Number.isNaN(t)&&(this.unit=""),""===r||Sm.test(r)||(this.num=NaN,this.unit=""),Am.includes(r)&&(this.num=function(e,t){return e*Cm[t]}(t,r),this.unit="px")}return t=e,n=[{key:"parse",value:function(t){var r,n=vm(null!==(r=_m.exec(t))&&void 0!==r?r:[],3),a=n[1],s=n[2];return new e(parseFloat(a),null!==s&&void 0!==s?s:"")}}],(r=[{key:"add",value:function(t){return this.unit!==t.unit?new e(NaN,""):new e(this.num+t.num,this.unit)}},{key:"subtract",value:function(t){return this.unit!==t.unit?new e(NaN,""):new e(this.num-t.num,this.unit)}},{key:"multiply",value:function(t){return""!==this.unit&&""!==t.unit&&this.unit!==t.unit?new e(NaN,""):new e(this.num*t.num,this.unit||t.unit)}},{key:"divide",value:function(t){return""!==this.unit&&""!==t.unit&&this.unit!==t.unit?new e(NaN,""):new e(this.num/t.num,this.unit||t.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}])&&jm(t.prototype,r),n&&jm(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r,n}();function Em(e){if(e.includes(Om))return Om;for(var t=e;t.includes("*")||t.includes("/");){var r,n=vm(null!==(r=Nm.exec(t))&&void 0!==r?r:[],4),a=n[1],s=n[2],i=n[3],o=Pm.parse(null!==a&&void 0!==a?a:""),l=Pm.parse(null!==i&&void 0!==i?i:""),c="*"===s?o.multiply(l):o.divide(l);if(c.isNaN())return Om;t=t.replace(Nm,c.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var d,u=vm(null!==(d=km.exec(t))&&void 0!==d?d:[],4),p=u[1],m=u[2],h=u[3],f=Pm.parse(null!==p&&void 0!==p?p:""),g=Pm.parse(null!==h&&void 0!==h?h:""),x="+"===m?f.add(g):f.subtract(g);if(x.isNaN())return Om;t=t.replace(km,x.toString())}return t}var Tm=/\(([^()]*)\)/;function Im(e){var t=e.replace(/\s+/g,"");return t=function(e){for(var t=e;t.includes("(");){var r=vm(Tm.exec(t),2)[1];t=t.replace(Tm,Em(r))}return t}(t),t=Em(t)}function Mm(e){var t=function(e){try{return Im(e)}catch(We){return Om}}(e.slice(5,-1));return t===Om?"":t}var Dm=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],Rm=["dx","dy","angle","className","breakAll"];function Fm(){return Fm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Fm.apply(this,arguments)}function Lm(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Bm(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,s,i,o=[],l=!0,c=!1;try{if(s=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=s.call(r)).done)&&(o.push(n.value),o.length!==t);l=!0);}catch(e){c=!0,a=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(c)throw a}}return o}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Um(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Um(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Um(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var zm=/[ \f\n\r\t\v\u2028\u2029]+/,qm=function(e){var t=e.children,r=e.breakAll,n=e.style;try{var a=[];return Ro()(t)||(a=r?t.toString().split(""):t.toString().split(zm)),{wordsWithComputedWidth:a.map(function(e){return{word:e,width:xm(e,n).width}}),spaceWidth:r?0:xm("\xa0",n).width}}catch(We){return null}},Wm=function(e){return[{words:Ro()(e)?[]:e.toString().split(zm)}]},Vm=function(e){var t=e.width,r=e.scaleToFit,n=e.children,a=e.style,s=e.breakAll,i=e.maxLines;if((t||r)&&!vc.isSsr){var o=qm({breakAll:s,children:n,style:a});return o?function(e,t,r,n,a){var s=e.maxLines,i=e.children,o=e.style,l=e.breakAll,c=Bo(s),d=i,u=function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).reduce(function(e,t){var s=t.word,i=t.width,o=e[e.length-1];if(o&&(null==n||a||o.width+i+r<Number(n)))o.words.push(s),o.width+=i+r;else{var l={words:[s],width:i};e.push(l)}return e},[])},p=u(t);if(!c)return p;for(var m,h=function(e){var t=d.slice(0,e),r=qm({breakAll:l,style:o,children:t+"\u2026"}).wordsWithComputedWidth,a=u(r),i=a.length>s||function(e){return e.reduce(function(e,t){return e.width>t.width?e:t})}(a).width>Number(n);return[i,a]},f=0,g=d.length-1,x=0;f<=g&&x<=d.length-1;){var y=Math.floor((f+g)/2),v=Bm(h(y-1),2),b=v[0],j=v[1],w=Bm(h(y),1)[0];if(b||w||(f=y+1),b&&w&&(g=y-1),!b&&w){m=j;break}x++}return m||p}({breakAll:s,children:n,maxLines:i,style:a},o.wordsWithComputedWidth,o.spaceWidth,t,r):Wm(n)}return Wm(n)},Gm="#808080",Hm=function(e){var t=e.x,r=void 0===t?0:t,n=e.y,s=void 0===n?0:n,i=e.lineHeight,o=void 0===i?"1em":i,l=e.capHeight,c=void 0===l?"0.71em":l,d=e.scaleToFit,u=void 0!==d&&d,p=e.textAnchor,m=void 0===p?"start":p,h=e.verticalAnchor,f=void 0===h?"end":h,g=e.fill,x=void 0===g?Gm:g,y=Lm(e,Dm),v=(0,a.useMemo)(function(){return Vm({breakAll:y.breakAll,children:y.children,maxLines:y.maxLines,scaleToFit:u,style:y.style,width:y.width})},[y.breakAll,y.children,y.maxLines,u,y.style,y.width]),b=y.dx,j=y.dy,w=y.angle,N=y.className,k=y.breakAll,S=Lm(y,Rm);if(!Uo(r)||!Uo(s))return null;var _,C=r+(Bo(b)?b:0),A=s+(Bo(j)?j:0);switch(f){case"start":_=Mm("calc(".concat(c,")"));break;case"middle":_=Mm("calc(".concat((v.length-1)/2," * -").concat(o," + (").concat(c," / 2))"));break;default:_=Mm("calc(".concat(v.length-1," * -").concat(o,")"))}var O=[];if(u){var P=v[0].width,E=y.width;O.push("scale(".concat((Bo(E)?E/P:1)/P,")"))}return w&&O.push("rotate(".concat(w,", ").concat(C,", ").concat(A,")")),O.length&&(S.transform=O.join(" ")),a.createElement("text",Fm({},wl(S,!0),{x:C,y:A,className:ko("recharts-text",N),textAnchor:m,fill:x.includes("url")?Gm:x}),v.map(function(e,t){var r=e.words.join(k?"":" ");return a.createElement("tspan",{x:C,dy:0===t?_:o,key:"".concat(r,"-").concat(t)},r)}))};const Km=Math.sqrt(50),Ym=Math.sqrt(10),Jm=Math.sqrt(2);function Xm(e,t,r){const n=(t-e)/Math.max(0,r),a=Math.floor(Math.log10(n)),s=n/Math.pow(10,a),i=s>=Km?10:s>=Ym?5:s>=Jm?2:1;let o,l,c;return a<0?(c=Math.pow(10,-a)/i,o=Math.round(e*c),l=Math.round(t*c),o/c<e&&++o,l/c>t&&--l,c=-c):(c=Math.pow(10,a)*i,o=Math.round(e/c),l=Math.round(t/c),o*c<e&&++o,l*c>t&&--l),l<o&&.5<=r&&r<2?Xm(e,t,2*r):[o,l,c]}function $m(e,t,r){if(!((r=+r)>0))return[];if((e=+e)===(t=+t))return[e];const n=t<e,[a,s,i]=n?Xm(t,e,r):Xm(e,t,r);if(!(s>=a))return[];const o=s-a+1,l=new Array(o);if(n)if(i<0)for(let c=0;c<o;++c)l[c]=(s-c)/-i;else for(let c=0;c<o;++c)l[c]=(s-c)*i;else if(i<0)for(let c=0;c<o;++c)l[c]=(a+c)/-i;else for(let c=0;c<o;++c)l[c]=(a+c)*i;return l}function Qm(e,t,r){return Xm(e=+e,t=+t,r=+r)[2]}function Zm(e,t,r){r=+r;const n=(t=+t)<(e=+e),a=n?Qm(t,e,r):Qm(e,t,r);return(n?-1:1)*(a<0?1/-a:a)}function eh(e,t){return null==e||null==t?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function th(e,t){return null==e||null==t?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function rh(e){let t,r,n;function a(e,n){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length;if(a<s){if(0!==t(n,n))return s;do{const t=a+s>>>1;r(e[t],n)<0?a=t+1:s=t}while(a<s)}return a}return 2!==e.length?(t=eh,r=(t,r)=>eh(e(t),r),n=(t,r)=>e(t)-r):(t=e===eh||e===th?e:nh,r=e,n=e),{left:a,center:function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const s=a(e,t,r,(arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length)-1);return s>r&&n(e[s-1],t)>-n(e[s],t)?s-1:s},right:function(e,n){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length;if(a<s){if(0!==t(n,n))return s;do{const t=a+s>>>1;r(e[t],n)<=0?a=t+1:s=t}while(a<s)}return a}}}function nh(){return 0}function ah(e){return null===e?NaN:+e}const sh=rh(eh),ih=sh.right,oh=(sh.left,rh(ah).center,ih);function lh(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function ch(e,t){var r=Object.create(e.prototype);for(var n in t)r[n]=t[n];return r}function dh(){}var uh=.7,ph=1/uh,mh="\\s*([+-]?\\d+)\\s*",hh="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",fh="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",gh=/^#([0-9a-f]{3,8})$/,xh=new RegExp("^rgb\\(".concat(mh,",").concat(mh,",").concat(mh,"\\)$")),yh=new RegExp("^rgb\\(".concat(fh,",").concat(fh,",").concat(fh,"\\)$")),vh=new RegExp("^rgba\\(".concat(mh,",").concat(mh,",").concat(mh,",").concat(hh,"\\)$")),bh=new RegExp("^rgba\\(".concat(fh,",").concat(fh,",").concat(fh,",").concat(hh,"\\)$")),jh=new RegExp("^hsl\\(".concat(hh,",").concat(fh,",").concat(fh,"\\)$")),wh=new RegExp("^hsla\\(".concat(hh,",").concat(fh,",").concat(fh,",").concat(hh,"\\)$")),Nh={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function kh(){return this.rgb().formatHex()}function Sh(){return this.rgb().formatRgb()}function _h(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=gh.exec(e))?(r=t[1].length,t=parseInt(t[1],16),6===r?Ch(t):3===r?new Ph(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===r?Ah(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===r?Ah(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=xh.exec(e))?new Ph(t[1],t[2],t[3],1):(t=yh.exec(e))?new Ph(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=vh.exec(e))?Ah(t[1],t[2],t[3],t[4]):(t=bh.exec(e))?Ah(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=jh.exec(e))?Rh(t[1],t[2]/100,t[3]/100,1):(t=wh.exec(e))?Rh(t[1],t[2]/100,t[3]/100,t[4]):Nh.hasOwnProperty(e)?Ch(Nh[e]):"transparent"===e?new Ph(NaN,NaN,NaN,0):null}function Ch(e){return new Ph(e>>16&255,e>>8&255,255&e,1)}function Ah(e,t,r,n){return n<=0&&(e=t=r=NaN),new Ph(e,t,r,n)}function Oh(e,t,r,n){return 1===arguments.length?function(e){return e instanceof dh||(e=_h(e)),e?new Ph((e=e.rgb()).r,e.g,e.b,e.opacity):new Ph}(e):new Ph(e,t,r,null==n?1:n)}function Ph(e,t,r,n){this.r=+e,this.g=+t,this.b=+r,this.opacity=+n}function Eh(){return"#".concat(Dh(this.r)).concat(Dh(this.g)).concat(Dh(this.b))}function Th(){const e=Ih(this.opacity);return"".concat(1===e?"rgb(":"rgba(").concat(Mh(this.r),", ").concat(Mh(this.g),", ").concat(Mh(this.b)).concat(1===e?")":", ".concat(e,")"))}function Ih(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Mh(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Dh(e){return((e=Mh(e))<16?"0":"")+e.toString(16)}function Rh(e,t,r,n){return n<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new Lh(e,t,r,n)}function Fh(e){if(e instanceof Lh)return new Lh(e.h,e.s,e.l,e.opacity);if(e instanceof dh||(e=_h(e)),!e)return new Lh;if(e instanceof Lh)return e;var t=(e=e.rgb()).r/255,r=e.g/255,n=e.b/255,a=Math.min(t,r,n),s=Math.max(t,r,n),i=NaN,o=s-a,l=(s+a)/2;return o?(i=t===s?(r-n)/o+6*(r<n):r===s?(n-t)/o+2:(t-r)/o+4,o/=l<.5?s+a:2-s-a,i*=60):o=l>0&&l<1?0:i,new Lh(i,o,l,e.opacity)}function Lh(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}function Bh(e){return(e=(e||0)%360)<0?e+360:e}function Uh(e){return Math.max(0,Math.min(1,e||0))}function zh(e,t,r){return 255*(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)}function qh(e,t,r,n,a){var s=e*e,i=s*e;return((1-3*e+3*s-i)*t+(4-6*s+3*i)*r+(1+3*e+3*s-3*i)*n+i*a)/6}lh(dh,_h,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:kh,formatHex:kh,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return Fh(this).formatHsl()},formatRgb:Sh,toString:Sh}),lh(Ph,Oh,ch(dh,{brighter(e){return e=null==e?ph:Math.pow(ph,e),new Ph(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=null==e?uh:Math.pow(uh,e),new Ph(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Ph(Mh(this.r),Mh(this.g),Mh(this.b),Ih(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Eh,formatHex:Eh,formatHex8:function(){return"#".concat(Dh(this.r)).concat(Dh(this.g)).concat(Dh(this.b)).concat(Dh(255*(isNaN(this.opacity)?1:this.opacity)))},formatRgb:Th,toString:Th})),lh(Lh,function(e,t,r,n){return 1===arguments.length?Fh(e):new Lh(e,t,r,null==n?1:n)},ch(dh,{brighter(e){return e=null==e?ph:Math.pow(ph,e),new Lh(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=null==e?uh:Math.pow(uh,e),new Lh(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,a=2*r-n;return new Ph(zh(e>=240?e-240:e+120,a,n),zh(e,a,n),zh(e<120?e+240:e-120,a,n),this.opacity)},clamp(){return new Lh(Bh(this.h),Uh(this.s),Uh(this.l),Ih(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Ih(this.opacity);return"".concat(1===e?"hsl(":"hsla(").concat(Bh(this.h),", ").concat(100*Uh(this.s),"%, ").concat(100*Uh(this.l),"%").concat(1===e?")":", ".concat(e,")"))}}));const Wh=e=>()=>e;function Vh(e,t){return function(r){return e+r*t}}function Gh(e){return 1===(e=+e)?Hh:function(t,r){return r-t?function(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(n){return Math.pow(e+n*t,r)}}(t,r,e):Wh(isNaN(t)?r:t)}}function Hh(e,t){var r=t-e;return r?Vh(e,r):Wh(isNaN(e)?t:e)}const Kh=function e(t){var r=Gh(t);function n(e,t){var n=r((e=Oh(e)).r,(t=Oh(t)).r),a=r(e.g,t.g),s=r(e.b,t.b),i=Hh(e.opacity,t.opacity);return function(t){return e.r=n(t),e.g=a(t),e.b=s(t),e.opacity=i(t),e+""}}return n.gamma=e,n}(1);function Yh(e){return function(t){var r,n,a=t.length,s=new Array(a),i=new Array(a),o=new Array(a);for(r=0;r<a;++r)n=Oh(t[r]),s[r]=n.r||0,i[r]=n.g||0,o[r]=n.b||0;return s=e(s),i=e(i),o=e(o),n.opacity=1,function(e){return n.r=s(e),n.g=i(e),n.b=o(e),n+""}}}Yh(function(e){var t=e.length-1;return function(r){var n=r<=0?r=0:r>=1?(r=1,t-1):Math.floor(r*t),a=e[n],s=e[n+1],i=n>0?e[n-1]:2*a-s,o=n<t-1?e[n+2]:2*s-a;return qh((r-n/t)*t,i,a,s,o)}}),Yh(function(e){var t=e.length;return function(r){var n=Math.floor(((r%=1)<0?++r:r)*t),a=e[(n+t-1)%t],s=e[n%t],i=e[(n+1)%t],o=e[(n+2)%t];return qh((r-n/t)*t,a,s,i,o)}});function Jh(e,t){var r,n=t?t.length:0,a=e?Math.min(n,e.length):0,s=new Array(a),i=new Array(n);for(r=0;r<a;++r)s[r]=nf(e[r],t[r]);for(;r<n;++r)i[r]=t[r];return function(e){for(r=0;r<a;++r)i[r]=s[r](e);return i}}function Xh(e,t){var r=new Date;return e=+e,t=+t,function(n){return r.setTime(e*(1-n)+t*n),r}}function $h(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function Qh(e,t){var r,n={},a={};for(r in null!==e&&"object"===typeof e||(e={}),null!==t&&"object"===typeof t||(t={}),t)r in e?n[r]=nf(e[r],t[r]):a[r]=t[r];return function(e){for(r in n)a[r]=n[r](e);return a}}var Zh=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,ef=new RegExp(Zh.source,"g");function tf(e,t){var r,n,a,s=Zh.lastIndex=ef.lastIndex=0,i=-1,o=[],l=[];for(e+="",t+="";(r=Zh.exec(e))&&(n=ef.exec(t));)(a=n.index)>s&&(a=t.slice(s,a),o[i]?o[i]+=a:o[++i]=a),(r=r[0])===(n=n[0])?o[i]?o[i]+=n:o[++i]=n:(o[++i]=null,l.push({i:i,x:$h(r,n)})),s=ef.lastIndex;return s<t.length&&(a=t.slice(s),o[i]?o[i]+=a:o[++i]=a),o.length<2?l[0]?function(e){return function(t){return e(t)+""}}(l[0].x):function(e){return function(){return e}}(t):(t=l.length,function(e){for(var r,n=0;n<t;++n)o[(r=l[n]).i]=r.x(e);return o.join("")})}function rf(e,t){t||(t=[]);var r,n=e?Math.min(t.length,e.length):0,a=t.slice();return function(s){for(r=0;r<n;++r)a[r]=e[r]*(1-s)+t[r]*s;return a}}function nf(e,t){var r,n,a=typeof t;return null==t||"boolean"===a?Wh(t):("number"===a?$h:"string"===a?(r=_h(t))?(t=r,Kh):tf:t instanceof _h?Kh:t instanceof Date?Xh:(n=t,!ArrayBuffer.isView(n)||n instanceof DataView?Array.isArray(t)?Jh:"function"!==typeof t.valueOf&&"function"!==typeof t.toString||isNaN(t)?Qh:$h:rf))(e,t)}function af(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}function sf(e){return+e}var of=[0,1];function lf(e){return e}function cf(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:(r=isNaN(t)?NaN:.5,function(){return r});var r}function df(e,t,r){var n=e[0],a=e[1],s=t[0],i=t[1];return a<n?(n=cf(a,n),s=r(i,s)):(n=cf(n,a),s=r(s,i)),function(e){return s(n(e))}}function uf(e,t,r){var n=Math.min(e.length,t.length)-1,a=new Array(n),s=new Array(n),i=-1;for(e[n]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++i<n;)a[i]=cf(e[i],e[i+1]),s[i]=r(t[i],t[i+1]);return function(t){var r=oh(e,t,1,n)-1;return s[r](a[r](t))}}function pf(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function mf(){var e,t,r,n,a,s,i=of,o=of,l=nf,c=lf;function d(){var e=Math.min(i.length,o.length);return c!==lf&&(c=function(e,t){var r;return e>t&&(r=e,e=t,t=r),function(r){return Math.max(e,Math.min(t,r))}}(i[0],i[e-1])),n=e>2?uf:df,a=s=null,u}function u(t){return null==t||isNaN(t=+t)?r:(a||(a=n(i.map(e),o,l)))(e(c(t)))}return u.invert=function(r){return c(t((s||(s=n(o,i.map(e),$h)))(r)))},u.domain=function(e){return arguments.length?(i=Array.from(e,sf),d()):i.slice()},u.range=function(e){return arguments.length?(o=Array.from(e),d()):o.slice()},u.rangeRound=function(e){return o=Array.from(e),l=af,d()},u.clamp=function(e){return arguments.length?(c=!!e||lf,d()):c!==lf},u.interpolate=function(e){return arguments.length?(l=e,d()):l},u.unknown=function(e){return arguments.length?(r=e,u):r},function(r,n){return e=r,t=n,d()}}function hf(){return mf()(lf,lf)}var ff,gf=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function xf(e){if(!(t=gf.exec(e)))throw new Error("invalid format: "+e);var t;return new yf({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}function yf(e){this.fill=void 0===e.fill?" ":e.fill+"",this.align=void 0===e.align?">":e.align+"",this.sign=void 0===e.sign?"-":e.sign+"",this.symbol=void 0===e.symbol?"":e.symbol+"",this.zero=!!e.zero,this.width=void 0===e.width?void 0:+e.width,this.comma=!!e.comma,this.precision=void 0===e.precision?void 0:+e.precision,this.trim=!!e.trim,this.type=void 0===e.type?"":e.type+""}function vf(e,t){if((r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var r,n=e.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+e.slice(r+1)]}function bf(e){return(e=vf(Math.abs(e)))?e[1]:NaN}function jf(e,t){var r=vf(e,t);if(!r)return e+"";var n=r[0],a=r[1];return a<0?"0."+new Array(-a).join("0")+n:n.length>a+1?n.slice(0,a+1)+"."+n.slice(a+1):n+new Array(a-n.length+2).join("0")}xf.prototype=yf.prototype,yf.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};const wf={"%":(e,t)=>(100*e).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:function(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)},e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>jf(100*e,t),r:jf,s:function(e,t){var r=vf(e,t);if(!r)return e+"";var n=r[0],a=r[1],s=a-(ff=3*Math.max(-8,Math.min(8,Math.floor(a/3))))+1,i=n.length;return s===i?n:s>i?n+new Array(s-i+1).join("0"):s>0?n.slice(0,s)+"."+n.slice(s):"0."+new Array(1-s).join("0")+vf(e,Math.max(0,t+s-1))[0]},X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function Nf(e){return e}var kf,Sf,_f,Cf=Array.prototype.map,Af=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"];function Of(e){var t,r,n=void 0===e.grouping||void 0===e.thousands?Nf:(t=Cf.call(e.grouping,Number),r=e.thousands+"",function(e,n){for(var a=e.length,s=[],i=0,o=t[0],l=0;a>0&&o>0&&(l+o+1>n&&(o=Math.max(1,n-l)),s.push(e.substring(a-=o,a+o)),!((l+=o+1)>n));)o=t[i=(i+1)%t.length];return s.reverse().join(r)}),a=void 0===e.currency?"":e.currency[0]+"",s=void 0===e.currency?"":e.currency[1]+"",i=void 0===e.decimal?".":e.decimal+"",o=void 0===e.numerals?Nf:function(e){return function(t){return t.replace(/[0-9]/g,function(t){return e[+t]})}}(Cf.call(e.numerals,String)),l=void 0===e.percent?"%":e.percent+"",c=void 0===e.minus?"\u2212":e.minus+"",d=void 0===e.nan?"NaN":e.nan+"";function u(e){var t=(e=xf(e)).fill,r=e.align,u=e.sign,p=e.symbol,m=e.zero,h=e.width,f=e.comma,g=e.precision,x=e.trim,y=e.type;"n"===y?(f=!0,y="g"):wf[y]||(void 0===g&&(g=12),x=!0,y="g"),(m||"0"===t&&"="===r)&&(m=!0,t="0",r="=");var v="$"===p?a:"#"===p&&/[boxX]/.test(y)?"0"+y.toLowerCase():"",b="$"===p?s:/[%p]/.test(y)?l:"",j=wf[y],w=/[defgprs%]/.test(y);function N(e){var a,s,l,p=v,N=b;if("c"===y)N=j(e)+N,e="";else{var k=(e=+e)<0||1/e<0;if(e=isNaN(e)?d:j(Math.abs(e),g),x&&(e=function(e){e:for(var t,r=e.length,n=1,a=-1;n<r;++n)switch(e[n]){case".":a=t=n;break;case"0":0===a&&(a=n),t=n;break;default:if(!+e[n])break e;a>0&&(a=0)}return a>0?e.slice(0,a)+e.slice(t+1):e}(e)),k&&0===+e&&"+"!==u&&(k=!1),p=(k?"("===u?u:c:"-"===u||"("===u?"":u)+p,N=("s"===y?Af[8+ff/3]:"")+N+(k&&"("===u?")":""),w)for(a=-1,s=e.length;++a<s;)if(48>(l=e.charCodeAt(a))||l>57){N=(46===l?i+e.slice(a+1):e.slice(a))+N,e=e.slice(0,a);break}}f&&!m&&(e=n(e,1/0));var S=p.length+e.length+N.length,_=S<h?new Array(h-S+1).join(t):"";switch(f&&m&&(e=n(_+e,_.length?h-N.length:1/0),_=""),r){case"<":e=p+e+N+_;break;case"=":e=p+_+e+N;break;case"^":e=_.slice(0,S=_.length>>1)+p+e+N+_.slice(S);break;default:e=_+p+e+N}return o(e)}return g=void 0===g?6:/[gprs]/.test(y)?Math.max(1,Math.min(21,g)):Math.max(0,Math.min(20,g)),N.toString=function(){return e+""},N}return{format:u,formatPrefix:function(e,t){var r=u(((e=xf(e)).type="f",e)),n=3*Math.max(-8,Math.min(8,Math.floor(bf(t)/3))),a=Math.pow(10,-n),s=Af[8+n/3];return function(e){return r(a*e)+s}}}}function Pf(e,t,r,n){var a,s=Zm(e,t,r);switch((n=xf(null==n?",f":n)).type){case"s":var i=Math.max(Math.abs(e),Math.abs(t));return null!=n.precision||isNaN(a=function(e,t){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(bf(t)/3)))-bf(Math.abs(e)))}(s,i))||(n.precision=a),_f(n,i);case"":case"e":case"g":case"p":case"r":null!=n.precision||isNaN(a=function(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,bf(t)-bf(e))+1}(s,Math.max(Math.abs(e),Math.abs(t))))||(n.precision=a-("e"===n.type));break;case"f":case"%":null!=n.precision||isNaN(a=function(e){return Math.max(0,-bf(Math.abs(e)))}(s))||(n.precision=a-2*("%"===n.type))}return Sf(n)}function Ef(e){var t=e.domain;return e.ticks=function(e){var r=t();return $m(r[0],r[r.length-1],null==e?10:e)},e.tickFormat=function(e,r){var n=t();return Pf(n[0],n[n.length-1],null==e?10:e,r)},e.nice=function(r){null==r&&(r=10);var n,a,s=t(),i=0,o=s.length-1,l=s[i],c=s[o],d=10;for(c<l&&(a=l,l=c,c=a,a=i,i=o,o=a);d-- >0;){if((a=Qm(l,c,r))===n)return s[i]=l,s[o]=c,t(s);if(a>0)l=Math.floor(l/a)*a,c=Math.ceil(c/a)*a;else{if(!(a<0))break;l=Math.ceil(l*a)/a,c=Math.floor(c*a)/a}n=a}return e},e}function Tf(){var e=hf();return e.copy=function(){return pf(e,Tf())},Qp.apply(e,arguments),Ef(e)}function If(e){var t;function r(e){return null==e||isNaN(e=+e)?t:e}return r.invert=r,r.domain=r.range=function(t){return arguments.length?(e=Array.from(t,sf),r):e.slice()},r.unknown=function(e){return arguments.length?(t=e,r):t},r.copy=function(){return If(e).unknown(t)},e=arguments.length?Array.from(e,sf):[0,1],Ef(r)}function Mf(e,t){var r,n=0,a=(e=e.slice()).length-1,s=e[n],i=e[a];return i<s&&(r=n,n=a,a=r,r=s,s=i,i=r),e[n]=t.floor(s),e[a]=t.ceil(i),e}function Df(e){return Math.log(e)}function Rf(e){return Math.exp(e)}function Ff(e){return-Math.log(-e)}function Lf(e){return-Math.exp(-e)}function Bf(e){return isFinite(e)?+("1e"+e):e<0?0:e}function Uf(e){return(t,r)=>-e(-t,r)}function zf(e){const t=e(Df,Rf),r=t.domain;let n,a,s=10;function i(){return n=function(e){return e===Math.E?Math.log:10===e&&Math.log10||2===e&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}(s),a=function(e){return 10===e?Bf:e===Math.E?Math.exp:t=>Math.pow(e,t)}(s),r()[0]<0?(n=Uf(n),a=Uf(a),e(Ff,Lf)):e(Df,Rf),t}return t.base=function(e){return arguments.length?(s=+e,i()):s},t.domain=function(e){return arguments.length?(r(e),i()):r()},t.ticks=e=>{const t=r();let i=t[0],o=t[t.length-1];const l=o<i;l&&([i,o]=[o,i]);let c,d,u=n(i),p=n(o);const m=null==e?10:+e;let h=[];if(!(s%1)&&p-u<m){if(u=Math.floor(u),p=Math.ceil(p),i>0){for(;u<=p;++u)for(c=1;c<s;++c)if(d=u<0?c/a(-u):c*a(u),!(d<i)){if(d>o)break;h.push(d)}}else for(;u<=p;++u)for(c=s-1;c>=1;--c)if(d=u>0?c/a(-u):c*a(u),!(d<i)){if(d>o)break;h.push(d)}2*h.length<m&&(h=$m(i,o,m))}else h=$m(u,p,Math.min(p-u,m)).map(a);return l?h.reverse():h},t.tickFormat=(e,r)=>{if(null==e&&(e=10),null==r&&(r=10===s?"s":","),"function"!==typeof r&&(s%1||null!=(r=xf(r)).precision||(r.trim=!0),r=Sf(r)),e===1/0)return r;const i=Math.max(1,s*e/t.ticks().length);return e=>{let t=e/a(Math.round(n(e)));return t*s<s-.5&&(t*=s),t<=i?r(e):""}},t.nice=()=>r(Mf(r(),{floor:e=>a(Math.floor(n(e))),ceil:e=>a(Math.ceil(n(e)))})),t}function qf(){const e=zf(mf()).domain([1,10]);return e.copy=()=>pf(e,qf()).base(e.base()),Qp.apply(e,arguments),e}function Wf(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function Vf(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function Gf(e){var t=1,r=e(Wf(t),Vf(t));return r.constant=function(r){return arguments.length?e(Wf(t=+r),Vf(t)):t},Ef(r)}function Hf(){var e=Gf(mf());return e.copy=function(){return pf(e,Hf()).constant(e.constant())},Qp.apply(e,arguments)}function Kf(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function Yf(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function Jf(e){return e<0?-e*e:e*e}function Xf(e){var t=e(lf,lf),r=1;return t.exponent=function(t){return arguments.length?1===(r=+t)?e(lf,lf):.5===r?e(Yf,Jf):e(Kf(r),Kf(1/r)):r},Ef(t)}function $f(){var e=Xf(mf());return e.copy=function(){return pf(e,$f()).exponent(e.exponent())},Qp.apply(e,arguments),e}function Qf(){return $f.apply(null,arguments).exponent(.5)}function Zf(e){return Math.sign(e)*e*e}function eg(){var e,t=hf(),r=[0,1],n=!1;function a(r){var a=function(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}(t(r));return isNaN(a)?e:n?Math.round(a):a}return a.invert=function(e){return t.invert(Zf(e))},a.domain=function(e){return arguments.length?(t.domain(e),a):t.domain()},a.range=function(e){return arguments.length?(t.range((r=Array.from(e,sf)).map(Zf)),a):r.slice()},a.rangeRound=function(e){return a.range(e).round(!0)},a.round=function(e){return arguments.length?(n=!!e,a):n},a.clamp=function(e){return arguments.length?(t.clamp(e),a):t.clamp()},a.unknown=function(t){return arguments.length?(e=t,a):e},a.copy=function(){return eg(t.domain(),r).round(n).clamp(t.clamp()).unknown(e)},Qp.apply(a,arguments),Ef(a)}function tg(e,t){let r;if(void 0===t)for(const n of e)null!=n&&(r<n||void 0===r&&n>=n)&&(r=n);else{let n=-1;for(let a of e)null!=(a=t(a,++n,e))&&(r<a||void 0===r&&a>=a)&&(r=a)}return r}function rg(e,t){let r;if(void 0===t)for(const n of e)null!=n&&(r>n||void 0===r&&n>=n)&&(r=n);else{let n=-1;for(let a of e)null!=(a=t(a,++n,e))&&(r>a||void 0===r&&a>=a)&&(r=a)}return r}function ng(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:eh;if(e===eh)return ag;if("function"!==typeof e)throw new TypeError("compare is not a function");return(t,r)=>{const n=e(t,r);return n||0===n?n:(0===e(r,r))-(0===e(t,t))}}function ag(e,t){return(null==e||!(e>=e))-(null==t||!(t>=t))||(e<t?-1:e>t?1:0)}function sg(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/0,a=arguments.length>4?arguments[4]:void 0;if(t=Math.floor(t),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(e.length-1,n)),!(r<=t&&t<=n))return e;for(a=void 0===a?ag:ng(a);n>r;){if(n-r>600){const s=n-r+1,i=t-r+1,o=Math.log(s),l=.5*Math.exp(2*o/3),c=.5*Math.sqrt(o*l*(s-l)/s)*(i-s/2<0?-1:1);sg(e,t,Math.max(r,Math.floor(t-i*l/s+c)),Math.min(n,Math.floor(t+(s-i)*l/s+c)),a)}const s=e[t];let i=r,o=n;for(ig(e,r,t),a(e[n],s)>0&&ig(e,r,n);i<o;){for(ig(e,i,o),++i,--o;a(e[i],s)<0;)++i;for(;a(e[o],s)>0;)--o}0===a(e[r],s)?ig(e,r,o):(++o,ig(e,o,n)),o<=t&&(r=o+1),t<=o&&(n=o-1)}return e}function ig(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function og(e,t,r){if(e=Float64Array.from(function*(e,t){if(void 0===t)for(let r of e)null!=r&&(r=+r)>=r&&(yield r);else{let r=-1;for(let n of e)null!=(n=t(n,++r,e))&&(n=+n)>=n&&(yield n)}}(e,r)),(n=e.length)&&!isNaN(t=+t)){if(t<=0||n<2)return rg(e);if(t>=1)return tg(e);var n,a=(n-1)*t,s=Math.floor(a),i=tg(sg(e,s).subarray(0,s+1));return i+(rg(e.subarray(s+1))-i)*(a-s)}}function lg(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ah;if((n=e.length)&&!isNaN(t=+t)){if(t<=0||n<2)return+r(e[0],0,e);if(t>=1)return+r(e[n-1],n-1,e);var n,a=(n-1)*t,s=Math.floor(a),i=+r(e[s],s,e);return i+(+r(e[s+1],s+1,e)-i)*(a-s)}}function cg(){var e,t=[],r=[],n=[];function a(){var e=0,a=Math.max(1,r.length);for(n=new Array(a-1);++e<a;)n[e-1]=lg(t,e/a);return s}function s(t){return null==t||isNaN(t=+t)?e:r[oh(n,t)]}return s.invertExtent=function(e){var a=r.indexOf(e);return a<0?[NaN,NaN]:[a>0?n[a-1]:t[0],a<n.length?n[a]:t[t.length-1]]},s.domain=function(e){if(!arguments.length)return t.slice();t=[];for(let r of e)null==r||isNaN(r=+r)||t.push(r);return t.sort(eh),a()},s.range=function(e){return arguments.length?(r=Array.from(e),a()):r.slice()},s.unknown=function(t){return arguments.length?(e=t,s):e},s.quantiles=function(){return n.slice()},s.copy=function(){return cg().domain(t).range(r).unknown(e)},Qp.apply(s,arguments)}function dg(){var e,t=0,r=1,n=1,a=[.5],s=[0,1];function i(t){return null!=t&&t<=t?s[oh(a,t,0,n)]:e}function o(){var e=-1;for(a=new Array(n);++e<n;)a[e]=((e+1)*r-(e-n)*t)/(n+1);return i}return i.domain=function(e){return arguments.length?([t,r]=e,t=+t,r=+r,o()):[t,r]},i.range=function(e){return arguments.length?(n=(s=Array.from(e)).length-1,o()):s.slice()},i.invertExtent=function(e){var i=s.indexOf(e);return i<0?[NaN,NaN]:i<1?[t,a[0]]:i>=n?[a[n-1],r]:[a[i-1],a[i]]},i.unknown=function(t){return arguments.length?(e=t,i):i},i.thresholds=function(){return a.slice()},i.copy=function(){return dg().domain([t,r]).range(s).unknown(e)},Qp.apply(Ef(i),arguments)}function ug(){var e,t=[.5],r=[0,1],n=1;function a(a){return null!=a&&a<=a?r[oh(t,a,0,n)]:e}return a.domain=function(e){return arguments.length?(t=Array.from(e),n=Math.min(t.length,r.length-1),a):t.slice()},a.range=function(e){return arguments.length?(r=Array.from(e),n=Math.min(t.length,r.length-1),a):r.slice()},a.invertExtent=function(e){var n=r.indexOf(e);return[t[n-1],t[n]]},a.unknown=function(t){return arguments.length?(e=t,a):e},a.copy=function(){return ug().domain(t).range(r).unknown(e)},Qp.apply(a,arguments)}kf=Of({thousands:",",grouping:[3],currency:["$",""]}),Sf=kf.format,_f=kf.formatPrefix;const pg=1e3,mg=6e4,hg=36e5,fg=864e5,gg=6048e5,xg=2592e6,yg=31536e6,vg=new Date,bg=new Date;function jg(e,t,r,n){function a(t){return e(t=0===arguments.length?new Date:new Date(+t)),t}return a.floor=t=>(e(t=new Date(+t)),t),a.ceil=r=>(e(r=new Date(r-1)),t(r,1),e(r),r),a.round=e=>{const t=a(e),r=a.ceil(e);return e-t<r-e?t:r},a.offset=(e,r)=>(t(e=new Date(+e),null==r?1:Math.floor(r)),e),a.range=(r,n,s)=>{const i=[];if(r=a.ceil(r),s=null==s?1:Math.floor(s),!(r<n)||!(s>0))return i;let o;do{i.push(o=new Date(+r)),t(r,s),e(r)}while(o<r&&r<n);return i},a.filter=r=>jg(t=>{if(t>=t)for(;e(t),!r(t);)t.setTime(t-1)},(e,n)=>{if(e>=e)if(n<0)for(;++n<=0;)for(;t(e,-1),!r(e););else for(;--n>=0;)for(;t(e,1),!r(e););}),r&&(a.count=(t,n)=>(vg.setTime(+t),bg.setTime(+n),e(vg),e(bg),Math.floor(r(vg,bg))),a.every=e=>(e=Math.floor(e),isFinite(e)&&e>0?e>1?a.filter(n?t=>n(t)%e===0:t=>a.count(0,t)%e===0):a:null)),a}const wg=jg(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);wg.every=e=>(e=Math.floor(e),isFinite(e)&&e>0?e>1?jg(t=>{t.setTime(Math.floor(t/e)*e)},(t,r)=>{t.setTime(+t+r*e)},(t,r)=>(r-t)/e):wg:null);wg.range;const Ng=jg(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*pg)},(e,t)=>(t-e)/pg,e=>e.getUTCSeconds()),kg=(Ng.range,jg(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*pg)},(e,t)=>{e.setTime(+e+t*mg)},(e,t)=>(t-e)/mg,e=>e.getMinutes())),Sg=(kg.range,jg(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*mg)},(e,t)=>(t-e)/mg,e=>e.getUTCMinutes())),_g=(Sg.range,jg(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*pg-e.getMinutes()*mg)},(e,t)=>{e.setTime(+e+t*hg)},(e,t)=>(t-e)/hg,e=>e.getHours())),Cg=(_g.range,jg(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*hg)},(e,t)=>(t-e)/hg,e=>e.getUTCHours())),Ag=(Cg.range,jg(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*mg)/fg,e=>e.getDate()-1)),Og=(Ag.range,jg(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/fg,e=>e.getUTCDate()-1)),Pg=(Og.range,jg(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/fg,e=>Math.floor(e/fg)));Pg.range;function Eg(e){return jg(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(e,t)=>{e.setDate(e.getDate()+7*t)},(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*mg)/gg)}const Tg=Eg(0),Ig=Eg(1),Mg=Eg(2),Dg=Eg(3),Rg=Eg(4),Fg=Eg(5),Lg=Eg(6);Tg.range,Ig.range,Mg.range,Dg.range,Rg.range,Fg.range,Lg.range;function Bg(e){return jg(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+7*t)},(e,t)=>(t-e)/gg)}const Ug=Bg(0),zg=Bg(1),qg=Bg(2),Wg=Bg(3),Vg=Bg(4),Gg=Bg(5),Hg=Bg(6),Kg=(Ug.range,zg.range,qg.range,Wg.range,Vg.range,Gg.range,Hg.range,jg(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+12*(t.getFullYear()-e.getFullYear()),e=>e.getMonth())),Yg=(Kg.range,jg(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+12*(t.getUTCFullYear()-e.getUTCFullYear()),e=>e.getUTCMonth())),Jg=(Yg.range,jg(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear()));Jg.every=e=>isFinite(e=Math.floor(e))&&e>0?jg(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r*e)}):null;Jg.range;const Xg=jg(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Xg.every=e=>isFinite(e=Math.floor(e))&&e>0?jg(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r*e)}):null;Xg.range;function $g(e,t,r,n,a,s){const i=[[Ng,1,pg],[Ng,5,5e3],[Ng,15,15e3],[Ng,30,3e4],[s,1,mg],[s,5,3e5],[s,15,9e5],[s,30,18e5],[a,1,hg],[a,3,108e5],[a,6,216e5],[a,12,432e5],[n,1,fg],[n,2,1728e5],[r,1,gg],[t,1,xg],[t,3,7776e6],[e,1,yg]];function o(t,r,n){const a=Math.abs(r-t)/n,s=rh(e=>{let[,,t]=e;return t}).right(i,a);if(s===i.length)return e.every(Zm(t/yg,r/yg,n));if(0===s)return wg.every(Math.max(Zm(t,r,n),1));const[o,l]=i[a/i[s-1][2]<i[s][2]/a?s-1:s];return o.every(l)}return[function(e,t,r){const n=t<e;n&&([e,t]=[t,e]);const a=r&&"function"===typeof r.range?r:o(e,t,r),s=a?a.range(e,+t+1):[];return n?s.reverse():s},o]}const[Qg,Zg]=$g(Xg,Yg,Ug,Pg,Cg,Sg),[ex,tx]=$g(Jg,Kg,Tg,Ag,_g,kg);function rx(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function nx(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function ax(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}var sx,ix,ox,lx={"-":"",_:" ",0:"0"},cx=/^\s*\d+/,dx=/^%/,ux=/[\\^$*+?|[\]().{}]/g;function px(e,t,r){var n=e<0?"-":"",a=(n?-e:e)+"",s=a.length;return n+(s<r?new Array(r-s+1).join(t)+a:a)}function mx(e){return e.replace(ux,"\\$&")}function hx(e){return new RegExp("^(?:"+e.map(mx).join("|")+")","i")}function fx(e){return new Map(e.map((e,t)=>[e.toLowerCase(),t]))}function gx(e,t,r){var n=cx.exec(t.slice(r,r+1));return n?(e.w=+n[0],r+n[0].length):-1}function xx(e,t,r){var n=cx.exec(t.slice(r,r+1));return n?(e.u=+n[0],r+n[0].length):-1}function yx(e,t,r){var n=cx.exec(t.slice(r,r+2));return n?(e.U=+n[0],r+n[0].length):-1}function vx(e,t,r){var n=cx.exec(t.slice(r,r+2));return n?(e.V=+n[0],r+n[0].length):-1}function bx(e,t,r){var n=cx.exec(t.slice(r,r+2));return n?(e.W=+n[0],r+n[0].length):-1}function jx(e,t,r){var n=cx.exec(t.slice(r,r+4));return n?(e.y=+n[0],r+n[0].length):-1}function wx(e,t,r){var n=cx.exec(t.slice(r,r+2));return n?(e.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function Nx(e,t,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return n?(e.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function kx(e,t,r){var n=cx.exec(t.slice(r,r+1));return n?(e.q=3*n[0]-3,r+n[0].length):-1}function Sx(e,t,r){var n=cx.exec(t.slice(r,r+2));return n?(e.m=n[0]-1,r+n[0].length):-1}function _x(e,t,r){var n=cx.exec(t.slice(r,r+2));return n?(e.d=+n[0],r+n[0].length):-1}function Cx(e,t,r){var n=cx.exec(t.slice(r,r+3));return n?(e.m=0,e.d=+n[0],r+n[0].length):-1}function Ax(e,t,r){var n=cx.exec(t.slice(r,r+2));return n?(e.H=+n[0],r+n[0].length):-1}function Ox(e,t,r){var n=cx.exec(t.slice(r,r+2));return n?(e.M=+n[0],r+n[0].length):-1}function Px(e,t,r){var n=cx.exec(t.slice(r,r+2));return n?(e.S=+n[0],r+n[0].length):-1}function Ex(e,t,r){var n=cx.exec(t.slice(r,r+3));return n?(e.L=+n[0],r+n[0].length):-1}function Tx(e,t,r){var n=cx.exec(t.slice(r,r+6));return n?(e.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function Ix(e,t,r){var n=dx.exec(t.slice(r,r+1));return n?r+n[0].length:-1}function Mx(e,t,r){var n=cx.exec(t.slice(r));return n?(e.Q=+n[0],r+n[0].length):-1}function Dx(e,t,r){var n=cx.exec(t.slice(r));return n?(e.s=+n[0],r+n[0].length):-1}function Rx(e,t){return px(e.getDate(),t,2)}function Fx(e,t){return px(e.getHours(),t,2)}function Lx(e,t){return px(e.getHours()%12||12,t,2)}function Bx(e,t){return px(1+Ag.count(Jg(e),e),t,3)}function Ux(e,t){return px(e.getMilliseconds(),t,3)}function zx(e,t){return Ux(e,t)+"000"}function qx(e,t){return px(e.getMonth()+1,t,2)}function Wx(e,t){return px(e.getMinutes(),t,2)}function Vx(e,t){return px(e.getSeconds(),t,2)}function Gx(e){var t=e.getDay();return 0===t?7:t}function Hx(e,t){return px(Tg.count(Jg(e)-1,e),t,2)}function Kx(e){var t=e.getDay();return t>=4||0===t?Rg(e):Rg.ceil(e)}function Yx(e,t){return e=Kx(e),px(Rg.count(Jg(e),e)+(4===Jg(e).getDay()),t,2)}function Jx(e){return e.getDay()}function Xx(e,t){return px(Ig.count(Jg(e)-1,e),t,2)}function $x(e,t){return px(e.getFullYear()%100,t,2)}function Qx(e,t){return px((e=Kx(e)).getFullYear()%100,t,2)}function Zx(e,t){return px(e.getFullYear()%1e4,t,4)}function ey(e,t){var r=e.getDay();return px((e=r>=4||0===r?Rg(e):Rg.ceil(e)).getFullYear()%1e4,t,4)}function ty(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+px(t/60|0,"0",2)+px(t%60,"0",2)}function ry(e,t){return px(e.getUTCDate(),t,2)}function ny(e,t){return px(e.getUTCHours(),t,2)}function ay(e,t){return px(e.getUTCHours()%12||12,t,2)}function sy(e,t){return px(1+Og.count(Xg(e),e),t,3)}function iy(e,t){return px(e.getUTCMilliseconds(),t,3)}function oy(e,t){return iy(e,t)+"000"}function ly(e,t){return px(e.getUTCMonth()+1,t,2)}function cy(e,t){return px(e.getUTCMinutes(),t,2)}function dy(e,t){return px(e.getUTCSeconds(),t,2)}function uy(e){var t=e.getUTCDay();return 0===t?7:t}function py(e,t){return px(Ug.count(Xg(e)-1,e),t,2)}function my(e){var t=e.getUTCDay();return t>=4||0===t?Vg(e):Vg.ceil(e)}function hy(e,t){return e=my(e),px(Vg.count(Xg(e),e)+(4===Xg(e).getUTCDay()),t,2)}function fy(e){return e.getUTCDay()}function gy(e,t){return px(zg.count(Xg(e)-1,e),t,2)}function xy(e,t){return px(e.getUTCFullYear()%100,t,2)}function yy(e,t){return px((e=my(e)).getUTCFullYear()%100,t,2)}function vy(e,t){return px(e.getUTCFullYear()%1e4,t,4)}function by(e,t){var r=e.getUTCDay();return px((e=r>=4||0===r?Vg(e):Vg.ceil(e)).getUTCFullYear()%1e4,t,4)}function jy(){return"+0000"}function wy(){return"%"}function Ny(e){return+e}function ky(e){return Math.floor(+e/1e3)}function Sy(e){return new Date(e)}function _y(e){return e instanceof Date?+e:+new Date(+e)}function Cy(e,t,r,n,a,s,i,o,l,c){var d=hf(),u=d.invert,p=d.domain,m=c(".%L"),h=c(":%S"),f=c("%I:%M"),g=c("%I %p"),x=c("%a %d"),y=c("%b %d"),v=c("%B"),b=c("%Y");function j(e){return(l(e)<e?m:o(e)<e?h:i(e)<e?f:s(e)<e?g:n(e)<e?a(e)<e?x:y:r(e)<e?v:b)(e)}return d.invert=function(e){return new Date(u(e))},d.domain=function(e){return arguments.length?p(Array.from(e,_y)):p().map(Sy)},d.ticks=function(t){var r=p();return e(r[0],r[r.length-1],null==t?10:t)},d.tickFormat=function(e,t){return null==t?j:c(t)},d.nice=function(e){var r=p();return e&&"function"===typeof e.range||(e=t(r[0],r[r.length-1],null==e?10:e)),e?p(Mf(r,e)):d},d.copy=function(){return pf(d,Cy(e,t,r,n,a,s,i,o,l,c))},d}function Ay(){return Qp.apply(Cy(ex,tx,Jg,Kg,Tg,Ag,_g,kg,Ng,ix).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function Oy(){return Qp.apply(Cy(Qg,Zg,Xg,Yg,Ug,Og,Cg,Sg,Ng,ox).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Py(){var e,t,r,n,a,s=0,i=1,o=lf,l=!1;function c(t){return null==t||isNaN(t=+t)?a:o(0===r?.5:(t=(n(t)-e)*r,l?Math.max(0,Math.min(1,t)):t))}function d(e){return function(t){var r,n;return arguments.length?([r,n]=t,o=e(r,n),c):[o(0),o(1)]}}return c.domain=function(a){return arguments.length?([s,i]=a,e=n(s=+s),t=n(i=+i),r=e===t?0:1/(t-e),c):[s,i]},c.clamp=function(e){return arguments.length?(l=!!e,c):l},c.interpolator=function(e){return arguments.length?(o=e,c):o},c.range=d(nf),c.rangeRound=d(af),c.unknown=function(e){return arguments.length?(a=e,c):a},function(a){return n=a,e=a(s),t=a(i),r=e===t?0:1/(t-e),c}}function Ey(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function Ty(){var e=Ef(Py()(lf));return e.copy=function(){return Ey(e,Ty())},Zp.apply(e,arguments)}function Iy(){var e=zf(Py()).domain([1,10]);return e.copy=function(){return Ey(e,Iy()).base(e.base())},Zp.apply(e,arguments)}function My(){var e=Gf(Py());return e.copy=function(){return Ey(e,My()).constant(e.constant())},Zp.apply(e,arguments)}function Dy(){var e=Xf(Py());return e.copy=function(){return Ey(e,Dy()).exponent(e.exponent())},Zp.apply(e,arguments)}function Ry(){return Dy.apply(null,arguments).exponent(.5)}function Fy(){var e=[],t=lf;function r(r){if(null!=r&&!isNaN(r=+r))return t((oh(e,r,1)-1)/(e.length-1))}return r.domain=function(t){if(!arguments.length)return e.slice();e=[];for(let r of t)null==r||isNaN(r=+r)||e.push(r);return e.sort(eh),r},r.interpolator=function(e){return arguments.length?(t=e,r):t},r.range=function(){return e.map((r,n)=>t(n/(e.length-1)))},r.quantiles=function(t){return Array.from({length:t+1},(r,n)=>og(e,n/t))},r.copy=function(){return Fy(t).domain(e)},Zp.apply(r,arguments)}function Ly(){var e,t,r,n,a,s,i,o=0,l=.5,c=1,d=1,u=lf,p=!1;function m(e){return isNaN(e=+e)?i:(e=.5+((e=+s(e))-t)*(d*e<d*t?n:a),u(p?Math.max(0,Math.min(1,e)):e))}function h(e){return function(t){var r,n,a;return arguments.length?([r,n,a]=t,u=function(e,t){void 0===t&&(t=e,e=nf);for(var r=0,n=t.length-1,a=t[0],s=new Array(n<0?0:n);r<n;)s[r]=e(a,a=t[++r]);return function(e){var t=Math.max(0,Math.min(n-1,Math.floor(e*=n)));return s[t](e-t)}}(e,[r,n,a]),m):[u(0),u(.5),u(1)]}}return m.domain=function(i){return arguments.length?([o,l,c]=i,e=s(o=+o),t=s(l=+l),r=s(c=+c),n=e===t?0:.5/(t-e),a=t===r?0:.5/(r-t),d=t<e?-1:1,m):[o,l,c]},m.clamp=function(e){return arguments.length?(p=!!e,m):p},m.interpolator=function(e){return arguments.length?(u=e,m):u},m.range=h(nf),m.rangeRound=h(af),m.unknown=function(e){return arguments.length?(i=e,m):i},function(i){return s=i,e=i(o),t=i(l),r=i(c),n=e===t?0:.5/(t-e),a=t===r?0:.5/(r-t),d=t<e?-1:1,m}}function By(){var e=Ef(Ly()(lf));return e.copy=function(){return Ey(e,By())},Zp.apply(e,arguments)}function Uy(){var e=zf(Ly()).domain([.1,1,10]);return e.copy=function(){return Ey(e,Uy()).base(e.base())},Zp.apply(e,arguments)}function zy(){var e=Gf(Ly());return e.copy=function(){return Ey(e,zy()).constant(e.constant())},Zp.apply(e,arguments)}function qy(){var e=Xf(Ly());return e.copy=function(){return Ey(e,qy()).exponent(e.exponent())},Zp.apply(e,arguments)}function Wy(){return qy.apply(null,arguments).exponent(.5)}function Vy(e,t){if((a=e.length)>1)for(var r,n,a,s=1,i=e[t[0]],o=i.length;s<a;++s)for(n=i,i=e[t[s]],r=0;r<o;++r)i[r][1]+=i[r][0]=isNaN(n[r][1])?n[r][0]:n[r][1]}!function(e){sx=function(e){var t=e.dateTime,r=e.date,n=e.time,a=e.periods,s=e.days,i=e.shortDays,o=e.months,l=e.shortMonths,c=hx(a),d=fx(a),u=hx(s),p=fx(s),m=hx(i),h=fx(i),f=hx(o),g=fx(o),x=hx(l),y=fx(l),v={a:function(e){return i[e.getDay()]},A:function(e){return s[e.getDay()]},b:function(e){return l[e.getMonth()]},B:function(e){return o[e.getMonth()]},c:null,d:Rx,e:Rx,f:zx,g:Qx,G:ey,H:Fx,I:Lx,j:Bx,L:Ux,m:qx,M:Wx,p:function(e){return a[+(e.getHours()>=12)]},q:function(e){return 1+~~(e.getMonth()/3)},Q:Ny,s:ky,S:Vx,u:Gx,U:Hx,V:Yx,w:Jx,W:Xx,x:null,X:null,y:$x,Y:Zx,Z:ty,"%":wy},b={a:function(e){return i[e.getUTCDay()]},A:function(e){return s[e.getUTCDay()]},b:function(e){return l[e.getUTCMonth()]},B:function(e){return o[e.getUTCMonth()]},c:null,d:ry,e:ry,f:oy,g:yy,G:by,H:ny,I:ay,j:sy,L:iy,m:ly,M:cy,p:function(e){return a[+(e.getUTCHours()>=12)]},q:function(e){return 1+~~(e.getUTCMonth()/3)},Q:Ny,s:ky,S:dy,u:uy,U:py,V:hy,w:fy,W:gy,x:null,X:null,y:xy,Y:vy,Z:jy,"%":wy},j={a:function(e,t,r){var n=m.exec(t.slice(r));return n?(e.w=h.get(n[0].toLowerCase()),r+n[0].length):-1},A:function(e,t,r){var n=u.exec(t.slice(r));return n?(e.w=p.get(n[0].toLowerCase()),r+n[0].length):-1},b:function(e,t,r){var n=x.exec(t.slice(r));return n?(e.m=y.get(n[0].toLowerCase()),r+n[0].length):-1},B:function(e,t,r){var n=f.exec(t.slice(r));return n?(e.m=g.get(n[0].toLowerCase()),r+n[0].length):-1},c:function(e,r,n){return k(e,t,r,n)},d:_x,e:_x,f:Tx,g:wx,G:jx,H:Ax,I:Ax,j:Cx,L:Ex,m:Sx,M:Ox,p:function(e,t,r){var n=c.exec(t.slice(r));return n?(e.p=d.get(n[0].toLowerCase()),r+n[0].length):-1},q:kx,Q:Mx,s:Dx,S:Px,u:xx,U:yx,V:vx,w:gx,W:bx,x:function(e,t,n){return k(e,r,t,n)},X:function(e,t,r){return k(e,n,t,r)},y:wx,Y:jx,Z:Nx,"%":Ix};function w(e,t){return function(r){var n,a,s,i=[],o=-1,l=0,c=e.length;for(r instanceof Date||(r=new Date(+r));++o<c;)37===e.charCodeAt(o)&&(i.push(e.slice(l,o)),null!=(a=lx[n=e.charAt(++o)])?n=e.charAt(++o):a="e"===n?" ":"0",(s=t[n])&&(n=s(r,a)),i.push(n),l=o+1);return i.push(e.slice(l,o)),i.join("")}}function N(e,t){return function(r){var n,a,s=ax(1900,void 0,1);if(k(s,e,r+="",0)!=r.length)return null;if("Q"in s)return new Date(s.Q);if("s"in s)return new Date(1e3*s.s+("L"in s?s.L:0));if(t&&!("Z"in s)&&(s.Z=0),"p"in s&&(s.H=s.H%12+12*s.p),void 0===s.m&&(s.m="q"in s?s.q:0),"V"in s){if(s.V<1||s.V>53)return null;"w"in s||(s.w=1),"Z"in s?(a=(n=nx(ax(s.y,0,1))).getUTCDay(),n=a>4||0===a?zg.ceil(n):zg(n),n=Og.offset(n,7*(s.V-1)),s.y=n.getUTCFullYear(),s.m=n.getUTCMonth(),s.d=n.getUTCDate()+(s.w+6)%7):(a=(n=rx(ax(s.y,0,1))).getDay(),n=a>4||0===a?Ig.ceil(n):Ig(n),n=Ag.offset(n,7*(s.V-1)),s.y=n.getFullYear(),s.m=n.getMonth(),s.d=n.getDate()+(s.w+6)%7)}else("W"in s||"U"in s)&&("w"in s||(s.w="u"in s?s.u%7:"W"in s?1:0),a="Z"in s?nx(ax(s.y,0,1)).getUTCDay():rx(ax(s.y,0,1)).getDay(),s.m=0,s.d="W"in s?(s.w+6)%7+7*s.W-(a+5)%7:s.w+7*s.U-(a+6)%7);return"Z"in s?(s.H+=s.Z/100|0,s.M+=s.Z%100,nx(s)):rx(s)}}function k(e,t,r,n){for(var a,s,i=0,o=t.length,l=r.length;i<o;){if(n>=l)return-1;if(37===(a=t.charCodeAt(i++))){if(a=t.charAt(i++),!(s=j[a in lx?t.charAt(i++):a])||(n=s(e,r,n))<0)return-1}else if(a!=r.charCodeAt(n++))return-1}return n}return v.x=w(r,v),v.X=w(n,v),v.c=w(t,v),b.x=w(r,b),b.X=w(n,b),b.c=w(t,b),{format:function(e){var t=w(e+="",v);return t.toString=function(){return e},t},parse:function(e){var t=N(e+="",!1);return t.toString=function(){return e},t},utcFormat:function(e){var t=w(e+="",b);return t.toString=function(){return e},t},utcParse:function(e){var t=N(e+="",!0);return t.toString=function(){return e},t}}}(e),ix=sx.format,sx.parse,ox=sx.utcFormat,sx.utcParse}({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});Array.prototype.slice;function Gy(e){return"object"===typeof e&&"length"in e?e:Array.from(e)}function Hy(e){for(var t=e.length,r=new Array(t);--t>=0;)r[t]=t;return r}function Ky(e,t){return e[t]}function Yy(e){const t=[];return t.key=e,t}var Jy=r(539),Xy=r.n(Jy),$y=r(6745),Qy=r.n($y),Zy=r(3538),ev=r.n(Zy),tv=r(9853),rv=r.n(tv),nv=r(8210),av=r.n(nv);function sv(e){return function(e){if(Array.isArray(e))return iv(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return iv(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return iv(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function iv(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var ov=function(e){return e},lv={"@@functional/placeholder":!0},cv=function(e){return e===lv},dv=function(e){return function t(){return 0===arguments.length||1===arguments.length&&cv(arguments.length<=0?void 0:arguments[0])?t:e.apply(void 0,arguments)}},uv=function e(t,r){return 1===t?r:dv(function(){for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];var i=a.filter(function(e){return e!==lv}).length;return i>=t?r.apply(void 0,a):e(t-i,dv(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var s=a.map(function(e){return cv(e)?t.shift():e});return r.apply(void 0,sv(s).concat(t))}))})},pv=function(e){return uv(e.length,e)},mv=function(e,t){for(var r=[],n=e;n<t;++n)r[n-e]=n;return r},hv=pv(function(e,t){return Array.isArray(t)?t.map(e):Object.keys(t).map(function(e){return t[e]}).map(e)}),fv=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];if(!t.length)return ov;var n=t.reverse(),a=n[0],s=n.slice(1);return function(){return s.reduce(function(e,t){return t(e)},a.apply(void 0,arguments))}},gv=function(e){return Array.isArray(e)?e.reverse():e.split("").reverse.join("")},xv=function(e){var t=null,r=null;return function(){for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return t&&a.every(function(e,r){return e===t[r]})?r:(t=a,r=e.apply(void 0,a))}};var yv=pv(function(e,t,r){var n=+e;return n+r*(+t-n)}),vv=pv(function(e,t,r){var n=t-+e;return(r-e)/(n=n||1/0)}),bv=pv(function(e,t,r){var n=t-+e;return n=n||1/0,Math.max(0,Math.min(1,(r-e)/n))});const jv={rangeStep:function(e,t,r){for(var n=new(av())(e),a=0,s=[];n.lt(t)&&a<1e5;)s.push(n.toNumber()),n=n.add(r),a++;return s},getDigitCount:function(e){return 0===e?1:Math.floor(new(av())(e).abs().log(10).toNumber())+1},interpolateNumber:yv,uninterpolateNumber:vv,uninterpolateTruncation:bv};function wv(e){return function(e){if(Array.isArray(e))return Sv(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||kv(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Nv(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,a=!1,s=void 0;try{for(var i,o=e[Symbol.iterator]();!(n=(i=o.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(l){a=!0,s=l}finally{try{n||null==o.return||o.return()}finally{if(a)throw s}}return r}(e,t)||kv(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function kv(e,t){if(e){if("string"===typeof e)return Sv(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Sv(e,t):void 0}}function Sv(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function _v(e){var t=Nv(e,2),r=t[0],n=t[1],a=r,s=n;return r>n&&(a=n,s=r),[a,s]}function Cv(e,t,r){if(e.lte(0))return new(av())(0);var n=jv.getDigitCount(e.toNumber()),a=new(av())(10).pow(n),s=e.div(a),i=1!==n?.05:.1,o=new(av())(Math.ceil(s.div(i).toNumber())).add(r).mul(i).mul(a);return t?o:new(av())(Math.ceil(o))}function Av(e,t,r){var n=1,a=new(av())(e);if(!a.isint()&&r){var s=Math.abs(e);s<1?(n=new(av())(10).pow(jv.getDigitCount(e)-1),a=new(av())(Math.floor(a.div(n).toNumber())).mul(n)):s>1&&(a=new(av())(Math.floor(e)))}else 0===e?a=new(av())(Math.floor((t-1)/2)):r||(a=new(av())(Math.floor(e)));var i=Math.floor((t-1)/2),o=fv(hv(function(e){return a.add(new(av())(e-i).mul(n)).toNumber()}),mv);return o(0,t)}function Ov(e,t,r,n){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;if(!Number.isFinite((t-e)/(r-1)))return{step:new(av())(0),tickMin:new(av())(0),tickMax:new(av())(0)};var s,i=Cv(new(av())(t).sub(e).div(r-1),n,a);s=e<=0&&t>=0?new(av())(0):(s=new(av())(e).add(t).div(2)).sub(new(av())(s).mod(i));var o=Math.ceil(s.sub(e).div(i).toNumber()),l=Math.ceil(new(av())(t).sub(s).div(i).toNumber()),c=o+l+1;return c>r?Ov(e,t,r,n,a+1):(c<r&&(l=t>0?l+(r-c):l,o=t>0?o:o+(r-c)),{step:i,tickMin:s.sub(new(av())(o).mul(i)),tickMax:s.add(new(av())(l).mul(i))})}var Pv=xv(function(e){var t=Nv(e,2),r=t[0],n=t[1],a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6,s=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=Math.max(a,2),o=Nv(_v([r,n]),2),l=o[0],c=o[1];if(l===-1/0||c===1/0){var d=c===1/0?[l].concat(wv(mv(0,a-1).map(function(){return 1/0}))):[].concat(wv(mv(0,a-1).map(function(){return-1/0})),[c]);return r>n?gv(d):d}if(l===c)return Av(l,a,s);var u=Ov(l,c,i,s),p=u.step,m=u.tickMin,h=u.tickMax,f=jv.rangeStep(m,h.add(new(av())(.1).mul(p)),p);return r>n?gv(f):f}),Ev=(xv(function(e){var t=Nv(e,2),r=t[0],n=t[1],a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6,s=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=Math.max(a,2),o=Nv(_v([r,n]),2),l=o[0],c=o[1];if(l===-1/0||c===1/0)return[r,n];if(l===c)return Av(l,a,s);var d=Cv(new(av())(c).sub(l).div(i-1),s,0),u=fv(hv(function(e){return new(av())(l).add(new(av())(e).mul(d)).toNumber()}),mv),p=u(0,i).filter(function(e){return e>=l&&e<=c});return r>n?gv(p):p}),xv(function(e,t){var r=Nv(e,2),n=r[0],a=r[1],s=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=Nv(_v([n,a]),2),o=i[0],l=i[1];if(o===-1/0||l===1/0)return[n,a];if(o===l)return[o];var c=Math.max(t,2),d=Cv(new(av())(l).sub(o).div(c-1),s,0),u=[].concat(wv(jv.rangeStep(new(av())(o),new(av())(l).sub(new(av())(.99).mul(d)),d)),[l]);return n>a?gv(u):u})),Tv=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function Iv(e){return Iv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Iv(e)}function Mv(){return Mv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Mv.apply(this,arguments)}function Dv(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,s,i,o=[],l=!0,c=!1;try{if(s=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=s.call(r)).done)&&(o.push(n.value),o.length!==t);l=!0);}catch(e){c=!0,a=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(c)throw a}}return o}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Rv(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Rv(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Rv(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Fv(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Lv(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Vv(n.key),n)}}function Bv(e,t,r){return t=zv(t),function(e,t){if(t&&("object"===Iv(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Uv()?Reflect.construct(t,r||[],zv(e).constructor):t.apply(e,r))}function Uv(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(Uv=function(){return!!e})()}function zv(e){return zv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},zv(e)}function qv(e,t){return qv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},qv(e,t)}function Wv(e,t,r){return(t=Vv(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Vv(e){var t=function(e,t){if("object"!=Iv(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Iv(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Iv(t)?t:t+""}var Gv=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Bv(this,t,arguments)}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&qv(e,t)}(t,e),r=t,n=[{key:"render",value:function(){var e=this.props,t=e.offset,r=e.layout,n=e.width,s=e.dataKey,i=e.data,o=e.dataPointFormatter,l=e.xAxis,c=e.yAxis,d=Fv(e,Tv),u=wl(d,!1);"x"===this.props.direction&&"number"!==l.type&&Ll(!1);var p=i.map(function(e){var i=o(e,s),d=i.x,p=i.y,m=i.value,h=i.errorVal;if(!h)return null;var f,g,x=[];if(Array.isArray(h)){var y=Dv(h,2);f=y[0],g=y[1]}else f=g=h;if("vertical"===r){var v=l.scale,b=p+t,j=b+n,w=b-n,N=v(m-f),k=v(m+g);x.push({x1:k,y1:j,x2:k,y2:w}),x.push({x1:N,y1:b,x2:k,y2:b}),x.push({x1:N,y1:j,x2:N,y2:w})}else if("horizontal"===r){var S=c.scale,_=d+t,C=_-n,A=_+n,O=S(m-f),P=S(m+g);x.push({x1:C,y1:P,x2:A,y2:P}),x.push({x1:_,y1:O,x2:_,y2:P}),x.push({x1:C,y1:O,x2:A,y2:O})}return a.createElement(Hl,Mv({className:"recharts-errorBar",key:"bar-".concat(x.map(function(e){return"".concat(e.x1,"-").concat(e.x2,"-").concat(e.y1,"-").concat(e.y2)}))},u),x.map(function(e){return a.createElement("line",Mv({},e,{key:"line-".concat(e.x1,"-").concat(e.x2,"-").concat(e.y1,"-").concat(e.y2)}))}))});return a.createElement(Hl,{className:"recharts-errorBars"},p)}}],n&&Lv(r.prototype,n),s&&Lv(r,s),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,s}(a.Component);function Hv(e){return Hv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Hv(e)}function Kv(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Yv(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Kv(Object(r),!0).forEach(function(t){Jv(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Kv(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function Jv(e,t,r){return t=function(e){var t=function(e,t){if("object"!=Hv(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Hv(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Hv(t)?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Wv(Gv,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"}),Wv(Gv,"displayName","ErrorBar");var Xv=function(e){var t=e.children,r=e.formattedGraphicalItems,n=e.legendWidth,a=e.legendContent,s=yl(t,lu);if(!s)return null;var i,o=lu.defaultProps,l=void 0!==o?Yv(Yv({},o),s.props):{};return i=s.props&&s.props.payload?s.props&&s.props.payload:"children"===a?(r||[]).reduce(function(e,t){var r=t.item,n=t.props,a=n.sectors||n.data||[];return e.concat(a.map(function(e){return{type:s.props.iconType||r.props.legendType,value:e.name,color:e.fill,payload:e}}))},[]):(r||[]).map(function(e){var t=e.item,r=t.type.defaultProps,n=void 0!==r?Yv(Yv({},r),t.props):{},a=n.dataKey,s=n.name,i=n.legendType;return{inactive:n.hide,dataKey:a,type:l.iconType||i||"square",color:sb(t),value:s||a,payload:n}}),Yv(Yv(Yv({},l),lu.getWithHeight(s,n)),{},{payload:i,item:s})};function $v(e){return $v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$v(e)}function Qv(e){return function(e){if(Array.isArray(e))return Zv(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return Zv(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Zv(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Zv(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function eb(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function tb(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?eb(Object(r),!0).forEach(function(t){rb(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):eb(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function rb(e,t,r){return t=function(e){var t=function(e,t){if("object"!=$v(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=$v(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==$v(t)?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function nb(e,t,r){return Ro()(e)||Ro()(t)?r:Uo(t)?To()(e,t,r):Xo()(t)?t(e):r}function ab(e,t,r,n){var a=ev()(e,function(e){return nb(e,t)});if("number"===r){var s=a.filter(function(e){return Bo(e)||parseFloat(e)});return s.length?[Qy()(s),Xy()(s)]:[1/0,-1/0]}return(n?a.filter(function(e){return!Ro()(e)}):a).map(function(e){return Uo(e)||e instanceof Date?e:""})}var sb=function(e){var t,r,n=e.type.displayName,a=null!==(t=e.type)&&void 0!==t&&t.defaultProps?tb(tb({},e.type.defaultProps),e.props):e.props,s=a.stroke,i=a.fill;switch(n){case"Line":r=s;break;case"Area":case"Radar":r=s&&"none"!==s?s:i;break;default:r=i}return r},ib=function(e,t,r,n,a){var s=xl(t.props.children,Gv).filter(function(e){return function(e,t,r){return!!Ro()(t)||("horizontal"===e?"yAxis"===t:"vertical"===e||"x"===r?"xAxis"===t:"y"!==r||"yAxis"===t)}(n,a,e.props.direction)});if(s&&s.length){var i=s.map(function(e){return e.props.dataKey});return e.reduce(function(e,t){var n=nb(t,r);if(Ro()(n))return e;var a=Array.isArray(n)?[Qy()(n),Xy()(n)]:[n,n],s=i.reduce(function(e,r){var n=nb(t,r,0),s=a[0]-Math.abs(Array.isArray(n)?n[0]:n),i=a[1]+Math.abs(Array.isArray(n)?n[1]:n);return[Math.min(s,e[0]),Math.max(i,e[1])]},[1/0,-1/0]);return[Math.min(s[0],e[0]),Math.max(s[1],e[1])]},[1/0,-1/0])}return null},ob=function(e,t,r,n,a){var s=t.map(function(t){var s=t.props.dataKey;return"number"===r&&s&&ib(e,t,s,n)||ab(e,s,r,a)});if("number"===r)return s.reduce(function(e,t){return[Math.min(e[0],t[0]),Math.max(e[1],t[1])]},[1/0,-1/0]);var i={};return s.reduce(function(e,t){for(var r=0,n=t.length;r<n;r++)i[t[r]]||(i[t[r]]=!0,e.push(t[r]));return e},[])},lb=function(e,t){return"horizontal"===e&&"xAxis"===t||"vertical"===e&&"yAxis"===t||"centric"===e&&"angleAxis"===t||"radial"===e&&"radiusAxis"===t},cb=function(e,t,r,n){if(n)return e.map(function(e){return e.coordinate});var a,s,i=e.map(function(e){return e.coordinate===t&&(a=!0),e.coordinate===r&&(s=!0),e.coordinate});return a||i.push(t),s||i.push(r),i},db=function(e,t,r){if(!e)return null;var n=e.scale,a=e.duplicateDomain,s=e.type,i=e.range,o="scaleBand"===e.realScaleType?n.bandwidth()/2:2,l=(t||r)&&"category"===s&&n.bandwidth?n.bandwidth()/o:0;return l="angleAxis"===e.axisType&&(null===i||void 0===i?void 0:i.length)>=2?2*Fo(i[0]-i[1])*l:l,t&&(e.ticks||e.niceTicks)?(e.ticks||e.niceTicks).map(function(e){var t=a?a.indexOf(e):e;return{coordinate:n(t)+l,value:e,offset:l}}).filter(function(e){return!Po()(e.coordinate)}):e.isCategorical&&e.categoricalDomain?e.categoricalDomain.map(function(e,t){return{coordinate:n(e)+l,value:e,index:t,offset:l}}):n.ticks&&!r?n.ticks(e.tickCount).map(function(e){return{coordinate:n(e)+l,value:e,offset:l}}):n.domain().map(function(e,t){return{coordinate:n(e)+l,value:a?a[e]:e,index:t,offset:l}})},ub=new WeakMap,pb=function(e,t){if("function"!==typeof t)return e;ub.has(e)||ub.set(e,new WeakMap);var r=ub.get(e);if(r.has(t))return r.get(t);var n=function(){e.apply(void 0,arguments),t.apply(void 0,arguments)};return r.set(t,n),n},mb=1e-4,hb={sign:function(e){var t=e.length;if(!(t<=0))for(var r=0,n=e[0].length;r<n;++r)for(var a=0,s=0,i=0;i<t;++i){var o=Po()(e[i][r][1])?e[i][r][0]:e[i][r][1];o>=0?(e[i][r][0]=a,e[i][r][1]=a+o,a=e[i][r][1]):(e[i][r][0]=s,e[i][r][1]=s+o,s=e[i][r][1])}},expand:function(e,t){if((n=e.length)>0){for(var r,n,a,s=0,i=e[0].length;s<i;++s){for(a=r=0;r<n;++r)a+=e[r][s][1]||0;if(a)for(r=0;r<n;++r)e[r][s][1]/=a}Vy(e,t)}},none:Vy,silhouette:function(e,t){if((r=e.length)>0){for(var r,n=0,a=e[t[0]],s=a.length;n<s;++n){for(var i=0,o=0;i<r;++i)o+=e[i][n][1]||0;a[n][1]+=a[n][0]=-o/2}Vy(e,t)}},wiggle:function(e,t){if((a=e.length)>0&&(n=(r=e[t[0]]).length)>0){for(var r,n,a,s=0,i=1;i<n;++i){for(var o=0,l=0,c=0;o<a;++o){for(var d=e[t[o]],u=d[i][1]||0,p=(u-(d[i-1][1]||0))/2,m=0;m<o;++m){var h=e[t[m]];p+=(h[i][1]||0)-(h[i-1][1]||0)}l+=u,c+=p*u}r[i-1][1]+=r[i-1][0]=s,l&&(s-=c/l)}r[i-1][1]+=r[i-1][0]=s,Vy(e,t)}},positive:function(e){var t=e.length;if(!(t<=0))for(var r=0,n=e[0].length;r<n;++r)for(var a=0,s=0;s<t;++s){var i=Po()(e[s][r][1])?e[s][r][0]:e[s][r][1];i>=0?(e[s][r][0]=a,e[s][r][1]=a+i,a=e[s][r][1]):(e[s][r][0]=0,e[s][r][1]=0)}}},fb=function(e,t,r){var n=t.map(function(e){return e.props.dataKey}),a=hb[r],s=function(){var e=sd([]),t=Hy,r=Vy,n=Ky;function a(a){var s,i,o=Array.from(e.apply(this,arguments),Yy),l=o.length,c=-1;for(const e of a)for(s=0,++c;s<l;++s)(o[s][c]=[0,+n(e,o[s].key,c,a)]).data=e;for(s=0,i=Gy(t(o));s<l;++s)o[i[s]].index=s;return r(o,i),o}return a.keys=function(t){return arguments.length?(e="function"===typeof t?t:sd(Array.from(t)),a):e},a.value=function(e){return arguments.length?(n="function"===typeof e?e:sd(+e),a):n},a.order=function(e){return arguments.length?(t=null==e?Hy:"function"===typeof e?e:sd(Array.from(e)),a):t},a.offset=function(e){return arguments.length?(r=null==e?Vy:e,a):r},a}().keys(n).value(function(e,t){return+nb(e,t,0)}).order(Hy).offset(a);return s(e)};function gb(e){var t=e.axis,r=e.ticks,n=e.bandSize,a=e.entry,s=e.index,i=e.dataKey;if("category"===t.type){if(!t.allowDuplicatedCategory&&t.dataKey&&!Ro()(a[t.dataKey])){var o=Ho(r,"value",a[t.dataKey]);if(o)return o.coordinate+n/2}return r[s]?r[s].coordinate+n/2:null}var l=nb(a,Ro()(i)?t.dataKey:i);return Ro()(l)?null:t.scale(l)}var xb=function(e){var t=e.axis,r=e.ticks,n=e.offset,a=e.bandSize,s=e.entry,i=e.index;if("category"===t.type)return r[i]?r[i].coordinate+n:null;var o=nb(s,t.dataKey,t.domain[i]);return Ro()(o)?null:t.scale(o)-a/2+n},yb=function(e,t,r){return Object.keys(e).reduce(function(n,a){var s=e[a].stackedData.reduce(function(e,n){var a=function(e){return e.reduce(function(e,t){return[Qy()(t.concat([e[0]]).filter(Bo)),Xy()(t.concat([e[1]]).filter(Bo))]},[1/0,-1/0])}(n.slice(t,r+1));return[Math.min(e[0],a[0]),Math.max(e[1],a[1])]},[1/0,-1/0]);return[Math.min(s[0],n[0]),Math.max(s[1],n[1])]},[1/0,-1/0]).map(function(e){return e===1/0||e===-1/0?0:e})},vb=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,bb=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,jb=function(e,t,r){if(Xo()(e))return e(t,r);if(!Array.isArray(e))return t;var n=[];if(Bo(e[0]))n[0]=r?e[0]:Math.min(e[0],t[0]);else if(vb.test(e[0])){var a=+vb.exec(e[0])[1];n[0]=t[0]-a}else Xo()(e[0])?n[0]=e[0](t[0]):n[0]=t[0];if(Bo(e[1]))n[1]=r?e[1]:Math.max(e[1],t[1]);else if(bb.test(e[1])){var s=+bb.exec(e[1])[1];n[1]=t[1]+s}else Xo()(e[1])?n[1]=e[1](t[1]):n[1]=t[1];return n},wb=function(e,t,r){if(e&&e.scale&&e.scale.bandwidth){var n=e.scale.bandwidth();if(!r||n>0)return n}if(e&&t&&t.length>=2){for(var a=Rl()(t,function(e){return e.coordinate}),s=1/0,i=1,o=a.length;i<o;i++){var l=a[i],c=a[i-1];s=Math.min((l.coordinate||0)-(c.coordinate||0),s)}return s===1/0?0:s}return r?void 0:0},Nb=function(e,t,r){return e&&e.length?rv()(e,To()(r,"type.defaultProps.domain"))?t:e:t},kb=function(e,t){var r=e.type.defaultProps?tb(tb({},e.type.defaultProps),e.props):e.props,n=r.dataKey,a=r.name,s=r.unit,i=r.formatter,o=r.tooltipType,l=r.chartType,c=r.hide;return tb(tb({},wl(e,!1)),{},{dataKey:n,unit:s,formatter:i,name:a||n,color:sb(e),value:nb(t,n),type:o,payload:t,chartType:l,hide:c})};function Sb(e){return Sb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Sb(e)}function _b(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Cb(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?_b(Object(r),!0).forEach(function(t){Ab(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_b(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function Ab(e,t,r){return t=function(e){var t=function(e,t){if("object"!=Sb(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Sb(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Sb(t)?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Ob=["Webkit","Moz","O","ms"];function Pb(e){return Pb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Pb(e)}function Eb(){return Eb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Eb.apply(this,arguments)}function Tb(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Ib(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Tb(Object(r),!0).forEach(function(t){Bb(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Tb(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function Mb(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Ub(n.key),n)}}function Db(e,t,r){return t=Fb(t),function(e,t){if(t&&("object"===Pb(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Rb()?Reflect.construct(t,r||[],Fb(e).constructor):t.apply(e,r))}function Rb(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(Rb=function(){return!!e})()}function Fb(e){return Fb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Fb(e)}function Lb(e,t){return Lb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Lb(e,t)}function Bb(e,t,r){return(t=Ub(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ub(e){var t=function(e,t){if("object"!=Pb(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Pb(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Pb(t)?t:t+""}var zb=function(e){return e.changedTouches&&!!e.changedTouches.length},qb=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Bb(r=Db(this,t,[e]),"handleDrag",function(e){r.leaveTimer&&(clearTimeout(r.leaveTimer),r.leaveTimer=null),r.state.isTravellerMoving?r.handleTravellerMove(e):r.state.isSlideMoving&&r.handleSlideDrag(e)}),Bb(r,"handleTouchMove",function(e){null!=e.changedTouches&&e.changedTouches.length>0&&r.handleDrag(e.changedTouches[0])}),Bb(r,"handleDragEnd",function(){r.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var e=r.props,t=e.endIndex,n=e.onDragEnd,a=e.startIndex;null===n||void 0===n||n({endIndex:t,startIndex:a})}),r.detachDragEndListener()}),Bb(r,"handleLeaveWrapper",function(){(r.state.isTravellerMoving||r.state.isSlideMoving)&&(r.leaveTimer=window.setTimeout(r.handleDragEnd,r.props.leaveTimeOut))}),Bb(r,"handleEnterSlideOrTraveller",function(){r.setState({isTextActive:!0})}),Bb(r,"handleLeaveSlideOrTraveller",function(){r.setState({isTextActive:!1})}),Bb(r,"handleSlideDragStart",function(e){var t=zb(e)?e.changedTouches[0]:e;r.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:t.pageX}),r.attachDragEndListener()}),r.travellerDragStartHandlers={startX:r.handleTravellerDragStart.bind(r,"startX"),endX:r.handleTravellerDragStart.bind(r,"endX")},r.state={},r}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Lb(e,t)}(t,e),r=t,n=[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(e){var r=e.startX,n=e.endX,a=this.state.scaleValues,s=this.props,i=s.gap,o=s.data.length-1,l=Math.min(r,n),c=Math.max(r,n),d=t.getIndexInRange(a,l),u=t.getIndexInRange(a,c);return{startIndex:d-d%i,endIndex:u===o?o:u-u%i}}},{key:"getTextOfTick",value:function(e){var t=this.props,r=t.data,n=t.tickFormatter,a=t.dataKey,s=nb(r[e],a,e);return Xo()(n)?n(s,e):s}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(e){var t=this.state,r=t.slideMoveStartX,n=t.startX,a=t.endX,s=this.props,i=s.x,o=s.width,l=s.travellerWidth,c=s.startIndex,d=s.endIndex,u=s.onChange,p=e.pageX-r;p>0?p=Math.min(p,i+o-l-a,i+o-l-n):p<0&&(p=Math.max(p,i-n,i-a));var m=this.getIndex({startX:n+p,endX:a+p});m.startIndex===c&&m.endIndex===d||!u||u(m),this.setState({startX:n+p,endX:a+p,slideMoveStartX:e.pageX})}},{key:"handleTravellerDragStart",value:function(e,t){var r=zb(t)?t.changedTouches[0]:t;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:e,brushMoveStartX:r.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(e){var t=this.state,r=t.brushMoveStartX,n=t.movingTravellerId,a=t.endX,s=t.startX,i=this.state[n],o=this.props,l=o.x,c=o.width,d=o.travellerWidth,u=o.onChange,p=o.gap,m=o.data,h={startX:this.state.startX,endX:this.state.endX},f=e.pageX-r;f>0?f=Math.min(f,l+c-d-i):f<0&&(f=Math.max(f,l-i)),h[n]=i+f;var g=this.getIndex(h),x=g.startIndex,y=g.endIndex;this.setState(Bb(Bb({},n,i+f),"brushMoveStartX",e.pageX),function(){u&&function(){var e=m.length-1;return"startX"===n&&(a>s?x%p===0:y%p===0)||a<s&&y===e||"endX"===n&&(a>s?y%p===0:x%p===0)||a>s&&y===e}()&&u(g)})}},{key:"handleTravellerMoveKeyboard",value:function(e,t){var r=this,n=this.state,a=n.scaleValues,s=n.startX,i=n.endX,o=this.state[t],l=a.indexOf(o);if(-1!==l){var c=l+e;if(!(-1===c||c>=a.length)){var d=a[c];"startX"===t&&d>=i||"endX"===t&&d<=s||this.setState(Bb({},t,d),function(){r.props.onChange(r.getIndex({startX:r.state.startX,endX:r.state.endX}))})}}}},{key:"renderBackground",value:function(){var e=this.props,t=e.x,r=e.y,n=e.width,s=e.height,i=e.fill,o=e.stroke;return a.createElement("rect",{stroke:o,fill:i,x:t,y:r,width:n,height:s})}},{key:"renderPanorama",value:function(){var e=this.props,t=e.x,r=e.y,n=e.width,s=e.height,i=e.data,o=e.children,l=e.padding,c=a.Children.only(o);return c?a.cloneElement(c,{x:t,y:r,width:n,height:s,margin:l,compact:!0,data:i}):null}},{key:"renderTravellerLayer",value:function(e,r){var n,s,i=this,o=this.props,l=o.y,c=o.travellerWidth,d=o.height,u=o.traveller,p=o.ariaLabel,m=o.data,h=o.startIndex,f=o.endIndex,g=Math.max(e,this.props.x),x=Ib(Ib({},wl(this.props,!1)),{},{x:g,y:l,width:c,height:d}),y=p||"Min value: ".concat(null===(n=m[h])||void 0===n?void 0:n.name,", Max value: ").concat(null===(s=m[f])||void 0===s?void 0:s.name);return a.createElement(Hl,{tabIndex:0,role:"slider","aria-label":y,"aria-valuenow":e,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[r],onTouchStart:this.travellerDragStartHandlers[r],onKeyDown:function(e){["ArrowLeft","ArrowRight"].includes(e.key)&&(e.preventDefault(),e.stopPropagation(),i.handleTravellerMoveKeyboard("ArrowRight"===e.key?1:-1,r))},onFocus:function(){i.setState({isTravellerFocused:!0})},onBlur:function(){i.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},t.renderTraveller(u,x))}},{key:"renderSlide",value:function(e,t){var r=this.props,n=r.y,s=r.height,i=r.stroke,o=r.travellerWidth,l=Math.min(e,t)+o,c=Math.max(Math.abs(t-e)-o,0);return a.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:i,fillOpacity:.2,x:l,y:n,width:c,height:s})}},{key:"renderText",value:function(){var e=this.props,t=e.startIndex,r=e.endIndex,n=e.y,s=e.height,i=e.travellerWidth,o=e.stroke,l=this.state,c=l.startX,d=l.endX,u={pointerEvents:"none",fill:o};return a.createElement(Hl,{className:"recharts-brush-texts"},a.createElement(Hm,Eb({textAnchor:"end",verticalAnchor:"middle",x:Math.min(c,d)-5,y:n+s/2},u),this.getTextOfTick(t)),a.createElement(Hm,Eb({textAnchor:"start",verticalAnchor:"middle",x:Math.max(c,d)+i+5,y:n+s/2},u),this.getTextOfTick(r)))}},{key:"render",value:function(){var e=this.props,t=e.data,r=e.className,n=e.children,s=e.x,i=e.y,o=e.width,l=e.height,c=e.alwaysShowText,d=this.state,u=d.startX,p=d.endX,m=d.isTextActive,h=d.isSlideMoving,f=d.isTravellerMoving,g=d.isTravellerFocused;if(!t||!t.length||!Bo(s)||!Bo(i)||!Bo(o)||!Bo(l)||o<=0||l<=0)return null;var x=ko("recharts-brush",r),y=1===a.Children.count(n),v=function(e,t){if(!e)return null;var r=e.replace(/(\w)/,function(e){return e.toUpperCase()}),n=Ob.reduce(function(e,n){return Cb(Cb({},e),{},Ab({},n+r,t))},{});return n[e]=t,n}("userSelect","none");return a.createElement(Hl,{className:x,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:v},this.renderBackground(),y&&this.renderPanorama(),this.renderSlide(u,p),this.renderTravellerLayer(u,"startX"),this.renderTravellerLayer(p,"endX"),(m||h||f||g||c)&&this.renderText())}}],s=[{key:"renderDefaultTraveller",value:function(e){var t=e.x,r=e.y,n=e.width,s=e.height,i=e.stroke,o=Math.floor(r+s/2)-1;return a.createElement(a.Fragment,null,a.createElement("rect",{x:t,y:r,width:n,height:s,fill:i,stroke:"none"}),a.createElement("line",{x1:t+1,y1:o,x2:t+n-1,y2:o,fill:"none",stroke:"#fff"}),a.createElement("line",{x1:t+1,y1:o+2,x2:t+n-1,y2:o+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(e,r){return a.isValidElement(e)?a.cloneElement(e,r):Xo()(e)?e(r):t.renderDefaultTraveller(r)}},{key:"getDerivedStateFromProps",value:function(e,t){var r=e.data,n=e.width,a=e.x,s=e.travellerWidth,i=e.updateId,o=e.startIndex,l=e.endIndex;if(r!==t.prevData||i!==t.prevUpdateId)return Ib({prevData:r,prevTravellerWidth:s,prevUpdateId:i,prevX:a,prevWidth:n},r&&r.length?function(e){var t=e.data,r=e.startIndex,n=e.endIndex,a=e.x,s=e.width,i=e.travellerWidth;if(!t||!t.length)return{};var o=t.length,l=cm().domain(Ml()(0,o)).range([a,a+s-i]),c=l.domain().map(function(e){return l(e)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:l(r),endX:l(n),scale:l,scaleValues:c}}({data:r,width:n,x:a,travellerWidth:s,startIndex:o,endIndex:l}):{scale:null,scaleValues:null});if(t.scale&&(n!==t.prevWidth||a!==t.prevX||s!==t.prevTravellerWidth)){t.scale.range([a,a+n-s]);var c=t.scale.domain().map(function(e){return t.scale(e)});return{prevData:r,prevTravellerWidth:s,prevUpdateId:i,prevX:a,prevWidth:n,startX:t.scale(e.startIndex),endX:t.scale(e.endIndex),scaleValues:c}}return null}},{key:"getIndexInRange",value:function(e,t){for(var r=0,n=e.length-1;n-r>1;){var a=Math.floor((r+n)/2);e[a]>t?n=a:r=a}return t>=e[n]?n:r}}],n&&Mb(r.prototype,n),s&&Mb(r,s),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,s}(a.PureComponent);function Wb(e){return Wb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Wb(e)}function Vb(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Gb(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Vb(Object(r),!0).forEach(function(t){Hb(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Vb(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function Hb(e,t,r){return t=function(e){var t=function(e,t){if("object"!=Wb(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Wb(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Wb(t)?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Bb(qb,"displayName","Brush"),Bb(qb,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var Kb=Math.PI/180,Yb=function(e){return 180*e/Math.PI},Jb=function(e,t,r,n){return{x:e+Math.cos(-Kb*n)*r,y:t+Math.sin(-Kb*n)*r}},Xb=function(e,t){var r=e.x,n=e.y,a=t.cx,s=t.cy,i=function(e,t){var r=e.x,n=e.y,a=t.x,s=t.y;return Math.sqrt(Math.pow(r-a,2)+Math.pow(n-s,2))}({x:r,y:n},{x:a,y:s});if(i<=0)return{radius:i};var o=(r-a)/i,l=Math.acos(o);return n>s&&(l=2*Math.PI-l),{radius:i,angle:Yb(l),angleInRadian:l}},$b=function(e,t){var r=t.startAngle,n=t.endAngle,a=Math.floor(r/360),s=Math.floor(n/360);return e+360*Math.min(a,s)},Qb=function(e,t){var r=e.x,n=e.y,a=Xb({x:r,y:n},t),s=a.radius,i=a.angle,o=t.innerRadius,l=t.outerRadius;if(s<o||s>l)return!1;if(0===s)return!0;var c,d=function(e){var t=e.startAngle,r=e.endAngle,n=Math.floor(t/360),a=Math.floor(r/360),s=Math.min(n,a);return{startAngle:t-360*s,endAngle:r-360*s}}(t),u=d.startAngle,p=d.endAngle,m=i;if(u<=p){for(;m>p;)m-=360;for(;m<u;)m+=360;c=m>=u&&m<=p}else{for(;m>u;)m-=360;for(;m<p;)m+=360;c=m>=p&&m<=u}return c?Gb(Gb({},t),{},{radius:s,angle:$b(m,t)}):null};function Zb(e){return Zb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Zb(e)}var ej=["offset"];function tj(e){return function(e){if(Array.isArray(e))return rj(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return rj(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return rj(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function rj(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function nj(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function aj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function sj(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?aj(Object(r),!0).forEach(function(t){ij(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):aj(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function ij(e,t,r){return t=function(e){var t=function(e,t){if("object"!=Zb(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Zb(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Zb(t)?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function oj(){return oj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},oj.apply(this,arguments)}var lj=function(e,t,r){var n,s,i=e.position,o=e.viewBox,l=e.offset,c=e.className,d=o,u=d.cx,p=d.cy,m=d.innerRadius,h=d.outerRadius,f=d.startAngle,g=d.endAngle,x=d.clockWise,y=(m+h)/2,v=function(e,t){return Fo(t-e)*Math.min(Math.abs(t-e),360)}(f,g),b=v>=0?1:-1;"insideStart"===i?(n=f+b*l,s=x):"insideEnd"===i?(n=g-b*l,s=!x):"end"===i&&(n=g+b*l,s=x),s=v<=0?s:!s;var j=Jb(u,p,y,n),w=Jb(u,p,y,n+359*(s?1:-1)),N="M".concat(j.x,",").concat(j.y,"\n    A").concat(y,",").concat(y,",0,1,").concat(s?0:1,",\n    ").concat(w.x,",").concat(w.y),k=Ro()(e.id)?qo("recharts-radial-line-"):e.id;return a.createElement("text",oj({},r,{dominantBaseline:"central",className:ko("recharts-radial-bar-label",c)}),a.createElement("defs",null,a.createElement("path",{id:k,d:N})),a.createElement("textPath",{xlinkHref:"#".concat(k)},t))};function cj(e){var t,r=e.offset,n=sj({offset:void 0===r?5:r},nj(e,ej)),s=n.viewBox,i=n.position,o=n.value,l=n.children,c=n.content,d=n.className,u=void 0===d?"":d,p=n.textBreakAll;if(!s||Ro()(o)&&Ro()(l)&&!(0,a.isValidElement)(c)&&!Xo()(c))return null;if((0,a.isValidElement)(c))return(0,a.cloneElement)(c,n);if(Xo()(c)){if(t=(0,a.createElement)(c,n),(0,a.isValidElement)(t))return t}else t=function(e){var t=e.value,r=e.formatter,n=Ro()(e.children)?t:e.children;return Xo()(r)?r(n):n}(n);var m=function(e){return"cx"in e&&Bo(e.cx)}(s),h=wl(n,!0);if(m&&("insideStart"===i||"insideEnd"===i||"end"===i))return lj(n,t,h);var f=m?function(e){var t=e.viewBox,r=e.offset,n=e.position,a=t,s=a.cx,i=a.cy,o=a.innerRadius,l=a.outerRadius,c=(a.startAngle+a.endAngle)/2;if("outside"===n){var d=Jb(s,i,l+r,c),u=d.x;return{x:u,y:d.y,textAnchor:u>=s?"start":"end",verticalAnchor:"middle"}}if("center"===n)return{x:s,y:i,textAnchor:"middle",verticalAnchor:"middle"};if("centerTop"===n)return{x:s,y:i,textAnchor:"middle",verticalAnchor:"start"};if("centerBottom"===n)return{x:s,y:i,textAnchor:"middle",verticalAnchor:"end"};var p=Jb(s,i,(o+l)/2,c);return{x:p.x,y:p.y,textAnchor:"middle",verticalAnchor:"middle"}}(n):function(e){var t=e.viewBox,r=e.parentViewBox,n=e.offset,a=e.position,s=t,i=s.x,o=s.y,l=s.width,c=s.height,d=c>=0?1:-1,u=d*n,p=d>0?"end":"start",m=d>0?"start":"end",h=l>=0?1:-1,f=h*n,g=h>0?"end":"start",x=h>0?"start":"end";if("top"===a)return sj(sj({},{x:i+l/2,y:o-d*n,textAnchor:"middle",verticalAnchor:p}),r?{height:Math.max(o-r.y,0),width:l}:{});if("bottom"===a)return sj(sj({},{x:i+l/2,y:o+c+u,textAnchor:"middle",verticalAnchor:m}),r?{height:Math.max(r.y+r.height-(o+c),0),width:l}:{});if("left"===a){var y={x:i-f,y:o+c/2,textAnchor:g,verticalAnchor:"middle"};return sj(sj({},y),r?{width:Math.max(y.x-r.x,0),height:c}:{})}if("right"===a){var v={x:i+l+f,y:o+c/2,textAnchor:x,verticalAnchor:"middle"};return sj(sj({},v),r?{width:Math.max(r.x+r.width-v.x,0),height:c}:{})}var b=r?{width:l,height:c}:{};return"insideLeft"===a?sj({x:i+f,y:o+c/2,textAnchor:x,verticalAnchor:"middle"},b):"insideRight"===a?sj({x:i+l-f,y:o+c/2,textAnchor:g,verticalAnchor:"middle"},b):"insideTop"===a?sj({x:i+l/2,y:o+u,textAnchor:"middle",verticalAnchor:m},b):"insideBottom"===a?sj({x:i+l/2,y:o+c-u,textAnchor:"middle",verticalAnchor:p},b):"insideTopLeft"===a?sj({x:i+f,y:o+u,textAnchor:x,verticalAnchor:m},b):"insideTopRight"===a?sj({x:i+l-f,y:o+u,textAnchor:g,verticalAnchor:m},b):"insideBottomLeft"===a?sj({x:i+f,y:o+c-u,textAnchor:x,verticalAnchor:p},b):"insideBottomRight"===a?sj({x:i+l-f,y:o+c-u,textAnchor:g,verticalAnchor:p},b):Qo()(a)&&(Bo(a.x)||Lo(a.x))&&(Bo(a.y)||Lo(a.y))?sj({x:i+Wo(a.x,l),y:o+Wo(a.y,c),textAnchor:"end",verticalAnchor:"end"},b):sj({x:i+l/2,y:o+c/2,textAnchor:"middle",verticalAnchor:"middle"},b)}(n);return a.createElement(Hm,oj({className:ko("recharts-label",u)},h,f,{breakAll:p}),t)}cj.displayName="Label";var dj=function(e){var t=e.cx,r=e.cy,n=e.angle,a=e.startAngle,s=e.endAngle,i=e.r,o=e.radius,l=e.innerRadius,c=e.outerRadius,d=e.x,u=e.y,p=e.top,m=e.left,h=e.width,f=e.height,g=e.clockWise,x=e.labelViewBox;if(x)return x;if(Bo(h)&&Bo(f)){if(Bo(d)&&Bo(u))return{x:d,y:u,width:h,height:f};if(Bo(p)&&Bo(m))return{x:p,y:m,width:h,height:f}}return Bo(d)&&Bo(u)?{x:d,y:u,width:0,height:0}:Bo(t)&&Bo(r)?{cx:t,cy:r,startAngle:a||n||0,endAngle:s||n||0,innerRadius:l||0,outerRadius:c||o||i||0,clockWise:g}:e.viewBox?e.viewBox:{}};cj.parseViewBox=dj,cj.renderCallByParent=function(e,t){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!e||!e.children&&r&&!e.label)return null;var n=e.children,s=dj(e),i=xl(n,cj).map(function(e,r){return(0,a.cloneElement)(e,{viewBox:t||s,key:"label-".concat(r)})});if(!r)return i;var o=function(e,t){return e?!0===e?a.createElement(cj,{key:"label-implicit",viewBox:t}):Uo(e)?a.createElement(cj,{key:"label-implicit",viewBox:t,value:e}):(0,a.isValidElement)(e)?e.type===cj?(0,a.cloneElement)(e,{key:"label-implicit",viewBox:t}):a.createElement(cj,{key:"label-implicit",content:e,viewBox:t}):Xo()(e)?a.createElement(cj,{key:"label-implicit",content:e,viewBox:t}):Qo()(e)?a.createElement(cj,oj({viewBox:t},e,{key:"label-implicit"})):null:null}(e.label,t||s);return[o].concat(tj(i))};var uj=function(e,t){var r=e.alwaysShow,n=e.ifOverflow;return r&&(n="extendDomain"),n===t},pj=r(1733),mj=r.n(pj),hj=r(7002),fj=r.n(hj),gj=function(e){return null};gj.displayName="Cell";var xj=r(4065),yj=r.n(xj);function vj(e){return vj="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vj(e)}var bj=["valueAccessor"],jj=["data","dataKey","clockWise","id","textBreakAll"];function wj(e){return function(e){if(Array.isArray(e))return Nj(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return Nj(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Nj(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Nj(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function kj(){return kj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},kj.apply(this,arguments)}function Sj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function _j(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Sj(Object(r),!0).forEach(function(t){Cj(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Sj(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function Cj(e,t,r){return t=function(e){var t=function(e,t){if("object"!=vj(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=vj(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==vj(t)?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Aj(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var Oj=function(e){return Array.isArray(e.value)?yj()(e.value):e.value};function Pj(e){var t=e.valueAccessor,r=void 0===t?Oj:t,n=Aj(e,bj),s=n.data,i=n.dataKey,o=n.clockWise,l=n.id,c=n.textBreakAll,d=Aj(n,jj);return s&&s.length?a.createElement(Hl,{className:"recharts-label-list"},s.map(function(e,t){var n=Ro()(i)?r(e,t):nb(e&&e.payload,i),s=Ro()(l)?{}:{id:"".concat(l,"-").concat(t)};return a.createElement(cj,kj({},wl(e,!0),d,s,{parentViewBox:e.parentViewBox,value:n,textBreakAll:c,viewBox:cj.parseViewBox(Ro()(o)?e:_j(_j({},e),{},{clockWise:o})),key:"label-".concat(t),index:t}))})):null}Pj.displayName="LabelList",Pj.renderCallByParent=function(e,t){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!e||!e.children&&r&&!e.label)return null;var n=xl(e.children,Pj).map(function(e,r){return(0,a.cloneElement)(e,{data:t,key:"labelList-".concat(r)})});if(!r)return n;var s=function(e,t){return e?!0===e?a.createElement(Pj,{key:"labelList-implicit",data:t}):a.isValidElement(e)||Xo()(e)?a.createElement(Pj,{key:"labelList-implicit",data:t,content:e}):Qo()(e)?a.createElement(Pj,kj({data:t},e,{key:"labelList-implicit"})):null:null}(e.label,t);return[s].concat(wj(n))};var Ej=r(2322),Tj=r.n(Ej),Ij=r(6361),Mj=r.n(Ij);function Dj(e){return Dj="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Dj(e)}function Rj(){return Rj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Rj.apply(this,arguments)}function Fj(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,s,i,o=[],l=!0,c=!1;try{if(s=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=s.call(r)).done)&&(o.push(n.value),o.length!==t);l=!0);}catch(e){c=!0,a=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(c)throw a}}return o}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Lj(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Lj(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Lj(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Bj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Uj(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Bj(Object(r),!0).forEach(function(t){zj(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Bj(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function zj(e,t,r){return t=function(e){var t=function(e,t){if("object"!=Dj(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Dj(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Dj(t)?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var qj=function(e,t,r,n,a){var s,i=r-n;return s="M ".concat(e,",").concat(t),s+="L ".concat(e+r,",").concat(t),s+="L ".concat(e+r-i/2,",").concat(t+a),s+="L ".concat(e+r-i/2-n,",").concat(t+a),s+="L ".concat(e,",").concat(t," Z")},Wj={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Vj=function(e){var t=Uj(Uj({},Wj),e),r=(0,a.useRef)(),n=Fj((0,a.useState)(-1),2),s=n[0],i=n[1];(0,a.useEffect)(function(){if(r.current&&r.current.getTotalLength)try{var e=r.current.getTotalLength();e&&i(e)}catch(t){}},[]);var o=t.x,l=t.y,c=t.upperWidth,d=t.lowerWidth,u=t.height,p=t.className,m=t.animationEasing,h=t.animationDuration,f=t.animationBegin,g=t.isUpdateAnimationActive;if(o!==+o||l!==+l||c!==+c||d!==+d||u!==+u||0===c&&0===d||0===u)return null;var x=ko("recharts-trapezoid",p);return g?a.createElement(Up,{canBegin:s>0,from:{upperWidth:0,lowerWidth:0,height:u,x:o,y:l},to:{upperWidth:c,lowerWidth:d,height:u,x:o,y:l},duration:h,animationEasing:m,isActive:g},function(e){var n=e.upperWidth,i=e.lowerWidth,o=e.height,l=e.x,c=e.y;return a.createElement(Up,{canBegin:s>0,from:"0px ".concat(-1===s?1:s,"px"),to:"".concat(s,"px 0px"),attributeName:"strokeDasharray",begin:f,duration:h,easing:m},a.createElement("path",Rj({},wl(t,!0),{className:x,d:qj(l,c,n,i,o),ref:r})))}):a.createElement("g",null,a.createElement("path",Rj({},wl(t,!0),{className:x,d:qj(o,l,c,d,u)})))};function Gj(e){return Gj="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Gj(e)}function Hj(){return Hj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Hj.apply(this,arguments)}function Kj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Yj(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Kj(Object(r),!0).forEach(function(t){Jj(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Kj(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function Jj(e,t,r){return t=function(e){var t=function(e,t){if("object"!=Gj(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Gj(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Gj(t)?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Xj=function(e){var t=e.cx,r=e.cy,n=e.radius,a=e.angle,s=e.sign,i=e.isExternal,o=e.cornerRadius,l=e.cornerIsExternal,c=o*(i?1:-1)+n,d=Math.asin(o/c)/Kb,u=l?a:a+s*d,p=l?a-s*d:a;return{center:Jb(t,r,c,u),circleTangency:Jb(t,r,n,u),lineTangency:Jb(t,r,c*Math.cos(d*Kb),p),theta:d}},$j=function(e){var t=e.cx,r=e.cy,n=e.innerRadius,a=e.outerRadius,s=e.startAngle,i=function(e,t){return Fo(t-e)*Math.min(Math.abs(t-e),359.999)}(s,e.endAngle),o=s+i,l=Jb(t,r,a,s),c=Jb(t,r,a,o),d="M ".concat(l.x,",").concat(l.y,"\n    A ").concat(a,",").concat(a,",0,\n    ").concat(+(Math.abs(i)>180),",").concat(+(s>o),",\n    ").concat(c.x,",").concat(c.y,"\n  ");if(n>0){var u=Jb(t,r,n,s),p=Jb(t,r,n,o);d+="L ".concat(p.x,",").concat(p.y,"\n            A ").concat(n,",").concat(n,",0,\n            ").concat(+(Math.abs(i)>180),",").concat(+(s<=o),",\n            ").concat(u.x,",").concat(u.y," Z")}else d+="L ".concat(t,",").concat(r," Z");return d},Qj={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},Zj=function(e){var t=Yj(Yj({},Qj),e),r=t.cx,n=t.cy,s=t.innerRadius,i=t.outerRadius,o=t.cornerRadius,l=t.forceCornerRadius,c=t.cornerIsExternal,d=t.startAngle,u=t.endAngle,p=t.className;if(i<s||d===u)return null;var m,h=ko("recharts-sector",p),f=i-s,g=Wo(o,f,0,!0);return m=g>0&&Math.abs(d-u)<360?function(e){var t=e.cx,r=e.cy,n=e.innerRadius,a=e.outerRadius,s=e.cornerRadius,i=e.forceCornerRadius,o=e.cornerIsExternal,l=e.startAngle,c=e.endAngle,d=Fo(c-l),u=Xj({cx:t,cy:r,radius:a,angle:l,sign:d,cornerRadius:s,cornerIsExternal:o}),p=u.circleTangency,m=u.lineTangency,h=u.theta,f=Xj({cx:t,cy:r,radius:a,angle:c,sign:-d,cornerRadius:s,cornerIsExternal:o}),g=f.circleTangency,x=f.lineTangency,y=f.theta,v=o?Math.abs(l-c):Math.abs(l-c)-h-y;if(v<0)return i?"M ".concat(m.x,",").concat(m.y,"\n        a").concat(s,",").concat(s,",0,0,1,").concat(2*s,",0\n        a").concat(s,",").concat(s,",0,0,1,").concat(2*-s,",0\n      "):$j({cx:t,cy:r,innerRadius:n,outerRadius:a,startAngle:l,endAngle:c});var b="M ".concat(m.x,",").concat(m.y,"\n    A").concat(s,",").concat(s,",0,0,").concat(+(d<0),",").concat(p.x,",").concat(p.y,"\n    A").concat(a,",").concat(a,",0,").concat(+(v>180),",").concat(+(d<0),",").concat(g.x,",").concat(g.y,"\n    A").concat(s,",").concat(s,",0,0,").concat(+(d<0),",").concat(x.x,",").concat(x.y,"\n  ");if(n>0){var j=Xj({cx:t,cy:r,radius:n,angle:l,sign:d,isExternal:!0,cornerRadius:s,cornerIsExternal:o}),w=j.circleTangency,N=j.lineTangency,k=j.theta,S=Xj({cx:t,cy:r,radius:n,angle:c,sign:-d,isExternal:!0,cornerRadius:s,cornerIsExternal:o}),_=S.circleTangency,C=S.lineTangency,A=S.theta,O=o?Math.abs(l-c):Math.abs(l-c)-k-A;if(O<0&&0===s)return"".concat(b,"L").concat(t,",").concat(r,"Z");b+="L".concat(C.x,",").concat(C.y,"\n      A").concat(s,",").concat(s,",0,0,").concat(+(d<0),",").concat(_.x,",").concat(_.y,"\n      A").concat(n,",").concat(n,",0,").concat(+(O>180),",").concat(+(d>0),",").concat(w.x,",").concat(w.y,"\n      A").concat(s,",").concat(s,",0,0,").concat(+(d<0),",").concat(N.x,",").concat(N.y,"Z")}else b+="L".concat(t,",").concat(r,"Z");return b}({cx:r,cy:n,innerRadius:s,outerRadius:i,cornerRadius:Math.min(g,f/2),forceCornerRadius:l,cornerIsExternal:c,startAngle:d,endAngle:u}):$j({cx:r,cy:n,innerRadius:s,outerRadius:i,startAngle:d,endAngle:u}),a.createElement("path",Hj({},wl(t,!0),{className:h,d:m,role:"img"}))},ew=["option","shapeType","propTransformer","activeClassName","isActive"];function tw(e){return tw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},tw(e)}function rw(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function nw(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function aw(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?nw(Object(r),!0).forEach(function(t){sw(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):nw(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function sw(e,t,r){return t=function(e){var t=function(e,t){if("object"!=tw(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=tw(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==tw(t)?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function iw(e,t){return aw(aw({},t),e)}function ow(e){var t=e.shapeType,r=e.elementProps;switch(t){case"rectangle":return a.createElement($p,r);case"trapezoid":return a.createElement(Vj,r);case"sector":return a.createElement(Zj,r);case"symbols":if(function(e){return"symbols"===e}(t))return a.createElement(Rd,r);break;default:return null}}function lw(e){var t,r=e.option,n=e.shapeType,s=e.propTransformer,i=void 0===s?iw:s,o=e.activeClassName,l=void 0===o?"recharts-active-shape":o,c=e.isActive,d=rw(e,ew);if((0,a.isValidElement)(r))t=(0,a.cloneElement)(r,aw(aw({},d),function(e){return(0,a.isValidElement)(e)?e.props:e}(r)));else if(Xo()(r))t=r(d);else if(Tj()(r)&&!Mj()(r)){var u=i(r,d);t=a.createElement(ow,{shapeType:n,elementProps:u})}else{var p=d;t=a.createElement(ow,{shapeType:n,elementProps:p})}return c?a.createElement(Hl,{className:l},t):t}function cw(e,t){return null!=t&&"trapezoids"in e.props}function dw(e,t){return null!=t&&"sectors"in e.props}function uw(e,t){return null!=t&&"points"in e.props}function pw(e,t){var r,n,a=e.x===(null===t||void 0===t||null===(r=t.labelViewBox)||void 0===r?void 0:r.x)||e.x===t.x,s=e.y===(null===t||void 0===t||null===(n=t.labelViewBox)||void 0===n?void 0:n.y)||e.y===t.y;return a&&s}function mw(e,t){var r=e.endAngle===t.endAngle,n=e.startAngle===t.startAngle;return r&&n}function hw(e,t){var r=e.x===t.x,n=e.y===t.y,a=e.z===t.z;return r&&n&&a}function fw(e){var t=e.activeTooltipItem,r=e.graphicalItem,n=e.itemData,a=function(e,t){var r;return cw(e,t)?r="trapezoids":dw(e,t)?r="sectors":uw(e,t)&&(r="points"),r}(r,t),s=function(e,t){var r,n;return cw(e,t)?null===(r=t.tooltipPayload)||void 0===r||null===(r=r[0])||void 0===r||null===(r=r.payload)||void 0===r?void 0:r.payload:dw(e,t)?null===(n=t.tooltipPayload)||void 0===n||null===(n=n[0])||void 0===n||null===(n=n.payload)||void 0===n?void 0:n.payload:uw(e,t)?t.payload:{}}(r,t),i=n.filter(function(e,n){var i=rv()(s,e),o=r.props[a].filter(function(e){var n=function(e,t){var r;return cw(e,t)?r=pw:dw(e,t)?r=mw:uw(e,t)&&(r=hw),r}(r,t);return n(e,t)}),l=r.props[a].indexOf(o[o.length-1]);return i&&n===l});return n.indexOf(i[i.length-1])}var gw=["x","y"];function xw(e){return xw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xw(e)}function yw(){return yw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},yw.apply(this,arguments)}function vw(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function bw(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?vw(Object(r),!0).forEach(function(t){jw(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):vw(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function jw(e,t,r){return t=function(e){var t=function(e,t){if("object"!=xw(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=xw(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==xw(t)?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ww(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Nw(e,t){var r=e.x,n=e.y,a=ww(e,gw),s="".concat(r),i=parseInt(s,10),o="".concat(n),l=parseInt(o,10),c="".concat(t.height||a.height),d=parseInt(c,10),u="".concat(t.width||a.width),p=parseInt(u,10);return bw(bw(bw(bw(bw({},t),a),i?{x:i}:{}),l?{y:l}:{}),{},{height:d,width:p,name:t.name,radius:t.radius})}function kw(e){return a.createElement(lw,yw({shapeType:"rectangle",propTransformer:Nw,activeClassName:"recharts-active-bar"},e))}var Sw,_w=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return function(r,n){if("number"===typeof e)return e;var a=Bo(r)||function(e){return Ro()(e)}(r);return a?e(r,n):(a||Ll(!1),t)}},Cw=["value","background"];function Aw(e){return Aw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Aw(e)}function Ow(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Pw(){return Pw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Pw.apply(this,arguments)}function Ew(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Tw(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ew(Object(r),!0).forEach(function(t){Lw(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ew(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function Iw(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Bw(n.key),n)}}function Mw(e,t,r){return t=Rw(t),function(e,t){if(t&&("object"===Aw(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Dw()?Reflect.construct(t,r||[],Rw(e).constructor):t.apply(e,r))}function Dw(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(Dw=function(){return!!e})()}function Rw(e){return Rw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Rw(e)}function Fw(e,t){return Fw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Fw(e,t)}function Lw(e,t,r){return(t=Bw(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Bw(e){var t=function(e,t){if("object"!=Aw(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Aw(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Aw(t)?t:t+""}var Uw=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return Lw(e=Mw(this,t,[].concat(n)),"state",{isAnimationFinished:!1}),Lw(e,"id",qo("recharts-bar-")),Lw(e,"handleAnimationEnd",function(){var t=e.props.onAnimationEnd;e.setState({isAnimationFinished:!0}),t&&t()}),Lw(e,"handleAnimationStart",function(){var t=e.props.onAnimationStart;e.setState({isAnimationFinished:!1}),t&&t()}),e}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Fw(e,t)}(t,e),r=t,n=[{key:"renderRectanglesStatically",value:function(e){var t=this,r=this.props,n=r.shape,s=r.dataKey,i=r.activeIndex,o=r.activeBar,l=wl(this.props,!1);return e&&e.map(function(e,r){var c=r===i,d=c?o:n,u=Tw(Tw(Tw({},l),e),{},{isActive:c,option:d,index:r,dataKey:s,onAnimationStart:t.handleAnimationStart,onAnimationEnd:t.handleAnimationEnd});return a.createElement(Hl,Pw({className:"recharts-bar-rectangle"},ol(t.props,e,r),{key:"rectangle-".concat(null===e||void 0===e?void 0:e.x,"-").concat(null===e||void 0===e?void 0:e.y,"-").concat(null===e||void 0===e?void 0:e.value,"-").concat(r)}),a.createElement(kw,u))})}},{key:"renderRectanglesWithAnimation",value:function(){var e=this,t=this.props,r=t.data,n=t.layout,s=t.isAnimationActive,i=t.animationBegin,o=t.animationDuration,l=t.animationEasing,c=t.animationId,d=this.state.prevData;return a.createElement(Up,{begin:i,duration:o,isActive:s,easing:l,from:{t:0},to:{t:1},key:"bar-".concat(c),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(t){var s=t.t,i=r.map(function(e,t){var r=d&&d[t];if(r){var a=Go(r.x,e.x),i=Go(r.y,e.y),o=Go(r.width,e.width),l=Go(r.height,e.height);return Tw(Tw({},e),{},{x:a(s),y:i(s),width:o(s),height:l(s)})}if("horizontal"===n){var c=Go(0,e.height)(s);return Tw(Tw({},e),{},{y:e.y+e.height-c,height:c})}var u=Go(0,e.width)(s);return Tw(Tw({},e),{},{width:u})});return a.createElement(Hl,null,e.renderRectanglesStatically(i))})}},{key:"renderRectangles",value:function(){var e=this.props,t=e.data,r=e.isAnimationActive,n=this.state.prevData;return!(r&&t&&t.length)||n&&rv()(n,t)?this.renderRectanglesStatically(t):this.renderRectanglesWithAnimation()}},{key:"renderBackground",value:function(){var e=this,t=this.props,r=t.data,n=t.dataKey,s=t.activeIndex,i=wl(this.props.background,!1);return r.map(function(t,r){t.value;var o=t.background,l=Ow(t,Cw);if(!o)return null;var c=Tw(Tw(Tw(Tw(Tw({},l),{},{fill:"#eee"},o),i),ol(e.props,t,r)),{},{onAnimationStart:e.handleAnimationStart,onAnimationEnd:e.handleAnimationEnd,dataKey:n,index:r,className:"recharts-bar-background-rectangle"});return a.createElement(kw,Pw({key:"background-bar-".concat(r),option:e.props.background,isActive:r===s},c))})}},{key:"renderErrorBar",value:function(e,t){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var r=this.props,n=r.data,s=r.xAxis,i=r.yAxis,o=r.layout,l=xl(r.children,Gv);if(!l)return null;var c="vertical"===o?n[0].height/2:n[0].width/2,d=function(e,t){var r=Array.isArray(e.value)?e.value[1]:e.value;return{x:e.x,y:e.y,value:r,errorVal:nb(e,t)}},u={clipPath:e?"url(#clipPath-".concat(t,")"):null};return a.createElement(Hl,u,l.map(function(e){return a.cloneElement(e,{key:"error-bar-".concat(t,"-").concat(e.props.dataKey),data:n,xAxis:s,yAxis:i,layout:o,offset:c,dataPointFormatter:d})}))}},{key:"render",value:function(){var e=this.props,t=e.hide,r=e.data,n=e.className,s=e.xAxis,i=e.yAxis,o=e.left,l=e.top,c=e.width,d=e.height,u=e.isAnimationActive,p=e.background,m=e.id;if(t||!r||!r.length)return null;var h=this.state.isAnimationFinished,f=ko("recharts-bar",n),g=s&&s.allowDataOverflow,x=i&&i.allowDataOverflow,y=g||x,v=Ro()(m)?this.id:m;return a.createElement(Hl,{className:f},g||x?a.createElement("defs",null,a.createElement("clipPath",{id:"clipPath-".concat(v)},a.createElement("rect",{x:g?o:o-c/2,y:x?l:l-d/2,width:g?c:2*c,height:x?d:2*d}))):null,a.createElement(Hl,{className:"recharts-bar-rectangles",clipPath:y?"url(#clipPath-".concat(v,")"):null},p?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(y,v),(!u||h)&&Pj.renderCallByParent(this.props,r))}}],s=[{key:"getDerivedStateFromProps",value:function(e,t){return e.animationId!==t.prevAnimationId?{prevAnimationId:e.animationId,curData:e.data,prevData:t.curData}:e.data!==t.curData?{curData:e.data}:null}}],n&&Iw(r.prototype,n),s&&Iw(r,s),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,s}(a.PureComponent);function zw(e){return zw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zw(e)}function qw(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Hw(n.key),n)}}function Ww(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Vw(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ww(Object(r),!0).forEach(function(t){Gw(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ww(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function Gw(e,t,r){return(t=Hw(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Hw(e){var t=function(e,t){if("object"!=zw(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=zw(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==zw(t)?t:t+""}Sw=Uw,Lw(Uw,"displayName","Bar"),Lw(Uw,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!vc.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"}),Lw(Uw,"getComposedData",function(e){var t=e.props,r=e.item,n=e.barPosition,a=e.bandSize,s=e.xAxis,i=e.yAxis,o=e.xAxisTicks,l=e.yAxisTicks,c=e.stackedData,d=e.dataStartIndex,u=e.displayedData,p=e.offset,m=function(e,t){if(!e)return null;for(var r=0,n=e.length;r<n;r++)if(e[r].item===t)return e[r].position;return null}(n,r);if(!m)return null;var h=t.layout,f=r.type.defaultProps,g=void 0!==f?Tw(Tw({},f),r.props):r.props,x=g.dataKey,y=g.children,v=g.minPointSize,b="horizontal"===h?i:s,j=c?b.scale.domain():null,w=function(e){var t=e.numericAxis,r=t.scale.domain();if("number"===t.type){var n=Math.min(r[0],r[1]),a=Math.max(r[0],r[1]);return n<=0&&a>=0?0:a<0?a:n}return r[0]}({numericAxis:b}),N=xl(y,gj),k=u.map(function(e,t){var n,u,p,f,g,y;c?n=function(e,t){if(!t||2!==t.length||!Bo(t[0])||!Bo(t[1]))return e;var r=Math.min(t[0],t[1]),n=Math.max(t[0],t[1]),a=[e[0],e[1]];return(!Bo(e[0])||e[0]<r)&&(a[0]=r),(!Bo(e[1])||e[1]>n)&&(a[1]=n),a[0]>n&&(a[0]=n),a[1]<r&&(a[1]=r),a}(c[d+t],j):(n=nb(e,x),Array.isArray(n)||(n=[w,n]));var b=_w(v,Sw.defaultProps.minPointSize)(n[1],t);if("horizontal"===h){var k,S=[i.scale(n[0]),i.scale(n[1])],_=S[0],C=S[1];u=xb({axis:s,ticks:o,bandSize:a,offset:m.offset,entry:e,index:t}),p=null!==(k=null!==C&&void 0!==C?C:_)&&void 0!==k?k:void 0,f=m.size;var A=_-C;if(g=Number.isNaN(A)?0:A,y={x:u,y:i.y,width:f,height:i.height},Math.abs(b)>0&&Math.abs(g)<Math.abs(b)){var O=Fo(g||b)*(Math.abs(b)-Math.abs(g));p-=O,g+=O}}else{var P=[s.scale(n[0]),s.scale(n[1])],E=P[0],T=P[1];if(u=E,p=xb({axis:i,ticks:l,bandSize:a,offset:m.offset,entry:e,index:t}),f=T-E,g=m.size,y={x:s.x,y:p,width:s.width,height:g},Math.abs(b)>0&&Math.abs(f)<Math.abs(b))f+=Fo(f||b)*(Math.abs(b)-Math.abs(f))}return Tw(Tw(Tw({},e),{},{x:u,y:p,width:f,height:g,value:c?n:n[1],payload:e,background:y},N&&N[t]&&N[t].props),{},{tooltipPayload:[kb(r,e)],tooltipPosition:{x:u+f/2,y:p+g/2}})});return Tw({data:k,layout:h},p)});var Kw=function(e,r,n,a,s){var i=e.width,o=e.height,l=e.layout,c=e.children,d=Object.keys(r),u={left:n.left,leftMirror:n.left,right:i-n.right,rightMirror:i-n.right,top:n.top,topMirror:n.top,bottom:o-n.bottom,bottomMirror:o-n.bottom},p=!!yl(c,Uw);return d.reduce(function(i,o){var c,d,m,h,f,g=r[o],x=g.orientation,y=g.domain,v=g.padding,b=void 0===v?{}:v,j=g.mirror,w=g.reversed,N="".concat(x).concat(j?"Mirror":"");if("number"===g.type&&("gap"===g.padding||"no-gap"===g.padding)){var k=y[1]-y[0],S=1/0,_=g.categoricalDomain.sort(Ko);if(_.forEach(function(e,t){t>0&&(S=Math.min((e||0)-(_[t-1]||0),S))}),Number.isFinite(S)){var C=S/k,A="vertical"===g.layout?n.height:n.width;if("gap"===g.padding&&(c=C*A/2),"no-gap"===g.padding){var O=Wo(e.barCategoryGap,C*A),P=C*A/2;c=P-O-(P-O)/A*O}}}d="xAxis"===a?[n.left+(b.left||0)+(c||0),n.left+n.width-(b.right||0)-(c||0)]:"yAxis"===a?"horizontal"===l?[n.top+n.height-(b.bottom||0),n.top+(b.top||0)]:[n.top+(b.top||0)+(c||0),n.top+n.height-(b.bottom||0)-(c||0)]:g.range,w&&(d=[d[1],d[0]]);var E=function(e,r,n){var a=e.scale,s=e.type,i=e.layout,o=e.axisType;if("auto"===a)return"radial"===i&&"radiusAxis"===o?{scale:om(),realScaleType:"band"}:"radial"===i&&"angleAxis"===o?{scale:Tf(),realScaleType:"linear"}:"category"===s&&r&&(r.indexOf("LineChart")>=0||r.indexOf("AreaChart")>=0||r.indexOf("ComposedChart")>=0&&!n)?{scale:cm(),realScaleType:"point"}:"category"===s?{scale:om(),realScaleType:"band"}:{scale:Tf(),realScaleType:"linear"};if(Ao()(a)){var l="scale".concat(Rc()(a));return{scale:(t[l]||cm)(),realScaleType:t[l]?l:"point"}}return Xo()(a)?{scale:a}:{scale:cm(),realScaleType:"point"}}(g,s,p),T=E.scale,I=E.realScaleType;T.domain(y).range(d),function(e){var t=e.domain();if(t&&!(t.length<=2)){var r=t.length,n=e.range(),a=Math.min(n[0],n[1])-mb,s=Math.max(n[0],n[1])+mb,i=e(t[0]),o=e(t[r-1]);(i<a||i>s||o<a||o>s)&&e.domain([t[0],t[r-1]])}}(T);var M=function(e,t){var r=t.realScaleType,n=t.type,a=t.tickCount,s=t.originalDomain,i=t.allowDecimals,o=r||t.scale;if("auto"!==o&&"linear"!==o)return null;if(a&&"number"===n&&s&&("auto"===s[0]||"auto"===s[1])){var l=e.domain();if(!l.length)return null;var c=Pv(l,a,i);return e.domain([Qy()(c),Xy()(c)]),{niceTicks:c}}if(a&&"number"===n){var d=e.domain();return{niceTicks:Ev(d,a,i)}}return null}(T,Vw(Vw({},g),{},{realScaleType:I}));"xAxis"===a?(f="top"===x&&!j||"bottom"===x&&j,m=n.left,h=u[N]-f*g.height):"yAxis"===a&&(f="left"===x&&!j||"right"===x&&j,m=u[N]-f*g.width,h=n.top);var D=Vw(Vw(Vw({},g),M),{},{realScaleType:I,x:m,y:h,scale:T,width:"xAxis"===a?n.width:g.width,height:"yAxis"===a?n.height:g.height});return D.bandSize=wb(D,M),g.hide||"xAxis"!==a?g.hide||(u[N]+=(f?-1:1)*D.width):u[N]+=(f?-1:1)*D.height,Vw(Vw({},i),{},Gw({},o,D))},{})},Yw=function(e,t){var r=e.x,n=e.y,a=t.x,s=t.y;return{x:Math.min(r,a),y:Math.min(n,s),width:Math.abs(a-r),height:Math.abs(s-n)}},Jw=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.scale=t}return t=e,r=[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.bandAware,n=t.position;if(void 0!==e){if(n)switch(n){case"start":default:return this.scale(e);case"middle":var a=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+a;case"end":var s=this.bandwidth?this.bandwidth():0;return this.scale(e)+s}if(r){var i=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+i}return this.scale(e)}}},{key:"isInRange",value:function(e){var t=this.range(),r=t[0],n=t[t.length-1];return r<=n?e>=r&&e<=n:e>=n&&e<=r}}],n=[{key:"create",value:function(t){return new e(t)}}],r&&qw(t.prototype,r),n&&qw(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r,n}();Gw(Jw,"EPS",1e-4);var Xw=function(e){var t=Object.keys(e).reduce(function(t,r){return Vw(Vw({},t),{},Gw({},r,Jw.create(e[r])))},{});return Vw(Vw({},t),{},{apply:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.bandAware,a=r.position;return mj()(e,function(e,r){return t[r].apply(e,{bandAware:n,position:a})})},isInRange:function(e){return fj()(e,function(e,r){return t[r].isInRange(e)})}})};function $w(){return $w=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},$w.apply(this,arguments)}function Qw(e){return Qw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Qw(e)}function Zw(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function eN(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Zw(Object(r),!0).forEach(function(t){iN(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Zw(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function tN(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,oN(n.key),n)}}function rN(e,t,r){return t=aN(t),function(e,t){if(t&&("object"===Qw(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,nN()?Reflect.construct(t,r||[],aN(e).constructor):t.apply(e,r))}function nN(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(nN=function(){return!!e})()}function aN(e){return aN=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},aN(e)}function sN(e,t){return sN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},sN(e,t)}function iN(e,t,r){return(t=oN(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function oN(e){var t=function(e,t){if("object"!=Qw(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Qw(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Qw(t)?t:t+""}var lN=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),rN(this,t,arguments)}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&sN(e,t)}(t,e),r=t,n=[{key:"render",value:function(){var e=this.props,r=e.x,n=e.y,s=e.r,i=e.alwaysShow,o=e.clipPathId,l=Uo(r),c=Uo(n);if(Yo(void 0===i,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!l||!c)return null;var d=function(e){var t=e.x,r=e.y,n=e.xAxis,a=e.yAxis,s=Xw({x:n.scale,y:a.scale}),i=s.apply({x:t,y:r},{bandAware:!0});return uj(e,"discard")&&!s.isInRange(i)?null:i}(this.props);if(!d)return null;var u=d.x,p=d.y,m=this.props,h=m.shape,f=m.className,g=eN(eN({clipPath:uj(this.props,"hidden")?"url(#".concat(o,")"):void 0},wl(this.props,!0)),{},{cx:u,cy:p});return a.createElement(Hl,{className:ko("recharts-reference-dot",f)},t.renderDot(h,g),cj.renderCallByParent(this.props,{x:u-s,y:p-s,width:2*s,height:2*s}))}}],n&&tN(r.prototype,n),s&&tN(r,s),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,s}(a.Component);iN(lN,"displayName","ReferenceDot"),iN(lN,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1}),iN(lN,"renderDot",function(e,t){return a.isValidElement(e)?a.cloneElement(e,t):Xo()(e)?e(t):a.createElement(du,$w({},t,{cx:t.cx,cy:t.cy,className:"recharts-reference-dot-dot"}))});var cN=r(4597),dN=r.n(cN),uN=r(8990),pN=r.n(uN),mN=r(5797),hN=r.n(mN)()(function(e){return{x:e.left,y:e.top,width:e.width,height:e.height}},function(e){return["l",e.left,"t",e.top,"w",e.width,"h",e.height].join("")});var fN=(0,a.createContext)(void 0),gN=(0,a.createContext)(void 0),xN=(0,a.createContext)(void 0),yN=(0,a.createContext)({}),vN=(0,a.createContext)(void 0),bN=(0,a.createContext)(0),jN=(0,a.createContext)(0),wN=function(e){var t=e.state,r=t.xAxisMap,n=t.yAxisMap,s=t.offset,i=e.clipPathId,o=e.children,l=e.width,c=e.height,d=hN(s);return a.createElement(fN.Provider,{value:r},a.createElement(gN.Provider,{value:n},a.createElement(yN.Provider,{value:s},a.createElement(xN.Provider,{value:d},a.createElement(vN.Provider,{value:i},a.createElement(bN.Provider,{value:c},a.createElement(jN.Provider,{value:l},o)))))))};var NN=function(e){var t=(0,a.useContext)(fN);null==t&&Ll(!1);var r=t[e];return null==r&&Ll(!1),r},kN=function(e){var t=(0,a.useContext)(gN);null==t&&Ll(!1);var r=t[e];return null==r&&Ll(!1),r},SN=function(){return(0,a.useContext)(jN)},_N=function(){return(0,a.useContext)(bN)};function CN(e){return CN="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},CN(e)}function AN(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,RN(n.key),n)}}function ON(e,t,r){return t=EN(t),function(e,t){if(t&&("object"===CN(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,PN()?Reflect.construct(t,r||[],EN(e).constructor):t.apply(e,r))}function PN(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(PN=function(){return!!e})()}function EN(e){return EN=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},EN(e)}function TN(e,t){return TN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},TN(e,t)}function IN(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function MN(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?IN(Object(r),!0).forEach(function(t){DN(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):IN(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function DN(e,t,r){return(t=RN(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function RN(e){var t=function(e,t){if("object"!=CN(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=CN(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==CN(t)?t:t+""}function FN(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,s,i,o=[],l=!0,c=!1;try{if(s=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=s.call(r)).done)&&(o.push(n.value),o.length!==t);l=!0);}catch(e){c=!0,a=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(c)throw a}}return o}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return LN(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return LN(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function LN(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function BN(){return BN=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},BN.apply(this,arguments)}function UN(e){var t=e.x,r=e.y,n=e.segment,s=e.xAxisId,i=e.yAxisId,o=e.shape,l=e.className,c=e.alwaysShow,d=(0,a.useContext)(vN),u=NN(s),p=kN(i),m=(0,a.useContext)(xN);if(!d||!m)return null;Yo(void 0===c,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var h=function(e,t,r,n,a,s,i,o,l){var c=a.x,d=a.y,u=a.width,p=a.height;if(r){var m=l.y,h=e.y.apply(m,{position:s});if(uj(l,"discard")&&!e.y.isInRange(h))return null;var f=[{x:c+u,y:h},{x:c,y:h}];return"left"===o?f.reverse():f}if(t){var g=l.x,x=e.x.apply(g,{position:s});if(uj(l,"discard")&&!e.x.isInRange(x))return null;var y=[{x:x,y:d+p},{x:x,y:d}];return"top"===i?y.reverse():y}if(n){var v=l.segment.map(function(t){return e.apply(t,{position:s})});return uj(l,"discard")&&dN()(v,function(t){return!e.isInRange(t)})?null:v}return null}(Xw({x:u.scale,y:p.scale}),Uo(t),Uo(r),n&&2===n.length,m,e.position,u.orientation,p.orientation,e);if(!h)return null;var f=FN(h,2),g=f[0],x=g.x,y=g.y,v=f[1],b=v.x,j=v.y,w=MN(MN({clipPath:uj(e,"hidden")?"url(#".concat(d,")"):void 0},wl(e,!0)),{},{x1:x,y1:y,x2:b,y2:j});return a.createElement(Hl,{className:ko("recharts-reference-line",l)},function(e,t){return a.isValidElement(e)?a.cloneElement(e,t):Xo()(e)?e(t):a.createElement("line",BN({},t,{className:"recharts-reference-line-line"}))}(o,w),cj.renderCallByParent(e,function(e){var t=e.x1,r=e.y1,n=e.x2,a=e.y2;return Yw({x:t,y:r},{x:n,y:a})}({x1:x,y1:y,x2:b,y2:j})))}var zN=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),ON(this,t,arguments)}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&TN(e,t)}(t,e),r=t,(n=[{key:"render",value:function(){return a.createElement(UN,this.props)}}])&&AN(r.prototype,n),s&&AN(r,s),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,s}(a.Component);function qN(){return qN=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},qN.apply(this,arguments)}function WN(e){return WN="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},WN(e)}function VN(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function GN(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?VN(Object(r),!0).forEach(function(t){$N(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):VN(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function HN(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,QN(n.key),n)}}function KN(e,t,r){return t=JN(t),function(e,t){if(t&&("object"===WN(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,YN()?Reflect.construct(t,r||[],JN(e).constructor):t.apply(e,r))}function YN(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(YN=function(){return!!e})()}function JN(e){return JN=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},JN(e)}function XN(e,t){return XN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},XN(e,t)}function $N(e,t,r){return(t=QN(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function QN(e){var t=function(e,t){if("object"!=WN(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=WN(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==WN(t)?t:t+""}DN(zN,"displayName","ReferenceLine"),DN(zN,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});var ZN=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),KN(this,t,arguments)}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&XN(e,t)}(t,e),r=t,(n=[{key:"render",value:function(){var e=this.props,r=e.x1,n=e.x2,s=e.y1,i=e.y2,o=e.className,l=e.alwaysShow,c=e.clipPathId;Yo(void 0===l,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var d=Uo(r),u=Uo(n),p=Uo(s),m=Uo(i),h=this.props.shape;if(!d&&!u&&!p&&!m&&!h)return null;var f=function(e,t,r,n,a){var s=a.x1,i=a.x2,o=a.y1,l=a.y2,c=a.xAxis,d=a.yAxis;if(!c||!d)return null;var u=Xw({x:c.scale,y:d.scale}),p={x:e?u.x.apply(s,{position:"start"}):u.x.rangeMin,y:r?u.y.apply(o,{position:"start"}):u.y.rangeMin},m={x:t?u.x.apply(i,{position:"end"}):u.x.rangeMax,y:n?u.y.apply(l,{position:"end"}):u.y.rangeMax};return!uj(a,"discard")||u.isInRange(p)&&u.isInRange(m)?Yw(p,m):null}(d,u,p,m,this.props);if(!f&&!h)return null;var g=uj(this.props,"hidden")?"url(#".concat(c,")"):void 0;return a.createElement(Hl,{className:ko("recharts-reference-area",o)},t.renderRect(h,GN(GN({clipPath:g},wl(this.props,!0)),f)),cj.renderCallByParent(this.props,f))}}])&&HN(r.prototype,n),s&&HN(r,s),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,s}(a.Component);function ek(e){return function(e){if(Array.isArray(e))return tk(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return tk(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return tk(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function tk(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}$N(ZN,"displayName","ReferenceArea"),$N(ZN,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1}),$N(ZN,"renderRect",function(e,t){return a.isValidElement(e)?a.cloneElement(e,t):Xo()(e)?e(t):a.createElement($p,qN({},t,{className:"recharts-reference-area-rect"}))});var rk=function(e,t,r,n,a){var s=xl(e,zN),i=xl(e,lN),o=[].concat(ek(s),ek(i)),l=xl(e,ZN),c="".concat(n,"Id"),d=n[0],u=t;if(o.length&&(u=o.reduce(function(e,t){if(t.props[c]===r&&uj(t.props,"extendDomain")&&Bo(t.props[d])){var n=t.props[d];return[Math.min(e[0],n),Math.max(e[1],n)]}return e},u)),l.length){var p="".concat(d,"1"),m="".concat(d,"2");u=l.reduce(function(e,t){if(t.props[c]===r&&uj(t.props,"extendDomain")&&Bo(t.props[p])&&Bo(t.props[m])){var n=t.props[p],a=t.props[m];return[Math.min(e[0],n,a),Math.max(e[1],n,a)]}return e},u)}return a&&a.length&&(u=a.reduce(function(e,t){return Bo(t)?[Math.min(e[0],t),Math.max(e[1],t)]:e},u)),u},nk=r(7283),ak=new(r.n(nk)()),sk="recharts.syncMouseEvents";function ik(e){return ik="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ik(e)}function ok(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,ck(n.key),n)}}function lk(e,t,r){return(t=ck(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ck(e){var t=function(e,t){if("object"!=ik(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=ik(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ik(t)?t:t+""}var dk=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),lk(this,"activeIndex",0),lk(this,"coordinateList",[]),lk(this,"layout","horizontal")},t=[{key:"setDetails",value:function(e){var t,r=e.coordinateList,n=void 0===r?null:r,a=e.container,s=void 0===a?null:a,i=e.layout,o=void 0===i?null:i,l=e.offset,c=void 0===l?null:l,d=e.mouseHandlerCallback,u=void 0===d?null:d;this.coordinateList=null!==(t=null!==n&&void 0!==n?n:this.coordinateList)&&void 0!==t?t:[],this.container=null!==s&&void 0!==s?s:this.container,this.layout=null!==o&&void 0!==o?o:this.layout,this.offset=null!==c&&void 0!==c?c:this.offset,this.mouseHandlerCallback=null!==u&&void 0!==u?u:this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(e){if(0!==this.coordinateList.length)switch(e.key){case"ArrowRight":if("horizontal"!==this.layout)return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break;case"ArrowLeft":if("horizontal"!==this.layout)return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse()}}},{key:"setIndex",value:function(e){this.activeIndex=e}},{key:"spoofMouse",value:function(){var e,t;if("horizontal"===this.layout&&0!==this.coordinateList.length){var r=this.container.getBoundingClientRect(),n=r.x,a=r.y,s=r.height,i=this.coordinateList[this.activeIndex].coordinate,o=(null===(e=window)||void 0===e?void 0:e.scrollX)||0,l=(null===(t=window)||void 0===t?void 0:t.scrollY)||0,c=n+i+o,d=a+this.offset.top+s/2+l;this.mouseHandlerCallback({pageX:c,pageY:d})}}}],t&&ok(e.prototype,t),r&&ok(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();function uk(){}function pk(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function mk(e){this._context=e}function hk(e){this._context=e}function fk(e){this._context=e}mk.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:pk(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:pk(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},hk.prototype={areaStart:uk,areaEnd:uk,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:pk(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},fk.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,n=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:pk(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};class gk{constructor(e,t){this._context=e,this._x=t}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line}point(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,t,e,t):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+t)/2,e,this._y0,e,t)}this._x0=e,this._y0=t}}function xk(e){this._context=e}function yk(e){this._context=e}function vk(e){return new yk(e)}function bk(e){return e<0?-1:1}function jk(e,t,r){var n=e._x1-e._x0,a=t-e._x1,s=(e._y1-e._y0)/(n||a<0&&-0),i=(r-e._y1)/(a||n<0&&-0),o=(s*a+i*n)/(n+a);return(bk(s)+bk(i))*Math.min(Math.abs(s),Math.abs(i),.5*Math.abs(o))||0}function wk(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function Nk(e,t,r){var n=e._x0,a=e._y0,s=e._x1,i=e._y1,o=(s-n)/3;e._context.bezierCurveTo(n+o,a+o*t,s-o,i-o*r,s,i)}function kk(e){this._context=e}function Sk(e){this._context=new _k(e)}function _k(e){this._context=e}function Ck(e){this._context=e}function Ak(e){var t,r,n=e.length-1,a=new Array(n),s=new Array(n),i=new Array(n);for(a[0]=0,s[0]=2,i[0]=e[0]+2*e[1],t=1;t<n-1;++t)a[t]=1,s[t]=4,i[t]=4*e[t]+2*e[t+1];for(a[n-1]=2,s[n-1]=7,i[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)r=a[t]/s[t-1],s[t]-=r,i[t]-=r*i[t-1];for(a[n-1]=i[n-1]/s[n-1],t=n-2;t>=0;--t)a[t]=(i[t]-a[t+1])/s[t];for(s[n-1]=(e[n]+a[n-1])/2,t=0;t<n-1;++t)s[t]=2*e[t+1]-a[t+1];return[a,s]}function Ok(e,t){this._context=e,this._t=t}function Pk(e){return e[0]}function Ek(e){return e[1]}function Tk(e,t){var r=sd(!0),n=null,a=vk,s=null,i=_d(o);function o(o){var l,c,d,u=(o=Gy(o)).length,p=!1;for(null==n&&(s=a(d=i())),l=0;l<=u;++l)!(l<u&&r(c=o[l],l,o))===p&&((p=!p)?s.lineStart():s.lineEnd()),p&&s.point(+e(c,l,o),+t(c,l,o));if(d)return s=null,d+""||null}return e="function"===typeof e?e:void 0===e?Pk:sd(e),t="function"===typeof t?t:void 0===t?Ek:sd(t),o.x=function(t){return arguments.length?(e="function"===typeof t?t:sd(+t),o):e},o.y=function(e){return arguments.length?(t="function"===typeof e?e:sd(+e),o):t},o.defined=function(e){return arguments.length?(r="function"===typeof e?e:sd(!!e),o):r},o.curve=function(e){return arguments.length?(a=e,null!=n&&(s=a(n)),o):a},o.context=function(e){return arguments.length?(null==e?n=s=null:s=a(n=e),o):n},o}function Ik(e,t,r){var n=null,a=sd(!0),s=null,i=vk,o=null,l=_d(c);function c(c){var d,u,p,m,h,f=(c=Gy(c)).length,g=!1,x=new Array(f),y=new Array(f);for(null==s&&(o=i(h=l())),d=0;d<=f;++d){if(!(d<f&&a(m=c[d],d,c))===g)if(g=!g)u=d,o.areaStart(),o.lineStart();else{for(o.lineEnd(),o.lineStart(),p=d-1;p>=u;--p)o.point(x[p],y[p]);o.lineEnd(),o.areaEnd()}g&&(x[d]=+e(m,d,c),y[d]=+t(m,d,c),o.point(n?+n(m,d,c):x[d],r?+r(m,d,c):y[d]))}if(h)return o=null,h+""||null}function d(){return Tk().defined(a).curve(i).context(s)}return e="function"===typeof e?e:void 0===e?Pk:sd(+e),t="function"===typeof t?t:sd(void 0===t?0:+t),r="function"===typeof r?r:void 0===r?Ek:sd(+r),c.x=function(t){return arguments.length?(e="function"===typeof t?t:sd(+t),n=null,c):e},c.x0=function(t){return arguments.length?(e="function"===typeof t?t:sd(+t),c):e},c.x1=function(e){return arguments.length?(n=null==e?null:"function"===typeof e?e:sd(+e),c):n},c.y=function(e){return arguments.length?(t="function"===typeof e?e:sd(+e),r=null,c):t},c.y0=function(e){return arguments.length?(t="function"===typeof e?e:sd(+e),c):t},c.y1=function(e){return arguments.length?(r=null==e?null:"function"===typeof e?e:sd(+e),c):r},c.lineX0=c.lineY0=function(){return d().x(e).y(t)},c.lineY1=function(){return d().x(e).y(r)},c.lineX1=function(){return d().x(n).y(t)},c.defined=function(e){return arguments.length?(a="function"===typeof e?e:sd(!!e),c):a},c.curve=function(e){return arguments.length?(i=e,null!=s&&(o=i(s)),c):i},c.context=function(e){return arguments.length?(null==e?s=o=null:o=i(s=e),c):s},c}function Mk(e){return Mk="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Mk(e)}function Dk(){return Dk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Dk.apply(this,arguments)}function Rk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Fk(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Rk(Object(r),!0).forEach(function(t){Lk(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Rk(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function Lk(e,t,r){return t=function(e){var t=function(e,t){if("object"!=Mk(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Mk(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Mk(t)?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}xk.prototype={areaStart:uk,areaEnd:uk,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}},yk.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t)}}},kk.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Nk(this,this._t0,wk(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var r=NaN;if(t=+t,(e=+e)!==this._x1||t!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,Nk(this,wk(this,r=jk(this,e,t)),r);break;default:Nk(this,this._t0,r=jk(this,e,t))}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}},(Sk.prototype=Object.create(kk.prototype)).point=function(e,t){kk.prototype.point.call(this,t,e)},_k.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,r,n,a,s){this._context.bezierCurveTo(t,e,n,r,s,a)}},Ck.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),2===r)this._context.lineTo(e[1],t[1]);else for(var n=Ak(e),a=Ak(t),s=0,i=1;i<r;++s,++i)this._context.bezierCurveTo(n[0][s],a[0][s],n[1][s],a[1][s],e[i],t[i]);(this._line||0!==this._line&&1===r)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}},Ok.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}}this._x=e,this._y=t}};var Bk={curveBasisClosed:function(e){return new hk(e)},curveBasisOpen:function(e){return new fk(e)},curveBasis:function(e){return new mk(e)},curveBumpX:function(e){return new gk(e,!0)},curveBumpY:function(e){return new gk(e,!1)},curveLinearClosed:function(e){return new xk(e)},curveLinear:vk,curveMonotoneX:function(e){return new kk(e)},curveMonotoneY:function(e){return new Sk(e)},curveNatural:function(e){return new Ck(e)},curveStep:function(e){return new Ok(e,.5)},curveStepAfter:function(e){return new Ok(e,1)},curveStepBefore:function(e){return new Ok(e,0)}},Uk=function(e){return e.x===+e.x&&e.y===+e.y},zk=function(e){return e.x},qk=function(e){return e.y},Wk=function(e){var t,r=e.type,n=void 0===r?"linear":r,a=e.points,s=void 0===a?[]:a,i=e.baseLine,o=e.layout,l=e.connectNulls,c=void 0!==l&&l,d=function(e,t){if(Xo()(e))return e;var r="curve".concat(Rc()(e));return"curveMonotone"!==r&&"curveBump"!==r||!t?Bk[r]||vk:Bk["".concat(r).concat("vertical"===t?"Y":"X")]}(n,o),u=c?s.filter(function(e){return Uk(e)}):s;if(Array.isArray(i)){var p=c?i.filter(function(e){return Uk(e)}):i,m=u.map(function(e,t){return Fk(Fk({},e),{},{base:p[t]})});return t="vertical"===o?Ik().y(qk).x1(zk).x0(function(e){return e.base.x}):Ik().x(zk).y1(qk).y0(function(e){return e.base.y}),t.defined(Uk).curve(d),t(m)}return(t="vertical"===o&&Bo(i)?Ik().y(qk).x1(zk).x0(i):Bo(i)?Ik().x(zk).y1(qk).y0(i):Tk().x(zk).y(qk)).defined(Uk).curve(d),t(u)},Vk=function(e){var t=e.className,r=e.points,n=e.path,s=e.pathRef;if((!r||!r.length)&&!n)return null;var i=r&&r.length?Wk(e):n;return a.createElement("path",Dk({},wl(e,!1),il(e),{className:ko("recharts-curve",t),d:i,ref:s}))};function Gk(e){return Gk="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Gk(e)}var Hk=["x","y","top","left","width","height","className"];function Kk(){return Kk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Kk.apply(this,arguments)}function Yk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Jk(e,t,r){return t=function(e){var t=function(e,t){if("object"!=Gk(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Gk(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Gk(t)?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Xk(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var $k=function(e,t,r,n,a,s){return"M".concat(e,",").concat(a,"v").concat(n,"M").concat(s,",").concat(t,"h").concat(r)},Qk=function(e){var t=e.x,r=void 0===t?0:t,n=e.y,s=void 0===n?0:n,i=e.top,o=void 0===i?0:i,l=e.left,c=void 0===l?0:l,d=e.width,u=void 0===d?0:d,p=e.height,m=void 0===p?0:p,h=e.className,f=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Yk(Object(r),!0).forEach(function(t){Jk(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Yk(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({x:r,y:s,top:o,left:c,width:u,height:m},Xk(e,Hk));return Bo(r)&&Bo(s)&&Bo(u)&&Bo(m)&&Bo(o)&&Bo(c)?a.createElement("path",Kk({},wl(f,!0),{className:ko("recharts-cross",h),d:$k(r,s,u,m,o,c)})):null};function Zk(e){var t=e.cx,r=e.cy,n=e.radius,a=e.startAngle,s=e.endAngle;return{points:[Jb(t,r,n,a),Jb(t,r,n,s)],cx:t,cy:r,radius:n,startAngle:a,endAngle:s}}function eS(e,t,r){var n,a,s,i;if("horizontal"===e)s=n=t.x,a=r.top,i=r.top+r.height;else if("vertical"===e)i=a=t.y,n=r.left,s=r.left+r.width;else if(null!=t.cx&&null!=t.cy){if("centric"!==e)return Zk(t);var o=t.cx,l=t.cy,c=t.innerRadius,d=t.outerRadius,u=t.angle,p=Jb(o,l,c,u),m=Jb(o,l,d,u);n=p.x,a=p.y,s=m.x,i=m.y}return[{x:n,y:a},{x:s,y:i}]}function tS(e){return tS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},tS(e)}function rS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function nS(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?rS(Object(r),!0).forEach(function(t){aS(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):rS(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function aS(e,t,r){return t=function(e){var t=function(e,t){if("object"!=tS(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=tS(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==tS(t)?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function sS(e){var t,r,n,s=e.element,i=e.tooltipEventType,o=e.isActive,l=e.activeCoordinate,c=e.activePayload,d=e.offset,u=e.activeTooltipIndex,p=e.tooltipAxisBandSize,m=e.layout,h=e.chartName,f=null!==(t=s.props.cursor)&&void 0!==t?t:null===(r=s.type.defaultProps)||void 0===r?void 0:r.cursor;if(!s||!f||!o||!l||"ScatterChart"!==h&&"axis"!==i)return null;var g=Vk;if("ScatterChart"===h)n=l,g=Qk;else if("BarChart"===h)n=function(e,t,r,n){var a=n/2;return{stroke:"none",fill:"#ccc",x:"horizontal"===e?t.x-a:r.left+.5,y:"horizontal"===e?r.top+.5:t.y-a,width:"horizontal"===e?n:r.width-1,height:"horizontal"===e?r.height-1:n}}(m,l,d,p),g=$p;else if("radial"===m){var x=Zk(l),y=x.cx,v=x.cy,b=x.radius;n={cx:y,cy:v,startAngle:x.startAngle,endAngle:x.endAngle,innerRadius:b,outerRadius:b},g=Zj}else n={points:eS(m,l,d)},g=Vk;var j=nS(nS(nS(nS({stroke:"#ccc",pointerEvents:"none"},d),n),wl(f,!1)),{},{payload:c,payloadIndex:u,className:ko("recharts-tooltip-cursor",f.className)});return(0,a.isValidElement)(f)?(0,a.cloneElement)(f,j):(0,a.createElement)(g,j)}var iS=["item"],oS=["children","className","width","height","style","compact","title","desc"];function lS(e){return lS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},lS(e)}function cS(){return cS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},cS.apply(this,arguments)}function dS(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,s,i,o=[],l=!0,c=!1;try{if(s=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=s.call(r)).done)&&(o.push(n.value),o.length!==t);l=!0);}catch(e){c=!0,a=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(c)throw a}}return o}}(e,t)||yS(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function uS(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function pS(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,NS(n.key),n)}}function mS(e,t,r){return t=fS(t),function(e,t){if(t&&("object"===lS(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,hS()?Reflect.construct(t,r||[],fS(e).constructor):t.apply(e,r))}function hS(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(hS=function(){return!!e})()}function fS(e){return fS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},fS(e)}function gS(e,t){return gS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},gS(e,t)}function xS(e){return function(e){if(Array.isArray(e))return vS(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||yS(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function yS(e,t){if(e){if("string"===typeof e)return vS(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?vS(e,t):void 0}}function vS(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function bS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function jS(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?bS(Object(r),!0).forEach(function(t){wS(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):bS(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function wS(e,t,r){return(t=NS(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function NS(e){var t=function(e,t){if("object"!=lS(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=lS(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==lS(t)?t:t+""}var kS={xAxis:["bottom","top"],yAxis:["left","right"]},SS={width:"100%",height:"100%"},_S={x:0,y:0};function CS(e){return e}var AS=function(e,t){var r=t.graphicalItems,n=t.dataStartIndex,a=t.dataEndIndex,s=(null!==r&&void 0!==r?r:[]).reduce(function(e,t){var r=t.props.data;return r&&r.length?[].concat(xS(e),xS(r)):e},[]);return s.length>0?s:e&&e.length&&Bo(n)&&Bo(a)?e.slice(n,a+1):[]};function OS(e){return"number"===e?[0,"auto"]:void 0}var PS=function(e,t,r,n){var a=e.graphicalItems,s=e.tooltipAxis,i=AS(t,e);return r<0||!a||!a.length||r>=i.length?null:a.reduce(function(a,o){var l,c,d=null!==(l=o.props.data)&&void 0!==l?l:t;(d&&e.dataStartIndex+e.dataEndIndex!==0&&e.dataEndIndex-e.dataStartIndex>=r&&(d=d.slice(e.dataStartIndex,e.dataEndIndex+1)),s.dataKey&&!s.allowDuplicatedCategory)?c=Ho(void 0===d?i:d,s.dataKey,n):c=d&&d[r]||i[r];return c?[].concat(xS(a),[kb(o,c)]):a},[])},ES=function(e,t,r,n){var a=n||{x:e.chartX,y:e.chartY},s=function(e,t){return"horizontal"===t?e.x:"vertical"===t?e.y:"centric"===t?e.angle:e.radius}(a,r),i=e.orderedTooltipTicks,o=e.tooltipAxis,l=e.tooltipTicks,c=function(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0,s=-1,i=null!==(t=null===r||void 0===r?void 0:r.length)&&void 0!==t?t:0;if(i<=1)return 0;if(a&&"angleAxis"===a.axisType&&Math.abs(Math.abs(a.range[1]-a.range[0])-360)<=1e-6)for(var o=a.range,l=0;l<i;l++){var c=l>0?n[l-1].coordinate:n[i-1].coordinate,d=n[l].coordinate,u=l>=i-1?n[0].coordinate:n[l+1].coordinate,p=void 0;if(Fo(d-c)!==Fo(u-d)){var m=[];if(Fo(u-d)===Fo(o[1]-o[0])){p=u;var h=d+o[1]-o[0];m[0]=Math.min(h,(h+c)/2),m[1]=Math.max(h,(h+c)/2)}else{p=c;var f=u+o[1]-o[0];m[0]=Math.min(d,(f+d)/2),m[1]=Math.max(d,(f+d)/2)}var g=[Math.min(d,(p+d)/2),Math.max(d,(p+d)/2)];if(e>g[0]&&e<=g[1]||e>=m[0]&&e<=m[1]){s=n[l].index;break}}else{var x=Math.min(c,u),y=Math.max(c,u);if(e>(x+d)/2&&e<=(y+d)/2){s=n[l].index;break}}}else for(var v=0;v<i;v++)if(0===v&&e<=(r[v].coordinate+r[v+1].coordinate)/2||v>0&&v<i-1&&e>(r[v].coordinate+r[v-1].coordinate)/2&&e<=(r[v].coordinate+r[v+1].coordinate)/2||v===i-1&&e>(r[v].coordinate+r[v-1].coordinate)/2){s=r[v].index;break}return s}(s,i,l,o);if(c>=0&&l){var d=l[c]&&l[c].value,u=PS(e,t,c,d),p=function(e,t,r,n){var a=t.find(function(e){return e&&e.index===r});if(a){if("horizontal"===e)return{x:a.coordinate,y:n.y};if("vertical"===e)return{x:n.x,y:a.coordinate};if("centric"===e){var s=a.coordinate,i=n.radius;return jS(jS(jS({},n),Jb(n.cx,n.cy,i,s)),{},{angle:s,radius:i})}var o=a.coordinate,l=n.angle;return jS(jS(jS({},n),Jb(n.cx,n.cy,o,l)),{},{angle:l,radius:o})}return _S}(r,i,c,a);return{activeTooltipIndex:c,activeLabel:d,activePayload:u,activeCoordinate:p}}return null},TS=function(e,t){var r=t.axes,n=t.graphicalItems,a=t.axisType,s=t.axisIdKey,i=t.stackGroups,o=t.dataStartIndex,l=t.dataEndIndex,c=e.layout,d=e.children,u=e.stackOffset,p=lb(c,a);return r.reduce(function(t,r){var m,h=void 0!==r.type.defaultProps?jS(jS({},r.type.defaultProps),r.props):r.props,f=h.type,g=h.dataKey,x=h.allowDataOverflow,y=h.allowDuplicatedCategory,v=h.scale,b=h.ticks,j=h.includeHidden,w=h[s];if(t[w])return t;var N,k,S,_=AS(e.data,{graphicalItems:n.filter(function(e){var t;return(s in e.props?e.props[s]:null===(t=e.type.defaultProps)||void 0===t?void 0:t[s])===w}),dataStartIndex:o,dataEndIndex:l}),C=_.length;(function(e,t,r){if("number"===r&&!0===t&&Array.isArray(e)){var n=null===e||void 0===e?void 0:e[0],a=null===e||void 0===e?void 0:e[1];if(n&&a&&Bo(n)&&Bo(a))return!0}return!1})(h.domain,x,f)&&(N=jb(h.domain,null,x),!p||"number"!==f&&"auto"===v||(S=ab(_,g,"category")));var A=OS(f);if(!N||0===N.length){var O,P=null!==(O=h.domain)&&void 0!==O?O:A;if(g){if(N=ab(_,g,f),"category"===f&&p){var E=function(e){if(!Array.isArray(e))return!1;for(var t=e.length,r={},n=0;n<t;n++){if(r[e[n]])return!0;r[e[n]]=!0}return!1}(N);y&&E?(k=N,N=Ml()(0,C)):y||(N=Nb(P,N,r).reduce(function(e,t){return e.indexOf(t)>=0?e:[].concat(xS(e),[t])},[]))}else if("category"===f)N=y?N.filter(function(e){return""!==e&&!Ro()(e)}):Nb(P,N,r).reduce(function(e,t){return e.indexOf(t)>=0||""===t||Ro()(t)?e:[].concat(xS(e),[t])},[]);else if("number"===f){var T=function(e,t,r,n,a){var s=t.map(function(t){return ib(e,t,r,a,n)}).filter(function(e){return!Ro()(e)});return s&&s.length?s.reduce(function(e,t){return[Math.min(e[0],t[0]),Math.max(e[1],t[1])]},[1/0,-1/0]):null}(_,n.filter(function(e){var t,r,n=s in e.props?e.props[s]:null===(t=e.type.defaultProps)||void 0===t?void 0:t[s],a="hide"in e.props?e.props.hide:null===(r=e.type.defaultProps)||void 0===r?void 0:r.hide;return n===w&&(j||!a)}),g,a,c);T&&(N=T)}!p||"number"!==f&&"auto"===v||(S=ab(_,g,"category"))}else N=p?Ml()(0,C):i&&i[w]&&i[w].hasStack&&"number"===f?"expand"===u?[0,1]:yb(i[w].stackGroups,o,l):ob(_,n.filter(function(e){var t=s in e.props?e.props[s]:e.type.defaultProps[s],r="hide"in e.props?e.props.hide:e.type.defaultProps.hide;return t===w&&(j||!r)}),f,c,!0);if("number"===f)N=rk(d,N,w,a,b),P&&(N=jb(P,N,x));else if("category"===f&&P){var I=P;N.every(function(e){return I.indexOf(e)>=0})&&(N=I)}}return jS(jS({},t),{},wS({},w,jS(jS({},h),{},{axisType:a,domain:N,categoricalDomain:S,duplicateDomain:k,originalDomain:null!==(m=h.domain)&&void 0!==m?m:A,isCategorical:p,layout:c})))},{})},IS=function(e,t){var r=t.axisType,n=void 0===r?"xAxis":r,a=t.AxisComp,s=t.graphicalItems,i=t.stackGroups,o=t.dataStartIndex,l=t.dataEndIndex,c=e.children,d="".concat(n,"Id"),u=xl(c,a),p={};return u&&u.length?p=TS(e,{axes:u,graphicalItems:s,axisType:n,axisIdKey:d,stackGroups:i,dataStartIndex:o,dataEndIndex:l}):s&&s.length&&(p=function(e,t){var r=t.graphicalItems,n=t.Axis,a=t.axisType,s=t.axisIdKey,i=t.stackGroups,o=t.dataStartIndex,l=t.dataEndIndex,c=e.layout,d=e.children,u=AS(e.data,{graphicalItems:r,dataStartIndex:o,dataEndIndex:l}),p=u.length,m=lb(c,a),h=-1;return r.reduce(function(e,t){var f,g=(void 0!==t.type.defaultProps?jS(jS({},t.type.defaultProps),t.props):t.props)[s],x=OS("number");return e[g]?e:(h++,m?f=Ml()(0,p):i&&i[g]&&i[g].hasStack?(f=yb(i[g].stackGroups,o,l),f=rk(d,f,g,a)):(f=jb(x,ob(u,r.filter(function(e){var t,r,n=s in e.props?e.props[s]:null===(t=e.type.defaultProps)||void 0===t?void 0:t[s],a="hide"in e.props?e.props.hide:null===(r=e.type.defaultProps)||void 0===r?void 0:r.hide;return n===g&&!a}),"number",c),n.defaultProps.allowDataOverflow),f=rk(d,f,g,a)),jS(jS({},e),{},wS({},g,jS(jS({axisType:a},n.defaultProps),{},{hide:!0,orientation:To()(kS,"".concat(a,".").concat(h%2),null),domain:f,originalDomain:x,isCategorical:m,layout:c}))))},{})}(e,{Axis:a,graphicalItems:s,axisType:n,axisIdKey:d,stackGroups:i,dataStartIndex:o,dataEndIndex:l})),p},MS=function(e){var t=e.children,r=e.defaultShowTooltip,n=yl(t,qb),a=0,s=0;return e.data&&0!==e.data.length&&(s=e.data.length-1),n&&n.props&&(n.props.startIndex>=0&&(a=n.props.startIndex),n.props.endIndex>=0&&(s=n.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:a,dataEndIndex:s,activeTooltipIndex:-1,isTooltipActive:Boolean(r)}},DS=function(e){return"horizontal"===e?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:"vertical"===e?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:"centric"===e?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},RS=function(e,t){var r=e.props,n=(e.graphicalItems,e.xAxisMap),a=void 0===n?{}:n,s=e.yAxisMap,i=void 0===s?{}:s,o=r.width,l=r.height,c=r.children,d=r.margin||{},u=yl(c,qb),p=yl(c,lu),m=Object.keys(i).reduce(function(e,t){var r=i[t],n=r.orientation;return r.mirror||r.hide?e:jS(jS({},e),{},wS({},n,e[n]+r.width))},{left:d.left||0,right:d.right||0}),h=Object.keys(a).reduce(function(e,t){var r=a[t],n=r.orientation;return r.mirror||r.hide?e:jS(jS({},e),{},wS({},n,To()(e,"".concat(n))+r.height))},{top:d.top||0,bottom:d.bottom||0}),f=jS(jS({},h),m),g=f.bottom;u&&(f.bottom+=u.props.height||qb.defaultProps.height),p&&t&&(f=function(e,t,r,n){var a=r.children,s=r.width,i=r.margin,o=s-(i.left||0)-(i.right||0),l=Xv({children:a,legendWidth:o});if(l){var c=n||{},d=c.width,u=c.height,p=l.align,m=l.verticalAlign,h=l.layout;if(("vertical"===h||"horizontal"===h&&"middle"===m)&&"center"!==p&&Bo(e[p]))return tb(tb({},e),{},rb({},p,e[p]+(d||0)));if(("horizontal"===h||"vertical"===h&&"center"===p)&&"middle"!==m&&Bo(e[m]))return tb(tb({},e),{},rb({},m,e[m]+(u||0)))}return e}(f,0,r,t));var x=o-f.left-f.right,y=l-f.top-f.bottom;return jS(jS({brushBottom:g},f),{},{width:Math.max(x,0),height:Math.max(y,0)})},FS=function(e,t){return"xAxis"===t?e[t].width:"yAxis"===t?e[t].height:void 0},LS=function(e){var t=e.chartName,r=e.GraphicalChild,n=e.defaultTooltipEventType,s=void 0===n?"axis":n,i=e.validateTooltipEventTypes,o=void 0===i?["axis"]:i,l=e.axisComponents,c=e.legendContent,d=e.formatAxisMap,u=e.defaultProps,p=function(e,t){var r=t.graphicalItems,n=t.stackGroups,a=t.offset,s=t.updateId,i=t.dataStartIndex,o=t.dataEndIndex,c=e.barSize,d=e.layout,u=e.barGap,p=e.barCategoryGap,m=e.maxBarSize,h=DS(d),f=h.numericAxisName,g=h.cateAxisName,x=function(e){return!(!e||!e.length)&&e.some(function(e){var t=ml(e&&e.type);return t&&t.indexOf("Bar")>=0})}(r),y=[];return r.forEach(function(r,h){var v=AS(e.data,{graphicalItems:[r],dataStartIndex:i,dataEndIndex:o}),b=void 0!==r.type.defaultProps?jS(jS({},r.type.defaultProps),r.props):r.props,j=b.dataKey,w=b.maxBarSize,N=b["".concat(f,"Id")],k=b["".concat(g,"Id")],S=l.reduce(function(e,r){var n=t["".concat(r.axisType,"Map")],a=b["".concat(r.axisType,"Id")];n&&n[a]||"zAxis"===r.axisType||Ll(!1);var s=n[a];return jS(jS({},e),{},wS(wS({},r.axisType,s),"".concat(r.axisType,"Ticks"),db(s)))},{}),_=S[g],C=S["".concat(g,"Ticks")],A=n&&n[N]&&n[N].hasStack&&function(e,t){var r,n=(null!==(r=e.type)&&void 0!==r&&r.defaultProps?tb(tb({},e.type.defaultProps),e.props):e.props).stackId;if(Uo(n)){var a=t[n];if(a){var s=a.items.indexOf(e);return s>=0?a.stackedData[s]:null}}return null}(r,n[N].stackGroups),O=ml(r.type).indexOf("Bar")>=0,P=wb(_,C),E=[],T=x&&function(e){var t=e.barSize,r=e.totalSize,n=e.stackGroups,a=void 0===n?{}:n;if(!a)return{};for(var s={},i=Object.keys(a),o=0,l=i.length;o<l;o++)for(var c=a[i[o]].stackGroups,d=Object.keys(c),u=0,p=d.length;u<p;u++){var m=c[d[u]],h=m.items,f=m.cateAxisId,g=h.filter(function(e){return ml(e.type).indexOf("Bar")>=0});if(g&&g.length){var x=g[0].type.defaultProps,y=void 0!==x?tb(tb({},x),g[0].props):g[0].props,v=y.barSize,b=y[f];s[b]||(s[b]=[]);var j=Ro()(v)?t:v;s[b].push({item:g[0],stackList:g.slice(1),barSize:Ro()(j)?void 0:Wo(j,r,0)})}}return s}({barSize:c,stackGroups:n,totalSize:FS(S,g)});if(O){var I,M,D=Ro()(w)?m:w,R=null!==(I=null!==(M=wb(_,C,!0))&&void 0!==M?M:D)&&void 0!==I?I:0;E=function(e){var t=e.barGap,r=e.barCategoryGap,n=e.bandSize,a=e.sizeList,s=void 0===a?[]:a,i=e.maxBarSize,o=s.length;if(o<1)return null;var l,c=Wo(t,n,0,!0),d=[];if(s[0].barSize===+s[0].barSize){var u=!1,p=n/o,m=s.reduce(function(e,t){return e+t.barSize||0},0);(m+=(o-1)*c)>=n&&(m-=(o-1)*c,c=0),m>=n&&p>0&&(u=!0,m=o*(p*=.9));var h={offset:((n-m)/2|0)-c,size:0};l=s.reduce(function(e,t){var r={item:t.item,position:{offset:h.offset+h.size+c,size:u?p:t.barSize}},n=[].concat(Qv(e),[r]);return h=n[n.length-1].position,t.stackList&&t.stackList.length&&t.stackList.forEach(function(e){n.push({item:e,position:h})}),n},d)}else{var f=Wo(r,n,0,!0);n-2*f-(o-1)*c<=0&&(c=0);var g=(n-2*f-(o-1)*c)/o;g>1&&(g>>=0);var x=i===+i?Math.min(g,i):g;l=s.reduce(function(e,t,r){var n=[].concat(Qv(e),[{item:t.item,position:{offset:f+(g+c)*r+(g-x)/2,size:x}}]);return t.stackList&&t.stackList.length&&t.stackList.forEach(function(e){n.push({item:e,position:n[n.length-1].position})}),n},d)}return l}({barGap:u,barCategoryGap:p,bandSize:R!==P?R:P,sizeList:T[k],maxBarSize:D}),R!==P&&(E=E.map(function(e){return jS(jS({},e),{},{position:jS(jS({},e.position),{},{offset:e.position.offset-R/2})})}))}var F,L,B=r&&r.type&&r.type.getComposedData;B&&y.push({props:jS(jS({},B(jS(jS({},S),{},{displayedData:v,props:e,dataKey:j,item:r,bandSize:P,barPosition:E,offset:a,stackedData:A,layout:d,dataStartIndex:i,dataEndIndex:o}))),{},wS(wS(wS({key:r.key||"item-".concat(h)},f,S[f]),g,S[g]),"animationId",s)),childIndex:(F=r,L=e.children,gl(L).indexOf(F)),item:r})}),y},m=function(e,n){var a=e.props,s=e.dataStartIndex,i=e.dataEndIndex,o=e.updateId;if(!vl({props:a}))return null;var c=a.children,u=a.layout,m=a.stackOffset,h=a.data,f=a.reverseStackOrder,g=DS(u),x=g.numericAxisName,y=g.cateAxisName,v=xl(c,r),b=function(e,t,r,n,a,s){if(!e)return null;var i=(s?t.reverse():t).reduce(function(e,t){var a,s=null!==(a=t.type)&&void 0!==a&&a.defaultProps?tb(tb({},t.type.defaultProps),t.props):t.props,i=s.stackId;if(s.hide)return e;var o=s[r],l=e[o]||{hasStack:!1,stackGroups:{}};if(Uo(i)){var c=l.stackGroups[i]||{numericAxisId:r,cateAxisId:n,items:[]};c.items.push(t),l.hasStack=!0,l.stackGroups[i]=c}else l.stackGroups[qo("_stackId_")]={numericAxisId:r,cateAxisId:n,items:[t]};return tb(tb({},e),{},rb({},o,l))},{});return Object.keys(i).reduce(function(t,s){var o=i[s];return o.hasStack&&(o.stackGroups=Object.keys(o.stackGroups).reduce(function(t,s){var i=o.stackGroups[s];return tb(tb({},t),{},rb({},s,{numericAxisId:r,cateAxisId:n,items:i.items,stackedData:fb(e,i.items,a)}))},{})),tb(tb({},t),{},rb({},s,o))},{})}(h,v,"".concat(x,"Id"),"".concat(y,"Id"),m,f),j=l.reduce(function(e,t){var r="".concat(t.axisType,"Map");return jS(jS({},e),{},wS({},r,IS(a,jS(jS({},t),{},{graphicalItems:v,stackGroups:t.axisType===x&&b,dataStartIndex:s,dataEndIndex:i}))))},{}),w=RS(jS(jS({},j),{},{props:a,graphicalItems:v}),null===n||void 0===n?void 0:n.legendBBox);Object.keys(j).forEach(function(e){j[e]=d(a,j[e],w,e.replace("Map",""),t)});var N=function(e){var t=Vo(e),r=db(t,!1,!0);return{tooltipTicks:r,orderedTooltipTicks:Rl()(r,function(e){return e.coordinate}),tooltipAxis:t,tooltipAxisBandSize:wb(t,r)}}(j["".concat(y,"Map")]),k=p(a,jS(jS({},j),{},{dataStartIndex:s,dataEndIndex:i,updateId:o,graphicalItems:v,stackGroups:b,offset:w}));return jS(jS({formattedGraphicalItems:k,graphicalItems:v,offset:w,stackGroups:b},N),j)},h=function(e){function r(e){var n,s,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),wS(i=mS(this,r,[e]),"eventEmitterSymbol",Symbol("rechartsEventEmitter")),wS(i,"accessibilityManager",new dk),wS(i,"handleLegendBBoxUpdate",function(e){if(e){var t=i.state,r=t.dataStartIndex,n=t.dataEndIndex,a=t.updateId;i.setState(jS({legendBBox:e},m({props:i.props,dataStartIndex:r,dataEndIndex:n,updateId:a},jS(jS({},i.state),{},{legendBBox:e}))))}}),wS(i,"handleReceiveSyncEvent",function(e,t,r){if(i.props.syncId===e){if(r===i.eventEmitterSymbol&&"function"!==typeof i.props.syncMethod)return;i.applySyncEvent(t)}}),wS(i,"handleBrushChange",function(e){var t=e.startIndex,r=e.endIndex;if(t!==i.state.dataStartIndex||r!==i.state.dataEndIndex){var n=i.state.updateId;i.setState(function(){return jS({dataStartIndex:t,dataEndIndex:r},m({props:i.props,dataStartIndex:t,dataEndIndex:r,updateId:n},i.state))}),i.triggerSyncEvent({dataStartIndex:t,dataEndIndex:r})}}),wS(i,"handleMouseEnter",function(e){var t=i.getMouseInfo(e);if(t){var r=jS(jS({},t),{},{isTooltipActive:!0});i.setState(r),i.triggerSyncEvent(r);var n=i.props.onMouseEnter;Xo()(n)&&n(r,e)}}),wS(i,"triggeredAfterMouseMove",function(e){var t=i.getMouseInfo(e),r=t?jS(jS({},t),{},{isTooltipActive:!0}):{isTooltipActive:!1};i.setState(r),i.triggerSyncEvent(r);var n=i.props.onMouseMove;Xo()(n)&&n(r,e)}),wS(i,"handleItemMouseEnter",function(e){i.setState(function(){return{isTooltipActive:!0,activeItem:e,activePayload:e.tooltipPayload,activeCoordinate:e.tooltipPosition||{x:e.cx,y:e.cy}}})}),wS(i,"handleItemMouseLeave",function(){i.setState(function(){return{isTooltipActive:!1}})}),wS(i,"handleMouseMove",function(e){e.persist(),i.throttleTriggeredAfterMouseMove(e)}),wS(i,"handleMouseLeave",function(e){i.throttleTriggeredAfterMouseMove.cancel();var t={isTooltipActive:!1};i.setState(t),i.triggerSyncEvent(t);var r=i.props.onMouseLeave;Xo()(r)&&r(t,e)}),wS(i,"handleOuterEvent",function(e){var t,r=function(e){var t=e&&e.type;return t&&pl[t]?pl[t]:null}(e),n=To()(i.props,"".concat(r));r&&Xo()(n)&&n(null!==(t=/.*touch.*/i.test(r)?i.getMouseInfo(e.changedTouches[0]):i.getMouseInfo(e))&&void 0!==t?t:{},e)}),wS(i,"handleClick",function(e){var t=i.getMouseInfo(e);if(t){var r=jS(jS({},t),{},{isTooltipActive:!0});i.setState(r),i.triggerSyncEvent(r);var n=i.props.onClick;Xo()(n)&&n(r,e)}}),wS(i,"handleMouseDown",function(e){var t=i.props.onMouseDown;Xo()(t)&&t(i.getMouseInfo(e),e)}),wS(i,"handleMouseUp",function(e){var t=i.props.onMouseUp;Xo()(t)&&t(i.getMouseInfo(e),e)}),wS(i,"handleTouchMove",function(e){null!=e.changedTouches&&e.changedTouches.length>0&&i.throttleTriggeredAfterMouseMove(e.changedTouches[0])}),wS(i,"handleTouchStart",function(e){null!=e.changedTouches&&e.changedTouches.length>0&&i.handleMouseDown(e.changedTouches[0])}),wS(i,"handleTouchEnd",function(e){null!=e.changedTouches&&e.changedTouches.length>0&&i.handleMouseUp(e.changedTouches[0])}),wS(i,"handleDoubleClick",function(e){var t=i.props.onDoubleClick;Xo()(t)&&t(i.getMouseInfo(e),e)}),wS(i,"handleContextMenu",function(e){var t=i.props.onContextMenu;Xo()(t)&&t(i.getMouseInfo(e),e)}),wS(i,"triggerSyncEvent",function(e){void 0!==i.props.syncId&&ak.emit(sk,i.props.syncId,e,i.eventEmitterSymbol)}),wS(i,"applySyncEvent",function(e){var t=i.props,r=t.layout,n=t.syncMethod,a=i.state.updateId,s=e.dataStartIndex,o=e.dataEndIndex;if(void 0!==e.dataStartIndex||void 0!==e.dataEndIndex)i.setState(jS({dataStartIndex:s,dataEndIndex:o},m({props:i.props,dataStartIndex:s,dataEndIndex:o,updateId:a},i.state)));else if(void 0!==e.activeTooltipIndex){var l=e.chartX,c=e.chartY,d=e.activeTooltipIndex,u=i.state,p=u.offset,h=u.tooltipTicks;if(!p)return;if("function"===typeof n)d=n(h,e);else if("value"===n){d=-1;for(var f=0;f<h.length;f++)if(h[f].value===e.activeLabel){d=f;break}}var g=jS(jS({},p),{},{x:p.left,y:p.top}),x=Math.min(l,g.x+g.width),y=Math.min(c,g.y+g.height),v=h[d]&&h[d].value,b=PS(i.state,i.props.data,d),j=h[d]?{x:"horizontal"===r?h[d].coordinate:x,y:"horizontal"===r?y:h[d].coordinate}:_S;i.setState(jS(jS({},e),{},{activeLabel:v,activeCoordinate:j,activePayload:b,activeTooltipIndex:d}))}else i.setState(e)}),wS(i,"renderCursor",function(e){var r,n=i.state,s=n.isTooltipActive,o=n.activeCoordinate,l=n.activePayload,c=n.offset,d=n.activeTooltipIndex,u=n.tooltipAxisBandSize,p=i.getTooltipEventType(),m=null!==(r=e.props.active)&&void 0!==r?r:s,h=i.props.layout,f=e.key||"_recharts-cursor";return a.createElement(sS,{key:f,activeCoordinate:o,activePayload:l,activeTooltipIndex:d,chartName:t,element:e,isActive:m,layout:h,offset:c,tooltipAxisBandSize:u,tooltipEventType:p})}),wS(i,"renderPolarAxis",function(e,t,r){var n=To()(e,"type.axisType"),s=To()(i.state,"".concat(n,"Map")),o=e.type.defaultProps,l=void 0!==o?jS(jS({},o),e.props):e.props,c=s&&s[l["".concat(n,"Id")]];return(0,a.cloneElement)(e,jS(jS({},c),{},{className:ko(n,c.className),key:e.key||"".concat(t,"-").concat(r),ticks:db(c,!0)}))}),wS(i,"renderPolarGrid",function(e){var t=e.props,r=t.radialLines,n=t.polarAngles,s=t.polarRadius,o=i.state,l=o.radiusAxisMap,c=o.angleAxisMap,d=Vo(l),u=Vo(c),p=u.cx,m=u.cy,h=u.innerRadius,f=u.outerRadius;return(0,a.cloneElement)(e,{polarAngles:Array.isArray(n)?n:db(u,!0).map(function(e){return e.coordinate}),polarRadius:Array.isArray(s)?s:db(d,!0).map(function(e){return e.coordinate}),cx:p,cy:m,innerRadius:h,outerRadius:f,key:e.key||"polar-grid",radialLines:r})}),wS(i,"renderLegend",function(){var e=i.state.formattedGraphicalItems,t=i.props,r=t.children,n=t.width,s=t.height,o=i.props.margin||{},l=n-(o.left||0)-(o.right||0),d=Xv({children:r,formattedGraphicalItems:e,legendWidth:l,legendContent:c});if(!d)return null;var u=d.item,p=uS(d,iS);return(0,a.cloneElement)(u,jS(jS({},p),{},{chartWidth:n,chartHeight:s,margin:o,onBBoxUpdate:i.handleLegendBBoxUpdate}))}),wS(i,"renderTooltip",function(){var e,t=i.props,r=t.children,n=t.accessibilityLayer,s=yl(r,Mc);if(!s)return null;var o=i.state,l=o.isTooltipActive,c=o.activeCoordinate,d=o.activePayload,u=o.activeLabel,p=o.offset,m=null!==(e=s.props.active)&&void 0!==e?e:l;return(0,a.cloneElement)(s,{viewBox:jS(jS({},p),{},{x:p.left,y:p.top}),active:m,label:u,payload:m?d:[],coordinate:c,accessibilityLayer:n})}),wS(i,"renderBrush",function(e){var t=i.props,r=t.margin,n=t.data,s=i.state,o=s.offset,l=s.dataStartIndex,c=s.dataEndIndex,d=s.updateId;return(0,a.cloneElement)(e,{key:e.key||"_recharts-brush",onChange:pb(i.handleBrushChange,e.props.onChange),data:n,x:Bo(e.props.x)?e.props.x:o.left,y:Bo(e.props.y)?e.props.y:o.top+o.height+o.brushBottom-(r.bottom||0),width:Bo(e.props.width)?e.props.width:o.width,startIndex:l,endIndex:c,updateId:"brush-".concat(d)})}),wS(i,"renderReferenceElement",function(e,t,r){if(!e)return null;var n=i.clipPathId,s=i.state,o=s.xAxisMap,l=s.yAxisMap,c=s.offset,d=e.type.defaultProps||{},u=e.props,p=u.xAxisId,m=void 0===p?d.xAxisId:p,h=u.yAxisId,f=void 0===h?d.yAxisId:h;return(0,a.cloneElement)(e,{key:e.key||"".concat(t,"-").concat(r),xAxis:o[m],yAxis:l[f],viewBox:{x:c.left,y:c.top,width:c.width,height:c.height},clipPathId:n})}),wS(i,"renderActivePoints",function(e){var t=e.item,n=e.activePoint,a=e.basePoint,s=e.childIndex,i=e.isRange,o=[],l=t.props.key,c=void 0!==t.item.type.defaultProps?jS(jS({},t.item.type.defaultProps),t.item.props):t.item.props,d=c.activeDot,u=jS(jS({index:s,dataKey:c.dataKey,cx:n.x,cy:n.y,r:4,fill:sb(t.item),strokeWidth:2,stroke:"#fff",payload:n.payload,value:n.value},wl(d,!1)),il(d));return o.push(r.renderActiveDot(d,u,"".concat(l,"-activePoint-").concat(s))),a?o.push(r.renderActiveDot(d,jS(jS({},u),{},{cx:a.x,cy:a.y}),"".concat(l,"-basePoint-").concat(s))):i&&o.push(null),o}),wS(i,"renderGraphicChild",function(e,t,r){var n=i.filterFormatItem(e,t,r);if(!n)return null;var s=i.getTooltipEventType(),o=i.state,l=o.isTooltipActive,c=o.tooltipAxis,d=o.activeTooltipIndex,u=o.activeLabel,p=yl(i.props.children,Mc),m=n.props,h=m.points,f=m.isRange,g=m.baseLine,x=void 0!==n.item.type.defaultProps?jS(jS({},n.item.type.defaultProps),n.item.props):n.item.props,y=x.activeDot,v=x.hide,b=x.activeBar,j=x.activeShape,w=Boolean(!v&&l&&p&&(y||b||j)),N={};"axis"!==s&&p&&"click"===p.props.trigger?N={onClick:pb(i.handleItemMouseEnter,e.props.onClick)}:"axis"!==s&&(N={onMouseLeave:pb(i.handleItemMouseLeave,e.props.onMouseLeave),onMouseEnter:pb(i.handleItemMouseEnter,e.props.onMouseEnter)});var k=(0,a.cloneElement)(e,jS(jS({},n.props),N));if(w){if(!(d>=0)){var S,_=(null!==(S=i.getItemByXY(i.state.activeCoordinate))&&void 0!==S?S:{graphicalItem:k}).graphicalItem,C=_.item,A=void 0===C?e:C,O=_.childIndex,P=jS(jS(jS({},n.props),N),{},{activeIndex:O});return[(0,a.cloneElement)(A,P),null,null]}var E,T;if(c.dataKey&&!c.allowDuplicatedCategory){var I="function"===typeof c.dataKey?function(e){return"function"===typeof c.dataKey?c.dataKey(e.payload):null}:"payload.".concat(c.dataKey.toString());E=Ho(h,I,u),T=f&&g&&Ho(g,I,u)}else E=null===h||void 0===h?void 0:h[d],T=f&&g&&g[d];if(j||b){var M=void 0!==e.props.activeIndex?e.props.activeIndex:d;return[(0,a.cloneElement)(e,jS(jS(jS({},n.props),N),{},{activeIndex:M})),null,null]}if(!Ro()(E))return[k].concat(xS(i.renderActivePoints({item:n,activePoint:E,basePoint:T,childIndex:d,isRange:f})))}return f?[k,null,null]:[k,null]}),wS(i,"renderCustomized",function(e,t,r){return(0,a.cloneElement)(e,jS(jS({key:"recharts-customized-".concat(r)},i.props),i.state))}),wS(i,"renderMap",{CartesianGrid:{handler:CS,once:!0},ReferenceArea:{handler:i.renderReferenceElement},ReferenceLine:{handler:CS},ReferenceDot:{handler:i.renderReferenceElement},XAxis:{handler:CS},YAxis:{handler:CS},Brush:{handler:i.renderBrush,once:!0},Bar:{handler:i.renderGraphicChild},Line:{handler:i.renderGraphicChild},Area:{handler:i.renderGraphicChild},Radar:{handler:i.renderGraphicChild},RadialBar:{handler:i.renderGraphicChild},Scatter:{handler:i.renderGraphicChild},Pie:{handler:i.renderGraphicChild},Funnel:{handler:i.renderGraphicChild},Tooltip:{handler:i.renderCursor,once:!0},PolarGrid:{handler:i.renderPolarGrid,once:!0},PolarAngleAxis:{handler:i.renderPolarAxis},PolarRadiusAxis:{handler:i.renderPolarAxis},Customized:{handler:i.renderCustomized}}),i.clipPathId="".concat(null!==(n=e.id)&&void 0!==n?n:qo("recharts"),"-clip"),i.throttleTriggeredAfterMouseMove=_o()(i.triggeredAfterMouseMove,null!==(s=e.throttleDelay)&&void 0!==s?s:1e3/60),i.state={},i}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&gS(e,t)}(r,e),n=r,i=[{key:"componentDidMount",value:function(){var e,t;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:null!==(e=this.props.margin.left)&&void 0!==e?e:0,top:null!==(t=this.props.margin.top)&&void 0!==t?t:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var e=this.props,t=e.children,r=e.data,n=e.height,a=e.layout,s=yl(t,Mc);if(s){var i=s.props.defaultIndex;if(!("number"!==typeof i||i<0||i>this.state.tooltipTicks.length-1)){var o=this.state.tooltipTicks[i]&&this.state.tooltipTicks[i].value,l=PS(this.state,r,i,o),c=this.state.tooltipTicks[i].coordinate,d=(this.state.offset.top+n)/2,u="horizontal"===a?{x:c,y:d}:{y:c,x:d},p=this.state.formattedGraphicalItems.find(function(e){return"Scatter"===e.item.type.name});p&&(u=jS(jS({},u),p.props.points[i].tooltipPosition),l=p.props.points[i].tooltipPayload);var m={activeTooltipIndex:i,isTooltipActive:!0,activeLabel:o,activePayload:l,activeCoordinate:u};this.setState(m),this.renderCursor(s),this.accessibilityManager.setIndex(i)}}}},{key:"getSnapshotBeforeUpdate",value:function(e,t){return this.props.accessibilityLayer?(this.state.tooltipTicks!==t.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==e.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==e.margin&&this.accessibilityManager.setDetails({offset:{left:null!==(r=this.props.margin.left)&&void 0!==r?r:0,top:null!==(n=this.props.margin.top)&&void 0!==n?n:0}}),null):null;var r,n}},{key:"componentDidUpdate",value:function(e){Nl([yl(e.children,Mc)],[yl(this.props.children,Mc)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var e=yl(this.props.children,Mc);if(e&&"boolean"===typeof e.props.shared){var t=e.props.shared?"axis":"item";return o.indexOf(t)>=0?t:s}return s}},{key:"getMouseInfo",value:function(e){if(!this.container)return null;var t,r=this.container,n=r.getBoundingClientRect(),a={top:(t=n).top+window.scrollY-document.documentElement.clientTop,left:t.left+window.scrollX-document.documentElement.clientLeft},s={chartX:Math.round(e.pageX-a.left),chartY:Math.round(e.pageY-a.top)},i=n.width/r.offsetWidth||1,o=this.inRange(s.chartX,s.chartY,i);if(!o)return null;var l=this.state,c=l.xAxisMap,d=l.yAxisMap,u=this.getTooltipEventType(),p=ES(this.state,this.props.data,this.props.layout,o);if("axis"!==u&&c&&d){var m=Vo(c).scale,h=Vo(d).scale,f=m&&m.invert?m.invert(s.chartX):null,g=h&&h.invert?h.invert(s.chartY):null;return jS(jS({},s),{},{xValue:f,yValue:g},p)}return p?jS(jS({},s),p):null}},{key:"inRange",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=this.props.layout,a=e/r,s=t/r;if("horizontal"===n||"vertical"===n){var i=this.state.offset;return a>=i.left&&a<=i.left+i.width&&s>=i.top&&s<=i.top+i.height?{x:a,y:s}:null}var o=this.state,l=o.angleAxisMap,c=o.radiusAxisMap;if(l&&c){var d=Vo(l);return Qb({x:a,y:s},d)}return null}},{key:"parseEventsOfWrapper",value:function(){var e=this.props.children,t=this.getTooltipEventType(),r=yl(e,Mc),n={};return r&&"axis"===t&&(n="click"===r.props.trigger?{onClick:this.handleClick}:{onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu}),jS(jS({},il(this.props,this.handleOuterEvent)),n)}},{key:"addListener",value:function(){ak.on(sk,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){ak.removeListener(sk,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(e,t,r){for(var n=this.state.formattedGraphicalItems,a=0,s=n.length;a<s;a++){var i=n[a];if(i.item===e||i.props.key===e.key||t===ml(i.item.type)&&r===i.childIndex)return i}return null}},{key:"renderClipPath",value:function(){var e=this.clipPathId,t=this.state.offset,r=t.left,n=t.top,s=t.height,i=t.width;return a.createElement("defs",null,a.createElement("clipPath",{id:e},a.createElement("rect",{x:r,y:n,height:s,width:i})))}},{key:"getXScales",value:function(){var e=this.state.xAxisMap;return e?Object.entries(e).reduce(function(e,t){var r=dS(t,2),n=r[0],a=r[1];return jS(jS({},e),{},wS({},n,a.scale))},{}):null}},{key:"getYScales",value:function(){var e=this.state.yAxisMap;return e?Object.entries(e).reduce(function(e,t){var r=dS(t,2),n=r[0],a=r[1];return jS(jS({},e),{},wS({},n,a.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(e){var t;return null===(t=this.state.xAxisMap)||void 0===t||null===(t=t[e])||void 0===t?void 0:t.scale}},{key:"getYScaleByAxisId",value:function(e){var t;return null===(t=this.state.yAxisMap)||void 0===t||null===(t=t[e])||void 0===t?void 0:t.scale}},{key:"getItemByXY",value:function(e){var t=this.state,r=t.formattedGraphicalItems,n=t.activeItem;if(r&&r.length)for(var a=0,s=r.length;a<s;a++){var i=r[a],o=i.props,l=i.item,c=void 0!==l.type.defaultProps?jS(jS({},l.type.defaultProps),l.props):l.props,d=ml(l.type);if("Bar"===d){var u=(o.data||[]).find(function(t){return Jp(e,t)});if(u)return{graphicalItem:i,payload:u}}else if("RadialBar"===d){var p=(o.data||[]).find(function(t){return Qb(e,t)});if(p)return{graphicalItem:i,payload:p}}else if(cw(i,n)||dw(i,n)||uw(i,n)){var m=fw({graphicalItem:i,activeTooltipItem:n,itemData:c.data}),h=void 0===c.activeIndex?m:c.activeIndex;return{graphicalItem:jS(jS({},i),{},{childIndex:h}),payload:uw(i,n)?c.data[m]:i.props.data[m]}}}return null}},{key:"render",value:function(){var e=this;if(!vl(this))return null;var t,r,n=this.props,s=n.children,i=n.className,o=n.width,l=n.height,c=n.style,d=n.compact,u=n.title,p=n.desc,m=uS(n,oS),h=wl(m,!1);if(d)return a.createElement(wN,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},a.createElement(ql,cS({},h,{width:o,height:l,title:u,desc:p}),this.renderClipPath(),Sl(s,this.renderMap)));this.props.accessibilityLayer&&(h.tabIndex=null!==(t=this.props.tabIndex)&&void 0!==t?t:0,h.role=null!==(r=this.props.role)&&void 0!==r?r:"application",h.onKeyDown=function(t){e.accessibilityManager.keyboardEvent(t)},h.onFocus=function(){e.accessibilityManager.focus()});var f=this.parseEventsOfWrapper();return a.createElement(wN,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},a.createElement("div",cS({className:ko("recharts-wrapper",i),style:jS({position:"relative",cursor:"default",width:o,height:l},c)},f,{ref:function(t){e.container=t}}),a.createElement(ql,cS({},h,{width:o,height:l,title:u,desc:p,style:SS}),this.renderClipPath(),Sl(s,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}],i&&pS(n.prototype,i),l&&pS(n,l),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,i,l}(a.Component);wS(h,"displayName",t),wS(h,"defaultProps",jS({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},u)),wS(h,"getDerivedStateFromProps",function(e,t){var r=e.dataKey,n=e.data,a=e.children,s=e.width,i=e.height,o=e.layout,l=e.stackOffset,c=e.margin,d=t.dataStartIndex,u=t.dataEndIndex;if(void 0===t.updateId){var p=MS(e);return jS(jS(jS({},p),{},{updateId:0},m(jS(jS({props:e},p),{},{updateId:0}),t)),{},{prevDataKey:r,prevData:n,prevWidth:s,prevHeight:i,prevLayout:o,prevStackOffset:l,prevMargin:c,prevChildren:a})}if(r!==t.prevDataKey||n!==t.prevData||s!==t.prevWidth||i!==t.prevHeight||o!==t.prevLayout||l!==t.prevStackOffset||!el(c,t.prevMargin)){var h=MS(e),f={chartX:t.chartX,chartY:t.chartY,isTooltipActive:t.isTooltipActive},g=jS(jS({},ES(t,n,o)),{},{updateId:t.updateId+1}),x=jS(jS(jS({},h),f),g);return jS(jS(jS({},x),m(jS({props:e},x),t)),{},{prevDataKey:r,prevData:n,prevWidth:s,prevHeight:i,prevLayout:o,prevStackOffset:l,prevMargin:c,prevChildren:a})}if(!Nl(a,t.prevChildren)){var y,v,b,j,w=yl(a,qb),N=w&&null!==(y=null===(v=w.props)||void 0===v?void 0:v.startIndex)&&void 0!==y?y:d,k=w&&null!==(b=null===(j=w.props)||void 0===j?void 0:j.endIndex)&&void 0!==b?b:u,S=N!==d||k!==u,_=!Ro()(n)&&!S?t.updateId:t.updateId+1;return jS(jS({updateId:_},m(jS(jS({props:e},t),{},{updateId:_,dataStartIndex:N,dataEndIndex:k}),t)),{},{prevChildren:a,dataStartIndex:N,dataEndIndex:k})}return null}),wS(h,"renderActiveDot",function(e,t,r){var n;return n=(0,a.isValidElement)(e)?(0,a.cloneElement)(e,t):Xo()(e)?e(t):a.createElement(du,t),a.createElement(Hl,{className:"recharts-active-dot",key:r},n)});var f=(0,a.forwardRef)(function(e,t){return a.createElement(h,cS({},e,{ref:t}))});return f.displayName=h.displayName,f},BS=["type","layout","connectNulls","ref"],US=["key"];function zS(e){return zS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zS(e)}function qS(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function WS(){return WS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},WS.apply(this,arguments)}function VS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function GS(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?VS(Object(r),!0).forEach(function(t){ZS(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):VS(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function HS(e){return function(e){if(Array.isArray(e))return KS(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return KS(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return KS(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function KS(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function YS(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,e_(n.key),n)}}function JS(e,t,r){return t=$S(t),function(e,t){if(t&&("object"===zS(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,XS()?Reflect.construct(t,r||[],$S(e).constructor):t.apply(e,r))}function XS(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(XS=function(){return!!e})()}function $S(e){return $S=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},$S(e)}function QS(e,t){return QS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},QS(e,t)}function ZS(e,t,r){return(t=e_(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function e_(e){var t=function(e,t){if("object"!=zS(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=zS(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==zS(t)?t:t+""}var t_=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return ZS(e=JS(this,t,[].concat(n)),"state",{isAnimationFinished:!0,totalLength:0}),ZS(e,"generateSimpleStrokeDasharray",function(e,t){return"".concat(t,"px ").concat(e-t,"px")}),ZS(e,"getStrokeDasharray",function(r,n,a){var s=a.reduce(function(e,t){return e+t});if(!s)return e.generateSimpleStrokeDasharray(n,r);for(var i=Math.floor(r/s),o=r%s,l=n-r,c=[],d=0,u=0;d<a.length;u+=a[d],++d)if(u+a[d]>o){c=[].concat(HS(a.slice(0,d)),[o-u]);break}var p=c.length%2===0?[0,l]:[l];return[].concat(HS(t.repeat(a,i)),HS(c),p).map(function(e){return"".concat(e,"px")}).join(", ")}),ZS(e,"id",qo("recharts-line-")),ZS(e,"pathRef",function(t){e.mainCurve=t}),ZS(e,"handleAnimationEnd",function(){e.setState({isAnimationFinished:!0}),e.props.onAnimationEnd&&e.props.onAnimationEnd()}),ZS(e,"handleAnimationStart",function(){e.setState({isAnimationFinished:!1}),e.props.onAnimationStart&&e.props.onAnimationStart()}),e}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&QS(e,t)}(t,e),r=t,n=[{key:"componentDidMount",value:function(){if(this.props.isAnimationActive){var e=this.getTotalLength();this.setState({totalLength:e})}}},{key:"componentDidUpdate",value:function(){if(this.props.isAnimationActive){var e=this.getTotalLength();e!==this.state.totalLength&&this.setState({totalLength:e})}}},{key:"getTotalLength",value:function(){var e=this.mainCurve;try{return e&&e.getTotalLength&&e.getTotalLength()||0}catch(t){return 0}}},{key:"renderErrorBar",value:function(e,t){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var r=this.props,n=r.points,s=r.xAxis,i=r.yAxis,o=r.layout,l=xl(r.children,Gv);if(!l)return null;var c=function(e,t){return{x:e.x,y:e.y,value:e.value,errorVal:nb(e.payload,t)}},d={clipPath:e?"url(#clipPath-".concat(t,")"):null};return a.createElement(Hl,d,l.map(function(e){return a.cloneElement(e,{key:"bar-".concat(e.props.dataKey),data:n,xAxis:s,yAxis:i,layout:o,dataPointFormatter:c})}))}},{key:"renderDots",value:function(e,r,n){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var s=this.props,i=s.dot,o=s.points,l=s.dataKey,c=wl(this.props,!1),d=wl(i,!0),u=o.map(function(e,r){var n=GS(GS(GS({key:"dot-".concat(r),r:3},c),d),{},{index:r,cx:e.x,cy:e.y,value:e.value,dataKey:l,payload:e.payload,points:o});return t.renderDotItem(i,n)}),p={clipPath:e?"url(#clipPath-".concat(r?"":"dots-").concat(n,")"):null};return a.createElement(Hl,WS({className:"recharts-line-dots",key:"dots"},p),u)}},{key:"renderCurveStatically",value:function(e,t,r,n){var s=this.props,i=s.type,o=s.layout,l=s.connectNulls,c=(s.ref,qS(s,BS)),d=GS(GS(GS({},wl(c,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:t?"url(#clipPath-".concat(r,")"):null,points:e},n),{},{type:i,layout:o,connectNulls:l});return a.createElement(Vk,WS({},d,{pathRef:this.pathRef}))}},{key:"renderCurveWithAnimation",value:function(e,t){var r=this,n=this.props,s=n.points,i=n.strokeDasharray,o=n.isAnimationActive,l=n.animationBegin,c=n.animationDuration,d=n.animationEasing,u=n.animationId,p=n.animateNewValues,m=n.width,h=n.height,f=this.state,g=f.prevPoints,x=f.totalLength;return a.createElement(Up,{begin:l,duration:c,isActive:o,easing:d,from:{t:0},to:{t:1},key:"line-".concat(u),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(n){var a=n.t;if(g){var o=g.length/s.length,l=s.map(function(e,t){var r=Math.floor(t*o);if(g[r]){var n=g[r],s=Go(n.x,e.x),i=Go(n.y,e.y);return GS(GS({},e),{},{x:s(a),y:i(a)})}if(p){var l=Go(2*m,e.x),c=Go(h/2,e.y);return GS(GS({},e),{},{x:l(a),y:c(a)})}return GS(GS({},e),{},{x:e.x,y:e.y})});return r.renderCurveStatically(l,e,t)}var c,d=Go(0,x)(a);if(i){var u="".concat(i).split(/[,\s]+/gim).map(function(e){return parseFloat(e)});c=r.getStrokeDasharray(d,x,u)}else c=r.generateSimpleStrokeDasharray(x,d);return r.renderCurveStatically(s,e,t,{strokeDasharray:c})})}},{key:"renderCurve",value:function(e,t){var r=this.props,n=r.points,a=r.isAnimationActive,s=this.state,i=s.prevPoints,o=s.totalLength;return a&&n&&n.length&&(!i&&o>0||!rv()(i,n))?this.renderCurveWithAnimation(e,t):this.renderCurveStatically(n,e,t)}},{key:"render",value:function(){var e,t=this.props,r=t.hide,n=t.dot,s=t.points,i=t.className,o=t.xAxis,l=t.yAxis,c=t.top,d=t.left,u=t.width,p=t.height,m=t.isAnimationActive,h=t.id;if(r||!s||!s.length)return null;var f=this.state.isAnimationFinished,g=1===s.length,x=ko("recharts-line",i),y=o&&o.allowDataOverflow,v=l&&l.allowDataOverflow,b=y||v,j=Ro()(h)?this.id:h,w=null!==(e=wl(n,!1))&&void 0!==e?e:{r:3,strokeWidth:2},N=w.r,k=void 0===N?3:N,S=w.strokeWidth,_=void 0===S?2:S,C=(function(e){return e&&"object"===ul(e)&&"clipDot"in e}(n)?n:{}).clipDot,A=void 0===C||C,O=2*k+_;return a.createElement(Hl,{className:x},y||v?a.createElement("defs",null,a.createElement("clipPath",{id:"clipPath-".concat(j)},a.createElement("rect",{x:y?d:d-u/2,y:v?c:c-p/2,width:y?u:2*u,height:v?p:2*p})),!A&&a.createElement("clipPath",{id:"clipPath-dots-".concat(j)},a.createElement("rect",{x:d-O/2,y:c-O/2,width:u+O,height:p+O}))):null,!g&&this.renderCurve(b,j),this.renderErrorBar(b,j),(g||n)&&this.renderDots(b,A,j),(!m||f)&&Pj.renderCallByParent(this.props,s))}}],s=[{key:"getDerivedStateFromProps",value:function(e,t){return e.animationId!==t.prevAnimationId?{prevAnimationId:e.animationId,curPoints:e.points,prevPoints:t.curPoints}:e.points!==t.curPoints?{curPoints:e.points}:null}},{key:"repeat",value:function(e,t){for(var r=e.length%2!==0?[].concat(HS(e),[0]):e,n=[],a=0;a<t;++a)n=[].concat(HS(n),HS(r));return n}},{key:"renderDotItem",value:function(e,t){var r;if(a.isValidElement(e))r=a.cloneElement(e,t);else if(Xo()(e))r=e(t);else{var n=t.key,s=qS(t,US),i=ko("recharts-line-dot","boolean"!==typeof e?e.className:"");r=a.createElement(du,WS({key:n},s,{className:i}))}return r}}],n&&YS(r.prototype,n),s&&YS(r,s),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,s}(a.PureComponent);function r_(e,t,r){if(t<1)return[];if(1===t&&void 0===r)return e;for(var n=[],a=0;a<e.length;a+=t){if(void 0!==r&&!0!==r(e[a]))return;n.push(e[a])}return n}function n_(e,t,r){return function(e){var t=e.width,r=e.height,n=function(e){return(e%180+180)%180}(arguments.length>1&&void 0!==arguments[1]?arguments[1]:0),a=n*Math.PI/180,s=Math.atan(r/t),i=a>s&&a<Math.PI-s?r/Math.sin(a):t/Math.cos(a);return Math.abs(i)}({width:e.width+t.width,height:e.height+t.height},r)}function a_(e,t,r,n,a){if(e*t<e*n||e*t>e*a)return!1;var s=r();return e*(t-e*s/2-n)>=0&&e*(t+e*s/2-a)<=0}function s_(e){return s_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s_(e)}function i_(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function o_(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i_(Object(r),!0).forEach(function(t){l_(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i_(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function l_(e,t,r){return t=function(e){var t=function(e,t){if("object"!=s_(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=s_(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==s_(t)?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function c_(e,t,r){var n=e.tick,a=e.ticks,s=e.viewBox,i=e.minTickGap,o=e.orientation,l=e.interval,c=e.tickFormatter,d=e.unit,u=e.angle;if(!a||!a.length||!n)return[];if(Bo(l)||vc.isSsr)return function(e,t){return r_(e,t+1)}(a,"number"===typeof l&&Bo(l)?l:0);var p=[],m="top"===o||"bottom"===o?"width":"height",h=d&&"width"===m?xm(d,{fontSize:t,letterSpacing:r}):{width:0,height:0},f=function(e,n){var a=Xo()(c)?c(e.value,n):e.value;return"width"===m?n_(xm(a,{fontSize:t,letterSpacing:r}),h,u):xm(a,{fontSize:t,letterSpacing:r})[m]},g=a.length>=2?Fo(a[1].coordinate-a[0].coordinate):1,x=function(e,t,r){var n="width"===r,a=e.x,s=e.y,i=e.width,o=e.height;return 1===t?{start:n?a:s,end:n?a+i:s+o}:{start:n?a+i:s+o,end:n?a:s}}(s,g,m);return"equidistantPreserveStart"===l?function(e,t,r,n,a){for(var s,i=(n||[]).slice(),o=t.start,l=t.end,c=0,d=1,u=o,p=function(){var t=null===n||void 0===n?void 0:n[c];if(void 0===t)return{v:r_(n,d)};var s,i=c,p=function(){return void 0===s&&(s=r(t,i)),s},m=t.coordinate,h=0===c||a_(e,m,p,u,l);h||(c=0,u=o,d+=1),h&&(u=m+e*(p()/2+a),c+=d)};d<=i.length;)if(s=p())return s.v;return[]}(g,x,f,a,i):(p="preserveStart"===l||"preserveStartEnd"===l?function(e,t,r,n,a,s){var i=(n||[]).slice(),o=i.length,l=t.start,c=t.end;if(s){var d=n[o-1],u=r(d,o-1),p=e*(d.coordinate+e*u/2-c);i[o-1]=d=o_(o_({},d),{},{tickCoord:p>0?d.coordinate-p*e:d.coordinate}),a_(e,d.tickCoord,function(){return u},l,c)&&(c=d.tickCoord-e*(u/2+a),i[o-1]=o_(o_({},d),{},{isShow:!0}))}for(var m=s?o-1:o,h=function(t){var n,s=i[t],o=function(){return void 0===n&&(n=r(s,t)),n};if(0===t){var d=e*(s.coordinate-e*o()/2-l);i[t]=s=o_(o_({},s),{},{tickCoord:d<0?s.coordinate-d*e:s.coordinate})}else i[t]=s=o_(o_({},s),{},{tickCoord:s.coordinate});a_(e,s.tickCoord,o,l,c)&&(l=s.tickCoord+e*(o()/2+a),i[t]=o_(o_({},s),{},{isShow:!0}))},f=0;f<m;f++)h(f);return i}(g,x,f,a,i,"preserveStartEnd"===l):function(e,t,r,n,a){for(var s=(n||[]).slice(),i=s.length,o=t.start,l=t.end,c=function(t){var n,c=s[t],d=function(){return void 0===n&&(n=r(c,t)),n};if(t===i-1){var u=e*(c.coordinate+e*d()/2-l);s[t]=c=o_(o_({},c),{},{tickCoord:u>0?c.coordinate-u*e:c.coordinate})}else s[t]=c=o_(o_({},c),{},{tickCoord:c.coordinate});a_(e,c.tickCoord,d,o,l)&&(l=c.tickCoord-e*(d()/2+a),s[t]=o_(o_({},c),{},{isShow:!0}))},d=i-1;d>=0;d--)c(d);return s}(g,x,f,a,i),p.filter(function(e){return e.isShow}))}ZS(t_,"displayName","Line"),ZS(t_,"defaultProps",{xAxisId:0,yAxisId:0,connectNulls:!1,activeDot:!0,dot:!0,legendType:"line",stroke:"#3182bd",strokeWidth:1,fill:"#fff",points:[],isAnimationActive:!vc.isSsr,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",hide:!1,label:!1}),ZS(t_,"getComposedData",function(e){var t=e.props,r=e.xAxis,n=e.yAxis,a=e.xAxisTicks,s=e.yAxisTicks,i=e.dataKey,o=e.bandSize,l=e.displayedData,c=e.offset,d=t.layout,u=l.map(function(e,t){var l=nb(e,i);return"horizontal"===d?{x:gb({axis:r,ticks:a,bandSize:o,entry:e,index:t}),y:Ro()(l)?null:n.scale(l),value:l,payload:e}:{x:Ro()(l)?null:r.scale(l),y:gb({axis:n,ticks:s,bandSize:o,entry:e,index:t}),value:l,payload:e}});return GS({points:u,layout:d},c)});var d_=["viewBox"],u_=["viewBox"],p_=["ticks"];function m_(e){return m_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},m_(e)}function h_(){return h_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},h_.apply(this,arguments)}function f_(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function g_(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?f_(Object(r),!0).forEach(function(t){N_(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f_(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function x_(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function y_(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,k_(n.key),n)}}function v_(e,t,r){return t=j_(t),function(e,t){if(t&&("object"===m_(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,b_()?Reflect.construct(t,r||[],j_(e).constructor):t.apply(e,r))}function b_(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(b_=function(){return!!e})()}function j_(e){return j_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},j_(e)}function w_(e,t){return w_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},w_(e,t)}function N_(e,t,r){return(t=k_(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function k_(e){var t=function(e,t){if("object"!=m_(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=m_(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==m_(t)?t:t+""}var S_=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=v_(this,t,[e])).state={fontSize:"",letterSpacing:""},r}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&w_(e,t)}(t,e),r=t,n=[{key:"shouldComponentUpdate",value:function(e,t){var r=e.viewBox,n=x_(e,d_),a=this.props,s=a.viewBox,i=x_(a,u_);return!el(r,s)||!el(n,i)||!el(t,this.state)}},{key:"componentDidMount",value:function(){var e=this.layerReference;if(e){var t=e.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];t&&this.setState({fontSize:window.getComputedStyle(t).fontSize,letterSpacing:window.getComputedStyle(t).letterSpacing})}}},{key:"getTickLineCoord",value:function(e){var t,r,n,a,s,i,o=this.props,l=o.x,c=o.y,d=o.width,u=o.height,p=o.orientation,m=o.tickSize,h=o.mirror,f=o.tickMargin,g=h?-1:1,x=e.tickSize||m,y=Bo(e.tickCoord)?e.tickCoord:e.coordinate;switch(p){case"top":t=r=e.coordinate,i=(n=(a=c+ +!h*u)-g*x)-g*f,s=y;break;case"left":n=a=e.coordinate,s=(t=(r=l+ +!h*d)-g*x)-g*f,i=y;break;case"right":n=a=e.coordinate,s=(t=(r=l+ +h*d)+g*x)+g*f,i=y;break;default:t=r=e.coordinate,i=(n=(a=c+ +h*u)+g*x)+g*f,s=y}return{line:{x1:t,y1:n,x2:r,y2:a},tick:{x:s,y:i}}}},{key:"getTickTextAnchor",value:function(){var e,t=this.props,r=t.orientation,n=t.mirror;switch(r){case"left":e=n?"start":"end";break;case"right":e=n?"end":"start";break;default:e="middle"}return e}},{key:"getTickVerticalAnchor",value:function(){var e=this.props,t=e.orientation,r=e.mirror,n="end";switch(t){case"left":case"right":n="middle";break;case"top":n=r?"start":"end";break;default:n=r?"end":"start"}return n}},{key:"renderAxisLine",value:function(){var e=this.props,t=e.x,r=e.y,n=e.width,s=e.height,i=e.orientation,o=e.mirror,l=e.axisLine,c=g_(g_(g_({},wl(this.props,!1)),wl(l,!1)),{},{fill:"none"});if("top"===i||"bottom"===i){var d=+("top"===i&&!o||"bottom"===i&&o);c=g_(g_({},c),{},{x1:t,y1:r+d*s,x2:t+n,y2:r+d*s})}else{var u=+("left"===i&&!o||"right"===i&&o);c=g_(g_({},c),{},{x1:t+u*n,y1:r,x2:t+u*n,y2:r+s})}return a.createElement("line",h_({},c,{className:ko("recharts-cartesian-axis-line",To()(l,"className"))}))}},{key:"renderTicks",value:function(e,r,n){var s=this,i=this.props,o=i.tickLine,l=i.stroke,c=i.tick,d=i.tickFormatter,u=i.unit,p=c_(g_(g_({},this.props),{},{ticks:e}),r,n),m=this.getTickTextAnchor(),h=this.getTickVerticalAnchor(),f=wl(this.props,!1),g=wl(c,!1),x=g_(g_({},f),{},{fill:"none"},wl(o,!1)),y=p.map(function(e,r){var n=s.getTickLineCoord(e),i=n.line,y=n.tick,v=g_(g_(g_(g_({textAnchor:m,verticalAnchor:h},f),{},{stroke:"none",fill:l},g),y),{},{index:r,payload:e,visibleTicksCount:p.length,tickFormatter:d});return a.createElement(Hl,h_({className:"recharts-cartesian-axis-tick",key:"tick-".concat(e.value,"-").concat(e.coordinate,"-").concat(e.tickCoord)},ol(s.props,e,r)),o&&a.createElement("line",h_({},x,i,{className:ko("recharts-cartesian-axis-tick-line",To()(o,"className"))})),c&&t.renderTickItem(c,v,"".concat(Xo()(d)?d(e.value,r):e.value).concat(u||"")))});return a.createElement("g",{className:"recharts-cartesian-axis-ticks"},y)}},{key:"render",value:function(){var e=this,t=this.props,r=t.axisLine,n=t.width,s=t.height,i=t.ticksGenerator,o=t.className;if(t.hide)return null;var l=this.props,c=l.ticks,d=x_(l,p_),u=c;return Xo()(i)&&(u=c&&c.length>0?i(this.props):i(d)),n<=0||s<=0||!u||!u.length?null:a.createElement(Hl,{className:ko("recharts-cartesian-axis",o),ref:function(t){e.layerReference=t}},r&&this.renderAxisLine(),this.renderTicks(u,this.state.fontSize,this.state.letterSpacing),cj.renderCallByParent(this.props))}}],s=[{key:"renderTickItem",value:function(e,t,r){var n=ko(t.className,"recharts-cartesian-axis-tick-value");return a.isValidElement(e)?a.cloneElement(e,g_(g_({},t),{},{className:n})):Xo()(e)?e(g_(g_({},t),{},{className:n})):a.createElement(Hm,h_({},t,{className:"recharts-cartesian-axis-tick-value"}),r)}}],n&&y_(r.prototype,n),s&&y_(r,s),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,s}(a.Component);function __(e){return __="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},__(e)}function C_(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,I_(n.key),n)}}function A_(e,t,r){return t=P_(t),function(e,t){if(t&&("object"===__(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,O_()?Reflect.construct(t,r||[],P_(e).constructor):t.apply(e,r))}function O_(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(O_=function(){return!!e})()}function P_(e){return P_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},P_(e)}function E_(e,t){return E_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},E_(e,t)}function T_(e,t,r){return(t=I_(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function I_(e){var t=function(e,t){if("object"!=__(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=__(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==__(t)?t:t+""}function M_(){return M_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},M_.apply(this,arguments)}function D_(e){var t=e.xAxisId,r=SN(),n=_N(),s=NN(t);return null==s?null:a.createElement(S_,M_({},s,{className:ko("recharts-".concat(s.axisType," ").concat(s.axisType),s.className),viewBox:{x:0,y:0,width:r,height:n},ticksGenerator:function(e){return db(e,!0)}}))}N_(S_,"displayName","CartesianAxis"),N_(S_,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var R_=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),A_(this,t,arguments)}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&E_(e,t)}(t,e),r=t,(n=[{key:"render",value:function(){return a.createElement(D_,this.props)}}])&&C_(r.prototype,n),s&&C_(r,s),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,s}(a.Component);function F_(e){return F_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},F_(e)}function L_(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,V_(n.key),n)}}function B_(e,t,r){return t=z_(t),function(e,t){if(t&&("object"===F_(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,U_()?Reflect.construct(t,r||[],z_(e).constructor):t.apply(e,r))}function U_(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(U_=function(){return!!e})()}function z_(e){return z_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},z_(e)}function q_(e,t){return q_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},q_(e,t)}function W_(e,t,r){return(t=V_(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function V_(e){var t=function(e,t){if("object"!=F_(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=F_(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==F_(t)?t:t+""}function G_(){return G_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},G_.apply(this,arguments)}T_(R_,"displayName","XAxis"),T_(R_,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});var H_=function(e){var t=e.yAxisId,r=SN(),n=_N(),s=kN(t);return null==s?null:a.createElement(S_,G_({},s,{className:ko("recharts-".concat(s.axisType," ").concat(s.axisType),s.className),viewBox:{x:0,y:0,width:r,height:n},ticksGenerator:function(e){return db(e,!0)}}))},K_=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),B_(this,t,arguments)}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&q_(e,t)}(t,e),r=t,(n=[{key:"render",value:function(){return a.createElement(H_,this.props)}}])&&L_(r.prototype,n),s&&L_(r,s),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,s}(a.Component);W_(K_,"displayName","YAxis"),W_(K_,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});var Y_=LS({chartName:"LineChart",GraphicalChild:t_,axisComponents:[{axisType:"xAxis",AxisComp:R_},{axisType:"yAxis",AxisComp:K_}],formatAxisMap:Kw}),J_=["x1","y1","x2","y2","key"],X_=["offset"];function $_(e){return $_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$_(e)}function Q_(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Z_(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Q_(Object(r),!0).forEach(function(t){eC(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Q_(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function eC(e,t,r){return t=function(e){var t=function(e,t){if("object"!=$_(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=$_(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==$_(t)?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function tC(){return tC=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},tC.apply(this,arguments)}function rC(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var nC=function(e){var t=e.fill;if(!t||"none"===t)return null;var r=e.fillOpacity,n=e.x,s=e.y,i=e.width,o=e.height,l=e.ry;return a.createElement("rect",{x:n,y:s,ry:l,width:i,height:o,stroke:"none",fill:t,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function aC(e,t){var r;if(a.isValidElement(e))r=a.cloneElement(e,t);else if(Xo()(e))r=e(t);else{var n=t.x1,s=t.y1,i=t.x2,o=t.y2,l=t.key,c=rC(t,J_),d=wl(c,!1),u=(d.offset,rC(d,X_));r=a.createElement("line",tC({},u,{x1:n,y1:s,x2:i,y2:o,fill:"none",key:l}))}return r}function sC(e){var t=e.x,r=e.width,n=e.horizontal,s=void 0===n||n,i=e.horizontalPoints;if(!s||!i||!i.length)return null;var o=i.map(function(n,a){var i=Z_(Z_({},e),{},{x1:t,y1:n,x2:t+r,y2:n,key:"line-".concat(a),index:a});return aC(s,i)});return a.createElement("g",{className:"recharts-cartesian-grid-horizontal"},o)}function iC(e){var t=e.y,r=e.height,n=e.vertical,s=void 0===n||n,i=e.verticalPoints;if(!s||!i||!i.length)return null;var o=i.map(function(n,a){var i=Z_(Z_({},e),{},{x1:n,y1:t,x2:n,y2:t+r,key:"line-".concat(a),index:a});return aC(s,i)});return a.createElement("g",{className:"recharts-cartesian-grid-vertical"},o)}function oC(e){var t=e.horizontalFill,r=e.fillOpacity,n=e.x,s=e.y,i=e.width,o=e.height,l=e.horizontalPoints,c=e.horizontal;if(!(void 0===c||c)||!t||!t.length)return null;var d=l.map(function(e){return Math.round(e+s-s)}).sort(function(e,t){return e-t});s!==d[0]&&d.unshift(0);var u=d.map(function(e,l){var c=!d[l+1]?s+o-e:d[l+1]-e;if(c<=0)return null;var u=l%t.length;return a.createElement("rect",{key:"react-".concat(l),y:e,x:n,height:c,width:i,stroke:"none",fill:t[u],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return a.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},u)}function lC(e){var t=e.vertical,r=void 0===t||t,n=e.verticalFill,s=e.fillOpacity,i=e.x,o=e.y,l=e.width,c=e.height,d=e.verticalPoints;if(!r||!n||!n.length)return null;var u=d.map(function(e){return Math.round(e+i-i)}).sort(function(e,t){return e-t});i!==u[0]&&u.unshift(0);var p=u.map(function(e,t){var r=!u[t+1]?i+l-e:u[t+1]-e;if(r<=0)return null;var d=t%n.length;return a.createElement("rect",{key:"react-".concat(t),x:e,y:o,width:r,height:c,stroke:"none",fill:n[d],fillOpacity:s,className:"recharts-cartesian-grid-bg"})});return a.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},p)}var cC=function(e,t){var r=e.xAxis,n=e.width,a=e.height,s=e.offset;return cb(c_(Z_(Z_(Z_({},S_.defaultProps),r),{},{ticks:db(r,!0),viewBox:{x:0,y:0,width:n,height:a}})),s.left,s.left+s.width,t)},dC=function(e,t){var r=e.yAxis,n=e.width,a=e.height,s=e.offset;return cb(c_(Z_(Z_(Z_({},S_.defaultProps),r),{},{ticks:db(r,!0),viewBox:{x:0,y:0,width:n,height:a}})),s.top,s.top+s.height,t)},uC={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function pC(e){var t,r,n,s,i,o,l=SN(),c=_N(),d=(0,a.useContext)(yN),u=Z_(Z_({},e),{},{stroke:null!==(t=e.stroke)&&void 0!==t?t:uC.stroke,fill:null!==(r=e.fill)&&void 0!==r?r:uC.fill,horizontal:null!==(n=e.horizontal)&&void 0!==n?n:uC.horizontal,horizontalFill:null!==(s=e.horizontalFill)&&void 0!==s?s:uC.horizontalFill,vertical:null!==(i=e.vertical)&&void 0!==i?i:uC.vertical,verticalFill:null!==(o=e.verticalFill)&&void 0!==o?o:uC.verticalFill,x:Bo(e.x)?e.x:d.left,y:Bo(e.y)?e.y:d.top,width:Bo(e.width)?e.width:d.width,height:Bo(e.height)?e.height:d.height}),p=u.x,m=u.y,h=u.width,f=u.height,g=u.syncWithTicks,x=u.horizontalValues,y=u.verticalValues,v=function(){var e=(0,a.useContext)(fN);return Vo(e)}(),b=function(){var e=(0,a.useContext)(gN);return pN()(e,function(e){return fj()(e.domain,Number.isFinite)})||Vo(e)}();if(!Bo(h)||h<=0||!Bo(f)||f<=0||!Bo(p)||p!==+p||!Bo(m)||m!==+m)return null;var j=u.verticalCoordinatesGenerator||cC,w=u.horizontalCoordinatesGenerator||dC,N=u.horizontalPoints,k=u.verticalPoints;if((!N||!N.length)&&Xo()(w)){var S=x&&x.length,_=w({yAxis:b?Z_(Z_({},b),{},{ticks:S?x:b.ticks}):void 0,width:l,height:c,offset:d},!!S||g);Yo(Array.isArray(_),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat($_(_),"]")),Array.isArray(_)&&(N=_)}if((!k||!k.length)&&Xo()(j)){var C=y&&y.length,A=j({xAxis:v?Z_(Z_({},v),{},{ticks:C?y:v.ticks}):void 0,width:l,height:c,offset:d},!!C||g);Yo(Array.isArray(A),"verticalCoordinatesGenerator should return Array but instead it returned [".concat($_(A),"]")),Array.isArray(A)&&(k=A)}return a.createElement("g",{className:"recharts-cartesian-grid"},a.createElement(nC,{fill:u.fill,fillOpacity:u.fillOpacity,x:u.x,y:u.y,width:u.width,height:u.height,ry:u.ry}),a.createElement(sC,tC({},u,{offset:d,horizontalPoints:N,xAxis:v,yAxis:b})),a.createElement(iC,tC({},u,{offset:d,verticalPoints:k,xAxis:v,yAxis:b})),a.createElement(oC,tC({},u,{horizontalPoints:N})),a.createElement(lC,tC({},u,{verticalPoints:k})))}pC.displayName="CartesianGrid";const mC=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Ma.get("/analytics/advanced/profanity-stats",{params:e})},hC={getOverviewSummary:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Ma.get("/analytics/overview/summary",{params:e})},getOverviewTrends:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Ma.get("/analytics/overview/trends",{params:e})},getOverviewAgents:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Ma.get("/analytics/overview/agents",{params:e})},getOverviewMetrics:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Ma.get("/analytics/overview",{params:e})},getAgentsList:()=>Ma.get("/analytics/overview/agents"),getAdvancedIntents:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Ma.get("/analytics/advanced/top-intents",{params:e})},getAdvancedTopics:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Ma.get("/analytics/advanced/topics",{params:e})},getCallsReport:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Ma.get("/analytics/calls",{params:e})},getCallDetails:e=>Ma.get("/analytics/calls/".concat(e,"/details")),getCallTranscription:e=>Ma.get("/analytics/calls/".concat(e,"/transcript")),getCallAnalytics:e=>Ma.get("/analytics/calls/".concat(e,"/analytics")),exportCallsReport:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"csv";return Ma.get("/analytics/calls/export/".concat(t),{params:e,responseType:"blob"})},getChatReport:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Ma.get("/analytics/chats",{params:e})},getChatSessionDetails:e=>Ma.get("/analytics/chats/".concat(e,"/details")),getChatMessages:e=>Ma.get("/analytics/chats/".concat(e,"/messages")),getChatAnalytics:e=>Ma.get("/analytics/chats/".concat(e,"/analytics")),exportChatReport:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"csv";return Ma.get("/analytics/chats/export/".concat(t),{params:e,responseType:"blob"})},getSentimentTrends:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Ma.get("/analytics/advanced/sentiment-trends",{params:e})},getIntentDistribution:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Ma.get("/analytics/advanced/intent-distribution",{params:e})},getKeywordAnalysis:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Ma.get("/analytics/advanced/keywords",{params:e})},getLanguageDistribution:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Ma.get("/analytics/advanced/language-distribution",{params:e})},getEmotionAnalysis:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Ma.get("/analytics/advanced/emotions",{params:e})},getTopicAnalysis:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Ma.get("/analytics/advanced/topics",{params:e})},getTopIntents:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Ma.get("/analytics/advanced/top-intents",{params:e})},getProfanityStats:mC,getTopKeywords:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Ma.get("/analytics/advanced/top-keywords",{params:e})},getProfanityStats:mC,getCostOverview:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Ma.get("/analytics/costs/overview",{params:e})},getCostTrends:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Ma.get("/analytics/costs/trends",{params:e})},getCostBreakdown:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Ma.get("/analytics/costs/breakdown",{params:e})},getAgentPerformance:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Ma.get("/analytics/agents/performance",{params:e})},getSatisfactionOverview:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Ma.get("/analytics/satisfaction/overview",{params:e})},getSatisfactionTrends:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Ma.get("/analytics/satisfaction/trends",{params:e})},getSatisfactionFeedback:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Ma.get("/analytics/satisfaction/feedback",{params:e})},getSatisfactionByAgent:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Ma.get("/analytics/satisfaction/by-agent",{params:e})},getSatisfactionByIntent:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Ma.get("/analytics/satisfaction/by-intent",{params:e})},getDateRangePresets:()=>{const e=new Date,t=e=>e.toISOString().split("T")[0];return{today:{label:"Today",date_from:t(e),date_to:t(e)},yesterday:{label:"Yesterday",date_from:t(new Date(e.getTime()-864e5)),date_to:t(new Date(e.getTime()-864e5))},last7days:{label:"Last 7 Days",date_from:t(new Date(e.getTime()-6048e5)),date_to:t(e)},last30days:{label:"Last 30 Days",date_from:t(new Date(e.getTime()-2592e6)),date_to:t(e)},thisMonth:{label:"This Month",date_from:t(new Date(e.getFullYear(),e.getMonth(),1)),date_to:t(e)},lastMonth:{label:"Last Month",date_from:t(new Date(e.getFullYear(),e.getMonth()-1,1)),date_to:t(new Date(e.getFullYear(),e.getMonth(),0))}}},formatCurrency:e=>"$".concat(parseFloat(e||0).toFixed(2)),formatPercentage:e=>"".concat(parseFloat(e||0).toFixed(1),"%"),formatDuration:e=>{const t=Math.floor(e/60),r=Math.floor(e%60);return"".concat(t,"m ").concat(r,"s")},formatDate:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"short";const r=new Date(e);switch(t){case"short":return r.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"});case"long":return r.toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"});case"time":return r.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"});case"datetime":return"".concat(r.toLocaleDateString("en-US",{month:"short",day:"numeric"})," ").concat(r.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"}));default:return r.toLocaleDateString()}}},fC=hC,gC=()=>{const[e,t]=(0,a.useState)(!0),[r,n]=(0,a.useState)(null),[s,i]=(0,a.useState)(null),[o,l]=(0,a.useState)([]),[c,d]=(0,a.useState)([]),[u,p]=(0,a.useState)([]),[m,h]=(0,a.useState)([]),[f,g]=(0,a.useState)([]),[x,y]=(0,a.useState)([]),[v,b]=(0,a.useState)({date_from:new Date(Date.now()-2592e6).toISOString().split("T")[0],date_to:(new Date).toISOString().split("T")[0],agent_id:""}),[j,w]=(0,a.useState)([]);(0,a.useEffect)(()=>{(async()=>{try{const e=await fC.getOverviewAgents();w(e.data.data.agents||[])}catch(e){console.error("Failed to fetch agents:",e)}})()},[]),(0,a.useEffect)(()=>{N()},[v]);const N=async()=>{t(!0),n(null);try{const e=qe({},v);e.agent_id||delete e.agent_id;const[t,r,n,a,s,o,c]=await Promise.all([fC.getOverviewSummary(e),fC.getOverviewTrends(e),fC.getOverviewAgents(e),fC.getAdvancedIntents(e),fC.getAdvancedTopics(e),fC.getAdvancedTopics(e),fC.getCostBreakdown(e)]);i(t.data.data),l(r.data.data.trends||[]),d(n.data.data.agents||[]),p(a.data.data.intents||[]),h(s.data.data.topics||[]),g(s.data.data.keywords||[]),y(c.data.data.breakdown||[])}catch(a){var e,r;console.error("Failed to fetch overview data:",a),n((null===(e=a.response)||void 0===e||null===(r=e.data)||void 0===r?void 0:r.message)||"Failed to load analytics data")}finally{t(!1)}};if(e&&!s)return(0,Da.jsx)("div",{className:"flex items-center justify-center h-screen",children:(0,Da.jsxs)("div",{className:"text-center",children:[(0,Da.jsx)(Is,{className:"w-16 h-16 text-primary-600 mx-auto mb-4 animate-pulse"}),(0,Da.jsx)("p",{className:"text-lg text-gray-600",children:"Loading analytics dashboard..."})]})});const k=(null===s||void 0===s?void 0:s.negative_count)||0,S=k>10,_=[{name:"Positive",value:(null===s||void 0===s?void 0:s.positive_percentage)||0,color:"#2ecc71"},{name:"Neutral",value:(null===s||void 0===s?void 0:s.neutral_percentage)||0,color:"#95a5a6"},{name:"Negative",value:(null===s||void 0===s?void 0:s.negative_percentage)||0,color:"#e74c3c"},{name:"Mixed",value:(null===s||void 0===s?void 0:s.mixed_percentage)||0,color:"#f39c12"}];return(0,Da.jsxs)("div",{className:"space-y-6",children:[(0,Da.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,Da.jsxs)("div",{className:"mb-4",children:[(0,Da.jsxs)("div",{className:"text-sm text-gray-500 mb-2",children:[(0,Da.jsx)("a",{href:"/analytics",className:"text-primary-600 hover:text-primary-700",children:"Dashboard"})," ","/"," ","Overview"]}),(0,Da.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"\ud83d\udcca Analytics Dashboard"}),(0,Da.jsx)("p",{className:"text-gray-600 mt-2",children:"Complete overview of your AiVA platform performance"})]}),(0,Da.jsxs)("div",{className:"flex flex-wrap gap-3 items-center",children:[(0,Da.jsx)("input",{type:"date",value:v.date_from,onChange:e=>b(t=>qe(qe({},t),{},{date_from:e.target.value})),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent text-sm"}),(0,Da.jsx)("span",{className:"text-gray-500",children:"to"}),(0,Da.jsx)("input",{type:"date",value:v.date_to,onChange:e=>b(t=>qe(qe({},t),{},{date_to:e.target.value})),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent text-sm"}),(0,Da.jsxs)("select",{value:v.agent_id,onChange:e=>b(t=>qe(qe({},t),{},{agent_id:e.target.value})),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent text-sm",children:[(0,Da.jsx)("option",{value:"",children:"All Agents"}),j.map(e=>(0,Da.jsx)("option",{value:e.id,children:e.name},e.id))]}),(0,Da.jsx)("button",{onClick:()=>{N()},className:"px-6 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 font-semibold",children:"Apply Filters"}),(0,Da.jsxs)("button",{className:"px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 font-semibold flex items-center gap-2",children:[(0,Da.jsx)(Si,{className:"w-4 h-4"}),"Export Report"]})]})]}),r&&(0,Da.jsx)("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:r}),S&&(0,Da.jsx)("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 p-4 rounded-lg shadow",children:(0,Da.jsxs)("div",{className:"flex items-start",children:[(0,Da.jsx)(ro,{className:"w-6 h-6 text-yellow-600 mr-3 flex-shrink-0"}),(0,Da.jsxs)("div",{children:[(0,Da.jsx)("h3",{className:"text-yellow-800 font-semibold text-base mb-1",children:"Action Required"}),(0,Da.jsxs)("p",{className:"text-yellow-700 text-sm",children:[k," interactions detected with negative sentiment today. Consider reviewing for quality improvement."]})]})]})}),s&&(0,Da.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,Da.jsxs)("div",{className:"bg-gradient-to-br from-blue-500 to-blue-600 text-white rounded-lg shadow-lg p-6 relative overflow-hidden",children:[(0,Da.jsx)("div",{className:"absolute top-0 right-0 -mt-4 -mr-4 opacity-20",children:(0,Da.jsx)(Is,{className:"w-32 h-32"})}),(0,Da.jsxs)("div",{className:"relative",children:[(0,Da.jsx)("div",{className:"text-sm uppercase tracking-wide opacity-90 mb-2",children:"Total Interactions"}),(0,Da.jsx)("div",{className:"text-4xl font-bold mb-2",children:(s.total_interactions||0).toLocaleString()}),(0,Da.jsxs)("div",{className:"flex items-center text-sm opacity-90",children:[(0,Da.jsx)(Xa,{className:"w-4 h-4 mr-1"}),"12.5% from last period"]})]})]}),(0,Da.jsxs)("div",{className:"bg-gradient-to-br from-purple-500 to-purple-600 text-white rounded-lg shadow-lg p-6 relative overflow-hidden",children:[(0,Da.jsx)("div",{className:"absolute top-0 right-0 -mt-4 -mr-4 opacity-20",children:(0,Da.jsx)(Ja,{className:"w-32 h-32"})}),(0,Da.jsxs)("div",{className:"relative",children:[(0,Da.jsx)("div",{className:"text-sm uppercase tracking-wide opacity-90 mb-2",children:"Voice Calls"}),(0,Da.jsx)("div",{className:"text-4xl font-bold mb-2",children:(s.total_calls||0).toLocaleString()}),(0,Da.jsxs)("div",{className:"flex items-center text-sm opacity-90",children:[(0,Da.jsx)(Xa,{className:"w-4 h-4 mr-1"}),"8.3% from last period"]})]})]}),(0,Da.jsxs)("div",{className:"bg-gradient-to-br from-green-500 to-green-600 text-white rounded-lg shadow-lg p-6 relative overflow-hidden",children:[(0,Da.jsx)("div",{className:"absolute top-0 right-0 -mt-4 -mr-4 opacity-20",children:(0,Da.jsx)(rs,{className:"w-32 h-32"})}),(0,Da.jsxs)("div",{className:"relative",children:[(0,Da.jsx)("div",{className:"text-sm uppercase tracking-wide opacity-90 mb-2",children:"Chat Messages"}),(0,Da.jsx)("div",{className:"text-4xl font-bold mb-2",children:(s.total_chats||0).toLocaleString()}),(0,Da.jsxs)("div",{className:"flex items-center text-sm opacity-90",children:[(0,Da.jsx)(Xa,{className:"w-4 h-4 mr-1"}),"15.7% from last period"]})]})]}),(0,Da.jsxs)("div",{className:"bg-gradient-to-br from-indigo-500 to-indigo-600 text-white rounded-lg shadow-lg p-6 relative overflow-hidden",children:[(0,Da.jsx)("div",{className:"absolute top-0 right-0 -mt-4 -mr-4 opacity-20",children:(0,Da.jsx)(Ts,{className:"w-32 h-32"})}),(0,Da.jsxs)("div",{className:"relative",children:[(0,Da.jsx)("div",{className:"text-sm uppercase tracking-wide opacity-90 mb-2",children:"Avg Call Duration"}),(0,Da.jsxs)("div",{className:"text-4xl font-bold mb-2",children:[Math.floor((s.avg_call_duration||0)/60),":",String(Math.round((s.avg_call_duration||0)%60)).padStart(2,"0")]}),(0,Da.jsxs)("div",{className:"flex items-center text-sm opacity-90",children:[(0,Da.jsx)(Xa,{className:"w-4 h-4 mr-1 rotate-180"}),"5.2% from last period"]})]})]}),(0,Da.jsxs)("div",{className:"bg-gradient-to-br from-teal-500 to-teal-600 text-white rounded-lg shadow-lg p-6 relative overflow-hidden",children:[(0,Da.jsx)("div",{className:"absolute top-0 right-0 -mt-4 -mr-4 opacity-20",children:(0,Da.jsx)(gs,{className:"w-32 h-32"})}),(0,Da.jsxs)("div",{className:"relative",children:[(0,Da.jsx)("div",{className:"text-sm uppercase tracking-wide opacity-90 mb-2",children:"Customer Satisfaction"}),(0,Da.jsxs)("div",{className:"text-4xl font-bold mb-2",children:[(s.satisfaction_rate||0).toFixed(1),"%"]}),(0,Da.jsxs)("div",{className:"flex items-center text-sm opacity-90",children:[(0,Da.jsx)(Xa,{className:"w-4 h-4 mr-1"}),"3.1% from last period"]})]})]}),(0,Da.jsxs)("div",{className:"bg-gradient-to-br from-cyan-500 to-cyan-600 text-white rounded-lg shadow-lg p-6 relative overflow-hidden",children:[(0,Da.jsx)("div",{className:"absolute top-0 right-0 -mt-4 -mr-4 opacity-20",children:(0,Da.jsx)(gs,{className:"w-32 h-32"})}),(0,Da.jsxs)("div",{className:"relative",children:[(0,Da.jsx)("div",{className:"text-sm uppercase tracking-wide opacity-90 mb-2",children:"Issue Resolution Rate"}),(0,Da.jsxs)("div",{className:"text-4xl font-bold mb-2",children:[(s.resolution_rate||0).toFixed(1),"%"]}),(0,Da.jsxs)("div",{className:"flex items-center text-sm opacity-90",children:[(0,Da.jsx)(Xa,{className:"w-4 h-4 mr-1"}),"6.4% from last period"]})]})]}),(0,Da.jsxs)("div",{className:"bg-gradient-to-br from-orange-500 to-orange-600 text-white rounded-lg shadow-lg p-6 relative overflow-hidden",children:[(0,Da.jsx)("div",{className:"absolute top-0 right-0 -mt-4 -mr-4 opacity-20",children:(0,Da.jsx)(gi,{className:"w-32 h-32"})}),(0,Da.jsxs)("div",{className:"relative",children:[(0,Da.jsx)("div",{className:"text-sm uppercase tracking-wide opacity-90 mb-2",children:"Profanity Incidents"}),(0,Da.jsx)("div",{className:"text-4xl font-bold mb-2",children:s.profanity_incidents||0}),(0,Da.jsxs)("div",{className:"flex items-center text-sm opacity-90",children:[(0,Da.jsx)(ro,{className:"w-4 h-4 mr-1"}),"Monitor closely"]})]})]}),(0,Da.jsxs)("div",{className:"bg-gradient-to-br from-pink-500 to-pink-600 text-white rounded-lg shadow-lg p-6 relative overflow-hidden",children:[(0,Da.jsx)("div",{className:"absolute top-0 right-0 -mt-4 -mr-4 opacity-20",children:(0,Da.jsx)(Ka,{className:"w-32 h-32"})}),(0,Da.jsxs)("div",{className:"relative",children:[(0,Da.jsx)("div",{className:"text-sm uppercase tracking-wide opacity-90 mb-2",children:"Total Cost (USD)"}),(0,Da.jsxs)("div",{className:"text-4xl font-bold mb-2",children:["$",(s.total_cost||0).toFixed(2)]}),(0,Da.jsxs)("div",{className:"flex items-center text-sm opacity-90",children:[(0,Da.jsx)(Xa,{className:"w-4 h-4 mr-1"}),"9.8% from last period"]})]})]})]}),(0,Da.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,Da.jsxs)("div",{className:"lg:col-span-2 bg-white rounded-lg shadow p-6",children:[(0,Da.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4 pb-4 border-b border-gray-200",children:"\ud83d\udcc8 Interaction Trends (Last 30 Days)"}),(0,Da.jsx)(Tl,{width:"100%",height:300,children:(0,Da.jsxs)(Y_,{data:o,children:[(0,Da.jsx)(pC,{strokeDasharray:"3 3"}),(0,Da.jsx)(R_,{dataKey:"date",tickFormatter:e=>new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric"})}),(0,Da.jsx)(K_,{}),(0,Da.jsx)(Mc,{labelFormatter:e=>new Date(e).toLocaleDateString()}),(0,Da.jsx)(lu,{}),(0,Da.jsx)(t_,{type:"monotone",dataKey:"calls",stroke:"#8b5cf6",strokeWidth:2,name:"Voice Calls"}),(0,Da.jsx)(t_,{type:"monotone",dataKey:"chats",stroke:"#10b981",strokeWidth:2,name:"Chat Sessions"})]})})]}),(0,Da.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,Da.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4 pb-4 border-b border-gray-200",children:"\ud83d\ude0a Sentiment Distribution"}),(0,Da.jsx)("div",{className:"space-y-4",children:_.map((e,t)=>(0,Da.jsxs)("div",{children:[(0,Da.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,Da.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Da.jsx)("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:e.color}}),(0,Da.jsx)("span",{className:"text-sm font-medium text-gray-700",children:e.name})]}),(0,Da.jsxs)("span",{className:"text-sm font-semibold text-gray-900",children:[e.value.toFixed(1),"%"]})]}),(0,Da.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,Da.jsx)("div",{className:"h-2 rounded-full transition-all duration-300",style:{width:"".concat(e.value,"%"),backgroundColor:e.color}})})]},t))})]})]}),(0,Da.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,Da.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,Da.jsx)("h3",{className:"text-base font-semibold text-gray-900 mb-4 pb-3 border-b border-gray-200 flex items-center gap-2",children:"\ud83c\udfaf Top Customer Intents"}),(0,Da.jsxs)("ul",{className:"space-y-3",children:[u.slice(0,5).map((e,t)=>(0,Da.jsxs)("li",{className:"flex items-center justify-between text-sm",children:[(0,Da.jsx)("span",{className:"text-gray-600",children:e.intent||e.name}),(0,Da.jsxs)("span",{className:"font-semibold text-gray-900",children:[e.count," (",parseFloat(e.percentage||0).toFixed(0),"%)"]})]},t)),0===u.length&&(0,Da.jsx)("li",{className:"text-gray-500 text-sm",children:"No data available"})]})]}),(0,Da.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,Da.jsx)("h3",{className:"text-base font-semibold text-gray-900 mb-4 pb-3 border-b border-gray-200 flex items-center gap-2",children:"\ud83d\udcac Most Discussed Topics"}),(0,Da.jsxs)("ul",{className:"space-y-3",children:[m.slice(0,5).map((e,t)=>(0,Da.jsxs)("li",{className:"flex items-center justify-between text-sm",children:[(0,Da.jsx)("span",{className:"text-gray-600",children:e.topic||e.name}),(0,Da.jsxs)("span",{className:"font-semibold text-gray-900",children:[e.count," mentions"]})]},t)),0===m.length&&(0,Da.jsx)("li",{className:"text-gray-500 text-sm",children:"No data available"})]})]}),(0,Da.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,Da.jsx)("h3",{className:"text-base font-semibold text-gray-900 mb-4 pb-3 border-b border-gray-200 flex items-center gap-2",children:"\ud83d\udd11 Top Keywords"}),(0,Da.jsxs)("ul",{className:"space-y-3",children:[f.slice(0,5).map((e,t)=>(0,Da.jsxs)("li",{className:"flex items-center justify-between text-sm",children:[(0,Da.jsx)("span",{className:"text-gray-600",children:e.keyword||e.word}),(0,Da.jsxs)("span",{className:"font-semibold text-gray-900",children:[e.count," times"]})]},t)),0===f.length&&(0,Da.jsx)("li",{className:"text-gray-500 text-sm",children:"No data available"})]})]}),(0,Da.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,Da.jsx)("h3",{className:"text-base font-semibold text-gray-900 mb-4 pb-3 border-b border-gray-200 flex items-center gap-2",children:"\ud83d\udcb0 Cost Breakdown"}),(0,Da.jsxs)("ul",{className:"space-y-3",children:[x.slice(0,5).map((e,t)=>(0,Da.jsxs)("li",{className:"flex items-center justify-between text-sm",children:[(0,Da.jsx)("span",{className:"text-gray-600",children:e.category||e.name||e.type}),(0,Da.jsxs)("span",{className:"font-semibold text-gray-900",children:["$",parseFloat(e.cost||0).toFixed(2)," (",parseFloat(e.percentage||0).toFixed(1),"%)"]})]},t)),0===x.length&&(0,Da.jsx)("li",{className:"text-gray-500 text-sm",children:"No data available"})]})]})]}),(0,Da.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,Da.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4 pb-4 border-b border-gray-200",children:"\ud83d\udc65 Top Performing Agents"}),c.length>0?(0,Da.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:c.slice(0,6).map((e,t)=>(0,Da.jsxs)("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:[(0,Da.jsxs)("div",{className:"flex items-center flex-1",children:[(0,Da.jsxs)("div",{className:"flex-shrink-0 w-10 h-10 bg-primary-100 rounded-full flex items-center justify-center text-primary-700 font-bold",children:["#",t+1]}),(0,Da.jsxs)("div",{className:"ml-3 flex-1",children:[(0,Da.jsx)("p",{className:"text-sm font-semibold text-gray-900",children:e.name}),(0,Da.jsxs)("p",{className:"text-xs text-gray-500",children:[e.total_interactions," interactions \u2022 ",(100*e.avg_sentiment).toFixed(0),"% sentiment"]})]})]}),(0,Da.jsxs)("div",{className:"text-sm font-semibold text-gray-900",children:["$",(e.total_cost||0).toFixed(2)]})]},e.id))}):(0,Da.jsx)("p",{className:"text-gray-500 text-center py-8",children:"No agent data available"})]}),s&&(0,Da.jsx)("div",{className:"bg-gray-50 rounded-lg p-4",children:(0,Da.jsxs)("div",{className:"flex items-center justify-center flex-wrap gap-6 text-sm",children:[(0,Da.jsxs)("div",{className:"flex items-center",children:[(0,Da.jsx)(gs,{className:"w-4 h-4 text-green-500 mr-2"}),(0,Da.jsxs)("span",{className:"text-gray-700",children:["Completed Calls: ",(0,Da.jsx)("strong",{children:s.completed_calls})]})]}),(0,Da.jsxs)("div",{className:"flex items-center",children:[(0,Da.jsx)(Ti,{className:"w-4 h-4 text-red-500 mr-2"}),(0,Da.jsxs)("span",{className:"text-gray-700",children:["Failed Calls: ",(0,Da.jsx)("strong",{children:s.failed_calls})]})]}),(0,Da.jsxs)("div",{className:"flex items-center",children:[(0,Da.jsx)(Ja,{className:"w-4 h-4 text-purple-500 mr-2"}),(0,Da.jsxs)("span",{className:"text-gray-700",children:["Call Costs: ",(0,Da.jsxs)("strong",{children:["$",(s.call_costs||0).toFixed(2)]})]})]}),(0,Da.jsxs)("div",{className:"flex items-center",children:[(0,Da.jsx)(rs,{className:"w-4 h-4 text-green-500 mr-2"}),(0,Da.jsxs)("span",{className:"text-gray-700",children:["Chat Costs: ",(0,Da.jsxs)("strong",{children:["$",(s.chat_costs||0).toFixed(2)]})]})]}),(0,Da.jsxs)("div",{className:"flex items-center",children:[(0,Da.jsx)(ei,{className:"w-4 h-4 text-blue-500 mr-2"}),(0,Da.jsxs)("span",{className:"text-gray-700",children:["Active Agents: ",(0,Da.jsx)("strong",{children:s.active_agents})]})]})]})})]})},xC=()=>{var e,t,r,n,s,i,o;const[l,c]=(0,a.useState)(!0),[d,u]=(0,a.useState)(null),[p,m]=(0,a.useState)(null),[h,f]=(0,a.useState)({page:1,limit:20,total:0}),[g,x]=(0,a.useState)({date_from:new Date(Date.now()-6048e5).toISOString().split("T")[0],date_to:(new Date).toISOString().split("T")[0],agent_id:"",status:"",sentiment:"",search:""}),[y,v]=(0,a.useState)([]),[b,j]=(0,a.useState)(null),[w,N]=(0,a.useState)(!1),[k,S]=(0,a.useState)(null),[_,C]=(0,a.useState)([]),[A,O]=(0,a.useState)(!1);(0,a.useEffect)(()=>{(async()=>{try{const e=await fC.getAgentsList();v(e.data.data.agents||[])}catch(e){console.error("Failed to fetch agents:",e)}})()},[]),(0,a.useEffect)(()=>{P()},[h.page]);const P=async()=>{c(!0),u(null);try{const e=qe({page:h.page,limit:h.limit},g);Object.keys(e).forEach(t=>{e[t]||delete e[t]});const t=await fC.getCallsReport(e);m(t.data.data),f(e=>qe(qe({},e),{},{total:t.data.data.pagination.total,pages:t.data.data.pagination.pages}))}catch(r){var e,t;console.error("Failed to fetch calls:",r),u((null===(e=r.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.message)||"Failed to load calls")}finally{c(!1)}},E=async e=>{j(e),N(!0),O(!0),S(null),C([]);try{const r=await fC.getCallDetails(e.id);S(r.data.data);try{const t=await fC.getCallTranscription(e.id);console.log("Transcript response:",t.data),C(t.data.data.messages||[])}catch(t){console.error("Failed to fetch transcript:",t),C([])}}catch(r){console.error("Failed to fetch call details:",r),S(null),C([])}finally{O(!1)}},T=e=>{let{status:t}=e;const r={completed:"bg-green-100 text-green-800",failed:"bg-red-100 text-red-800",in_progress:"bg-yellow-100 text-yellow-800",insufficient_credits:"bg-orange-100 text-orange-800"};return(0,Da.jsx)("span",{className:"px-3 py-1 rounded-full text-xs font-semibold ".concat(r[t]||r.in_progress),children:(null===t||void 0===t?void 0:t.replace("_"," "))||"Unknown"})},I=e=>{let{sentiment:t}=e;const r={positive:"bg-green-100 text-green-800",negative:"bg-red-100 text-red-800",neutral:"bg-gray-100 text-gray-800",mixed:"bg-yellow-100 text-yellow-800"};return(0,Da.jsx)("span",{className:"px-3 py-1 rounded-full text-xs font-semibold ".concat(r[t]||r.neutral),children:t||"N/A"})},M=(null===p||void 0===p?void 0:p.stats)||{},D=(null===p||void 0===p?void 0:p.calls)||[];return(0,Da.jsxs)("div",{className:"space-y-6",children:[(0,Da.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,Da.jsxs)("div",{className:"mb-4",children:[(0,Da.jsxs)("div",{className:"text-sm text-gray-500 mb-2",children:[(0,Da.jsx)("a",{href:"/analytics",className:"text-primary-600 hover:text-primary-700",children:"Dashboard"})," ","/"," ","Calls Report"]}),(0,Da.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"\ud83d\udcde Voice Calls Report"})]}),(0,Da.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-7 gap-3 items-end",children:[(0,Da.jsxs)("div",{children:[(0,Da.jsx)("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"From Date"}),(0,Da.jsx)("input",{type:"date",value:g.date_from,onChange:e=>x(t=>qe(qe({},t),{},{date_from:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent text-sm"})]}),(0,Da.jsxs)("div",{children:[(0,Da.jsx)("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"To Date"}),(0,Da.jsx)("input",{type:"date",value:g.date_to,onChange:e=>x(t=>qe(qe({},t),{},{date_to:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent text-sm"})]}),(0,Da.jsxs)("div",{className:"md:col-span-2",children:[(0,Da.jsx)("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Search"}),(0,Da.jsx)("input",{type:"text",placeholder:"Phone number, session ID...",value:g.search,onChange:e=>x(t=>qe(qe({},t),{},{search:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent text-sm"})]}),(0,Da.jsxs)("div",{children:[(0,Da.jsx)("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Status"}),(0,Da.jsxs)("select",{value:g.status,onChange:e=>x(t=>qe(qe({},t),{},{status:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent text-sm",children:[(0,Da.jsx)("option",{value:"",children:"All Status"}),(0,Da.jsx)("option",{value:"completed",children:"Completed"}),(0,Da.jsx)("option",{value:"failed",children:"Failed"}),(0,Da.jsx)("option",{value:"in_progress",children:"In Progress"})]})]}),(0,Da.jsxs)("div",{children:[(0,Da.jsx)("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Sentiment"}),(0,Da.jsxs)("select",{value:g.sentiment,onChange:e=>x(t=>qe(qe({},t),{},{sentiment:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent text-sm",children:[(0,Da.jsx)("option",{value:"",children:"All Sentiments"}),(0,Da.jsx)("option",{value:"positive",children:"Positive"}),(0,Da.jsx)("option",{value:"negative",children:"Negative"}),(0,Da.jsx)("option",{value:"neutral",children:"Neutral"}),(0,Da.jsx)("option",{value:"mixed",children:"Mixed"})]})]}),(0,Da.jsxs)("div",{children:[(0,Da.jsx)("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Agent"}),(0,Da.jsxs)("select",{value:g.agent_id,onChange:e=>x(t=>qe(qe({},t),{},{agent_id:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent text-sm",children:[(0,Da.jsx)("option",{value:"",children:"All Agents"}),y.map(e=>(0,Da.jsx)("option",{value:e.id,children:e.name},e.id))]})]})]}),(0,Da.jsxs)("div",{className:"flex gap-3 mt-4",children:[(0,Da.jsx)("button",{onClick:()=>{f(e=>qe(qe({},e),{},{page:1})),P()},className:"px-6 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 font-semibold",children:"Apply Filters"}),(0,Da.jsxs)("button",{onClick:async()=>{try{const e=qe({},g);Object.keys(e).forEach(t=>{e[t]||delete e[t]});const t=await fC.exportCallsReport(e,"csv"),r=window.URL.createObjectURL(new Blob([t.data])),n=document.createElement("a");n.href=r,n.setAttribute("download","calls_report_".concat(Date.now(),".csv")),document.body.appendChild(n),n.click(),n.remove()}catch(e){console.error("Failed to export:",e),alert("Failed to export report")}},className:"px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 font-semibold flex items-center gap-2",children:[(0,Da.jsx)(Si,{className:"w-4 h-4"}),"Export CSV"]})]})]}),(0,Da.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[(0,Da.jsxs)("div",{className:"bg-white rounded-lg shadow p-6 text-center",children:[(0,Da.jsx)("div",{className:"text-xs text-gray-500 uppercase mb-2",children:"Total Calls"}),(0,Da.jsx)("div",{className:"text-2xl font-bold text-gray-900",children:(null===(e=M.total_calls)||void 0===e?void 0:e.toLocaleString())||0})]}),(0,Da.jsxs)("div",{className:"bg-white rounded-lg shadow p-6 text-center",children:[(0,Da.jsx)("div",{className:"text-xs text-gray-500 uppercase mb-2",children:"Avg Duration"}),(0,Da.jsx)("div",{className:"text-2xl font-bold text-gray-900",children:fC.formatDuration(M.avg_duration_seconds||0)})]}),(0,Da.jsxs)("div",{className:"bg-white rounded-lg shadow p-6 text-center",children:[(0,Da.jsx)("div",{className:"text-xs text-gray-500 uppercase mb-2",children:"Total Minutes"}),(0,Da.jsx)("div",{className:"text-2xl font-bold text-gray-900",children:(null===(t=M.total_minutes)||void 0===t?void 0:t.toLocaleString())||0})]}),(0,Da.jsxs)("div",{className:"bg-white rounded-lg shadow p-6 text-center",children:[(0,Da.jsx)("div",{className:"text-xs text-gray-500 uppercase mb-2",children:"Success Rate"}),(0,Da.jsxs)("div",{className:"text-2xl font-bold text-gray-900",children:[M.success_rate||0,"%"]})]}),(0,Da.jsxs)("div",{className:"bg-white rounded-lg shadow p-6 text-center",children:[(0,Da.jsx)("div",{className:"text-xs text-gray-500 uppercase mb-2",children:"Avg Satisfaction"}),(0,Da.jsxs)("div",{className:"text-2xl font-bold text-gray-900",children:[M.avg_satisfaction||0,"%"]})]})]}),(0,Da.jsxs)("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[(0,Da.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,Da.jsxs)("h2",{className:"text-lg font-semibold text-gray-900",children:["Call Records (",(null===(r=M.total_calls)||void 0===r?void 0:r.toLocaleString())||0," total)"]})}),l?(0,Da.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,Da.jsxs)("div",{className:"text-center",children:[(0,Da.jsx)(Ja,{className:"w-12 h-12 text-primary-600 mx-auto mb-4 animate-pulse"}),(0,Da.jsx)("p",{className:"text-gray-600",children:"Loading calls..."})]})}):d?(0,Da.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,Da.jsxs)("div",{className:"text-center",children:[(0,Da.jsx)(gi,{className:"w-12 h-12 text-red-600 mx-auto mb-4"}),(0,Da.jsx)("p",{className:"text-red-600",children:d})]})}):0===D.length?(0,Da.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,Da.jsxs)("div",{className:"text-center",children:[(0,Da.jsx)(Ja,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),(0,Da.jsx)("p",{className:"text-gray-600",children:"No calls found"})]})}):(0,Da.jsxs)(Da.Fragment,{children:[(0,Da.jsx)("div",{className:"overflow-x-auto",children:(0,Da.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,Da.jsx)("thead",{className:"bg-gray-50",children:(0,Da.jsxs)("tr",{children:[(0,Da.jsx)("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-500 uppercase",children:"Date/Time"}),(0,Da.jsx)("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-500 uppercase",children:"Phone Number"}),(0,Da.jsx)("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-500 uppercase",children:"Agent"}),(0,Da.jsx)("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-500 uppercase",children:"Duration"}),(0,Da.jsx)("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-500 uppercase",children:"Status"}),(0,Da.jsx)("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-500 uppercase",children:"Sentiment"}),(0,Da.jsx)("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-500 uppercase",children:"Intent"}),(0,Da.jsx)("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-500 uppercase",children:"Cost"}),(0,Da.jsx)("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-500 uppercase",children:"Actions"})]})}),(0,Da.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:D.map(e=>(0,Da.jsxs)("tr",{onClick:()=>E(e),className:"hover:bg-gray-50 cursor-pointer transition-colors",children:[(0,Da.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:fC.formatDate(e.start_time,"datetime")}),(0,Da.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.caller_id||"Unknown"}),(0,Da.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.agent_name||"N/A"}),(0,Da.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:fC.formatDuration(e.duration_seconds||0)}),(0,Da.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,Da.jsx)(T,{status:e.status})}),(0,Da.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,Da.jsx)(I,{sentiment:e.overall_sentiment})}),(0,Da.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.primary_intent||"N/A"}),(0,Da.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:fC.formatCurrency(e.final_cost)}),(0,Da.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:(0,Da.jsx)("button",{onClick:t=>{t.stopPropagation(),E(e)},className:"px-3 py-1 bg-primary-600 text-white rounded text-xs font-semibold hover:bg-primary-700",children:"View"})})]},e.id))})]})}),(0,Da.jsxs)("div",{className:"px-6 py-4 bg-white border-t border-gray-200 flex items-center justify-center gap-2",children:[(0,Da.jsx)("button",{onClick:()=>f(e=>qe(qe({},e),{},{page:Math.max(1,e.page-1)})),disabled:1===h.page,className:"px-4 py-2 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),[...Array(Math.min(5,h.pages))].map((e,t)=>{const r=t+1;return(0,Da.jsx)("button",{onClick:()=>f(e=>qe(qe({},e),{},{page:r})),className:"px-4 py-2 border rounded-lg text-sm font-medium ".concat(h.page===r?"bg-primary-600 text-white border-primary-600":"border-gray-300 text-gray-700 hover:bg-gray-50"),children:r},r)}),(0,Da.jsx)("button",{onClick:()=>f(e=>qe(qe({},e),{},{page:Math.min(e.pages,e.page+1)})),disabled:h.page===h.pages,className:"px-4 py-2 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]})]})]}),w&&(0,Da.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4 overflow-y-auto",children:(0,Da.jsxs)("div",{className:"bg-white rounded-xl shadow-2xl max-w-5xl w-full max-h-[90vh] overflow-y-auto",children:[(0,Da.jsxs)("div",{className:"px-8 py-6 border-b border-gray-200 flex items-center justify-between sticky top-0 bg-white z-10",children:[(0,Da.jsxs)("h2",{className:"text-2xl font-semibold text-gray-900",children:["\ud83d\udcde Call Details - Session #",null===b||void 0===b||null===(n=b.session_id)||void 0===n?void 0:n.substring(0,12),"..."]}),(0,Da.jsx)("button",{onClick:()=>N(!1),className:"text-gray-400 hover:text-gray-600",children:(0,Da.jsx)(ss,{className:"w-6 h-6"})})]}),(0,Da.jsx)("div",{className:"px-8 py-6",children:A?(0,Da.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,Da.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):(0,Da.jsxs)(Da.Fragment,{children:[(0,Da.jsxs)("div",{className:"grid grid-cols-3 gap-5 mb-8",children:[(0,Da.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,Da.jsx)("div",{className:"text-xs text-gray-500 uppercase mb-1",children:"Date & Time"}),(0,Da.jsx)("div",{className:"text-base font-semibold text-gray-900",children:fC.formatDate(null===b||void 0===b?void 0:b.start_time,"datetime")})]}),(0,Da.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,Da.jsx)("div",{className:"text-xs text-gray-500 uppercase mb-1",children:"Phone Number"}),(0,Da.jsx)("div",{className:"text-base font-semibold text-gray-900",children:(null===b||void 0===b?void 0:b.caller_id)||"Unknown"})]}),(0,Da.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,Da.jsx)("div",{className:"text-xs text-gray-500 uppercase mb-1",children:"Agent"}),(0,Da.jsx)("div",{className:"text-base font-semibold text-gray-900",children:(null===b||void 0===b?void 0:b.agent_name)||"N/A"})]}),(0,Da.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,Da.jsx)("div",{className:"text-xs text-gray-500 uppercase mb-1",children:"Duration"}),(0,Da.jsxs)("div",{className:"text-base font-semibold text-gray-900",children:[fC.formatDuration((null===b||void 0===b?void 0:b.duration_seconds)||0)," min"]})]}),(0,Da.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,Da.jsx)("div",{className:"text-xs text-gray-500 uppercase mb-1",children:"Status"}),(0,Da.jsx)("div",{className:"text-base font-semibold",children:(0,Da.jsx)(T,{status:null===b||void 0===b?void 0:b.status})})]}),(0,Da.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,Da.jsx)("div",{className:"text-xs text-gray-500 uppercase mb-1",children:"Total Cost"}),(0,Da.jsx)("div",{className:"text-base font-semibold text-gray-900",children:fC.formatCurrency(null===b||void 0===b?void 0:b.final_cost)})]})]}),(null===k||void 0===k?void 0:k.analytics)&&(0,Da.jsxs)("div",{className:"bg-gray-50 p-6 rounded-lg mb-8",children:[(0,Da.jsx)("h3",{className:"text-base font-semibold text-gray-900 mb-4",children:"\ud83d\udcca Call Analytics"}),(0,Da.jsxs)("div",{className:"grid grid-cols-4 gap-4",children:[(0,Da.jsxs)("div",{className:"bg-white p-4 rounded-lg text-center",children:[(0,Da.jsx)("div",{className:"text-xs text-gray-500 uppercase mb-1",children:"Overall Sentiment"}),(0,Da.jsx)("div",{className:"text-xl font-bold text-green-600",children:k.analytics.overall_sentiment||"N/A"})]}),(0,Da.jsxs)("div",{className:"bg-white p-4 rounded-lg text-center",children:[(0,Da.jsx)("div",{className:"text-xs text-gray-500 uppercase mb-1",children:"Sentiment Score"}),(0,Da.jsx)("div",{className:"text-xl font-bold text-gray-900",children:k.analytics.overall_sentiment_score?parseFloat(k.analytics.overall_sentiment_score).toFixed(2):"N/A"})]}),(0,Da.jsxs)("div",{className:"bg-white p-4 rounded-lg text-center",children:[(0,Da.jsx)("div",{className:"text-xs text-gray-500 uppercase mb-1",children:"Primary Intent"}),(0,Da.jsx)("div",{className:"text-sm font-bold text-gray-900",children:(null===(s=k.analytics.primary_intents)||void 0===s?void 0:s[0])||"N/A"})]}),(0,Da.jsxs)("div",{className:"bg-white p-4 rounded-lg text-center",children:[(0,Da.jsx)("div",{className:"text-xs text-gray-500 uppercase mb-1",children:"Customer Satisfaction"}),(0,Da.jsx)("div",{className:"text-xl font-bold text-green-600",children:k.analytics.customer_satisfaction_indicator||"N/A"})]}),(0,Da.jsxs)("div",{className:"bg-white p-4 rounded-lg text-center",children:[(0,Da.jsx)("div",{className:"text-xs text-gray-500 uppercase mb-1",children:"Issue Resolved"}),(0,Da.jsx)("div",{className:"text-xl font-bold text-green-600",children:k.analytics.issue_resolved?"\u2713 Yes":"\u2717 No"})]}),(0,Da.jsxs)("div",{className:"bg-white p-4 rounded-lg text-center",children:[(0,Da.jsx)("div",{className:"text-xs text-gray-500 uppercase mb-1",children:"Profanity"}),(0,Da.jsx)("div",{className:"text-xl font-bold text-gray-900",children:k.analytics.profanity_incidents||0})]}),(0,Da.jsxs)("div",{className:"bg-white p-4 rounded-lg text-center",children:[(0,Da.jsx)("div",{className:"text-xs text-gray-500 uppercase mb-1",children:"Total Messages"}),(0,Da.jsx)("div",{className:"text-xl font-bold text-gray-900",children:k.analytics.total_exchanges||_.length})]}),(0,Da.jsxs)("div",{className:"bg-white p-4 rounded-lg text-center",children:[(0,Da.jsx)("div",{className:"text-xs text-gray-500 uppercase mb-1",children:"Language"}),(0,Da.jsx)("div",{className:"text-xl font-bold text-gray-900",children:(null===(i=k.analytics.languages_detected)||void 0===i||null===(o=i[0])||void 0===o?void 0:o.toUpperCase())||"EN"})]})]})]}),(null===k||void 0===k?void 0:k.cost_breakdown)&&(0,Da.jsxs)("div",{className:"bg-gray-50 p-6 rounded-lg mb-8",children:[(0,Da.jsx)("h3",{className:"text-base font-semibold text-gray-900 mb-4",children:"\ud83d\udcb0 Cost Breakdown"}),(0,Da.jsxs)("div",{className:"grid grid-cols-4 gap-4",children:[(0,Da.jsxs)("div",{className:"bg-white p-4 rounded-lg text-center",children:[(0,Da.jsx)("div",{className:"text-xs text-gray-500 uppercase mb-1",children:"LLM Completion"}),(0,Da.jsxs)("div",{className:"text-xl font-bold text-gray-900",children:["$",k.cost_breakdown.llm_completion]})]}),(0,Da.jsxs)("div",{className:"bg-white p-4 rounded-lg text-center",children:[(0,Da.jsx)("div",{className:"text-xs text-gray-500 uppercase mb-1",children:"Transcription"}),(0,Da.jsxs)("div",{className:"text-xl font-bold text-gray-900",children:["$",k.cost_breakdown.transcription]})]}),(0,Da.jsxs)("div",{className:"bg-white p-4 rounded-lg text-center",children:[(0,Da.jsx)("div",{className:"text-xs text-gray-500 uppercase mb-1",children:"Analysis"}),(0,Da.jsxs)("div",{className:"text-xl font-bold text-gray-900",children:["$",k.cost_breakdown.analysis]})]}),(0,Da.jsxs)("div",{className:"bg-white p-4 rounded-lg text-center",children:[(0,Da.jsx)("div",{className:"text-xs text-gray-500 uppercase mb-1",children:"Knowledge Search"}),(0,Da.jsxs)("div",{className:"text-xl font-bold text-gray-900",children:["$",k.cost_breakdown.knowledge_search]})]})]})]}),(0,Da.jsxs)("div",{children:[(0,Da.jsx)("h3",{className:"text-base font-semibold text-gray-900 mb-4",children:"\ud83d\udcac Full Transcript"}),(0,Da.jsx)("div",{className:"space-y-5",children:0===_.length?(0,Da.jsxs)("div",{className:"bg-gray-50 p-8 rounded-lg text-center",children:[(0,Da.jsx)("p",{className:"text-gray-500",children:"No transcript available for this call"}),(0,Da.jsx)("p",{className:"text-sm text-gray-400 mt-2",children:"Transcription may not have been generated yet"})]}):_.map((e,t)=>{return(0,Da.jsxs)("div",{className:"flex gap-4 p-4 bg-gray-50 rounded-lg border-l-4 ".concat("agent"===e.speaker?"border-green-500":"border-red-500"),children:[(0,Da.jsxs)("div",{className:"min-w-[120px]",children:[(0,Da.jsx)("div",{className:"text-xs font-semibold text-gray-500 uppercase mb-1",children:e.speaker}),(0,Da.jsx)("div",{className:"text-xs text-gray-400",children:e.timestamp?new Date(e.timestamp).toLocaleTimeString():e.created_at?fC.formatDate(e.created_at,"time"):"N/A"})]}),(0,Da.jsxs)("div",{className:"flex-1",children:[(0,Da.jsx)("p",{className:"text-sm text-gray-900 mb-3 leading-relaxed",children:e.original_message}),(0,Da.jsxs)("div",{className:"flex flex-wrap gap-2",children:[e.sentiment&&(0,Da.jsxs)("span",{className:"px-2 py-1 text-xs font-semibold bg-white border border-green-200 text-green-700 rounded-full",children:[(r=e.sentiment,{positive:"\ud83d\ude0a",negative:"\ud83d\ude1e",neutral:"\ud83d\ude10",mixed:"\ud83d\ude15"}[r]||"\ud83d\ude10")," ",e.sentiment]}),e.primary_intent&&(0,Da.jsxs)("span",{className:"px-2 py-1 text-xs font-semibold bg-white border border-gray-200 text-gray-700 rounded-full",children:["\ud83c\udfaf ",e.primary_intent]}),e.keywords&&e.keywords.length>0&&(0,Da.jsxs)("span",{className:"px-2 py-1 text-xs font-semibold bg-white border border-gray-200 text-gray-700 rounded-full",children:["\ud83d\udd11 ",e.keywords.slice(0,3).join(", ")]})]})]})]},t);var r})})]})]})})]})})]})},yC=()=>{var e,t,r,n,s,i,o;const[l,c]=(0,a.useState)(!0),[d,u]=(0,a.useState)(null),[p,m]=(0,a.useState)(null),[h,f]=(0,a.useState)({page:1,limit:20,total:0}),[g,x]=(0,a.useState)({date_from:new Date(Date.now()-6048e5).toISOString().split("T")[0],date_to:(new Date).toISOString().split("T")[0],agent_id:"",status:"",sentiment:"",search:""}),[y,v]=(0,a.useState)([]),[b,j]=(0,a.useState)(null),[w,N]=(0,a.useState)(!1),[k,S]=(0,a.useState)(null),[_,C]=(0,a.useState)([]),[A,O]=(0,a.useState)(!1);(0,a.useEffect)(()=>{(async()=>{try{const e=await fC.getAgentsList();v(e.data.data.agents||[])}catch(e){console.error("Failed to fetch agents:",e)}})()},[]),(0,a.useEffect)(()=>{P()},[h.page]);const P=async()=>{c(!0),u(null);try{const e=qe({page:h.page,limit:h.limit},g);Object.keys(e).forEach(t=>{e[t]||delete e[t]});const t=await fC.getChatReport(e);m(t.data.data),f(e=>qe(qe({},e),{},{total:t.data.data.pagination.total,pages:t.data.data.pagination.pages}))}catch(r){var e,t;console.error("Failed to fetch chats:",r),u((null===(e=r.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.message)||"Failed to load chat sessions")}finally{c(!1)}},E=async e=>{j(e),N(!0),O(!0),S(null),C([]);try{const r=await fC.getChatSessionDetails(e.id);S(r.data.data);try{const t=await fC.getChatMessages(e.id);console.log("Messages response:",t.data),C(t.data.data.messages||[])}catch(t){console.error("Failed to fetch messages:",t),C([])}}catch(r){console.error("Failed to fetch chat details:",r),S(null),C([])}finally{O(!1)}},T=e=>{let{status:t}=e;const r={ended:"bg-green-100 text-green-800",active:"bg-blue-100 text-blue-800",expired:"bg-gray-100 text-gray-800"};return(0,Da.jsx)("span",{className:"px-3 py-1 rounded-full text-xs font-semibold ".concat(r[t]||r.expired),children:t||"Unknown"})},I=e=>{let{sentiment:t}=e;const r={positive:"bg-green-100 text-green-800",negative:"bg-red-100 text-red-800",neutral:"bg-gray-100 text-gray-800",mixed:"bg-yellow-100 text-yellow-800"};return(0,Da.jsx)("span",{className:"px-3 py-1 rounded-full text-xs font-semibold ".concat(r[t]||r.neutral),children:t||"N/A"})},M=(null===p||void 0===p?void 0:p.stats)||{},D=(null===p||void 0===p?void 0:p.chats)||[];return(0,Da.jsxs)("div",{className:"space-y-6",children:[(0,Da.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,Da.jsxs)("div",{className:"mb-4",children:[(0,Da.jsxs)("div",{className:"text-sm text-gray-500 mb-2",children:[(0,Da.jsx)("a",{href:"/analytics",className:"text-primary-600 hover:text-primary-700",children:"Dashboard"})," ","/"," ","Chat Report"]}),(0,Da.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"\ud83d\udcac Chat Sessions Report"})]}),(0,Da.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-7 gap-3 items-end",children:[(0,Da.jsxs)("div",{children:[(0,Da.jsx)("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"From Date"}),(0,Da.jsx)("input",{type:"date",value:g.date_from,onChange:e=>x(t=>qe(qe({},t),{},{date_from:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent text-sm"})]}),(0,Da.jsxs)("div",{children:[(0,Da.jsx)("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"To Date"}),(0,Da.jsx)("input",{type:"date",value:g.date_to,onChange:e=>x(t=>qe(qe({},t),{},{date_to:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent text-sm"})]}),(0,Da.jsxs)("div",{className:"md:col-span-2",children:[(0,Da.jsx)("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Search"}),(0,Da.jsx)("input",{type:"text",placeholder:"Session ID, name...",value:g.search,onChange:e=>x(t=>qe(qe({},t),{},{search:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent text-sm"})]}),(0,Da.jsxs)("div",{children:[(0,Da.jsx)("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Status"}),(0,Da.jsxs)("select",{value:g.status,onChange:e=>x(t=>qe(qe({},t),{},{status:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent text-sm",children:[(0,Da.jsx)("option",{value:"",children:"All Status"}),(0,Da.jsx)("option",{value:"ended",children:"Ended"}),(0,Da.jsx)("option",{value:"active",children:"Active"}),(0,Da.jsx)("option",{value:"expired",children:"Expired"})]})]}),(0,Da.jsxs)("div",{children:[(0,Da.jsx)("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Sentiment"}),(0,Da.jsxs)("select",{value:g.sentiment,onChange:e=>x(t=>qe(qe({},t),{},{sentiment:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent text-sm",children:[(0,Da.jsx)("option",{value:"",children:"All Sentiments"}),(0,Da.jsx)("option",{value:"positive",children:"Positive"}),(0,Da.jsx)("option",{value:"negative",children:"Negative"}),(0,Da.jsx)("option",{value:"neutral",children:"Neutral"}),(0,Da.jsx)("option",{value:"mixed",children:"Mixed"})]})]}),(0,Da.jsxs)("div",{children:[(0,Da.jsx)("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Agent"}),(0,Da.jsxs)("select",{value:g.agent_id,onChange:e=>x(t=>qe(qe({},t),{},{agent_id:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent text-sm",children:[(0,Da.jsx)("option",{value:"",children:"All Agents"}),y.map(e=>(0,Da.jsx)("option",{value:e.id,children:e.name},e.id))]})]})]}),(0,Da.jsxs)("div",{className:"flex gap-3 mt-4",children:[(0,Da.jsx)("button",{onClick:()=>{f(e=>qe(qe({},e),{},{page:1})),P()},className:"px-6 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 font-semibold",children:"Apply Filters"}),(0,Da.jsxs)("button",{onClick:async()=>{try{const e=qe({},g);Object.keys(e).forEach(t=>{e[t]||delete e[t]});const t=await fC.exportChatReport(e,"csv"),r=window.URL.createObjectURL(new Blob([t.data])),n=document.createElement("a");n.href=r,n.setAttribute("download","chat_sessions_".concat(Date.now(),".csv")),document.body.appendChild(n),n.click(),n.remove()}catch(e){console.error("Failed to export:",e),alert("Failed to export report")}},className:"px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 font-semibold flex items-center gap-2",children:[(0,Da.jsx)(Si,{className:"w-4 h-4"}),"Export CSV"]})]})]}),(0,Da.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[(0,Da.jsxs)("div",{className:"bg-white rounded-lg shadow p-6 text-center",children:[(0,Da.jsx)("div",{className:"text-xs text-gray-500 uppercase mb-2",children:"Total Chats"}),(0,Da.jsx)("div",{className:"text-2xl font-bold text-gray-900",children:(null===(e=M.total_chats)||void 0===e?void 0:e.toLocaleString())||0})]}),(0,Da.jsxs)("div",{className:"bg-white rounded-lg shadow p-6 text-center",children:[(0,Da.jsx)("div",{className:"text-xs text-gray-500 uppercase mb-2",children:"Avg Messages"}),(0,Da.jsx)("div",{className:"text-2xl font-bold text-gray-900",children:M.avg_messages?M.avg_messages.toFixed(1):"0.0"})]}),(0,Da.jsxs)("div",{className:"bg-white rounded-lg shadow p-6 text-center",children:[(0,Da.jsx)("div",{className:"text-xs text-gray-500 uppercase mb-2",children:"Total Messages"}),(0,Da.jsx)("div",{className:"text-2xl font-bold text-gray-900",children:(null===(t=M.total_messages)||void 0===t?void 0:t.toLocaleString())||0})]}),(0,Da.jsxs)("div",{className:"bg-white rounded-lg shadow p-6 text-center",children:[(0,Da.jsx)("div",{className:"text-xs text-gray-500 uppercase mb-2",children:"Success Rate"}),(0,Da.jsxs)("div",{className:"text-2xl font-bold text-gray-900",children:[M.success_rate||0,"%"]})]}),(0,Da.jsxs)("div",{className:"bg-white rounded-lg shadow p-6 text-center",children:[(0,Da.jsx)("div",{className:"text-xs text-gray-500 uppercase mb-2",children:"Avg Satisfaction"}),(0,Da.jsxs)("div",{className:"text-2xl font-bold text-gray-900",children:[M.avg_satisfaction||0,"%"]})]})]}),(0,Da.jsxs)("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[(0,Da.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,Da.jsxs)("h2",{className:"text-lg font-semibold text-gray-900",children:["Chat Sessions (",(null===(r=M.total_chats)||void 0===r?void 0:r.toLocaleString())||0," total)"]})}),l?(0,Da.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,Da.jsxs)("div",{className:"text-center",children:[(0,Da.jsx)(rs,{className:"w-12 h-12 text-primary-600 mx-auto mb-4 animate-pulse"}),(0,Da.jsx)("p",{className:"text-gray-600",children:"Loading chat sessions..."})]})}):d?(0,Da.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,Da.jsxs)("div",{className:"text-center",children:[(0,Da.jsx)(gi,{className:"w-12 h-12 text-red-600 mx-auto mb-4"}),(0,Da.jsx)("p",{className:"text-red-600",children:d})]})}):0===D.length?(0,Da.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,Da.jsxs)("div",{className:"text-center",children:[(0,Da.jsx)(rs,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),(0,Da.jsx)("p",{className:"text-gray-600",children:"No chat sessions found"})]})}):(0,Da.jsxs)(Da.Fragment,{children:[(0,Da.jsx)("div",{className:"overflow-x-auto",children:(0,Da.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,Da.jsx)("thead",{className:"bg-gray-50",children:(0,Da.jsxs)("tr",{children:[(0,Da.jsx)("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-500 uppercase",children:"Date/Time"}),(0,Da.jsx)("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-500 uppercase",children:"Session Name"}),(0,Da.jsx)("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-500 uppercase",children:"Agent"}),(0,Da.jsx)("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-500 uppercase",children:"Messages"}),(0,Da.jsx)("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-500 uppercase",children:"Status"}),(0,Da.jsx)("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-500 uppercase",children:"Sentiment"}),(0,Da.jsx)("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-500 uppercase",children:"Intent"}),(0,Da.jsx)("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-500 uppercase",children:"Cost"}),(0,Da.jsx)("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-500 uppercase",children:"Actions"})]})}),(0,Da.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:D.map(e=>(0,Da.jsxs)("tr",{onClick:()=>E(e),className:"hover:bg-gray-50 cursor-pointer transition-colors",children:[(0,Da.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:fC.formatDate(e.start_time,"datetime")}),(0,Da.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.session_name||e.id.substring(0,12)+"..."}),(0,Da.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.agent_name||"N/A"}),(0,Da.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.total_messages||0}),(0,Da.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,Da.jsx)(T,{status:e.status})}),(0,Da.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,Da.jsx)(I,{sentiment:e.overall_sentiment})}),(0,Da.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.primary_intent||"N/A"}),(0,Da.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:fC.formatCurrency(e.total_cost)}),(0,Da.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:(0,Da.jsx)("button",{onClick:t=>{t.stopPropagation(),E(e)},className:"px-3 py-1 bg-primary-600 text-white rounded text-xs font-semibold hover:bg-primary-700",children:"View"})})]},e.id))})]})}),(0,Da.jsxs)("div",{className:"px-6 py-4 bg-white border-t border-gray-200 flex items-center justify-center gap-2",children:[(0,Da.jsx)("button",{onClick:()=>f(e=>qe(qe({},e),{},{page:Math.max(1,e.page-1)})),disabled:1===h.page,className:"px-4 py-2 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),[...Array(Math.min(5,h.pages))].map((e,t)=>{const r=t+1;return(0,Da.jsx)("button",{onClick:()=>f(e=>qe(qe({},e),{},{page:r})),className:"px-4 py-2 border rounded-lg text-sm font-medium ".concat(h.page===r?"bg-primary-600 text-white border-primary-600":"border-gray-300 text-gray-700 hover:bg-gray-50"),children:r},r)}),(0,Da.jsx)("button",{onClick:()=>f(e=>qe(qe({},e),{},{page:Math.min(e.pages,e.page+1)})),disabled:h.page===h.pages,className:"px-4 py-2 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]})]})]}),w&&(0,Da.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4 overflow-y-auto",children:(0,Da.jsxs)("div",{className:"bg-white rounded-xl shadow-2xl max-w-5xl w-full max-h-[90vh] overflow-y-auto",children:[(0,Da.jsxs)("div",{className:"px-8 py-6 border-b border-gray-200 flex items-center justify-between sticky top-0 bg-white z-10",children:[(0,Da.jsxs)("h2",{className:"text-2xl font-semibold text-gray-900",children:["\ud83d\udcac Chat Session - ",(null===b||void 0===b?void 0:b.session_name)||(null===b||void 0===b||null===(n=b.id)||void 0===n?void 0:n.substring(0,12))+"..."]}),(0,Da.jsx)("button",{onClick:()=>N(!1),className:"text-gray-400 hover:text-gray-600",children:(0,Da.jsx)(ss,{className:"w-6 h-6"})})]}),(0,Da.jsx)("div",{className:"px-8 py-6",children:A?(0,Da.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,Da.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):(0,Da.jsxs)(Da.Fragment,{children:[(0,Da.jsxs)("div",{className:"grid grid-cols-3 gap-5 mb-8",children:[(0,Da.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,Da.jsx)("div",{className:"text-xs text-gray-500 uppercase mb-1",children:"Start Time"}),(0,Da.jsx)("div",{className:"text-base font-semibold text-gray-900",children:fC.formatDate(null===b||void 0===b?void 0:b.start_time,"datetime")})]}),(0,Da.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,Da.jsx)("div",{className:"text-xs text-gray-500 uppercase mb-1",children:"End Time"}),(0,Da.jsx)("div",{className:"text-base font-semibold text-gray-900",children:null!==b&&void 0!==b&&b.end_time?fC.formatDate(b.end_time,"datetime"):"Active"})]}),(0,Da.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,Da.jsx)("div",{className:"text-xs text-gray-500 uppercase mb-1",children:"Agent"}),(0,Da.jsx)("div",{className:"text-base font-semibold text-gray-900",children:(null===b||void 0===b?void 0:b.agent_name)||"N/A"})]}),(0,Da.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,Da.jsx)("div",{className:"text-xs text-gray-500 uppercase mb-1",children:"Total Messages"}),(0,Da.jsx)("div",{className:"text-base font-semibold text-gray-900",children:(null===b||void 0===b?void 0:b.total_messages)||0})]}),(0,Da.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,Da.jsx)("div",{className:"text-xs text-gray-500 uppercase mb-1",children:"Status"}),(0,Da.jsx)("div",{className:"text-base font-semibold",children:(0,Da.jsx)(T,{status:null===b||void 0===b?void 0:b.status})})]}),(0,Da.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,Da.jsx)("div",{className:"text-xs text-gray-500 uppercase mb-1",children:"Total Cost"}),(0,Da.jsx)("div",{className:"text-base font-semibold text-gray-900",children:fC.formatCurrency(null===b||void 0===b?void 0:b.total_cost)})]})]}),(null===k||void 0===k?void 0:k.analytics)&&(0,Da.jsxs)("div",{className:"bg-gray-50 p-6 rounded-lg mb-8",children:[(0,Da.jsx)("h3",{className:"text-base font-semibold text-gray-900 mb-4",children:"\ud83d\udcca Session Analytics"}),(0,Da.jsxs)("div",{className:"grid grid-cols-4 gap-4",children:[(0,Da.jsxs)("div",{className:"bg-white p-4 rounded-lg text-center",children:[(0,Da.jsx)("div",{className:"text-xs text-gray-500 uppercase mb-1",children:"Overall Sentiment"}),(0,Da.jsx)("div",{className:"text-xl font-bold text-green-600",children:k.analytics.overall_sentiment||"N/A"})]}),(0,Da.jsxs)("div",{className:"bg-white p-4 rounded-lg text-center",children:[(0,Da.jsx)("div",{className:"text-xs text-gray-500 uppercase mb-1",children:"Sentiment Score"}),(0,Da.jsx)("div",{className:"text-xl font-bold text-gray-900",children:k.analytics.overall_sentiment_score?parseFloat(k.analytics.overall_sentiment_score).toFixed(2):"N/A"})]}),(0,Da.jsxs)("div",{className:"bg-white p-4 rounded-lg text-center",children:[(0,Da.jsx)("div",{className:"text-xs text-gray-500 uppercase mb-1",children:"Primary Intent"}),(0,Da.jsx)("div",{className:"text-sm font-bold text-gray-900",children:(null===(s=k.analytics.primary_intents)||void 0===s?void 0:s[0])||"N/A"})]}),(0,Da.jsxs)("div",{className:"bg-white p-4 rounded-lg text-center",children:[(0,Da.jsx)("div",{className:"text-xs text-gray-500 uppercase mb-1",children:"Customer Satisfaction"}),(0,Da.jsx)("div",{className:"text-xl font-bold text-green-600",children:k.analytics.customer_satisfaction_indicator||"N/A"})]}),(0,Da.jsxs)("div",{className:"bg-white p-4 rounded-lg text-center",children:[(0,Da.jsx)("div",{className:"text-xs text-gray-500 uppercase mb-1",children:"Issue Resolved"}),(0,Da.jsx)("div",{className:"text-xl font-bold text-green-600",children:k.analytics.issue_resolved?"\u2713 Yes":"\u2717 No"})]}),(0,Da.jsxs)("div",{className:"bg-white p-4 rounded-lg text-center",children:[(0,Da.jsx)("div",{className:"text-xs text-gray-500 uppercase mb-1",children:"Profanity"}),(0,Da.jsx)("div",{className:"text-xl font-bold text-gray-900",children:k.analytics.profanity_incidents||0})]}),(0,Da.jsxs)("div",{className:"bg-white p-4 rounded-lg text-center",children:[(0,Da.jsx)("div",{className:"text-xs text-gray-500 uppercase mb-1",children:"Total Exchanges"}),(0,Da.jsx)("div",{className:"text-xl font-bold text-gray-900",children:k.analytics.total_exchanges||_.length})]}),(0,Da.jsxs)("div",{className:"bg-white p-4 rounded-lg text-center",children:[(0,Da.jsx)("div",{className:"text-xs text-gray-500 uppercase mb-1",children:"Language"}),(0,Da.jsx)("div",{className:"text-xl font-bold text-gray-900",children:(null===(i=k.analytics.languages_detected)||void 0===i||null===(o=i[0])||void 0===o?void 0:o.toUpperCase())||"EN"})]})]})]}),(null===k||void 0===k?void 0:k.cost_breakdown)&&(0,Da.jsxs)("div",{className:"bg-gray-50 p-6 rounded-lg mb-8",children:[(0,Da.jsx)("h3",{className:"text-base font-semibold text-gray-900 mb-4",children:"\ud83d\udcb0 Cost Breakdown"}),(0,Da.jsxs)("div",{className:"grid grid-cols-4 gap-4",children:[(0,Da.jsxs)("div",{className:"bg-white p-4 rounded-lg text-center",children:[(0,Da.jsx)("div",{className:"text-xs text-gray-500 uppercase mb-1",children:"LLM Completion"}),(0,Da.jsxs)("div",{className:"text-xl font-bold text-gray-900",children:["$",k.cost_breakdown.llm_completion]})]}),(0,Da.jsxs)("div",{className:"bg-white p-4 rounded-lg text-center",children:[(0,Da.jsx)("div",{className:"text-xs text-gray-500 uppercase mb-1",children:"Analysis"}),(0,Da.jsxs)("div",{className:"text-xl font-bold text-gray-900",children:["$",k.cost_breakdown.analysis]})]}),(0,Da.jsxs)("div",{className:"bg-white p-4 rounded-lg text-center",children:[(0,Da.jsx)("div",{className:"text-xs text-gray-500 uppercase mb-1",children:"Knowledge Search"}),(0,Da.jsxs)("div",{className:"text-xl font-bold text-gray-900",children:["$",k.cost_breakdown.knowledge_search]})]}),(0,Da.jsxs)("div",{className:"bg-white p-4 rounded-lg text-center",children:[(0,Da.jsx)("div",{className:"text-xs text-gray-500 uppercase mb-1",children:"Image Processing"}),(0,Da.jsxs)("div",{className:"text-xl font-bold text-gray-900",children:["$",k.cost_breakdown.image_processing]})]})]})]}),(0,Da.jsxs)("div",{children:[(0,Da.jsx)("h3",{className:"text-base font-semibold text-gray-900 mb-4",children:"\ud83d\udcac Chat Messages"}),(0,Da.jsx)("div",{className:"space-y-5",children:0===_.length?(0,Da.jsxs)("div",{className:"bg-gray-50 p-8 rounded-lg text-center",children:[(0,Da.jsx)("p",{className:"text-gray-500",children:"No messages available for this session"}),(0,Da.jsx)("p",{className:"text-sm text-gray-400 mt-2",children:"Messages may not have been loaded yet"})]}):_.map((e,t)=>(0,Da.jsxs)("div",{className:"flex gap-4 p-4 bg-gray-50 rounded-lg border-l-4 ".concat("assistant"===e.role?"border-green-500":"border-blue-500"),children:[(0,Da.jsxs)("div",{className:"min-w-[120px]",children:[(0,Da.jsx)("div",{className:"text-xs font-semibold text-gray-500 uppercase mb-1",children:"assistant"===e.role?"Agent":"User"}),(0,Da.jsx)("div",{className:"text-xs text-gray-400",children:fC.formatDate(e.created_at,"time")})]}),(0,Da.jsxs)("div",{className:"flex-1",children:[(0,Da.jsx)("div",{className:"text-sm text-gray-900 mb-3 leading-relaxed",dangerouslySetInnerHTML:{__html:e.content_html||e.content}}),(0,Da.jsxs)("div",{className:"flex flex-wrap gap-2",children:[e.sources&&e.sources.length>0&&(0,Da.jsxs)("span",{className:"px-2 py-1 text-xs font-semibold bg-white border border-blue-200 text-blue-700 rounded-full",children:["\ud83d\udcda ",e.sources.length," sources"]}),e.images&&e.images.length>0&&(0,Da.jsxs)("span",{className:"px-2 py-1 text-xs font-semibold bg-white border border-purple-200 text-purple-700 rounded-full",children:["\ud83d\uddbc\ufe0f ",e.images.length," images"]}),e.products&&e.products.length>0&&(0,Da.jsxs)("span",{className:"px-2 py-1 text-xs font-semibold bg-white border border-orange-200 text-orange-700 rounded-full",children:["\ud83d\udecd\ufe0f ",e.products.length," products"]}),e.cost&&parseFloat(e.cost)>0&&(0,Da.jsxs)("span",{className:"px-2 py-1 text-xs font-semibold bg-white border border-gray-200 text-gray-700 rounded-full",children:["\ud83d\udcb5 $",parseFloat(e.cost).toFixed(4)]})]})]})]},t))})]})]})})]})})]})},vC=()=>{var e,t,r;const[n,s]=(0,a.useState)(!0),[i,o]=(0,a.useState)(null),[l,c]=(0,a.useState)([]),[d,u]=(0,a.useState)([]),[p,m]=(0,a.useState)(null),[h,f]=(0,a.useState)([]),[g,x]=(0,a.useState)([]),[y,v]=(0,a.useState)({date_from:new Date(Date.now()-2592e6).toISOString().split("T")[0],date_to:(new Date).toISOString().split("T")[0],channel:"",agent_id:""}),[b,j]=(0,a.useState)([]);(0,a.useEffect)(()=>{(async()=>{try{const e=await fC.getAgentsList();j(e.data.data.agents||[])}catch(e){console.error("Failed to fetch agents:",e)}})()},[]),(0,a.useEffect)(()=>{w()},[]);const w=async()=>{s(!0),o(null);try{const e=qe({},y);Object.keys(e).forEach(t=>{e[t]||delete e[t]});const[t,r,n,a,s]=await Promise.all([fC.getSentimentTrends(e),fC.getTopIntents(qe(qe({},e),{},{limit:5})),fC.getProfanityStats(e),fC.getTopKeywords(qe(qe({},e),{},{limit:15})),fC.getLanguageDistribution(e)]);c(t.data.data.trends||[]),u(r.data.data.intents||[]),m(n.data.data||{}),f(a.data.data.keywords||[]),x(s.data.data.distribution||[])}catch(r){var e,t;console.error("Failed to fetch analytics:",r),o((null===(e=r.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.message)||"Failed to load analytics")}finally{s(!1)}},N=["linear-gradient(135deg, #e74c3c, #c0392b)","linear-gradient(135deg, #3498db, #2980b9)","linear-gradient(135deg, #f39c12, #e67e22)","linear-gradient(135deg, #9b59b6, #8e44ad)","linear-gradient(135deg, #1abc9c, #16a085)","linear-gradient(135deg, #34495e, #2c3e50)"];return n&&0===l.length?(0,Da.jsx)("div",{className:"flex items-center justify-center h-screen",children:(0,Da.jsxs)("div",{className:"text-center",children:[(0,Da.jsx)(Xa,{className:"w-16 h-16 text-primary-600 mx-auto mb-4 animate-pulse"}),(0,Da.jsx)("p",{className:"text-lg text-gray-600",children:"Loading advanced analytics..."})]})}):(0,Da.jsxs)("div",{className:"space-y-6",children:[(0,Da.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,Da.jsxs)("div",{className:"mb-4",children:[(0,Da.jsxs)("div",{className:"text-sm text-gray-500 mb-2",children:[(0,Da.jsx)("a",{href:"/analytics",className:"text-primary-600 hover:text-primary-700",children:"Dashboard"})," ","/"," ","Advanced Analytics"]}),(0,Da.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"\ud83d\udd2c Advanced Analytics"})]}),(0,Da.jsxs)("div",{className:"flex flex-wrap gap-3 items-center",children:[(0,Da.jsx)("input",{type:"date",value:y.date_from,onChange:e=>v(t=>qe(qe({},t),{},{date_from:e.target.value})),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent text-sm"}),(0,Da.jsx)("span",{className:"text-gray-500",children:"to"}),(0,Da.jsx)("input",{type:"date",value:y.date_to,onChange:e=>v(t=>qe(qe({},t),{},{date_to:e.target.value})),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent text-sm"}),(0,Da.jsxs)("select",{value:y.channel,onChange:e=>v(t=>qe(qe({},t),{},{channel:e.target.value})),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent text-sm",children:[(0,Da.jsx)("option",{value:"",children:"All Channels"}),(0,Da.jsx)("option",{value:"voice",children:"Voice Calls"}),(0,Da.jsx)("option",{value:"chat",children:"Chat Messages"})]}),(0,Da.jsxs)("select",{value:y.agent_id,onChange:e=>v(t=>qe(qe({},t),{},{agent_id:e.target.value})),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent text-sm",children:[(0,Da.jsx)("option",{value:"",children:"All Agents"}),b.map(e=>(0,Da.jsx)("option",{value:e.id,children:e.name},e.id))]}),(0,Da.jsx)("button",{onClick:()=>{w()},className:"px-6 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 font-semibold",children:"Apply Filters"}),(0,Da.jsxs)("button",{className:"px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 font-semibold flex items-center gap-2",children:[(0,Da.jsx)(Si,{className:"w-4 h-4"}),"Export Report"]})]})]}),i&&(0,Da.jsx)("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:i}),(0,Da.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,Da.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4 pb-4 border-b border-gray-200",children:"\ud83d\udcc8 Sentiment Trends Over Time"}),(0,Da.jsx)(Tl,{width:"100%",height:300,children:(0,Da.jsxs)(Y_,{data:l,children:[(0,Da.jsx)(pC,{strokeDasharray:"3 3"}),(0,Da.jsx)(R_,{dataKey:"date",tickFormatter:e=>new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric"})}),(0,Da.jsx)(K_,{}),(0,Da.jsx)(Mc,{labelFormatter:e=>new Date(e).toLocaleDateString()}),(0,Da.jsx)(lu,{}),(0,Da.jsx)(t_,{type:"monotone",dataKey:"positive",stroke:"#2ecc71",strokeWidth:2,name:"Positive"}),(0,Da.jsx)(t_,{type:"monotone",dataKey:"neutral",stroke:"#95a5a6",strokeWidth:2,name:"Neutral"}),(0,Da.jsx)(t_,{type:"monotone",dataKey:"negative",stroke:"#e74c3c",strokeWidth:2,name:"Negative"}),(0,Da.jsx)(t_,{type:"monotone",dataKey:"mixed",stroke:"#f39c12",strokeWidth:2,name:"Mixed"})]})})]}),(0,Da.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,Da.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,Da.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4 pb-4 border-b border-gray-200",children:"\ud83d\udcca Daily Sentiment Distribution"}),(0,Da.jsx)("div",{className:"space-y-5",children:l.slice(0,7).reverse().map((e,t)=>(0,Da.jsxs)("div",{className:"flex items-center gap-4",children:[(0,Da.jsx)("div",{className:"min-w-[80px] text-sm font-semibold text-gray-500",children:new Date(e.date).toLocaleDateString("en-US",{month:"short",day:"numeric"})}),(0,Da.jsx)("div",{className:"flex-1 h-10 bg-gray-100 rounded-lg overflow-hidden",children:(0,Da.jsxs)("div",{className:"h-full flex",children:[parseFloat(e.positive_pct)>0&&(0,Da.jsx)("div",{className:"bg-green-500 flex items-center justify-center text-white text-xs font-semibold hover:brightness-110 transition-all",style:{width:"".concat(e.positive_pct,"%")},children:parseFloat(e.positive_pct)>10&&"".concat(e.positive_pct,"%")}),parseFloat(e.neutral_pct)>0&&(0,Da.jsx)("div",{className:"bg-gray-400 flex items-center justify-center text-white text-xs font-semibold hover:brightness-110 transition-all",style:{width:"".concat(e.neutral_pct,"%")},children:parseFloat(e.neutral_pct)>10&&"".concat(e.neutral_pct,"%")}),parseFloat(e.negative_pct)>0&&(0,Da.jsx)("div",{className:"bg-red-500 flex items-center justify-center text-white text-xs font-semibold hover:brightness-110 transition-all",style:{width:"".concat(e.negative_pct,"%")},children:parseFloat(e.negative_pct)>10&&"".concat(e.negative_pct,"%")}),parseFloat(e.mixed_pct)>0&&(0,Da.jsx)("div",{className:"bg-orange-500 flex items-center justify-center text-white text-xs font-semibold hover:brightness-110 transition-all",style:{width:"".concat(e.mixed_pct,"%")},children:parseFloat(e.mixed_pct)>10&&"".concat(e.mixed_pct,"%")})]})})]},t))})]}),(0,Da.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,Da.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4 pb-4 border-b border-gray-200",children:"\ud83c\udfaf Top Customer Intents"}),(0,Da.jsx)("ul",{className:"space-y-3",children:d.map((e,t)=>{return(0,Da.jsxs)("li",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg hover:bg-gray-100 transition-all hover:translate-x-1",children:[(0,Da.jsxs)("div",{className:"flex items-center gap-4",children:[(0,Da.jsx)("div",{className:"w-10 h-10 rounded-lg bg-white flex items-center justify-center text-2xl",children:(r=e.intent,{"Product Inquiry":"\ud83d\udecd\ufe0f","Support Request":"\ud83c\udd98","Order Status":"\ud83d\udce6",Complaint:"\ud83d\ude20","Return/Refund":"\u21a9\ufe0f",Billing:"\ud83d\udcb3","Technical Support":"\ud83d\udd27",Account:"\ud83d\udc64","General Inquiry":"\u2753"}[r]||"\ud83d\udcac")}),(0,Da.jsxs)("div",{children:[(0,Da.jsx)("div",{className:"text-sm font-semibold text-gray-900",children:e.intent}),(0,Da.jsx)("div",{className:"text-xs text-gray-500",children:"Customer requests"})]})]}),(0,Da.jsxs)("div",{className:"text-right",children:[(0,Da.jsx)("div",{className:"text-xl font-bold text-gray-900",children:e.count}),(0,Da.jsxs)("div",{className:"text-sm text-gray-500",children:[e.percentage,"%"]})]})]},t);var r})})]})]}),p&&p.total_incidents>0&&(0,Da.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,Da.jsxs)("div",{className:"bg-red-50 border-l-4 border-red-500 p-6 rounded-lg",children:[(0,Da.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,Da.jsxs)("h2",{className:"text-lg font-semibold text-red-800 flex items-center gap-2",children:[(0,Da.jsx)(ro,{className:"w-5 h-5"}),"Profanity Incidents Detected"]}),(0,Da.jsxs)("div",{className:"text-3xl font-bold text-red-600",children:[p.total_incidents," Total"]})]}),(0,Da.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-6 gap-4",children:[(0,Da.jsxs)("div",{className:"bg-white p-4 rounded-lg text-center",children:[(0,Da.jsx)("div",{className:"text-xs text-gray-500 uppercase mb-1",children:"Sessions"}),(0,Da.jsx)("div",{className:"text-xl font-bold text-red-600",children:p.sessions_with_profanity})]}),(0,Da.jsxs)("div",{className:"bg-white p-4 rounded-lg text-center",children:[(0,Da.jsx)("div",{className:"text-xs text-gray-500 uppercase mb-1",children:"Severity: Low"}),(0,Da.jsx)("div",{className:"text-xl font-bold text-red-600",children:(null===(e=p.by_severity)||void 0===e?void 0:e.low)||0})]}),(0,Da.jsxs)("div",{className:"bg-white p-4 rounded-lg text-center",children:[(0,Da.jsx)("div",{className:"text-xs text-gray-500 uppercase mb-1",children:"Severity: Medium"}),(0,Da.jsx)("div",{className:"text-xl font-bold text-red-600",children:(null===(t=p.by_severity)||void 0===t?void 0:t.medium)||0})]}),(0,Da.jsxs)("div",{className:"bg-white p-4 rounded-lg text-center",children:[(0,Da.jsx)("div",{className:"text-xs text-gray-500 uppercase mb-1",children:"Severity: High"}),(0,Da.jsx)("div",{className:"text-xl font-bold text-red-600",children:(null===(r=p.by_severity)||void 0===r?void 0:r.high)||0})]}),(0,Da.jsxs)("div",{className:"bg-white p-4 rounded-lg text-center",children:[(0,Da.jsx)("div",{className:"text-xs text-gray-500 uppercase mb-1",children:"Avg Score"}),(0,Da.jsx)("div",{className:"text-xl font-bold text-red-600",children:p.avg_score})]})]})]})}),(0,Da.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,Da.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,Da.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4 pb-4 border-b border-gray-200",children:"\ud83d\udd11 Top Keywords"}),(0,Da.jsx)("div",{className:"flex flex-wrap gap-3",children:h.map((e,t)=>(0,Da.jsxs)("div",{className:"px-4 py-2 rounded-full bg-gradient-to-r from-purple-600 to-blue-600 text-white font-semibold flex items-center gap-2 hover:shadow-lg hover:-translate-y-1 transition-all cursor-pointer",style:{fontSize:"".concat(14-.5*t,"px"),opacity:1-.03*t},children:[(0,Da.jsx)("span",{children:e.keyword}),(0,Da.jsx)("span",{className:"bg-white/30 px-2 py-0.5 rounded-full text-xs",children:e.count})]},t))})]}),(0,Da.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,Da.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4 pb-4 border-b border-gray-200",children:"\ud83d\udcac Topic Heatmap"}),(0,Da.jsx)("div",{className:"grid grid-cols-3 gap-3",children:d.slice(0,6).map((e,t)=>(0,Da.jsxs)("div",{className:"aspect-square rounded-lg text-white font-semibold flex flex-col items-center justify-center p-3 hover:scale-105 transition-all cursor-pointer",style:{background:N[t]},children:[(0,Da.jsx)("div",{className:"text-sm text-center mb-2",children:e.intent.split(" ")[0]}),(0,Da.jsx)("div",{className:"text-2xl font-bold",children:e.count})]},t))})]})]}),(0,Da.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,Da.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,Da.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4 pb-4 border-b border-gray-200",children:"\ud83c\udf0d Language Distribution"}),(0,Da.jsx)("div",{className:"space-y-5",children:g.map((e,t)=>{return(0,Da.jsxs)("div",{className:"flex items-center gap-4",children:[(0,Da.jsx)("div",{className:"text-4xl",children:(n=e.language,{english:"\ud83c\uddfa\ud83c\uddf8",en:"\ud83c\uddfa\ud83c\uddf8",spanish:"\ud83c\uddea\ud83c\uddf8",es:"\ud83c\uddea\ud83c\uddf8",urdu:"\ud83c\uddf5\ud83c\uddf0",ur:"\ud83c\uddf5\ud83c\uddf0",french:"\ud83c\uddeb\ud83c\uddf7",fr:"\ud83c\uddeb\ud83c\uddf7",arabic:"\ud83c\uddf8\ud83c\udde6",ar:"\ud83c\uddf8\ud83c\udde6",chinese:"\ud83c\udde8\ud83c\uddf3",zh:"\ud83c\udde8\ud83c\uddf3"}[n.toLowerCase()]||"\ud83c\udf10")}),(0,Da.jsxs)("div",{className:"flex-1",children:[(0,Da.jsx)("div",{className:"text-sm font-semibold text-gray-900 mb-2",children:(r=e.language,{en:"English",es:"Spanish",ur:"Urdu",fr:"French",ar:"Arabic",zh:"Chinese"}[r]||r.toUpperCase())}),(0,Da.jsx)("div",{className:"h-2 bg-gray-200 rounded-full overflow-hidden",children:(0,Da.jsx)("div",{className:"h-full bg-gradient-to-r from-purple-600 to-blue-600 rounded-full transition-all",style:{width:"".concat(e.percentage,"%")}})})]}),(0,Da.jsxs)("div",{className:"text-right min-w-[100px]",children:[(0,Da.jsxs)("div",{className:"text-lg font-bold text-gray-900",children:[e.percentage,"%"]}),(0,Da.jsxs)("div",{className:"text-xs text-gray-500",children:[e.count," interactions"]})]})]},t);var r,n})})]}),(0,Da.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,Da.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4 pb-4 border-b border-gray-200",children:"\ud83d\ude0a Emotion Detection"}),(0,Da.jsx)("div",{className:"grid grid-cols-3 gap-4",children:[{icon:"\ud83d\ude0a",label:"Happy",count:l.reduce((e,t)=>e+t.positive,0)},{icon:"\ud83d\ude10",label:"Neutral",count:l.reduce((e,t)=>e+t.neutral,0)},{icon:"\ud83d\ude20",label:"Frustrated",count:l.reduce((e,t)=>e+t.negative,0)},{icon:"\ud83d\ude15",label:"Confused",count:Math.floor(.6*l.reduce((e,t)=>e+t.mixed,0))},{icon:"\ud83d\ude0c",label:"Satisfied",count:Math.floor(.5*l.reduce((e,t)=>e+t.positive,0))},{icon:"\ud83d\ude24",label:"Angry",count:Math.floor(.4*l.reduce((e,t)=>e+t.negative,0))}].map((e,t)=>(0,Da.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg text-center hover:bg-white hover:shadow-md hover:-translate-y-1 transition-all cursor-pointer",children:[(0,Da.jsx)("div",{className:"text-4xl mb-2",children:e.icon}),(0,Da.jsx)("div",{className:"text-sm font-semibold text-gray-900 mb-1",children:e.label}),(0,Da.jsx)("div",{className:"text-xl font-bold text-gray-700",children:e.count})]},t))})]})]}),(0,Da.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,Da.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4 pb-4 border-b border-gray-200",children:"\ud83d\udd00 Intent Flow & Transitions"}),(0,Da.jsx)("div",{className:"h-80 bg-gradient-to-br from-purple-600 to-blue-600 rounded-lg flex items-center justify-center text-white text-center p-8",children:(0,Da.jsxs)("div",{children:[(0,Da.jsx)("div",{className:"text-xl font-semibold mb-2",children:"Sankey Diagram: Customer Journey"}),(0,Da.jsx)("div",{className:"text-sm opacity-90",children:"Initial Intent \u2192 Conversation Flow \u2192 Resolution Intent"}),(0,Da.jsx)("div",{className:"text-xs opacity-75 mt-4",children:"(Advanced visualization - requires additional charting library)"})]})})]})]})},bC=Ha("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]),jC=()=>{const[e,t]=(0,a.useState)(!0),[r,n]=(0,a.useState)(null),[s,i]=(0,a.useState)(null),[o,l]=(0,a.useState)([]),[c,d]=(0,a.useState)([]),[u,p]=(0,a.useState)([]),[m,h]=(0,a.useState)({date_from:new Date(Date.now()-18144e5).toISOString().split("T")[0],date_to:(new Date).toISOString().split("T")[0],channel:""});(0,a.useEffect)(()=>{f()},[]);const f=async()=>{t(!0),n(null);try{const e=qe({},m);e.channel||delete e.channel;const[t,r,n,a]=await Promise.all([fC.getCostOverview(e),fC.getCostTrends(e),fC.getCostBreakdown(e),fC.getAgentPerformance(e)]);i(t.data.data),l(r.data.data.trends||[]),d(n.data.data.breakdown||[]),p(a.data.data.agents||[])}catch(a){var e,r;console.error("Failed to fetch cost analytics:",a),n((null===(e=a.response)||void 0===e||null===(r=e.data)||void 0===r?void 0:r.message)||"Failed to load cost analytics")}finally{t(!1)}},g=e=>{const t=["linear-gradient(135deg, #667eea 0%, #764ba2 100%)","linear-gradient(135deg, #f093fb 0%, #f5576c 100%)","linear-gradient(135deg, #4facfe 0%, #00f2fe 100%)","linear-gradient(135deg, #43e97b 0%, #38f9d7 100%)","linear-gradient(135deg, #fa709a 0%, #fee140 100%)"];return t[e%t.length]};return e&&!s?(0,Da.jsx)("div",{className:"flex items-center justify-center h-screen",children:(0,Da.jsxs)("div",{className:"text-center",children:[(0,Da.jsx)(Ka,{className:"w-16 h-16 text-primary-600 mx-auto mb-4 animate-pulse"}),(0,Da.jsx)("p",{className:"text-lg text-gray-600",children:"Loading cost analytics..."})]})}):(0,Da.jsxs)("div",{className:"space-y-6",children:[(0,Da.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,Da.jsxs)("div",{className:"mb-4",children:[(0,Da.jsxs)("div",{className:"text-sm text-gray-500 mb-2",children:[(0,Da.jsx)("a",{href:"/analytics",className:"text-primary-600 hover:text-primary-700",children:"Dashboard"})," ","/"," ","Cost Analytics & Performance"]}),(0,Da.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"\ud83d\udcb0 Cost Analytics & Agent Performance"})]}),(0,Da.jsxs)("div",{className:"flex flex-wrap gap-3 items-center",children:[(0,Da.jsx)("input",{type:"date",value:m.date_from,onChange:e=>h(t=>qe(qe({},t),{},{date_from:e.target.value})),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent text-sm"}),(0,Da.jsx)("span",{className:"text-gray-500",children:"to"}),(0,Da.jsx)("input",{type:"date",value:m.date_to,onChange:e=>h(t=>qe(qe({},t),{},{date_to:e.target.value})),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent text-sm"}),(0,Da.jsxs)("select",{value:m.channel,onChange:e=>h(t=>qe(qe({},t),{},{channel:e.target.value})),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent text-sm",children:[(0,Da.jsx)("option",{value:"",children:"All Channels"}),(0,Da.jsx)("option",{value:"voice",children:"Voice Calls"}),(0,Da.jsx)("option",{value:"chat",children:"Chat Messages"})]}),(0,Da.jsx)("button",{onClick:()=>{f()},className:"px-6 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 font-semibold",children:"Apply Filters"}),(0,Da.jsxs)("button",{className:"px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 font-semibold flex items-center gap-2",children:[(0,Da.jsx)(Si,{className:"w-4 h-4"}),"Export Report"]})]})]}),r&&(0,Da.jsx)("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:r}),s&&(0,Da.jsxs)("div",{className:"bg-gradient-to-r from-purple-600 to-purple-800 text-white rounded-lg shadow-lg p-8",children:[(0,Da.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,Da.jsxs)("div",{className:"flex items-center gap-3",children:[(0,Da.jsx)(bC,{className:"w-8 h-8"}),(0,Da.jsx)("h2",{className:"text-2xl font-bold",children:"Current Credit Balance"})]}),(0,Da.jsxs)("div",{className:"text-4xl font-bold",children:["$",parseFloat(s.credits.balance).toFixed(2)]})]}),(0,Da.jsx)("div",{className:"mb-6",children:(0,Da.jsx)("div",{className:"h-5 bg-white/30 rounded-full overflow-hidden",children:(0,Da.jsx)("div",{className:"h-full bg-white rounded-full transition-all",style:{width:"".concat(s.credits.usage_percentage,"%")}})})}),(0,Da.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-6",children:[(0,Da.jsxs)("div",{children:[(0,Da.jsx)("div",{className:"text-sm opacity-90 mb-1",children:"Total Purchased"}),(0,Da.jsxs)("div",{className:"text-2xl font-bold",children:["$",parseFloat(s.credits.purchased).toFixed(2)]})]}),(0,Da.jsxs)("div",{children:[(0,Da.jsx)("div",{className:"text-sm opacity-90 mb-1",children:"Used This Period"}),(0,Da.jsxs)("div",{className:"text-2xl font-bold",children:["$",parseFloat(s.credits.used_period).toFixed(2)]})]}),(0,Da.jsxs)("div",{children:[(0,Da.jsx)("div",{className:"text-sm opacity-90 mb-1",children:"Total Used"}),(0,Da.jsxs)("div",{className:"text-2xl font-bold",children:["$",parseFloat(s.credits.used_total).toFixed(2)]})]}),(0,Da.jsxs)("div",{children:[(0,Da.jsx)("div",{className:"text-sm opacity-90 mb-1",children:"Estimated Remaining Days"}),(0,Da.jsxs)("div",{className:"text-2xl font-bold",children:[s.credits.estimated_days_remaining," days"]})]})]})]}),s&&(0,Da.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,Da.jsxs)("div",{className:"bg-white rounded-lg shadow p-6 border-l-4 border-purple-500",children:[(0,Da.jsx)("div",{className:"text-sm text-gray-500 uppercase font-semibold mb-2",children:"Total Cost"}),(0,Da.jsxs)("div",{className:"text-3xl font-bold text-gray-900 mb-2",children:["$",parseFloat(s.period.total_cost).toFixed(2)]}),(0,Da.jsxs)("div",{className:"text-sm text-gray-500 mb-2",children:[s.period.total_interactions.toLocaleString()," interactions"]}),(0,Da.jsxs)("div",{className:"text-sm text-red-600 flex items-center gap-1",children:[(0,Da.jsx)(Xa,{className:"w-4 h-4"}),"9.8% from last period"]})]}),(0,Da.jsxs)("div",{className:"bg-white rounded-lg shadow p-6 border-l-4 border-pink-500",children:[(0,Da.jsx)("div",{className:"text-sm text-gray-500 uppercase font-semibold mb-2",children:"LLM Completions"}),(0,Da.jsxs)("div",{className:"text-3xl font-bold text-gray-900 mb-2",children:["$",parseFloat(s.period.llm_cost).toFixed(2)]}),(0,Da.jsxs)("div",{className:"text-sm text-gray-500 mb-2",children:[s.period.llm_percentage,"% of total"]}),(0,Da.jsxs)("div",{className:"text-sm text-red-600 flex items-center gap-1",children:[(0,Da.jsx)(Xa,{className:"w-4 h-4"}),"11.2% from last period"]})]}),(0,Da.jsxs)("div",{className:"bg-white rounded-lg shadow p-6 border-l-4 border-blue-500",children:[(0,Da.jsx)("div",{className:"text-sm text-gray-500 uppercase font-semibold mb-2",children:"Transcription"}),(0,Da.jsxs)("div",{className:"text-3xl font-bold text-gray-900 mb-2",children:["$",parseFloat(s.period.transcription_cost).toFixed(2)]}),(0,Da.jsxs)("div",{className:"text-sm text-gray-500 mb-2",children:[s.period.transcription_percentage,"% of total"]}),(0,Da.jsxs)("div",{className:"text-sm text-red-600 flex items-center gap-1",children:[(0,Da.jsx)(Xa,{className:"w-4 h-4"}),"8.5% from last period"]})]}),(0,Da.jsxs)("div",{className:"bg-white rounded-lg shadow p-6 border-l-4 border-green-500",children:[(0,Da.jsx)("div",{className:"text-sm text-gray-500 uppercase font-semibold mb-2",children:"Analysis Services"}),(0,Da.jsxs)("div",{className:"text-3xl font-bold text-gray-900 mb-2",children:["$",parseFloat(s.period.analysis_cost).toFixed(2)]}),(0,Da.jsxs)("div",{className:"text-sm text-gray-500 mb-2",children:[s.period.analysis_percentage,"% of total"]}),(0,Da.jsxs)("div",{className:"text-sm text-green-600 flex items-center gap-1",children:[(0,Da.jsx)(Cs,{className:"w-4 h-4"}),"2.3% from last period"]})]})]}),(0,Da.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,Da.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4 pb-4 border-b border-gray-200",children:"\ud83d\udcc8 Daily Cost Trends"}),(0,Da.jsx)(Tl,{width:"100%",height:300,children:(0,Da.jsxs)(Y_,{data:o,children:[(0,Da.jsx)(pC,{strokeDasharray:"3 3"}),(0,Da.jsx)(R_,{dataKey:"date",tickFormatter:e=>new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric"})}),(0,Da.jsx)(K_,{tickFormatter:e=>"$".concat(e.toFixed(2))}),(0,Da.jsx)(Mc,{formatter:e=>"$".concat(parseFloat(e).toFixed(2)),labelFormatter:e=>new Date(e).toLocaleDateString()}),(0,Da.jsx)(lu,{}),(0,Da.jsx)(t_,{type:"monotone",dataKey:"llm_cost",stroke:"#f093fb",strokeWidth:2,name:"LLM"}),(0,Da.jsx)(t_,{type:"monotone",dataKey:"transcription_cost",stroke:"#4facfe",strokeWidth:2,name:"Transcription"}),(0,Da.jsx)(t_,{type:"monotone",dataKey:"analysis_cost",stroke:"#43e97b",strokeWidth:2,name:"Analysis"}),(0,Da.jsx)(t_,{type:"monotone",dataKey:"total_cost",stroke:"#667eea",strokeWidth:3,name:"Total"})]})})]}),(0,Da.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,Da.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,Da.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4 pb-4 border-b border-gray-200",children:"\ud83d\udcb8 Detailed Cost Breakdown"}),(0,Da.jsx)("ul",{className:"space-y-3",children:c.map((e,t)=>(0,Da.jsxs)("li",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[(0,Da.jsxs)("div",{className:"flex items-center gap-4",children:[(0,Da.jsx)("div",{className:"w-10 h-10 rounded-lg bg-white flex items-center justify-center text-2xl",children:e.icon}),(0,Da.jsxs)("div",{children:[(0,Da.jsx)("div",{className:"text-sm font-semibold text-gray-900",children:e.name}),(0,Da.jsx)("div",{className:"text-xs text-gray-500",children:e.description})]})]}),(0,Da.jsxs)("div",{className:"text-right",children:[(0,Da.jsxs)("div",{className:"text-lg font-bold text-gray-900",children:["$",e.cost.toFixed(2)]}),(0,Da.jsxs)("div",{className:"text-xs text-gray-500",children:[e.percentage,"%"]})]})]},t))})]}),(0,Da.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,Da.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4 pb-4 border-b border-gray-200",children:"\ud83d\udcca Cost per Interaction"}),(0,Da.jsx)("div",{className:"h-80 bg-gradient-to-br from-purple-600 to-blue-600 rounded-lg flex items-center justify-center text-white text-center p-8",children:(0,Da.jsxs)("div",{children:[(0,Da.jsx)("div",{className:"text-xl font-semibold mb-2",children:"Bar Chart: Average Cost by Type"}),(0,Da.jsx)("div",{className:"text-sm opacity-90",children:"Voice Calls vs Chat Messages"}),(0,Da.jsx)("div",{className:"text-xs opacity-75 mt-4",children:"(Requires additional data aggregation)"})]})})]})]}),(0,Da.jsxs)("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[(0,Da.jsx)("div",{className:"px-6 py-5 border-b border-gray-200",children:(0,Da.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"\ud83d\udc65 Agent Performance Metrics"})}),(0,Da.jsx)("ul",{className:"divide-y divide-gray-200",children:u.map((e,t)=>{return(0,Da.jsxs)("li",{className:"p-6 hover:bg-gray-50 transition-colors",children:[(0,Da.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,Da.jsxs)("div",{className:"flex items-center gap-4",children:[(0,Da.jsx)("div",{className:"w-12 h-12 rounded-full flex items-center justify-center text-white text-xl font-bold",style:{background:g(t)},children:(r=e.agent_name,r.split(" ").map(e=>e[0]).join("").toUpperCase().substring(0,2))}),(0,Da.jsxs)("div",{children:[(0,Da.jsx)("div",{className:"text-base font-semibold text-gray-900",children:e.agent_name}),(0,Da.jsx)("div",{className:"text-sm text-gray-500",children:e.agent_email||"Support Agent"})]})]}),(0,Da.jsx)("div",{children:(0,Da.jsxs)("span",{className:"px-4 py-2 rounded-full text-sm font-bold text-white ".concat("good"===e.performance_grade?"bg-gradient-to-r from-green-500 to-green-600":"average"===e.performance_grade?"bg-gradient-to-r from-orange-500 to-orange-600":"bg-gradient-to-r from-red-500 to-red-600"),children:[e.performance_score,"%"]})})]}),(0,Da.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4",children:[(0,Da.jsxs)("div",{className:"bg-white p-3 rounded-lg border border-gray-200",children:[(0,Da.jsx)("div",{className:"text-xs text-gray-500 uppercase mb-1",children:"Total Interactions"}),(0,Da.jsx)("div",{className:"text-lg font-bold text-gray-900",children:e.total_interactions})]}),(0,Da.jsxs)("div",{className:"bg-white p-3 rounded-lg border border-gray-200",children:[(0,Da.jsx)("div",{className:"text-xs text-gray-500 uppercase mb-1",children:"Avg Sentiment"}),(0,Da.jsx)("div",{className:"text-lg font-bold",style:{color:parseFloat(e.avg_sentiment)>=.7?"#2ecc71":parseFloat(e.avg_sentiment)>=.5?"#f39c12":"#e74c3c"},children:e.avg_sentiment})]}),(0,Da.jsxs)("div",{className:"bg-white p-3 rounded-lg border border-gray-200",children:[(0,Da.jsx)("div",{className:"text-xs text-gray-500 uppercase mb-1",children:"Resolution Rate"}),(0,Da.jsxs)("div",{className:"text-lg font-bold text-gray-900",children:[e.resolution_rate,"%"]})]}),(0,Da.jsxs)("div",{className:"bg-white p-3 rounded-lg border border-gray-200",children:[(0,Da.jsx)("div",{className:"text-xs text-gray-500 uppercase mb-1",children:"Avg Duration"}),(0,Da.jsx)("div",{className:"text-lg font-bold text-gray-900",children:e.avg_duration_formatted})]}),(0,Da.jsxs)("div",{className:"bg-white p-3 rounded-lg border border-gray-200",children:[(0,Da.jsx)("div",{className:"text-xs text-gray-500 uppercase mb-1",children:"Total Cost"}),(0,Da.jsxs)("div",{className:"text-lg font-bold text-gray-900",children:["$",e.total_cost]})]}),(0,Da.jsxs)("div",{className:"bg-white p-3 rounded-lg border border-gray-200",children:[(0,Da.jsx)("div",{className:"text-xs text-gray-500 uppercase mb-1",children:"Cost/Interaction"}),(0,Da.jsxs)("div",{className:"text-lg font-bold text-gray-900",children:["$",e.cost_per_interaction]})]})]})]},e.agent_id);var r})})]})]})},wC=Ha("ThumbsUp",[["path",{d:"M7 10v12",key:"1qc93n"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2h0a3.13 3.13 0 0 1 3 3.88Z",key:"y3tblf"}]]);var NC=LS({chartName:"BarChart",GraphicalChild:Uw,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:R_},{axisType:"yAxis",AxisComp:K_}],formatAxisMap:Kw});const kC=()=>{const[e,t]=(0,a.useState)(!0),[r,n]=(0,a.useState)(null),[s,i]=(0,a.useState)(null),[o,l]=(0,a.useState)([]),[c,d]=(0,a.useState)([]),[u,p]=(0,a.useState)([]),[m,h]=(0,a.useState)([]),[f,g]=(0,a.useState)([]),[x,y]=(0,a.useState)({date_from:new Date(Date.now()-18144e5).toISOString().split("T")[0],date_to:(new Date).toISOString().split("T")[0],agent_id:""});(0,a.useEffect)(()=>{v()},[]);const v=async()=>{t(!0),n(null);try{const e=qe({},x);e.agent_id||delete e.agent_id;const[t,r,n,a,s,o]=await Promise.all([fC.getSatisfactionOverview(e),fC.getSatisfactionTrends(e),fC.getSatisfactionFeedback(qe(qe({},e),{},{rating:"GOOD",limit:5})),fC.getSatisfactionFeedback(qe(qe({},e),{},{rating:"BAD",limit:5})),fC.getSatisfactionByAgent(e),fC.getSatisfactionByIntent(e)]);i(t.data.data),l(r.data.data.trends||[]),d(n.data.data.feedback||[]),p(a.data.data.feedback||[]),h(s.data.data.agents||[]),g(o.data.data.intents||[])}catch(a){var e,r;console.error("Failed to fetch satisfaction data:",a),n((null===(e=a.response)||void 0===e||null===(r=e.data)||void 0===r?void 0:r.message)||"Failed to load satisfaction data")}finally{t(!1)}};return e&&!s?(0,Da.jsx)("div",{className:"flex items-center justify-center h-screen",children:(0,Da.jsxs)("div",{className:"text-center",children:[(0,Da.jsx)(wC,{className:"w-16 h-16 text-green-600 mx-auto mb-4 animate-pulse"}),(0,Da.jsx)("p",{className:"text-lg text-gray-600",children:"Loading satisfaction data..."})]})}):(0,Da.jsxs)("div",{className:"space-y-6",children:[(0,Da.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,Da.jsxs)("div",{className:"mb-4",children:[(0,Da.jsxs)("div",{className:"text-sm text-gray-500 mb-2",children:[(0,Da.jsx)("a",{href:"/analytics",className:"text-primary-600 hover:text-primary-700",children:"Dashboard"})," ","/"," ","Customer Satisfaction & Feedback"]}),(0,Da.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"\u2b50 Customer Satisfaction & Feedback"})]}),(0,Da.jsxs)("div",{className:"flex flex-wrap gap-3 items-center",children:[(0,Da.jsx)("input",{type:"date",value:x.date_from,onChange:e=>y(t=>qe(qe({},t),{},{date_from:e.target.value})),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent text-sm"}),(0,Da.jsx)("span",{className:"text-gray-500",children:"to"}),(0,Da.jsx)("input",{type:"date",value:x.date_to,onChange:e=>y(t=>qe(qe({},t),{},{date_to:e.target.value})),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent text-sm"}),(0,Da.jsx)("button",{onClick:()=>{v()},className:"px-6 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 font-semibold",children:"Apply Filters"}),(0,Da.jsxs)("button",{className:"px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 font-semibold flex items-center gap-2",children:[(0,Da.jsx)(Si,{className:"w-4 h-4"}),"Export Report"]})]})]}),r&&(0,Da.jsx)("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:r}),s&&(0,Da.jsxs)("div",{className:"bg-gradient-to-r from-green-500 to-green-600 text-white rounded-lg shadow-lg p-10 text-center",children:[(0,Da.jsxs)("div",{className:"text-7xl font-bold mb-3",children:[s.satisfaction.satisfaction_rate,"%"]}),(0,Da.jsx)("div",{className:"text-2xl mb-8 opacity-95",children:"Overall Customer Satisfaction"}),(0,Da.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,Da.jsxs)("div",{className:"bg-white/20 rounded-lg p-5",children:[(0,Da.jsx)("div",{className:"text-3xl font-bold mb-2",children:s.satisfaction.good_count}),(0,Da.jsx)("div",{className:"text-sm opacity-90",children:"Satisfied"})]}),(0,Da.jsxs)("div",{className:"bg-white/20 rounded-lg p-5",children:[(0,Da.jsx)("div",{className:"text-3xl font-bold mb-2",children:s.satisfaction.total_feedback-s.satisfaction.good_count-s.satisfaction.bad_count}),(0,Da.jsx)("div",{className:"text-sm opacity-90",children:"Neutral"})]}),(0,Da.jsxs)("div",{className:"bg-white/20 rounded-lg p-5",children:[(0,Da.jsx)("div",{className:"text-3xl font-bold mb-2",children:s.satisfaction.bad_count}),(0,Da.jsx)("div",{className:"text-sm opacity-90",children:"Unsatisfied"})]})]})]}),s&&(0,Da.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,Da.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,Da.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,Da.jsx)("div",{className:"text-sm text-gray-500 uppercase font-semibold",children:"Resolution Rate"}),(0,Da.jsx)(gs,{className:"w-8 h-8 text-green-500"})]}),(0,Da.jsxs)("div",{className:"text-4xl font-bold text-gray-900 mb-2",children:[s.resolution.resolution_rate,"%"]}),(0,Da.jsxs)("div",{className:"text-sm text-green-600 flex items-center gap-1",children:[(0,Da.jsx)(Xa,{className:"w-4 h-4"}),"Good performance"]})]}),(0,Da.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,Da.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,Da.jsx)("div",{className:"text-sm text-gray-500 uppercase font-semibold",children:"First Contact Resolution"}),(0,Da.jsx)(Qs,{className:"w-8 h-8 text-blue-500"})]}),(0,Da.jsxs)("div",{className:"text-4xl font-bold text-gray-900 mb-2",children:[s.escalation.first_contact_resolution_rate,"%"]}),(0,Da.jsxs)("div",{className:"text-sm text-green-600 flex items-center gap-1",children:[(0,Da.jsx)(Xa,{className:"w-4 h-4"}),"Strong efficiency"]})]}),(0,Da.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,Da.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,Da.jsx)("div",{className:"text-sm text-gray-500 uppercase font-semibold",children:"Avg Response Time"}),(0,Da.jsx)(Ts,{className:"w-8 h-8 text-purple-500"})]}),(0,Da.jsxs)("div",{className:"text-4xl font-bold text-gray-900 mb-2",children:[s.response_time.avg_seconds,"s"]}),(0,Da.jsxs)("div",{className:"text-sm text-green-600 flex items-center gap-1",children:[(0,Da.jsx)(Cs,{className:"w-4 h-4"}),"Fast responses"]})]}),(0,Da.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,Da.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,Da.jsx)("div",{className:"text-sm text-gray-500 uppercase font-semibold",children:"Escalation Rate"}),(0,Da.jsx)(gi,{className:"w-8 h-8 text-orange-500"})]}),(0,Da.jsxs)("div",{className:"text-4xl font-bold text-gray-900 mb-2",children:[s.escalation.escalation_rate,"%"]}),(0,Da.jsxs)("div",{className:"text-sm text-green-600 flex items-center gap-1",children:[(0,Da.jsx)(Cs,{className:"w-4 h-4"}),"Low escalations"]})]})]}),(0,Da.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,Da.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4 pb-4 border-b border-gray-200",children:"\ud83d\udcc8 Satisfaction Trends Over Time"}),(0,Da.jsx)(Tl,{width:"100%",height:300,children:(0,Da.jsxs)(Y_,{data:o,children:[(0,Da.jsx)(pC,{strokeDasharray:"3 3"}),(0,Da.jsx)(R_,{dataKey:"date",tickFormatter:e=>new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric"})}),(0,Da.jsx)(K_,{tickFormatter:e=>"".concat(e,"%")}),(0,Da.jsx)(Mc,{formatter:e=>"".concat(parseFloat(e).toFixed(1),"%"),labelFormatter:e=>new Date(e).toLocaleDateString()}),(0,Da.jsx)(lu,{}),(0,Da.jsx)(t_,{type:"monotone",dataKey:"satisfaction_rate",stroke:"#2ecc71",strokeWidth:3,name:"Satisfaction Rate"})]})})]}),s&&(0,Da.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,Da.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4 pb-4 border-b border-gray-200",children:"\ud83c\udfaf Resolution Funnel"}),(0,Da.jsxs)("div",{className:"space-y-4",children:[(0,Da.jsxs)("div",{className:"flex items-center justify-between p-5 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:[(0,Da.jsxs)("div",{className:"flex items-center gap-4",children:[(0,Da.jsx)("div",{className:"w-10 h-10 bg-white rounded-lg flex items-center justify-center text-2xl",children:"\ud83d\udcde"}),(0,Da.jsxs)("div",{children:[(0,Da.jsx)("div",{className:"text-base font-semibold text-gray-900",children:"Total Interactions"}),(0,Da.jsx)("div",{className:"h-2 bg-gray-200 rounded-full w-48 mt-2",children:(0,Da.jsx)("div",{className:"h-full bg-green-500 rounded-full",style:{width:"100%"}})})]})]}),(0,Da.jsxs)("div",{className:"text-right",children:[(0,Da.jsx)("div",{className:"text-2xl font-bold text-gray-900",children:s.resolution.total_interactions}),(0,Da.jsx)("div",{className:"text-sm text-gray-500",children:"100%"})]})]}),(0,Da.jsxs)("div",{className:"flex items-center justify-between p-5 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:[(0,Da.jsxs)("div",{className:"flex items-center gap-4",children:[(0,Da.jsx)("div",{className:"w-10 h-10 bg-white rounded-lg flex items-center justify-center text-2xl",children:"\u2705"}),(0,Da.jsxs)("div",{children:[(0,Da.jsx)("div",{className:"text-base font-semibold text-gray-900",children:"Issue Resolved"}),(0,Da.jsx)("div",{className:"h-2 bg-gray-200 rounded-full w-48 mt-2",children:(0,Da.jsx)("div",{className:"h-full bg-green-500 rounded-full",style:{width:"".concat(s.resolution.resolution_rate,"%")}})})]})]}),(0,Da.jsxs)("div",{className:"text-right",children:[(0,Da.jsx)("div",{className:"text-2xl font-bold text-gray-900",children:s.resolution.resolved_count}),(0,Da.jsxs)("div",{className:"text-sm text-gray-500",children:[s.resolution.resolution_rate,"%"]})]})]}),(0,Da.jsxs)("div",{className:"flex items-center justify-between p-5 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:[(0,Da.jsxs)("div",{className:"flex items-center gap-4",children:[(0,Da.jsx)("div",{className:"w-10 h-10 bg-white rounded-lg flex items-center justify-center text-2xl",children:"\ud83d\ude0a"}),(0,Da.jsxs)("div",{children:[(0,Da.jsx)("div",{className:"text-base font-semibold text-gray-900",children:"Customer Satisfied"}),(0,Da.jsx)("div",{className:"h-2 bg-gray-200 rounded-full w-48 mt-2",children:(0,Da.jsx)("div",{className:"h-full bg-green-500 rounded-full",style:{width:"".concat(s.satisfaction.satisfaction_rate,"%")}})})]})]}),(0,Da.jsxs)("div",{className:"text-right",children:[(0,Da.jsx)("div",{className:"text-2xl font-bold text-gray-900",children:s.satisfaction.good_count}),(0,Da.jsxs)("div",{className:"text-sm text-gray-500",children:[s.satisfaction.satisfaction_rate,"%"]})]})]}),(0,Da.jsxs)("div",{className:"flex items-center justify-between p-5 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:[(0,Da.jsxs)("div",{className:"flex items-center gap-4",children:[(0,Da.jsx)("div",{className:"w-10 h-10 bg-white rounded-lg flex items-center justify-center text-2xl",children:"\ud83c\udfaf"}),(0,Da.jsxs)("div",{children:[(0,Da.jsx)("div",{className:"text-base font-semibold text-gray-900",children:"First Contact Resolution"}),(0,Da.jsx)("div",{className:"h-2 bg-gray-200 rounded-full w-48 mt-2",children:(0,Da.jsx)("div",{className:"h-full bg-green-500 rounded-full",style:{width:"".concat(s.escalation.first_contact_resolution_rate,"%")}})})]})]}),(0,Da.jsxs)("div",{className:"text-right",children:[(0,Da.jsx)("div",{className:"text-2xl font-bold text-gray-900",children:s.escalation.total_sessions-s.escalation.escalated_sessions}),(0,Da.jsxs)("div",{className:"text-sm text-gray-500",children:[s.escalation.first_contact_resolution_rate,"%"]})]})]})]})]}),(0,Da.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,Da.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,Da.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4 pb-4 border-b border-gray-200",children:"\ud83d\udd0d Top Satisfaction Drivers"}),(0,Da.jsx)("ul",{className:"space-y-4",children:c.map(e=>(0,Da.jsxs)("li",{className:"bg-green-50 border-l-4 border-green-500 p-5 rounded-lg",children:[(0,Da.jsxs)("div",{className:"flex justify-between items-center mb-3",children:[(0,Da.jsxs)("div",{className:"flex items-center gap-3",children:[(0,Da.jsx)("span",{className:"px-3 py-1 bg-green-100 text-green-800 rounded-full text-xs font-semibold",children:"Positive"}),(0,Da.jsx)("span",{className:"text-sm text-gray-500",children:new Date(e.created_at).toLocaleDateString()})]}),(0,Da.jsx)("div",{className:"text-xl",children:"GOOD"===e.rating?"\ud83d\udc4d":"\u2b50\u2b50\u2b50\u2b50\u2b50"})]}),(0,Da.jsx)("div",{className:"text-sm text-gray-700 mb-3",children:e.comment||"Customer rated this interaction positively"}),(0,Da.jsx)("div",{className:"flex gap-2",children:e.intents&&e.intents.slice(0,3).map((e,t)=>(0,Da.jsx)("span",{className:"px-2 py-1 bg-white border border-gray-300 rounded-md text-xs text-gray-600",children:e},t))})]},e.id))})]}),(0,Da.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,Da.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4 pb-4 border-b border-gray-200",children:"\u26a0\ufe0f Areas for Improvement"}),(0,Da.jsx)("ul",{className:"space-y-4",children:u.map(e=>(0,Da.jsxs)("li",{className:"bg-red-50 border-l-4 border-red-500 p-5 rounded-lg",children:[(0,Da.jsxs)("div",{className:"flex justify-between items-center mb-3",children:[(0,Da.jsxs)("div",{className:"flex items-center gap-3",children:[(0,Da.jsx)("span",{className:"px-3 py-1 bg-red-100 text-red-800 rounded-full text-xs font-semibold",children:"Negative"}),(0,Da.jsx)("span",{className:"text-sm text-gray-500",children:new Date(e.created_at).toLocaleDateString()})]}),(0,Da.jsx)("div",{className:"text-xl",children:"BAD"===e.rating?"\ud83d\udc4e":"\u2b50\u2b50"})]}),(0,Da.jsx)("div",{className:"text-sm text-gray-700 mb-3",children:e.comment||"Customer rated this interaction negatively"}),(0,Da.jsx)("div",{className:"flex gap-2",children:e.intents&&e.intents.slice(0,3).map((e,t)=>(0,Da.jsx)("span",{className:"px-2 py-1 bg-white border border-gray-300 rounded-md text-xs text-gray-600",children:e},t))})]},e.id))})]})]}),(0,Da.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,Da.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,Da.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4 pb-4 border-b border-gray-200",children:"\ud83d\udc65 Satisfaction by Agent"}),(0,Da.jsx)(Tl,{width:"100%",height:300,children:(0,Da.jsxs)(NC,{data:m,children:[(0,Da.jsx)(pC,{strokeDasharray:"3 3"}),(0,Da.jsx)(R_,{dataKey:"agent_name"}),(0,Da.jsx)(K_,{tickFormatter:e=>"".concat(e,"%")}),(0,Da.jsx)(Mc,{formatter:e=>"".concat(parseFloat(e).toFixed(1),"%")}),(0,Da.jsx)(Uw,{dataKey:"satisfaction_rate",fill:"#2ecc71"})]})})]}),(0,Da.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,Da.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4 pb-4 border-b border-gray-200",children:"\ud83d\udcca Satisfaction by Intent"}),(0,Da.jsx)(Tl,{width:"100%",height:300,children:(0,Da.jsxs)(NC,{data:f,children:[(0,Da.jsx)(pC,{strokeDasharray:"3 3"}),(0,Da.jsx)(R_,{dataKey:"intent"}),(0,Da.jsx)(K_,{tickFormatter:e=>"".concat(e,"%")}),(0,Da.jsx)(Mc,{formatter:e=>"".concat(parseFloat(e).toFixed(1),"%")}),(0,Da.jsx)(Uw,{dataKey:"satisfaction_rate",fill:"#3498db"})]})})]})]})]})},SC=Ha("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]),_C=e=>{let{onClose:t,onCreated:r}=e;const[n,s]=(0,a.useState)({name:"",company_name:"",admin_name:"",admin_email:"",admin_password:"",initial_credits:0}),[i,o]=(0,a.useState)(!1);return(0,Da.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,Da.jsxs)("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md mx-4",children:[(0,Da.jsxs)("div",{className:"flex items-center justify-between p-4 border-b",children:[(0,Da.jsx)("h2",{className:"text-lg font-semibold",children:"Create New Tenant"}),(0,Da.jsx)("button",{onClick:t,className:"text-gray-400 hover:text-gray-600",children:(0,Da.jsx)(ss,{className:"h-5 w-5"})})]}),(0,Da.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),o(!0);try{await Ma.post("/tenants",n),nr.success("Tenant created successfully"),r()}catch(s){var t,a;nr.error((null===(t=s.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.error)||"Failed to create tenant")}finally{o(!1)}},className:"p-4 space-y-4",children:[(0,Da.jsxs)("div",{children:[(0,Da.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tenant Name *"}),(0,Da.jsx)("input",{type:"text",required:!0,value:n.name,onChange:e=>s(qe(qe({},n),{},{name:e.target.value})),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-primary-500",placeholder:"e.g., Acme Corp"})]}),(0,Da.jsxs)("div",{children:[(0,Da.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Company Name"}),(0,Da.jsx)("input",{type:"text",value:n.company_name,onChange:e=>s(qe(qe({},n),{},{company_name:e.target.value})),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-primary-500",placeholder:"e.g., Acme Corporation Inc."})]}),(0,Da.jsx)("hr",{}),(0,Da.jsxs)("div",{children:[(0,Da.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Admin Name *"}),(0,Da.jsx)("input",{type:"text",required:!0,value:n.admin_name,onChange:e=>s(qe(qe({},n),{},{admin_name:e.target.value})),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-primary-500",placeholder:"e.g., John Smith"})]}),(0,Da.jsxs)("div",{children:[(0,Da.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Admin Email *"}),(0,Da.jsx)("input",{type:"email",required:!0,value:n.admin_email,onChange:e=>s(qe(qe({},n),{},{admin_email:e.target.value})),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-primary-500",placeholder:"e.g., john@acme.com"})]}),(0,Da.jsxs)("div",{children:[(0,Da.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Admin Password *"}),(0,Da.jsx)("input",{type:"password",required:!0,minLength:8,value:n.admin_password,onChange:e=>s(qe(qe({},n),{},{admin_password:e.target.value})),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-primary-500",placeholder:"Min 8 characters"})]}),(0,Da.jsxs)("div",{children:[(0,Da.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Initial Credits"}),(0,Da.jsx)("input",{type:"number",min:"0",step:"0.01",value:n.initial_credits,onChange:e=>s(qe(qe({},n),{},{initial_credits:parseFloat(e.target.value)||0})),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-primary-500",placeholder:"0.00"})]}),(0,Da.jsxs)("div",{className:"flex justify-end space-x-3 pt-4",children:[(0,Da.jsx)("button",{type:"button",onClick:t,className:"px-4 py-2 border rounded-lg hover:bg-gray-50",children:"Cancel"}),(0,Da.jsx)("button",{type:"submit",disabled:i,className:"px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 disabled:opacity-50",children:i?"Creating...":"Create Tenant"})]})]})]})})},CC=e=>{var t;let{tenant:r,onClose:n}=e;return(0,Da.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,Da.jsxs)("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-2xl mx-4 max-h-[90vh] overflow-y-auto",children:[(0,Da.jsxs)("div",{className:"flex items-center justify-between p-4 border-b sticky top-0 bg-white",children:[(0,Da.jsx)("h2",{className:"text-lg font-semibold",children:r.name}),(0,Da.jsx)("button",{onClick:n,className:"text-gray-400 hover:text-gray-600",children:(0,Da.jsx)(ss,{className:"h-5 w-5"})})]}),(0,Da.jsxs)("div",{className:"p-4 space-y-6",children:[(0,Da.jsxs)("div",{children:[(0,Da.jsx)("h3",{className:"text-sm font-medium text-gray-500 mb-2",children:"Basic Information"}),(0,Da.jsxs)("dl",{className:"grid grid-cols-2 gap-4",children:[(0,Da.jsxs)("div",{children:[(0,Da.jsx)("dt",{className:"text-xs text-gray-500",children:"Company Name"}),(0,Da.jsx)("dd",{className:"text-sm font-medium",children:r.company_name||"-"})]}),(0,Da.jsxs)("div",{children:[(0,Da.jsx)("dt",{className:"text-xs text-gray-500",children:"Status"}),(0,Da.jsx)("dd",{children:r.is_active?(0,Da.jsx)("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:"Active"}):(0,Da.jsx)("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800",children:"Inactive"})})]}),(0,Da.jsxs)("div",{children:[(0,Da.jsx)("dt",{className:"text-xs text-gray-500",children:"Credit Balance"}),(0,Da.jsxs)("dd",{className:"text-sm font-medium",children:["$",parseFloat(r.credit_balance||0).toFixed(4)]})]}),(0,Da.jsxs)("div",{children:[(0,Da.jsx)("dt",{className:"text-xs text-gray-500",children:"Created"}),(0,Da.jsx)("dd",{className:"text-sm",children:new Date(r.created_at).toLocaleDateString()})]})]})]}),(0,Da.jsxs)("div",{children:[(0,Da.jsx)("h3",{className:"text-sm font-medium text-gray-500 mb-2",children:"Usage Statistics"}),(0,Da.jsxs)("div",{className:"grid grid-cols-4 gap-4",children:[(0,Da.jsxs)("div",{className:"bg-gray-50 p-3 rounded-lg text-center",children:[(0,Da.jsx)("div",{className:"text-2xl font-bold text-primary-600",children:r.user_count}),(0,Da.jsx)("div",{className:"text-xs text-gray-500",children:"Users"})]}),(0,Da.jsxs)("div",{className:"bg-gray-50 p-3 rounded-lg text-center",children:[(0,Da.jsx)("div",{className:"text-2xl font-bold text-purple-600",children:r.agent_count}),(0,Da.jsx)("div",{className:"text-xs text-gray-500",children:"Agents"})]}),(0,Da.jsxs)("div",{className:"bg-gray-50 p-3 rounded-lg text-center",children:[(0,Da.jsx)("div",{className:"text-2xl font-bold text-green-600",children:r.total_calls}),(0,Da.jsx)("div",{className:"text-xs text-gray-500",children:"Calls"})]}),(0,Da.jsxs)("div",{className:"bg-gray-50 p-3 rounded-lg text-center",children:[(0,Da.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:r.total_chat_sessions}),(0,Da.jsx)("div",{className:"text-xs text-gray-500",children:"Chat Sessions"})]})]})]}),(0,Da.jsxs)("div",{children:[(0,Da.jsx)("h3",{className:"text-sm font-medium text-gray-500 mb-2",children:"API Key"}),r.api_key?(0,Da.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Da.jsx)("code",{className:"bg-gray-100 px-3 py-2 rounded text-sm flex-1",children:r.api_key}),(0,Da.jsx)("button",{onClick:()=>{navigator.clipboard.writeText(r.api_key),nr.success("Copied to clipboard")},className:"p-2 text-gray-400 hover:text-gray-600",children:(0,Da.jsx)(Gs,{className:"h-5 w-5"})})]}):(0,Da.jsx)("p",{className:"text-sm text-gray-400",children:"No API key generated"})]}),(0,Da.jsxs)("div",{children:[(0,Da.jsxs)("h3",{className:"text-sm font-medium text-gray-500 mb-2",children:["Users (",(null===(t=r.users)||void 0===t?void 0:t.length)||0,")"]}),r.users&&r.users.length>0?(0,Da.jsx)("div",{className:"space-y-2",children:r.users.map(e=>(0,Da.jsxs)("div",{className:"flex items-center justify-between bg-gray-50 p-3 rounded-lg",children:[(0,Da.jsxs)("div",{children:[(0,Da.jsx)("div",{className:"font-medium text-sm",children:e.name}),(0,Da.jsx)("div",{className:"text-xs text-gray-500",children:e.email})]}),(0,Da.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Da.jsx)("span",{className:"px-2 py-0.5 rounded-full text-xs ".concat("admin"===e.role?"bg-purple-100 text-purple-800":"agent_manager"===e.role?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"),children:e.role}),e.is_active?(0,Da.jsx)(gs,{className:"h-4 w-4 text-green-500"}):(0,Da.jsx)(Ti,{className:"h-4 w-4 text-red-500"})]})]},e.id))}):(0,Da.jsx)("p",{className:"text-sm text-gray-400",children:"No users"})]}),r.agents&&r.agents.length>0&&(0,Da.jsxs)("div",{children:[(0,Da.jsx)("h3",{className:"text-sm font-medium text-gray-500 mb-2",children:"Recent Agents"}),(0,Da.jsx)("div",{className:"space-y-2",children:r.agents.map(e=>(0,Da.jsxs)("div",{className:"flex items-center justify-between bg-gray-50 p-3 rounded-lg",children:[(0,Da.jsxs)("div",{className:"flex items-center",children:[(0,Da.jsx)(Ya,{className:"h-5 w-5 text-gray-400 mr-2"}),(0,Da.jsxs)("div",{children:[(0,Da.jsx)("div",{className:"font-medium text-sm",children:e.name}),(0,Da.jsxs)("div",{className:"text-xs text-gray-500",children:[e.type," \u2022 ",e.provider]})]})]}),(0,Da.jsx)("span",{className:"px-2 py-0.5 rounded-full text-xs ".concat("active"===e.status?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"),children:e.status})]},e.id))})]})]}),(0,Da.jsx)("div",{className:"p-4 border-t bg-gray-50",children:(0,Da.jsx)("button",{onClick:n,className:"w-full px-4 py-2 bg-gray-200 text-gray-800 rounded-lg hover:bg-gray-300",children:"Close"})})]})})},AC=e=>{let{tenant:t,onClose:r,onAdded:n}=e;const[s,i]=(0,a.useState)(""),[o,l]=(0,a.useState)(""),[c,d]=(0,a.useState)(!1);return(0,Da.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,Da.jsxs)("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md mx-4",children:[(0,Da.jsxs)("div",{className:"flex items-center justify-between p-4 border-b",children:[(0,Da.jsxs)("h2",{className:"text-lg font-semibold",children:["Add Credits to ",t.name]}),(0,Da.jsx)("button",{onClick:r,className:"text-gray-400 hover:text-gray-600",children:(0,Da.jsx)(ss,{className:"h-5 w-5"})})]}),(0,Da.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),!s||parseFloat(s)<=0)nr.error("Please enter a valid amount");else{d(!0);try{await Ma.post("/tenants/".concat(t.id,"/credits"),{amount:parseFloat(s),note:o}),nr.success("Credits added successfully"),n()}catch(i){var r,a;nr.error((null===(r=i.response)||void 0===r||null===(a=r.data)||void 0===a?void 0:a.error)||"Failed to add credits")}finally{d(!1)}}},className:"p-4 space-y-4",children:[(0,Da.jsxs)("div",{className:"bg-gray-50 p-3 rounded-lg",children:[(0,Da.jsx)("div",{className:"text-sm text-gray-500",children:"Current Balance"}),(0,Da.jsxs)("div",{className:"text-2xl font-bold",children:["$",parseFloat(t.credit_balance||0).toFixed(4)]})]}),(0,Da.jsxs)("div",{children:[(0,Da.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Amount to Add *"}),(0,Da.jsxs)("div",{className:"relative",children:[(0,Da.jsx)("span",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-500",children:"$"}),(0,Da.jsx)("input",{type:"number",required:!0,min:"0.01",step:"0.01",value:s,onChange:e=>i(e.target.value),className:"w-full pl-8 pr-4 py-2 border rounded-lg focus:ring-2 focus:ring-primary-500",placeholder:"0.00"})]})]}),(0,Da.jsxs)("div",{children:[(0,Da.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Note (optional)"}),(0,Da.jsx)("textarea",{value:o,onChange:e=>l(e.target.value),rows:2,className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-primary-500",placeholder:"e.g., Initial credit allocation"})]}),s&&parseFloat(s)>0&&(0,Da.jsx)("div",{className:"bg-green-50 p-3 rounded-lg",children:(0,Da.jsxs)("div",{className:"text-sm text-green-700",children:["New Balance: ",(0,Da.jsxs)("strong",{children:["$",(parseFloat(t.credit_balance||0)+parseFloat(s)).toFixed(4)]})]})}),(0,Da.jsxs)("div",{className:"flex justify-end space-x-3 pt-4",children:[(0,Da.jsx)("button",{type:"button",onClick:r,className:"px-4 py-2 border rounded-lg hover:bg-gray-50",children:"Cancel"}),(0,Da.jsx)("button",{type:"submit",disabled:c,className:"px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 disabled:opacity-50",children:c?"Adding...":"Add Credits"})]})]})]})})},OC=()=>{const{user:e,login:t}=Fa(),[r,n]=(0,a.useState)([]),[s,i]=(0,a.useState)(null),[o,l]=(0,a.useState)(!0),[c,d]=(0,a.useState)(""),[u,p]=(0,a.useState)(!1),[m,h]=(0,a.useState)(!1),[f,g]=(0,a.useState)(!1),[x,y]=(0,a.useState)(null),[v,b]=(0,a.useState)(1),[j,w]=(0,a.useState)(0);(0,a.useEffect)(()=>{N(),k()},[v,c]);const N=async()=>{try{l(!0);const e=await Ma.get("/tenants",{params:{search:c,limit:20,offset:20*(v-1)}});n(e.data.data.tenants||[]),w(e.data.data.total||0)}catch(e){console.error("Failed to fetch tenants:",e),nr.error("Failed to load tenants")}finally{l(!1)}},k=async()=>{try{const e=await Ma.get("/tenants/stats");i(e.data.data)}catch(e){console.error("Failed to fetch stats:",e)}},S=Math.ceil(j/20);return(0,Da.jsxs)("div",{className:"space-y-6",children:["true"===localStorage.getItem("emulation_active")&&(0,Da.jsxs)("div",{className:"bg-yellow-100 border-l-4 border-yellow-500 p-4 flex items-center justify-between",children:[(0,Da.jsxs)("div",{className:"flex items-center",children:[(0,Da.jsx)(Hi,{className:"h-5 w-5 text-yellow-600 mr-2"}),(0,Da.jsxs)("span",{className:"text-yellow-800",children:["You are viewing as: ",(0,Da.jsx)("strong",{children:localStorage.getItem("emulated_tenant_name")})]})]}),(0,Da.jsx)("button",{onClick:()=>{const e=localStorage.getItem("original_token");e&&(localStorage.setItem("token",e),localStorage.removeItem("original_token"),localStorage.removeItem("emulation_active"),localStorage.removeItem("emulated_tenant_name"),window.location.href="/aiva/tenants")},className:"bg-yellow-600 text-white px-4 py-1 rounded hover:bg-yellow-700",children:"Exit Emulation"})]}),(0,Da.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Da.jsxs)("div",{children:[(0,Da.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Tenant Manager"}),(0,Da.jsx)("p",{className:"text-gray-600",children:"Manage your customer tenants"})]}),(0,Da.jsxs)("button",{onClick:()=>p(!0),className:"flex items-center px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700",children:[(0,Da.jsx)(Qa,{className:"w-5 h-5 mr-2"}),"Create Tenant"]})]}),s&&(0,Da.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,Da.jsx)("div",{className:"bg-white rounded-lg shadow p-4",children:(0,Da.jsxs)("div",{className:"flex items-center",children:[(0,Da.jsx)(ni,{className:"h-8 w-8 text-primary-600"}),(0,Da.jsxs)("div",{className:"ml-3",children:[(0,Da.jsx)("p",{className:"text-sm text-gray-500",children:"Total Tenants"}),(0,Da.jsx)("p",{className:"text-2xl font-bold",children:s.total_tenants})]})]})}),(0,Da.jsx)("div",{className:"bg-white rounded-lg shadow p-4",children:(0,Da.jsxs)("div",{className:"flex items-center",children:[(0,Da.jsx)(ei,{className:"h-8 w-8 text-green-600"}),(0,Da.jsxs)("div",{className:"ml-3",children:[(0,Da.jsx)("p",{className:"text-sm text-gray-500",children:"Total Users"}),(0,Da.jsx)("p",{className:"text-2xl font-bold",children:s.total_users})]})]})}),(0,Da.jsx)("div",{className:"bg-white rounded-lg shadow p-4",children:(0,Da.jsxs)("div",{className:"flex items-center",children:[(0,Da.jsx)(Ya,{className:"h-8 w-8 text-purple-600"}),(0,Da.jsxs)("div",{className:"ml-3",children:[(0,Da.jsx)("p",{className:"text-sm text-gray-500",children:"Total Agents"}),(0,Da.jsx)("p",{className:"text-2xl font-bold",children:s.total_agents})]})]})}),(0,Da.jsx)("div",{className:"bg-white rounded-lg shadow p-4",children:(0,Da.jsxs)("div",{className:"flex items-center",children:[(0,Da.jsx)(Ka,{className:"h-8 w-8 text-yellow-600"}),(0,Da.jsxs)("div",{className:"ml-3",children:[(0,Da.jsx)("p",{className:"text-sm text-gray-500",children:"Total Credits"}),(0,Da.jsxs)("p",{className:"text-2xl font-bold",children:["$",parseFloat(s.total_credits||0).toFixed(2)]})]})]})})]}),(0,Da.jsx)("div",{className:"bg-white rounded-lg shadow p-4",children:(0,Da.jsxs)("div",{className:"relative",children:[(0,Da.jsx)(ui,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-5 w-5"}),(0,Da.jsx)("input",{type:"text",placeholder:"Search tenants by name, company, or email...",value:c,onChange:e=>{d(e.target.value),b(1)},className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500"})]})}),(0,Da.jsxs)("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[(0,Da.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,Da.jsx)("thead",{className:"bg-gray-50",children:(0,Da.jsxs)("tr",{children:[(0,Da.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tenant"}),(0,Da.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Admin"}),(0,Da.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Stats"}),(0,Da.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Credits"}),(0,Da.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,Da.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"API Key"}),(0,Da.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,Da.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:o?(0,Da.jsx)("tr",{children:(0,Da.jsxs)("td",{colSpan:"7",className:"px-6 py-12 text-center",children:[(0,Da.jsx)(vi,{className:"h-8 w-8 animate-spin mx-auto text-gray-400"}),(0,Da.jsx)("p",{className:"mt-2 text-gray-500",children:"Loading tenants..."})]})}):0===r.length?(0,Da.jsx)("tr",{children:(0,Da.jsxs)("td",{colSpan:"7",className:"px-6 py-12 text-center",children:[(0,Da.jsx)(ni,{className:"h-12 w-12 mx-auto text-gray-400"}),(0,Da.jsx)("p",{className:"mt-2 text-gray-500",children:"No tenants found"})]})}):r.map(e=>(0,Da.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,Da.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,Da.jsxs)("div",{className:"flex items-center",children:[(0,Da.jsx)("div",{className:"flex-shrink-0 h-10 w-10 rounded-full bg-primary-100 flex items-center justify-center",children:(0,Da.jsx)(ni,{className:"h-5 w-5 text-primary-600"})}),(0,Da.jsxs)("div",{className:"ml-4",children:[(0,Da.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.name}),(0,Da.jsx)("div",{className:"text-sm text-gray-500",children:e.company_name})]})]})}),(0,Da.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,Da.jsx)("div",{className:"text-sm text-gray-900",children:e.admin_name||"-"}),(0,Da.jsx)("div",{className:"text-sm text-gray-500",children:e.admin_email||"-"})]}),(0,Da.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,Da.jsxs)("div",{className:"flex space-x-4 text-sm text-gray-500",children:[(0,Da.jsxs)("span",{className:"flex items-center",children:[(0,Da.jsx)(ei,{className:"h-4 w-4 mr-1"}),e.user_count]}),(0,Da.jsxs)("span",{className:"flex items-center",children:[(0,Da.jsx)(Ya,{className:"h-4 w-4 mr-1"}),e.agent_count]}),(0,Da.jsxs)("span",{className:"flex items-center",children:[(0,Da.jsx)(Ja,{className:"h-4 w-4 mr-1"}),e.total_calls]})]})}),(0,Da.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,Da.jsxs)("span",{className:"text-sm font-medium text-gray-900",children:["$",parseFloat(e.credit_balance||0).toFixed(2)]})}),(0,Da.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:e.is_active?(0,Da.jsxs)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[(0,Da.jsx)(gs,{className:"h-3 w-3 mr-1"}),"Active"]}):(0,Da.jsxs)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800",children:[(0,Da.jsx)(Ti,{className:"h-3 w-3 mr-1"}),"Inactive"]})}),(0,Da.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:e.api_key_masked?(0,Da.jsxs)("div",{className:"flex items-center",children:[(0,Da.jsx)("code",{className:"text-xs bg-gray-100 px-2 py-1 rounded",children:e.api_key_masked}),(0,Da.jsx)("button",{onClick:()=>{navigator.clipboard.writeText(e.api_key),nr.success("API key copied")},className:"ml-2 text-gray-400 hover:text-gray-600",title:"Copy full key",children:(0,Da.jsx)(Gs,{className:"h-4 w-4"})})]}):(0,Da.jsx)("span",{className:"text-gray-400 text-sm",children:"No key"})}),(0,Da.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-right",children:(0,Da.jsxs)("div",{className:"flex items-center justify-end space-x-2",children:[(0,Da.jsx)("button",{onClick:()=>(async e=>{try{const t=await Ma.get("/tenants/".concat(e));y(t.data.data),h(!0),setActiveDropdown(null)}catch(t){nr.error("Failed to load tenant details")}})(e.id),className:"p-1.5 text-gray-500 hover:text-primary-600 hover:bg-primary-50 rounded",title:"View Details",children:(0,Da.jsx)(Hi,{className:"h-4 w-4"})}),(0,Da.jsx)("button",{onClick:()=>(async e=>{if(window.confirm("Are you sure you want to login as ".concat(e.name,"? You will have admin access to their account.")))try{const t=await Ma.post("/tenants/".concat(e.id,"/emulate")),{token:r,user:n,tenant:a}=t.data.data;localStorage.setItem("original_token",localStorage.getItem("token")),localStorage.setItem("emulation_active","true"),localStorage.setItem("emulated_tenant_name",a.name),localStorage.setItem("token",r),nr.success("Now viewing as ".concat(a.name)),window.location.href="/aiva"}catch(n){var t,r;nr.error((null===(t=n.response)||void 0===t||null===(r=t.data)||void 0===r?void 0:r.error)||"Failed to emulate tenant")}})(e),className:"p-1.5 text-gray-500 hover:text-blue-600 hover:bg-blue-50 rounded",title:"Login As",children:(0,Da.jsx)(SC,{className:"h-4 w-4"})}),(0,Da.jsx)("button",{onClick:()=>{y(e),g(!0)},className:"p-1.5 text-gray-500 hover:text-green-600 hover:bg-green-50 rounded",title:"Add Credits",children:(0,Da.jsx)(Ka,{className:"h-4 w-4"})}),(0,Da.jsx)("button",{onClick:()=>(async e=>{if(window.confirm("Generate new API key? This will invalidate any existing key."))try{const t=(await Ma.post("/tenants/".concat(e,"/api-key"))).data.data.api_key;navigator.clipboard.writeText(t),nr.success("New API key generated and copied to clipboard!"),N(),setActiveDropdown(null)}catch(t){nr.error("Failed to generate API key")}})(e.id),className:"p-1.5 text-gray-500 hover:text-yellow-600 hover:bg-yellow-50 rounded",title:"Generate API Key",children:(0,Da.jsx)(ai,{className:"h-4 w-4"})}),e.is_active?(0,Da.jsx)("button",{onClick:()=>(async e=>{if(window.confirm("Deactivate ".concat(e.name,"? All users will be unable to login.")))try{await Ma.post("/tenants/".concat(e.id,"/deactivate")),nr.success("Tenant deactivated"),N(),setActiveDropdown(null)}catch(t){nr.error("Failed to deactivate tenant")}})(e),className:"p-1.5 text-gray-500 hover:text-red-600 hover:bg-red-50 rounded",title:"Deactivate",children:(0,Da.jsx)(Ti,{className:"h-4 w-4"})}):(0,Da.jsx)("button",{onClick:()=>(async e=>{try{await Ma.post("/tenants/".concat(e.id,"/reactivate")),nr.success("Tenant reactivated"),N(),setActiveDropdown(null)}catch(t){nr.error("Failed to reactivate tenant")}})(e),className:"p-1.5 text-gray-500 hover:text-green-600 hover:bg-green-50 rounded",title:"Reactivate",children:(0,Da.jsx)(gs,{className:"h-4 w-4"})})]})})]},e.id))})]}),S>1&&(0,Da.jsxs)("div",{className:"bg-gray-50 px-6 py-3 flex items-center justify-between border-t",children:[(0,Da.jsxs)("div",{className:"text-sm text-gray-500",children:["Showing ",20*(v-1)+1," to ",Math.min(20*v,j)," of ",j]}),(0,Da.jsxs)("div",{className:"flex space-x-2",children:[(0,Da.jsx)("button",{onClick:()=>b(e=>Math.max(1,e-1)),disabled:1===v,className:"px-3 py-1 border rounded disabled:opacity-50",children:"Previous"}),(0,Da.jsx)("button",{onClick:()=>b(e=>Math.min(S,e+1)),disabled:v===S,className:"px-3 py-1 border rounded disabled:opacity-50",children:"Next"})]})]})]}),u&&(0,Da.jsx)(_C,{onClose:()=>p(!1),onCreated:()=>{N(),k(),p(!1)}}),m&&x&&(0,Da.jsx)(CC,{tenant:x,onClose:()=>{h(!1),y(null)}}),f&&x&&(0,Da.jsx)(AC,{tenant:x,onClose:()=>{g(!1),y(null)},onAdded:()=>{N(),k(),g(!1),y(null)}})]})},PC=Ha("Code",[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]]),EC=Ha("Terminal",[["polyline",{points:"4 17 10 11 4 5",key:"akl6gq"}],["line",{x1:"12",x2:"20",y1:"19",y2:"19",key:"q2wloq"}]]),TC=Ha("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]),IC=()=>{const{user:e}=Fa(),[t,r]=(0,a.useState)(null),[n,s]=(0,a.useState)(null),[i,o]=(0,a.useState)(!1),[l,c]=(0,a.useState)(!1),[d,u]=(0,a.useState)(!0),[p,m]=(0,a.useState)(!1);(0,a.useEffect)(()=>{h()},[]);const h=async()=>{try{u(!0);const e=await Ma.get("/auth/api-key");r(e.data.api_key),s(e.data.masked_key),o(e.data.has_key)}catch(e){console.error("Failed to fetch API key:",e),nr.error("Failed to load API key")}finally{u(!1)}},f=async()=>{const e=i?"regenerate":"generate";if(!i||window.confirm("Are you sure you want to regenerate your API key? The current key will be invalidated immediately and any integrations using it will stop working."))try{m(!0);const t=await Ma.post("/auth/api-key/generate");r(t.data.api_key),s("".concat(t.data.api_key.substring(0,7),"...").concat(t.data.api_key.substring(t.data.api_key.length-4))),o(!0),c(!0),navigator.clipboard.writeText(t.data.api_key),nr.success("API key ".concat(e,"d and copied to clipboard!"))}catch(t){nr.error("Failed to ".concat(e," API key"))}finally{m(!1)}};return d?(0,Da.jsx)("div",{className:"flex items-center justify-center min-h-64",children:(0,Da.jsx)(vi,{className:"h-8 w-8 animate-spin text-gray-400"})}):(0,Da.jsxs)("div",{className:"space-y-6 max-w-4xl",children:[(0,Da.jsxs)("div",{children:[(0,Da.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"API Settings"}),(0,Da.jsx)("p",{className:"text-gray-600",children:"Manage your API key for programmatic access"})]}),(0,Da.jsx)("div",{className:"bg-white rounded-lg shadow",children:(0,Da.jsxs)("div",{className:"p-6",children:[(0,Da.jsxs)("div",{className:"flex items-start justify-between",children:[(0,Da.jsxs)("div",{className:"flex items-center",children:[(0,Da.jsx)("div",{className:"flex-shrink-0 h-12 w-12 rounded-lg bg-primary-100 flex items-center justify-center",children:(0,Da.jsx)(ai,{className:"h-6 w-6 text-primary-600"})}),(0,Da.jsxs)("div",{className:"ml-4",children:[(0,Da.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"API Key"}),(0,Da.jsx)("p",{className:"text-sm text-gray-500",children:"Use this key to authenticate API requests"})]})]}),(0,Da.jsx)("div",{className:"flex items-center space-x-2",children:i?(0,Da.jsxs)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[(0,Da.jsx)(gs,{className:"h-3 w-3 mr-1"}),"Active"]}):(0,Da.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800",children:"No Key"})})]}),i?(0,Da.jsxs)("div",{className:"mt-6",children:[(0,Da.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Your API Key"}),(0,Da.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Da.jsxs)("div",{className:"flex-1 relative",children:[(0,Da.jsx)("input",{type:l?"text":"password",readOnly:!0,value:l?t:n||"\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022",className:"w-full px-4 py-3 bg-gray-50 border border-gray-300 rounded-lg font-mono text-sm"}),(0,Da.jsx)("button",{onClick:()=>c(!l),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:l?(0,Da.jsx)(bo,{className:"h-5 w-5"}):(0,Da.jsx)(Hi,{className:"h-5 w-5"})})]}),(0,Da.jsx)("button",{onClick:()=>{t&&(navigator.clipboard.writeText(t),nr.success("API key copied to clipboard"))},className:"p-3 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors",title:"Copy to clipboard",children:(0,Da.jsx)(Gs,{className:"h-5 w-5 text-gray-600"})})]}),(0,Da.jsxs)("div",{className:"mt-4 flex space-x-3",children:[(0,Da.jsxs)("button",{onClick:f,disabled:p,className:"flex items-center px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 disabled:opacity-50",children:[(0,Da.jsx)(vi,{className:"h-4 w-4 mr-2 ".concat(p?"animate-spin":"")}),p?"Regenerating...":"Regenerate Key"]}),(0,Da.jsx)("button",{onClick:async()=>{if(window.confirm("Are you sure you want to revoke your API key? Any integrations using it will stop working immediately."))try{await Ma.delete("/auth/api-key"),r(null),s(null),o(!1),c(!1),nr.success("API key revoked successfully")}catch(e){nr.error("Failed to revoke API key")}},className:"flex items-center px-4 py-2 border border-red-300 text-red-600 rounded-lg hover:bg-red-50",children:"Revoke Key"})]})]}):(0,Da.jsx)("div",{className:"mt-6",children:(0,Da.jsxs)("div",{className:"bg-gray-50 border-2 border-dashed border-gray-300 rounded-lg p-8 text-center",children:[(0,Da.jsx)(ai,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,Da.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No API Key Generated"}),(0,Da.jsx)("p",{className:"text-gray-500 mb-4",children:"Generate an API key to start using the AIVA API for your integrations."}),(0,Da.jsxs)("button",{onClick:f,disabled:p,className:"inline-flex items-center px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 disabled:opacity-50",children:[(0,Da.jsx)(ai,{className:"h-4 w-4 mr-2"}),p?"Generating...":"Generate API Key"]})]})})]})}),(0,Da.jsx)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:(0,Da.jsxs)("div",{className:"flex",children:[(0,Da.jsx)(ro,{className:"h-5 w-5 text-yellow-600 mt-0.5"}),(0,Da.jsxs)("div",{className:"ml-3",children:[(0,Da.jsx)("h3",{className:"text-sm font-medium text-yellow-800",children:"Keep your API key secure"}),(0,Da.jsxs)("ul",{className:"mt-2 text-sm text-yellow-700 list-disc list-inside space-y-1",children:[(0,Da.jsx)("li",{children:"Never share your API key in public repositories or client-side code"}),(0,Da.jsx)("li",{children:"Store it securely in environment variables on your server"}),(0,Da.jsx)("li",{children:"Regenerate immediately if you suspect it has been compromised"}),(0,Da.jsx)("li",{children:"Each tenant can only have one active API key at a time"})]})]})]})}),(0,Da.jsx)("div",{className:"bg-white rounded-lg shadow",children:(0,Da.jsxs)("div",{className:"p-6",children:[(0,Da.jsxs)("h2",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[(0,Da.jsx)(PC,{className:"h-5 w-5 mr-2"}),"Usage Examples"]}),(0,Da.jsxs)("div",{className:"space-y-6",children:[(0,Da.jsxs)("div",{children:[(0,Da.jsxs)("h3",{className:"text-sm font-medium text-gray-700 mb-2 flex items-center",children:[(0,Da.jsx)(EC,{className:"h-4 w-4 mr-1"}),"cURL"]}),(0,Da.jsx)("div",{className:"bg-gray-900 rounded-lg p-4 overflow-x-auto",children:(0,Da.jsx)("pre",{className:"text-green-400 text-sm font-mono",children:'curl -X GET "'.concat(window.location.origin,'/aiva/api/agents" \\\n  -H "X-API-Key: ').concat(t||"your_api_key",'" \\\n  -H "Content-Type: application/json"')})})]}),(0,Da.jsxs)("div",{children:[(0,Da.jsx)("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:"JavaScript / Node.js"}),(0,Da.jsx)("div",{className:"bg-gray-900 rounded-lg p-4 overflow-x-auto",children:(0,Da.jsx)("pre",{className:"text-green-400 text-sm font-mono",children:"const response = await fetch('".concat(window.location.origin,"/aiva/api/agents', {\n  method: 'GET',\n  headers: {\n    'X-API-Key': '").concat(t||"your_api_key","',\n    'Content-Type': 'application/json'\n  }\n});\n\nconst data = await response.json();\nconsole.log(data);")})})]}),(0,Da.jsxs)("div",{children:[(0,Da.jsx)("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:"Python"}),(0,Da.jsx)("div",{className:"bg-gray-900 rounded-lg p-4 overflow-x-auto",children:(0,Da.jsx)("pre",{className:"text-green-400 text-sm font-mono",children:"import requests\n\nresponse = requests.get(\n    '".concat(window.location.origin,"/aiva/api/agents',\n    headers={\n        'X-API-Key': '").concat(t||"your_api_key","',\n        'Content-Type': 'application/json'\n    }\n)\n\nprint(response.json())")})})]})]})]})}),(0,Da.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,Da.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Da.jsxs)("div",{children:[(0,Da.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"API Documentation"}),(0,Da.jsx)("p",{className:"text-gray-500",children:"View the complete API reference with all available endpoints"})]}),(0,Da.jsxs)("a",{href:"".concat(window.location.origin,"/aiva/swagger/api-docs"),target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200",children:[(0,Da.jsx)(Mi,{className:"h-4 w-4 mr-2"}),"View Swagger Docs"]})]})}),(0,Da.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,Da.jsxs)("h2",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[(0,Da.jsx)(TC,{className:"h-5 w-5 mr-2"}),"API Key Permissions"]}),(0,Da.jsxs)("p",{className:"text-gray-600 mb-4",children:["Your API key has ",(0,Da.jsx)("strong",{children:"admin-level"})," access to your tenant's resources. This includes:"]}),(0,Da.jsx)("ul",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:["List and manage agents","Access knowledge bases","Start chat sessions","View call logs","Manage functions","Access credit information"].map((e,t)=>(0,Da.jsxs)("li",{className:"flex items-center text-sm text-gray-600",children:[(0,Da.jsx)(gs,{className:"h-4 w-4 text-green-500 mr-2"}),e]},t))})]})]})},MC=Ha("FileAudio",[["path",{d:"M17.5 22h.5c.5 0 1-.2 1.4-.6.4-.4.6-.9.6-1.4V7.5L14.5 2H6c-.5 0-1 .2-1.4.6C4.2 3 4 3.5 4 4v3",key:"1013sb"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["path",{d:"M10 20v-1a2 2 0 1 1 4 0v1a2 2 0 1 1-4 0Z",key:"gqt63y"}],["path",{d:"M6 20v-1a2 2 0 1 0-4 0v1a2 2 0 1 0 4 0Z",key:"cf7lqx"}],["path",{d:"M2 19v-3a6 6 0 0 1 12 0v3",key:"1acxgf"}]]),DC=Ha("Pause",[["rect",{width:"4",height:"16",x:"6",y:"4",key:"iffhe4"}],["rect",{width:"4",height:"16",x:"14",y:"4",key:"sjin7j"}]]),RC=async function(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return(await Ma.get("/languages",{params:{active_only:e}})).data},FC=async e=>(await Ma.get("/languages/agent/".concat(e))).data,LC=async(e,t,r)=>(await Ma.put("/languages/agent/".concat(e),{languages:t,default_language:r})).data,BC=async e=>(await Ma.get("/languages/agent/".concat(e,"/coverage"))).data,UC=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(await Ma.get("/segments/".concat(e),{params:t})).data},zC=async(e,t)=>(await Ma.post("/segments/".concat(e),t)).data,qC=async(e,t,r)=>(await Ma.put("/segments/".concat(e,"/").concat(t),r)).data,WC=async(e,t)=>(await Ma.delete("/segments/".concat(e,"/").concat(t))).data,VC=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(await Ma.get("/templates/".concat(e),{params:t})).data},GC=async(e,t)=>(await Ma.get("/templates/".concat(e,"/").concat(t))).data,HC=async(e,t)=>(await Ma.post("/templates/".concat(e),t)).data,KC=async(e,t,r)=>(await Ma.put("/templates/".concat(e,"/").concat(t),r)).data,YC=async(e,t)=>(await Ma.delete("/templates/".concat(e,"/").concat(t))).data,JC=async function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return(await Ma.post("/templates/".concat(e,"/").concat(t,"/duplicate"),{new_key:r})).data},XC=async function(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"en";return(await Ma.post("/templates/".concat(e,"/").concat(t,"/preview"),{variables:r,language:n})).data},$C=async(e,t)=>(await Ma.post("/templates/".concat(e,"/validate"),{template_structure:t})).data,QC=async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return(await Ma.get("/flows/".concat(e),{params:{include_inactive:t}})).data},ZC=async(e,t)=>(await Ma.get("/flows/".concat(e,"/").concat(t))).data,eA=async(e,t)=>(await Ma.post("/flows/".concat(e),t)).data,tA=async(e,t,r)=>(await Ma.put("/flows/".concat(e,"/").concat(t),r)).data,rA=async(e,t)=>(await Ma.delete("/flows/".concat(e,"/").concat(t))).data,nA=async(e,t)=>(await Ma.post("/flows/".concat(e,"/").concat(t,"/duplicate"))).data,aA=async(e,t,r)=>(await Ma.post("/flows/".concat(e,"/").concat(t,"/steps"),r)).data,sA=async(e,t,r,n)=>(await Ma.put("/flows/".concat(e,"/").concat(t,"/steps/").concat(r),n)).data,iA=async(e,t,r,n,a)=>(await Ma.put("/flows/".concat(e,"/").concat(t,"/i18n/").concat(r,"/").concat(n),a)).data,oA=async(e,t)=>(await Ma.get("/flows/".concat(e,"/").concat(t,"/i18n"))).data,lA=async e=>(await Ma.get("/ivr/".concat(e,"/config"))).data,cA=async(e,t)=>(await Ma.put("/ivr/".concat(e,"/config"),t)).data,dA=async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return(await Ma.get("/ivr/".concat(e,"/intents"),{params:{include_inactive:t}})).data},uA=async(e,t)=>(await Ma.post("/ivr/".concat(e,"/intents"),t)).data,pA=async(e,t,r)=>(await Ma.put("/ivr/".concat(e,"/intents/").concat(t),r)).data,mA=async(e,t)=>(await Ma.delete("/ivr/".concat(e,"/intents/").concat(t))).data,hA=async e=>(await Ma.get("/ivr/".concat(e,"/cache/stats"))).data,fA=async(e,t)=>{const r="object"===typeof t?{text:t.text,name:t.name,description:t.description,language:t.language||"en",voice_id:t.voice_id||t.voiceId||null}:{text:t,language:"en",voice_id:null};return(await Ma.post("/ivr/".concat(e,"/audio/generate"),r)).data},gA=async function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const n=new FormData;n.append("audio",t),Object.keys(r).forEach(e=>{n.append(e,r[e])});return(await Ma.post("/ivr/".concat(e,"/audio/upload"),n,{headers:{"Content-Type":"multipart/form-data"}})).data},xA=async(e,t)=>(await Ma.delete("/ivr/".concat(e,"/audio/").concat(t))).data,yA=async(e,t)=>(await Ma.post("/ivr/".concat(e,"/audio"),t)).data,vA=async e=>(await Ma.get("/ivr/".concat(e,"/audio"))).data,bA=(e,t)=>{const r=localStorage.getItem("token");return"".concat(Ma.defaults.baseURL,"/ivr/").concat(e,"/audio/").concat(t,"/stream?token=").concat(r)},jA=[{value:"prefix",label:"Prefix",description:"Start of a sentence"},{value:"connector",label:"Connector",description:"Middle of a sentence"},{value:"suffix",label:"Suffix",description:"End of a sentence"},{value:"standalone",label:"Standalone",description:"Complete sentence"}],wA=[{value:"name",label:"Name",description:"Person name"},{value:"phone",label:"Phone Number",description:"Phone/mobile number"},{value:"email",label:"Email",description:"Email address"},{value:"number",label:"Number",description:"Numeric value"},{value:"alphanumeric",label:"Alphanumeric",description:"Order/Invoice number"},{value:"address",label:"Address",description:"Street address"},{value:"city",label:"City",description:"City name"},{value:"date",label:"Date",description:"Date value"},{value:"time",label:"Time",description:"Time value"},{value:"yes_no",label:"Yes/No",description:"Confirmation"},{value:"choice",label:"Choice",description:"Multiple choice"},{value:"freeform",label:"Free Text",description:"Any text"}],NA=[{value:"collect_slot",label:"Collect Information",icon:"MessageSquare"},{value:"confirm",label:"Confirm Value",icon:"CheckCircle"},{value:"respond",label:"Speak Message",icon:"Volume2"},{value:"branch",label:"Branch/Condition",icon:"GitBranch"},{value:"function",label:"Call Function",icon:"Zap"},{value:"transfer",label:"Transfer Call",icon:"Phone"}],kA=[{value:"function_call",label:"Call Function"},{value:"transfer",label:"Transfer Call"},{value:"respond",label:"Speak & End"},{value:"end_call",label:"End Call"}],SA=e=>e.toLowerCase().replace(/[^a-z0-9\s]/g,"").replace(/\s+/g,"_").substring(0,50),_A=e=>e.toLowerCase().replace(/[^a-z0-9\s]/g,"").replace(/\s+/g,"_").substring(0,50),CA=e=>e.toLowerCase().replace(/[^a-z0-9\s]/g,"").replace(/\s+/g,"_").substring(0,30),AA=async(e,t,r)=>(await Ma.get("/flows/".concat(e,"/").concat(t,"/steps/").concat(r,"/i18n"))).data,OA=async(e,t,r,n,a,s)=>(await Ma.put("/flows/".concat(e,"/").concat(t,"/steps/").concat(r,"/i18n/").concat(n,"/").concat(a),s)).data,PA=async(e,t)=>(await Ma.get("/ivr/".concat(e,"/intents/").concat(t,"/i18n"))).data,EA=async(e,t,r,n,a)=>(await Ma.put("/ivr/".concat(e,"/intents/").concat(t,"/i18n/").concat(r,"/").concat(n),a)).data,TA=async e=>(await Ma.get("/ivr/".concat(e,"/config/i18n"))).data,IA=async(e,t,r,n)=>(await Ma.put("/ivr/".concat(e,"/config/i18n/").concat(t,"/").concat(r),n)).data,MA=async(e,t)=>(await Ma.get("/internal/i18n/".concat(e,"/").concat(t))).data,DA=async(e,t,r,n,a)=>(await Ma.put("/internal/i18n/".concat(e,"/").concat(t,"/").concat(r,"/").concat(n),a)).data,RA=e=>{let{languages:t,activeLanguage:r,onLanguageChange:n,contentStatus:a,defaultLanguage:s}=e;return!t||t.length<=1?null:(0,Da.jsxs)("div",{className:"flex items-center gap-1 mb-3 pb-2 border-b border-gray-200 overflow-x-auto",children:[(0,Da.jsx)(ds,{className:"w-4 h-4 text-gray-400 flex-shrink-0 mr-1"}),t.map(e=>{const t=r===e.language_code,i=a[e.language_code],o=e.language_code===s;return(0,Da.jsxs)("button",{type:"button",onClick:()=>n(e.language_code),className:"\n                            flex items-center gap-1 px-3 py-1.5 rounded-md text-sm font-medium\n                            transition-colors whitespace-nowrap\n                            ".concat(t?"bg-blue-100 text-blue-700 border border-blue-300":"text-gray-600 hover:bg-gray-100 border border-transparent","\n                        "),children:[(0,Da.jsx)("span",{children:e.flag||"\ud83c\udf10"}),(0,Da.jsx)("span",{children:e.name||e.language_code}),i&&(0,Da.jsx)(Vs,{className:"w-3 h-3 text-green-500"}),o&&!i&&(0,Da.jsx)("span",{className:"text-xs text-gray-400",children:"(default)"}),!o&&!i&&(0,Da.jsx)(gi,{className:"w-3 h-3 text-amber-400"})]},e.language_code)})]})},FA=e=>{let{audioId:t,onAudioChange:r,audioFiles:n,agentId:s,language:i,text:o,generating:l,onGenerate:c,onPlay:d,isPlaying:u}=e;const[p,m]=(0,a.useState)(t?"library":"none");return(0,a.useEffect)(()=>{m(t?"library":"none")},[t]),(0,Da.jsxs)("div",{className:"flex items-center gap-3 text-sm flex-wrap",children:[(0,Da.jsx)("span",{className:"text-gray-500",children:"Audio:"}),(0,Da.jsxs)("select",{value:p,onChange:e=>{m(e.target.value),"none"===e.target.value&&r(null)},className:"px-2 py-1 border rounded text-sm",children:[(0,Da.jsx)("option",{value:"none",children:"None (TTS at runtime)"}),(0,Da.jsx)("option",{value:"library",children:"From Library"})]}),"library"===p&&(0,Da.jsxs)("select",{value:t||"",onChange:e=>r(e.target.value||null),className:"px-2 py-1 border rounded text-sm flex-1 min-w-[150px]",children:[(0,Da.jsx)("option",{value:"",children:"Select audio..."}),(n||[]).map(e=>(0,Da.jsx)("option",{value:e.id,children:e.name},e.id))]}),t&&(0,Da.jsx)("button",{type:"button",onClick:d,className:"p-1.5 rounded hover:bg-gray-100",title:"Play audio",children:u?(0,Da.jsx)(DC,{className:"w-4 h-4 text-blue-600"}):(0,Da.jsx)(xs,{className:"w-4 h-4 text-gray-600"})}),(0,Da.jsxs)("button",{type:"button",onClick:c,disabled:l||!o,className:"flex items-center gap-1 px-2 py-1 bg-green-100 text-green-700 rounded hover:bg-green-200 disabled:opacity-50 disabled:cursor-not-allowed",title:"Generate TTS audio",children:[l?(0,Da.jsx)(ki,{className:"w-3 h-3 animate-spin"}):(0,Da.jsx)(Rs,{className:"w-3 h-3"}),(0,Da.jsx)("span",{children:"Generate"})]})]})},LA=e=>{var t;let{label:r,entityType:n,entityId:s,flowId:i,fieldName:o,baseTextValue:l="",baseAudioId:c=null,onBaseTextChange:d,onBaseAudioChange:u,languages:p=[],defaultLanguage:m="en",audioFiles:h=[],agentId:f,placeholder:g="",multiline:x=!1,rows:y=3}=e;const[v,b]=(0,a.useState)(m),[j,w]=(0,a.useState)({}),[N,k]=(0,a.useState)(!1),[S,_]=(0,a.useState)(!1),[C,A]=(0,a.useState)(!1),[O,P]=(0,a.useState)(null),E=(0,a.useRef)(new Audio),T=p.map(e=>({language_code:e.language_code||e.code,name:e.name,flag:e.flag||"\ud83c\udf10",is_default:e.is_default||e.language_code===m})),I=(null===(t=T.find(e=>e.is_default))||void 0===t?void 0:t.language_code)||m;(0,a.useEffect)(()=>{s&&n&&M()},[s,n,o]),(0,a.useEffect)(()=>()=>{E.current.pause(),E.current.src=""},[]);const M=async()=>{if(s&&f)try{var e;let t;switch(k(!0),n){case"flow":t=await oA(f,s);break;case"step":if(!i)return void console.warn("flowId required for step i18n");t=await AA(f,i,s);break;case"intent":t=await PA(f,s);break;case"config":t=await TA(f);break;default:t=await MA(n,s)}const r=((null===(e=t)||void 0===e?void 0:e.data)||{})[o]||{};w(r)}catch(t){console.error("Failed to load i18n content:",t)}finally{k(!1)}},D=(0,a.useCallback)(async(e,t,r)=>{if(s&&f)try{_(!0);const a={text_content:t,audio_id:r};switch(n){case"flow":await iA(f,s,o,e,a);break;case"step":if(!i)return void console.warn("flowId required for step i18n");await OA(f,i,s,o,e,a);break;case"intent":await EA(f,s,o,e,a);break;case"config":await IA(f,o,e,a);break;default:await DA(n,s,o,e,a)}w(n=>qe(qe({},n),{},{[e]:{text_content:t,audio_id:r}}))}catch(a){console.error("Failed to save i18n content:",a),nr.error("Failed to save translation")}finally{_(!1)}},[s,n,o,f,i]),R=()=>{const e=j[v];return null!==e&&void 0!==e&&e.text_content?e.text_content:v===I&&l||""},F=()=>{const e=j[v];return null!==e&&void 0!==e&&e.audio_id?e.audio_id:v===I?c:null},L=e=>{v===I&&(null===d||void 0===d||d(e));F();w(t=>qe(qe({},t),{},{[v]:qe(qe({},t[v]),{},{text_content:e})}))},B=e=>{v===I&&(null===u||void 0===u||u(e));const t=R();D(v,t,e)},U=()=>{const e=R(),t=F();(v!==I||j[v])&&D(v,e,t)},z={};T.forEach(e=>{var t,r;const n=e.language_code,a=(null===(t=j[n])||void 0===t?void 0:t.text_content)||(null===(r=j[n])||void 0===r?void 0:r.audio_id),s=n===I&&(l||c);z[n]=a||s});const q=R(),W=F(),V=T.find(e=>e.language_code===v),G=["ur","ar","ar-eg","ar-sa","ps","sd","bal"].includes(v);return(0,Da.jsxs)("div",{className:"space-y-2",children:[(0,Da.jsxs)("label",{className:"block text-sm font-medium text-gray-700",children:[r,S&&(0,Da.jsxs)("span",{className:"ml-2 text-xs text-blue-500",children:[(0,Da.jsx)(ki,{className:"w-3 h-3 inline animate-spin"})," Saving..."]})]}),T.length>1&&(0,Da.jsx)(RA,{languages:T,activeLanguage:v,onLanguageChange:b,contentStatus:z,defaultLanguage:I}),N?(0,Da.jsx)("div",{className:"flex items-center justify-center py-4",children:(0,Da.jsx)(ki,{className:"w-5 h-5 animate-spin text-gray-400"})}):x?(0,Da.jsx)("textarea",{value:q,onChange:e=>L(e.target.value),onBlur:U,placeholder:g,rows:y,dir:G?"rtl":"ltr",className:"\n                        w-full px-3 py-2 border rounded-lg\n                        focus:ring-2 focus:ring-blue-500 focus:border-blue-500\n                        ".concat(G?"text-right":"text-left","\n                    ")}):(0,Da.jsx)("input",{type:"text",value:q,onChange:e=>L(e.target.value),onBlur:U,placeholder:g,dir:G?"rtl":"ltr",className:"\n                        w-full px-3 py-2 border rounded-lg\n                        focus:ring-2 focus:ring-blue-500 focus:border-blue-500\n                        ".concat(G?"text-right":"text-left","\n                    ")}),(0,Da.jsx)(FA,{audioId:W,onAudioChange:B,audioFiles:h,agentId:f,language:v,text:q,generating:C,onGenerate:async()=>{const e=R();if(e)try{var t;A(!0);const r=await fA(f,{text:e,language:v,name:"".concat(o,"_").concat(v)});null!==(t=r.data)&&void 0!==t&&t.id&&(B(r.data.id),nr.success("Audio generated and saved"))}catch(r){console.error("TTS generation failed:",r),nr.error("Failed to generate audio")}finally{A(!1)}else nr.error("Enter text first")},onPlay:()=>{const e=F();if(e)if(O===e)E.current.pause(),P(null);else{const t=bA(f,e);E.current.src=t,E.current.play(),P(e),E.current.onended=()=>P(null)}},isPlaying:O===W}),v!==I&&!z[v]&&(0,Da.jsxs)("p",{className:"text-xs text-amber-600 flex items-center gap-1",children:[(0,Da.jsx)(gi,{className:"w-3 h-3"}),"No translation for ",null===V||void 0===V?void 0:V.name,". Will use ",I," at runtime."]})]})},BA=[{value:"static",label:"Static Response",icon:rs,description:"Pre-defined response played directly"},{value:"kb_lookup",label:"Knowledge Base",icon:pi,description:"Search KB and respond with results"},{value:"function_call",label:"Function Call",icon:Ws,description:"Execute function and respond with result"},{value:"transfer",label:"Transfer Call",icon:Ja,description:"Transfer to human agent/queue"},{value:"collect_input",label:"Collect Input",icon:Rs,description:"Collect specific information from caller"},{value:"flow",label:"Start Flow",description:"Start a conversation flow"}],UA=e=>{var t;let{agentId:r,intents:n,audioFiles:s,flows:i,languages:o,onRefresh:l,onPlayAudio:c,playingAudio:d}=e;const[u,p]=(0,a.useState)(!1),[m,h]=(0,a.useState)(null),[f,g]=(0,a.useState)(!1),[x,y]=(0,a.useState)(null),[v,b]=(0,a.useState)({intent_name:"",intent_type:"static",description:"",trigger_phrases:[""],response_text:"",response_audio_id:"",auto_regenerate:!0,kb_search_query_template:"",action_type:"respond",transfer_queue:"",function_name:"",confidence_threshold:.7,priority:0,is_active:!0,flow_id:""}),[j,w]=(0,a.useState)(!1),N=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;var t;e?(h(e),b({intent_name:e.intent_name||"",intent_type:e.intent_type||"static",description:e.description||"",trigger_phrases:null!==(t=e.trigger_phrases)&&void 0!==t&&t.length?e.trigger_phrases:[""],response_text:e.response_text||"",response_audio_id:e.response_audio_id||"",auto_regenerate:!1!==e.auto_regenerate,kb_search_query_template:e.kb_search_query_template||"",action_type:e.action_type||"respond",transfer_queue:e.transfer_queue||"",function_name:e.function_name||"",confidence_threshold:e.confidence_threshold||.7,priority:e.priority||0,is_active:!1!==e.is_active,flow_id:e.flow_id||""})):(h(null),b({intent_name:"",intent_type:"static",description:"",trigger_phrases:[""],response_text:"",response_audio_id:"",auto_regenerate:!0,kb_search_query_template:"",action_type:"respond",transfer_queue:"",function_name:"",confidence_threshold:.7,priority:0,is_active:!0,flow_id:""}));p(!0)};return(0,Da.jsxs)("div",{className:"space-y-6",children:[(0,Da.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Da.jsxs)("div",{children:[(0,Da.jsx)("h2",{className:"text-lg font-medium text-gray-900",children:"Intent Configuration"}),(0,Da.jsx)("p",{className:"text-sm text-gray-500",children:"Define intents and their responses"})]}),(0,Da.jsxs)("button",{onClick:()=>N(),className:"inline-flex items-center px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700",children:[(0,Da.jsx)(Qa,{className:"w-4 h-4 mr-2"}),"Add Intent"]})]}),0===n.length?(0,Da.jsxs)("div",{className:"text-center py-12 bg-gray-50 rounded-lg",children:[(0,Da.jsx)(rs,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),(0,Da.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Intents"}),(0,Da.jsx)("p",{className:"text-gray-500 mb-4",children:"Create intents to handle caller requests"}),(0,Da.jsxs)("button",{onClick:()=>N(),className:"inline-flex items-center px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700",children:[(0,Da.jsx)(Qa,{className:"w-4 h-4 mr-2"}),"Add First Intent"]})]}):(0,Da.jsx)("div",{className:"space-y-3",children:n.map(e=>{var t,n;return(0,Da.jsx)("div",{className:"bg-white rounded-lg border p-4 ".concat(e.is_active?"":"opacity-60"),children:(0,Da.jsxs)("div",{className:"flex items-start justify-between",children:[(0,Da.jsxs)("div",{className:"flex-1",children:[(0,Da.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Da.jsx)("h3",{className:"font-medium text-gray-900",children:e.intent_name}),(0,Da.jsx)("span",{className:"px-2 py-0.5 text-xs rounded-full ".concat("static"===e.intent_type?"bg-blue-100 text-blue-700":"kb_lookup"===e.intent_type?"bg-purple-100 text-purple-700":"function_call"===e.intent_type?"bg-yellow-100 text-yellow-700":"transfer"===e.intent_type?"bg-red-100 text-red-700":"bg-gray-100 text-gray-700"),children:e.intent_type}),e.response_audio_id&&(0,Da.jsxs)("span",{className:"px-2 py-0.5 text-xs bg-green-100 text-green-700 rounded-full flex items-center",children:[(0,Da.jsx)(ls,{className:"w-3 h-3 mr-1"}),"Audio Ready"]}),e.flow_id&&(0,Da.jsxs)("span",{className:"px-2 py-0.5 text-xs bg-purple-100 text-purple-700 rounded-full flex items-center",children:[(0,Da.jsx)(os,{className:"w-3 h-3 mr-1"}),"Flow"]}),!e.is_active&&(0,Da.jsx)("span",{className:"px-2 py-0.5 text-xs bg-gray-100 text-gray-600 rounded-full",children:"Inactive"})]}),e.description&&(0,Da.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:e.description}),(0,Da.jsxs)("div",{className:"mt-2 flex flex-wrap gap-2",children:[null===(t=e.trigger_phrases)||void 0===t?void 0:t.slice(0,3).map((e,t)=>(0,Da.jsxs)("span",{className:"px-2 py-1 text-xs bg-gray-100 text-gray-700 rounded",children:['"',e,'"']},t)),(null===(n=e.trigger_phrases)||void 0===n?void 0:n.length)>3&&(0,Da.jsxs)("span",{className:"px-2 py-1 text-xs text-gray-500",children:["+",e.trigger_phrases.length-3," more"]})]}),(0,Da.jsxs)("div",{className:"mt-2 text-xs text-gray-500",children:["Matched ",e.match_count||0," times"]})]}),(0,Da.jsxs)("div",{className:"flex items-center space-x-2",children:[e.response_audio_id&&(0,Da.jsx)("button",{onClick:()=>c(e.response_audio_id),className:"p-2 hover:bg-gray-100 rounded-lg",title:"Play audio",children:d===e.response_audio_id?(0,Da.jsx)(DC,{className:"w-4 h-4 text-primary-600"}):(0,Da.jsx)(xs,{className:"w-4 h-4 text-gray-600"})}),e.response_text&&!e.response_audio_id&&(0,Da.jsx)("button",{onClick:()=>(async e=>{if(e.response_text)try{var t;w(!0);const n=await fA(r,e.response_text);null!==(t=n.data)&&void 0!==t&&t.id&&(await pA(r,e.id,{response_audio_id:n.data.id}),nr.success("Audio generated and saved"),l())}catch(n){nr.error("Failed to generate audio")}finally{w(!1)}else nr.error("No response text to generate audio from")})(e),className:"p-2 hover:bg-gray-100 rounded-lg",title:"Generate audio",children:(0,Da.jsx)(ls,{className:"w-4 h-4 text-gray-600"})}),(0,Da.jsx)("button",{onClick:()=>N(e),className:"p-2 hover:bg-gray-100 rounded-lg",title:"Edit",children:(0,Da.jsx)(ts,{className:"w-4 h-4 text-gray-600"})}),(0,Da.jsx)("button",{onClick:()=>(async e=>{if(window.confirm("Delete this intent?"))try{y(e),await mA(r,e),nr.success("Intent deleted"),l()}catch(t){nr.error("Failed to delete intent")}finally{y(null)}})(e.id),disabled:x===e.id,className:"p-2 hover:bg-red-50 rounded-lg",title:"Delete",children:x===e.id?(0,Da.jsx)(ki,{className:"w-4 h-4 animate-spin text-red-600"}):(0,Da.jsx)(ns,{className:"w-4 h-4 text-red-600"})})]})]})},e.id)})}),u&&(0,Da.jsx)("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:(0,Da.jsxs)("div",{className:"flex items-center justify-center min-h-screen px-4",children:[(0,Da.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50",onClick:()=>p(!1)}),(0,Da.jsxs)("div",{className:"relative bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[(0,Da.jsx)("div",{className:"sticky top-0 bg-white px-6 py-4 border-b z-10",children:(0,Da.jsx)("h3",{className:"text-lg font-semibold",children:m?"Edit Intent":"Create Intent"})}),(0,Da.jsxs)("div",{className:"p-6 space-y-6",children:[(0,Da.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,Da.jsxs)("div",{children:[(0,Da.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Intent Name *"}),(0,Da.jsx)("input",{type:"text",value:v.intent_name,onChange:e=>b(qe(qe({},v),{},{intent_name:e.target.value})),className:"w-full border rounded-lg px-3 py-2",placeholder:"e.g., greeting, order_status"})]}),(0,Da.jsxs)("div",{children:[(0,Da.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Intent Type"}),(0,Da.jsx)("select",{value:v.intent_type,onChange:e=>b(qe(qe({},v),{},{intent_type:e.target.value})),className:"w-full border rounded-lg px-3 py-2",children:BA.map(e=>(0,Da.jsx)("option",{value:e.value,children:e.label},e.value))})]}),"flow"===v.intent_type&&(0,Da.jsxs)("div",{className:"md:col-span-2 p-4 bg-purple-50 border border-purple-200 rounded-lg",children:[(0,Da.jsx)("label",{className:"block text-sm font-medium text-purple-700 mb-1",children:(0,Da.jsxs)("span",{className:"flex items-center gap-2",children:[(0,Da.jsx)(os,{className:"w-4 h-4"}),"Select Conversation Flow *"]})}),(0,Da.jsxs)("select",{value:v.flow_id||"",onChange:e=>b(qe(qe({},v),{},{flow_id:e.target.value||null})),className:"w-full border border-purple-300 rounded-lg px-3 py-2 bg-white",required:!0,children:[(0,Da.jsx)("option",{value:"",children:"-- Select a Flow --"}),i.filter(e=>e.is_active).map(e=>(0,Da.jsxs)("option",{value:e.id,children:[e.flow_name," ",e.description?"- ".concat(e.description):""]},e.id))]}),0===i.filter(e=>e.is_active).length&&(0,Da.jsx)("p",{className:"text-sm text-red-600 mt-2",children:"\u26a0\ufe0f No active flows available. Please create a flow first in the Flows tab."}),(0,Da.jsx)("p",{className:"text-xs text-purple-600 mt-1",children:"When this intent matches, the selected flow will be started"})]})]}),(0,Da.jsxs)("div",{children:[(0,Da.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),(0,Da.jsx)("input",{type:"text",value:v.description,onChange:e=>b(qe(qe({},v),{},{description:e.target.value})),className:"w-full border rounded-lg px-3 py-2",placeholder:"Brief description of this intent"})]}),(0,Da.jsxs)("div",{children:[(0,Da.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Trigger Phrases *"}),(0,Da.jsx)("div",{className:"space-y-2",children:v.trigger_phrases.map((e,t)=>(0,Da.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Da.jsx)("input",{type:"text",value:e,onChange:e=>((e,t)=>{const r=[...v.trigger_phrases];r[e]=t,b(qe(qe({},v),{},{trigger_phrases:r}))})(t,e.target.value),className:"flex-1 border rounded-lg px-3 py-2",placeholder:"e.g., \u0627\u0644\u0633\u0644\u0627\u0645 \u0639\u0644\u06cc\u06a9\u0645, hello, hi"}),v.trigger_phrases.length>1&&(0,Da.jsx)("button",{onClick:()=>(e=>{const t=v.trigger_phrases.filter((t,r)=>r!==e);b(qe(qe({},v),{},{trigger_phrases:t.length?t:[""]}))})(t),className:"p-2 hover:bg-red-50 rounded-lg",children:(0,Da.jsx)(ns,{className:"w-4 h-4 text-red-600"})})]},t))}),(0,Da.jsx)("button",{onClick:()=>{b(qe(qe({},v),{},{trigger_phrases:[...v.trigger_phrases,""]}))},className:"mt-2 text-sm text-primary-600 hover:text-primary-700",children:"+ Add another phrase"})]}),"static"===v.intent_type&&(0,Da.jsxs)("div",{children:[(0,Da.jsx)(LA,{label:"Response Text",entityType:"intent",entityId:null===m||void 0===m?void 0:m.id,fieldName:"response_text",baseTextValue:v.response_text,baseAudioId:v.response_audio_id,onBaseTextChange:e=>b(qe(qe({},v),{},{response_text:e})),onBaseAudioChange:e=>b(qe(qe({},v),{},{response_audio_id:e})),languages:o,defaultLanguage:(null===o||void 0===o||null===(t=o.find(e=>e.is_default))||void 0===t?void 0:t.language_code)||"en",audioFiles:s,agentId:r,placeholder:"\u0627\u0644\u0633\u0644\u0627\u0645 \u0639\u0644\u06cc\u06a9\u0645! \u0645\u06cc\u06ba \u0622\u067e \u06a9\u06cc \u06a9\u06cc\u0627 \u0645\u062f\u062f \u06a9\u0631 \u0633\u06a9\u062a\u0627 \u06c1\u0648\u06ba\u061f",multiline:!0}),(0,Da.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"This text will be converted to speech or you can upload pre-recorded audio"})]}),"kb_lookup"===v.intent_type&&(0,Da.jsxs)("div",{children:[(0,Da.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Response Audio File (Optional)"}),(0,Da.jsxs)("select",{value:v.response_audio_id||"",onChange:e=>b(qe(qe({},v),{},{response_audio_id:e.target.value||null})),className:"w-full border rounded-lg px-3 py-2",children:[(0,Da.jsx)("option",{value:"",children:"None - Use generated TTS"}),s.map(e=>(0,Da.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),"kb_lookup"===v.intent_type&&(0,Da.jsxs)("div",{children:[(0,Da.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"KB Search Query"}),(0,Da.jsx)("input",{type:"text",value:v.kb_search_query_template||"",onChange:e=>b(qe(qe({},v),{},{kb_search_query_template:e.target.value})),className:"w-full border rounded-lg px-3 py-2",placeholder:"e.g., sales CRM features benefits pricing"}),(0,Da.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["Keywords to search in KB. Use ","{query}"," to include user's question. Leave empty to use intent description."]})]}),"kb_lookup"===v.intent_type&&(0,Da.jsxs)("div",{className:"flex items-center gap-3 p-3 bg-blue-50 rounded-lg",children:[(0,Da.jsx)("input",{type:"checkbox",id:"auto_regenerate",checked:v.auto_regenerate,onChange:e=>b(qe(qe({},v),{},{auto_regenerate:e.target.checked})),className:"w-4 h-4 text-primary-600 rounded"}),(0,Da.jsxs)("label",{htmlFor:"auto_regenerate",className:"text-sm",children:[(0,Da.jsx)("span",{className:"font-medium text-gray-900",children:"Auto-generate & cache audio"}),(0,Da.jsx)("p",{className:"text-gray-500",children:"Generate audio on first call and cache for future use. Regenerates if audio is deleted."})]})]}),"transfer"===v.intent_type&&(0,Da.jsxs)("div",{children:[(0,Da.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Transfer Queue"}),(0,Da.jsx)("input",{type:"text",value:v.transfer_queue,onChange:e=>b(qe(qe({},v),{},{transfer_queue:e.target.value})),className:"w-full border rounded-lg px-3 py-2",placeholder:"e.g., support, sales"})]}),"function_call"===v.intent_type&&(0,Da.jsxs)("div",{children:[(0,Da.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Function Name"}),(0,Da.jsx)("input",{type:"text",value:v.function_name,onChange:e=>b(qe(qe({},v),{},{function_name:e.target.value})),className:"w-full border rounded-lg px-3 py-2",placeholder:"e.g., check_order_status"})]}),(0,Da.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,Da.jsxs)("div",{children:[(0,Da.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Confidence Threshold"}),(0,Da.jsx)("input",{type:"number",step:"0.05",min:"0",max:"1",value:v.confidence_threshold,onChange:e=>b(qe(qe({},v),{},{confidence_threshold:parseFloat(e.target.value)})),className:"w-full border rounded-lg px-3 py-2"})]}),(0,Da.jsxs)("div",{children:[(0,Da.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Priority"}),(0,Da.jsx)("input",{type:"number",value:v.priority,onChange:e=>b(qe(qe({},v),{},{priority:parseInt(e.target.value)})),className:"w-full border rounded-lg px-3 py-2"})]})]}),"flow"!==v.intent_type&&(0,Da.jsxs)("div",{className:"border-t pt-4",children:[(0,Da.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:(0,Da.jsxs)("span",{className:"flex items-center gap-2",children:[(0,Da.jsx)(os,{className:"w-4 h-4 text-purple-600"}),"Link to Conversation Flow (Optional)"]})}),(0,Da.jsxs)("select",{value:v.flow_id||"",onChange:e=>b(qe(qe({},v),{},{flow_id:e.target.value||null})),className:"w-full border rounded-lg px-3 py-2",children:[(0,Da.jsx)("option",{value:"",children:"No flow - use response above"}),i.filter(e=>e.is_active).map(e=>(0,Da.jsxs)("option",{value:e.id,children:[e.flow_name," ",e.description?"- ".concat(e.description):""]},e.id))]}),(0,Da.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"If selected, this intent will start the conversation flow instead of responding directly"})]}),(0,Da.jsxs)("div",{className:"flex items-center",children:[(0,Da.jsx)("input",{type:"checkbox",id:"is_active",checked:v.is_active,onChange:e=>b(qe(qe({},v),{},{is_active:e.target.checked})),className:"h-4 w-4 text-primary-600 rounded"}),(0,Da.jsx)("label",{htmlFor:"is_active",className:"ml-2 text-sm text-gray-700",children:"Active (enable matching)"})]})]}),(0,Da.jsxs)("div",{className:"sticky bottom-0 bg-gray-50 px-6 py-4 border-t flex justify-end space-x-3",children:[(0,Da.jsx)("button",{onClick:()=>p(!1),className:"px-4 py-2 text-gray-700 bg-white border rounded-lg hover:bg-gray-50",children:"Cancel"}),(0,Da.jsx)("button",{onClick:async()=>{if(!v.intent_name)return void nr.error("Intent name is required");const e=v.trigger_phrases.filter(e=>e.trim());if(0!==e.length)if("flow"!==v.intent_type||v.flow_id)try{g(!0);const t=qe(qe({},v),{},{trigger_phrases:e});m?(await pA(r,m.id,t),nr.success("Intent updated")):(await uA(r,t),nr.success("Intent created")),p(!1),l()}catch(a){var t,n;nr.error((null===(t=a.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.error)||"Failed to save intent")}finally{g(!1)}else nr.error("Please select a conversation flow");else nr.error("At least one trigger phrase is required")},disabled:f,className:"px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 disabled:opacity-50",children:f?(0,Da.jsx)(ki,{className:"w-4 h-4 animate-spin"}):m?"Update":"Create"})]})]})]})})]})},zA=e=>{let{agentId:t,audioFiles:r,onRefresh:n,onPlayAudio:s,playingAudio:i}=e;const[o,l]=(0,a.useState)(!1),[c,d]=(0,a.useState)(null),[u,p]=(0,a.useState)(!1),[m,h]=(0,a.useState)(""),[f,g]=(0,a.useState)(""),x=(0,a.useRef)(null);return(0,Da.jsxs)("div",{className:"space-y-6",children:[(0,Da.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,Da.jsxs)("div",{className:"bg-gray-50 rounded-lg p-6 border-2 border-dashed",children:[(0,Da.jsx)("input",{ref:x,type:"file",accept:"audio/*",onChange:async e=>{var r;const a=null===(r=e.target.files)||void 0===r?void 0:r[0];if(a)try{l(!0),await gA(t,a),nr.success("Audio uploaded"),n()}catch(s){nr.error("Failed to upload audio")}finally{l(!1),x.current&&(x.current.value="")}},className:"hidden"}),(0,Da.jsxs)("div",{className:"text-center",children:[(0,Da.jsx)(yi,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),(0,Da.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Upload Audio"}),(0,Da.jsx)("p",{className:"text-sm text-gray-500 mb-4",children:"MP3, WAV, or other audio formats"}),(0,Da.jsxs)("button",{onClick:()=>{var e;return null===(e=x.current)||void 0===e?void 0:e.click()},disabled:o,className:"inline-flex items-center px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 disabled:opacity-50",children:[o?(0,Da.jsx)(ki,{className:"w-4 h-4 mr-2 animate-spin"}):(0,Da.jsx)(yi,{className:"w-4 h-4 mr-2"}),"Select File"]})]})]}),(0,Da.jsxs)("div",{className:"bg-gray-50 rounded-lg p-6 border",children:[(0,Da.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Generate from Text"}),(0,Da.jsxs)("div",{className:"space-y-3",children:[(0,Da.jsx)("input",{type:"text",value:f,onChange:e=>g(e.target.value),placeholder:"Audio name (optional)",className:"w-full border rounded-lg px-3 py-2"}),(0,Da.jsx)("textarea",{value:m,onChange:e=>h(e.target.value),placeholder:"Enter text to convert to speech...",rows:3,className:"w-full border rounded-lg px-3 py-2"}),(0,Da.jsxs)("button",{onClick:async()=>{if(m.trim())try{p(!0),await fA(t,{text:m,name:f||"Generated Audio"}),nr.success("Audio generated"),h(""),g(""),n()}catch(e){nr.error("Failed to generate audio")}finally{p(!1)}else nr.error("Enter text to generate")},disabled:u||!m.trim(),className:"w-full inline-flex items-center justify-center px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50",children:[u?(0,Da.jsx)(ki,{className:"w-4 h-4 mr-2 animate-spin"}):(0,Da.jsx)(Rs,{className:"w-4 h-4 mr-2"}),"Generate Audio"]})]})]})]}),(0,Da.jsxs)("div",{children:[(0,Da.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Audio Library"}),0===r.length?(0,Da.jsxs)("div",{className:"text-center py-12 bg-gray-50 rounded-lg",children:[(0,Da.jsx)(MC,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),(0,Da.jsx)("p",{className:"text-gray-500",children:"No audio files yet"})]}):(0,Da.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:r.map(e=>(0,Da.jsx)("div",{className:"bg-white rounded-lg border p-4",children:(0,Da.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Da.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,Da.jsx)("h4",{className:"font-medium text-gray-900 truncate",children:e.name}),(0,Da.jsx)("p",{className:"text-xs text-gray-500",children:e.duration?"".concat(Math.round(e.duration),"s"):"Unknown duration"})]}),(0,Da.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Da.jsx)("button",{onClick:()=>s(e.id),className:"p-2 hover:bg-gray-100 rounded-lg",children:i===e.id?(0,Da.jsx)(DC,{className:"w-4 h-4 text-primary-600"}):(0,Da.jsx)(xs,{className:"w-4 h-4 text-gray-600"})}),(0,Da.jsx)("button",{onClick:()=>(async e=>{if(window.confirm("Delete this audio file?"))try{d(e),await xA(t,e),nr.success("Audio deleted"),n()}catch(r){nr.error("Failed to delete audio")}finally{d(null)}})(e.id),disabled:c===e.id,className:"p-2 hover:bg-red-50 rounded-lg",children:c===e.id?(0,Da.jsx)(ki,{className:"w-4 h-4 animate-spin text-red-600"}):(0,Da.jsx)(ns,{className:"w-4 h-4 text-red-600"})})]})]})},e.id))})]})]})},qA=e=>{var t,r,n,s,i,o,l,c,d;let{agentId:u,cacheStats:p,onRefresh:m}=e;const[h,f]=(0,a.useState)(!1);return(0,Da.jsxs)("div",{className:"space-y-6",children:[p&&(0,Da.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,Da.jsxs)("div",{className:"bg-blue-50 rounded-lg p-4",children:[(0,Da.jsx)("h3",{className:"text-sm font-medium text-blue-700",children:"Response Cache"}),(0,Da.jsxs)("div",{className:"mt-2",children:[(0,Da.jsx)("div",{className:"text-2xl font-bold text-blue-900",children:(null===(t=p.response_cache)||void 0===t?void 0:t.entry_count)||0}),(0,Da.jsx)("div",{className:"text-sm text-blue-600",children:"entries"})]}),(0,Da.jsxs)("div",{className:"mt-2 text-xs text-blue-600",children:[(null===(r=p.response_cache)||void 0===r?void 0:r.total_hits)||0," hits \u2022 ",(null===(n=p.response_cache)||void 0===n?void 0:n.total_size_mb)||0," MB"]})]}),(0,Da.jsxs)("div",{className:"bg-orange-50 rounded-lg p-4",children:[(0,Da.jsx)("h3",{className:"text-sm font-medium text-orange-700",children:"Audio Cache"}),(0,Da.jsxs)("div",{className:"mt-2",children:[(0,Da.jsx)("div",{className:"text-2xl font-bold text-orange-900",children:(null===(s=p.audio_cache)||void 0===s?void 0:s.entry_count)||0}),(0,Da.jsx)("div",{className:"text-sm text-orange-600",children:"entries"})]}),(0,Da.jsxs)("div",{className:"mt-2 text-xs text-orange-600",children:[(null===(i=p.audio_cache)||void 0===i?void 0:i.total_hits)||0," hits \u2022 ",(null===(o=p.audio_cache)||void 0===o?void 0:o.total_size_mb)||0," MB"]})]}),(0,Da.jsxs)("div",{className:"bg-purple-50 rounded-lg p-4",children:[(0,Da.jsx)("h3",{className:"text-sm font-medium text-purple-700",children:"Variable Cache"}),(0,Da.jsxs)("div",{className:"mt-2",children:[(0,Da.jsx)("div",{className:"text-2xl font-bold text-purple-900",children:(null===(l=p.variable_cache)||void 0===l?void 0:l.entry_count)||0}),(0,Da.jsx)("div",{className:"text-sm text-purple-600",children:"entries"})]}),(0,Da.jsxs)("div",{className:"mt-2 text-xs text-purple-600",children:[(null===(c=p.variable_cache)||void 0===c?void 0:c.total_hits)||0," hits \u2022 ",(null===(d=p.variable_cache)||void 0===d?void 0:d.total_size_mb)||0," MB"]})]}),(0,Da.jsxs)("div",{className:"bg-green-50 rounded-lg p-4",children:[(0,Da.jsx)("h3",{className:"text-sm font-medium text-green-700",children:"Cost Saved"}),(0,Da.jsxs)("div",{className:"mt-2",children:[(0,Da.jsxs)("div",{className:"text-2xl font-bold text-green-900",children:["$",(p.total_cost_saved||0).toFixed(4)]}),(0,Da.jsx)("div",{className:"text-sm text-green-600",children:"estimated"})]}),(0,Da.jsx)("div",{className:"mt-2 text-xs text-green-600",children:"Based on TTS costs avoided"})]})]}),(0,Da.jsxs)("div",{className:"bg-gray-50 rounded-lg p-6 text-center",children:[(0,Da.jsx)(pi,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),(0,Da.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Cache Management"}),(0,Da.jsx)("p",{className:"text-gray-500 max-w-md mx-auto",children:"Responses are automatically cached when generated. Cached responses are served instantly without TTS costs. Cache entries expire based on your TTL settings."})]})]})},WA=e=>{var t,r,n,a,s,i,o,l,c,d,u,p,m;let{config:h,audioFiles:f,onChange:g,languages:x,agentId:y}=e;if(!h)return null;const v=(e,t)=>{g(qe(qe({},h),{},{[e]:t}))},b={soniox:[{value:"stt-rt-preview",label:"STT RT Preview (Real-time)"}],deepgram:[{value:"nova-2",label:"Nova 2 (Latest)"},{value:"nova-3",label:"Nova 3"},{value:"enhanced",label:"Enhanced"}],openai:[{value:"whisper-1",label:"Whisper-1"}],groq:[{value:"whisper-large-v3",label:"Whisper Large V3"},{value:"whisper-large-v3-turbo",label:"Whisper Large V3 Turbo (Faster)"}]},j={groq:[{value:"llama-3.3-70b-versatile",label:"\ud83e\udd99 Llama 3.3 70B (Best for English)"},{value:"llama-3.1-8b-instant",label:"\u26a1 Llama 3.1 8B Instant (Fastest)"},{value:"mixtral-8x7b-32768",label:"\ud83d\udd00 Mixtral 8x7B (Good balance)"}],openai:[{value:"gpt-4o-mini",label:"\ud83e\udd16 GPT-4o Mini (Best for Urdu/multilingual)"},{value:"gpt-4o",label:"\ud83e\udde0 GPT-4o (Most capable, slower)"},{value:"gpt-3.5-turbo",label:"\ud83d\udca8 GPT-3.5 Turbo (Fast, cheaper)"}]},w={uplift:[{value:"v_meklc281",label:"\ud83c\uddf5\ud83c\uddf0 Fatima (Urdu Female - Natural)"},{value:"v_8eelc901",label:"\ud83c\uddf5\ud83c\uddf0 Ayesha (Urdu Female - Professional)"},{value:"v_kl3mc456",label:"\ud83c\uddf5\ud83c\uddf0 Ahmed (Urdu Male - Professional)"}],azure:[{value:"ur-PK-UzmaNeural",label:"\ud83c\uddf5\ud83c\uddf0 Uzma (Urdu Female - Neural)"},{value:"ur-PK-AsadNeural",label:"\ud83c\uddf5\ud83c\uddf0 Asad (Urdu Male - Neural)"},{value:"en-US-JennyNeural",label:"\ud83c\uddfa\ud83c\uddf8 Jenny (English Female - Neural)"},{value:"en-US-GuyNeural",label:"\ud83c\uddfa\ud83c\uddf8 Guy (English Male - Neural)"},{value:"en-GB-SoniaNeural",label:"\ud83c\uddec\ud83c\udde7 Sonia (British Female - Neural)"}],openai:[{value:"nova",label:"\ud83c\udf1f Nova (Friendly, Upbeat)"},{value:"alloy",label:"\u2696\ufe0f Alloy (Neutral, Balanced)"},{value:"echo",label:"\ud83d\udcac Echo (Warm, Conversational)"},{value:"fable",label:"\ud83d\udcd6 Fable (Expressive, Narrative)"},{value:"onyx",label:"\ud83c\udfad Onyx (Deep, Authoritative)"},{value:"shimmer",label:"\u2728 Shimmer (Clear, Pleasant)"}]},N=h.stt_provider||"soniox",k=h.classifier_provider||"groq",S=h.tts_provider||"uplift";return(0,Da.jsxs)("div",{className:"p-6 space-y-8",children:[(0,Da.jsxs)("div",{className:"bg-gray-50 rounded-lg p-5 border border-gray-200",children:[(0,Da.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[(0,Da.jsx)("span",{className:"text-2xl",children:"\ud83c\udf99\ufe0f"})," Speech Recognition (STT)"]}),(0,Da.jsx)("p",{className:"text-sm text-gray-500 mb-4",children:"Configure how the IVR converts caller speech to text."}),(0,Da.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,Da.jsxs)("div",{children:[(0,Da.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"STT Provider"}),(0,Da.jsxs)("select",{value:N,onChange:e=>{var t,r;const n=e.target.value,a=(null===(t=b[n])||void 0===t||null===(r=t[0])||void 0===r?void 0:r.value)||"stt-rt-preview";v("stt_provider",n),v("stt_model",a)},className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-primary-500 focus:border-primary-500",children:[(0,Da.jsx)("option",{value:"soniox",children:"Soniox ($0.10/hr) - Best for Urdu"}),(0,Da.jsx)("option",{value:"deepgram",children:"Deepgram ($0.26/hr) - Best for English"}),(0,Da.jsx)("option",{value:"openai",children:"OpenAI Whisper ($0.36/hr) - Most Languages"}),(0,Da.jsx)("option",{value:"groq",children:"Groq Whisper ($0.006/hr) - Cheapest"})]}),(0,Da.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["soniox"===N&&"Excellent Urdu/English code-switching support","deepgram"===N&&"Fast with great English accuracy","openai"===N&&"Best accuracy across 50+ languages","groq"===N&&"Very cheap but may have latency"]})]}),(0,Da.jsxs)("div",{children:[(0,Da.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"STT Model"}),(0,Da.jsx)("select",{value:h.stt_model||(null===(t=b[N])||void 0===t||null===(r=t[0])||void 0===r?void 0:r.value),onChange:e=>v("stt_model",e.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-primary-500 focus:border-primary-500",children:null===(n=b[N])||void 0===n?void 0:n.map(e=>(0,Da.jsx)("option",{value:e.value,children:e.label},e.value))})]}),(0,Da.jsxs)("div",{className:"md:col-span-2",children:[(0,Da.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Speech Recognition Languages"}),(0,Da.jsx)("select",{value:JSON.stringify(h.language_hints||["ur","en"]),onChange:e=>v("language_hints",JSON.parse(e.target.value)),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-primary-500 focus:border-primary-500",children:[{value:'["ur", "en"]',label:"\ud83c\uddf5\ud83c\uddf0 Urdu + \ud83c\uddec\ud83c\udde7 English (Recommended)"},{value:'["ur"]',label:"\ud83c\uddf5\ud83c\uddf0 Urdu Only"},{value:'["en"]',label:"\ud83c\uddec\ud83c\udde7 English Only"},{value:'["ur", "en", "pa"]',label:"Urdu + English + Punjabi"},{value:'["hi", "en"]',label:"\ud83c\uddee\ud83c\uddf3 Hindi + English"},{value:'["ar", "en"]',label:"\ud83c\uddf8\ud83c\udde6 Arabic + English"}].map(e=>(0,Da.jsx)("option",{value:e.value,children:e.label},e.value))}),(0,Da.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Languages the STT should expect - improves accuracy"})]})]})]}),(0,Da.jsxs)("div",{className:"bg-gray-50 rounded-lg p-5 border border-gray-200",children:[(0,Da.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[(0,Da.jsx)("span",{className:"text-2xl",children:"\ud83e\udde0"})," Intent Classification (LLM)"]}),(0,Da.jsx)("p",{className:"text-sm text-gray-500 mb-4",children:"Configure how the IVR understands caller intent and generates KB responses."}),(0,Da.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,Da.jsxs)("div",{children:[(0,Da.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Classifier Type"}),(0,Da.jsxs)("select",{value:h.classifier_type||"llm",onChange:e=>v("classifier_type",e.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-primary-500 focus:border-primary-500",children:[(0,Da.jsx)("option",{value:"llm",children:"\ud83e\udd16 LLM (Most Accurate)"}),(0,Da.jsx)("option",{value:"embedding",children:"\ud83d\udcca Embedding Similarity (Faster)"}),(0,Da.jsx)("option",{value:"keyword",children:"\ud83d\udd0d Keyword Matching (Fastest)"})]})]}),(0,Da.jsxs)("div",{children:[(0,Da.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Confidence Threshold"}),(0,Da.jsx)("input",{type:"number",step:"0.05",min:"0",max:"1",value:h.confidence_threshold||.7,onChange:e=>v("confidence_threshold",parseFloat(e.target.value)),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-primary-500 focus:border-primary-500"}),(0,Da.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Minimum confidence to match an intent (0.0 - 1.0)"})]}),(0,Da.jsxs)("div",{children:[(0,Da.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Classifier LLM Provider"}),(0,Da.jsxs)("select",{value:k,onChange:e=>{const t=e.target.value,r="openai"===t?"gpt-4o-mini":"llama-3.3-70b-versatile";v("classifier_provider",t),v("classifier_model",r)},className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-primary-500 focus:border-primary-500",children:[(0,Da.jsx)("option",{value:"groq",children:"Groq (Fast, good for English)"}),(0,Da.jsx)("option",{value:"openai",children:"OpenAI (Best for Urdu/multilingual)"})]})]}),(0,Da.jsxs)("div",{children:[(0,Da.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Classifier Model"}),(0,Da.jsx)("select",{value:h.classifier_model||(null===(a=j[k])||void 0===a||null===(s=a[0])||void 0===s?void 0:s.value),onChange:e=>v("classifier_model",e.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-primary-500 focus:border-primary-500",children:null===(i=j[k])||void 0===i?void 0:i.map(e=>(0,Da.jsx)("option",{value:e.value,children:e.label},e.value))})]}),(0,Da.jsxs)("div",{children:[(0,Da.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"KB Response Provider"}),(0,Da.jsxs)("select",{value:h.kb_response_provider||"openai",onChange:e=>{const t=e.target.value,r="openai"===t?"gpt-4o-mini":"llama-3.3-70b-versatile";v("kb_response_provider",t),v("kb_response_model",r)},className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-primary-500 focus:border-primary-500",children:[(0,Da.jsx)("option",{value:"openai",children:"OpenAI (Recommended for Urdu)"}),(0,Da.jsx)("option",{value:"groq",children:"Groq (Faster, English only)"})]})]}),(0,Da.jsxs)("div",{children:[(0,Da.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"KB Response Model"}),(0,Da.jsx)("select",{value:h.kb_response_model||"gpt-4o-mini",onChange:e=>v("kb_response_model",e.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-primary-500 focus:border-primary-500",children:null===(o=j[h.kb_response_provider||"openai"])||void 0===o?void 0:o.map(e=>(0,Da.jsx)("option",{value:e.value,children:e.label},e.value))})]})]})]}),(0,Da.jsxs)("div",{className:"bg-gray-50 rounded-lg p-5 border border-gray-200",children:[(0,Da.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[(0,Da.jsx)("span",{className:"text-2xl",children:"\ud83d\udd0a"})," Text-to-Speech (TTS)"]}),(0,Da.jsx)("p",{className:"text-sm text-gray-500 mb-4",children:"Configure how the IVR generates spoken responses."}),(0,Da.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,Da.jsxs)("div",{children:[(0,Da.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"TTS Provider"}),(0,Da.jsxs)("select",{value:S,onChange:e=>{var t,r;const n=e.target.value,a=null===(t=w[n])||void 0===t||null===(r=t[0])||void 0===r?void 0:r.value;v("tts_provider",n),v("tts_voice",a)},className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-primary-500 focus:border-primary-500",children:[(0,Da.jsx)("option",{value:"uplift",children:"Uplift AI (Pakistani voices) - Best for Urdu"}),(0,Da.jsx)("option",{value:"azure",children:"Azure Neural TTS (Many languages)"}),(0,Da.jsx)("option",{value:"openai",children:"OpenAI TTS (Natural English voices)"})]}),(0,Da.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["uplift"===S&&"\u2705 Best quality Urdu voices","azure"===S&&"Good Urdu support with ur-PK voices","openai"===S&&"\u26a0\ufe0f No native Urdu voices - English only"]})]}),(0,Da.jsxs)("div",{children:[(0,Da.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"TTS Voice"}),(0,Da.jsx)("select",{value:h.tts_voice||(null===(l=w[S])||void 0===l||null===(c=l[0])||void 0===c?void 0:c.value),onChange:e=>v("tts_voice",e.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-primary-500 focus:border-primary-500",children:null===(d=w[S])||void 0===d?void 0:d.map(e=>(0,Da.jsx)("option",{value:e.value,children:e.label},e.value))})]}),(0,Da.jsxs)("div",{children:[(0,Da.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Audio Output Format"}),(0,Da.jsxs)("select",{value:h.tts_output_format||"mulaw_8000",onChange:e=>v("tts_output_format",e.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-primary-500 focus:border-primary-500",children:[(0,Da.jsx)("option",{value:"mulaw_8000",children:"\u03bc-Law 8kHz (Phone standard)"}),(0,Da.jsx)("option",{value:"pcm_16000",children:"PCM 16kHz (Better quality)"}),(0,Da.jsx)("option",{value:"mp3",children:"MP3 (Compressed)"}),(0,Da.jsx)("option",{value:"wav",children:"WAV (Uncompressed)"})]}),(0,Da.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"\u03bc-Law 8kHz recommended for phone calls"})]}),(0,Da.jsxs)("div",{children:[(0,Da.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"TTS Model (Optional)"}),(0,Da.jsx)("input",{type:"text",value:h.tts_model||"",onChange:e=>v("tts_model",e.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-primary-500 focus:border-primary-500",placeholder:"Default model"}),(0,Da.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Leave empty for provider default"})]})]})]}),(0,Da.jsxs)("div",{className:"bg-gray-50 rounded-lg p-5 border border-gray-200",children:[(0,Da.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[(0,Da.jsx)("span",{className:"text-2xl",children:"\ud83d\udcbe"})," Caching"]}),(0,Da.jsxs)("div",{className:"space-y-4",children:[(0,Da.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Da.jsxs)("div",{children:[(0,Da.jsx)("div",{className:"font-medium text-gray-700",children:"Response Cache"}),(0,Da.jsx)("div",{className:"text-sm text-gray-500",children:"Cache full responses to avoid TTS costs"})]}),(0,Da.jsxs)("label",{className:"relative inline-flex items-center cursor-pointer",children:[(0,Da.jsx)("input",{type:"checkbox",checked:h.enable_response_cache,onChange:e=>v("enable_response_cache",e.target.checked),className:"sr-only peer"}),(0,Da.jsx)("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary-600"})]})]}),(0,Da.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Da.jsxs)("div",{children:[(0,Da.jsx)("div",{className:"font-medium text-gray-700",children:"Variable Cache"}),(0,Da.jsx)("div",{className:"text-sm text-gray-500",children:"Cache common variable values (names, amounts)"})]}),(0,Da.jsxs)("label",{className:"relative inline-flex items-center cursor-pointer",children:[(0,Da.jsx)("input",{type:"checkbox",checked:h.enable_variable_cache,onChange:e=>v("enable_variable_cache",e.target.checked),className:"sr-only peer"}),(0,Da.jsx)("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary-600"})]})]}),(0,Da.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,Da.jsxs)("div",{children:[(0,Da.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cache TTL (days)"}),(0,Da.jsx)("input",{type:"number",value:h.cache_ttl_days||30,onChange:e=>v("cache_ttl_days",parseInt(e.target.value)),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-primary-500 focus:border-primary-500"})]}),(0,Da.jsxs)("div",{children:[(0,Da.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Max Cache Size (MB)"}),(0,Da.jsx)("input",{type:"number",value:h.cache_max_size_mb||500,onChange:e=>v("cache_max_size_mb",parseInt(e.target.value)),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-primary-500 focus:border-primary-500"})]})]})]})]}),(0,Da.jsxs)("div",{className:"bg-gray-50 rounded-lg p-5 border border-gray-200",children:[(0,Da.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[(0,Da.jsx)("span",{className:"text-2xl",children:"\ud83d\udc4b"})," Greeting & Messages"]}),(0,Da.jsx)("p",{className:"text-sm text-gray-500 mb-4",children:"Configure greeting and response messages with multi-language support."}),(0,Da.jsxs)("div",{className:"space-y-6",children:[(0,Da.jsx)(LA,{label:"Greeting Message",entityType:"config",entityId:h.id,fieldName:"greeting_text",baseTextValue:h.greeting_text||"",baseAudioId:h.greeting_audio_id,onBaseTextChange:e=>v("greeting_text",e),onBaseAudioChange:e=>v("greeting_audio_id",e),languages:x,defaultLanguage:(null===x||void 0===x||null===(u=x.find(e=>e.is_default))||void 0===u?void 0:u.language_code)||"en",audioFiles:f,agentId:y,placeholder:"\u0627\u0644\u0633\u0644\u0627\u0645 \u0639\u0644\u06cc\u06a9\u0645! \u0645\u06cc\u06ba \u0622\u067e \u06a9\u06cc \u06a9\u06cc\u0627 \u0645\u062f\u062f \u06a9\u0631 \u0633\u06a9\u062a\u06cc \u06c1\u0648\u06ba\u061f",multiline:!0}),(0,Da.jsx)("p",{className:"text-xs text-gray-500 -mt-4",children:"Played when caller connects. Add translations for each language your IVR supports."}),(0,Da.jsx)(LA,{label:"No Match Response",entityType:"config",entityId:h.id,fieldName:"no_match_text",baseTextValue:h.no_match_text||h.not_found_message||"",baseAudioId:h.no_match_audio_id||h.fallback_audio_id,onBaseTextChange:e=>{v("no_match_text",e),v("not_found_message",e)},onBaseAudioChange:e=>{v("no_match_audio_id",e),v("fallback_audio_id",e)},languages:x,defaultLanguage:(null===x||void 0===x||null===(p=x.find(e=>e.is_default))||void 0===p?void 0:p.language_code)||"en",audioFiles:f,agentId:y,placeholder:"\u0645\u0639\u0630\u0631\u062a\u060c \u0645\u06cc\u06ba \u0622\u067e \u06a9\u06cc \u0628\u0627\u062a \u0646\u06c1\u06cc\u06ba \u0633\u0645\u062c\u06be \u0633\u06a9\u06cc\u06d4 \u0628\u0631\u0627\u06c1 \u06a9\u0631\u0645 \u062f\u0648\u0628\u0627\u0631\u06c1 \u06a9\u0648\u0634\u0634 \u06a9\u0631\u06cc\u06ba\u06d4",multiline:!0}),(0,Da.jsx)("p",{className:"text-xs text-gray-500 -mt-4",children:"Spoken when no intent matches the caller's speech."}),(0,Da.jsx)(LA,{label:"KB Not Found Response",entityType:"config",entityId:h.id,fieldName:"fallback_text",baseTextValue:h.fallback_text||h.kb_not_found_message||"",baseAudioId:h.kb_no_result_audio_id,onBaseTextChange:e=>{v("fallback_text",e),v("kb_not_found_message",e)},onBaseAudioChange:e=>v("kb_no_result_audio_id",e),languages:x,defaultLanguage:(null===x||void 0===x||null===(m=x.find(e=>e.is_default))||void 0===m?void 0:m.language_code)||"en",audioFiles:f,agentId:y,placeholder:"\u0645\u0639\u0630\u0631\u062a\u060c \u0645\u062c\u06be\u06d2 \u0627\u0633 \u0633\u0648\u0627\u0644 \u06a9\u0627 \u062c\u0648\u0627\u0628 \u0646\u06c1\u06cc\u06ba \u0645\u0644 \u0633\u06a9\u0627\u06d4",multiline:!0}),(0,Da.jsx)("p",{className:"text-xs text-gray-500 -mt-4",children:"Spoken when Knowledge Base search returns no results."})]})]}),(0,Da.jsxs)("div",{className:"bg-gray-50 rounded-lg p-5 border border-gray-200",children:[(0,Da.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[(0,Da.jsx)("span",{className:"text-2xl",children:"\ud83d\udd04"})," Transfer & System Audio"]}),(0,Da.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,Da.jsxs)("div",{children:[(0,Da.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Max Fallback Count"}),(0,Da.jsx)("input",{type:"number",value:h.max_fallback_count||3,onChange:e=>v("max_fallback_count",parseInt(e.target.value)),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-primary-500 focus:border-primary-500"}),(0,Da.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Number of unrecognized inputs before transfer"})]}),(0,Da.jsxs)("div",{children:[(0,Da.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Default Transfer Queue"}),(0,Da.jsx)("input",{type:"text",value:h.default_transfer_queue||"support",onChange:e=>v("default_transfer_queue",e.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-primary-500 focus:border-primary-500"})]}),(0,Da.jsxs)("div",{children:[(0,Da.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Transfer Audio"}),(0,Da.jsxs)("select",{value:h.transfer_audio_id||"",onChange:e=>v("transfer_audio_id",e.target.value||null),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-primary-500 focus:border-primary-500",children:[(0,Da.jsx)("option",{value:"",children:"None"}),f.map(e=>(0,Da.jsx)("option",{value:e.id,children:e.name},e.id))]}),(0,Da.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Played before transferring to agent"})]}),(0,Da.jsxs)("div",{children:[(0,Da.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Closing Audio"}),(0,Da.jsxs)("select",{value:h.closing_audio_id||"",onChange:e=>v("closing_audio_id",e.target.value||null),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-primary-500 focus:border-primary-500",children:[(0,Da.jsx)("option",{value:"",children:"None"}),f.map(e=>(0,Da.jsx)("option",{value:e.id,children:e.name},e.id))]}),(0,Da.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Played when call ends"})]}),(0,Da.jsxs)("div",{children:[(0,Da.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Please Wait Audio"}),(0,Da.jsxs)("select",{value:h.please_wait_audio_id||"",onChange:e=>v("please_wait_audio_id",e.target.value||null),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-primary-500 focus:border-primary-500",children:[(0,Da.jsx)("option",{value:"",children:"None"}),f.map(e=>(0,Da.jsx)("option",{value:e.id,children:e.name},e.id))]}),(0,Da.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Played while processing KB lookups"})]}),(0,Da.jsxs)("div",{children:[(0,Da.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"KB Lookup Prefix Audio"}),(0,Da.jsxs)("select",{value:h.kb_lookup_prefix_audio_id||"",onChange:e=>v("kb_lookup_prefix_audio_id",e.target.value||null),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-primary-500 focus:border-primary-500",children:[(0,Da.jsx)("option",{value:"",children:"None"}),f.map(e=>(0,Da.jsx)("option",{value:e.id,children:e.name},e.id))]}),(0,Da.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:'Played before searching KB (e.g., "Let me check...")'})]})]})]}),(0,Da.jsxs)("div",{className:"bg-gray-50 rounded-lg p-5 border border-gray-200",children:[(0,Da.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[(0,Da.jsx)("span",{className:"text-2xl",children:"\ud83d\udcda"})," Knowledge Base Settings"]}),(0,Da.jsxs)("div",{className:"flex items-center justify-between p-3 bg-white rounded-lg border",children:[(0,Da.jsxs)("div",{children:[(0,Da.jsx)("div",{className:"font-medium text-gray-700",children:"Enable KB Lookup"}),(0,Da.jsx)("div",{className:"text-sm text-gray-500",children:"Allow intents to search Knowledge Base"})]}),(0,Da.jsxs)("label",{className:"relative inline-flex items-center cursor-pointer",children:[(0,Da.jsx)("input",{type:"checkbox",checked:!1!==h.enable_kb_lookup,onChange:e=>v("enable_kb_lookup",e.target.checked),className:"sr-only peer"}),(0,Da.jsx)("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary-600"})]})]})]})]})},VA=()=>{const{id:e}=re(),t=ee(),[r,n]=(0,a.useState)(!0),[s,i]=(0,a.useState)(!1),[o,l]=(0,a.useState)(null),[c,d]=(0,a.useState)(null),[u,p]=(0,a.useState)([]),[m,h]=(0,a.useState)([]),[f,g]=(0,a.useState)(null),[x,y]=(0,a.useState)([]),[v,b]=(0,a.useState)([]),[j,w]=(0,a.useState)("intents"),[N,k]=(0,a.useState)(!1),[S,_]=(0,a.useState)(!1),[C,A]=(0,a.useState)(null),[O,P]=(0,a.useState)(null),E=(0,a.useRef)(null);(0,a.useEffect)(()=>{T()},[e]),(0,a.useEffect)(()=>{(async()=>{try{var t;const r=await QC(e,!0);y((null===(t=r.data)||void 0===t?void 0:t.data)||r.data||[])}catch(r){y([]),console.error("Failed to load flows:",r)}})()},[e]);const T=async()=>{try{n(!0);const[t,r,a,s,i,o]=await Promise.all([Pa(e),lA(e),dA(e,!0),vA(e),hA(e),FC(e)]);l(t.data.agent),d(r.data),p(a.data||[]),h(s.data||[]),g(i.data),b(o.data||[])}catch(t){console.error("Failed to load IVR config:",t),nr.error("Failed to load IVR configuration")}finally{n(!1)}},I=t=>{if(O===t){var r;null===(r=E.current)||void 0===r||r.pause(),P(null)}else{const r=bA(e,t);E.current&&(E.current.src=r,E.current.play(),P(t))}};return r?(0,Da.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,Da.jsx)(ki,{className:"w-8 h-8 animate-spin text-primary-600"})}):(0,Da.jsxs)("div",{className:"space-y-6",children:[(0,Da.jsx)("audio",{ref:E,onEnded:()=>{P(null)},className:"hidden"}),(0,Da.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Da.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,Da.jsx)("button",{onClick:()=>t("/agents/".concat(e)),className:"p-2 hover:bg-gray-100 rounded-lg",children:(0,Da.jsx)(fi,{className:"w-5 h-5"})}),(0,Da.jsxs)("div",{children:[(0,Da.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Intent IVR Configuration"}),(0,Da.jsx)("p",{className:"text-sm text-gray-500",children:null===o||void 0===o?void 0:o.name})]})]}),(0,Da.jsxs)("button",{onClick:async()=>{try{i(!0),await cA(e,c),nr.success("Configuration saved")}catch(t){nr.error("Failed to save configuration")}finally{i(!1)}},disabled:s,className:"inline-flex items-center px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 disabled:opacity-50",children:[s?(0,Da.jsx)(ki,{className:"w-4 h-4 mr-2 animate-spin"}):(0,Da.jsx)(is,{className:"w-4 h-4 mr-2"}),"Save Configuration"]})]}),(0,Da.jsx)("div",{className:"border-b border-gray-200",children:(0,Da.jsx)("nav",{className:"-mb-px flex space-x-8",children:[{id:"intents",label:"Intents",icon:rs},{id:"audio",label:"Audio Library",icon:MC},{id:"cache",label:"Response Cache",icon:pi},{id:"settings",label:"Settings",icon:ti}].map(e=>(0,Da.jsxs)("button",{onClick:()=>w(e.id),className:"flex items-center py-4 px-1 border-b-2 font-medium text-sm ".concat(j===e.id?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:[(0,Da.jsx)(e.icon,{className:"w-4 h-4 mr-2"}),e.label]},e.id))})}),(0,Da.jsxs)("div",{className:"mt-6",children:["intents"===j&&(0,Da.jsx)(UA,{agentId:e,intents:u,audioFiles:m,flows:x,languages:v,onRefresh:T,onPlayAudio:I,playingAudio:O}),"audio"===j&&(0,Da.jsx)(zA,{agentId:e,audioFiles:m,onRefresh:T,onPlayAudio:I,playingAudio:O}),"cache"===j&&(0,Da.jsx)(qA,{agentId:e,cacheStats:f,onRefresh:T}),"settings"===j&&(0,Da.jsx)(WA,{config:c,audioFiles:m,onChange:d,languages:v,agentId:e})]})]})},GA=Ha("BarChart2",[["line",{x1:"18",x2:"18",y1:"20",y2:"10",key:"1xfpm4"}],["line",{x1:"12",x2:"12",y1:"20",y2:"4",key:"be30l9"}],["line",{x1:"6",x2:"6",y1:"20",y2:"14",key:"1r4le6"}]]),HA=Ha("MoreVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]),KA=e=>{let{label:t,value:r,icon:n,color:a}=e;return(0,Da.jsx)("div",{className:"bg-white rounded-lg border p-4",children:(0,Da.jsxs)("div",{className:"flex items-center gap-3",children:[(0,Da.jsx)("div",{className:"w-10 h-10 rounded-lg flex items-center justify-center ".concat({blue:"bg-blue-50 text-blue-600",green:"bg-green-50 text-green-600",purple:"bg-purple-50 text-purple-600",yellow:"bg-yellow-50 text-yellow-600"}[a]),children:(0,Da.jsx)(n,{className:"w-5 h-5"})}),(0,Da.jsxs)("div",{children:[(0,Da.jsx)("div",{className:"text-2xl font-bold text-gray-900",children:r}),(0,Da.jsx)("div",{className:"text-sm text-gray-500",children:t})]})]})})},YA=e=>{var t;let{flow:r,onEdit:n,onDuplicate:s,onDelete:i,onToggleActive:o}=e;const[l,c]=(0,a.useState)(!1);let d=r.trigger_phrases;if("string"===typeof d)try{d=JSON.parse(d)}catch(We){d=[]}const u=r.total_sessions>0?Math.round(r.completed_sessions/r.total_sessions*100):0;return(0,Da.jsx)("div",{className:"border rounded-lg bg-white overflow-hidden ".concat(r.is_active?"":"opacity-60"),children:(0,Da.jsxs)("div",{className:"flex items-center justify-between p-4",children:[(0,Da.jsxs)("div",{className:"flex items-center gap-4",children:[(0,Da.jsx)("div",{className:"w-12 h-12 rounded-lg flex items-center justify-center ".concat(r.is_active?"bg-blue-50":"bg-gray-100"),children:(0,Da.jsx)(os,{className:"w-6 h-6 ".concat(r.is_active?"text-blue-600":"text-gray-400")})}),(0,Da.jsxs)("div",{children:[(0,Da.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Da.jsx)("h3",{className:"font-medium text-gray-900",children:r.flow_name}),r.is_active?(0,Da.jsx)("span",{className:"px-2 py-0.5 bg-green-100 text-green-700 text-xs rounded-full",children:"Active"}):(0,Da.jsx)("span",{className:"px-2 py-0.5 bg-gray-100 text-gray-500 text-xs rounded-full",children:"Inactive"})]}),(0,Da.jsxs)("p",{className:"text-sm text-gray-500",children:[r.flow_key,r.description&&" \u2022 ".concat(r.description)]})]})]}),(0,Da.jsxs)("div",{className:"flex items-center gap-6",children:[(0,Da.jsxs)("div",{className:"flex gap-6 text-sm",children:[(0,Da.jsxs)("div",{className:"text-center",children:[(0,Da.jsx)("div",{className:"font-semibold text-gray-900",children:r.step_count||0}),(0,Da.jsx)("div",{className:"text-gray-500",children:"Steps"})]}),(0,Da.jsxs)("div",{className:"text-center",children:[(0,Da.jsx)("div",{className:"font-semibold text-gray-900",children:r.total_sessions||0}),(0,Da.jsx)("div",{className:"text-gray-500",children:"Sessions"})]}),(0,Da.jsxs)("div",{className:"text-center",children:[(0,Da.jsxs)("div",{className:"font-semibold ".concat(u>=70?"text-green-600":u>=40?"text-yellow-600":"text-red-600"),children:[u,"%"]}),(0,Da.jsx)("div",{className:"text-gray-500",children:"Complete"})]})]}),(0,Da.jsx)("div",{className:"hidden lg:block max-w-xs",children:(0,Da.jsxs)("div",{className:"flex flex-wrap gap-1",children:[(d||[]).slice(0,3).map((e,t)=>(0,Da.jsx)("span",{className:"px-2 py-0.5 bg-blue-50 text-blue-700 text-xs rounded",children:e},t)),(null===(t=d)||void 0===t?void 0:t.length)>3&&(0,Da.jsxs)("span",{className:"text-xs text-gray-400",children:["+",d.length-3," more"]})]})}),(0,Da.jsxs)("div",{className:"flex items-center gap-1",children:[(0,Da.jsx)("button",{onClick:n,className:"p-2 text-gray-500 hover:bg-gray-100 rounded",title:"Edit",children:(0,Da.jsx)(ts,{className:"w-4 h-4"})}),(0,Da.jsxs)("div",{className:"relative",children:[(0,Da.jsx)("button",{onClick:()=>c(!l),className:"p-2 text-gray-500 hover:bg-gray-100 rounded",children:(0,Da.jsx)(HA,{className:"w-4 h-4"})}),l&&(0,Da.jsxs)(Da.Fragment,{children:[(0,Da.jsx)("div",{className:"fixed inset-0 z-10",onClick:()=>c(!1)}),(0,Da.jsxs)("div",{className:"absolute right-0 mt-1 w-48 bg-white border rounded-lg shadow-lg z-20",children:[(0,Da.jsxs)("button",{onClick:()=>{s(),c(!1)},className:"w-full flex items-center gap-2 px-4 py-2 hover:bg-gray-50 text-left",children:[(0,Da.jsx)(Gs,{className:"w-4 h-4"}),"Duplicate"]}),(0,Da.jsx)("button",{onClick:()=>{o(),c(!1)},className:"w-full flex items-center gap-2 px-4 py-2 hover:bg-gray-50 text-left",children:r.is_active?(0,Da.jsxs)(Da.Fragment,{children:[(0,Da.jsx)(Ti,{className:"w-4 h-4"}),"Deactivate"]}):(0,Da.jsxs)(Da.Fragment,{children:[(0,Da.jsx)(gs,{className:"w-4 h-4"}),"Activate"]})}),(0,Da.jsx)("hr",{className:"my-1"}),(0,Da.jsxs)("button",{onClick:()=>{i(),c(!1)},className:"w-full flex items-center gap-2 px-4 py-2 hover:bg-red-50 text-red-600 text-left",children:[(0,Da.jsx)(ns,{className:"w-4 h-4"}),"Delete"]})]})]})]})]})]})]})})};function JA(e){const t=e.reduce((e,t)=>e+(t.total_sessions||0),0),r=e.reduce((e,t)=>e+(t.completed_sessions||0),0);return 0===t?0:Math.round(r/t*100)}const XA=()=>{const{agentId:e}=re(),t=ee(),[r,n]=(0,a.useState)([]),[s,i]=(0,a.useState)(!0),[o,l]=(0,a.useState)(""),[c,d]=(0,a.useState)(!1);(0,a.useEffect)(()=>{u()},[e,c]);const u=async()=>{try{i(!0);const t=await QC(e,c);n(t.data||[])}catch(t){console.error("Failed to load flows:",t),nr.error("Failed to load flows")}finally{i(!1)}},p=()=>{t("/agents/".concat(e,"/ivr/flows/new"))},m=r.filter(e=>{var t;return!o||e.flow_name.toLowerCase().includes(o.toLowerCase())||e.flow_key.toLowerCase().includes(o.toLowerCase())||(null===(t=e.description)||void 0===t?void 0:t.toLowerCase().includes(o.toLowerCase()))});return s?(0,Da.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,Da.jsx)(ki,{className:"w-8 h-8 animate-spin text-blue-600"})}):(0,Da.jsxs)("div",{className:"p-6",children:[(0,Da.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,Da.jsxs)("div",{children:[(0,Da.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Conversation Flows"}),(0,Da.jsx)("p",{className:"text-gray-600 mt-1",children:"Multi-turn conversation flows for collecting information"})]}),(0,Da.jsxs)("button",{onClick:p,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:[(0,Da.jsx)(Qa,{className:"w-4 h-4"}),"Create Flow"]})]}),(0,Da.jsxs)("div",{className:"flex gap-4 mb-6",children:[(0,Da.jsxs)("div",{className:"flex-1 relative",children:[(0,Da.jsx)(ui,{className:"w-5 h-5 absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),(0,Da.jsx)("input",{type:"text",placeholder:"Search flows...",value:o,onChange:e=>l(e.target.value),className:"w-full pl-10 pr-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500"})]}),(0,Da.jsxs)("label",{className:"flex items-center gap-2 px-4 py-2 border rounded-lg bg-white",children:[(0,Da.jsx)("input",{type:"checkbox",checked:c,onChange:e=>d(e.target.checked),className:"rounded text-blue-600"}),(0,Da.jsx)("span",{className:"text-sm text-gray-700",children:"Show inactive"})]}),(0,Da.jsx)("button",{onClick:u,className:"p-2 text-gray-600 hover:bg-gray-100 rounded-lg",title:"Refresh",children:(0,Da.jsx)(vi,{className:"w-5 h-5"})})]}),(0,Da.jsxs)("div",{className:"grid grid-cols-4 gap-4 mb-6",children:[(0,Da.jsx)(KA,{label:"Total Flows",value:r.length,icon:os,color:"blue"}),(0,Da.jsx)(KA,{label:"Active",value:r.filter(e=>e.is_active).length,icon:gs,color:"green"}),(0,Da.jsx)(KA,{label:"Total Sessions",value:r.reduce((e,t)=>e+(t.total_sessions||0),0),icon:rs,color:"purple"}),(0,Da.jsx)(KA,{label:"Completion Rate",value:JA(r)+"%",icon:GA,color:"yellow"})]}),0===m.length?(0,Da.jsxs)("div",{className:"text-center py-12 bg-gray-50 rounded-lg",children:[(0,Da.jsx)(os,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),(0,Da.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Flows Yet"}),(0,Da.jsx)("p",{className:"text-gray-600 mb-4",children:"Create conversation flows to collect information from callers"}),(0,Da.jsx)("button",{onClick:p,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Create First Flow"})]}):(0,Da.jsx)("div",{className:"space-y-3",children:m.map(r=>(0,Da.jsx)(YA,{flow:r,onEdit:()=>{return n=r.id,void t("/agents/".concat(e,"/ivr/flows/").concat(n));var n},onDuplicate:()=>(async t=>{try{await nA(e,t),nr.success("Flow duplicated"),u()}catch(r){nr.error("Failed to duplicate flow")}})(r.id),onDelete:()=>(async t=>{if(window.confirm("Delete this flow? This cannot be undone."))try{await rA(e,t),nr.success("Flow deleted"),u()}catch(r){nr.error("Failed to delete flow")}})(r.id),onToggleActive:()=>(async t=>{try{await tA(e,t.id,{is_active:!t.is_active}),nr.success(t.is_active?"Flow deactivated":"Flow activated"),u()}catch(r){nr.error("Failed to update flow")}})(r)},r.id))})]})},$A=Ha("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);function QA(e,t){return QA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},QA(e,t)}function ZA(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,QA(e,t)}function eO(){return eO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},eO.apply(null,arguments)}function tO(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var rO="function"===typeof Symbol&&Symbol.observable||"@@observable",nO=function(){return Math.random().toString(36).substring(7).split("").join(".")},aO={INIT:"@@redux/INIT"+nO(),REPLACE:"@@redux/REPLACE"+nO(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+nO()}};function sO(e){if("object"!==typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function iO(e,t,r){var n;if("function"===typeof t&&"function"===typeof r||"function"===typeof r&&"function"===typeof arguments[3])throw new Error(tO(0));if("function"===typeof t&&"undefined"===typeof r&&(r=t,t=void 0),"undefined"!==typeof r){if("function"!==typeof r)throw new Error(tO(1));return r(iO)(e,t)}if("function"!==typeof e)throw new Error(tO(2));var a=e,s=t,i=[],o=i,l=!1;function c(){o===i&&(o=i.slice())}function d(){if(l)throw new Error(tO(3));return s}function u(e){if("function"!==typeof e)throw new Error(tO(4));if(l)throw new Error(tO(5));var t=!0;return c(),o.push(e),function(){if(t){if(l)throw new Error(tO(6));t=!1,c();var r=o.indexOf(e);o.splice(r,1),i=null}}}function p(e){if(!sO(e))throw new Error(tO(7));if("undefined"===typeof e.type)throw new Error(tO(8));if(l)throw new Error(tO(9));try{l=!0,s=a(s,e)}finally{l=!1}for(var t=i=o,r=0;r<t.length;r++){(0,t[r])()}return e}return p({type:aO.INIT}),(n={dispatch:p,subscribe:u,getState:d,replaceReducer:function(e){if("function"!==typeof e)throw new Error(tO(10));a=e,p({type:aO.REPLACE})}})[rO]=function(){var e,t=u;return(e={subscribe:function(e){if("object"!==typeof e||null===e)throw new Error(tO(11));function r(){e.next&&e.next(d())}return r(),{unsubscribe:t(r)}}})[rO]=function(){return this},e},n}function oO(e,t){return function(){return t(e.apply(this,arguments))}}function lO(e,t){if("function"===typeof e)return oO(e,t);if("object"!==typeof e||null===e)throw new Error(tO(16));var r={};for(var n in e){var a=e[n];"function"===typeof a&&(r[n]=oO(a,t))}return r}function cO(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce(function(e,t){return function(){return e(t.apply(void 0,arguments))}})}var dO=a.createContext(null);var uO=function(e){e()},pO=function(){return uO};var mO={notify:function(){},get:function(){return[]}};function hO(e,t){var r,n=mO;function a(){i.onStateChange&&i.onStateChange()}function s(){r||(r=t?t.addNestedSub(a):e.subscribe(a),n=function(){var e=pO(),t=null,r=null;return{clear:function(){t=null,r=null},notify:function(){e(function(){for(var e=t;e;)e.callback(),e=e.next})},get:function(){for(var e=[],r=t;r;)e.push(r),r=r.next;return e},subscribe:function(e){var n=!0,a=r={callback:e,next:null,prev:r};return a.prev?a.prev.next=a:t=a,function(){n&&null!==t&&(n=!1,a.next?a.next.prev=a.prev:r=a.prev,a.prev?a.prev.next=a.next:t=a.next)}}}}())}var i={addNestedSub:function(e){return s(),n.subscribe(e)},notifyNestedSubs:function(){n.notify()},handleChangeWrapper:a,isSubscribed:function(){return Boolean(r)},trySubscribe:s,tryUnsubscribe:function(){r&&(r(),r=void 0,n.clear(),n=mO)},getListeners:function(){return n}};return i}var fO="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement?a.useLayoutEffect:a.useEffect;const gO=function(e){var t=e.store,r=e.context,n=e.children,s=(0,a.useMemo)(function(){var e=hO(t);return{store:t,subscription:e}},[t]),i=(0,a.useMemo)(function(){return t.getState()},[t]);fO(function(){var e=s.subscription;return e.onStateChange=e.notifyNestedSubs,e.trySubscribe(),i!==t.getState()&&e.notifyNestedSubs(),function(){e.tryUnsubscribe(),e.onStateChange=null}},[s,i]);var o=r||dO;return a.createElement(o.Provider,{value:s},n)};var xO=r(219),yO=r.n(xO),vO=r(2086),bO=["getDisplayName","methodName","renderCountProp","shouldHandleStateChanges","storeKey","withRef","forwardRef","context"],jO=["reactReduxForwardedRef"],wO=[],NO=[null,null];function kO(e,t){var r=e[1];return[t.payload,r+1]}function SO(e,t,r){fO(function(){return e.apply(void 0,t)},r)}function _O(e,t,r,n,a,s,i){e.current=n,t.current=a,r.current=!1,s.current&&(s.current=null,i())}function CO(e,t,r,n,a,s,i,o,l,c){if(e){var d=!1,u=null,p=function(){if(!d){var e,r,p=t.getState();try{e=n(p,a.current)}catch(We){r=We,u=We}r||(u=null),e===s.current?i.current||l():(s.current=e,o.current=e,i.current=!0,c({type:"STORE_UPDATED",payload:{error:r}}))}};r.onStateChange=p,r.trySubscribe(),p();return function(){if(d=!0,r.tryUnsubscribe(),r.onStateChange=null,u)throw u}}}var AO=function(){return[null,0]};function OO(e,t){void 0===t&&(t={});var r=t,n=r.getDisplayName,s=void 0===n?function(e){return"ConnectAdvanced("+e+")"}:n,i=r.methodName,o=void 0===i?"connectAdvanced":i,l=r.renderCountProp,c=void 0===l?void 0:l,d=r.shouldHandleStateChanges,u=void 0===d||d,p=r.storeKey,m=void 0===p?"store":p,h=(r.withRef,r.forwardRef),f=void 0!==h&&h,g=r.context,x=void 0===g?dO:g,y=za(r,bO),v=x;return function(t){var r=t.displayName||t.name||"Component",n=s(r),i=eO({},y,{getDisplayName:s,methodName:o,renderCountProp:c,shouldHandleStateChanges:u,storeKey:m,displayName:n,wrappedComponentName:r,WrappedComponent:t}),l=y.pure;var d=l?a.useMemo:function(e){return e()};function p(r){var n=(0,a.useMemo)(function(){var e=r.reactReduxForwardedRef,t=za(r,jO);return[r.context,e,t]},[r]),s=n[0],o=n[1],l=n[2],c=(0,a.useMemo)(function(){return s&&s.Consumer&&(0,vO.isContextConsumer)(a.createElement(s.Consumer,null))?s:v},[s,v]),p=(0,a.useContext)(c),m=Boolean(r.store)&&Boolean(r.store.getState)&&Boolean(r.store.dispatch);Boolean(p)&&Boolean(p.store);var h=m?r.store:p.store,f=(0,a.useMemo)(function(){return function(t){return e(t.dispatch,i)}(h)},[h]),g=(0,a.useMemo)(function(){if(!u)return NO;var e=hO(h,m?null:p.subscription),t=e.notifyNestedSubs.bind(e);return[e,t]},[h,m,p]),x=g[0],y=g[1],b=(0,a.useMemo)(function(){return m?p:eO({},p,{subscription:x})},[m,p,x]),j=(0,a.useReducer)(kO,wO,AO),w=j[0][0],N=j[1];if(w&&w.error)throw w.error;var k=(0,a.useRef)(),S=(0,a.useRef)(l),_=(0,a.useRef)(),C=(0,a.useRef)(!1),A=d(function(){return _.current&&l===S.current?_.current:f(h.getState(),l)},[h,w,l]);SO(_O,[S,k,C,l,A,_,y]),SO(CO,[u,h,x,f,S,k,C,_,y,N],[h,x,f]);var O=(0,a.useMemo)(function(){return a.createElement(t,eO({},A,{ref:o}))},[o,t,A]);return(0,a.useMemo)(function(){return u?a.createElement(c.Provider,{value:b},O):O},[c,O,b])}var h=l?a.memo(p):p;if(h.WrappedComponent=t,h.displayName=p.displayName=n,f){var g=a.forwardRef(function(e,t){return a.createElement(h,eO({},e,{reactReduxForwardedRef:t}))});return g.displayName=n,g.WrappedComponent=t,yO()(g,t)}return yO()(h,t)}}function PO(e,t){return e===t?0!==e||0!==t||1/e===1/t:e!==e&&t!==t}function EO(e,t){if(PO(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(var a=0;a<r.length;a++)if(!Object.prototype.hasOwnProperty.call(t,r[a])||!PO(e[r[a]],t[r[a]]))return!1;return!0}function TO(e){return function(t,r){var n=e(t,r);function a(){return n}return a.dependsOnOwnProps=!1,a}}function IO(e){return null!==e.dependsOnOwnProps&&void 0!==e.dependsOnOwnProps?Boolean(e.dependsOnOwnProps):1!==e.length}function MO(e,t){return function(t,r){r.displayName;var n=function(e,t){return n.dependsOnOwnProps?n.mapToProps(e,t):n.mapToProps(e)};return n.dependsOnOwnProps=!0,n.mapToProps=function(t,r){n.mapToProps=e,n.dependsOnOwnProps=IO(e);var a=n(t,r);return"function"===typeof a&&(n.mapToProps=a,n.dependsOnOwnProps=IO(a),a=n(t,r)),a},n}}const DO=[function(e){return"function"===typeof e?MO(e):void 0},function(e){return e?void 0:TO(function(e){return{dispatch:e}})},function(e){return e&&"object"===typeof e?TO(function(t){return function(e,t){var r={},n=function(n){var a=e[n];"function"===typeof a&&(r[n]=function(){return t(a.apply(void 0,arguments))})};for(var a in e)n(a);return r}(e,t)}):void 0}];const RO=[function(e){return"function"===typeof e?MO(e):void 0},function(e){return e?void 0:TO(function(){return{}})}];function FO(e,t,r){return eO({},r,e,t)}const LO=[function(e){return"function"===typeof e?function(e){return function(t,r){r.displayName;var n,a=r.pure,s=r.areMergedPropsEqual,i=!1;return function(t,r,o){var l=e(t,r,o);return i?a&&s(l,n)||(n=l):(i=!0,n=l),n}}}(e):void 0},function(e){return e?void 0:function(){return FO}}];var BO=["initMapStateToProps","initMapDispatchToProps","initMergeProps"];function UO(e,t,r,n){return function(a,s){return r(e(a,s),t(n,s),s)}}function zO(e,t,r,n,a){var s,i,o,l,c,d=a.areStatesEqual,u=a.areOwnPropsEqual,p=a.areStatePropsEqual,m=!1;function h(a,m){var h=!u(m,i),f=!d(a,s,m,i);return s=a,i=m,h&&f?(o=e(s,i),t.dependsOnOwnProps&&(l=t(n,i)),c=r(o,l,i)):h?(e.dependsOnOwnProps&&(o=e(s,i)),t.dependsOnOwnProps&&(l=t(n,i)),c=r(o,l,i)):f?function(){var t=e(s,i),n=!p(t,o);return o=t,n&&(c=r(o,l,i)),c}():c}return function(a,d){return m?h(a,d):(o=e(s=a,i=d),l=t(n,i),c=r(o,l,i),m=!0,c)}}function qO(e,t){var r=t.initMapStateToProps,n=t.initMapDispatchToProps,a=t.initMergeProps,s=za(t,BO),i=r(e,s),o=n(e,s),l=a(e,s);return(s.pure?zO:UO)(i,o,l,e,s)}var WO=["pure","areStatesEqual","areOwnPropsEqual","areStatePropsEqual","areMergedPropsEqual"];function VO(e,t,r){for(var n=t.length-1;n>=0;n--){var a=t[n](e);if(a)return a}return function(t,n){throw new Error("Invalid value of type "+typeof e+" for "+r+" argument when connecting component "+n.wrappedComponentName+".")}}function GO(e,t){return e===t}function HO(e){var t=void 0===e?{}:e,r=t.connectHOC,n=void 0===r?OO:r,a=t.mapStateToPropsFactories,s=void 0===a?RO:a,i=t.mapDispatchToPropsFactories,o=void 0===i?DO:i,l=t.mergePropsFactories,c=void 0===l?LO:l,d=t.selectorFactory,u=void 0===d?qO:d;return function(e,t,r,a){void 0===a&&(a={});var i=a,l=i.pure,d=void 0===l||l,p=i.areStatesEqual,m=void 0===p?GO:p,h=i.areOwnPropsEqual,f=void 0===h?EO:h,g=i.areStatePropsEqual,x=void 0===g?EO:g,y=i.areMergedPropsEqual,v=void 0===y?EO:y,b=za(i,WO),j=VO(e,s,"mapStateToProps"),w=VO(t,o,"mapDispatchToProps"),N=VO(r,c,"mergeProps");return n(u,eO({methodName:"connect",getDisplayName:function(e){return"Connect("+e+")"},shouldHandleStateChanges:Boolean(e),initMapStateToProps:j,initMapDispatchToProps:w,initMergeProps:N,pure:d,areStatesEqual:m,areOwnPropsEqual:f,areStatePropsEqual:x,areMergedPropsEqual:v},b))}}const KO=HO();var YO;function JO(e,t){var r=(0,a.useState)(function(){return{inputs:t,result:e()}})[0],n=(0,a.useRef)(!0),s=(0,a.useRef)(r),i=n.current||Boolean(t&&s.current.inputs&&function(e,t){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}(t,s.current.inputs)),o=i?s.current:{inputs:t,result:e()};return(0,a.useEffect)(function(){n.current=!1,s.current=o},[o]),o.result}YO=Ne.unstable_batchedUpdates,uO=YO;var XO=JO,$O=function(e,t){return JO(function(){return e},t)},QO=function(e){var t=e.top,r=e.right,n=e.bottom,a=e.left;return{top:t,right:r,bottom:n,left:a,width:r-a,height:n-t,x:a,y:t,center:{x:(r+a)/2,y:(n+t)/2}}},ZO=function(e,t){return{top:e.top-t.top,left:e.left-t.left,bottom:e.bottom+t.bottom,right:e.right+t.right}},eP=function(e,t){return{top:e.top+t.top,left:e.left+t.left,bottom:e.bottom-t.bottom,right:e.right-t.right}},tP={top:0,right:0,bottom:0,left:0},rP=function(e){var t=e.borderBox,r=e.margin,n=void 0===r?tP:r,a=e.border,s=void 0===a?tP:a,i=e.padding,o=void 0===i?tP:i,l=QO(ZO(t,n)),c=QO(eP(t,s)),d=QO(eP(c,o));return{marginBox:l,borderBox:QO(t),paddingBox:c,contentBox:d,margin:n,border:s,padding:o}},nP=function(e){var t=e.slice(0,-2);if("px"!==e.slice(-2))return 0;var r=Number(t);return isNaN(r)&&Ll(!1),r},aP=function(e,t){var r,n,a=e.borderBox,s=e.border,i=e.margin,o=e.padding,l=(n=t,{top:(r=a).top+n.y,left:r.left+n.x,bottom:r.bottom+n.y,right:r.right+n.x});return rP({borderBox:l,border:s,margin:i,padding:o})},sP=function(e,t){return void 0===t&&(t={x:window.pageXOffset,y:window.pageYOffset}),aP(e,t)},iP=function(e,t){var r={top:nP(t.marginTop),right:nP(t.marginRight),bottom:nP(t.marginBottom),left:nP(t.marginLeft)},n={top:nP(t.paddingTop),right:nP(t.paddingRight),bottom:nP(t.paddingBottom),left:nP(t.paddingLeft)},a={top:nP(t.borderTopWidth),right:nP(t.borderRightWidth),bottom:nP(t.borderBottomWidth),left:nP(t.borderLeftWidth)};return rP({borderBox:e,margin:r,padding:n,border:a})},oP=function(e){var t=e.getBoundingClientRect(),r=window.getComputedStyle(e);return iP(t,r)},lP=Number.isNaN||function(e){return"number"===typeof e&&e!==e};function cP(e,t){return e===t||!(!lP(e)||!lP(t))}function dP(e,t){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(!cP(e[r],t[r]))return!1;return!0}const uP=function(e,t){var r;void 0===t&&(t=dP);var n,a=[],s=!1;return function(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];return s&&r===this&&t(i,a)||(n=e.apply(this,i),s=!0,r=this,a=i),n}};const pP=function(e){var t=[],r=null,n=function(){for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];t=a,r||(r=requestAnimationFrame(function(){r=null,e.apply(void 0,t)}))};return n.cancel=function(){r&&(cancelAnimationFrame(r),r=null)},n};function mP(e,t){}mP.bind(null,"warn"),mP.bind(null,"error");function hP(){}function fP(e,t,r){var n=t.map(function(t){var n=function(e,t){return eO({},e,{},t)}(r,t.options);return e.addEventListener(t.eventName,t.fn,n),function(){e.removeEventListener(t.eventName,t.fn,n)}});return function(){n.forEach(function(e){e()})}}var gP="Invariant failed";function xP(e){this.message=e}function yP(e,t){if(!e)throw new xP(gP)}xP.prototype.toString=function(){return this.message};var vP=function(e){function t(){for(var t,r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return(t=e.call.apply(e,[this].concat(n))||this).callbacks=null,t.unbind=hP,t.onWindowError=function(e){var r=t.getCallbacks();r.isDragging()&&r.tryAbort(),e.error instanceof xP&&e.preventDefault()},t.getCallbacks=function(){if(!t.callbacks)throw new Error("Unable to find AppCallbacks in <ErrorBoundary/>");return t.callbacks},t.setCallbacks=function(e){t.callbacks=e},t}ZA(t,e);var r=t.prototype;return r.componentDidMount=function(){this.unbind=fP(window,[{eventName:"error",fn:this.onWindowError}])},r.componentDidCatch=function(e){if(!(e instanceof xP))throw e;this.setState({})},r.componentWillUnmount=function(){this.unbind()},r.render=function(){return this.props.children(this.setCallbacks)},t}(a.Component),bP=function(e){return e+1},jP=function(e,t){var r=e.droppableId===t.droppableId,n=bP(e.index),a=bP(t.index);return r?"\n      You have moved the item from position "+n+"\n      to position "+a+"\n    ":"\n    You have moved the item from position "+n+"\n    in list "+e.droppableId+"\n    to list "+t.droppableId+"\n    in position "+a+"\n  "},wP=function(e,t,r){return t.droppableId===r.droppableId?"\n      The item "+e+"\n      has been combined with "+r.draggableId:"\n      The item "+e+"\n      in list "+t.droppableId+"\n      has been combined with "+r.draggableId+"\n      in list "+r.droppableId+"\n    "},NP=function(e){return"\n  The item has returned to its starting position\n  of "+bP(e.index)+"\n"},kP="\n  Press space bar to start a drag.\n  When dragging you can use the arrow keys to move the item around and escape to cancel.\n  Some screen readers may require you to be in focus mode or to use your pass through key\n",SP=function(e){return"\n  You have lifted an item in position "+bP(e.source.index)+"\n"},_P=function(e){var t=e.destination;if(t)return jP(e.source,t);var r=e.combine;return r?wP(e.draggableId,e.source,r):"You are over an area that cannot be dropped on"},CP=function(e){if("CANCEL"===e.reason)return"\n      Movement cancelled.\n      "+NP(e.source)+"\n    ";var t=e.destination,r=e.combine;return t?"\n      You have dropped the item.\n      "+jP(e.source,t)+"\n    ":r?"\n      You have dropped the item.\n      "+wP(e.draggableId,e.source,r)+"\n    ":"\n    The item has been dropped while not over a drop area.\n    "+NP(e.source)+"\n  "},AP={x:0,y:0},OP=function(e,t){return{x:e.x+t.x,y:e.y+t.y}},PP=function(e,t){return{x:e.x-t.x,y:e.y-t.y}},EP=function(e,t){return e.x===t.x&&e.y===t.y},TP=function(e){return{x:0!==e.x?-e.x:0,y:0!==e.y?-e.y:0}},IP=function(e,t,r){var n;return void 0===r&&(r=0),(n={})[e]=t,n["x"===e?"y":"x"]=r,n},MP=function(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))},DP=function(e,t){return Math.min.apply(Math,t.map(function(t){return MP(e,t)}))},RP=function(e){return function(t){return{x:e(t.x),y:e(t.y)}}},FP=function(e,t){return{top:e.top+t.y,left:e.left+t.x,bottom:e.bottom+t.y,right:e.right+t.x}},LP=function(e){return[{x:e.left,y:e.top},{x:e.right,y:e.top},{x:e.left,y:e.bottom},{x:e.right,y:e.bottom}]},BP=function(e,t){return t&&t.shouldClipSubject?function(e,t){var r=QO({top:Math.max(t.top,e.top),right:Math.min(t.right,e.right),bottom:Math.min(t.bottom,e.bottom),left:Math.max(t.left,e.left)});return r.width<=0||r.height<=0?null:r}(t.pageMarginBox,e):QO(e)},UP=function(e){var t=e.page,r=e.withPlaceholder,n=e.axis,a=e.frame,s=function(e,t){return t?FP(e,t.scroll.diff.displacement):e}(t.marginBox,a),i=function(e,t,r){var n;return r&&r.increasedBy?eO({},e,((n={})[t.end]=e[t.end]+r.increasedBy[t.line],n)):e}(s,n,r);return{page:t,withPlaceholder:r,active:BP(i,a)}},zP=function(e,t){e.frame||yP(!1);var r=e.frame,n=PP(t,r.scroll.initial),a=TP(n),s=eO({},r,{scroll:{initial:r.scroll.initial,current:t,diff:{value:n,displacement:a},max:r.scroll.max}});return eO({},e,{frame:s,subject:UP({page:e.subject.page,withPlaceholder:e.subject.withPlaceholder,axis:e.axis,frame:s})})};function qP(e){return Object.values?Object.values(e):Object.keys(e).map(function(t){return e[t]})}function WP(e,t){if(e.findIndex)return e.findIndex(t);for(var r=0;r<e.length;r++)if(t(e[r]))return r;return-1}function VP(e,t){if(e.find)return e.find(t);var r=WP(e,t);return-1!==r?e[r]:void 0}function GP(e){return Array.prototype.slice.call(e)}var HP=uP(function(e){return e.reduce(function(e,t){return e[t.descriptor.id]=t,e},{})}),KP=uP(function(e){return e.reduce(function(e,t){return e[t.descriptor.id]=t,e},{})}),YP=uP(function(e){return qP(e)}),JP=uP(function(e){return qP(e)}),XP=uP(function(e,t){var r=JP(t).filter(function(t){return e===t.descriptor.droppableId}).sort(function(e,t){return e.descriptor.index-t.descriptor.index});return r});function $P(e){return e.at&&"REORDER"===e.at.type?e.at.destination:null}function QP(e){return e.at&&"COMBINE"===e.at.type?e.at.combine:null}var ZP=uP(function(e,t){return t.filter(function(t){return t.descriptor.id!==e.descriptor.id})}),eE=function(e,t){return e.descriptor.droppableId===t.descriptor.id},tE={point:AP,value:0},rE={invisible:{},visible:{},all:[]},nE={displaced:rE,displacedBy:tE,at:null},aE=function(e,t){return function(r){return e<=r&&r<=t}},sE=function(e){var t=aE(e.top,e.bottom),r=aE(e.left,e.right);return function(n){if(t(n.top)&&t(n.bottom)&&r(n.left)&&r(n.right))return!0;var a=t(n.top)||t(n.bottom),s=r(n.left)||r(n.right);if(a&&s)return!0;var i=n.top<e.top&&n.bottom>e.bottom,o=n.left<e.left&&n.right>e.right;return!(!i||!o)||(i&&s||o&&a)}},iE=function(e){var t=aE(e.top,e.bottom),r=aE(e.left,e.right);return function(e){return t(e.top)&&t(e.bottom)&&r(e.left)&&r(e.right)}},oE={direction:"vertical",line:"y",crossAxisLine:"x",start:"top",end:"bottom",size:"height",crossAxisStart:"left",crossAxisEnd:"right",crossAxisSize:"width"},lE={direction:"horizontal",line:"x",crossAxisLine:"y",start:"left",end:"right",size:"width",crossAxisStart:"top",crossAxisEnd:"bottom",crossAxisSize:"height"},cE=function(e){var t=e.target,r=e.destination,n=e.viewport,a=e.withDroppableDisplacement,s=e.isVisibleThroughFrameFn,i=a?function(e,t){var r=t.frame?t.frame.scroll.diff.displacement:AP;return FP(e,r)}(t,r):t;return function(e,t,r){return!!t.subject.active&&r(t.subject.active)(e)}(i,r,s)&&function(e,t,r){return r(t)(e)}(i,n,s)},dE=function(e){return cE(eO({},e,{isVisibleThroughFrameFn:iE}))};function uE(e){var t=e.afterDragging,r=e.destination,n=e.displacedBy,a=e.viewport,s=e.forceShouldAnimate,i=e.last;return t.reduce(function(e,t){var o=function(e,t){var r=e.page.marginBox,n={top:t.point.y,right:0,bottom:0,left:t.point.x};return QO(ZO(r,n))}(t,n),l=t.descriptor.id;if(e.all.push(l),!cE(eO({},{target:o,destination:r,viewport:a,withDroppableDisplacement:!0},{isVisibleThroughFrameFn:sE})))return e.invisible[t.descriptor.id]=!0,e;var c=function(e,t,r){if("boolean"===typeof r)return r;if(!t)return!0;var n=t.invisible,a=t.visible;if(n[e])return!1;var s=a[e];return!s||s.shouldAnimate}(l,i,s),d={draggableId:l,shouldAnimate:c};return e.visible[l]=d,e},{all:[],visible:{},invisible:{}})}function pE(e){var t=e.insideDestination,r=e.inHomeList,n=e.displacedBy,a=e.destination,s=function(e,t){if(!e.length)return 0;var r=e[e.length-1].descriptor.index;return t.inHomeList?r:r+1}(t,{inHomeList:r});return{displaced:rE,displacedBy:n,at:{type:"REORDER",destination:{droppableId:a.descriptor.id,index:s}}}}function mE(e){var t=e.draggable,r=e.insideDestination,n=e.destination,a=e.viewport,s=e.displacedBy,i=e.last,o=e.index,l=e.forceShouldAnimate,c=eE(t,n);if(null==o)return pE({insideDestination:r,inHomeList:c,displacedBy:s,destination:n});var d=VP(r,function(e){return e.descriptor.index===o});if(!d)return pE({insideDestination:r,inHomeList:c,displacedBy:s,destination:n});var u=ZP(t,r),p=r.indexOf(d);return{displaced:uE({afterDragging:u.slice(p),destination:n,displacedBy:s,last:i,viewport:a.frame,forceShouldAnimate:l}),displacedBy:s,at:{type:"REORDER",destination:{droppableId:n.descriptor.id,index:o}}}}function hE(e,t){return Boolean(t.effected[e])}var fE=function(e){var t=e.isMovingForward,r=e.isInHomeList,n=e.draggable,a=e.draggables,s=e.destination,i=e.insideDestination,o=e.previousImpact,l=e.viewport,c=e.afterCritical,d=o.at;if(d||yP(!1),"REORDER"===d.type){var u=function(e){var t=e.isMovingForward,r=e.isInHomeList,n=e.insideDestination,a=e.location;if(!n.length)return null;var s=a.index,i=t?s+1:s-1,o=n[0].descriptor.index,l=n[n.length-1].descriptor.index;return i<o||i>(r?l:l+1)?null:i}({isMovingForward:t,isInHomeList:r,location:d.destination,insideDestination:i});return null==u?null:mE({draggable:n,insideDestination:i,destination:s,viewport:l,last:o.displaced,displacedBy:o.displacedBy,index:u})}var p=function(e){var t=e.isMovingForward,r=e.destination,n=e.draggables,a=e.combine,s=e.afterCritical;if(!r.isCombineEnabled)return null;var i=a.draggableId,o=n[i].descriptor.index;return hE(i,s)?t?o:o-1:t?o+1:o}({isMovingForward:t,destination:s,displaced:o.displaced,draggables:a,combine:d.combine,afterCritical:c});return null==p?null:mE({draggable:n,insideDestination:i,destination:s,viewport:l,last:o.displaced,displacedBy:o.displacedBy,index:p})},gE=function(e){var t=e.afterCritical,r=e.impact,n=e.draggables,a=QP(r);a||yP(!1);var s=a.draggableId,i=n[s].page.borderBox.center,o=function(e){var t=e.displaced,r=e.afterCritical,n=e.combineWith,a=e.displacedBy,s=Boolean(t.visible[n]||t.invisible[n]);return hE(n,r)?s?AP:TP(a.point):s?a.point:AP}({displaced:r.displaced,afterCritical:t,combineWith:s,displacedBy:r.displacedBy});return OP(i,o)},xE=function(e,t){return t.margin[e.start]+t.borderBox[e.size]/2},yE=function(e,t,r){return t[e.crossAxisStart]+r.margin[e.crossAxisStart]+r.borderBox[e.crossAxisSize]/2},vE=function(e){var t=e.axis,r=e.moveRelativeTo,n=e.isMoving;return IP(t.line,r.marginBox[t.end]+xE(t,n),yE(t,r.marginBox,n))},bE=function(e){var t=e.axis,r=e.moveRelativeTo,n=e.isMoving;return IP(t.line,r.marginBox[t.start]-function(e,t){return t.margin[e.end]+t.borderBox[e.size]/2}(t,n),yE(t,r.marginBox,n))},jE=function(e){var t=e.impact,r=e.draggable,n=e.draggables,a=e.droppable,s=e.afterCritical,i=XP(a.descriptor.id,n),o=r.page,l=a.axis;if(!i.length)return function(e){var t=e.axis,r=e.moveInto,n=e.isMoving;return IP(t.line,r.contentBox[t.start]+xE(t,n),yE(t,r.contentBox,n))}({axis:l,moveInto:a.page,isMoving:o});var c=t.displaced,d=t.displacedBy,u=c.all[0];if(u){var p=n[u];if(hE(u,s))return bE({axis:l,moveRelativeTo:p.page,isMoving:o});var m=aP(p.page,d.point);return bE({axis:l,moveRelativeTo:m,isMoving:o})}var h=i[i.length-1];if(h.descriptor.id===r.descriptor.id)return o.borderBox.center;if(hE(h.descriptor.id,s)){var f=aP(h.page,TP(s.displacedBy.point));return vE({axis:l,moveRelativeTo:f,isMoving:o})}return vE({axis:l,moveRelativeTo:h.page,isMoving:o})},wE=function(e,t){var r=e.frame;return r?OP(t,r.scroll.diff.displacement):t},NE=function(e){var t=function(e){var t=e.impact,r=e.draggable,n=e.droppable,a=e.draggables,s=e.afterCritical,i=r.page.borderBox.center,o=t.at;return n&&o?"REORDER"===o.type?jE({impact:t,draggable:r,draggables:a,droppable:n,afterCritical:s}):gE({impact:t,draggables:a,afterCritical:s}):i}(e),r=e.droppable;return r?wE(r,t):t},kE=function(e,t){var r=PP(t,e.scroll.initial),n=TP(r);return{frame:QO({top:t.y,bottom:t.y+e.frame.height,left:t.x,right:t.x+e.frame.width}),scroll:{initial:e.scroll.initial,max:e.scroll.max,current:t,diff:{value:r,displacement:n}}}};function SE(e,t){return e.map(function(e){return t[e]})}var _E=function(e){var t=e.pageBorderBoxCenter,r=e.draggable,n=function(e,t){return OP(e.scroll.diff.displacement,t)}(e.viewport,t),a=PP(n,r.page.borderBox.center);return OP(r.client.borderBox.center,a)},CE=function(e){var t=e.draggable,r=e.destination,n=e.newPageBorderBoxCenter,a=e.viewport,s=e.withDroppableDisplacement,i=e.onlyOnMainAxis,o=void 0!==i&&i,l=PP(n,t.page.borderBox.center),c={target:FP(t.page.borderBox,l),destination:r,withDroppableDisplacement:s,viewport:a};return o?function(e){return cE(eO({},e,{isVisibleThroughFrameFn:(t=e.destination.axis,function(e){var r=aE(e.top,e.bottom),n=aE(e.left,e.right);return function(e){return t===oE?r(e.top)&&r(e.bottom):n(e.left)&&n(e.right)}})}));var t}(c):dE(c)},AE=function(e){var t=e.isMovingForward,r=e.draggable,n=e.destination,a=e.draggables,s=e.previousImpact,i=e.viewport,o=e.previousPageBorderBoxCenter,l=e.previousClientSelection,c=e.afterCritical;if(!n.isEnabled)return null;var d=XP(n.descriptor.id,a),u=eE(r,n),p=function(e){var t=e.isMovingForward,r=e.draggable,n=e.destination,a=e.insideDestination,s=e.previousImpact;if(!n.isCombineEnabled)return null;if(!$P(s))return null;function i(e){var t={type:"COMBINE",combine:{draggableId:e,droppableId:n.descriptor.id}};return eO({},s,{at:t})}var o=s.displaced.all,l=o.length?o[0]:null;if(t)return l?i(l):null;var c=ZP(r,a);if(!l)return c.length?i(c[c.length-1].descriptor.id):null;var d=WP(c,function(e){return e.descriptor.id===l});-1===d&&yP(!1);var u=d-1;return u<0?null:i(c[u].descriptor.id)}({isMovingForward:t,draggable:r,destination:n,insideDestination:d,previousImpact:s})||fE({isMovingForward:t,isInHomeList:u,draggable:r,draggables:a,destination:n,insideDestination:d,previousImpact:s,viewport:i,afterCritical:c});if(!p)return null;var m=NE({impact:p,draggable:r,droppable:n,draggables:a,afterCritical:c});if(CE({draggable:r,destination:n,newPageBorderBoxCenter:m,viewport:i.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0}))return{clientSelection:_E({pageBorderBoxCenter:m,draggable:r,viewport:i}),impact:p,scrollJumpRequest:null};var h=PP(m,o),f=function(e){var t=e.impact,r=e.viewport,n=e.destination,a=e.draggables,s=e.maxScrollChange,i=kE(r,OP(r.scroll.current,s)),o=n.frame?zP(n,OP(n.frame.scroll.current,s)):n,l=t.displaced,c=uE({afterDragging:SE(l.all,a),destination:n,displacedBy:t.displacedBy,viewport:i.frame,last:l,forceShouldAnimate:!1}),d=uE({afterDragging:SE(l.all,a),destination:o,displacedBy:t.displacedBy,viewport:r.frame,last:l,forceShouldAnimate:!1}),u={},p={},m=[l,c,d];return l.all.forEach(function(e){var t=function(e,t){for(var r=0;r<t.length;r++){var n=t[r].visible[e];if(n)return n}return null}(e,m);t?p[e]=t:u[e]=!0}),eO({},t,{displaced:{all:l.all,invisible:u,visible:p}})}({impact:p,viewport:i,destination:n,draggables:a,maxScrollChange:h});return{clientSelection:l,impact:f,scrollJumpRequest:h}},OE=function(e){var t=e.subject.active;return t||yP(!1),t},PE=function(e,t){var r=e.page.borderBox.center;return hE(e.descriptor.id,t)?PP(r,t.displacedBy.point):r},EE=function(e,t){var r=e.page.borderBox;return hE(e.descriptor.id,t)?FP(r,TP(t.displacedBy.point)):r},TE=uP(function(e,t){var r=t[e.line];return{value:r,point:IP(e.line,r)}}),IE=function(e,t){return eO({},e,{scroll:eO({},e.scroll,{max:t})})},ME=function(e,t,r){var n=e.frame;eE(t,e)&&yP(!1),e.subject.withPlaceholder&&yP(!1);var a=TE(e.axis,t.displaceBy).point,s=function(e,t,r){var n=e.axis;if("virtual"===e.descriptor.mode)return IP(n.line,t[n.line]);var a=e.subject.page.contentBox[n.size],s=XP(e.descriptor.id,r).reduce(function(e,t){return e+t.client.marginBox[n.size]},0)+t[n.line]-a;return s<=0?null:IP(n.line,s)}(e,a,r),i={placeholderSize:a,increasedBy:s,oldFrameMaxScroll:e.frame?e.frame.scroll.max:null};if(!n)return eO({},e,{subject:UP({page:e.subject.page,withPlaceholder:i,axis:e.axis,frame:e.frame})});var o=s?OP(n.scroll.max,s):n.scroll.max,l=IE(n,o);return eO({},e,{subject:UP({page:e.subject.page,withPlaceholder:i,axis:e.axis,frame:l}),frame:l})},DE=function(e){var t=e.isMovingForward,r=e.previousPageBorderBoxCenter,n=e.draggable,a=e.isOver,s=e.draggables,i=e.droppables,o=e.viewport,l=e.afterCritical,c=function(e){var t=e.isMovingForward,r=e.pageBorderBoxCenter,n=e.source,a=e.droppables,s=e.viewport,i=n.subject.active;if(!i)return null;var o=n.axis,l=aE(i[o.start],i[o.end]),c=YP(a).filter(function(e){return e!==n}).filter(function(e){return e.isEnabled}).filter(function(e){return Boolean(e.subject.active)}).filter(function(e){return sE(s.frame)(OE(e))}).filter(function(e){var r=OE(e);return t?i[o.crossAxisEnd]<r[o.crossAxisEnd]:r[o.crossAxisStart]<i[o.crossAxisStart]}).filter(function(e){var t=OE(e),r=aE(t[o.start],t[o.end]);return l(t[o.start])||l(t[o.end])||r(i[o.start])||r(i[o.end])}).sort(function(e,r){var n=OE(e)[o.crossAxisStart],a=OE(r)[o.crossAxisStart];return t?n-a:a-n}).filter(function(e,t,r){return OE(e)[o.crossAxisStart]===OE(r[0])[o.crossAxisStart]});if(!c.length)return null;if(1===c.length)return c[0];var d=c.filter(function(e){return aE(OE(e)[o.start],OE(e)[o.end])(r[o.line])});return 1===d.length?d[0]:d.length>1?d.sort(function(e,t){return OE(e)[o.start]-OE(t)[o.start]})[0]:c.sort(function(e,t){var n=DP(r,LP(OE(e))),a=DP(r,LP(OE(t)));return n!==a?n-a:OE(e)[o.start]-OE(t)[o.start]})[0]}({isMovingForward:t,pageBorderBoxCenter:r,source:a,droppables:i,viewport:o});if(!c)return null;var d=XP(c.descriptor.id,s),u=function(e){var t=e.pageBorderBoxCenter,r=e.viewport,n=e.destination,a=e.insideDestination,s=e.afterCritical,i=a.filter(function(e){return dE({target:EE(e,s),destination:n,viewport:r.frame,withDroppableDisplacement:!0})}).sort(function(e,r){var a=MP(t,wE(n,PE(e,s))),i=MP(t,wE(n,PE(r,s)));return a<i?-1:i<a?1:e.descriptor.index-r.descriptor.index});return i[0]||null}({pageBorderBoxCenter:r,viewport:o,destination:c,insideDestination:d,afterCritical:l}),p=function(e){var t=e.previousPageBorderBoxCenter,r=e.moveRelativeTo,n=e.insideDestination,a=e.draggable,s=e.draggables,i=e.destination,o=e.viewport,l=e.afterCritical;if(!r){if(n.length)return null;var c={displaced:rE,displacedBy:tE,at:{type:"REORDER",destination:{droppableId:i.descriptor.id,index:0}}},d=NE({impact:c,draggable:a,droppable:i,draggables:s,afterCritical:l}),u=eE(a,i)?i:ME(i,a,s);return CE({draggable:a,destination:u,newPageBorderBoxCenter:d,viewport:o.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0})?c:null}var p=Boolean(t[i.axis.line]<=r.page.borderBox.center[i.axis.line]),m=function(){var e=r.descriptor.index;return r.descriptor.id===a.descriptor.id||p?e:e+1}(),h=TE(i.axis,a.displaceBy);return mE({draggable:a,insideDestination:n,destination:i,viewport:o,displacedBy:h,last:rE,index:m})}({previousPageBorderBoxCenter:r,destination:c,draggable:n,draggables:s,moveRelativeTo:u,insideDestination:d,viewport:o,afterCritical:l});if(!p)return null;var m=NE({impact:p,draggable:n,droppable:c,draggables:s,afterCritical:l});return{clientSelection:_E({pageBorderBoxCenter:m,draggable:n,viewport:o}),impact:p,scrollJumpRequest:null}},RE=function(e){var t=e.at;return t?"REORDER"===t.type?t.destination.droppableId:t.combine.droppableId:null},FE=function(e){var t=e.state,r=e.type,n=function(e,t){var r=RE(e);return r?t[r]:null}(t.impact,t.dimensions.droppables),a=Boolean(n),s=t.dimensions.droppables[t.critical.droppable.id],i=n||s,o=i.axis.direction,l="vertical"===o&&("MOVE_UP"===r||"MOVE_DOWN"===r)||"horizontal"===o&&("MOVE_LEFT"===r||"MOVE_RIGHT"===r);if(l&&!a)return null;var c="MOVE_DOWN"===r||"MOVE_RIGHT"===r,d=t.dimensions.draggables[t.critical.draggable.id],u=t.current.page.borderBoxCenter,p=t.dimensions,m=p.draggables,h=p.droppables;return l?AE({isMovingForward:c,previousPageBorderBoxCenter:u,draggable:d,destination:i,draggables:m,viewport:t.viewport,previousClientSelection:t.current.client.selection,previousImpact:t.impact,afterCritical:t.afterCritical}):DE({isMovingForward:c,previousPageBorderBoxCenter:u,draggable:d,isOver:i,draggables:m,droppables:h,viewport:t.viewport,afterCritical:t.afterCritical})};function LE(e){return"DRAGGING"===e.phase||"COLLECTING"===e.phase}function BE(e){var t=aE(e.top,e.bottom),r=aE(e.left,e.right);return function(e){return t(e.y)&&r(e.x)}}function UE(e){var t=e.pageBorderBox,r=e.draggable,n=e.droppables,a=YP(n).filter(function(e){if(!e.isEnabled)return!1;var r=e.subject.active;if(!r)return!1;if(!function(e,t){return e.left<t.right&&e.right>t.left&&e.top<t.bottom&&e.bottom>t.top}(t,r))return!1;if(BE(r)(t.center))return!0;var n=e.axis,a=r.center[n.crossAxisLine],s=t[n.crossAxisStart],i=t[n.crossAxisEnd],o=aE(r[n.crossAxisStart],r[n.crossAxisEnd]),l=o(s),c=o(i);return!l&&!c||(l?s<a:i>a)});return a.length?1===a.length?a[0].descriptor.id:function(e){var t=e.pageBorderBox,r=e.draggable,n=e.candidates,a=r.page.borderBox.center,s=n.map(function(e){var r=e.axis,n=IP(e.axis.line,t.center[r.line],e.page.borderBox.center[r.crossAxisLine]);return{id:e.descriptor.id,distance:MP(a,n)}}).sort(function(e,t){return t.distance-e.distance});return s[0]?s[0].id:null}({pageBorderBox:t,draggable:r,candidates:a}):null}var zE=function(e,t){return QO(FP(e,t))};function qE(e){var t=e.displaced,r=e.id;return Boolean(t.visible[r]||t.invisible[r])}var WE=function(e){var t=e.pageOffset,r=e.draggable,n=e.draggables,a=e.droppables,s=e.previousImpact,i=e.viewport,o=e.afterCritical,l=zE(r.page.borderBox,t),c=UE({pageBorderBox:l,draggable:r,droppables:a});if(!c)return nE;var d=a[c],u=XP(d.descriptor.id,n),p=function(e,t){var r=e.frame;return r?zE(t,r.scroll.diff.value):t}(d,l);return function(e){var t=e.draggable,r=e.pageBorderBoxWithDroppableScroll,n=e.previousImpact,a=e.destination,s=e.insideDestination,i=e.afterCritical;if(!a.isCombineEnabled)return null;var o=a.axis,l=TE(a.axis,t.displaceBy),c=l.value,d=r[o.start],u=r[o.end],p=VP(ZP(t,s),function(e){var t=e.descriptor.id,r=e.page.borderBox,a=r[o.size]/4,s=hE(t,i),l=qE({displaced:n.displaced,id:t});return s?l?u>r[o.start]+a&&u<r[o.end]-a:d>r[o.start]-c+a&&d<r[o.end]-c-a:l?u>r[o.start]+c+a&&u<r[o.end]+c-a:d>r[o.start]+a&&d<r[o.end]-a});return p?{displacedBy:l,displaced:n.displaced,at:{type:"COMBINE",combine:{draggableId:p.descriptor.id,droppableId:a.descriptor.id}}}:null}({pageBorderBoxWithDroppableScroll:p,draggable:r,previousImpact:s,destination:d,insideDestination:u,afterCritical:o})||function(e){var t=e.pageBorderBoxWithDroppableScroll,r=e.draggable,n=e.destination,a=e.insideDestination,s=e.last,i=e.viewport,o=e.afterCritical,l=n.axis,c=TE(n.axis,r.displaceBy),d=c.value,u=t[l.start],p=t[l.end],m=function(e){var t=e.draggable,r=e.closest,n=e.inHomeList;return r?n&&r.descriptor.index>t.descriptor.index?r.descriptor.index-1:r.descriptor.index:null}({draggable:r,closest:VP(ZP(r,a),function(e){var t=e.descriptor.id,r=e.page.borderBox.center[l.line],n=hE(t,o),a=qE({displaced:s,id:t});return n?a?p<=r:u<r-d:a?p<=r+d:u<r}),inHomeList:eE(r,n)});return mE({draggable:r,insideDestination:a,destination:n,viewport:i,last:s,displacedBy:c,index:m})}({pageBorderBoxWithDroppableScroll:p,draggable:r,destination:d,insideDestination:u,last:s.displaced,viewport:i,afterCritical:o})},VE=function(e,t){var r;return eO({},e,((r={})[t.descriptor.id]=t,r))},GE=function(e){var t=e.previousImpact,r=e.impact,n=e.droppables,a=RE(t),s=RE(r);if(!a)return n;if(a===s)return n;var i=n[a];if(!i.subject.withPlaceholder)return n;var o=function(e){var t=e.subject.withPlaceholder;t||yP(!1);var r=e.frame;if(!r)return eO({},e,{subject:UP({page:e.subject.page,axis:e.axis,frame:null,withPlaceholder:null})});var n=t.oldFrameMaxScroll;n||yP(!1);var a=IE(r,n);return eO({},e,{subject:UP({page:e.subject.page,axis:e.axis,frame:a,withPlaceholder:null}),frame:a})}(i);return VE(n,o)},HE=function(e){var t=e.state,r=e.clientSelection,n=e.dimensions,a=e.viewport,s=e.impact,i=e.scrollJumpRequest,o=a||t.viewport,l=n||t.dimensions,c=r||t.current.client.selection,d=PP(c,t.initial.client.selection),u={offset:d,selection:c,borderBoxCenter:OP(t.initial.client.borderBoxCenter,d)},p={selection:OP(u.selection,o.scroll.current),borderBoxCenter:OP(u.borderBoxCenter,o.scroll.current),offset:OP(u.offset,o.scroll.diff.value)},m={client:u,page:p};if("COLLECTING"===t.phase)return eO({phase:"COLLECTING"},t,{dimensions:l,viewport:o,current:m});var h=l.draggables[t.critical.draggable.id],f=s||WE({pageOffset:p.offset,draggable:h,draggables:l.draggables,droppables:l.droppables,previousImpact:t.impact,viewport:o,afterCritical:t.afterCritical}),g=function(e){var t=e.draggable,r=e.draggables,n=e.droppables,a=e.previousImpact,s=e.impact,i=GE({previousImpact:a,impact:s,droppables:n}),o=RE(s);if(!o)return i;var l=n[o];if(eE(t,l))return i;if(l.subject.withPlaceholder)return i;var c=ME(l,t,r);return VE(i,c)}({draggable:h,impact:f,previousImpact:t.impact,draggables:l.draggables,droppables:l.droppables});return eO({},t,{current:m,dimensions:{draggables:l.draggables,droppables:g},impact:f,viewport:o,scrollJumpRequest:i||null,forceShouldAnimate:!i&&null})};var KE=function(e){var t=e.impact,r=e.viewport,n=e.draggables,a=e.destination,s=e.forceShouldAnimate,i=t.displaced,o=function(e,t){return e.map(function(e){return t[e]})}(i.all,n);return eO({},t,{displaced:uE({afterDragging:o,destination:a,displacedBy:t.displacedBy,viewport:r.frame,forceShouldAnimate:s,last:i})})},YE=function(e){var t=e.impact,r=e.draggable,n=e.droppable,a=e.draggables,s=e.viewport,i=e.afterCritical,o=NE({impact:t,draggable:r,draggables:a,droppable:n,afterCritical:i});return _E({pageBorderBoxCenter:o,draggable:r,viewport:s})},JE=function(e){var t=e.state,r=e.dimensions,n=e.viewport;"SNAP"!==t.movementMode&&yP(!1);var a=t.impact,s=n||t.viewport,i=r||t.dimensions,o=i.draggables,l=i.droppables,c=o[t.critical.draggable.id],d=RE(a);d||yP(!1);var u=l[d],p=KE({impact:a,viewport:s,destination:u,draggables:o}),m=YE({impact:p,draggable:c,droppable:u,draggables:o,viewport:s,afterCritical:t.afterCritical});return HE({impact:p,clientSelection:m,state:t,dimensions:i,viewport:s})},XE=function(e){var t=e.draggable,r=e.home,n=e.draggables,a=e.viewport,s=TE(r.axis,t.displaceBy),i=XP(r.descriptor.id,n),o=i.indexOf(t);-1===o&&yP(!1);var l,c=i.slice(o+1),d=c.reduce(function(e,t){return e[t.descriptor.id]=!0,e},{}),u={inVirtualList:"virtual"===r.descriptor.mode,displacedBy:s,effected:d};return{impact:{displaced:uE({afterDragging:c,destination:r,displacedBy:s,last:null,viewport:a.frame,forceShouldAnimate:!1}),displacedBy:s,at:{type:"REORDER",destination:(l=t.descriptor,{index:l.index,droppableId:l.droppableId})}},afterCritical:u}},$E=function(e){0},QE=function(e){0},ZE=function(e){var t=e.additions,r=e.updatedDroppables,n=e.viewport,a=n.scroll.diff.value;return t.map(function(e){var t=e.descriptor.droppableId,s=function(e){var t=e.frame;return t||yP(!1),t}(r[t]),i=s.scroll.diff.value,o=function(e){var t=e.draggable,r=e.offset,n=e.initialWindowScroll,a=aP(t.client,r),s=sP(a,n);return eO({},t,{placeholder:eO({},t.placeholder,{client:a}),client:a,page:s})}({draggable:e,offset:OP(a,i),initialWindowScroll:n.scroll.initial});return o})},eT=function(e){return"SNAP"===e.movementMode},tT=function(e,t,r){var n=function(e,t){return{draggables:e.draggables,droppables:VE(e.droppables,t)}}(e.dimensions,t);return!eT(e)||r?HE({state:e,dimensions:n}):JE({state:e,dimensions:n})};function rT(e){return e.isDragging&&"SNAP"===e.movementMode?eO({phase:"DRAGGING"},e,{scrollJumpRequest:null}):e}var nT={phase:"IDLE",completed:null,shouldFlush:!1},aT=function(e,t){if(void 0===e&&(e=nT),"FLUSH"===t.type)return eO({},nT,{shouldFlush:!0});if("INITIAL_PUBLISH"===t.type){"IDLE"!==e.phase&&yP(!1);var r=t.payload,n=r.critical,a=r.clientSelection,s=r.viewport,i=r.dimensions,o=r.movementMode,l=i.draggables[n.draggable.id],c=i.droppables[n.droppable.id],d={selection:a,borderBoxCenter:l.client.borderBox.center,offset:AP},u={client:d,page:{selection:OP(d.selection,s.scroll.initial),borderBoxCenter:OP(d.selection,s.scroll.initial),offset:OP(d.selection,s.scroll.diff.value)}},p=YP(i.droppables).every(function(e){return!e.isFixedOnPage}),m=XE({draggable:l,home:c,draggables:i.draggables,viewport:s}),h=m.impact;return{phase:"DRAGGING",isDragging:!0,critical:n,movementMode:o,dimensions:i,initial:u,current:u,isWindowScrollAllowed:p,impact:h,afterCritical:m.afterCritical,onLiftImpact:h,viewport:s,scrollJumpRequest:null,forceShouldAnimate:null}}if("COLLECTION_STARTING"===t.type)return"COLLECTING"===e.phase||"DROP_PENDING"===e.phase?e:("DRAGGING"!==e.phase&&yP(!1),eO({phase:"COLLECTING"},e,{phase:"COLLECTING"}));if("PUBLISH_WHILE_DRAGGING"===t.type)return"COLLECTING"!==e.phase&&"DROP_PENDING"!==e.phase&&yP(!1),function(e){var t=e.state,r=e.published;$E();var n=r.modified.map(function(e){var r=t.dimensions.droppables[e.droppableId];return zP(r,e.scroll)}),a=eO({},t.dimensions.droppables,{},HP(n)),s=KP(ZE({additions:r.additions,updatedDroppables:a,viewport:t.viewport})),i=eO({},t.dimensions.draggables,{},s);r.removals.forEach(function(e){delete i[e]});var o={droppables:a,draggables:i},l=RE(t.impact),c=l?o.droppables[l]:null,d=o.draggables[t.critical.draggable.id],u=o.droppables[t.critical.droppable.id],p=XE({draggable:d,home:u,draggables:i,viewport:t.viewport}),m=p.impact,h=p.afterCritical,f=c&&c.isCombineEnabled?t.impact:m,g=WE({pageOffset:t.current.page.offset,draggable:o.draggables[t.critical.draggable.id],draggables:o.draggables,droppables:o.droppables,previousImpact:f,viewport:t.viewport,afterCritical:h});QE();var x=eO({phase:"DRAGGING"},t,{phase:"DRAGGING",impact:g,onLiftImpact:m,dimensions:o,afterCritical:h,forceShouldAnimate:!1});return"COLLECTING"===t.phase?x:eO({phase:"DROP_PENDING"},x,{phase:"DROP_PENDING",reason:t.reason,isWaiting:!1})}({state:e,published:t.payload});if("MOVE"===t.type){if("DROP_PENDING"===e.phase)return e;LE(e)||yP(!1);var f=t.payload.client;return EP(f,e.current.client.selection)?e:HE({state:e,clientSelection:f,impact:eT(e)?e.impact:null})}if("UPDATE_DROPPABLE_SCROLL"===t.type){if("DROP_PENDING"===e.phase)return rT(e);if("COLLECTING"===e.phase)return rT(e);LE(e)||yP(!1);var g=t.payload,x=g.id,y=g.newScroll,v=e.dimensions.droppables[x];if(!v)return e;var b=zP(v,y);return tT(e,b,!1)}if("UPDATE_DROPPABLE_IS_ENABLED"===t.type){if("DROP_PENDING"===e.phase)return e;LE(e)||yP(!1);var j=t.payload,w=j.id,N=j.isEnabled,k=e.dimensions.droppables[w];k||yP(!1),k.isEnabled===N&&yP(!1);var S=eO({},k,{isEnabled:N});return tT(e,S,!0)}if("UPDATE_DROPPABLE_IS_COMBINE_ENABLED"===t.type){if("DROP_PENDING"===e.phase)return e;LE(e)||yP(!1);var _=t.payload,C=_.id,A=_.isCombineEnabled,O=e.dimensions.droppables[C];O||yP(!1),O.isCombineEnabled===A&&yP(!1);var P=eO({},O,{isCombineEnabled:A});return tT(e,P,!0)}if("MOVE_BY_WINDOW_SCROLL"===t.type){if("DROP_PENDING"===e.phase||"DROP_ANIMATING"===e.phase)return e;LE(e)||yP(!1),e.isWindowScrollAllowed||yP(!1);var E=t.payload.newScroll;if(EP(e.viewport.scroll.current,E))return rT(e);var T=kE(e.viewport,E);return eT(e)?JE({state:e,viewport:T}):HE({state:e,viewport:T})}if("UPDATE_VIEWPORT_MAX_SCROLL"===t.type){if(!LE(e))return e;var I=t.payload.maxScroll;if(EP(I,e.viewport.scroll.max))return e;var M=eO({},e.viewport,{scroll:eO({},e.viewport.scroll,{max:I})});return eO({phase:"DRAGGING"},e,{viewport:M})}if("MOVE_UP"===t.type||"MOVE_DOWN"===t.type||"MOVE_LEFT"===t.type||"MOVE_RIGHT"===t.type){if("COLLECTING"===e.phase||"DROP_PENDING"===e.phase)return e;"DRAGGING"!==e.phase&&yP(!1);var D=FE({state:e,type:t.type});return D?HE({state:e,impact:D.impact,clientSelection:D.clientSelection,scrollJumpRequest:D.scrollJumpRequest}):e}if("DROP_PENDING"===t.type){var R=t.payload.reason;return"COLLECTING"!==e.phase&&yP(!1),eO({phase:"DROP_PENDING"},e,{phase:"DROP_PENDING",isWaiting:!0,reason:R})}if("DROP_ANIMATE"===t.type){var F=t.payload,L=F.completed,B=F.dropDuration,U=F.newHomeClientOffset;return"DRAGGING"!==e.phase&&"DROP_PENDING"!==e.phase&&yP(!1),{phase:"DROP_ANIMATING",completed:L,dropDuration:B,newHomeClientOffset:U,dimensions:e.dimensions}}return"DROP_COMPLETE"===t.type?{phase:"IDLE",completed:t.payload.completed,shouldFlush:!1}:e},sT=function(e){return{type:"PUBLISH_WHILE_DRAGGING",payload:e}},iT=function(){return{type:"COLLECTION_STARTING",payload:null}},oT=function(e){return{type:"UPDATE_DROPPABLE_SCROLL",payload:e}},lT=function(e){return{type:"UPDATE_DROPPABLE_IS_ENABLED",payload:e}},cT=function(e){return{type:"UPDATE_DROPPABLE_IS_COMBINE_ENABLED",payload:e}},dT=function(e){return{type:"MOVE",payload:e}},uT=function(){return{type:"MOVE_UP",payload:null}},pT=function(){return{type:"MOVE_DOWN",payload:null}},mT=function(){return{type:"MOVE_RIGHT",payload:null}},hT=function(){return{type:"MOVE_LEFT",payload:null}},fT=function(e){return{type:"DROP_COMPLETE",payload:e}},gT=function(e){return{type:"DROP",payload:e}},xT=function(){return{type:"DROP_ANIMATION_FINISHED",payload:null}};var yT="cubic-bezier(.2,1,.1,1)",vT={drop:0,combining:.7},bT={drop:.75},jT=.2+"s "+"cubic-bezier(0.2, 0, 0, 1)",wT={fluid:"opacity "+jT,snap:"transform "+jT+", opacity "+jT,drop:function(e){var t=e+"s "+yT;return"transform "+t+", opacity "+t},outOfTheWay:"transform "+jT,placeholder:"height "+jT+", width "+jT+", margin "+jT},NT=function(e){return EP(e,AP)?null:"translate("+e.x+"px, "+e.y+"px)"},kT=NT,ST=function(e,t){var r=NT(e);return r?t?r+" scale("+bT.drop+")":r:null},_T=.33,CT=.55,AT=CT-_T,OT=function(e){var t=e.getState,r=e.dispatch;return function(e){return function(n){if("DROP"===n.type){var a=t(),s=n.payload.reason;if("COLLECTING"!==a.phase){if("IDLE"!==a.phase){"DROP_PENDING"===a.phase&&a.isWaiting&&yP(!1),"DRAGGING"!==a.phase&&"DROP_PENDING"!==a.phase&&yP(!1);var i=a.critical,o=a.dimensions,l=o.draggables[a.critical.draggable.id],c=function(e){var t=e.draggables,r=e.reason,n=e.lastImpact,a=e.home,s=e.viewport,i=e.onLiftImpact;return n.at&&"DROP"===r?"REORDER"===n.at.type?{impact:n,didDropInsideDroppable:!0}:{impact:eO({},n,{displaced:rE}),didDropInsideDroppable:!0}:{impact:KE({draggables:t,impact:i,destination:a,viewport:s,forceShouldAnimate:!0}),didDropInsideDroppable:!1}}({reason:s,lastImpact:a.impact,afterCritical:a.afterCritical,onLiftImpact:a.onLiftImpact,home:a.dimensions.droppables[a.critical.droppable.id],viewport:a.viewport,draggables:a.dimensions.draggables}),d=c.impact,u=c.didDropInsideDroppable,p=u?$P(d):null,m=u?QP(d):null,h={index:i.draggable.index,droppableId:i.droppable.id},f={draggableId:l.descriptor.id,type:l.descriptor.type,source:h,reason:s,mode:a.movementMode,destination:p,combine:m},g=function(e){var t=e.impact,r=e.draggable,n=e.dimensions,a=e.viewport,s=e.afterCritical,i=n.draggables,o=n.droppables,l=RE(t),c=l?o[l]:null,d=o[r.descriptor.droppableId],u=YE({impact:t,draggable:r,draggables:i,afterCritical:s,droppable:c||d,viewport:a});return PP(u,r.client.borderBox.center)}({impact:d,draggable:l,dimensions:o,viewport:a.viewport,afterCritical:a.afterCritical}),x={critical:a.critical,afterCritical:a.afterCritical,result:f,impact:d};if(!EP(a.current.client.offset,g)||Boolean(f.combine)){var y=function(e){var t=e.current,r=e.destination,n=e.reason,a=MP(t,r);if(a<=0)return _T;if(a>=1500)return CT;var s=_T+AT*(a/1500);return Number(("CANCEL"===n?.6*s:s).toFixed(2))}({current:a.current.client.offset,destination:g,reason:s});r(function(e){return{type:"DROP_ANIMATE",payload:e}}({newHomeClientOffset:g,dropDuration:y,completed:x}))}else r(fT({completed:x}))}}else r(function(e){return{type:"DROP_PENDING",payload:e}}({reason:s}))}else e(n)}}},PT=function(){return{x:window.pageXOffset,y:window.pageYOffset}};function ET(e){var t=e.onWindowScroll;var r=pP(function(){t(PT())}),n=function(e){return{eventName:"scroll",options:{passive:!0,capture:!1},fn:function(t){t.target!==window&&t.target!==window.document||e()}}}(r),a=hP;function s(){return a!==hP}return{start:function(){s()&&yP(!1),a=fP(window,[n])},stop:function(){s()||yP(!1),r.cancel(),a(),a=hP},isActive:s}}var TT=function(e){var t=ET({onWindowScroll:function(t){e.dispatch({type:"MOVE_BY_WINDOW_SCROLL",payload:{newScroll:t}})}});return function(e){return function(r){t.isActive()||"INITIAL_PUBLISH"!==r.type||t.start(),t.isActive()&&function(e){return"DROP_COMPLETE"===e.type||"DROP_ANIMATE"===e.type||"FLUSH"===e.type}(r)&&t.stop(),e(r)}}},IT=function(){var e=[];return{add:function(t){var r=setTimeout(function(){return function(t){var r=WP(e,function(e){return e.timerId===t});-1===r&&yP(!1),e.splice(r,1)[0].callback()}(r)}),n={timerId:r,callback:t};e.push(n)},flush:function(){if(e.length){var t=[].concat(e);e.length=0,t.forEach(function(e){clearTimeout(e.timerId),e.callback()})}}}},MT=function(e,t){$E(),t(),QE()},DT=function(e,t){return{draggableId:e.draggable.id,type:e.droppable.type,source:{droppableId:e.droppable.id,index:e.draggable.index},mode:t}},RT=function(e,t,r,n){if(e){var a=function(e){var t=!1,r=!1,n=setTimeout(function(){r=!0}),a=function(a){t||r||(t=!0,e(a),clearTimeout(n))};return a.wasCalled=function(){return t},a}(r);e(t,{announce:a}),a.wasCalled()||r(n(t))}else r(n(t))},FT=function(e,t){var r=function(e,t){var r=IT(),n=null,a=function(r){n||yP(!1),n=null,MT(0,function(){return RT(e().onDragEnd,r,t,CP)})};return{beforeCapture:function(t,r){n&&yP(!1),MT(0,function(){var n=e().onBeforeCapture;n&&n({draggableId:t,mode:r})})},beforeStart:function(t,r){n&&yP(!1),MT(0,function(){var n=e().onBeforeDragStart;n&&n(DT(t,r))})},start:function(a,s){n&&yP(!1);var i=DT(a,s);n={mode:s,lastCritical:a,lastLocation:i.source,lastCombine:null},r.add(function(){MT(0,function(){return RT(e().onDragStart,i,t,SP)})})},update:function(a,s){var i=$P(s),o=QP(s);n||yP(!1);var l=!function(e,t){if(e===t)return!0;var r=e.draggable.id===t.draggable.id&&e.draggable.droppableId===t.draggable.droppableId&&e.draggable.type===t.draggable.type&&e.draggable.index===t.draggable.index,n=e.droppable.id===t.droppable.id&&e.droppable.type===t.droppable.type;return r&&n}(a,n.lastCritical);l&&(n.lastCritical=a);var c=!function(e,t){return null==e&&null==t||null!=e&&null!=t&&e.droppableId===t.droppableId&&e.index===t.index}(n.lastLocation,i);c&&(n.lastLocation=i);var d=!function(e,t){return null==e&&null==t||null!=e&&null!=t&&e.draggableId===t.draggableId&&e.droppableId===t.droppableId}(n.lastCombine,o);if(d&&(n.lastCombine=o),l||c||d){var u=eO({},DT(a,n.mode),{combine:o,destination:i});r.add(function(){MT(0,function(){return RT(e().onDragUpdate,u,t,_P)})})}},flush:function(){n||yP(!1),r.flush()},drop:a,abort:function(){if(n){var e=eO({},DT(n.lastCritical,n.mode),{combine:null,destination:null,reason:"CANCEL"});a(e)}}}}(e,t);return function(e){return function(t){return function(n){if("BEFORE_INITIAL_CAPTURE"!==n.type){if("INITIAL_PUBLISH"===n.type){var a=n.payload.critical;return r.beforeStart(a,n.payload.movementMode),t(n),void r.start(a,n.payload.movementMode)}if("DROP_COMPLETE"===n.type){var s=n.payload.completed.result;return r.flush(),t(n),void r.drop(s)}if(t(n),"FLUSH"!==n.type){var i=e.getState();"DRAGGING"===i.phase&&r.update(i.critical,i.impact)}else r.abort()}else r.beforeCapture(n.payload.draggableId,n.payload.movementMode)}}}},LT=function(e){return function(t){return function(r){if("DROP_ANIMATION_FINISHED"===r.type){var n=e.getState();"DROP_ANIMATING"!==n.phase&&yP(!1),e.dispatch(fT({completed:n.completed}))}else t(r)}}},BT=function(e){var t=null,r=null;return function(n){return function(a){if("FLUSH"!==a.type&&"DROP_COMPLETE"!==a.type&&"DROP_ANIMATION_FINISHED"!==a.type||(r&&(cancelAnimationFrame(r),r=null),t&&(t(),t=null)),n(a),"DROP_ANIMATE"===a.type){var s={eventName:"scroll",options:{capture:!0,passive:!1,once:!0},fn:function(){"DROP_ANIMATING"===e.getState().phase&&e.dispatch({type:"DROP_ANIMATION_FINISHED",payload:null})}};r=requestAnimationFrame(function(){r=null,t=fP(window,[s])})}}}},UT=function(e){return function(t){return function(r){if(t(r),"PUBLISH_WHILE_DRAGGING"===r.type){var n=e.getState();"DROP_PENDING"===n.phase&&(n.isWaiting||e.dispatch(gT({reason:n.reason})))}}}},zT=cO,qT=function(e){var t,r=e.dimensionMarshal,n=e.focusMarshal,a=e.styleMarshal,s=e.getResponders,i=e.announce,o=e.autoScroller;return iO(aT,zT(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(e){return function(){var r=e.apply(void 0,arguments),n=function(){throw new Error(tO(15))},a={getState:r.getState,dispatch:function(){return n.apply(void 0,arguments)}},s=t.map(function(e){return e(a)});return n=cO.apply(void 0,s)(r.dispatch),qe(qe({},r),{},{dispatch:n})}}}((t=a,function(){return function(e){return function(r){"INITIAL_PUBLISH"===r.type&&t.dragging(),"DROP_ANIMATE"===r.type&&t.dropping(r.payload.completed.result.reason),"FLUSH"!==r.type&&"DROP_COMPLETE"!==r.type||t.resting(),e(r)}}}),function(e){return function(){return function(t){return function(r){"DROP_COMPLETE"!==r.type&&"FLUSH"!==r.type&&"DROP_ANIMATE"!==r.type||e.stopPublishing(),t(r)}}}}(r),function(e){return function(t){var r=t.getState,n=t.dispatch;return function(t){return function(a){if("LIFT"===a.type){var s=a.payload,i=s.id,o=s.clientSelection,l=s.movementMode,c=r();"DROP_ANIMATING"===c.phase&&n(fT({completed:c.completed})),"IDLE"!==r().phase&&yP(!1),n({type:"FLUSH",payload:null}),n({type:"BEFORE_INITIAL_CAPTURE",payload:{draggableId:i,movementMode:l}});var d={draggableId:i,scrollOptions:{shouldPublishImmediately:"SNAP"===l}},u=e.startPublishing(d),p=u.critical,m=u.dimensions,h=u.viewport;n({type:"INITIAL_PUBLISH",payload:{critical:p,dimensions:m,clientSelection:o,movementMode:l,viewport:h}})}else t(a)}}}}(r),OT,LT,BT,UT,function(e){return function(t){return function(r){return function(n){if(function(e){return"DROP_COMPLETE"===e.type||"DROP_ANIMATE"===e.type||"FLUSH"===e.type}(n))return e.stop(),void r(n);if("INITIAL_PUBLISH"===n.type){r(n);var a=t.getState();return"DRAGGING"!==a.phase&&yP(!1),void e.start(a)}r(n),e.scroll(t.getState())}}}}(o),TT,function(e){var t=!1;return function(){return function(r){return function(n){if("INITIAL_PUBLISH"===n.type)return t=!0,e.tryRecordFocus(n.payload.critical.draggable.id),r(n),void e.tryRestoreFocusRecorded();if(r(n),t){if("FLUSH"===n.type)return t=!1,void e.tryRestoreFocusRecorded();if("DROP_COMPLETE"===n.type){t=!1;var a=n.payload.completed.result;a.combine&&e.tryShiftRecord(a.draggableId,a.combine.draggableId),e.tryRestoreFocusRecorded()}}}}}}(n),FT(s,i))))};var WT=function(e){var t=e.scrollHeight,r=e.scrollWidth,n=e.height,a=e.width,s=PP({x:r,y:t},{x:a,y:n});return{x:Math.max(0,s.x),y:Math.max(0,s.y)}},VT=function(){var e=document.documentElement;return e||yP(!1),e},GT=function(){var e=VT();return WT({scrollHeight:e.scrollHeight,scrollWidth:e.scrollWidth,width:e.clientWidth,height:e.clientHeight})},HT=function(e){var t=e.critical,r=e.scrollOptions,n=e.registry;$E();var a=function(){var e=PT(),t=GT(),r=e.y,n=e.x,a=VT(),s=a.clientWidth,i=a.clientHeight;return{frame:QO({top:r,left:n,right:n+s,bottom:r+i}),scroll:{initial:e,current:e,max:t,diff:{value:AP,displacement:AP}}}}(),s=a.scroll.current,i=t.droppable,o=n.droppable.getAllByType(i.type).map(function(e){return e.callbacks.getDimensionAndWatchScroll(s,r)}),l=n.draggable.getAllByType(t.draggable.type).map(function(e){return e.getDimension(s)}),c={draggables:KP(l),droppables:HP(o)};return QE(),{dimensions:c,critical:t,viewport:a}};function KT(e,t,r){return r.descriptor.id!==t.id&&(r.descriptor.type===t.type&&"virtual"===e.droppable.getById(r.descriptor.droppableId).descriptor.mode)}var YT=function(e,t){var r=null,n=function(e){var t=e.registry,r=e.callbacks,n={additions:{},removals:{},modified:{}},a=null,s=function(){a||(r.collectionStarting(),a=requestAnimationFrame(function(){a=null,$E();var e=n,s=e.additions,i=e.removals,o=e.modified,l=Object.keys(s).map(function(e){return t.draggable.getById(e).getDimension(AP)}).sort(function(e,t){return e.descriptor.index-t.descriptor.index}),c=Object.keys(o).map(function(e){return{droppableId:e,scroll:t.droppable.getById(e).callbacks.getScrollWhileDragging()}}),d={additions:l,removals:Object.keys(i),modified:c};n={additions:{},removals:{},modified:{}},QE(),r.publish(d)}))};return{add:function(e){var t=e.descriptor.id;n.additions[t]=e,n.modified[e.descriptor.droppableId]=!0,n.removals[t]&&delete n.removals[t],s()},remove:function(e){var t=e.descriptor;n.removals[t.id]=!0,n.modified[t.droppableId]=!0,n.additions[t.id]&&delete n.additions[t.id],s()},stop:function(){a&&(cancelAnimationFrame(a),a=null,n={additions:{},removals:{},modified:{}})}}}({callbacks:{publish:t.publishWhileDragging,collectionStarting:t.collectionStarting},registry:e}),a=function(t){r||yP(!1);var a=r.critical.draggable;"ADDITION"===t.type&&KT(e,a,t.value)&&n.add(t.value),"REMOVAL"===t.type&&KT(e,a,t.value)&&n.remove(t.value)},s={updateDroppableIsEnabled:function(n,a){e.droppable.exists(n)||yP(!1),r&&t.updateDroppableIsEnabled({id:n,isEnabled:a})},updateDroppableIsCombineEnabled:function(n,a){r&&(e.droppable.exists(n)||yP(!1),t.updateDroppableIsCombineEnabled({id:n,isCombineEnabled:a}))},scrollDroppable:function(t,n){r&&e.droppable.getById(t).callbacks.scroll(n)},updateDroppableScroll:function(n,a){r&&(e.droppable.exists(n)||yP(!1),t.updateDroppableScroll({id:n,newScroll:a}))},startPublishing:function(t){r&&yP(!1);var n=e.draggable.getById(t.draggableId),s=e.droppable.getById(n.descriptor.droppableId),i={draggable:n.descriptor,droppable:s.descriptor},o=e.subscribe(a);return r={critical:i,unsubscribe:o},HT({critical:i,registry:e,scrollOptions:t.scrollOptions})},stopPublishing:function(){if(r){n.stop();var t=r.critical.droppable;e.droppable.getAllByType(t.type).forEach(function(e){return e.callbacks.dragStopped()}),r.unsubscribe(),r=null}}};return s},JT=function(e,t){return"IDLE"===e.phase||"DROP_ANIMATING"===e.phase&&(e.completed.result.draggableId!==t&&"DROP"===e.completed.result.reason)},XT=function(e){window.scrollBy(e.x,e.y)},$T=uP(function(e){return YP(e).filter(function(e){return!!e.isEnabled&&!!e.frame})}),QT=function(e){var t=e.center,r=e.destination,n=e.droppables;if(r){var a=n[r];return a.frame?a:null}var s=function(e,t){var r=VP($T(t),function(t){return t.frame||yP(!1),BE(t.frame.pageMarginBox)(e)});return r}(t,n);return s},ZT=.25,eI=.05,tI=28,rI=function(e){return Math.pow(e,2)},nI={stopDampeningAt:1200,accelerateAt:360},aI=function(e){var t=e.startOfRange,r=e.endOfRange,n=e.current,a=r-t;return 0===a?0:(n-t)/a},sI=nI.accelerateAt,iI=nI.stopDampeningAt,oI=function(e){var t=e.distanceToEdge,r=e.thresholds,n=e.dragStartTime,a=e.shouldUseTimeDampening,s=function(e,t){if(e>t.startScrollingFrom)return 0;if(e<=t.maxScrollValueAt)return tI;if(e===t.startScrollingFrom)return 1;var r=aI({startOfRange:t.maxScrollValueAt,endOfRange:t.startScrollingFrom,current:e}),n=tI*rI(1-r);return Math.ceil(n)}(t,r);return 0===s?0:a?Math.max(function(e,t){var r=t,n=iI,a=Date.now()-r;if(a>=iI)return e;if(a<sI)return 1;var s=aI({startOfRange:sI,endOfRange:n,current:a}),i=e*rI(s);return Math.ceil(i)}(s,n),1):s},lI=function(e){var t=e.container,r=e.distanceToEdges,n=e.dragStartTime,a=e.axis,s=e.shouldUseTimeDampening,i=function(e,t){return{startScrollingFrom:e[t.size]*ZT,maxScrollValueAt:e[t.size]*eI}}(t,a);return r[a.end]<r[a.start]?oI({distanceToEdge:r[a.end],thresholds:i,dragStartTime:n,shouldUseTimeDampening:s}):-1*oI({distanceToEdge:r[a.start],thresholds:i,dragStartTime:n,shouldUseTimeDampening:s})},cI=RP(function(e){return 0===e?0:e}),dI=function(e){var t=e.dragStartTime,r=e.container,n=e.subject,a=e.center,s=e.shouldUseTimeDampening,i={top:a.y-r.top,right:r.right-a.x,bottom:r.bottom-a.y,left:a.x-r.left},o=lI({container:r,distanceToEdges:i,dragStartTime:t,axis:oE,shouldUseTimeDampening:s}),l=lI({container:r,distanceToEdges:i,dragStartTime:t,axis:lE,shouldUseTimeDampening:s}),c=cI({x:l,y:o});if(EP(c,AP))return null;var d=function(e){var t=e.container,r=e.subject,n=e.proposedScroll,a=r.height>t.height,s=r.width>t.width;return s||a?s&&a?null:{x:s?0:n.x,y:a?0:n.y}:n}({container:r,subject:n,proposedScroll:c});return d?EP(d,AP)?null:d:null},uI=RP(function(e){return 0===e?0:e>0?1:-1}),pI=function(){var e=function(e,t){return e<0?e:e>t?e-t:0};return function(t){var r=t.current,n=t.max,a=t.change,s=OP(r,a),i={x:e(s.x,n.x),y:e(s.y,n.y)};return EP(i,AP)?null:i}}(),mI=function(e){var t=e.max,r=e.current,n=e.change,a={x:Math.max(r.x,t.x),y:Math.max(r.y,t.y)},s=uI(n),i=pI({max:a,current:r,change:s});return!i||(0!==s.x&&0===i.x||0!==s.y&&0===i.y)},hI=function(e,t){return mI({current:e.scroll.current,max:e.scroll.max,change:t})},fI=function(e,t){var r=e.frame;return!!r&&mI({current:r.scroll.current,max:r.scroll.max,change:t})},gI=function(e){var t=e.state,r=e.dragStartTime,n=e.shouldUseTimeDampening,a=e.scrollWindow,s=e.scrollDroppable,i=t.current.page.borderBoxCenter,o=t.dimensions.draggables[t.critical.draggable.id].page.marginBox;if(t.isWindowScrollAllowed){var l=function(e){var t=e.viewport,r=e.subject,n=e.center,a=e.dragStartTime,s=e.shouldUseTimeDampening,i=dI({dragStartTime:a,container:t.frame,subject:r,center:n,shouldUseTimeDampening:s});return i&&hI(t,i)?i:null}({dragStartTime:r,viewport:t.viewport,subject:o,center:i,shouldUseTimeDampening:n});if(l)return void a(l)}var c=QT({center:i,destination:RE(t.impact),droppables:t.dimensions.droppables});if(c){var d=function(e){var t=e.droppable,r=e.subject,n=e.center,a=e.dragStartTime,s=e.shouldUseTimeDampening,i=t.frame;if(!i)return null;var o=dI({dragStartTime:a,container:i.pageMarginBox,subject:r,center:n,shouldUseTimeDampening:s});return o&&fI(t,o)?o:null}({dragStartTime:r,droppable:c,subject:o,center:i,shouldUseTimeDampening:n});d&&s(c.descriptor.id,d)}},xI=function(e){var t=e.move,r=e.scrollDroppable,n=e.scrollWindow,a=function(e,t){if(!fI(e,t))return t;var n=function(e,t){var r=e.frame;return r&&fI(e,t)?pI({current:r.scroll.current,max:r.scroll.max,change:t}):null}(e,t);if(!n)return r(e.descriptor.id,t),null;var a=PP(t,n);return r(e.descriptor.id,a),PP(t,a)},s=function(e,t,r){if(!e)return r;if(!hI(t,r))return r;var a=function(e,t){if(!hI(e,t))return null;var r=e.scroll.max,n=e.scroll.current;return pI({current:n,max:r,change:t})}(t,r);if(!a)return n(r),null;var s=PP(r,a);return n(s),PP(r,s)};return function(e){var r=e.scrollJumpRequest;if(r){var n=RE(e.impact);n||yP(!1);var i=a(e.dimensions.droppables[n],r);if(i){var o=e.viewport,l=s(e.isWindowScrollAllowed,o,i);l&&function(e,r){var n=OP(e.current.client.selection,r);t({client:n})}(e,l)}}}},yI=function(e){var t=e.scrollDroppable,r=e.scrollWindow,n=e.move,a=function(e){var t=e.scrollWindow,r=e.scrollDroppable,n=pP(t),a=pP(r),s=null,i=function(e){s||yP(!1);var t=s,r=t.shouldUseTimeDampening,i=t.dragStartTime;gI({state:e,scrollWindow:n,scrollDroppable:a,dragStartTime:i,shouldUseTimeDampening:r})};return{start:function(e){$E(),s&&yP(!1);var t=Date.now(),r=!1,n=function(){r=!0};gI({state:e,dragStartTime:0,shouldUseTimeDampening:!1,scrollWindow:n,scrollDroppable:n}),s={dragStartTime:t,shouldUseTimeDampening:r},QE(),r&&i(e)},stop:function(){s&&(n.cancel(),a.cancel(),s=null)},scroll:i}}({scrollWindow:r,scrollDroppable:t}),s=xI({move:n,scrollWindow:r,scrollDroppable:t});return{scroll:function(e){"DRAGGING"===e.phase&&("FLUID"!==e.movementMode?e.scrollJumpRequest&&s(e):a.scroll(e))},start:a.start,stop:a.stop}},vI="data-rbd",bI=function(){var e=vI+"-drag-handle";return{base:e,draggableId:e+"-draggable-id",contextId:e+"-context-id"}}(),jI=function(){var e=vI+"-draggable";return{base:e,contextId:e+"-context-id",id:e+"-id"}}(),wI=function(){var e=vI+"-droppable";return{base:e,contextId:e+"-context-id",id:e+"-id"}}(),NI={contextId:vI+"-scroll-container-context-id"},kI=function(e,t){return e.map(function(e){var r=e.styles[t];return r?e.selector+" { "+r+" }":""}).join(" ")},SI="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement?a.useLayoutEffect:a.useEffect,_I=function(){var e=document.querySelector("head");return e||yP(!1),e},CI=function(e){var t=document.createElement("style");return e&&t.setAttribute("nonce",e),t.type="text/css",t};function AI(e,t){var r=XO(function(){return function(e){var t,r=(t=e,function(e){return"["+e+'="'+t+'"]'}),n=function(){var e="\n      cursor: -webkit-grab;\n      cursor: grab;\n    ";return{selector:r(bI.contextId),styles:{always:"\n          -webkit-touch-callout: none;\n          -webkit-tap-highlight-color: rgba(0,0,0,0);\n          touch-action: manipulation;\n        ",resting:e,dragging:"pointer-events: none;",dropAnimating:e}}}(),a=[function(){var e="\n      transition: "+wT.outOfTheWay+";\n    ";return{selector:r(jI.contextId),styles:{dragging:e,dropAnimating:e,userCancel:e}}}(),n,{selector:r(wI.contextId),styles:{always:"overflow-anchor: none;"}},{selector:"body",styles:{dragging:"\n        cursor: grabbing;\n        cursor: -webkit-grabbing;\n        user-select: none;\n        -webkit-user-select: none;\n        -moz-user-select: none;\n        -ms-user-select: none;\n        overflow-anchor: none;\n      "}}];return{always:kI(a,"always"),resting:kI(a,"resting"),dragging:kI(a,"dragging"),dropAnimating:kI(a,"dropAnimating"),userCancel:kI(a,"userCancel")}}(e)},[e]),n=(0,a.useRef)(null),s=(0,a.useRef)(null),i=$O(uP(function(e){var t=s.current;t||yP(!1),t.textContent=e}),[]),o=$O(function(e){var t=n.current;t||yP(!1),t.textContent=e},[]);SI(function(){(n.current||s.current)&&yP(!1);var a=CI(t),l=CI(t);return n.current=a,s.current=l,a.setAttribute(vI+"-always",e),l.setAttribute(vI+"-dynamic",e),_I().appendChild(a),_I().appendChild(l),o(r.always),i(r.resting),function(){var e=function(e){var t=e.current;t||yP(!1),_I().removeChild(t),e.current=null};e(n),e(s)}},[t,o,i,r.always,r.resting,e]);var l=$O(function(){return i(r.dragging)},[i,r.dragging]),c=$O(function(e){i("DROP"!==e?r.userCancel:r.dropAnimating)},[i,r.dropAnimating,r.userCancel]),d=$O(function(){s.current&&i(r.resting)},[i,r.resting]);return XO(function(){return{dragging:l,dropping:c,resting:d}},[l,c,d])}var OI=function(e){return e&&e.ownerDocument?e.ownerDocument.defaultView:window};function PI(e){return e instanceof OI(e).HTMLElement}function EI(e,t){var r="["+bI.contextId+'="'+e+'"]',n=GP(document.querySelectorAll(r));if(!n.length)return null;var a=VP(n,function(e){return e.getAttribute(bI.draggableId)===t});return a&&PI(a)?a:null}function TI(){var e={draggables:{},droppables:{}},t=[];function r(e){t.length&&t.forEach(function(t){return t(e)})}function n(t){return e.draggables[t]||null}var a={register:function(t){e.draggables[t.descriptor.id]=t,r({type:"ADDITION",value:t})},update:function(t,r){var n=e.draggables[r.descriptor.id];n&&n.uniqueId===t.uniqueId&&(delete e.draggables[r.descriptor.id],e.draggables[t.descriptor.id]=t)},unregister:function(t){var a=t.descriptor.id,s=n(a);s&&t.uniqueId===s.uniqueId&&(delete e.draggables[a],r({type:"REMOVAL",value:t}))},getById:function(e){var t=n(e);return t||yP(!1),t},findById:n,exists:function(e){return Boolean(n(e))},getAllByType:function(t){return qP(e.draggables).filter(function(e){return e.descriptor.type===t})}};function s(t){return e.droppables[t]||null}return{draggable:a,droppable:{register:function(t){e.droppables[t.descriptor.id]=t},unregister:function(t){var r=s(t.descriptor.id);r&&t.uniqueId===r.uniqueId&&delete e.droppables[t.descriptor.id]},getById:function(e){var t=s(e);return t||yP(!1),t},findById:s,exists:function(e){return Boolean(s(e))},getAllByType:function(t){return qP(e.droppables).filter(function(e){return e.descriptor.type===t})}},subscribe:function(e){return t.push(e),function(){var r=t.indexOf(e);-1!==r&&t.splice(r,1)}},clean:function(){e.draggables={},e.droppables={},t.length=0}}}var II=a.createContext(null),MI=function(){var e=document.body;return e||yP(!1),e},DI={position:"absolute",width:"1px",height:"1px",margin:"-1px",border:"0",padding:"0",overflow:"hidden",clip:"rect(0 0 0 0)","clip-path":"inset(100%)"};var RI=0,FI={separator:"::"};function LI(e,t){return void 0===t&&(t=FI),XO(function(){return""+e+t.separator+RI++},[t.separator,e])}var BI=a.createContext(null);function UI(e){0}function zI(e,t){UI()}function qI(){zI()}function WI(e){var t=(0,a.useRef)(e);return(0,a.useEffect)(function(){t.current=e}),t}var VI,GI=((VI={})[13]=!0,VI[9]=!0,VI),HI=function(e){GI[e.keyCode]&&e.preventDefault()},KI=function(){var e="visibilitychange";return"undefined"===typeof document?e:VP([e,"ms"+e,"webkit"+e,"moz"+e,"o"+e],function(e){return"on"+e in document})||e}();var YI,JI={type:"IDLE"};function XI(e){var t=e.cancel,r=e.completed,n=e.getPhase,a=e.setPhase;return[{eventName:"mousemove",fn:function(e){var t=e.button,r=e.clientX,s=e.clientY;if(0===t){var i={x:r,y:s},o=n();if("DRAGGING"===o.type)return e.preventDefault(),void o.actions.move(i);"PENDING"!==o.type&&yP(!1);var l=o.point;if(c=l,d=i,Math.abs(d.x-c.x)>=5||Math.abs(d.y-c.y)>=5){var c,d;e.preventDefault();var u=o.actions.fluidLift(i);a({type:"DRAGGING",actions:u})}}}},{eventName:"mouseup",fn:function(e){var a=n();"DRAGGING"===a.type?(e.preventDefault(),a.actions.drop({shouldBlockNextClick:!0}),r()):t()}},{eventName:"mousedown",fn:function(e){"DRAGGING"===n().type&&e.preventDefault(),t()}},{eventName:"keydown",fn:function(e){if("PENDING"!==n().type)return 27===e.keyCode?(e.preventDefault(),void t()):void HI(e);t()}},{eventName:"resize",fn:t},{eventName:"scroll",options:{passive:!0,capture:!1},fn:function(){"PENDING"===n().type&&t()}},{eventName:"webkitmouseforcedown",fn:function(e){var r=n();"IDLE"===r.type&&yP(!1),r.actions.shouldRespectForcePress()?t():e.preventDefault()}},{eventName:KI,fn:t}]}function $I(){}var QI=((YI={})[34]=!0,YI[33]=!0,YI[36]=!0,YI[35]=!0,YI);function ZI(e,t){function r(){t(),e.cancel()}return[{eventName:"keydown",fn:function(n){return 27===n.keyCode?(n.preventDefault(),void r()):32===n.keyCode?(n.preventDefault(),t(),void e.drop()):40===n.keyCode?(n.preventDefault(),void e.moveDown()):38===n.keyCode?(n.preventDefault(),void e.moveUp()):39===n.keyCode?(n.preventDefault(),void e.moveRight()):37===n.keyCode?(n.preventDefault(),void e.moveLeft()):void(QI[n.keyCode]?n.preventDefault():HI(n))}},{eventName:"mousedown",fn:r},{eventName:"mouseup",fn:r},{eventName:"click",fn:r},{eventName:"touchstart",fn:r},{eventName:"resize",fn:r},{eventName:"wheel",fn:r,options:{passive:!0}},{eventName:KI,fn:r}]}var eM={type:"IDLE"};var tM={input:!0,button:!0,textarea:!0,select:!0,option:!0,optgroup:!0,video:!0,audio:!0};function rM(e,t){if(null==t)return!1;if(Boolean(tM[t.tagName.toLowerCase()]))return!0;var r=t.getAttribute("contenteditable");return"true"===r||""===r||t!==e&&rM(e,t.parentElement)}function nM(e,t){var r=t.target;return!!PI(r)&&rM(e,r)}var aM=function(e){return QO(e.getBoundingClientRect()).center};var sM=function(){var e="matches";return"undefined"===typeof document?e:VP([e,"msMatchesSelector","webkitMatchesSelector"],function(e){return e in Element.prototype})||e}();function iM(e,t){return null==e?null:e[sM](t)?e:iM(e.parentElement,t)}function oM(e,t){return e.closest?e.closest(t):iM(e,t)}function lM(e,t){var r,n=t.target;if(!((r=n)instanceof OI(r).Element))return null;var a=function(e){return"["+bI.contextId+'="'+e+'"]'}(e),s=oM(n,a);return s&&PI(s)?s:null}function cM(e){e.preventDefault()}function dM(e){var t=e.expected,r=e.phase,n=e.isLockActive;e.shouldWarn;return!!n()&&t===r}function uM(e){var t=e.lockAPI,r=e.store,n=e.registry,a=e.draggableId;if(t.isClaimed())return!1;var s=n.draggable.findById(a);return!!s&&(!!s.options.isEnabled&&!!JT(r.getState(),a))}function pM(e){var t=e.lockAPI,r=e.contextId,n=e.store,a=e.registry,s=e.draggableId,i=e.forceSensorStop,o=e.sourceEvent;if(!uM({lockAPI:t,store:n,registry:a,draggableId:s}))return null;var l=a.draggable.getById(s),c=function(e,t){var r="["+jI.contextId+'="'+e+'"]',n=VP(GP(document.querySelectorAll(r)),function(e){return e.getAttribute(jI.id)===t});return n&&PI(n)?n:null}(r,l.descriptor.id);if(!c)return null;if(o&&!l.options.canDragInteractiveElements&&nM(c,o))return null;var d=t.claim(i||hP),u="PRE_DRAG";function p(){return l.options.shouldRespectForcePress}function m(){return t.isActive(d)}var h=function(e,t){dM({expected:e,phase:u,isLockActive:m,shouldWarn:!0})&&n.dispatch(t())}.bind(null,"DRAGGING");function f(e){function r(){t.release(),u="COMPLETED"}function a(t,a){if(void 0===a&&(a={shouldBlockNextClick:!1}),e.cleanup(),a.shouldBlockNextClick){var s=fP(window,[{eventName:"click",fn:cM,options:{once:!0,passive:!1,capture:!0}}]);setTimeout(s)}r(),n.dispatch(gT({reason:t}))}return"PRE_DRAG"!==u&&(r(),"PRE_DRAG"!==u&&yP(!1)),n.dispatch(function(e){return{type:"LIFT",payload:e}}(e.liftActionArgs)),u="DRAGGING",eO({isActive:function(){return dM({expected:"DRAGGING",phase:u,isLockActive:m,shouldWarn:!1})},shouldRespectForcePress:p,drop:function(e){return a("DROP",e)},cancel:function(e){return a("CANCEL",e)}},e.actions)}var g={isActive:function(){return dM({expected:"PRE_DRAG",phase:u,isLockActive:m,shouldWarn:!1})},shouldRespectForcePress:p,fluidLift:function(e){var t=pP(function(e){h(function(){return dT({client:e})})});return eO({},f({liftActionArgs:{id:s,clientSelection:e,movementMode:"FLUID"},cleanup:function(){return t.cancel()},actions:{move:t}}),{move:t})},snapLift:function(){var e={moveUp:function(){return h(uT)},moveRight:function(){return h(mT)},moveDown:function(){return h(pT)},moveLeft:function(){return h(hT)}};return f({liftActionArgs:{id:s,clientSelection:aM(c),movementMode:"SNAP"},cleanup:hP,actions:e})},abort:function(){dM({expected:"PRE_DRAG",phase:u,isLockActive:m,shouldWarn:!0})&&t.release()}};return g}var mM=[function(e){var t=(0,a.useRef)(JI),r=(0,a.useRef)(hP),n=XO(function(){return{eventName:"mousedown",fn:function(t){if(!t.defaultPrevented&&0===t.button&&!(t.ctrlKey||t.metaKey||t.shiftKey||t.altKey)){var n=e.findClosestDraggableId(t);if(n){var a=e.tryGetLock(n,o,{sourceEvent:t});if(a){t.preventDefault();var s={x:t.clientX,y:t.clientY};r.current(),d(a,s)}}}}}},[e]),s=XO(function(){return{eventName:"webkitmouseforcewillbegin",fn:function(t){if(!t.defaultPrevented){var r=e.findClosestDraggableId(t);if(r){var n=e.findOptionsForDraggable(r);n&&(n.shouldRespectForcePress||e.canGetLock(r)&&t.preventDefault())}}}}},[e]),i=$O(function(){r.current=fP(window,[s,n],{passive:!1,capture:!0})},[s,n]),o=$O(function(){"IDLE"!==t.current.type&&(t.current=JI,r.current(),i())},[i]),l=$O(function(){var e=t.current;o(),"DRAGGING"===e.type&&e.actions.cancel({shouldBlockNextClick:!0}),"PENDING"===e.type&&e.actions.abort()},[o]),c=$O(function(){var e=XI({cancel:l,completed:o,getPhase:function(){return t.current},setPhase:function(e){t.current=e}});r.current=fP(window,e,{capture:!0,passive:!1})},[l,o]),d=$O(function(e,r){"IDLE"!==t.current.type&&yP(!1),t.current={type:"PENDING",point:r,actions:e},c()},[c]);SI(function(){return i(),function(){r.current()}},[i])},function(e){var t=(0,a.useRef)($I),r=XO(function(){return{eventName:"keydown",fn:function(r){if(!r.defaultPrevented&&32===r.keyCode){var a=e.findClosestDraggableId(r);if(a){var s=e.tryGetLock(a,l,{sourceEvent:r});if(s){r.preventDefault();var i=!0,o=s.snapLift();t.current(),t.current=fP(window,ZI(o,l),{capture:!0,passive:!1})}}}function l(){i||yP(!1),i=!1,t.current(),n()}}}},[e]),n=$O(function(){t.current=fP(window,[r],{passive:!1,capture:!0})},[r]);SI(function(){return n(),function(){t.current()}},[n])},function(e){var t=(0,a.useRef)(eM),r=(0,a.useRef)(hP),n=$O(function(){return t.current},[]),s=$O(function(e){t.current=e},[]),i=XO(function(){return{eventName:"touchstart",fn:function(t){if(!t.defaultPrevented){var n=e.findClosestDraggableId(t);if(n){var a=e.tryGetLock(n,l,{sourceEvent:t});if(a){var s=t.touches[0],i={x:s.clientX,y:s.clientY};r.current(),p(a,i)}}}}}},[e]),o=$O(function(){r.current=fP(window,[i],{capture:!0,passive:!1})},[i]),l=$O(function(){var e=t.current;"IDLE"!==e.type&&("PENDING"===e.type&&clearTimeout(e.longPressTimerId),s(eM),r.current(),o())},[o,s]),c=$O(function(){var e=t.current;l(),"DRAGGING"===e.type&&e.actions.cancel({shouldBlockNextClick:!0}),"PENDING"===e.type&&e.actions.abort()},[l]),d=$O(function(){var e={capture:!0,passive:!1},t={cancel:c,completed:l,getPhase:n},a=fP(window,function(e){var t=e.cancel,r=e.completed,n=e.getPhase;return[{eventName:"touchmove",options:{capture:!1},fn:function(e){var r=n();if("DRAGGING"===r.type){r.hasMoved=!0;var a=e.touches[0],s={x:a.clientX,y:a.clientY};e.preventDefault(),r.actions.move(s)}else t()}},{eventName:"touchend",fn:function(e){var a=n();"DRAGGING"===a.type?(e.preventDefault(),a.actions.drop({shouldBlockNextClick:!0}),r()):t()}},{eventName:"touchcancel",fn:function(e){"DRAGGING"===n().type?(e.preventDefault(),t()):t()}},{eventName:"touchforcechange",fn:function(e){var r=n();"IDLE"===r.type&&yP(!1);var a=e.touches[0];if(a&&a.force>=.15){var s=r.actions.shouldRespectForcePress();if("PENDING"!==r.type)return s?r.hasMoved?void e.preventDefault():void t():void e.preventDefault();s&&t()}}},{eventName:KI,fn:t}]}(t),e),s=fP(window,function(e){var t=e.cancel,r=e.getPhase;return[{eventName:"orientationchange",fn:t},{eventName:"resize",fn:t},{eventName:"contextmenu",fn:function(e){e.preventDefault()}},{eventName:"keydown",fn:function(e){"DRAGGING"===r().type?(27===e.keyCode&&e.preventDefault(),t()):t()}},{eventName:KI,fn:t}]}(t),e);r.current=function(){a(),s()}},[c,n,l]),u=$O(function(){var e=n();"PENDING"!==e.type&&yP(!1);var t=e.actions.fluidLift(e.point);s({type:"DRAGGING",actions:t,hasMoved:!1})},[n,s]),p=$O(function(e,t){"IDLE"!==n().type&&yP(!1);var r=setTimeout(u,120);s({type:"PENDING",point:t,actions:e,longPressTimerId:r}),d()},[d,n,s,u]);SI(function(){return o(),function(){r.current();var e=n();"PENDING"===e.type&&(clearTimeout(e.longPressTimerId),s(eM))}},[n,o,s]),SI(function(){return fP(window,[{eventName:"touchmove",fn:function(){},options:{capture:!1,passive:!1}}])},[])}];function hM(e){var t=e.contextId,r=e.store,n=e.registry,s=e.customSensors,i=e.enableDefaultSensors,o=[].concat(i?mM:[],s||[]),l=(0,a.useState)(function(){return function(){var e=null;function t(){e||yP(!1),e=null}return{isClaimed:function(){return Boolean(e)},isActive:function(t){return t===e},claim:function(t){e&&yP(!1);var r={abandon:t};return e=r,r},release:t,tryAbandon:function(){e&&(e.abandon(),t())}}}()})[0],c=$O(function(e,t){e.isDragging&&!t.isDragging&&l.tryAbandon()},[l]);SI(function(){var e=r.getState();return r.subscribe(function(){var t=r.getState();c(e,t),e=t})},[l,r,c]),SI(function(){return l.tryAbandon},[l.tryAbandon]);var d=$O(function(e){return uM({lockAPI:l,registry:n,store:r,draggableId:e})},[l,n,r]),u=$O(function(e,a,s){return pM({lockAPI:l,registry:n,contextId:t,store:r,draggableId:e,forceSensorStop:a,sourceEvent:s&&s.sourceEvent?s.sourceEvent:null})},[t,l,n,r]),p=$O(function(e){return function(e,t){var r=lM(e,t);return r?r.getAttribute(bI.draggableId):null}(t,e)},[t]),m=$O(function(e){var t=n.draggable.findById(e);return t?t.options:null},[n.draggable]),h=$O(function(){l.isClaimed()&&(l.tryAbandon(),"IDLE"!==r.getState().phase&&r.dispatch({type:"FLUSH",payload:null}))},[l,r]),f=$O(l.isClaimed,[l]),g=XO(function(){return{canGetLock:d,tryGetLock:u,findClosestDraggableId:p,findOptionsForDraggable:m,tryReleaseLock:h,isLockClaimed:f}},[d,u,p,m,h,f]);UI();for(var x=0;x<o.length;x++)o[x](g)}function fM(e){return e.current||yP(!1),e.current}function gM(e){var t=e.contextId,r=e.setCallbacks,n=e.sensors,s=e.nonce,i=e.dragHandleUsageInstructions,o=(0,a.useRef)(null);qI();var l=WI(e),c=$O(function(){return function(e){return{onBeforeCapture:e.onBeforeCapture,onBeforeDragStart:e.onBeforeDragStart,onDragStart:e.onDragStart,onDragEnd:e.onDragEnd,onDragUpdate:e.onDragUpdate}}(l.current)},[l]),d=function(e){var t=XO(function(){return function(e){return"rbd-announcement-"+e}(e)},[e]),r=(0,a.useRef)(null);return(0,a.useEffect)(function(){var e=document.createElement("div");return r.current=e,e.id=t,e.setAttribute("aria-live","assertive"),e.setAttribute("aria-atomic","true"),eO(e.style,DI),MI().appendChild(e),function(){setTimeout(function(){var t=MI();t.contains(e)&&t.removeChild(e),e===r.current&&(r.current=null)})}},[t]),$O(function(e){var t=r.current;t&&(t.textContent=e)},[])}(t),u=function(e){var t=e.contextId,r=e.text,n=LI("hidden-text",{separator:"-"}),s=XO(function(){return"rbd-hidden-text-"+(e={contextId:t,uniqueId:n}).contextId+"-"+e.uniqueId;var e},[n,t]);return(0,a.useEffect)(function(){var e=document.createElement("div");return e.id=s,e.textContent=r,e.style.display="none",MI().appendChild(e),function(){var t=MI();t.contains(e)&&t.removeChild(e)}},[s,r]),s}({contextId:t,text:i}),p=AI(t,s),m=$O(function(e){fM(o).dispatch(e)},[]),h=XO(function(){return lO({publishWhileDragging:sT,updateDroppableScroll:oT,updateDroppableIsEnabled:lT,updateDroppableIsCombineEnabled:cT,collectionStarting:iT},m)},[m]),f=function(){var e=XO(TI,[]);return(0,a.useEffect)(function(){return function(){requestAnimationFrame(e.clean)}},[e]),e}(),g=XO(function(){return YT(f,h)},[f,h]),x=XO(function(){return yI(eO({scrollWindow:XT,scrollDroppable:g.scrollDroppable},lO({move:dT},m)))},[g.scrollDroppable,m]),y=function(e){var t=(0,a.useRef)({}),r=(0,a.useRef)(null),n=(0,a.useRef)(null),s=(0,a.useRef)(!1),i=$O(function(e,r){var n={id:e,focus:r};return t.current[e]=n,function(){var r=t.current;r[e]!==n&&delete r[e]}},[]),o=$O(function(t){var r=EI(e,t);r&&r!==document.activeElement&&r.focus()},[e]),l=$O(function(e,t){r.current===e&&(r.current=t)},[]),c=$O(function(){n.current||s.current&&(n.current=requestAnimationFrame(function(){n.current=null;var e=r.current;e&&o(e)}))},[o]),d=$O(function(e){r.current=null;var t=document.activeElement;t&&t.getAttribute(bI.draggableId)===e&&(r.current=e)},[]);return SI(function(){return s.current=!0,function(){s.current=!1;var e=n.current;e&&cancelAnimationFrame(e)}},[]),XO(function(){return{register:i,tryRecordFocus:d,tryRestoreFocusRecorded:c,tryShiftRecord:l}},[i,d,c,l])}(t),v=XO(function(){return qT({announce:d,autoScroller:x,dimensionMarshal:g,focusMarshal:y,getResponders:c,styleMarshal:p})},[d,x,g,y,c,p]);o.current=v;var b=$O(function(){var e=fM(o);"IDLE"!==e.getState().phase&&e.dispatch({type:"FLUSH",payload:null})},[]),j=$O(function(){var e=fM(o).getState();return e.isDragging||"DROP_ANIMATING"===e.phase},[]);r(XO(function(){return{isDragging:j,tryAbort:b}},[j,b]));var w=$O(function(e){return JT(fM(o).getState(),e)},[]),N=$O(function(){return LE(fM(o).getState())},[]),k=XO(function(){return{marshal:g,focus:y,contextId:t,canLift:w,isMovementAllowed:N,dragHandleUsageInstructionsId:u,registry:f}},[t,g,u,y,w,N,f]);return hM({contextId:t,store:v,registry:f,customSensors:n,enableDefaultSensors:!1!==e.enableDefaultSensors}),(0,a.useEffect)(function(){return b},[b]),a.createElement(BI.Provider,{value:k},a.createElement(gO,{context:II,store:v},e.children))}var xM=0;function yM(e){var t=XO(function(){return""+xM++},[]),r=e.dragHandleUsageInstructions||kP;return a.createElement(vP,null,function(n){return a.createElement(gM,{nonce:e.nonce,contextId:t,setCallbacks:n,dragHandleUsageInstructions:r,enableDefaultSensors:e.enableDefaultSensors,sensors:e.sensors,onBeforeCapture:e.onBeforeCapture,onBeforeDragStart:e.onBeforeDragStart,onDragStart:e.onDragStart,onDragUpdate:e.onDragUpdate,onDragEnd:e.onDragEnd},e.children)})}var vM=function(e){return function(t){return e===t}},bM=vM("scroll"),jM=vM("auto"),wM=(vM("visible"),function(e,t){return t(e.overflowX)||t(e.overflowY)}),NM=function e(t){return null==t||t===document.body||t===document.documentElement?null:function(e){var t=window.getComputedStyle(e),r={overflowX:t.overflowX,overflowY:t.overflowY};return wM(r,bM)||wM(r,jM)}(t)?t:e(t.parentElement)},kM=function(e){return{x:e.scrollLeft,y:e.scrollTop}},SM=function e(t){return!!t&&("fixed"===window.getComputedStyle(t).position||e(t.parentElement))},_M=function(e){return{closestScrollable:NM(e),isFixedOnPage:SM(e)}},CM=function(e){var t=e.ref,r=e.descriptor,n=e.env,a=e.windowScroll,s=e.direction,i=e.isDropDisabled,o=e.isCombineEnabled,l=e.shouldClipSubject,c=n.closestScrollable,d=function(e,t){var r=oP(e);if(!t)return r;if(e!==t)return r;var n=r.paddingBox.top-t.scrollTop,a=r.paddingBox.left-t.scrollLeft,s=n+t.scrollHeight,i=a+t.scrollWidth,o=ZO({top:n,right:i,bottom:s,left:a},r.border);return rP({borderBox:o,margin:r.margin,border:r.border,padding:r.padding})}(t,c),u=sP(d,a),p=function(){if(!c)return null;var e=oP(c),t={scrollHeight:c.scrollHeight,scrollWidth:c.scrollWidth};return{client:e,page:sP(e,a),scroll:kM(c),scrollSize:t,shouldClipSubject:l}}(),m=function(e){var t=e.descriptor,r=e.isEnabled,n=e.isCombineEnabled,a=e.isFixedOnPage,s=e.direction,i=e.client,o=e.page,l=e.closest,c=function(){if(!l)return null;var e=l.scrollSize,t=l.client,r=WT({scrollHeight:e.scrollHeight,scrollWidth:e.scrollWidth,height:t.paddingBox.height,width:t.paddingBox.width});return{pageMarginBox:l.page.marginBox,frameClient:t,scrollSize:e,shouldClipSubject:l.shouldClipSubject,scroll:{initial:l.scroll,current:l.scroll,max:r,diff:{value:AP,displacement:AP}}}}(),d="vertical"===s?oE:lE;return{descriptor:t,isCombineEnabled:n,isFixedOnPage:a,axis:d,isEnabled:r,client:i,page:o,frame:c,subject:UP({page:o,withPlaceholder:null,axis:d,frame:c})}}({descriptor:r,isEnabled:!i,isCombineEnabled:o,isFixedOnPage:n.isFixedOnPage,direction:s,client:d,page:u,closest:p});return m},AM={passive:!1},OM={passive:!0},PM=function(e){return e.shouldPublishImmediately?AM:OM};function EM(e){var t=(0,a.useContext)(e);return t||yP(!1),t}var TM=function(e){return e&&e.env.closestScrollable||null};function IM(){}var MM={width:0,height:0,margin:{top:0,right:0,bottom:0,left:0}},DM=function(e){var t=e.isAnimatingOpenOnMount,r=e.placeholder,n=e.animate,a=function(e){var t=e.isAnimatingOpenOnMount,r=e.placeholder,n=e.animate;return t||"close"===n?MM:{height:r.client.borderBox.height,width:r.client.borderBox.width,margin:r.client.margin}}({isAnimatingOpenOnMount:t,placeholder:r,animate:n});return{display:r.display,boxSizing:"border-box",width:a.width,height:a.height,marginTop:a.margin.top,marginRight:a.margin.right,marginBottom:a.margin.bottom,marginLeft:a.margin.left,flexShrink:"0",flexGrow:"0",pointerEvents:"none",transition:"none"!==n?wT.placeholder:null}};var RM=a.memo(function(e){var t=(0,a.useRef)(null),r=$O(function(){t.current&&(clearTimeout(t.current),t.current=null)},[]),n=e.animate,s=e.onTransitionEnd,i=e.onClose,o=e.contextId,l=(0,a.useState)("open"===e.animate),c=l[0],d=l[1];(0,a.useEffect)(function(){return c?"open"!==n?(r(),d(!1),IM):t.current?IM:(t.current=setTimeout(function(){t.current=null,d(!1)}),r):IM},[n,c,r]);var u=$O(function(e){"height"===e.propertyName&&(s(),"close"===n&&i())},[n,i,s]),p=DM({isAnimatingOpenOnMount:c,animate:e.animate,placeholder:e.placeholder});return a.createElement(e.placeholder.tagName,{style:p,"data-rbd-placeholder-context-id":o,onTransitionEnd:u,ref:e.innerRef})}),FM=a.createContext(null);var LM=function(e){function t(){for(var t,r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return(t=e.call.apply(e,[this].concat(n))||this).state={isVisible:Boolean(t.props.on),data:t.props.on,animate:t.props.shouldAnimate&&t.props.on?"open":"none"},t.onClose=function(){"close"===t.state.animate&&t.setState({isVisible:!1})},t}return ZA(t,e),t.getDerivedStateFromProps=function(e,t){return e.shouldAnimate?e.on?{isVisible:!0,data:e.on,animate:"open"}:t.isVisible?{isVisible:!0,data:t.data,animate:"close"}:{isVisible:!1,animate:"close",data:null}:{isVisible:Boolean(e.on),data:e.on,animate:"none"}},t.prototype.render=function(){if(!this.state.isVisible)return null;var e={onClose:this.onClose,data:this.state.data,animate:this.state.animate};return this.props.children(e)},t}(a.PureComponent),BM=5e3,UM=4500,zM=function(e,t){return t?wT.drop(t.duration):e?wT.snap:wT.fluid},qM=function(e,t){return e?t?vT.drop:vT.combining:null};function WM(e){return"DRAGGING"===e.type?function(e){var t=e.dimension.client,r=e.offset,n=e.combineWith,a=e.dropping,s=Boolean(n),i=function(e){return null!=e.forceShouldAnimate?e.forceShouldAnimate:"SNAP"===e.mode}(e),o=Boolean(a),l=o?ST(r,s):kT(r);return{position:"fixed",top:t.marginBox.top,left:t.marginBox.left,boxSizing:"border-box",width:t.borderBox.width,height:t.borderBox.height,transition:zM(i,a),transform:l,opacity:qM(s,o),zIndex:o?UM:BM,pointerEvents:"none"}}(e):{transform:kT((t=e).offset),transition:t.shouldAnimateDisplacement?null:"none"};var t}function VM(e){var t=LI("draggable"),r=e.descriptor,n=e.registry,s=e.getDraggableRef,i=e.canDragInteractiveElements,o=e.shouldRespectForcePress,l=e.isEnabled,c=XO(function(){return{canDragInteractiveElements:i,shouldRespectForcePress:o,isEnabled:l}},[i,l,o]),d=$O(function(e){var t=s();return t||yP(!1),function(e,t,r){void 0===r&&(r=AP);var n=window.getComputedStyle(t),a=t.getBoundingClientRect(),s=iP(a,n),i=sP(s,r);return{descriptor:e,placeholder:{client:s,tagName:t.tagName.toLowerCase(),display:n.display},displaceBy:{x:s.marginBox.width,y:s.marginBox.height},client:s,page:i}}(r,t,e)},[r,s]),u=XO(function(){return{uniqueId:t,descriptor:r,options:c,getDimension:d}},[r,d,c,t]),p=(0,a.useRef)(u),m=(0,a.useRef)(!0);SI(function(){return n.draggable.register(p.current),function(){return n.draggable.unregister(p.current)}},[n.draggable]),SI(function(){if(m.current)m.current=!1;else{var e=p.current;p.current=u,n.draggable.update(u,e)}},[u,n.draggable])}function GM(e,t,r){zI()}function HM(e){e.preventDefault()}var KM=function(e,t){return e===t},YM=function(e){var t=e.combine,r=e.destination;return r?r.droppableId:t?t.droppableId:null};function JM(e){return{isDragging:!1,isDropAnimating:!1,isClone:!1,dropAnimation:null,mode:null,draggingOver:null,combineTargetFor:e,combineWith:null}}var XM={mapped:{type:"SECONDARY",offset:AP,combineTargetFor:null,shouldAnimateDisplacement:!0,snapshot:JM(null)}};var $M=KO(function(){var e=function(){var e=uP(function(e,t){return{x:e,y:t}}),t=uP(function(e,t,r,n,a){return{isDragging:!0,isClone:t,isDropAnimating:Boolean(a),dropAnimation:a,mode:e,draggingOver:r,combineWith:n,combineTargetFor:null}}),r=uP(function(e,r,n,a,s,i,o){return{mapped:{type:"DRAGGING",dropping:null,draggingOver:s,combineWith:i,mode:r,offset:e,dimension:n,forceShouldAnimate:o,snapshot:t(r,a,s,i,null)}}});return function(n,a){if(n.isDragging){if(n.critical.draggable.id!==a.draggableId)return null;var s=n.current.client.offset,i=n.dimensions.draggables[a.draggableId],o=RE(n.impact),l=(d=n.impact).at&&"COMBINE"===d.at.type?d.at.combine.draggableId:null,c=n.forceShouldAnimate;return r(e(s.x,s.y),n.movementMode,i,a.isClone,o,l,c)}var d;if("DROP_ANIMATING"===n.phase){var u=n.completed;if(u.result.draggableId!==a.draggableId)return null;var p=a.isClone,m=n.dimensions.draggables[a.draggableId],h=u.result,f=h.mode,g=YM(h),x=function(e){return e.combine?e.combine.draggableId:null}(h),y={duration:n.dropDuration,curve:yT,moveTo:n.newHomeClientOffset,opacity:x?vT.drop:null,scale:x?bT.drop:null};return{mapped:{type:"DRAGGING",offset:n.newHomeClientOffset,dimension:m,dropping:y,draggingOver:g,combineWith:x,mode:f,forceShouldAnimate:null,snapshot:t(f,p,g,x,y)}}}return null}}(),t=function(){var e=uP(function(e,t){return{x:e,y:t}}),t=uP(JM),r=uP(function(e,r,n){return void 0===r&&(r=null),{mapped:{type:"SECONDARY",offset:e,combineTargetFor:r,shouldAnimateDisplacement:n,snapshot:t(r)}}}),n=function(e){return e?r(AP,e,!0):null},a=function(t,a,s,i){var o=s.displaced.visible[t],l=Boolean(i.inVirtualList&&i.effected[t]),c=QP(s),d=c&&c.draggableId===t?a:null;if(!o){if(!l)return n(d);if(s.displaced.invisible[t])return null;var u=TP(i.displacedBy.point),p=e(u.x,u.y);return r(p,d,!0)}if(l)return n(d);var m=s.displacedBy.point,h=e(m.x,m.y);return r(h,d,o.shouldAnimate)};return function(e,t){if(e.isDragging)return e.critical.draggable.id===t.draggableId?null:a(t.draggableId,e.critical.draggable.id,e.impact,e.afterCritical);if("DROP_ANIMATING"===e.phase){var r=e.completed;return r.result.draggableId===t.draggableId?null:a(t.draggableId,r.result.draggableId,r.impact,r.afterCritical)}return null}}();return function(r,n){return e(r,n)||t(r,n)||XM}},{dropAnimationFinished:xT},null,{context:II,pure:!0,areStatePropsEqual:KM})(function(e){var t=(0,a.useRef)(null),r=$O(function(e){t.current=e},[]),n=$O(function(){return t.current},[]),s=EM(BI),i=s.contextId,o=s.dragHandleUsageInstructionsId,l=s.registry,c=EM(FM),d=c.type,u=c.droppableId,p=XO(function(){return{id:e.draggableId,index:e.index,type:d,droppableId:u}},[e.draggableId,e.index,d,u]),m=e.children,h=e.draggableId,f=e.isEnabled,g=e.shouldRespectForcePress,x=e.canDragInteractiveElements,y=e.isClone,v=e.mapped,b=e.dropAnimationFinished;GM(),UI(),y||VM(XO(function(){return{descriptor:p,registry:l,getDraggableRef:n,canDragInteractiveElements:x,shouldRespectForcePress:g,isEnabled:f}},[p,l,n,x,g,f]));var j=XO(function(){return f?{tabIndex:0,role:"button","aria-describedby":o,"data-rbd-drag-handle-draggable-id":h,"data-rbd-drag-handle-context-id":i,draggable:!1,onDragStart:HM}:null},[i,o,h,f]),w=$O(function(e){"DRAGGING"===v.type&&v.dropping&&"transform"===e.propertyName&&b()},[b,v]),N=XO(function(){var e=WM(v),t="DRAGGING"===v.type&&v.dropping?w:null;return{innerRef:r,draggableProps:{"data-rbd-draggable-context-id":i,"data-rbd-draggable-id":h,style:e,onTransitionEnd:t},dragHandleProps:j}},[i,j,h,v,w,r]),k=XO(function(){return{draggableId:p.id,type:p.type,source:{index:p.index,droppableId:p.droppableId}}},[p.droppableId,p.id,p.index,p.type]);return m(N,v.snapshot,k)});function QM(e){return EM(FM).isUsingCloneFor!==e.draggableId||e.isClone?a.createElement($M,e):null}function ZM(e){var t="boolean"!==typeof e.isDragDisabled||!e.isDragDisabled,r=Boolean(e.disableInteractiveElementBlocking),n=Boolean(e.shouldRespectForcePress);return a.createElement(QM,eO({},e,{isClone:!1,isEnabled:t,canDragInteractiveElements:r,shouldRespectForcePress:n}))}var eD=function(e,t){return e===t.droppable.type},tD=function(e,t){return t.draggables[e.draggable.id]};var rD={mode:"standard",type:"DEFAULT",direction:"vertical",isDropDisabled:!1,isCombineEnabled:!1,ignoreContainerClipping:!1,renderClone:null,getContainerForClone:function(){return document.body||yP(!1),document.body}},nD=KO(function(){var e={placeholder:null,shouldAnimatePlaceholder:!0,snapshot:{isDraggingOver:!1,draggingOverWith:null,draggingFromThisWith:null,isUsingPlaceholder:!1},useClone:null},t=eO({},e,{shouldAnimatePlaceholder:!1}),r=uP(function(e){return{draggableId:e.id,type:e.type,source:{index:e.index,droppableId:e.droppableId}}}),n=uP(function(n,a,s,i,o,l){var c=o.descriptor.id;if(o.descriptor.droppableId===n){var d=l?{render:l,dragging:r(o.descriptor)}:null,u={isDraggingOver:s,draggingOverWith:s?c:null,draggingFromThisWith:c,isUsingPlaceholder:!0};return{placeholder:o.placeholder,shouldAnimatePlaceholder:!1,snapshot:u,useClone:d}}if(!a)return t;if(!i)return e;var p={isDraggingOver:s,draggingOverWith:c,draggingFromThisWith:null,isUsingPlaceholder:!0};return{placeholder:o.placeholder,shouldAnimatePlaceholder:!0,snapshot:p,useClone:null}});return function(r,a){var s=a.droppableId,i=a.type,o=!a.isDropDisabled,l=a.renderClone;if(r.isDragging){var c=r.critical;if(!eD(i,c))return t;var d=tD(c,r.dimensions),u=RE(r.impact)===s;return n(s,o,u,u,d,l)}if("DROP_ANIMATING"===r.phase){var p=r.completed;if(!eD(i,p.critical))return t;var m=tD(p.critical,r.dimensions);return n(s,o,YM(p.result)===s,RE(p.impact)===s,m,l)}if("IDLE"===r.phase&&r.completed&&!r.shouldFlush){var h=r.completed;if(!eD(i,h.critical))return t;var f=RE(h.impact)===s,g=Boolean(h.impact.at&&"COMBINE"===h.impact.at.type),x=h.critical.droppable.id===s;return f?g?e:t:x?e:t}return t}},{updateViewportMaxScroll:function(e){return{type:"UPDATE_VIEWPORT_MAX_SCROLL",payload:e}}},null,{context:II,pure:!0,areStatePropsEqual:KM})(function(e){var t=(0,a.useContext)(BI);t||yP(!1);var r=t.contextId,n=t.isMovementAllowed,s=(0,a.useRef)(null),i=(0,a.useRef)(null),o=e.children,l=e.droppableId,c=e.type,d=e.mode,u=e.direction,p=e.ignoreContainerClipping,m=e.isDropDisabled,h=e.isCombineEnabled,f=e.snapshot,g=e.useClone,x=e.updateViewportMaxScroll,y=e.getContainerForClone,v=$O(function(){return s.current},[]),b=$O(function(e){s.current=e},[]),j=($O(function(){return i.current},[]),$O(function(e){i.current=e},[]));zI();var w=$O(function(){n()&&x({maxScroll:GT()})},[n,x]);!function(e){var t=(0,a.useRef)(null),r=EM(BI),n=LI("droppable"),s=r.registry,i=r.marshal,o=WI(e),l=XO(function(){return{id:e.droppableId,type:e.type,mode:e.mode}},[e.droppableId,e.mode,e.type]),c=(0,a.useRef)(l),d=XO(function(){return uP(function(e,r){t.current||yP(!1);var n={x:e,y:r};i.updateDroppableScroll(l.id,n)})},[l.id,i]),u=$O(function(){var e=t.current;return e&&e.env.closestScrollable?kM(e.env.closestScrollable):AP},[]),p=$O(function(){var e=u();d(e.x,e.y)},[u,d]),m=XO(function(){return pP(p)},[p]),h=$O(function(){var e=t.current,r=TM(e);e&&r||yP(!1),e.scrollOptions.shouldPublishImmediately?p():m()},[m,p]),f=$O(function(e,n){t.current&&yP(!1);var a=o.current,s=a.getDroppableRef();s||yP(!1);var i=_M(s),c={ref:s,descriptor:l,env:i,scrollOptions:n};t.current=c;var d=CM({ref:s,descriptor:l,env:i,windowScroll:e,direction:a.direction,isDropDisabled:a.isDropDisabled,isCombineEnabled:a.isCombineEnabled,shouldClipSubject:!a.ignoreContainerClipping}),u=i.closestScrollable;return u&&(u.setAttribute(NI.contextId,r.contextId),u.addEventListener("scroll",h,PM(c.scrollOptions))),d},[r.contextId,l,h,o]),g=$O(function(){var e=t.current,r=TM(e);return e&&r||yP(!1),kM(r)},[]),x=$O(function(){var e=t.current;e||yP(!1);var r=TM(e);t.current=null,r&&(m.cancel(),r.removeAttribute(NI.contextId),r.removeEventListener("scroll",h,PM(e.scrollOptions)))},[h,m]),y=$O(function(e){var r=t.current;r||yP(!1);var n=TM(r);n||yP(!1),n.scrollTop+=e.y,n.scrollLeft+=e.x},[]),v=XO(function(){return{getDimensionAndWatchScroll:f,getScrollWhileDragging:g,dragStopped:x,scroll:y}},[x,f,g,y]),b=XO(function(){return{uniqueId:n,descriptor:l,callbacks:v}},[v,l,n]);SI(function(){return c.current=b.descriptor,s.droppable.register(b),function(){t.current&&x(),s.droppable.unregister(b)}},[v,l,x,b,i,s.droppable]),SI(function(){t.current&&i.updateDroppableIsEnabled(c.current.id,!e.isDropDisabled)},[e.isDropDisabled,i]),SI(function(){t.current&&i.updateDroppableIsCombineEnabled(c.current.id,e.isCombineEnabled)},[e.isCombineEnabled,i])}({droppableId:l,type:c,mode:d,direction:u,isDropDisabled:m,isCombineEnabled:h,ignoreContainerClipping:p,getDroppableRef:v});var N=a.createElement(LM,{on:e.placeholder,shouldAnimate:e.shouldAnimatePlaceholder},function(e){var t=e.onClose,n=e.data,s=e.animate;return a.createElement(RM,{placeholder:n,onClose:t,innerRef:j,animate:s,contextId:r,onTransitionEnd:w})}),k=XO(function(){return{innerRef:b,placeholder:N,droppableProps:{"data-rbd-droppable-id":l,"data-rbd-droppable-context-id":r}}},[r,l,N,b]),S=g?g.dragging.draggableId:null,_=XO(function(){return{droppableId:l,type:c,isUsingCloneFor:S}},[l,S,c]);return a.createElement(FM.Provider,{value:_},o(k,f),function(){if(!g)return null;var e=g.dragging,t=g.render,r=a.createElement(QM,{draggableId:e.draggableId,index:e.source.index,isClone:!0,isEnabled:!0,shouldRespectForcePress:!1,canDragInteractiveElements:!0},function(r,n){return t(r,n,e)});return Ne.createPortal(r,y())}())});nD.defaultProps=rD;const aD=e=>{let{steps:t,expandedStep:r,setExpandedStep:n,onAddStep:a,onEditStep:s,onDeleteStep:i,onDragEnd:o,activeLang:l,languages:c}=e;const d={collect_slot:rs,confirm:gs,respond:ls,branch:os,function:Ws,transfer:Ja},u={collect_slot:"blue",confirm:"green",respond:"purple",branch:"orange",function:"yellow",transfer:"red"};return(0,Da.jsxs)("div",{children:[(0,Da.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,Da.jsx)("h2",{className:"text-lg font-medium",children:"Flow Steps"}),(0,Da.jsxs)("button",{onClick:a,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:[(0,Da.jsx)(Qa,{className:"w-4 h-4"}),"Add Step"]})]}),0===t.length?(0,Da.jsxs)("div",{className:"text-center py-12 bg-white rounded-lg border-2 border-dashed",children:[(0,Da.jsx)(rs,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),(0,Da.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Steps Yet"}),(0,Da.jsx)("p",{className:"text-gray-600 mb-4",children:"Add steps to define your conversation flow"}),(0,Da.jsx)("button",{onClick:a,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Add First Step"})]}):(0,Da.jsx)(yM,{onDragEnd:o,children:(0,Da.jsx)(nD,{droppableId:"steps",children:e=>(0,Da.jsxs)("div",qe(qe({ref:e.innerRef},e.droppableProps),{},{className:"space-y-3",children:[t.map((e,t)=>{const a=d[e.step_type]||rs,o=u[e.step_type]||"gray";return(0,Da.jsx)(ZM,{draggableId:e.step_key,index:t,children:(l,c)=>(0,Da.jsxs)("div",qe(qe({ref:l.innerRef},l.draggableProps),{},{className:"bg-white rounded-lg border ".concat(c.isDragging?"shadow-lg":""),children:[(0,Da.jsxs)("div",{className:"flex items-center p-4",children:[(0,Da.jsx)("div",qe(qe({},l.dragHandleProps),{},{className:"mr-3 cursor-grab",children:(0,Da.jsx)($A,{className:"w-4 h-4 text-gray-400"})})),(0,Da.jsx)("div",{className:"w-10 h-10 rounded-lg flex items-center justify-center bg-".concat(o,"-100"),children:(0,Da.jsx)(a,{className:"w-5 h-5 text-".concat(o,"-600")})}),(0,Da.jsxs)("div",{className:"ml-4 flex-1",children:[(0,Da.jsx)("h4",{className:"font-medium text-gray-900",children:e.step_name||e.step_key}),(0,Da.jsxs)("p",{className:"text-sm text-gray-500",children:[e.step_type,e.slot_name&&" \u2192 ".concat(e.slot_name)]})]}),(0,Da.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Da.jsxs)("span",{className:"text-xs text-gray-400",children:["#",t+1]}),(0,Da.jsx)("button",{onClick:()=>s(e),className:"p-2 text-gray-500 hover:bg-gray-100 rounded",children:(0,Da.jsx)(ts,{className:"w-4 h-4"})}),(0,Da.jsx)("button",{onClick:()=>i(e.step_key),className:"p-2 text-red-500 hover:bg-red-50 rounded",children:(0,Da.jsx)(ns,{className:"w-4 h-4"})}),(0,Da.jsx)("button",{onClick:()=>n(r===e.step_key?null:e.step_key),className:"p-2 text-gray-500 hover:bg-gray-100 rounded",children:r===e.step_key?(0,Da.jsx)(Us,{className:"w-4 h-4"}):(0,Da.jsx)(zs,{className:"w-4 h-4"})})]})]}),r===e.step_key&&(0,Da.jsx)("div",{className:"px-4 pb-4 pt-2 border-t bg-gray-50",children:(0,Da.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,Da.jsxs)("div",{children:[(0,Da.jsx)("span",{className:"text-gray-500",children:"Prompt:"}),(0,Da.jsx)("p",{className:"text-gray-900",children:e.prompt_text||"-"})]}),e.slot_type&&(0,Da.jsxs)("div",{children:[(0,Da.jsx)("span",{className:"text-gray-500",children:"Slot Type:"}),(0,Da.jsx)("p",{className:"text-gray-900",children:e.slot_type})]}),e.next_step_key&&(0,Da.jsxs)("div",{children:[(0,Da.jsx)("span",{className:"text-gray-500",children:"Next:"}),(0,Da.jsx)("p",{className:"text-gray-900",children:e.next_step_key})]})]})})]}))},e.step_key)}),e.placeholder]}))})})]})},sD=e=>{var t,r,n,s;let{flow:i,onChange:o,activeLang:l,languages:c,audioFiles:d,agentId:u,flowId:p}=e;const[m,h]=(0,a.useState)(""),[f,g]=(0,a.useState)(""),x=()=>{m.trim()&&(o("trigger_phrases",[...i.trigger_phrases||[],m.trim()]),h(""))},y=()=>{f.trim()&&(o("cancel_phrases",[...i.cancel_phrases||["cancel"],f.trim()]),g(""))};return(0,Da.jsxs)("div",{className:"max-w-2xl space-y-6",children:[(0,Da.jsxs)("div",{className:"bg-white rounded-lg border p-6",children:[(0,Da.jsx)("h3",{className:"text-lg font-medium mb-4",children:"Basic Information"}),(0,Da.jsxs)("div",{className:"space-y-4",children:[(0,Da.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,Da.jsxs)("div",{children:[(0,Da.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Flow Name *"}),(0,Da.jsx)("input",{type:"text",value:i.flow_name||"",onChange:e=>o("flow_name",e.target.value),placeholder:"Installation Request",className:"w-full px-3 py-2 border rounded-lg"})]}),(0,Da.jsxs)("div",{children:[(0,Da.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Flow Key *"}),(0,Da.jsx)("input",{type:"text",value:i.flow_key||"",onChange:e=>o("flow_key",e.target.value.toLowerCase().replace(/[^a-z0-9_]/g,"_")),placeholder:"ac_installation",className:"w-full px-3 py-2 border rounded-lg"})]})]}),(0,Da.jsxs)("div",{children:[(0,Da.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),(0,Da.jsx)("textarea",{value:i.description||"",onChange:e=>o("description",e.target.value),rows:2,className:"w-full px-3 py-2 border rounded-lg"})]})]})]}),(0,Da.jsxs)("div",{className:"bg-white rounded-lg border p-6",children:[(0,Da.jsx)("h3",{className:"text-lg font-medium mb-4",children:"Trigger Phrases"}),(0,Da.jsx)("p",{className:"text-sm text-gray-600 mb-4",children:"Phrases that will start this flow when matched"}),(0,Da.jsxs)("div",{className:"flex gap-2 mb-4",children:[(0,Da.jsx)("input",{type:"text",value:m,onChange:e=>h(e.target.value),onKeyPress:e=>"Enter"===e.key&&x(),placeholder:"e.g., AC installation, install my AC",className:"flex-1 px-3 py-2 border rounded-lg"}),(0,Da.jsx)("button",{onClick:x,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Add"})]}),(0,Da.jsx)("div",{className:"flex flex-wrap gap-2",children:(i.trigger_phrases||[]).map((e,t)=>(0,Da.jsxs)("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-blue-100 text-blue-800 rounded-full",children:[e,(0,Da.jsx)("button",{onClick:()=>(e=>{o("trigger_phrases",i.trigger_phrases.filter((t,r)=>r!==e))})(t),className:"hover:text-blue-600",children:(0,Da.jsx)(ss,{className:"w-3 h-3"})})]},t))})]}),(0,Da.jsxs)("div",{className:"bg-white rounded-lg border p-6",children:[(0,Da.jsx)("h3",{className:"text-lg font-medium mb-4",children:"Introduction Message"}),(0,Da.jsx)("p",{className:"text-sm text-gray-600 mb-4",children:"Played when the flow starts (before first step)"}),(0,Da.jsx)(LA,{label:"Intro Text",entityType:"flow",entityId:i.id,fieldName:"intro_text",baseTextValue:i.intro_text||"",baseAudioId:i.intro_audio_id,onBaseTextChange:e=>o("intro_text",e),onBaseAudioChange:e=>o("intro_audio_id",e),languages:c,defaultLanguage:(null===c||void 0===c||null===(t=c.find(e=>e.is_default))||void 0===t?void 0:t.language_code)||"en",audioFiles:d,agentId:u,placeholder:"Sure, I'll help you with your AC installation...",multiline:!0})]}),(0,Da.jsxs)("div",{className:"bg-white rounded-lg border p-6",children:[(0,Da.jsx)("h3",{className:"text-lg font-medium mb-4",children:"Cancel Handling"}),(0,Da.jsx)("p",{className:"text-sm text-gray-600 mb-4",children:"What happens when caller wants to cancel the flow"}),(0,Da.jsxs)("div",{className:"space-y-4",children:[(0,Da.jsxs)("div",{children:[(0,Da.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Cancel Phrases"}),(0,Da.jsxs)("div",{className:"flex gap-2 mb-2",children:[(0,Da.jsx)("input",{type:"text",value:f,onChange:e=>g(e.target.value),onKeyPress:e=>"Enter"===e.key&&y(),placeholder:"e.g., cancel, stop, never mind",className:"flex-1 px-3 py-2 border rounded-lg text-sm"}),(0,Da.jsx)("button",{onClick:y,className:"px-3 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 text-sm",children:"Add"})]}),(0,Da.jsx)("div",{className:"flex flex-wrap gap-2",children:(i.cancel_phrases||["cancel"]).map((e,t)=>(0,Da.jsxs)("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-red-100 text-red-800 rounded-full text-sm",children:[e,(0,Da.jsx)("button",{onClick:()=>(e=>{o("cancel_phrases",i.cancel_phrases.filter((t,r)=>r!==e))})(t),className:"hover:text-red-600",children:(0,Da.jsx)(ss,{className:"w-3 h-3"})})]},t))})]}),(0,Da.jsx)(LA,{label:"Cancel Response",entityType:"flow",entityId:i.id,fieldName:"on_cancel_response_text",baseTextValue:i.on_cancel_response_text||"",baseAudioId:i.on_cancel_audio_id,onBaseTextChange:e=>o("on_cancel_response_text",e),onBaseAudioChange:e=>o("on_cancel_audio_id",e),languages:c,defaultLanguage:(null===c||void 0===c||null===(r=c.find(e=>e.is_default))||void 0===r?void 0:r.language_code)||"en",audioFiles:d,agentId:u,placeholder:"No problem, I've cancelled your request. Is there anything else I can help with?",multiline:!0}),(0,Da.jsxs)("div",{children:[(0,Da.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"After Cancel Action"}),(0,Da.jsxs)("select",{value:i.on_cancel_action||"end_call",onChange:e=>o("on_cancel_action",e.target.value),className:"w-full px-3 py-2 border rounded-lg",children:[(0,Da.jsx)("option",{value:"end_call",children:"End Call"}),(0,Da.jsx)("option",{value:"main_menu",children:"Return to Main Menu"}),(0,Da.jsx)("option",{value:"transfer",children:"Transfer to Agent"})]})]})]})]}),(0,Da.jsxs)("div",{className:"bg-white rounded-lg border p-6",children:[(0,Da.jsx)("h3",{className:"text-lg font-medium mb-4",children:"Timeout Handling"}),(0,Da.jsx)("p",{className:"text-sm text-gray-600 mb-4",children:"What happens when caller doesn't respond in time"}),(0,Da.jsxs)("div",{className:"space-y-4",children:[(0,Da.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,Da.jsxs)("div",{children:[(0,Da.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Step Timeout (seconds)"}),(0,Da.jsx)("input",{type:"number",value:i.step_timeout_seconds||30,onChange:e=>o("step_timeout_seconds",parseInt(e.target.value)),className:"w-full px-3 py-2 border rounded-lg"})]}),(0,Da.jsxs)("div",{children:[(0,Da.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Timeout Action"}),(0,Da.jsxs)("select",{value:i.on_timeout_action||"retry",onChange:e=>o("on_timeout_action",e.target.value),className:"w-full px-3 py-2 border rounded-lg",children:[(0,Da.jsx)("option",{value:"retry",children:"Retry (repeat prompt)"}),(0,Da.jsx)("option",{value:"skip",children:"Skip to Next Step"}),(0,Da.jsx)("option",{value:"transfer",children:"Transfer to Agent"}),(0,Da.jsx)("option",{value:"end",children:"End Call"})]})]})]}),(0,Da.jsx)(LA,{label:"Timeout Message",entityType:"flow",entityId:i.id,fieldName:"on_timeout_text",baseTextValue:i.on_timeout_text||"",baseAudioId:i.on_timeout_audio_id,onBaseTextChange:e=>o("on_timeout_text",e),onBaseAudioChange:e=>o("on_timeout_audio_id",e),languages:c,defaultLanguage:(null===c||void 0===c||null===(n=c.find(e=>e.is_default))||void 0===n?void 0:n.language_code)||"en",audioFiles:d,agentId:u,placeholder:"I didn't hear a response. Let me repeat that...",multiline:!0}),(0,Da.jsxs)("div",{children:[(0,Da.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Max Retries Per Step"}),(0,Da.jsx)("input",{type:"number",value:i.max_retries_per_step||3,onChange:e=>o("max_retries_per_step",parseInt(e.target.value)),className:"w-full px-3 py-2 border rounded-lg"}),(0,Da.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"After this many retries, the timeout action will be taken"})]})]})]}),(0,Da.jsxs)("div",{className:"bg-white rounded-lg border p-6",children:[(0,Da.jsx)("h3",{className:"text-lg font-medium mb-4",children:"Error Handling"}),(0,Da.jsx)("p",{className:"text-sm text-gray-600 mb-4",children:"What happens when an error occurs (e.g., function call fails)"}),(0,Da.jsxs)("div",{className:"space-y-4",children:[(0,Da.jsx)(LA,{label:"Error Message",entityType:"flow",entityId:i.id,fieldName:"on_error_text",baseTextValue:i.on_error_text||"",baseAudioId:i.on_error_audio_id,onBaseTextChange:e=>o("on_error_text",e),onBaseAudioChange:e=>o("on_error_audio_id",e),languages:c,defaultLanguage:(null===c||void 0===c||null===(s=c.find(e=>e.is_default))||void 0===s?void 0:s.language_code)||"en",audioFiles:d,agentId:u,placeholder:"I'm sorry, something went wrong. Let me transfer you to an agent.",multiline:!0}),(0,Da.jsxs)("div",{children:[(0,Da.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Error Transfer Queue"}),(0,Da.jsx)("input",{type:"text",value:i.on_error_transfer_queue||"",onChange:e=>o("on_error_transfer_queue",e.target.value),placeholder:"support_queue",className:"w-full px-3 py-2 border rounded-lg"}),(0,Da.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Queue to transfer to when an error occurs"})]})]})]}),(0,Da.jsx)("div",{className:"bg-white rounded-lg border p-6",children:(0,Da.jsxs)("label",{className:"flex items-center gap-3",children:[(0,Da.jsx)("input",{type:"checkbox",checked:!1!==i.is_active,onChange:e=>o("is_active",e.target.checked),className:"rounded text-blue-600"}),(0,Da.jsxs)("div",{children:[(0,Da.jsx)("span",{className:"font-medium",children:"Active"}),(0,Da.jsx)("p",{className:"text-sm text-gray-500",children:"Enable this flow for matching"})]})]})})]})},iD=e=>{var t,r,n;let{flow:a,onChange:s,functions:i,templates:o,audioFiles:l,activeLang:c,languages:d,agentId:u,flowId:p}=e;return(0,Da.jsxs)("div",{className:"max-w-2xl space-y-6",children:[(0,Da.jsxs)("div",{className:"bg-white rounded-lg border p-6",children:[(0,Da.jsx)("h3",{className:"text-lg font-medium mb-4",children:"On Complete Action"}),(0,Da.jsxs)("div",{className:"space-y-4",children:[(0,Da.jsxs)("div",{children:[(0,Da.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Action Type"}),(0,Da.jsx)("select",{value:a.on_complete_action||"respond",onChange:e=>s("on_complete_action",e.target.value),className:"w-full px-3 py-2 border rounded-lg",children:kA.map(e=>(0,Da.jsx)("option",{value:e.value,children:e.label},e.value))})]}),"function_call"===a.on_complete_action&&(0,Da.jsx)(Da.Fragment,{children:(0,Da.jsxs)("div",{children:[(0,Da.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Function"}),(0,Da.jsxs)("select",{value:a.on_complete_function_id||"",onChange:e=>{const t=i.find(t=>t.id===e.target.value);s("on_complete_function_id",e.target.value),s("on_complete_function_name",(null===t||void 0===t?void 0:t.name)||"")},className:"w-full px-3 py-2 border rounded-lg",children:[(0,Da.jsx)("option",{value:"",children:"Select function..."}),i.map(e=>(0,Da.jsx)("option",{value:e.id,children:e.name},e.id))]})]})}),"transfer"===a.on_complete_action&&(0,Da.jsxs)("div",{children:[(0,Da.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Transfer Queue"}),(0,Da.jsx)("input",{type:"text",value:a.on_complete_transfer_queue||"",onChange:e=>s("on_complete_transfer_queue",e.target.value),placeholder:"support_queue",className:"w-full px-3 py-2 border rounded-lg"})]}),(0,Da.jsx)(LA,{label:"Completion Message",entityType:"flow",entityId:a.id,fieldName:"on_complete_response_text",baseTextValue:a.on_complete_response_text||"",baseAudioId:a.on_complete_audio_id,onBaseTextChange:e=>s("on_complete_response_text",e),onBaseAudioChange:e=>s("on_complete_audio_id",e),languages:d,defaultLanguage:(null===d||void 0===d||null===(t=d.find(e=>e.is_default))||void 0===t?void 0:t.language_code)||"en",audioFiles:l,agentId:u,placeholder:"Your request has been submitted. Request ID is {{result.request_id}}",multiline:!0})]})]}),(0,Da.jsxs)("div",{className:"bg-white rounded-lg border p-6",children:[(0,Da.jsx)("h3",{className:"text-lg font-medium mb-4",children:"Anything Else & Closing"}),(0,Da.jsxs)("div",{className:"space-y-4",children:[(0,Da.jsxs)("label",{className:"flex items-center gap-3",children:[(0,Da.jsx)("input",{type:"checkbox",checked:!1!==a.ask_anything_else,onChange:e=>s("ask_anything_else",e.target.checked),className:"rounded text-blue-600"}),(0,Da.jsx)("span",{children:'Ask "Anything else?" after completion'})]}),!1!==a.ask_anything_else&&(0,Da.jsx)(LA,{label:"Anything Else Text",entityType:"flow",entityId:a.id,fieldName:"anything_else_text",baseTextValue:a.anything_else_text||"",baseAudioId:a.anything_else_audio_id,onBaseTextChange:e=>s("anything_else_text",e),onBaseAudioChange:e=>s("anything_else_audio_id",e),languages:d,defaultLanguage:(null===d||void 0===d||null===(r=d.find(e=>e.is_default))||void 0===r?void 0:r.language_code)||"en",audioFiles:l,agentId:u,placeholder:"Is there anything else I can help you with?"}),(0,Da.jsx)(LA,{label:"Closing Message",entityType:"flow",entityId:a.id,fieldName:"closing_text",baseTextValue:a.closing_text||"",baseAudioId:a.closing_audio_id,onBaseTextChange:e=>s("closing_text",e),onBaseAudioChange:e=>s("closing_audio_id",e),languages:d,defaultLanguage:(null===d||void 0===d||null===(n=d.find(e=>e.is_default))||void 0===n?void 0:n.language_code)||"en",audioFiles:l,agentId:u,placeholder:"Thank you for calling. Goodbye!"})]})]})]})},oD=e=>{var t,r;let{step:n,steps:s,functions:i,templates:o,audioFiles:l,languages:c,activeLang:d,agentId:u,onSave:p,onClose:m,flowId:h}=e;const[f,g]=(0,a.useState)(qe({step_key:(null===n||void 0===n?void 0:n.step_key)||"",step_name:(null===n||void 0===n?void 0:n.step_name)||"",step_type:(null===n||void 0===n?void 0:n.step_type)||"collect_slot",prompt_text:(null===n||void 0===n?void 0:n.prompt_text)||"",prompt_audio_id:(null===n||void 0===n?void 0:n.prompt_audio_id)||null,slot_name:(null===n||void 0===n?void 0:n.slot_name)||"",slot_type:(null===n||void 0===n?void 0:n.slot_type)||"freeform",requires_confirmation:(null===n||void 0===n?void 0:n.requires_confirmation)||!1,confirm_template:(null===n||void 0===n?void 0:n.confirm_template)||"",confirm_audio_id:(null===n||void 0===n?void 0:n.confirm_audio_id)||null,next_step_key:(null===n||void 0===n?void 0:n.next_step_key)||"",is_terminal:(null===n||void 0===n?void 0:n.is_terminal)||!1},n)),x=(e,t)=>{g(r=>qe(qe({},r),{},{[e]:t})),"step_name"!==e||n||g(e=>qe(qe({},e),{},{step_key:CA(t)}))},y=e=>{e.preventDefault(),f.step_key?p(f):nr.error("Step key is required")};return(0,Da.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,Da.jsxs)("div",{className:"bg-white rounded-xl w-full max-w-2xl max-h-[90vh] overflow-hidden flex flex-col",children:[(0,Da.jsxs)("div",{className:"flex items-center justify-between p-4 border-b",children:[(0,Da.jsx)("h2",{className:"text-xl font-semibold",children:n?"Edit Step":"Add Step"}),(0,Da.jsx)("button",{onClick:m,className:"p-2 hover:bg-gray-100 rounded",children:(0,Da.jsx)(ss,{className:"w-5 h-5"})})]}),(0,Da.jsxs)("form",{onSubmit:y,className:"flex-1 overflow-y-auto p-4 space-y-4",children:[(0,Da.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,Da.jsxs)("div",{children:[(0,Da.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Step Name *"}),(0,Da.jsx)("input",{type:"text",value:f.step_name,onChange:e=>x("step_name",e.target.value),placeholder:"Ask Customer Name",className:"w-full px-3 py-2 border rounded-lg"})]}),(0,Da.jsxs)("div",{children:[(0,Da.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Step Key *"}),(0,Da.jsx)("input",{type:"text",value:f.step_key,onChange:e=>x("step_key",e.target.value.toLowerCase().replace(/[^a-z0-9_]/g,"_")),className:"w-full px-3 py-2 border rounded-lg",disabled:!!n})]})]}),(0,Da.jsxs)("div",{children:[(0,Da.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Step Type *"}),(0,Da.jsx)("select",{value:f.step_type,onChange:e=>x("step_type",e.target.value),className:"w-full px-3 py-2 border rounded-lg",children:NA.map(e=>(0,Da.jsx)("option",{value:e.value,children:e.label},e.value))})]}),(0,Da.jsx)(LA,{label:"Prompt Text",entityType:"step",entityId:null===n||void 0===n?void 0:n.id,flowId:h,fieldName:"prompt_text",baseTextValue:f.prompt_text,baseAudioId:f.prompt_audio_id,onBaseTextChange:e=>x("prompt_text",e),onBaseAudioChange:e=>x("prompt_audio_id",e),languages:c,defaultLanguage:(null===c||void 0===c||null===(t=c.find(e=>e.is_default))||void 0===t?void 0:t.language_code)||"en",audioFiles:l,agentId:u,placeholder:"May I know your name please?"}),"collect_slot"===f.step_type&&(0,Da.jsxs)(Da.Fragment,{children:[(0,Da.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,Da.jsxs)("div",{children:[(0,Da.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Slot Name"}),(0,Da.jsx)("input",{type:"text",value:f.slot_name,onChange:e=>x("slot_name",e.target.value),placeholder:"customer_name",className:"w-full px-3 py-2 border rounded-lg"})]}),(0,Da.jsxs)("div",{children:[(0,Da.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Slot Type"}),(0,Da.jsx)("select",{value:f.slot_type,onChange:e=>x("slot_type",e.target.value),className:"w-full px-3 py-2 border rounded-lg",children:wA.map(e=>(0,Da.jsx)("option",{value:e.value,children:e.label},e.value))})]})]}),(0,Da.jsxs)("label",{className:"flex items-center gap-2",children:[(0,Da.jsx)("input",{type:"checkbox",checked:f.requires_confirmation,onChange:e=>x("requires_confirmation",e.target.checked),className:"rounded text-blue-600"}),(0,Da.jsx)("span",{className:"text-sm",children:"Requires confirmation"})]}),f.requires_confirmation&&(0,Da.jsx)(Da.Fragment,{children:(0,Da.jsx)(LA,{label:"Confirmation Prompt",entityType:"step",entityId:null===n||void 0===n?void 0:n.id,flowId:h,fieldName:"confirm_template",baseTextValue:f.confirm_template||"",baseAudioId:f.confirm_audio_id,onBaseTextChange:e=>x("confirm_template",e),onBaseAudioChange:e=>x("confirm_audio_id",e),languages:c,defaultLanguage:(null===c||void 0===c||null===(r=c.find(e=>e.is_default))||void 0===r?void 0:r.language_code)||"en",audioFiles:l,agentId:u,placeholder:"You said {{slot_name}} is {{value}}. Is that correct?",helpText:"Use {{value}}, {{slot_name}}, or the actual slot name like {{invoice_no}}"})})]}),(0,Da.jsxs)("div",{children:[(0,Da.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Next Step (optional)"}),(0,Da.jsxs)("select",{value:f.next_step_key||"",onChange:e=>x("next_step_key",e.target.value||null),className:"w-full px-3 py-2 border rounded-lg",children:[(0,Da.jsx)("option",{value:"",children:"Auto (next in order)"}),s.filter(e=>e.step_key!==f.step_key).map(e=>(0,Da.jsx)("option",{value:e.step_key,children:e.step_name||e.step_key},e.step_key))]})]}),(0,Da.jsxs)("label",{className:"flex items-center gap-2",children:[(0,Da.jsx)("input",{type:"checkbox",checked:f.is_terminal,onChange:e=>x("is_terminal",e.target.checked),className:"rounded text-blue-600"}),(0,Da.jsx)("span",{className:"text-sm",children:"Terminal step (ends flow)"})]})]}),(0,Da.jsxs)("div",{className:"flex justify-end gap-3 p-4 border-t bg-gray-50",children:[(0,Da.jsx)("button",{type:"button",onClick:m,className:"px-4 py-2 text-gray-700 bg-white border rounded-lg hover:bg-gray-50",children:"Cancel"}),(0,Da.jsx)("button",{onClick:y,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:n?"Update":"Add Step"})]})]})})},lD=()=>{const{agentId:e,flowId:t}=re(),r=ee(),[n,s]=(0,a.useState)(null),[i,o]=(0,a.useState)([]),[l,c]=(0,a.useState)([]),[d,u]=(0,a.useState)([]),[p,m]=(0,a.useState)([]),[h,f]=(0,a.useState)([]),[g,x]=(0,a.useState)(!0),[y,v]=(0,a.useState)(!1),[b,j]=(0,a.useState)("steps"),[w,N]=(0,a.useState)(null),[k,S]=(0,a.useState)(!1),[_,C]=(0,a.useState)(null),[A,O]=(0,a.useState)("en"),P=!t||"new"===t;(0,a.useEffect)(()=>{E()},[e,t]);const E=async()=>{try{var r,n;x(!0);const[a,i,l,d]=await Promise.all([Ta(e),VC(e),vA(e),FC(e)]);if(c((null===(r=a.data)||void 0===r?void 0:r.functions)||[]),u(i.data||[]),m(l.data||[]),f(d.data||[]),(null===(n=d.data)||void 0===n?void 0:n.length)>0){const e=d.data.find(e=>e.is_default);O((null===e||void 0===e?void 0:e.code)||d.data[0].code)}if(P)s({flow_name:"",flow_key:"",description:"",trigger_phrases:[],intro_text:"",on_complete_action:"respond",on_complete_response_text:"",ask_anything_else:!0,anything_else_text:"Is there anything else I can help you with?",closing_text:"Thank you for calling. Goodbye!",step_timeout_seconds:30,max_retries_per_step:3,is_active:!0});else{const r=await ZC(e,t);r.data&&(s(r.data),o(r.data.steps||[]))}}catch(a){console.error("Failed to load flow:",a),nr.error("Failed to load flow")}finally{x(!1)}},T=(e,t)=>{s(r=>qe(qe({},r),{},{[e]:t})),"flow_name"===e&&P&&s(e=>qe(qe({},e),{},{flow_key:_A(t)}))};return g?(0,Da.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,Da.jsx)(ki,{className:"w-8 h-8 animate-spin text-blue-600"})}):(0,Da.jsxs)("div",{className:"h-screen flex flex-col",children:[(0,Da.jsxs)("div",{className:"flex items-center justify-between px-6 py-4 border-b bg-white",children:[(0,Da.jsxs)("div",{className:"flex items-center gap-4",children:[(0,Da.jsx)("button",{onClick:()=>r("/agents/".concat(e,"/ivr/flows")),className:"p-2 hover:bg-gray-100 rounded-lg",children:(0,Da.jsx)(fi,{className:"w-5 h-5"})}),(0,Da.jsxs)("div",{children:[(0,Da.jsx)("h1",{className:"text-xl font-bold text-gray-900",children:P?"Create Flow":(null===n||void 0===n?void 0:n.flow_name)||"Edit Flow"}),(0,Da.jsx)("p",{className:"text-sm text-gray-500",children:(null===n||void 0===n?void 0:n.flow_key)||"Define conversation steps"})]})]}),(0,Da.jsxs)("div",{className:"flex items-center gap-3",children:[(0,Da.jsx)("select",{value:A,onChange:e=>O(e.target.value),className:"px-3 py-2 border rounded-lg text-sm",children:h.map(e=>(0,Da.jsx)("option",{value:e.code,children:e.native_name||e.name},e.code))}),(0,Da.jsxs)("button",{onClick:async()=>{var a,s;if(null!==(a=n.flow_name)&&void 0!==a&&a.trim())if(null!==(s=n.flow_key)&&void 0!==s&&s.trim())try{let a;if(v(!0),P){a=(await eA(e,n)).data}else await tA(e,t,n),a=qe(qe({},n),{},{id:t});for(const t of i){var o;null!==(o=t.id)&&void 0!==o&&o.startsWith("temp_")?await aA(e,a.id,t):await sA(e,a.id,t.id,t)}nr.success("Flow saved successfully"),r("/agents/".concat(e,"/ivr/flows"))}catch(d){var l,c;nr.error((null===(l=d.response)||void 0===l||null===(c=l.data)||void 0===c?void 0:c.error)||"Failed to save flow")}finally{v(!1)}else nr.error("Flow key is required");else nr.error("Flow name is required")},disabled:y,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50",children:[y?(0,Da.jsx)(ki,{className:"w-4 h-4 animate-spin"}):(0,Da.jsx)(is,{className:"w-4 h-4"}),"Save Flow"]})]})]}),(0,Da.jsx)("div",{className:"border-b bg-white px-6",children:(0,Da.jsx)("div",{className:"flex gap-6",children:["steps","settings","completion"].map(e=>(0,Da.jsx)("button",{onClick:()=>j(e),className:"py-3 px-1 border-b-2 font-medium text-sm capitalize ".concat(b===e?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"),children:e},e))})}),(0,Da.jsxs)("div",{className:"flex-1 overflow-y-auto p-6 bg-gray-50",children:["steps"===b&&(0,Da.jsx)(aD,{steps:i,expandedStep:w,setExpandedStep:N,onAddStep:()=>{C(null),S(!0)},onEditStep:e=>{C(e),S(!0)},onDeleteStep:e=>{window.confirm("Delete this step?")&&o(t=>t.filter(t=>t.step_key!==e))},onDragEnd:e=>{if(!e.destination)return;const t=[...i],[r]=t.splice(e.source.index,1);t.splice(e.destination.index,0,r),o(t.map((e,t)=>qe(qe({},e),{},{step_order:t+1})))},activeLang:A,languages:h}),"settings"===b&&(0,Da.jsx)(sD,{flow:n,onChange:T,activeLang:A,languages:h,audioFiles:p,agentId:e,flowId:null===n||void 0===n?void 0:n.id}),"completion"===b&&(0,Da.jsx)(iD,{flow:n,onChange:T,functions:l,templates:d,audioFiles:p,activeLang:A,languages:h,agentId:e,flowId:null===n||void 0===n?void 0:n.id})]}),k&&(0,Da.jsx)(oD,{step:_,steps:i,functions:l,templates:d,audioFiles:p,languages:h,activeLang:A,agentId:e,onSave:e=>{if(_)o(t=>t.map(t=>t.id===_.id||t.step_key===_.step_key?qe(qe({},t),e):t));else{const t=qe(qe({},e),{},{id:"temp_".concat(Date.now()),step_order:i.length+1});o(e=>[...e,t])}S(!1)},onClose:()=>S(!1),flowId:null===n||void 0===n?void 0:n.id})]})},cD=Ha("Music",[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]]),dD=e=>{let{segment:t,languages:r,expanded:n,onToggle:a,onEdit:s,onDelete:i,onPlayAudio:o,playingAudio:l,agentId:c}=e;return(0,Da.jsxs)("div",{className:"border rounded-lg bg-white overflow-hidden",children:[(0,Da.jsxs)("div",{className:"flex items-center justify-between p-4 cursor-pointer hover:bg-gray-50",onClick:a,children:[(0,Da.jsxs)("div",{className:"flex items-center gap-4",children:[(0,Da.jsx)("div",{className:"w-10 h-10 bg-blue-50 rounded-lg flex items-center justify-center",children:(0,Da.jsx)(ls,{className:"w-5 h-5 text-blue-600"})}),(0,Da.jsxs)("div",{children:[(0,Da.jsx)("h3",{className:"font-medium text-gray-900",children:t.segment_key}),(0,Da.jsx)("p",{className:"text-sm text-gray-500",children:t.description||"No description"})]})]}),(0,Da.jsxs)("div",{className:"flex items-center gap-3",children:[(0,Da.jsx)("span",{className:"text-xs px-2 py-1 rounded ".concat({prefix:"bg-green-100 text-green-800",connector:"bg-blue-100 text-blue-800",suffix:"bg-purple-100 text-purple-800",standalone:"bg-gray-100 text-gray-800"}[t.segment_type]),children:t.segment_type}),(0,Da.jsx)("div",{className:"flex gap-1",children:r.map(e=>{var r;const n=null===(r=t.content)||void 0===r?void 0:r[e.code],a=null===n||void 0===n?void 0:n.audio_id;return(0,Da.jsx)("div",{className:"w-6 h-6 rounded-full flex items-center justify-center text-xs ".concat(a?"bg-green-100 text-green-700":n?"bg-yellow-100 text-yellow-700":"bg-gray-100 text-gray-400"),title:"".concat(e.name,": ").concat(a?"Has audio":n?"Text only":"Missing"),children:e.code.substring(0,2).toUpperCase()},e.code)})}),(0,Da.jsxs)("div",{className:"flex items-center gap-1",children:[(0,Da.jsx)("button",{onClick:e=>{e.stopPropagation(),s()},className:"p-2 text-gray-500 hover:bg-gray-100 rounded",children:(0,Da.jsx)(ts,{className:"w-4 h-4"})}),(0,Da.jsx)("button",{onClick:e=>{e.stopPropagation(),i()},className:"p-2 text-red-500 hover:bg-red-50 rounded",children:(0,Da.jsx)(ns,{className:"w-4 h-4"})})]}),n?(0,Da.jsx)(Us,{className:"w-5 h-5 text-gray-400"}):(0,Da.jsx)(zs,{className:"w-5 h-5 text-gray-400"})]})]}),n&&(0,Da.jsxs)("div",{className:"border-t p-4 bg-gray-50",children:[(0,Da.jsx)("h4",{className:"text-sm font-medium text-gray-700 mb-3",children:"Language Variants"}),(0,Da.jsx)("div",{className:"space-y-3",children:r.map(e=>{var r;const n=null===(r=t.content)||void 0===r?void 0:r[e.code];return(0,Da.jsxs)("div",{className:"flex items-center gap-4 p-3 bg-white rounded-lg border",children:[(0,Da.jsxs)("div",{className:"w-20",children:[(0,Da.jsx)("span",{className:"text-sm font-medium",children:e.name}),(0,Da.jsx)("span",{className:"text-xs text-gray-500 block",children:e.native_name})]}),n?(0,Da.jsxs)(Da.Fragment,{children:[(0,Da.jsx)("div",{className:"flex-1",children:(0,Da.jsx)("p",{className:"text-sm ".concat("rtl"===e.direction?"text-right":""),children:n.text_content})}),n.audio_id?(0,Da.jsx)("button",{onClick:()=>o(n.audio_id),className:"p-2 rounded-full ".concat(l===n.audio_id?"bg-blue-100 text-blue-600":"bg-gray-100 text-gray-600 hover:bg-gray-200"),children:l===n.audio_id?(0,Da.jsx)(DC,{className:"w-4 h-4"}):(0,Da.jsx)(xs,{className:"w-4 h-4"})}):(0,Da.jsx)("span",{className:"text-xs text-yellow-600 bg-yellow-50 px-2 py-1 rounded",children:"No audio"})]}):(0,Da.jsx)("div",{className:"flex-1 text-sm text-gray-400 italic",children:"No content for this language"})]},e.code)})})]})]})},uD=e=>{var t,r,n,s;let{segment:i,languages:o,agentId:l,onSave:c,onClose:d}=e;const[u,p]=(0,a.useState)({segment_key:(null===i||void 0===i?void 0:i.segment_key)||"",segment_type:(null===i||void 0===i?void 0:i.segment_type)||"standalone",description:(null===i||void 0===i?void 0:i.description)||"",is_global:(null===i||void 0===i?void 0:i.is_global)||!1,content:(null===i||void 0===i?void 0:i.content)||{}}),[m,h]=(0,a.useState)((null===(t=o[0])||void 0===t?void 0:t.code)||"en"),[f,g]=(0,a.useState)(!1),[x,y]=(0,a.useState)(null),v=(0,a.useRef)(null),b=(e,t)=>{p(r=>qe(qe({},r),{},{[e]:t}))},j=(e,t,r)=>{p(n=>qe(qe({},n),{},{content:qe(qe({},n.content),{},{[e]:qe(qe({},n.content[e]),{},{[t]:r})})}))},w=e=>{e.preventDefault(),u.segment_key.trim()?c(u):nr.error("Segment key is required")},N=o.find(e=>e.code===m);return(0,Da.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,Da.jsxs)("div",{className:"bg-white rounded-xl w-full max-w-3xl max-h-[90vh] overflow-hidden flex flex-col",children:[(0,Da.jsxs)("div",{className:"flex items-center justify-between p-4 border-b",children:[(0,Da.jsx)("h2",{className:"text-xl font-semibold",children:i?"Edit Segment":"Create Segment"}),(0,Da.jsx)("button",{onClick:d,className:"p-2 hover:bg-gray-100 rounded",children:(0,Da.jsx)(ss,{className:"w-5 h-5"})})]}),(0,Da.jsxs)("form",{onSubmit:w,className:"flex-1 overflow-y-auto p-4 space-y-4",children:[(0,Da.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,Da.jsxs)("div",{children:[(0,Da.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Segment Key *"}),(0,Da.jsx)("input",{type:"text",value:u.segment_key,onChange:e=>b("segment_key",e.target.value.toLowerCase().replace(/[^a-z0-9_]/g,"_")),placeholder:"thank_you",className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500",disabled:!!i})]}),(0,Da.jsxs)("div",{children:[(0,Da.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Type *"}),(0,Da.jsx)("select",{value:u.segment_type,onChange:e=>b("segment_type",e.target.value),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500",children:jA.map(e=>(0,Da.jsx)("option",{value:e.value,children:e.label},e.value))})]})]}),(0,Da.jsxs)("div",{children:[(0,Da.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),(0,Da.jsx)("input",{type:"text",value:u.description,onChange:e=>b("description",e.target.value),placeholder:"What this segment is for...",className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500"})]}),(0,Da.jsxs)("div",{className:"border rounded-lg overflow-hidden",children:[(0,Da.jsx)("div",{className:"flex border-b bg-gray-50 overflow-x-auto",children:o.map(e=>{var t;return(0,Da.jsxs)("button",{type:"button",onClick:()=>h(e.code),className:"px-4 py-2 text-sm whitespace-nowrap ".concat(m===e.code?"bg-white border-b-2 border-blue-500 text-blue-600":"text-gray-600 hover:bg-gray-100"),children:[e.native_name||e.name,(null===(t=u.content[e.code])||void 0===t?void 0:t.text_content)&&(0,Da.jsx)(Vs,{className:"w-3 h-3 inline ml-1 text-green-500"})]},e.code)})}),(0,Da.jsx)("div",{className:"p-4",children:(0,Da.jsxs)("div",{className:"space-y-4",children:[(0,Da.jsxs)("div",{children:[(0,Da.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Text Content (",null===N||void 0===N?void 0:N.name,")"]}),(0,Da.jsx)("textarea",{value:(null===(r=u.content[m])||void 0===r?void 0:r.text_content)||"",onChange:e=>j(m,"text_content",e.target.value),placeholder:"Enter text in ".concat(null===N||void 0===N?void 0:N.name,"..."),rows:3,dir:(null===N||void 0===N?void 0:N.direction)||"ltr",className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500"})]}),(0,Da.jsxs)("div",{className:"flex items-center gap-3",children:[(0,Da.jsxs)("button",{type:"button",onClick:()=>(async e=>{var t;const r=null===(t=u.content[e])||void 0===t?void 0:t.text_content;if(r)try{var n;g(!0);const t=await fA(l,r);null!==(n=t.data)&&void 0!==n&&n.audio_url&&(y(t.data.audio_url),j(e,"generated_audio",t.data),j(e,"audio_source","generated"),nr.success("Audio generated! Click play to preview."))}catch(a){nr.error("Failed to generate audio")}finally{g(!1)}else nr.error("Please enter text first")})(m),disabled:f||!(null!==(n=u.content[m])&&void 0!==n&&n.text_content),className:"flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50",children:[f?(0,Da.jsx)(ki,{className:"w-4 h-4 animate-spin"}):(0,Da.jsx)(Rs,{className:"w-4 h-4"}),"Generate Audio"]}),x&&(0,Da.jsxs)(Da.Fragment,{children:[(0,Da.jsxs)("button",{type:"button",onClick:()=>{x&&v.current&&(v.current.src=x,v.current.play())},className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:[(0,Da.jsx)(xs,{className:"w-4 h-4"}),"Preview"]}),(0,Da.jsxs)("button",{type:"button",onClick:()=>(async e=>{var t;const r=null===(t=u.content[e])||void 0===t?void 0:t.generated_audio;if(r)try{var n;const t=await yA(l,{name:"segment_".concat(u.segment_key,"_").concat(e),audio_data:r.audio_data,format:r.format||"mp3"});null!==(n=t.data)&&void 0!==n&&n.id&&(j(e,"audio_id",t.data.id),nr.success("Audio saved to library"))}catch(a){nr.error("Failed to save audio")}else nr.error("Generate audio first")})(m),className:"flex items-center gap-2 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700",children:[(0,Da.jsx)(yi,{className:"w-4 h-4"}),"Save to Library"]})]}),(null===(s=u.content[m])||void 0===s?void 0:s.audio_id)&&(0,Da.jsxs)("span",{className:"text-sm text-green-600 flex items-center gap-1",children:[(0,Da.jsx)(Vs,{className:"w-4 h-4"}),"Audio saved"]})]})]})})]}),(0,Da.jsxs)("label",{className:"flex items-center gap-2",children:[(0,Da.jsx)("input",{type:"checkbox",checked:u.is_global,onChange:e=>b("is_global",e.target.checked),className:"rounded text-blue-600"}),(0,Da.jsx)("span",{className:"text-sm text-gray-700",children:"Make global (available to all agents)"})]})]}),(0,Da.jsxs)("div",{className:"flex justify-end gap-3 p-4 border-t bg-gray-50",children:[(0,Da.jsx)("button",{type:"button",onClick:d,className:"px-4 py-2 text-gray-700 bg-white border rounded-lg hover:bg-gray-50",children:"Cancel"}),(0,Da.jsx)("button",{onClick:w,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:i?"Update":"Create"})]}),(0,Da.jsx)("audio",{ref:v})]})})},pD=()=>{const{agentId:e}=re(),[t,r]=(ee(),(0,a.useState)([])),[n,s]=(0,a.useState)([]),[i,o]=(0,a.useState)([]),[l,c]=(0,a.useState)(!0),[d,u]=(0,a.useState)(""),[p,m]=(0,a.useState)(""),[h,f]=(0,a.useState)(null),[g,x]=(0,a.useState)(!1),[y,v]=(0,a.useState)(null),[b,j]=(0,a.useState)(null),w=(0,a.useRef)(null);(0,a.useEffect)(()=>{N()},[e]);const N=async()=>{try{c(!0);const[t,n,a]=await Promise.all([UC(e),RC(),FC(e)]);r(t.data||[]),s(n.data||[]),o(a.data||[])}catch(t){console.error("Failed to load segments:",t),nr.error("Failed to load segments")}finally{c(!1)}},k=()=>{v(null),x(!0)},S=t=>{if(b===t){var r;null===(r=w.current)||void 0===r||r.pause(),j(null)}else{const r=bA(e,t);w.current&&(w.current.src=r,w.current.play(),j(t))}},_=t.filter(e=>{var t;const r=!d||e.segment_key.toLowerCase().includes(d.toLowerCase())||(null===(t=e.description)||void 0===t?void 0:t.toLowerCase().includes(d.toLowerCase())),n=!p||e.segment_type===p;return r&&n});return l?(0,Da.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,Da.jsx)(ki,{className:"w-8 h-8 animate-spin text-blue-600"})}):(0,Da.jsxs)("div",{className:"p-6",children:[(0,Da.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,Da.jsxs)("div",{children:[(0,Da.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Audio Segments"}),(0,Da.jsx)("p",{className:"text-gray-600 mt-1",children:"Manage reusable audio segments for templates"})]}),(0,Da.jsxs)("button",{onClick:k,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:[(0,Da.jsx)(Qa,{className:"w-4 h-4"}),"Add Segment"]})]}),(0,Da.jsxs)("div",{className:"flex gap-4 mb-6",children:[(0,Da.jsxs)("div",{className:"flex-1 relative",children:[(0,Da.jsx)(ui,{className:"w-5 h-5 absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),(0,Da.jsx)("input",{type:"text",placeholder:"Search segments...",value:d,onChange:e=>u(e.target.value),className:"w-full pl-10 pr-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500"})]}),(0,Da.jsxs)("select",{value:p,onChange:e=>m(e.target.value),className:"px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500",children:[(0,Da.jsx)("option",{value:"",children:"All Types"}),jA.map(e=>(0,Da.jsx)("option",{value:e.value,children:e.label},e.value))]}),(0,Da.jsx)("button",{onClick:N,className:"p-2 text-gray-600 hover:bg-gray-100 rounded-lg",title:"Refresh",children:(0,Da.jsx)(vi,{className:"w-5 h-5"})})]}),(0,Da.jsxs)("div",{className:"flex gap-2 mb-4 flex-wrap",children:[(0,Da.jsx)("span",{className:"text-sm text-gray-600",children:"Languages:"}),i.map(e=>(0,Da.jsxs)("span",{className:"text-xs px-2 py-1 rounded ".concat(e.is_default?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-700"),children:[e.native_name||e.name,e.is_default&&" (Default)"]},e.code))]}),0===_.length?(0,Da.jsxs)("div",{className:"text-center py-12 bg-gray-50 rounded-lg",children:[(0,Da.jsx)(cD,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),(0,Da.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Segments Yet"}),(0,Da.jsx)("p",{className:"text-gray-600 mb-4",children:"Create reusable audio segments for your templates"}),(0,Da.jsx)("button",{onClick:k,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Create First Segment"})]}):(0,Da.jsx)("div",{className:"space-y-3",children:_.map(t=>(0,Da.jsx)(dD,{segment:t,languages:i,expanded:h===t.id,onToggle:()=>f(h===t.id?null:t.id),onEdit:()=>(e=>{v(e),x(!0)})(t),onDelete:()=>(async t=>{if(window.confirm("Are you sure you want to delete this segment?"))try{await WC(e,t),nr.success("Segment deleted"),N()}catch(r){nr.error("Failed to delete segment")}})(t.id),onPlayAudio:S,playingAudio:b,agentId:e},t.id))}),(0,Da.jsx)("audio",{ref:w,onEnded:()=>j(null),onError:()=>j(null)}),g&&(0,Da.jsx)(uD,{segment:y,languages:i,agentId:e,onSave:async t=>{try{y?(await qC(e,y.id,t),nr.success("Segment updated")):(await zC(e,t),nr.success("Segment created")),x(!1),N()}catch(a){var r,n;nr.error((null===(r=a.response)||void 0===r||null===(n=r.data)||void 0===n?void 0:n.error)||"Failed to save segment")}},onClose:()=>x(!1)})]})},mD=Ha("Variable",[["path",{d:"M8 21s-4-3-4-9 4-9 4-9",key:"uto9ud"}],["path",{d:"M16 3s4 3 4 9-4 9-4 9",key:"4w2vsq"}],["line",{x1:"15",x2:"9",y1:"9",y2:"15",key:"f7djnv"}],["line",{x1:"9",x2:"15",y1:"9",y2:"15",key:"1shsy8"}]]),hD=e=>{let{template:t,expanded:r,onToggle:n,onEdit:a,onDuplicate:s,onDelete:i,previewData:o,onPreviewDataChange:l,onPreview:c}=e,d=t.template_structure;if("string"===typeof d)try{d=JSON.parse(d)}catch(We){d={parts:[]}}let u=t.required_variables;if("string"===typeof u)try{u=JSON.parse(u)}catch(We){u=[]}const p=(d.parts||[]).filter(e=>"segment"===e.type).length,m=(u||[]).length;return(0,Da.jsxs)("div",{className:"border rounded-lg bg-white overflow-hidden",children:[(0,Da.jsxs)("div",{className:"flex items-center justify-between p-4 cursor-pointer hover:bg-gray-50",onClick:n,children:[(0,Da.jsxs)("div",{className:"flex items-center gap-4",children:[(0,Da.jsx)("div",{className:"w-10 h-10 bg-purple-50 rounded-lg flex items-center justify-center",children:(0,Da.jsx)(cs,{className:"w-5 h-5 text-purple-600"})}),(0,Da.jsxs)("div",{children:[(0,Da.jsx)("h3",{className:"font-medium text-gray-900",children:t.template_name}),(0,Da.jsxs)("p",{className:"text-sm text-gray-500",children:[t.template_key,t.description&&" \u2022 ".concat(t.description)]})]})]}),(0,Da.jsxs)("div",{className:"flex items-center gap-3",children:[(0,Da.jsxs)("div",{className:"flex gap-2",children:[(0,Da.jsxs)("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-blue-50 text-blue-700 text-xs rounded",children:[(0,Da.jsx)(ls,{className:"w-3 h-3"}),p," segments"]}),(0,Da.jsxs)("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-green-50 text-green-700 text-xs rounded",children:[(0,Da.jsx)(mD,{className:"w-3 h-3"}),m," variables"]})]}),(0,Da.jsxs)("div",{className:"flex items-center gap-1",children:[(0,Da.jsx)("button",{onClick:e=>{e.stopPropagation(),a()},className:"p-2 text-gray-500 hover:bg-gray-100 rounded",title:"Edit",children:(0,Da.jsx)(ts,{className:"w-4 h-4"})}),(0,Da.jsx)("button",{onClick:e=>{e.stopPropagation(),s()},className:"p-2 text-gray-500 hover:bg-gray-100 rounded",title:"Duplicate",children:(0,Da.jsx)(Gs,{className:"w-4 h-4"})}),(0,Da.jsx)("button",{onClick:e=>{e.stopPropagation(),i()},className:"p-2 text-red-500 hover:bg-red-50 rounded",title:"Delete",children:(0,Da.jsx)(ns,{className:"w-4 h-4"})})]}),r?(0,Da.jsx)(Us,{className:"w-5 h-5 text-gray-400"}):(0,Da.jsx)(zs,{className:"w-5 h-5 text-gray-400"})]})]}),r&&(0,Da.jsxs)("div",{className:"border-t p-4 bg-gray-50",children:[(0,Da.jsxs)("div",{className:"mb-4",children:[(0,Da.jsx)("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Structure"}),(0,Da.jsx)("div",{className:"flex flex-wrap gap-2",children:(d.parts||[]).map((e,t)=>(0,Da.jsxs)("span",{className:"px-2 py-1 rounded text-sm ".concat("segment"===e.type?"bg-blue-100 text-blue-800":"variable"===e.type?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"),children:["segment"===e.type&&"[".concat(e.segment_key,"]"),"variable"===e.type&&"{{".concat(e.name,"}}"),"text"===e.type&&'"'.concat(e.text,'"')]},t))})]}),m>0&&(0,Da.jsxs)("div",{className:"mb-4",children:[(0,Da.jsx)("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Test Variables"}),(0,Da.jsx)("div",{className:"grid grid-cols-3 gap-3",children:(u||[]).map(e=>(0,Da.jsxs)("div",{children:[(0,Da.jsx)("label",{className:"block text-xs text-gray-600 mb-1",children:e}),(0,Da.jsx)("input",{type:"text",value:o[e]||"",onChange:t=>l({[e]:t.target.value}),placeholder:"Sample ".concat(e),className:"w-full px-2 py-1 text-sm border rounded"})]},e))})]}),(0,Da.jsxs)("div",{className:"flex items-center gap-3",children:[(0,Da.jsxs)("button",{onClick:c,className:"flex items-center gap-2 px-3 py-1.5 bg-blue-600 text-white rounded hover:bg-blue-700",children:[(0,Da.jsx)(Hi,{className:"w-4 h-4"}),"Preview"]}),o._rendered&&(0,Da.jsx)("div",{className:"flex-1 p-2 bg-white border rounded",children:(0,Da.jsx)("p",{className:"text-sm text-gray-700",children:o._rendered})})]})]})]})},fD=()=>{const{agentId:e}=re(),t=ee(),[r,n]=(0,a.useState)([]),[s,i]=(0,a.useState)(!0),[o,l]=(0,a.useState)(""),[c,d]=(0,a.useState)(null),[u,p]=(0,a.useState)({});(0,a.useEffect)(()=>{m()},[e]);const m=async()=>{try{i(!0);const t=await VC(e);n(t.data||[])}catch(t){console.error("Failed to load templates:",t),nr.error("Failed to load templates")}finally{i(!1)}},h=()=>{t("/agents/".concat(e,"/ivr/templates/new"))},f=r.filter(e=>!o||e.template_name.toLowerCase().includes(o.toLowerCase())||e.template_key.toLowerCase().includes(o.toLowerCase()));return s?(0,Da.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,Da.jsx)(ki,{className:"w-8 h-8 animate-spin text-blue-600"})}):(0,Da.jsxs)("div",{className:"p-6",children:[(0,Da.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,Da.jsxs)("div",{children:[(0,Da.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Audio Templates"}),(0,Da.jsx)("p",{className:"text-gray-600 mt-1",children:"Create dynamic templates with segments and variables"})]}),(0,Da.jsxs)("button",{onClick:h,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:[(0,Da.jsx)(Qa,{className:"w-4 h-4"}),"Create Template"]})]}),(0,Da.jsxs)("div",{className:"flex gap-4 mb-6",children:[(0,Da.jsxs)("div",{className:"flex-1 relative",children:[(0,Da.jsx)(ui,{className:"w-5 h-5 absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),(0,Da.jsx)("input",{type:"text",placeholder:"Search templates...",value:o,onChange:e=>l(e.target.value),className:"w-full pl-10 pr-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500"})]}),(0,Da.jsx)("button",{onClick:m,className:"p-2 text-gray-600 hover:bg-gray-100 rounded-lg",title:"Refresh",children:(0,Da.jsx)(vi,{className:"w-5 h-5"})})]}),0===f.length?(0,Da.jsxs)("div",{className:"text-center py-12 bg-gray-50 rounded-lg",children:[(0,Da.jsx)(cs,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),(0,Da.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Templates Yet"}),(0,Da.jsx)("p",{className:"text-gray-600 mb-4",children:"Create templates to combine segments with dynamic variables"}),(0,Da.jsx)("button",{onClick:h,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Create First Template"})]}):(0,Da.jsx)("div",{className:"space-y-3",children:f.map(r=>(0,Da.jsx)(hD,{template:r,expanded:c===r.id,onToggle:()=>d(c===r.id?null:r.id),onEdit:()=>{return n=r.id,void t("/agents/".concat(e,"/ivr/templates/").concat(n));var n},onDuplicate:()=>(async t=>{try{await JC(e,t),nr.success("Template duplicated"),m()}catch(r){nr.error("Failed to duplicate template")}})(r.id),onDelete:()=>(async t=>{if(window.confirm("Delete this template?"))try{await YC(e,t),nr.success("Template deleted"),m()}catch(r){nr.error("Failed to delete template")}})(r.id),previewData:u[r.id]||{},onPreviewDataChange:e=>p(t=>qe(qe({},t),{},{[r.id]:qe(qe({},t[r.id]),e)})),onPreview:()=>(async t=>{try{const r=await XC(e,t,u[t]||{},"en");p(e=>{var n;return qe(qe({},e),{},{[t]:qe(qe({},e[t]),{},{_rendered:null===(n=r.data)||void 0===n?void 0:n.rendered_text})})})}catch(r){nr.error("Failed to preview template")}})(r.id)},r.id))})]})},gD=Ha("Type",[["polyline",{points:"4 7 4 4 20 4 20 7",key:"1nosan"}],["line",{x1:"9",x2:"15",y1:"20",y2:"20",key:"swin9y"}],["line",{x1:"12",x2:"12",y1:"4",y2:"20",key:"1tx1rr"}]]),xD=e=>{let{part:t,index:r,segments:n,onChange:a,onRemove:s}=e;const i={segment:(0,Da.jsx)(ls,{className:"w-4 h-4 text-blue-600"}),variable:(0,Da.jsx)(mD,{className:"w-4 h-4 text-green-600"}),text:(0,Da.jsx)(gD,{className:"w-4 h-4 text-purple-600"})};return(0,Da.jsxs)("div",{className:"flex-1 flex items-center gap-3 p-2 rounded border ".concat({segment:"border-blue-200 bg-blue-50",variable:"border-green-200 bg-green-50",text:"border-purple-200 bg-purple-50"}[t.type]),children:[i[t.type],"segment"===t.type&&(0,Da.jsxs)("select",{value:t.segment_key||"",onChange:e=>a({segment_key:e.target.value}),className:"flex-1 px-2 py-1 text-sm border rounded bg-white",children:[(0,Da.jsx)("option",{value:"",children:"Select segment..."}),n.map(e=>(0,Da.jsxs)("option",{value:e.segment_key,children:[e.segment_key," (",e.segment_type,")"]},e.segment_key))]}),"variable"===t.type&&(0,Da.jsx)("input",{type:"text",value:t.name||"",onChange:e=>a({name:e.target.value.replace(/[^a-z0-9_]/gi,"_")}),placeholder:"variable_name",className:"flex-1 px-2 py-1 text-sm border rounded bg-white"}),"text"===t.type&&(0,Da.jsx)("input",{type:"text",value:t.text||"",onChange:e=>a({text:e.target.value}),placeholder:"Static text...",className:"flex-1 px-2 py-1 text-sm border rounded bg-white"}),(0,Da.jsx)("button",{onClick:s,className:"p-1 text-red-500 hover:bg-red-50 rounded",children:(0,Da.jsx)(ns,{className:"w-4 h-4"})})]})},yD=()=>{var e;const{agentId:t,templateId:r}=re(),[n]=Re(),s=ee(),[i,o]=(0,a.useState)({template_name:"",template_key:"",description:"",template_structure:{parts:[]},is_global:!1}),[l,c]=(0,a.useState)([]),[d,u]=(0,a.useState)([]),[p,m]=(0,a.useState)(!0),[h,f]=(0,a.useState)(!1),[g,x]=(0,a.useState)("en"),[y,v]=(0,a.useState)({}),[b,j]=(0,a.useState)(""),[w,N]=(0,a.useState)(!1),k=!r||"new"===r;(0,a.useEffect)(()=>{S()},[t,r]);const S=async()=>{try{var e;m(!0);const[n,a]=await Promise.all([UC(t),FC(t)]);if(c(n.data||[]),u(a.data||[]),(null===(e=a.data)||void 0===e?void 0:e.length)>0){const e=a.data.find(e=>e.is_default);x((null===e||void 0===e?void 0:e.code)||a.data[0].code)}if(!k){const e=await GC(t,r);e.data&&o(e.data)}}catch(n){console.error("Failed to load data:",n),nr.error("Failed to load data")}finally{m(!1)}},_=(e,t)=>{o(r=>qe(qe({},r),{},{[e]:t})),"template_name"===e&&k&&o(e=>qe(qe({},e),{},{template_key:SA(t)}))},C=e=>{const t="segment"===e?{type:"segment",segment_key:""}:"variable"===e?{type:"variable",name:""}:{type:"text",text:""};o(e=>qe(qe({},e),{},{template_structure:qe(qe({},e.template_structure),{},{parts:[...e.template_structure.parts||[],t]})})),N(!1)},A=(i.template_structure.parts||[]).filter(e=>"variable"===e.type).map(e=>e.name).filter(Boolean);return p?(0,Da.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,Da.jsx)(ki,{className:"w-8 h-8 animate-spin text-blue-600"})}):(0,Da.jsxs)("div",{className:"p-6 max-w-4xl mx-auto",children:[(0,Da.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,Da.jsxs)("div",{className:"flex items-center gap-4",children:[(0,Da.jsx)("button",{onClick:()=>s("/agents/".concat(t,"/ivr/templates")),className:"p-2 hover:bg-gray-100 rounded-lg",children:(0,Da.jsx)(fi,{className:"w-5 h-5"})}),(0,Da.jsxs)("div",{children:[(0,Da.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:k?"Create Template":"Edit Template"}),(0,Da.jsx)("p",{className:"text-gray-600",children:"Build dynamic audio templates using segments and variables"})]})]}),(0,Da.jsxs)("button",{onClick:async()=>{var e,n;if(!i.template_name.trim())return void nr.error("Template name is required");if(!i.template_key.trim())return void nr.error("Template key is required");if(null===(e=i.template_structure.parts)||void 0===e||!e.length)return void nr.error("Template must have at least one part");const a=await $C(t,i.template_structure);var o,l;if(null!==(n=a.data)&&void 0!==n&&n.valid)try{f(!0),k?(await HC(t,i),nr.success("Template created")):(await KC(t,r,i),nr.success("Template updated")),s("/agents/".concat(t,"/ivr/templates"))}catch(u){var c,d;nr.error((null===(c=u.response)||void 0===c||null===(d=c.data)||void 0===d?void 0:d.error)||"Failed to save template")}finally{f(!1)}else nr.error((null===(o=a.data)||void 0===o||null===(l=o.errors)||void 0===l?void 0:l[0])||"Invalid template structure")},disabled:h,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50",children:[h?(0,Da.jsx)(ki,{className:"w-4 h-4 animate-spin"}):(0,Da.jsx)(is,{className:"w-4 h-4"}),"Save Template"]})]}),(0,Da.jsxs)("div",{className:"bg-white rounded-lg border p-6 mb-6",children:[(0,Da.jsx)("h2",{className:"text-lg font-medium mb-4",children:"Template Information"}),(0,Da.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,Da.jsxs)("div",{children:[(0,Da.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Template Name *"}),(0,Da.jsx)("input",{type:"text",value:i.template_name,onChange:e=>_("template_name",e.target.value),placeholder:"Confirm Invoice Number",className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500"})]}),(0,Da.jsxs)("div",{children:[(0,Da.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Template Key *"}),(0,Da.jsx)("input",{type:"text",value:i.template_key,onChange:e=>_("template_key",e.target.value.toLowerCase().replace(/[^a-z0-9_]/g,"_")),placeholder:"confirm_invoice",className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500",disabled:!k})]})]}),(0,Da.jsxs)("div",{className:"mt-4",children:[(0,Da.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),(0,Da.jsx)("input",{type:"text",value:i.description||"",onChange:e=>_("description",e.target.value),placeholder:"Template for confirming invoice number with customer",className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500"})]})]}),(0,Da.jsxs)("div",{className:"bg-white rounded-lg border p-6 mb-6",children:[(0,Da.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,Da.jsx)("h2",{className:"text-lg font-medium",children:"Template Structure"}),(0,Da.jsxs)("div",{className:"relative",children:[(0,Da.jsxs)("button",{onClick:()=>N(!w),className:"flex items-center gap-2 px-3 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:[(0,Da.jsx)(Qa,{className:"w-4 h-4"}),"Add Part"]}),w&&(0,Da.jsxs)("div",{className:"absolute right-0 mt-2 w-48 bg-white border rounded-lg shadow-lg z-10",children:[(0,Da.jsxs)("button",{onClick:()=>C("segment"),className:"w-full flex items-center gap-2 px-4 py-2 hover:bg-gray-50 text-left",children:[(0,Da.jsx)(ls,{className:"w-4 h-4 text-blue-600"}),"Segment"]}),(0,Da.jsxs)("button",{onClick:()=>C("variable"),className:"w-full flex items-center gap-2 px-4 py-2 hover:bg-gray-50 text-left",children:[(0,Da.jsx)(mD,{className:"w-4 h-4 text-green-600"}),"Variable"]}),(0,Da.jsxs)("button",{onClick:()=>C("text"),className:"w-full flex items-center gap-2 px-4 py-2 hover:bg-gray-50 text-left",children:[(0,Da.jsx)(gD,{className:"w-4 h-4 text-purple-600"}),"Static Text"]})]})]})]}),0===(null===(e=i.template_structure.parts)||void 0===e?void 0:e.length)?(0,Da.jsxs)("div",{className:"text-center py-8 bg-gray-50 rounded-lg border-2 border-dashed",children:[(0,Da.jsx)(ls,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),(0,Da.jsx)("p",{className:"text-gray-600 mb-4",children:"No parts added yet. Start building your template by adding segments and variables."})]}):(0,Da.jsx)(yM,{onDragEnd:e=>{if(!e.destination)return;const t=[...i.template_structure.parts],[r]=t.splice(e.source.index,1);t.splice(e.destination.index,0,r),o(e=>qe(qe({},e),{},{template_structure:qe(qe({},e.template_structure),{},{parts:t})}))},children:(0,Da.jsx)(nD,{droppableId:"parts",children:e=>(0,Da.jsxs)("div",qe(qe({ref:e.innerRef},e.droppableProps),{},{className:"space-y-3",children:[i.template_structure.parts.map((e,t)=>(0,Da.jsx)(ZM,{draggableId:"part-".concat(t),index:t,children:(r,n)=>(0,Da.jsxs)("div",qe(qe({ref:r.innerRef},r.draggableProps),{},{className:"flex items-center gap-3 p-3 border rounded-lg ".concat(n.isDragging?"shadow-lg bg-white":"bg-gray-50"),children:[(0,Da.jsx)("div",qe(qe({},r.dragHandleProps),{},{className:"cursor-grab",children:(0,Da.jsx)($A,{className:"w-4 h-4 text-gray-400"})})),(0,Da.jsx)(xD,{part:e,index:t,segments:l,onChange:e=>((e,t)=>{o(r=>qe(qe({},r),{},{template_structure:qe(qe({},r.template_structure),{},{parts:r.template_structure.parts.map((r,n)=>n===e?qe(qe({},r),t):r)})}))})(t,e),onRemove:()=>(e=>{o(t=>qe(qe({},t),{},{template_structure:qe(qe({},t.template_structure),{},{parts:t.template_structure.parts.filter((t,r)=>r!==e)})}))})(t)})]}))},t)),e.placeholder]}))})}),A.length>0&&(0,Da.jsx)("div",{className:"mt-4 p-3 bg-blue-50 rounded-lg",children:(0,Da.jsxs)("p",{className:"text-sm text-blue-800",children:[(0,Da.jsx)("strong",{children:"Required Variables:"})," ",A.join(", ")]})})]}),(0,Da.jsxs)("div",{className:"bg-white rounded-lg border p-6",children:[(0,Da.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,Da.jsx)("h2",{className:"text-lg font-medium",children:"Preview"}),(0,Da.jsxs)("div",{className:"flex items-center gap-3",children:[(0,Da.jsx)("select",{value:g,onChange:e=>x(e.target.value),className:"px-3 py-1.5 border rounded-lg text-sm",children:d.map(e=>(0,Da.jsx)("option",{value:e.code,children:e.name},e.code))}),(0,Da.jsxs)("button",{onClick:async()=>{try{var e;const n=await XC(t,r,y,g);null!==(e=n.data)&&void 0!==e&&e.rendered_text&&j(n.data.rendered_text)}catch(n){const e=(i.template_structure.parts||[]).map(e=>{if("segment"===e.type){var t,r;const n=l.find(t=>t.segment_key===e.segment_key);return(null===n||void 0===n||null===(t=n.content)||void 0===t||null===(r=t[g])||void 0===r?void 0:r.text_content)||"[".concat(e.segment_key,"]")}return"variable"===e.type?y[e.name]||"{{".concat(e.name,"}}"):e.text||""});j(e.join(" "))}},className:"flex items-center gap-2 px-3 py-1.5 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200",children:[(0,Da.jsx)(Hi,{className:"w-4 h-4"}),"Preview"]})]})]}),A.length>0&&(0,Da.jsx)("div",{className:"mb-4 grid grid-cols-3 gap-3",children:A.map(e=>(0,Da.jsxs)("div",{children:[(0,Da.jsx)("label",{className:"block text-xs text-gray-600 mb-1",children:e}),(0,Da.jsx)("input",{type:"text",value:y[e]||"",onChange:t=>v(r=>qe(qe({},r),{},{[e]:t.target.value})),placeholder:"Sample ".concat(e),className:"w-full px-2 py-1 text-sm border rounded"})]},e))}),(0,Da.jsx)("div",{className:"p-4 bg-gray-50 rounded-lg",children:b?(0,Da.jsx)("p",{className:"text-gray-800",children:b}):(0,Da.jsx)("p",{className:"text-gray-400 italic",children:'Click "Preview" to see rendered template'})})]})]})},vD=Ha("Languages",[["path",{d:"m5 8 6 6",key:"1wu5hv"}],["path",{d:"m4 14 6-6 2-3",key:"1k1g8d"}],["path",{d:"M2 5h12",key:"or177f"}],["path",{d:"M7 2h1",key:"1t2jsx"}],["path",{d:"m22 22-5-10-5 10",key:"don7ne"}],["path",{d:"M14 18h6",key:"1m8k6r"}]]),bD=[{code:"en",name:"English",native:"English",region:"Global",flag:"\ud83c\uddfa\ud83c\uddf8"},{code:"ur",name:"Urdu",native:"\u0627\u0631\u062f\u0648",region:"Pakistan",flag:"\ud83c\uddf5\ud83c\uddf0",direction:"rtl"},{code:"ur-roman",name:"Roman Urdu",native:"Roman Urdu",region:"Pakistan",flag:"\ud83c\uddf5\ud83c\uddf0"},{code:"pa",name:"Punjabi",native:"\u0a2a\u0a70\u0a1c\u0a3e\u0a2c\u0a40 / \u067e\u0646\u062c\u0627\u0628\u06cc",region:"Pakistan/India",flag:"\ud83c\uddf5\ud83c\uddf0"},{code:"sd",name:"Sindhi",native:"\u0633\u0646\u068c\u064a",region:"Pakistan",flag:"\ud83c\uddf5\ud83c\uddf0",direction:"rtl"},{code:"ps",name:"Pashto",native:"\u067e\u069a\u062a\u0648",region:"Pakistan/Afghanistan",flag:"\ud83c\udde6\ud83c\uddeb",direction:"rtl"},{code:"bal",name:"Balochi",native:"\u0628\u0644\u0648\u0686\u06cc",region:"Pakistan",flag:"\ud83c\uddf5\ud83c\uddf0",direction:"rtl"},{code:"ar",name:"Arabic",native:"\u0627\u0644\u0639\u0631\u0628\u064a\u0629",region:"Middle East",flag:"\ud83c\uddf8\ud83c\udde6",direction:"rtl"},{code:"ar-eg",name:"Arabic (Egyptian)",native:"\u0627\u0644\u0639\u0631\u0628\u064a\u0629 \u0627\u0644\u0645\u0635\u0631\u064a\u0629",region:"Egypt",flag:"\ud83c\uddea\ud83c\uddec",direction:"rtl"},{code:"ar-sa",name:"Arabic (Saudi)",native:"\u0627\u0644\u0639\u0631\u0628\u064a\u0629 \u0627\u0644\u0633\u0639\u0648\u062f\u064a\u0629",region:"Saudi Arabia",flag:"\ud83c\uddf8\ud83c\udde6",direction:"rtl"},{code:"hi",name:"Hindi",native:"\u0939\u093f\u0902\u0926\u0940",region:"India",flag:"\ud83c\uddee\ud83c\uddf3"},{code:"bn",name:"Bengali",native:"\u09ac\u09be\u0982\u09b2\u09be",region:"India/Bangladesh",flag:"\ud83c\udde7\ud83c\udde9"},{code:"ta",name:"Tamil",native:"\u0ba4\u0bae\u0bbf\u0bb4\u0bcd",region:"India",flag:"\ud83c\uddee\ud83c\uddf3"},{code:"te",name:"Telugu",native:"\u0c24\u0c46\u0c32\u0c41\u0c17\u0c41",region:"India",flag:"\ud83c\uddee\ud83c\uddf3"},{code:"es",name:"Spanish",native:"Espa\xf1ol",region:"Global",flag:"\ud83c\uddea\ud83c\uddf8"},{code:"fr",name:"French",native:"Fran\xe7ais",region:"Global",flag:"\ud83c\uddeb\ud83c\uddf7"},{code:"de",name:"German",native:"Deutsch",region:"Europe",flag:"\ud83c\udde9\ud83c\uddea"},{code:"zh",name:"Chinese",native:"\u4e2d\u6587",region:"China",flag:"\ud83c\udde8\ud83c\uddf3"}],jD=[{id:"uplift",name:"Uplift",description:"Best for Urdu/Punjabi - ~$0.0008/sec"},{id:"azure",name:"Azure",description:"Microsoft neural voices - ~$0.016/1000 chars"},{id:"openai",name:"OpenAI",description:"Same as Realtime API - ~$0.015/1000 chars"}],wD={en:[{id:"en-US-JennyNeural",name:"Jenny (US Female)",provider:"azure"},{id:"en-US-GuyNeural",name:"Guy (US Male)",provider:"azure"},{id:"en-GB-SoniaNeural",name:"Sonia (UK Female)",provider:"azure"},{id:"en-GB-RyanNeural",name:"Ryan (UK Male)",provider:"azure"},{id:"nova",name:"Nova (Female)",provider:"openai"},{id:"alloy",name:"Alloy (Neutral)",provider:"openai"},{id:"echo",name:"Echo (Male)",provider:"openai"},{id:"shimmer",name:"Shimmer (Female)",provider:"openai"}],ur:[{id:"v_8eelc901",name:"Ayesha (Female - Professional)",provider:"uplift"},{id:"v_meklc281",name:"Fatima (Female - Natural)",provider:"uplift"},{id:"v_kl3mc456",name:"Ahmed (Male - Professional)",provider:"uplift"},{id:"ur-PK-UzmaNeural",name:"Uzma (Female)",provider:"azure"},{id:"ur-PK-AsadNeural",name:"Asad (Male)",provider:"azure"}],"ur-roman":[{id:"v_8eelc901",name:"Ayesha (Female)",provider:"uplift"},{id:"v_meklc281",name:"Fatima (Female)",provider:"uplift"},{id:"ur-PK-UzmaNeural",name:"Uzma (Female)",provider:"azure"},{id:"ur-PK-AsadNeural",name:"Asad (Male)",provider:"azure"}],hi:[{id:"hi-IN-SwaraNeural",name:"Swara (Female)",provider:"azure"},{id:"hi-IN-MadhurNeural",name:"Madhur (Male)",provider:"azure"}],ar:[{id:"ar-SA-ZariyahNeural",name:"Zariyah (Female)",provider:"azure"},{id:"ar-SA-HamedNeural",name:"Hamed (Male)",provider:"azure"}],"ar-eg":[{id:"ar-EG-SalmaNeural",name:"Salma (Female)",provider:"azure"},{id:"ar-EG-ShakirNeural",name:"Shakir (Male)",provider:"azure"}],"ar-sa":[{id:"ar-SA-ZariyahNeural",name:"Zariyah (Female)",provider:"azure"},{id:"ar-SA-HamedNeural",name:"Hamed (Male)",provider:"azure"}],es:[{id:"es-ES-ElviraNeural",name:"Elvira (Female)",provider:"azure"},{id:"es-ES-AlvaroNeural",name:"Alvaro (Male)",provider:"azure"},{id:"es-MX-DaliaNeural",name:"Dalia (Mexico Female)",provider:"azure"}],fr:[{id:"fr-FR-DeniseNeural",name:"Denise (Female)",provider:"azure"},{id:"fr-FR-HenriNeural",name:"Henri (Male)",provider:"azure"}],de:[{id:"de-DE-KatjaNeural",name:"Katja (Female)",provider:"azure"},{id:"de-DE-ConradNeural",name:"Conrad (Male)",provider:"azure"}],zh:[{id:"zh-CN-XiaoxiaoNeural",name:"Xiaoxiao (Female)",provider:"azure"},{id:"zh-CN-YunxiNeural",name:"Yunxi (Male)",provider:"azure"}],pa:[{id:"pa-IN-VaaniNeural",name:"Vaani (Female)",provider:"azure"}],bn:[{id:"bn-IN-TanishaaNeural",name:"Tanishaa (Female)",provider:"azure"},{id:"bn-IN-BashkarNeural",name:"Bashkar (Male)",provider:"azure"}],ta:[{id:"ta-IN-PallaviNeural",name:"Pallavi (Female)",provider:"azure"},{id:"ta-IN-ValluvarNeural",name:"Valluvar (Male)",provider:"azure"}],te:[{id:"te-IN-ShrutiNeural",name:"Shruti (Female)",provider:"azure"},{id:"te-IN-MohanNeural",name:"Mohan (Male)",provider:"azure"}],ps:[{id:"ps-AF-GulNawazNeural",name:"Gul Nawaz (Male)",provider:"azure"},{id:"ps-AF-LatifaNeural",name:"Latifa (Female)",provider:"azure"}]},ND=e=>{const t=wD[e];return t&&t.length>0?{voice:t[0].id,provider:t[0].provider}:{voice:"en-US-JennyNeural",provider:"azure"}},kD=()=>{var e,t,r,n,s,i,o,l;const{agentId:c}=re(),[d,u]=(0,a.useState)({}),[p,m]=(0,a.useState)([]),[h,f]=(0,a.useState)(!0),[g,x]=(0,a.useState)(!1),[y,v]=(0,a.useState)("languages"),[b,j]=(0,a.useState)("Hello, how can I help you today?"),[w,N]=(0,a.useState)("en"),[k,S]=(0,a.useState)(!1),[_,C]=(0,a.useState)(null);(0,a.useEffect)(()=>{A()},[c]);const A=async()=>{try{f(!0);const[e,t]=await Promise.all([FC(c),BC(c).catch(()=>({data:[]}))]),r=e.data||[],n={};for(const s of r)n[s.language_code]={enabled:!0,is_default:s.is_default||!1,tts_provider:s.tts_provider||ND(s.language_code).provider,tts_voice:s.tts_voice_id||s.tts_voice||ND(s.language_code).voice};u(n),m(t.data||[]);const a=r.find(e=>e.is_default);a?N(a.language_code):r.length>0&&N(r[0].language_code)}catch(e){console.error("Failed to load language settings:",e),nr.error("Failed to load settings")}finally{f(!1)}},O=Object.keys(d).filter(e=>{var t;return null===(t=d[e])||void 0===t?void 0:t.enabled}),P=(O.find(e=>{var t;return null===(t=d[e])||void 0===t?void 0:t.is_default}),bD.reduce((e,t)=>{const r=t.region.split("/")[0];return e[r]||(e[r]=[]),e[r].push(t),e},{}));return h?(0,Da.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,Da.jsx)(ki,{className:"w-8 h-8 animate-spin text-blue-600"})}):(0,Da.jsxs)("div",{className:"p-6",children:[(0,Da.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,Da.jsxs)("div",{children:[(0,Da.jsxs)("h1",{className:"text-2xl font-bold text-gray-900 flex items-center gap-2",children:[(0,Da.jsx)(ds,{className:"w-6 h-6"}),"Language Settings"]}),(0,Da.jsx)("p",{className:"text-gray-600 mt-1",children:"Configure supported languages, TTS voices, and view translation coverage"})]}),(0,Da.jsxs)("button",{onClick:async()=>{const e=Object.keys(d).filter(e=>{var t;return null===(t=d[e])||void 0===t?void 0:t.enabled});if(0===e.length)return void nr.error("Select at least one language");if(e.some(e=>{var t;return null===(t=d[e])||void 0===t?void 0:t.is_default}))try{x(!0);const t=e.map(e=>({language_code:e,is_default:d[e].is_default||!1,tts_provider:d[e].tts_provider,tts_voice:d[e].tts_voice}));await LC(c,t),nr.success("Language settings saved"),A()}catch(t){console.error("Save error:",t),nr.error("Failed to save settings")}finally{x(!1)}else nr.error("Select a default language")},disabled:g,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50",children:[g?(0,Da.jsx)(ki,{className:"w-4 h-4 animate-spin"}):(0,Da.jsx)(Vs,{className:"w-4 h-4"}),"Save Changes"]})]}),(0,Da.jsx)("div",{className:"border-b mb-6",children:(0,Da.jsx)("div",{className:"flex gap-6",children:[{id:"languages",label:"Languages",icon:vD},{id:"voices",label:"TTS Voices",icon:Rs},{id:"coverage",label:"Coverage",icon:$s}].map(e=>(0,Da.jsxs)("button",{onClick:()=>v(e.id),className:"flex items-center gap-2 py-3 px-1 border-b-2 font-medium ".concat(y===e.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"),children:[(0,Da.jsx)(e.icon,{className:"w-4 h-4"}),e.label]},e.id))})}),"languages"===y&&(0,Da.jsx)("div",{className:"space-y-6",children:Object.entries(P).map(e=>{let[t,r]=e;return(0,Da.jsxs)("div",{className:"bg-white rounded-lg border",children:[(0,Da.jsx)("div",{className:"px-4 py-3 border-b bg-gray-50",children:(0,Da.jsx)("h3",{className:"font-medium text-gray-900",children:t})}),(0,Da.jsx)("div",{className:"divide-y",children:r.map(e=>{const t=d[e.code],r=null===t||void 0===t?void 0:t.enabled,n=null===t||void 0===t?void 0:t.is_default;return(0,Da.jsxs)("div",{className:"flex items-center justify-between px-4 py-3 ".concat(r?"bg-blue-50":""),children:[(0,Da.jsxs)("div",{className:"flex items-center gap-3",children:[(0,Da.jsx)("span",{className:"text-xl",children:e.flag}),(0,Da.jsxs)("div",{children:[(0,Da.jsxs)("div",{className:"font-medium text-gray-900",children:[e.name,n&&(0,Da.jsx)("span",{className:"ml-2 px-2 py-0.5 text-xs bg-blue-600 text-white rounded-full",children:"Default"})]}),(0,Da.jsxs)("div",{className:"text-sm text-gray-500",children:[e.native,"rtl"===e.direction&&(0,Da.jsx)("span",{className:"ml-2 text-xs text-gray-400",children:"(RTL)"})]})]})]}),(0,Da.jsxs)("div",{className:"flex items-center gap-3",children:[r&&!n&&(0,Da.jsx)("button",{onClick:()=>(e=>{var t;null!==(t=d[e])&&void 0!==t&&t.enabled?u(t=>{const r=qe({},t);for(const e in r)r[e]=qe(qe({},r[e]),{},{is_default:!1});return r[e]=qe(qe({},r[e]),{},{is_default:!0}),r}):nr.error("Enable language first")})(e.code),className:"text-sm text-blue-600 hover:text-blue-700",children:"Set as Default"}),(0,Da.jsx)("button",{onClick:()=>{return t=e.code,void u(e=>{const r=e[t];if(null!==r&&void 0!==r&&r.enabled){if(r.is_default)return nr.error("Cannot disable default language"),e;const{[t]:n}=e;return qa(e,[t].map(Be))}{const r=ND(t);return qe(qe({},e),{},{[t]:{enabled:!0,is_default:!1,tts_provider:r.provider,tts_voice:r.voice}})}});var t},className:"w-12 h-6 rounded-full transition-colors ".concat(r?"bg-blue-600":"bg-gray-300"),children:(0,Da.jsx)("div",{className:"w-5 h-5 bg-white rounded-full shadow transition-transform ".concat(r?"translate-x-6":"translate-x-0.5")})})]})]},e.code)})})]},t)})}),"voices"===y&&(0,Da.jsxs)("div",{className:"space-y-6",children:[(0,Da.jsxs)("div",{className:"bg-white rounded-lg border",children:[(0,Da.jsxs)("div",{className:"px-4 py-3 border-b bg-gray-50",children:[(0,Da.jsx)("h3",{className:"font-medium text-gray-900",children:"Voice Configuration"}),(0,Da.jsx)("p",{className:"text-sm text-gray-500",children:"Select TTS provider and voice for each enabled language"})]}),(0,Da.jsx)("div",{className:"divide-y",children:0===O.length?(0,Da.jsxs)("div",{className:"p-8 text-center text-gray-500",children:[(0,Da.jsx)(vD,{className:"w-12 h-12 mx-auto mb-3 text-gray-300"}),(0,Da.jsx)("p",{children:"No languages enabled yet."}),(0,Da.jsx)("p",{className:"text-sm",children:"Go to the Languages tab to enable languages."})]}):O.map(e=>{var t;const r=bD.find(t=>t.code===e),n=d[e],a=wD[e]||[],s=(null===n||void 0===n?void 0:n.tts_provider)||"azure",i=a.filter(e=>e.provider===s),o=a.find(e=>e.id===(null===n||void 0===n?void 0:n.tts_voice)),l=[...new Set(a.map(e=>e.provider))];return(0,Da.jsxs)("div",{className:"px-4 py-4",children:[(0,Da.jsx)("div",{className:"flex items-center justify-between mb-3",children:(0,Da.jsxs)("div",{className:"flex items-center gap-3",children:[(0,Da.jsx)("span",{className:"text-xl",children:null===r||void 0===r?void 0:r.flag}),(0,Da.jsxs)("div",{children:[(0,Da.jsxs)("div",{className:"font-medium text-gray-900",children:[null===r||void 0===r?void 0:r.name,(null===n||void 0===n?void 0:n.is_default)&&(0,Da.jsx)("span",{className:"ml-2 px-2 py-0.5 text-xs bg-blue-600 text-white rounded-full",children:"Default"})]}),(0,Da.jsx)("div",{className:"text-sm text-gray-500",children:o?(0,Da.jsxs)("span",{className:"text-green-600 flex items-center gap-1",children:[(0,Da.jsx)(Vs,{className:"w-3 h-3"}),o.name]}):(0,Da.jsxs)("span",{className:"text-amber-600 flex items-center gap-1",children:[(0,Da.jsx)(gi,{className:"w-3 h-3"}),"No voice selected"]})})]})]})}),(0,Da.jsxs)("div",{className:"flex items-start gap-4 ml-9",children:[(0,Da.jsxs)("div",{className:"flex-1",children:[(0,Da.jsx)("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Provider"}),(0,Da.jsx)("select",{value:s,onChange:t=>((e,t)=>{var r;const n=(null===(r=wD[e])||void 0===r?void 0:r.filter(e=>e.provider===t))||[],a=n[0];u(r=>qe(qe({},r),{},{[e]:qe(qe({},r[e]),{},{tts_provider:t,tts_voice:(null===a||void 0===a?void 0:a.id)||null})}))})(e,t.target.value),className:"w-full px-3 py-2 border rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:jD.filter(e=>l.includes(e.id)).map(e=>(0,Da.jsx)("option",{value:e.id,children:e.name},e.id))}),(0,Da.jsx)("p",{className:"text-xs text-gray-400 mt-1",children:null===(t=jD.find(e=>e.id===s))||void 0===t?void 0:t.description})]}),(0,Da.jsxs)("div",{className:"flex-1",children:[(0,Da.jsx)("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Voice"}),(0,Da.jsxs)("select",{value:(null===n||void 0===n?void 0:n.tts_voice)||"",onChange:t=>((e,t)=>{var r;const n=null===(r=wD[e])||void 0===r?void 0:r.find(e=>e.id===t);n&&u(t=>qe(qe({},t),{},{[e]:qe(qe({},t[e]),{},{tts_provider:n.provider,tts_voice:n.id})}))})(e,t.target.value),className:"w-full px-3 py-2 border rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[(0,Da.jsx)("option",{value:"",children:"Select voice..."}),i.map(e=>(0,Da.jsx)("option",{value:e.id,children:e.name},e.id))]}),0===i.length&&(0,Da.jsx)("p",{className:"text-xs text-amber-500 mt-1",children:"No voices available for this provider"})]})]})]},e)})})]}),(0,Da.jsxs)("div",{className:"bg-white rounded-lg border",children:[(0,Da.jsxs)("div",{className:"px-4 py-3 border-b bg-gray-50",children:[(0,Da.jsx)("h3",{className:"font-medium text-gray-900",children:"Test TTS"}),(0,Da.jsx)("p",{className:"text-sm text-gray-500",children:"Preview voice output for each language"})]}),(0,Da.jsxs)("div",{className:"p-4 space-y-4",children:[(0,Da.jsxs)("div",{className:"flex gap-3",children:[(0,Da.jsx)("select",{value:w,onChange:e=>N(e.target.value),className:"px-3 py-2 border rounded-lg",children:O.map(e=>{const t=bD.find(t=>t.code===e);return(0,Da.jsxs)("option",{value:e,children:[null===t||void 0===t?void 0:t.flag," ",null===t||void 0===t?void 0:t.name]},e)})}),(0,Da.jsx)("input",{type:"text",value:b,onChange:e=>j(e.target.value),placeholder:"Enter text to test...",className:"flex-1 px-3 py-2 border rounded-lg",dir:(null===(e=bD.find(e=>e.code===w))||void 0===e?void 0:e.direction)||"ltr"}),(0,Da.jsxs)("button",{onClick:async()=>{if(!b.trim())return void nr.error("Enter test text");const e=d[w];if(e)try{var t,r;S(!0);const n=await fA(c,{text:b,language:w,voice:e.tts_voice,provider:e.tts_provider});if(null!==(t=n.data)&&void 0!==t&&t.audio_url||null!==(r=n.data)&&void 0!==r&&r.stream_url){const e=n.data.audio_url||bA(c,n.data.id),t=new Audio(e);C(w),t.onended=()=>C(null),t.play()}else nr.error("No audio generated")}catch(n){console.error("TTS test error:",n),nr.error("TTS test failed")}finally{S(!1)}else nr.error("Language not configured")},disabled:k||!(null!==(t=d[w])&&void 0!==t&&t.tts_voice),className:"flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50",children:[k?(0,Da.jsx)(ki,{className:"w-4 h-4 animate-spin"}):_===w?(0,Da.jsx)(DC,{className:"w-4 h-4"}):(0,Da.jsx)(xs,{className:"w-4 h-4"}),"Test"]})]}),!(null!==(r=d[w])&&void 0!==r&&r.tts_voice)&&(0,Da.jsxs)("p",{className:"text-sm text-amber-600 flex items-center gap-1",children:[(0,Da.jsx)(gi,{className:"w-4 h-4"}),"Select a voice for ",null===(n=bD.find(e=>e.code===w))||void 0===n?void 0:n.name," first"]}),(null===(s=d[w])||void 0===s?void 0:s.tts_voice)&&(0,Da.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:[(0,Da.jsx)(ls,{className:"w-4 h-4"}),"Testing with: ",null===(i=jD.find(e=>{var t;return e.id===(null===(t=d[w])||void 0===t?void 0:t.tts_provider)}))||void 0===i?void 0:i.name," /",null===(o=wD[w])||void 0===o||null===(l=o.find(e=>{var t;return e.id===(null===(t=d[w])||void 0===t?void 0:t.tts_voice)}))||void 0===l?void 0:l.name]}),(0,Da.jsxs)("div",{className:"text-sm text-gray-500 border-t pt-3",children:[(0,Da.jsx)("p",{className:"font-medium mb-2",children:"Sample texts:"}),(0,Da.jsxs)("ul",{className:"space-y-1",children:[(0,Da.jsx)("li",{children:'\ud83c\uddfa\ud83c\uddf8 English: "Hello, how can I help you today?"'}),(0,Da.jsx)("li",{children:'\ud83c\uddf5\ud83c\uddf0 Urdu: "\u0627\u0644\u0633\u0644\u0627\u0645 \u0639\u0644\u06cc\u06a9\u0645! \u0622\u067e \u06a9\u06cc \u06a9\u06cc\u0627 \u0645\u062f\u062f \u06a9\u0631 \u0633\u06a9\u062a\u06cc \u06c1\u0648\u06ba\u061f"'}),(0,Da.jsx)("li",{children:'\ud83c\uddf5\ud83c\uddf0 Roman Urdu: "Assalam o alaikum! Aap ki kya madad kar sakti hoon?"'}),(0,Da.jsx)("li",{children:'\ud83c\uddee\ud83c\uddf3 Hindi: "\u0928\u092e\u0938\u094d\u0924\u0947! \u092e\u0948\u0902 \u0906\u092a\u0915\u0940 \u0915\u0948\u0938\u0947 \u092e\u0926\u0926 \u0915\u0930 \u0938\u0915\u0924\u0940 \u0939\u0942\u0902?"'}),(0,Da.jsx)("li",{children:'\ud83c\uddf8\ud83c\udde6 Arabic: "\u0645\u0631\u062d\u0628\u0627\u064b! \u0643\u064a\u0641 \u064a\u0645\u0643\u0646\u0646\u064a \u0645\u0633\u0627\u0639\u062f\u062a\u0643\u061f"'})]})]})]})]})]}),"coverage"===y&&(0,Da.jsxs)("div",{className:"space-y-6",children:[(0,Da.jsxs)("div",{className:"bg-white rounded-lg border",children:[(0,Da.jsxs)("div",{className:"px-4 py-3 border-b bg-gray-50",children:[(0,Da.jsx)("h3",{className:"font-medium text-gray-900",children:"Translation Coverage"}),(0,Da.jsx)("p",{className:"text-sm text-gray-500",children:"Percentage of content translated per language"})]}),(0,Da.jsx)("div",{className:"p-4",children:p&&0!==p.length?(0,Da.jsx)("div",{className:"space-y-4",children:(p.languages||p).map(e=>{const t=bD.find(t=>t.code===e.language_code),r=e.coverage_percent||0;return(0,Da.jsxs)("div",{className:"space-y-2",children:[(0,Da.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Da.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Da.jsx)("span",{children:(null===t||void 0===t?void 0:t.flag)||"\ud83c\udf10"}),(0,Da.jsx)("span",{className:"font-medium",children:e.language_name||(null===t||void 0===t?void 0:t.name)})]}),(0,Da.jsxs)("div",{className:"text-sm text-gray-500",children:[e.translated_count||0,"/",e.total_count||0," items",e.segments_with_audio>0&&(0,Da.jsxs)("span",{className:"ml-2 text-green-600",children:["(",e.segments_with_audio," with audio)"]})]})]}),(0,Da.jsxs)("div",{className:"relative h-4 bg-gray-100 rounded-full overflow-hidden",children:[(0,Da.jsx)("div",{className:"absolute left-0 top-0 h-full rounded-full transition-all ".concat(r>=80?"bg-green-500":r>=50?"bg-yellow-500":"bg-red-500"),style:{width:"".concat(r,"%")}}),(0,Da.jsxs)("span",{className:"absolute inset-0 flex items-center justify-center text-xs font-medium",children:[r.toFixed(0),"%"]})]})]},e.language_code)})}):(0,Da.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,Da.jsx)($s,{className:"w-12 h-12 mx-auto mb-3 text-gray-300"}),(0,Da.jsx)("p",{children:"No coverage data available."}),(0,Da.jsx)("p",{className:"text-sm",children:"Add content with translations to see coverage stats."})]})})]}),(0,Da.jsxs)("div",{className:"bg-white rounded-lg border p-4",children:[(0,Da.jsx)("h3",{className:"font-medium text-gray-900 mb-3",children:"Quick Actions"}),(0,Da.jsxs)("div",{className:"flex flex-wrap gap-3",children:[(0,Da.jsx)("button",{className:"px-4 py-2 bg-blue-100 text-blue-700 rounded-lg hover:bg-blue-200",children:"Auto-translate Missing"}),(0,Da.jsx)("button",{className:"px-4 py-2 bg-green-100 text-green-700 rounded-lg hover:bg-green-200",children:"Generate Missing Audio"}),(0,Da.jsx)("button",{className:"px-4 py-2 bg-purple-100 text-purple-700 rounded-lg hover:bg-purple-200",children:"Export Translations"}),(0,Da.jsx)("button",{className:"px-4 py-2 bg-orange-100 text-orange-700 rounded-lg hover:bg-orange-200",children:"Import Translations"})]})]})]})]})},SD=(0,Da.jsxs)(Da.Fragment,{children:[(0,Da.jsx)(ve,{path:"agents/:agentId/ivr/flows",element:(0,Da.jsx)(XA,{})}),(0,Da.jsx)(ve,{path:"agents/:agentId/ivr/flows/new",element:(0,Da.jsx)(lD,{})}),(0,Da.jsx)(ve,{path:"agents/:agentId/ivr/flows/:flowId",element:(0,Da.jsx)(lD,{})}),(0,Da.jsx)(ve,{path:"agents/:agentId/ivr/segments",element:(0,Da.jsx)(pD,{})}),(0,Da.jsx)(ve,{path:"agents/:agentId/ivr/templates",element:(0,Da.jsx)(fD,{})}),(0,Da.jsx)(ve,{path:"agents/:agentId/ivr/templates/new",element:(0,Da.jsx)(yD,{})}),(0,Da.jsx)(ve,{path:"agents/:agentId/ivr/templates/:templateId",element:(0,Da.jsx)(yD,{})}),(0,Da.jsx)(ve,{path:"agents/:agentId/ivr/languages",element:(0,Da.jsx)(kD,{})})]}),_D=e=>{let{children:t}=e;const{user:r,loading:n}=Fa(),a=Q();return n?(0,Da.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,Da.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):r?t:(0,Da.jsx)(xe,{to:"/login",replace:!0,state:{from:a}})};const CD=function(){return(0,Da.jsx)(La,{children:(0,Da.jsxs)(Pe,{basename:"/aiva",children:[(0,Da.jsxs)(je,{children:[(0,Da.jsx)(ve,{path:"/login",element:(0,Da.jsx)(Ua,{})}),(0,Da.jsx)(ve,{path:"/chat/:agentId",element:(0,Da.jsx)(uo,{})}),(0,Da.jsxs)(ve,{path:"/",element:(0,Da.jsx)(_D,{children:(0,Da.jsx)(di,{})}),children:[(0,Da.jsx)(ve,{index:!0,element:(0,Da.jsx)($a,{})}),(0,Da.jsx)(ve,{path:"monitor",element:(0,Da.jsx)(Ms,{})}),(0,Da.jsx)(ve,{path:"analytics/dashboard",element:(0,Da.jsx)(gC,{})}),(0,Da.jsx)(ve,{path:"analytics/calls",element:(0,Da.jsx)(xC,{})}),(0,Da.jsx)(ve,{path:"analytics/chats",element:(0,Da.jsx)(yC,{})}),(0,Da.jsx)(ve,{path:"analytics/advanced",element:(0,Da.jsx)(vC,{})}),(0,Da.jsx)(ve,{path:"analytics/costs",element:(0,Da.jsx)(jC,{})}),(0,Da.jsx)(ve,{path:"analytics/satisfaction",element:(0,Da.jsx)(kC,{})}),(0,Da.jsx)(ve,{path:"tenants",element:(0,Da.jsx)(OC,{})}),(0,Da.jsx)(ve,{path:"settings/api",element:(0,Da.jsx)(IC,{})}),(0,Da.jsx)(ve,{path:"agents",element:(0,Da.jsx)(as,{})}),(0,Da.jsx)(ve,{path:"agents/test",element:(0,Da.jsx)(Fs,{})}),(0,Da.jsx)(ve,{path:"agents/new",element:(0,Da.jsx)(_s,{})}),(0,Da.jsx)(ve,{path:"agents/:id",element:(0,Da.jsx)(_s,{})}),(0,Da.jsx)(ve,{path:"agents/:id/chat-integration",element:(0,Da.jsx)(so,{})}),(0,Da.jsx)(ve,{path:"/agents/:id/conversation-strategy",element:(0,Da.jsx)(eo,{})}),(0,Da.jsx)(ve,{path:"credits",element:(0,Da.jsx)(As,{})}),(0,Da.jsx)(ve,{path:"calls",element:(0,Da.jsx)(Os,{})}),(0,Da.jsx)(ve,{path:"/test",element:(0,Da.jsx)(Fs,{})}),(0,Da.jsx)(ve,{path:"agent-test",element:(0,Da.jsx)(Ys,{})}),(0,Da.jsx)(ve,{path:"/agents/:id/ivr",element:(0,Da.jsx)(VA,{})}),SD,(0,Da.jsx)(ve,{path:"knowledge",element:(0,Da.jsx)(hi,{})}),(0,Da.jsx)(ve,{path:"knowledge/new",element:(0,Da.jsx)(xi,{})}),(0,Da.jsx)(ve,{path:"knowledge/:id/edit",element:(0,Da.jsx)(xi,{})}),(0,Da.jsx)(ve,{path:"knowledge/:id/documents",element:(0,Da.jsx)(Ai,{})}),(0,Da.jsx)(ve,{path:"knowledge/:id/search",element:(0,Da.jsx)(Oi,{})}),(0,Da.jsx)(ve,{path:"knowledge/:id/stats",element:(0,Da.jsx)(Pi,{})}),(0,Da.jsx)(ve,{path:"knowledge/:id/chat",element:(0,Da.jsx)(Ei,{})}),(0,Da.jsx)(ve,{path:"settings/system",element:(0,Da.jsx)(jo,{})}),(0,Da.jsx)(ve,{path:"settings/notifications",element:(0,Da.jsx)(wo,{})}),(0,Da.jsx)(ve,{path:"help",element:(0,Da.jsx)(ho,{})}),(0,Da.jsx)(ve,{path:"help/:articleId",element:(0,Da.jsx)(go,{})}),(0,Da.jsx)(ve,{path:"shopify",element:(0,Da.jsx)(Ui,{})}),(0,Da.jsx)(ve,{path:"shopify/connect",element:(0,Da.jsx)(zi,{})}),(0,Da.jsx)(ve,{path:"shopify/stores/:storeId",element:(0,Da.jsx)($i,{})}),(0,Da.jsx)(ve,{path:"shopify/products",element:(0,Da.jsx)(Xi,{})}),(0,Da.jsx)(ve,{path:"/shopify/products/:id",element:(0,Da.jsx)(Zi,{})}),(0,Da.jsx)(ve,{path:"users",element:(0,Da.jsx)(ao,{})})]})]}),(0,Da.jsx)(rr,{position:"top-right"})]})})};i.createRoot(document.getElementById("root")).render((0,Da.jsx)(a.StrictMode,{children:(0,Da.jsx)(CD,{})}))})()})();
//# sourceMappingURL=main.8969d0c7.js.map