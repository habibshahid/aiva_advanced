/*! For license information please see main.703de60d.js.LICENSE.txt */
(()=>{"use strict";var e={43:(e,t,r)=>{e.exports=r(202)},153:(e,t,r)=>{var a=r(43),s=Symbol.for("react.element"),n=Symbol.for("react.fragment"),l=Object.prototype.hasOwnProperty,i=a.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,r){var a,n={},c=null,d=null;for(a in void 0!==r&&(c=""+r),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(d=t.ref),t)l.call(t,a)&&!o.hasOwnProperty(a)&&(n[a]=t[a]);if(e&&e.defaultProps)for(a in t=e.defaultProps)void 0===n[a]&&(n[a]=t[a]);return{$$typeof:s,type:e,key:c,ref:d,props:n,_owner:i.current}}t.Fragment=n,t.jsx=c,t.jsxs=c},202:(e,t)=>{var r=Symbol.for("react.element"),a=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),i=Symbol.for("react.provider"),o=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),p=Symbol.iterator;var h={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},x=Object.assign,f={};function g(e,t,r){this.props=e,this.context=t,this.refs=f,this.updater=r||h}function y(){}function v(e,t,r){this.props=e,this.context=t,this.refs=f,this.updater=r||h}g.prototype.isReactComponent={},g.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},g.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=g.prototype;var b=v.prototype=new y;b.constructor=v,x(b,g.prototype),b.isPureReactComponent=!0;var j=Array.isArray,w=Object.prototype.hasOwnProperty,N={current:null},k={key:!0,ref:!0,__self:!0,__source:!0};function _(e,t,a){var s,n={},l=null,i=null;if(null!=t)for(s in void 0!==t.ref&&(i=t.ref),void 0!==t.key&&(l=""+t.key),t)w.call(t,s)&&!k.hasOwnProperty(s)&&(n[s]=t[s]);var o=arguments.length-2;if(1===o)n.children=a;else if(1<o){for(var c=Array(o),d=0;d<o;d++)c[d]=arguments[d+2];n.children=c}if(e&&e.defaultProps)for(s in o=e.defaultProps)void 0===n[s]&&(n[s]=o[s]);return{$$typeof:r,type:e,key:l,ref:i,props:n,_owner:N.current}}function S(e){return"object"===typeof e&&null!==e&&e.$$typeof===r}var C=/\/+/g;function E(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function P(e,t,s,n,l){var i=typeof e;"undefined"!==i&&"boolean"!==i||(e=null);var o=!1;if(null===e)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case r:case a:o=!0}}if(o)return l=l(o=e),e=""===n?"."+E(o,0):n,j(l)?(s="",null!=e&&(s=e.replace(C,"$&/")+"/"),P(l,t,s,"",function(e){return e})):null!=l&&(S(l)&&(l=function(e,t){return{$$typeof:r,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(l,s+(!l.key||o&&o.key===l.key?"":(""+l.key).replace(C,"$&/")+"/")+e)),t.push(l)),1;if(o=0,n=""===n?".":n+":",j(e))for(var c=0;c<e.length;c++){var d=n+E(i=e[c],c);o+=P(i,t,s,d,l)}else if(d=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=p&&e[p]||e["@@iterator"])?e:null}(e),"function"===typeof d)for(e=d.call(e),c=0;!(i=e.next()).done;)o+=P(i=i.value,t,s,d=n+E(i,c++),l);else if("object"===i)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function T(e,t,r){if(null==e)return e;var a=[],s=0;return P(e,a,"","",function(e){return t.call(r,e,s++)}),a}function A(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var O={current:null},M={transition:null},R={ReactCurrentDispatcher:O,ReactCurrentBatchConfig:M,ReactCurrentOwner:N};function F(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:T,forEach:function(e,t,r){T(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return T(e,function(){t++}),t},toArray:function(e){return T(e,function(e){return e})||[]},only:function(e){if(!S(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=g,t.Fragment=s,t.Profiler=l,t.PureComponent=v,t.StrictMode=n,t.Suspense=d,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=R,t.act=F,t.cloneElement=function(e,t,a){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var s=x({},e.props),n=e.key,l=e.ref,i=e._owner;if(null!=t){if(void 0!==t.ref&&(l=t.ref,i=N.current),void 0!==t.key&&(n=""+t.key),e.type&&e.type.defaultProps)var o=e.type.defaultProps;for(c in t)w.call(t,c)&&!k.hasOwnProperty(c)&&(s[c]=void 0===t[c]&&void 0!==o?o[c]:t[c])}var c=arguments.length-2;if(1===c)s.children=a;else if(1<c){o=Array(c);for(var d=0;d<c;d++)o[d]=arguments[d+2];s.children=o}return{$$typeof:r,type:e.type,key:n,ref:l,props:s,_owner:i}},t.createContext=function(e){return(e={$$typeof:o,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:i,_context:e},e.Consumer=e},t.createElement=_,t.createFactory=function(e){var t=_.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=S,t.lazy=function(e){return{$$typeof:m,_payload:{_status:-1,_result:e},_init:A}},t.memo=function(e,t){return{$$typeof:u,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=M.transition;M.transition={};try{e()}finally{M.transition=t}},t.unstable_act=F,t.useCallback=function(e,t){return O.current.useCallback(e,t)},t.useContext=function(e){return O.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return O.current.useDeferredValue(e)},t.useEffect=function(e,t){return O.current.useEffect(e,t)},t.useId=function(){return O.current.useId()},t.useImperativeHandle=function(e,t,r){return O.current.useImperativeHandle(e,t,r)},t.useInsertionEffect=function(e,t){return O.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return O.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return O.current.useMemo(e,t)},t.useReducer=function(e,t,r){return O.current.useReducer(e,t,r)},t.useRef=function(e){return O.current.useRef(e)},t.useState=function(e){return O.current.useState(e)},t.useSyncExternalStore=function(e,t,r){return O.current.useSyncExternalStore(e,t,r)},t.useTransition=function(){return O.current.useTransition()},t.version="18.3.1"},234:(e,t)=>{function r(e,t){var r=e.length;e.push(t);e:for(;0<r;){var a=r-1>>>1,s=e[a];if(!(0<n(s,t)))break e;e[a]=t,e[r]=s,r=a}}function a(e){return 0===e.length?null:e[0]}function s(e){if(0===e.length)return null;var t=e[0],r=e.pop();if(r!==t){e[0]=r;e:for(var a=0,s=e.length,l=s>>>1;a<l;){var i=2*(a+1)-1,o=e[i],c=i+1,d=e[c];if(0>n(o,r))c<s&&0>n(d,o)?(e[a]=d,e[c]=r,a=c):(e[a]=o,e[i]=r,a=i);else{if(!(c<s&&0>n(d,r)))break e;e[a]=d,e[c]=r,a=c}}}return t}function n(e,t){var r=e.sortIndex-t.sortIndex;return 0!==r?r:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var l=performance;t.unstable_now=function(){return l.now()}}else{var i=Date,o=i.now();t.unstable_now=function(){return i.now()-o}}var c=[],d=[],u=1,m=null,p=3,h=!1,x=!1,f=!1,g="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,v="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=a(d);null!==t;){if(null===t.callback)s(d);else{if(!(t.startTime<=e))break;s(d),t.sortIndex=t.expirationTime,r(c,t)}t=a(d)}}function j(e){if(f=!1,b(e),!x)if(null!==a(c))x=!0,M(w);else{var t=a(d);null!==t&&R(j,t.startTime-e)}}function w(e,r){x=!1,f&&(f=!1,y(S),S=-1),h=!0;var n=p;try{for(b(r),m=a(c);null!==m&&(!(m.expirationTime>r)||e&&!P());){var l=m.callback;if("function"===typeof l){m.callback=null,p=m.priorityLevel;var i=l(m.expirationTime<=r);r=t.unstable_now(),"function"===typeof i?m.callback=i:m===a(c)&&s(c),b(r)}else s(c);m=a(c)}if(null!==m)var o=!0;else{var u=a(d);null!==u&&R(j,u.startTime-r),o=!1}return o}finally{m=null,p=n,h=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var N,k=!1,_=null,S=-1,C=5,E=-1;function P(){return!(t.unstable_now()-E<C)}function T(){if(null!==_){var e=t.unstable_now();E=e;var r=!0;try{r=_(!0,e)}finally{r?N():(k=!1,_=null)}}else k=!1}if("function"===typeof v)N=function(){v(T)};else if("undefined"!==typeof MessageChannel){var A=new MessageChannel,O=A.port2;A.port1.onmessage=T,N=function(){O.postMessage(null)}}else N=function(){g(T,0)};function M(e){_=e,k||(k=!0,N())}function R(e,r){S=g(function(){e(t.unstable_now())},r)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){x||h||(x=!0,M(w))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return a(c)},t.unstable_next=function(e){switch(p){case 1:case 2:case 3:var t=3;break;default:t=p}var r=p;p=t;try{return e()}finally{p=r}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var r=p;p=e;try{return t()}finally{p=r}},t.unstable_scheduleCallback=function(e,s,n){var l=t.unstable_now();switch("object"===typeof n&&null!==n?n="number"===typeof(n=n.delay)&&0<n?l+n:l:n=l,e){case 1:var i=-1;break;case 2:i=250;break;case 5:i=1073741823;break;case 4:i=1e4;break;default:i=5e3}return e={id:u++,callback:s,priorityLevel:e,startTime:n,expirationTime:i=n+i,sortIndex:-1},n>l?(e.sortIndex=n,r(d,e),null===a(c)&&e===a(d)&&(f?(y(S),S=-1):f=!0,R(j,n-l))):(e.sortIndex=i,r(c,e),x||h||(x=!0,M(w))),e},t.unstable_shouldYield=P,t.unstable_wrapCallback=function(e){var t=p;return function(){var r=p;p=t;try{return e.apply(this,arguments)}finally{p=r}}}},391:(e,t,r)=>{var a=r(950);t.createRoot=a.createRoot,t.hydrateRoot=a.hydrateRoot},579:(e,t,r)=>{e.exports=r(153)},730:(e,t,r)=>{var a=r(43),s=r(853);function n(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var l=new Set,i={};function o(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(i[e]=t,e=0;e<t.length;e++)l.add(t[e])}var d=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),u=Object.prototype.hasOwnProperty,m=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},h={};function x(e,t,r,a,s,n,l){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=a,this.attributeNamespace=s,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=n,this.removeEmptyString=l}var f={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){f[e]=new x(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];f[t]=new x(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){f[e]=new x(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){f[e]=new x(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){f[e]=new x(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){f[e]=new x(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){f[e]=new x(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){f[e]=new x(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){f[e]=new x(e,5,!1,e.toLowerCase(),null,!1,!1)});var g=/[\-:]([a-z])/g;function y(e){return e[1].toUpperCase()}function v(e,t,r,a){var s=f.hasOwnProperty(t)?f[t]:null;(null!==s?0!==s.type:a||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,r,a){if(null===t||"undefined"===typeof t||function(e,t,r,a){if(null!==r&&0===r.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!a&&(null!==r?!r.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,r,a))return!0;if(a)return!1;if(null!==r)switch(r.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,r,s,a)&&(r=null),a||null===s?function(e){return!!u.call(h,e)||!u.call(p,e)&&(m.test(e)?h[e]=!0:(p[e]=!0,!1))}(t)&&(null===r?e.removeAttribute(t):e.setAttribute(t,""+r)):s.mustUseProperty?e[s.propertyName]=null===r?3!==s.type&&"":r:(t=s.attributeName,a=s.attributeNamespace,null===r?e.removeAttribute(t):(r=3===(s=s.type)||4===s&&!0===r?"":""+r,a?e.setAttributeNS(a,t,r):e.setAttribute(t,r))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(g,y);f[t]=new x(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(g,y);f[t]=new x(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(g,y);f[t]=new x(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){f[e]=new x(e,1,!1,e.toLowerCase(),null,!1,!1)}),f.xlinkHref=new x("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){f[e]=new x(e,1,!1,e.toLowerCase(),null,!0,!0)});var b=a.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,j=Symbol.for("react.element"),w=Symbol.for("react.portal"),N=Symbol.for("react.fragment"),k=Symbol.for("react.strict_mode"),_=Symbol.for("react.profiler"),S=Symbol.for("react.provider"),C=Symbol.for("react.context"),E=Symbol.for("react.forward_ref"),P=Symbol.for("react.suspense"),T=Symbol.for("react.suspense_list"),A=Symbol.for("react.memo"),O=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var M=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var R=Symbol.iterator;function F(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=R&&e[R]||e["@@iterator"])?e:null}var L,D=Object.assign;function I(e){if(void 0===L)try{throw Error()}catch(Ge){var t=Ge.stack.trim().match(/\n( *(at )?)/);L=t&&t[1]||""}return"\n"+L+e}var z=!1;function U(e,t){if(!e||z)return"";z=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch($e){var a=$e}Reflect.construct(e,[],t)}else{try{t.call()}catch($e){a=$e}e.call(t.prototype)}else{try{throw Error()}catch($e){a=$e}e()}}catch($e){if($e&&a&&"string"===typeof $e.stack){for(var s=$e.stack.split("\n"),n=a.stack.split("\n"),l=s.length-1,i=n.length-1;1<=l&&0<=i&&s[l]!==n[i];)i--;for(;1<=l&&0<=i;l--,i--)if(s[l]!==n[i]){if(1!==l||1!==i)do{if(l--,0>--i||s[l]!==n[i]){var o="\n"+s[l].replace(" at new "," at ");return e.displayName&&o.includes("<anonymous>")&&(o=o.replace("<anonymous>",e.displayName)),o}}while(1<=l&&0<=i);break}}}finally{z=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?I(e):""}function B(e){switch(e.tag){case 5:return I(e.type);case 16:return I("Lazy");case 13:return I("Suspense");case 19:return I("SuspenseList");case 0:case 2:case 15:return e=U(e.type,!1);case 11:return e=U(e.type.render,!1);case 1:return e=U(e.type,!0);default:return""}}function q(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case N:return"Fragment";case w:return"Portal";case _:return"Profiler";case k:return"StrictMode";case P:return"Suspense";case T:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case C:return(e.displayName||"Context")+".Consumer";case S:return(e._context.displayName||"Context")+".Provider";case E:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case A:return null!==(t=e.displayName||null)?t:q(e.type)||"Memo";case O:t=e._payload,e=e._init;try{return q(e(t))}catch(Ge){}}return null}function H(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return q(t);case 8:return t===k?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function V(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function W(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function $(e){e._valueTracker||(e._valueTracker=function(e){var t=W(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),a=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof r&&"function"===typeof r.get&&"function"===typeof r.set){var s=r.get,n=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(e){a=""+e,n.call(this,e)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return a},setValue:function(e){a=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function K(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),a="";return e&&(a=W(e)?e.checked?"true":"false":e.value),(e=a)!==r&&(t.setValue(e),!0)}function Q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function J(e,t){var r=t.checked;return D({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=r?r:e._wrapperState.initialChecked})}function G(e,t){var r=null==t.defaultValue?"":t.defaultValue,a=null!=t.checked?t.checked:t.defaultChecked;r=V(null!=t.value?t.value:r),e._wrapperState={initialChecked:a,initialValue:r,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Y(e,t){null!=(t=t.checked)&&v(e,"checked",t,!1)}function X(e,t){Y(e,t);var r=V(t.value),a=t.type;if(null!=r)"number"===a?(0===r&&""===e.value||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if("submit"===a||"reset"===a)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,r):t.hasOwnProperty("defaultValue")&&ee(e,t.type,V(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var a=t.type;if(!("submit"!==a&&"reset"!==a||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}""!==(r=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==r&&(e.name=r)}function ee(e,t,r){"number"===t&&Q(e.ownerDocument)===e||(null==r?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var te=Array.isArray;function re(e,t,r,a){if(e=e.options,t){t={};for(var s=0;s<r.length;s++)t["$"+r[s]]=!0;for(r=0;r<e.length;r++)s=t.hasOwnProperty("$"+e[r].value),e[r].selected!==s&&(e[r].selected=s),s&&a&&(e[r].defaultSelected=!0)}else{for(r=""+V(r),t=null,s=0;s<e.length;s++){if(e[s].value===r)return e[s].selected=!0,void(a&&(e[s].defaultSelected=!0));null!==t||e[s].disabled||(t=e[s])}null!==t&&(t.selected=!0)}}function ae(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(n(91));return D({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function se(e,t){var r=t.value;if(null==r){if(r=t.children,t=t.defaultValue,null!=r){if(null!=t)throw Error(n(92));if(te(r)){if(1<r.length)throw Error(n(93));r=r[0]}t=r}null==t&&(t=""),r=t}e._wrapperState={initialValue:V(r)}}function ne(e,t){var r=V(t.value),a=V(t.defaultValue);null!=r&&((r=""+r)!==e.value&&(e.value=r),null==t.defaultValue&&e.defaultValue!==r&&(e.defaultValue=r)),null!=a&&(e.defaultValue=""+a)}function le(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ie(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function oe(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ie(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,de=function(e){return"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(t,r,a,s){MSApp.execUnsafeLocalFunction(function(){return e(t,r)})}:e}(function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function ue(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&3===r.nodeType)return void(r.nodeValue=t)}e.textContent=t}var me={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function he(e,t,r){return null==t||"boolean"===typeof t||""===t?"":r||"number"!==typeof t||0===t||me.hasOwnProperty(e)&&me[e]?(""+t).trim():t+"px"}function xe(e,t){for(var r in e=e.style,t)if(t.hasOwnProperty(r)){var a=0===r.indexOf("--"),s=he(r,t[r],a);"float"===r&&(r="cssFloat"),a?e.setProperty(r,s):e[r]=s}}Object.keys(me).forEach(function(e){pe.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),me[t]=me[e]})});var fe=D({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ge(e,t){if(t){if(fe[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(n(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(n(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(n(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(n(62))}}function ye(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ve=null;function be(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var je=null,we=null,Ne=null;function ke(e){if(e=Cs(e)){if("function"!==typeof je)throw Error(n(280));var t=e.stateNode;t&&(t=Ps(t),je(e.stateNode,e.type,t))}}function _e(e){we?Ne?Ne.push(e):Ne=[e]:we=e}function Se(){if(we){var e=we,t=Ne;if(Ne=we=null,ke(e),t)for(e=0;e<t.length;e++)ke(t[e])}}function Ce(e,t){return e(t)}function Ee(){}var Pe=!1;function Te(e,t,r){if(Pe)return e(t,r);Pe=!0;try{return Ce(e,t,r)}finally{Pe=!1,(null!==we||null!==Ne)&&(Ee(),Se())}}function Ae(e,t){var r=e.stateNode;if(null===r)return null;var a=Ps(r);if(null===a)return null;r=a[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(a=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!a;break e;default:e=!1}if(e)return null;if(r&&"function"!==typeof r)throw Error(n(231,t,typeof r));return r}var Oe=!1;if(d)try{var Me={};Object.defineProperty(Me,"passive",{get:function(){Oe=!0}}),window.addEventListener("test",Me,Me),window.removeEventListener("test",Me,Me)}catch(Ke){Oe=!1}function Re(e,t,r,a,s,n,l,i,o){var c=Array.prototype.slice.call(arguments,3);try{t.apply(r,c)}catch(d){this.onError(d)}}var Fe=!1,Le=null,De=!1,Ie=null,ze={onError:function(e){Fe=!0,Le=e}};function Ue(e,t,r,a,s,n,l,i,o){Fe=!1,Le=null,Re.apply(ze,arguments)}function Be(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(r=t.return),e=t.return}while(e)}return 3===t.tag?r:null}function qe(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function He(e){if(Be(e)!==e)throw Error(n(188))}function Qe(e){return e=function(e){var t=e.alternate;if(!t){if(null===(t=Be(e)))throw Error(n(188));return t!==e?null:e}for(var r=e,a=t;;){var s=r.return;if(null===s)break;var l=s.alternate;if(null===l){if(null!==(a=s.return)){r=a;continue}break}if(s.child===l.child){for(l=s.child;l;){if(l===r)return He(s),e;if(l===a)return He(s),t;l=l.sibling}throw Error(n(188))}if(r.return!==a.return)r=s,a=l;else{for(var i=!1,o=s.child;o;){if(o===r){i=!0,r=s,a=l;break}if(o===a){i=!0,a=s,r=l;break}o=o.sibling}if(!i){for(o=l.child;o;){if(o===r){i=!0,r=l,a=s;break}if(o===a){i=!0,a=l,r=s;break}o=o.sibling}if(!i)throw Error(n(189))}}if(r.alternate!==a)throw Error(n(190))}if(3!==r.tag)throw Error(n(188));return r.stateNode.current===r?e:t}(e),null!==e?Je(e):null}function Je(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Je(e);if(null!==t)return t;e=e.sibling}return null}var Ye=s.unstable_scheduleCallback,Xe=s.unstable_cancelCallback,Ze=s.unstable_shouldYield,rt=s.unstable_requestPaint,st=s.unstable_now,nt=s.unstable_getCurrentPriorityLevel,lt=s.unstable_ImmediatePriority,it=s.unstable_UserBlockingPriority,ot=s.unstable_NormalPriority,ct=s.unstable_LowPriority,dt=s.unstable_IdlePriority,ut=null,mt=null;var pt=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(ht(e)/xt|0)|0},ht=Math.log,xt=Math.LN2;var ft=64,gt=4194304;function yt(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function vt(e,t){var r=e.pendingLanes;if(0===r)return 0;var a=0,s=e.suspendedLanes,n=e.pingedLanes,l=268435455&r;if(0!==l){var i=l&~s;0!==i?a=yt(i):0!==(n&=l)&&(a=yt(n))}else 0!==(l=r&~s)?a=yt(l):0!==n&&(a=yt(n));if(0===a)return 0;if(0!==t&&t!==a&&0===(t&s)&&((s=a&-a)>=(n=t&-t)||16===s&&0!==(4194240&n)))return t;if(0!==(4&a)&&(a|=16&r),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=a;0<t;)s=1<<(r=31-pt(t)),a|=e[r],t&=~s;return a}function bt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function jt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function wt(){var e=ft;return 0===(4194240&(ft<<=1))&&(ft=64),e}function Nt(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function _t(e,t,r){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-pt(t)]=r}function St(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var a=31-pt(r),s=1<<a;s&t|e[a]&t&&(e[a]|=t),r&=~s}}var Ct=0;function Et(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var Pt,Tt,At,Ot,Mt,Rt=!1,Ft=[],Lt=null,Dt=null,It=null,zt=new Map,Ut=new Map,qt=[],Ht="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Vt(e,t){switch(e){case"focusin":case"focusout":Lt=null;break;case"dragenter":case"dragleave":Dt=null;break;case"mouseover":case"mouseout":It=null;break;case"pointerover":case"pointerout":zt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ut.delete(t.pointerId)}}function Wt(e,t,r,a,s,n){return null===e||e.nativeEvent!==n?(e={blockedOn:t,domEventName:r,eventSystemFlags:a,nativeEvent:n,targetContainers:[s]},null!==t&&(null!==(t=Cs(t))&&Tt(t)),e):(e.eventSystemFlags|=a,t=e.targetContainers,null!==s&&-1===t.indexOf(s)&&t.push(s),e)}function $t(e){var t=Ss(e.target);if(null!==t){var r=Be(t);if(null!==r)if(13===(t=r.tag)){if(null!==(t=qe(r)))return e.blockedOn=t,void Mt(e.priority,function(){At(r)})}else if(3===t&&r.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===r.tag?r.stateNode.containerInfo:null)}e.blockedOn=null}function Kt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var r=sr(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==r)return null!==(t=Cs(r))&&Tt(t),e.blockedOn=r,!1;var a=new(r=e.nativeEvent).constructor(r.type,r);ve=a,r.target.dispatchEvent(a),ve=null,t.shift()}return!0}function Qt(e,t,r){Kt(e)&&r.delete(t)}function Jt(){Rt=!1,null!==Lt&&Kt(Lt)&&(Lt=null),null!==Dt&&Kt(Dt)&&(Dt=null),null!==It&&Kt(It)&&(It=null),zt.forEach(Qt),Ut.forEach(Qt)}function Gt(e,t){e.blockedOn===t&&(e.blockedOn=null,Rt||(Rt=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,Jt)))}function Yt(e){function t(t){return Gt(t,e)}if(0<Ft.length){Gt(Ft[0],e);for(var r=1;r<Ft.length;r++){var a=Ft[r];a.blockedOn===e&&(a.blockedOn=null)}}for(null!==Lt&&Gt(Lt,e),null!==Dt&&Gt(Dt,e),null!==It&&Gt(It,e),zt.forEach(t),Ut.forEach(t),r=0;r<qt.length;r++)(a=qt[r]).blockedOn===e&&(a.blockedOn=null);for(;0<qt.length&&null===(r=qt[0]).blockedOn;)$t(r),null===r.blockedOn&&qt.shift()}var Xt=b.ReactCurrentBatchConfig,Zt=!0;function er(e,t,r,a){var s=Ct,n=Xt.transition;Xt.transition=null;try{Ct=1,rr(e,t,r,a)}finally{Ct=s,Xt.transition=n}}function tr(e,t,r,a){var s=Ct,n=Xt.transition;Xt.transition=null;try{Ct=4,rr(e,t,r,a)}finally{Ct=s,Xt.transition=n}}function rr(e,t,r,a){if(Zt){var s=sr(e,t,r,a);if(null===s)Xa(e,t,a,ar,r),Vt(e,a);else if(function(e,t,r,a,s){switch(t){case"focusin":return Lt=Wt(Lt,e,t,r,a,s),!0;case"dragenter":return Dt=Wt(Dt,e,t,r,a,s),!0;case"mouseover":return It=Wt(It,e,t,r,a,s),!0;case"pointerover":var n=s.pointerId;return zt.set(n,Wt(zt.get(n)||null,e,t,r,a,s)),!0;case"gotpointercapture":return n=s.pointerId,Ut.set(n,Wt(Ut.get(n)||null,e,t,r,a,s)),!0}return!1}(s,e,t,r,a))a.stopPropagation();else if(Vt(e,a),4&t&&-1<Ht.indexOf(e)){for(;null!==s;){var n=Cs(s);if(null!==n&&Pt(n),null===(n=sr(e,t,r,a))&&Xa(e,t,a,ar,r),n===s)break;s=n}null!==s&&a.stopPropagation()}else Xa(e,t,a,null,r)}}var ar=null;function sr(e,t,r,a){if(ar=null,null!==(e=Ss(e=be(a))))if(null===(t=Be(e)))e=null;else if(13===(r=t.tag)){if(null!==(e=qe(t)))return e;e=null}else if(3===r){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return ar=e,null}function nr(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(nt()){case lt:return 1;case it:return 4;case ot:case ct:return 16;case dt:return 536870912;default:return 16}default:return 16}}var lr=null,ir=null,or=null;function cr(){if(or)return or;var e,t,r=ir,a=r.length,s="value"in lr?lr.value:lr.textContent,n=s.length;for(e=0;e<a&&r[e]===s[e];e++);var l=a-e;for(t=1;t<=l&&r[a-t]===s[n-t];t++);return or=s.slice(e,1<t?1-t:void 0)}function dr(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function ur(){return!0}function mr(){return!1}function pr(e){function t(t,r,a,s,n){for(var l in this._reactName=t,this._targetInst=a,this.type=r,this.nativeEvent=s,this.target=n,this.currentTarget=null,e)e.hasOwnProperty(l)&&(t=e[l],this[l]=t?t(s):s[l]);return this.isDefaultPrevented=(null!=s.defaultPrevented?s.defaultPrevented:!1===s.returnValue)?ur:mr,this.isPropagationStopped=mr,this}return D(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=ur)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=ur)},persist:function(){},isPersistent:ur}),t}var hr,xr,fr,gr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},yr=pr(gr),vr=D({},gr,{view:0,detail:0}),br=pr(vr),jr=D({},vr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Mr,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==fr&&(fr&&"mousemove"===e.type?(hr=e.screenX-fr.screenX,xr=e.screenY-fr.screenY):xr=hr=0,fr=e),hr)},movementY:function(e){return"movementY"in e?e.movementY:xr}}),wr=pr(jr),Nr=pr(D({},jr,{dataTransfer:0})),kr=pr(D({},vr,{relatedTarget:0})),_r=pr(D({},gr,{animationName:0,elapsedTime:0,pseudoElement:0})),Sr=D({},gr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Cr=pr(Sr),Er=pr(D({},gr,{data:0})),Pr={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Tr={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ar={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Or(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Ar[e])&&!!t[e]}function Mr(){return Or}var Rr=D({},vr,{key:function(e){if(e.key){var t=Pr[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=dr(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?Tr[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Mr,charCode:function(e){return"keypress"===e.type?dr(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?dr(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Fr=pr(Rr),Lr=pr(D({},jr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Dr=pr(D({},vr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Mr})),Ir=pr(D({},gr,{propertyName:0,elapsedTime:0,pseudoElement:0})),zr=D({},jr,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Ur=pr(zr),Br=[9,13,27,32],qr=d&&"CompositionEvent"in window,Hr=null;d&&"documentMode"in document&&(Hr=document.documentMode);var Vr=d&&"TextEvent"in window&&!Hr,Wr=d&&(!qr||Hr&&8<Hr&&11>=Hr),$r=String.fromCharCode(32),Kr=!1;function Qr(e,t){switch(e){case"keyup":return-1!==Br.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Jr(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Gr=!1;var Yr={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Xr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Yr[e.type]:"textarea"===t}function Zr(e,t,r,a){_e(a),0<(t=es(t,"onChange")).length&&(r=new yr("onChange","change",null,r,a),e.push({event:r,listeners:t}))}var ea=null,ta=null;function ra(e){$a(e,0)}function aa(e){if(K(Es(e)))return e}function sa(e,t){if("change"===e)return t}var na=!1;if(d){var la;if(d){var ia="oninput"in document;if(!ia){var oa=document.createElement("div");oa.setAttribute("oninput","return;"),ia="function"===typeof oa.oninput}la=ia}else la=!1;na=la&&(!document.documentMode||9<document.documentMode)}function ca(){ea&&(ea.detachEvent("onpropertychange",da),ta=ea=null)}function da(e){if("value"===e.propertyName&&aa(ta)){var t=[];Zr(t,ta,e,be(e)),Te(ra,t)}}function ua(e,t,r){"focusin"===e?(ca(),ta=r,(ea=t).attachEvent("onpropertychange",da)):"focusout"===e&&ca()}function ma(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return aa(ta)}function pa(e,t){if("click"===e)return aa(t)}function ha(e,t){if("input"===e||"change"===e)return aa(t)}var xa="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function fa(e,t){if(xa(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var r=Object.keys(e),a=Object.keys(t);if(r.length!==a.length)return!1;for(a=0;a<r.length;a++){var s=r[a];if(!u.call(t,s)||!xa(e[s],t[s]))return!1}return!0}function ga(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ya(e,t){var r,a=ga(e);for(e=0;a;){if(3===a.nodeType){if(r=e+a.textContent.length,e<=t&&r>=t)return{node:a,offset:t-e};e=r}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=ga(a)}}function va(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?va(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function ba(){for(var e=window,t=Q();t instanceof e.HTMLIFrameElement;){try{var r="string"===typeof t.contentWindow.location.href}catch(et){r=!1}if(!r)break;t=Q((e=t.contentWindow).document)}return t}function ja(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function wa(e){var t=ba(),r=e.focusedElem,a=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&va(r.ownerDocument.documentElement,r)){if(null!==a&&ja(r))if(t=a.start,void 0===(e=a.end)&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if((e=(t=r.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var s=r.textContent.length,n=Math.min(a.start,s);a=void 0===a.end?n:Math.min(a.end,s),!e.extend&&n>a&&(s=a,a=n,n=s),s=ya(r,n);var l=ya(r,a);s&&l&&(1!==e.rangeCount||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==l.node||e.focusOffset!==l.offset)&&((t=t.createRange()).setStart(s.node,s.offset),e.removeAllRanges(),n>a?(e.addRange(t),e.extend(l.node,l.offset)):(t.setEnd(l.node,l.offset),e.addRange(t)))}for(t=[],e=r;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof r.focus&&r.focus(),r=0;r<t.length;r++)(e=t[r]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Na=d&&"documentMode"in document&&11>=document.documentMode,ka=null,_a=null,Sa=null,Ca=!1;function Ea(e,t,r){var a=r.window===r?r.document:9===r.nodeType?r:r.ownerDocument;Ca||null==ka||ka!==Q(a)||("selectionStart"in(a=ka)&&ja(a)?a={start:a.selectionStart,end:a.selectionEnd}:a={anchorNode:(a=(a.ownerDocument&&a.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:a.anchorOffset,focusNode:a.focusNode,focusOffset:a.focusOffset},Sa&&fa(Sa,a)||(Sa=a,0<(a=es(_a,"onSelect")).length&&(t=new yr("onSelect","select",null,t,r),e.push({event:t,listeners:a}),t.target=ka)))}function Pa(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var Ta={animationend:Pa("Animation","AnimationEnd"),animationiteration:Pa("Animation","AnimationIteration"),animationstart:Pa("Animation","AnimationStart"),transitionend:Pa("Transition","TransitionEnd")},Aa={},Oa={};function Ma(e){if(Aa[e])return Aa[e];if(!Ta[e])return e;var t,r=Ta[e];for(t in r)if(r.hasOwnProperty(t)&&t in Oa)return Aa[e]=r[t];return e}d&&(Oa=document.createElement("div").style,"AnimationEvent"in window||(delete Ta.animationend.animation,delete Ta.animationiteration.animation,delete Ta.animationstart.animation),"TransitionEvent"in window||delete Ta.transitionend.transition);var Ra=Ma("animationend"),Fa=Ma("animationiteration"),La=Ma("animationstart"),Da=Ma("transitionend"),Ia=new Map,za="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ua(e,t){Ia.set(e,t),o(t,[e])}for(var Ba=0;Ba<za.length;Ba++){var qa=za[Ba];Ua(qa.toLowerCase(),"on"+(qa[0].toUpperCase()+qa.slice(1)))}Ua(Ra,"onAnimationEnd"),Ua(Fa,"onAnimationIteration"),Ua(La,"onAnimationStart"),Ua("dblclick","onDoubleClick"),Ua("focusin","onFocus"),Ua("focusout","onBlur"),Ua(Da,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),o("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),o("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),o("onBeforeInput",["compositionend","keypress","textInput","paste"]),o("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ha="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Va=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ha));function Wa(e,t,r){var a=e.type||"unknown-event";e.currentTarget=r,function(e,t,r,a,s,l,i,o,c){if(Ue.apply(this,arguments),Fe){if(!Fe)throw Error(n(198));var d=Le;Fe=!1,Le=null,De||(De=!0,Ie=d)}}(a,t,void 0,e),e.currentTarget=null}function $a(e,t){t=0!==(4&t);for(var r=0;r<e.length;r++){var a=e[r],s=a.event;a=a.listeners;e:{var n=void 0;if(t)for(var l=a.length-1;0<=l;l--){var i=a[l],o=i.instance,c=i.currentTarget;if(i=i.listener,o!==n&&s.isPropagationStopped())break e;Wa(s,i,c),n=o}else for(l=0;l<a.length;l++){if(o=(i=a[l]).instance,c=i.currentTarget,i=i.listener,o!==n&&s.isPropagationStopped())break e;Wa(s,i,c),n=o}}}if(De)throw e=Ie,De=!1,Ie=null,e}function Ka(e,t){var r=t[Ns];void 0===r&&(r=t[Ns]=new Set);var a=e+"__bubble";r.has(a)||(Ya(t,e,2,!1),r.add(a))}function Qa(e,t,r){var a=0;t&&(a|=4),Ya(r,e,a,t)}var Ja="_reactListening"+Math.random().toString(36).slice(2);function Ga(e){if(!e[Ja]){e[Ja]=!0,l.forEach(function(t){"selectionchange"!==t&&(Va.has(t)||Qa(t,!1,e),Qa(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Ja]||(t[Ja]=!0,Qa("selectionchange",!1,t))}}function Ya(e,t,r,a){switch(nr(t)){case 1:var s=er;break;case 4:s=tr;break;default:s=rr}r=s.bind(null,t,r,e),s=void 0,!Oe||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(s=!0),a?void 0!==s?e.addEventListener(t,r,{capture:!0,passive:s}):e.addEventListener(t,r,!0):void 0!==s?e.addEventListener(t,r,{passive:s}):e.addEventListener(t,r,!1)}function Xa(e,t,r,a,s){var n=a;if(0===(1&t)&&0===(2&t)&&null!==a)e:for(;;){if(null===a)return;var l=a.tag;if(3===l||4===l){var i=a.stateNode.containerInfo;if(i===s||8===i.nodeType&&i.parentNode===s)break;if(4===l)for(l=a.return;null!==l;){var o=l.tag;if((3===o||4===o)&&((o=l.stateNode.containerInfo)===s||8===o.nodeType&&o.parentNode===s))return;l=l.return}for(;null!==i;){if(null===(l=Ss(i)))return;if(5===(o=l.tag)||6===o){a=n=l;continue e}i=i.parentNode}}a=a.return}Te(function(){var a=n,s=be(r),l=[];e:{var i=Ia.get(e);if(void 0!==i){var o=yr,c=e;switch(e){case"keypress":if(0===dr(r))break e;case"keydown":case"keyup":o=Fr;break;case"focusin":c="focus",o=kr;break;case"focusout":c="blur",o=kr;break;case"beforeblur":case"afterblur":o=kr;break;case"click":if(2===r.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":o=wr;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":o=Nr;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":o=Dr;break;case Ra:case Fa:case La:o=_r;break;case Da:o=Ir;break;case"scroll":o=br;break;case"wheel":o=Ur;break;case"copy":case"cut":case"paste":o=Cr;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":o=Lr}var d=0!==(4&t),u=!d&&"scroll"===e,m=d?null!==i?i+"Capture":null:i;d=[];for(var p,h=a;null!==h;){var x=(p=h).stateNode;if(5===p.tag&&null!==x&&(p=x,null!==m&&(null!=(x=Ae(h,m))&&d.push(Za(h,x,p)))),u)break;h=h.return}0<d.length&&(i=new o(i,c,null,r,s),l.push({event:i,listeners:d}))}}if(0===(7&t)){if(o="mouseout"===e||"pointerout"===e,(!(i="mouseover"===e||"pointerover"===e)||r===ve||!(c=r.relatedTarget||r.fromElement)||!Ss(c)&&!c[ws])&&(o||i)&&(i=s.window===s?s:(i=s.ownerDocument)?i.defaultView||i.parentWindow:window,o?(o=a,null!==(c=(c=r.relatedTarget||r.toElement)?Ss(c):null)&&(c!==(u=Be(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(o=null,c=a),o!==c)){if(d=wr,x="onMouseLeave",m="onMouseEnter",h="mouse","pointerout"!==e&&"pointerover"!==e||(d=Lr,x="onPointerLeave",m="onPointerEnter",h="pointer"),u=null==o?i:Es(o),p=null==c?i:Es(c),(i=new d(x,h+"leave",o,r,s)).target=u,i.relatedTarget=p,x=null,Ss(s)===a&&((d=new d(m,h+"enter",c,r,s)).target=p,d.relatedTarget=u,x=d),u=x,o&&c)e:{for(m=c,h=0,p=d=o;p;p=ts(p))h++;for(p=0,x=m;x;x=ts(x))p++;for(;0<h-p;)d=ts(d),h--;for(;0<p-h;)m=ts(m),p--;for(;h--;){if(d===m||null!==m&&d===m.alternate)break e;d=ts(d),m=ts(m)}d=null}else d=null;null!==o&&rs(l,i,o,d,!1),null!==c&&null!==u&&rs(l,u,c,d,!0)}if("select"===(o=(i=a?Es(a):window).nodeName&&i.nodeName.toLowerCase())||"input"===o&&"file"===i.type)var f=sa;else if(Xr(i))if(na)f=ha;else{f=ma;var g=ua}else(o=i.nodeName)&&"input"===o.toLowerCase()&&("checkbox"===i.type||"radio"===i.type)&&(f=pa);switch(f&&(f=f(e,a))?Zr(l,f,r,s):(g&&g(e,i,a),"focusout"===e&&(g=i._wrapperState)&&g.controlled&&"number"===i.type&&ee(i,"number",i.value)),g=a?Es(a):window,e){case"focusin":(Xr(g)||"true"===g.contentEditable)&&(ka=g,_a=a,Sa=null);break;case"focusout":Sa=_a=ka=null;break;case"mousedown":Ca=!0;break;case"contextmenu":case"mouseup":case"dragend":Ca=!1,Ea(l,r,s);break;case"selectionchange":if(Na)break;case"keydown":case"keyup":Ea(l,r,s)}var y;if(qr)e:{switch(e){case"compositionstart":var v="onCompositionStart";break e;case"compositionend":v="onCompositionEnd";break e;case"compositionupdate":v="onCompositionUpdate";break e}v=void 0}else Gr?Qr(e,r)&&(v="onCompositionEnd"):"keydown"===e&&229===r.keyCode&&(v="onCompositionStart");v&&(Wr&&"ko"!==r.locale&&(Gr||"onCompositionStart"!==v?"onCompositionEnd"===v&&Gr&&(y=cr()):(ir="value"in(lr=s)?lr.value:lr.textContent,Gr=!0)),0<(g=es(a,v)).length&&(v=new Er(v,e,null,r,s),l.push({event:v,listeners:g}),y?v.data=y:null!==(y=Jr(r))&&(v.data=y))),(y=Vr?function(e,t){switch(e){case"compositionend":return Jr(t);case"keypress":return 32!==t.which?null:(Kr=!0,$r);case"textInput":return(e=t.data)===$r&&Kr?null:e;default:return null}}(e,r):function(e,t){if(Gr)return"compositionend"===e||!qr&&Qr(e,t)?(e=cr(),or=ir=lr=null,Gr=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Wr&&"ko"!==t.locale?null:t.data}}(e,r))&&(0<(a=es(a,"onBeforeInput")).length&&(s=new Er("onBeforeInput","beforeinput",null,r,s),l.push({event:s,listeners:a}),s.data=y))}$a(l,t)})}function Za(e,t,r){return{instance:e,listener:t,currentTarget:r}}function es(e,t){for(var r=t+"Capture",a=[];null!==e;){var s=e,n=s.stateNode;5===s.tag&&null!==n&&(s=n,null!=(n=Ae(e,r))&&a.unshift(Za(e,n,s)),null!=(n=Ae(e,t))&&a.push(Za(e,n,s))),e=e.return}return a}function ts(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function rs(e,t,r,a,s){for(var n=t._reactName,l=[];null!==r&&r!==a;){var i=r,o=i.alternate,c=i.stateNode;if(null!==o&&o===a)break;5===i.tag&&null!==c&&(i=c,s?null!=(o=Ae(r,n))&&l.unshift(Za(r,o,i)):s||null!=(o=Ae(r,n))&&l.push(Za(r,o,i))),r=r.return}0!==l.length&&e.push({event:t,listeners:l})}var as=/\r\n?/g,ss=/\u0000|\uFFFD/g;function ns(e){return("string"===typeof e?e:""+e).replace(as,"\n").replace(ss,"")}function ls(e,t,r){if(t=ns(t),ns(e)!==t&&r)throw Error(n(425))}function is(){}var os=null,cs=null;function ds(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var us="function"===typeof setTimeout?setTimeout:void 0,ms="function"===typeof clearTimeout?clearTimeout:void 0,ps="function"===typeof Promise?Promise:void 0,hs="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ps?function(e){return ps.resolve(null).then(e).catch(xs)}:us;function xs(e){setTimeout(function(){throw e})}function fs(e,t){var r=t,a=0;do{var s=r.nextSibling;if(e.removeChild(r),s&&8===s.nodeType)if("/$"===(r=s.data)){if(0===a)return e.removeChild(s),void Yt(t);a--}else"$"!==r&&"$?"!==r&&"$!"!==r||a++;r=s}while(r);Yt(t)}function gs(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ys(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var r=e.data;if("$"===r||"$!"===r||"$?"===r){if(0===t)return e;t--}else"/$"===r&&t++}e=e.previousSibling}return null}var vs=Math.random().toString(36).slice(2),bs="__reactFiber$"+vs,js="__reactProps$"+vs,ws="__reactContainer$"+vs,Ns="__reactEvents$"+vs,ks="__reactListeners$"+vs,_s="__reactHandles$"+vs;function Ss(e){var t=e[bs];if(t)return t;for(var r=e.parentNode;r;){if(t=r[ws]||r[bs]){if(r=t.alternate,null!==t.child||null!==r&&null!==r.child)for(e=ys(e);null!==e;){if(r=e[bs])return r;e=ys(e)}return t}r=(e=r).parentNode}return null}function Cs(e){return!(e=e[bs]||e[ws])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function Es(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(n(33))}function Ps(e){return e[js]||null}var Ts=[],As=-1;function Os(e){return{current:e}}function Ms(e){0>As||(e.current=Ts[As],Ts[As]=null,As--)}function Rs(e,t){As++,Ts[As]=e.current,e.current=t}var Fs={},Ls=Os(Fs),Ds=Os(!1),Is=Fs;function zs(e,t){var r=e.type.contextTypes;if(!r)return Fs;var a=e.stateNode;if(a&&a.__reactInternalMemoizedUnmaskedChildContext===t)return a.__reactInternalMemoizedMaskedChildContext;var s,n={};for(s in r)n[s]=t[s];return a&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=n),n}function Us(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Bs(){Ms(Ds),Ms(Ls)}function qs(e,t,r){if(Ls.current!==Fs)throw Error(n(168));Rs(Ls,t),Rs(Ds,r)}function Hs(e,t,r){var a=e.stateNode;if(t=t.childContextTypes,"function"!==typeof a.getChildContext)return r;for(var s in a=a.getChildContext())if(!(s in t))throw Error(n(108,H(e)||"Unknown",s));return D({},r,a)}function Vs(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Fs,Is=Ls.current,Rs(Ls,e),Rs(Ds,Ds.current),!0}function Ws(e,t,r){var a=e.stateNode;if(!a)throw Error(n(169));r?(e=Hs(e,t,Is),a.__reactInternalMemoizedMergedChildContext=e,Ms(Ds),Ms(Ls),Rs(Ls,e)):Ms(Ds),Rs(Ds,r)}var $s=null,Ks=!1,Qs=!1;function Js(e){null===$s?$s=[e]:$s.push(e)}function Gs(){if(!Qs&&null!==$s){Qs=!0;var e=0,t=Ct;try{var r=$s;for(Ct=1;e<r.length;e++){var a=r[e];do{a=a(!0)}while(null!==a)}$s=null,Ks=!1}catch(Ve){throw null!==$s&&($s=$s.slice(e+1)),Ye(lt,Gs),Ve}finally{Ct=t,Qs=!1}}return null}var Ys=[],Xs=0,Zs=null,en=0,tn=[],rn=0,an=null,sn=1,nn="";function ln(e,t){Ys[Xs++]=en,Ys[Xs++]=Zs,Zs=e,en=t}function on(e,t,r){tn[rn++]=sn,tn[rn++]=nn,tn[rn++]=an,an=e;var a=sn;e=nn;var s=32-pt(a)-1;a&=~(1<<s),r+=1;var n=32-pt(t)+s;if(30<n){var l=s-s%5;n=(a&(1<<l)-1).toString(32),a>>=l,s-=l,sn=1<<32-pt(t)+s|r<<s|a,nn=n+e}else sn=1<<n|r<<s|a,nn=e}function cn(e){null!==e.return&&(ln(e,1),on(e,1,0))}function dn(e){for(;e===Zs;)Zs=Ys[--Xs],Ys[Xs]=null,en=Ys[--Xs],Ys[Xs]=null;for(;e===an;)an=tn[--rn],tn[rn]=null,nn=tn[--rn],tn[rn]=null,sn=tn[--rn],tn[rn]=null}var un=null,mn=null,pn=!1,hn=null;function xn(e,t){var r=Uc(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,null===(t=e.deletions)?(e.deletions=[r],e.flags|=16):t.push(r)}function fn(e,t){switch(e.tag){case 5:var r=e.type;return null!==(t=1!==t.nodeType||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,un=e,mn=gs(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,un=e,mn=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(r=null!==an?{id:sn,overflow:nn}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},(r=Uc(18,null,null,0)).stateNode=t,r.return=e,e.child=r,un=e,mn=null,!0);default:return!1}}function gn(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function yn(e){if(pn){var t=mn;if(t){var r=t;if(!fn(e,t)){if(gn(e))throw Error(n(418));t=gs(r.nextSibling);var a=un;t&&fn(e,t)?xn(a,r):(e.flags=-4097&e.flags|2,pn=!1,un=e)}}else{if(gn(e))throw Error(n(418));e.flags=-4097&e.flags|2,pn=!1,un=e}}}function vn(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;un=e}function bn(e){if(e!==un)return!1;if(!pn)return vn(e),pn=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ds(e.type,e.memoizedProps)),t&&(t=mn)){if(gn(e))throw jn(),Error(n(418));for(;t;)xn(e,t),t=gs(t.nextSibling)}if(vn(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(n(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var r=e.data;if("/$"===r){if(0===t){mn=gs(e.nextSibling);break e}t--}else"$"!==r&&"$!"!==r&&"$?"!==r||t++}e=e.nextSibling}mn=null}}else mn=un?gs(e.stateNode.nextSibling):null;return!0}function jn(){for(var e=mn;e;)e=gs(e.nextSibling)}function wn(){mn=un=null,pn=!1}function Nn(e){null===hn?hn=[e]:hn.push(e)}var kn=b.ReactCurrentBatchConfig;function _n(e,t,r){if(null!==(e=r.ref)&&"function"!==typeof e&&"object"!==typeof e){if(r._owner){if(r=r._owner){if(1!==r.tag)throw Error(n(309));var a=r.stateNode}if(!a)throw Error(n(147,e));var s=a,l=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===l?t.ref:(t=function(e){var t=s.refs;null===e?delete t[l]:t[l]=e},t._stringRef=l,t)}if("string"!==typeof e)throw Error(n(284));if(!r._owner)throw Error(n(290,e))}return e}function Sn(e,t){throw e=Object.prototype.toString.call(t),Error(n(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Cn(e){return(0,e._init)(e._payload)}function En(e){function t(t,r){if(e){var a=t.deletions;null===a?(t.deletions=[r],t.flags|=16):a.push(r)}}function r(r,a){if(!e)return null;for(;null!==a;)t(r,a),a=a.sibling;return null}function a(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function s(e,t){return(e=qc(e,t)).index=0,e.sibling=null,e}function l(t,r,a){return t.index=a,e?null!==(a=t.alternate)?(a=a.index)<r?(t.flags|=2,r):a:(t.flags|=2,r):(t.flags|=1048576,r)}function i(t){return e&&null===t.alternate&&(t.flags|=2),t}function o(e,t,r,a){return null===t||6!==t.tag?((t=$c(r,e.mode,a)).return=e,t):((t=s(t,r)).return=e,t)}function c(e,t,r,a){var n=r.type;return n===N?u(e,t,r.props.children,a,r.key):null!==t&&(t.elementType===n||"object"===typeof n&&null!==n&&n.$$typeof===O&&Cn(n)===t.type)?((a=s(t,r.props)).ref=_n(e,t,r),a.return=e,a):((a=Hc(r.type,r.key,r.props,null,e.mode,a)).ref=_n(e,t,r),a.return=e,a)}function d(e,t,r,a){return null===t||4!==t.tag||t.stateNode.containerInfo!==r.containerInfo||t.stateNode.implementation!==r.implementation?((t=Kc(r,e.mode,a)).return=e,t):((t=s(t,r.children||[])).return=e,t)}function u(e,t,r,a,n){return null===t||7!==t.tag?((t=Vc(r,e.mode,a,n)).return=e,t):((t=s(t,r)).return=e,t)}function m(e,t,r){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=$c(""+t,e.mode,r)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case j:return(r=Hc(t.type,t.key,t.props,null,e.mode,r)).ref=_n(e,null,t),r.return=e,r;case w:return(t=Kc(t,e.mode,r)).return=e,t;case O:return m(e,(0,t._init)(t._payload),r)}if(te(t)||F(t))return(t=Vc(t,e.mode,r,null)).return=e,t;Sn(e,t)}return null}function p(e,t,r,a){var s=null!==t?t.key:null;if("string"===typeof r&&""!==r||"number"===typeof r)return null!==s?null:o(e,t,""+r,a);if("object"===typeof r&&null!==r){switch(r.$$typeof){case j:return r.key===s?c(e,t,r,a):null;case w:return r.key===s?d(e,t,r,a):null;case O:return p(e,t,(s=r._init)(r._payload),a)}if(te(r)||F(r))return null!==s?null:u(e,t,r,a,null);Sn(e,r)}return null}function h(e,t,r,a,s){if("string"===typeof a&&""!==a||"number"===typeof a)return o(t,e=e.get(r)||null,""+a,s);if("object"===typeof a&&null!==a){switch(a.$$typeof){case j:return c(t,e=e.get(null===a.key?r:a.key)||null,a,s);case w:return d(t,e=e.get(null===a.key?r:a.key)||null,a,s);case O:return h(e,t,r,(0,a._init)(a._payload),s)}if(te(a)||F(a))return u(t,e=e.get(r)||null,a,s,null);Sn(t,a)}return null}function x(s,n,i,o){for(var c=null,d=null,u=n,x=n=0,f=null;null!==u&&x<i.length;x++){u.index>x?(f=u,u=null):f=u.sibling;var g=p(s,u,i[x],o);if(null===g){null===u&&(u=f);break}e&&u&&null===g.alternate&&t(s,u),n=l(g,n,x),null===d?c=g:d.sibling=g,d=g,u=f}if(x===i.length)return r(s,u),pn&&ln(s,x),c;if(null===u){for(;x<i.length;x++)null!==(u=m(s,i[x],o))&&(n=l(u,n,x),null===d?c=u:d.sibling=u,d=u);return pn&&ln(s,x),c}for(u=a(s,u);x<i.length;x++)null!==(f=h(u,s,x,i[x],o))&&(e&&null!==f.alternate&&u.delete(null===f.key?x:f.key),n=l(f,n,x),null===d?c=f:d.sibling=f,d=f);return e&&u.forEach(function(e){return t(s,e)}),pn&&ln(s,x),c}function f(s,i,o,c){var d=F(o);if("function"!==typeof d)throw Error(n(150));if(null==(o=d.call(o)))throw Error(n(151));for(var u=d=null,x=i,f=i=0,g=null,y=o.next();null!==x&&!y.done;f++,y=o.next()){x.index>f?(g=x,x=null):g=x.sibling;var v=p(s,x,y.value,c);if(null===v){null===x&&(x=g);break}e&&x&&null===v.alternate&&t(s,x),i=l(v,i,f),null===u?d=v:u.sibling=v,u=v,x=g}if(y.done)return r(s,x),pn&&ln(s,f),d;if(null===x){for(;!y.done;f++,y=o.next())null!==(y=m(s,y.value,c))&&(i=l(y,i,f),null===u?d=y:u.sibling=y,u=y);return pn&&ln(s,f),d}for(x=a(s,x);!y.done;f++,y=o.next())null!==(y=h(x,s,f,y.value,c))&&(e&&null!==y.alternate&&x.delete(null===y.key?f:y.key),i=l(y,i,f),null===u?d=y:u.sibling=y,u=y);return e&&x.forEach(function(e){return t(s,e)}),pn&&ln(s,f),d}return function e(a,n,l,o){if("object"===typeof l&&null!==l&&l.type===N&&null===l.key&&(l=l.props.children),"object"===typeof l&&null!==l){switch(l.$$typeof){case j:e:{for(var c=l.key,d=n;null!==d;){if(d.key===c){if((c=l.type)===N){if(7===d.tag){r(a,d.sibling),(n=s(d,l.props.children)).return=a,a=n;break e}}else if(d.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===O&&Cn(c)===d.type){r(a,d.sibling),(n=s(d,l.props)).ref=_n(a,d,l),n.return=a,a=n;break e}r(a,d);break}t(a,d),d=d.sibling}l.type===N?((n=Vc(l.props.children,a.mode,o,l.key)).return=a,a=n):((o=Hc(l.type,l.key,l.props,null,a.mode,o)).ref=_n(a,n,l),o.return=a,a=o)}return i(a);case w:e:{for(d=l.key;null!==n;){if(n.key===d){if(4===n.tag&&n.stateNode.containerInfo===l.containerInfo&&n.stateNode.implementation===l.implementation){r(a,n.sibling),(n=s(n,l.children||[])).return=a,a=n;break e}r(a,n);break}t(a,n),n=n.sibling}(n=Kc(l,a.mode,o)).return=a,a=n}return i(a);case O:return e(a,n,(d=l._init)(l._payload),o)}if(te(l))return x(a,n,l,o);if(F(l))return f(a,n,l,o);Sn(a,l)}return"string"===typeof l&&""!==l||"number"===typeof l?(l=""+l,null!==n&&6===n.tag?(r(a,n.sibling),(n=s(n,l)).return=a,a=n):(r(a,n),(n=$c(l,a.mode,o)).return=a,a=n),i(a)):r(a,n)}}var Pn=En(!0),Tn=En(!1),An=Os(null),On=null,Mn=null,Rn=null;function Fn(){Rn=Mn=On=null}function Ln(e){var t=An.current;Ms(An),e._currentValue=t}function Dn(e,t,r){for(;null!==e;){var a=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==a&&(a.childLanes|=t)):null!==a&&(a.childLanes&t)!==t&&(a.childLanes|=t),e===r)break;e=e.return}}function In(e,t){On=e,Rn=Mn=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(Ci=!0),e.firstContext=null)}function zn(e){var t=e._currentValue;if(Rn!==e)if(e={context:e,memoizedValue:t,next:null},null===Mn){if(null===On)throw Error(n(308));Mn=e,On.dependencies={lanes:0,firstContext:e}}else Mn=Mn.next=e;return t}var Un=null;function Bn(e){null===Un?Un=[e]:Un.push(e)}function qn(e,t,r,a){var s=t.interleaved;return null===s?(r.next=r,Bn(t)):(r.next=s.next,s.next=r),t.interleaved=r,Hn(e,a)}function Hn(e,t){e.lanes|=t;var r=e.alternate;for(null!==r&&(r.lanes|=t),r=e,e=e.return;null!==e;)e.childLanes|=t,null!==(r=e.alternate)&&(r.childLanes|=t),r=e,e=e.return;return 3===r.tag?r.stateNode:null}var Vn=!1;function Wn(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function $n(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Kn(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Qn(e,t,r){var a=e.updateQueue;if(null===a)return null;if(a=a.shared,0!==(2&Do)){var s=a.pending;return null===s?t.next=t:(t.next=s.next,s.next=t),a.pending=t,Hn(e,r)}return null===(s=a.interleaved)?(t.next=t,Bn(a)):(t.next=s.next,s.next=t),a.interleaved=t,Hn(e,r)}function Jn(e,t,r){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&r))){var a=t.lanes;r|=a&=e.pendingLanes,t.lanes=r,St(e,r)}}function Gn(e,t){var r=e.updateQueue,a=e.alternate;if(null!==a&&r===(a=a.updateQueue)){var s=null,n=null;if(null!==(r=r.firstBaseUpdate)){do{var l={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};null===n?s=n=l:n=n.next=l,r=r.next}while(null!==r);null===n?s=n=t:n=n.next=t}else s=n=t;return r={baseState:a.baseState,firstBaseUpdate:s,lastBaseUpdate:n,shared:a.shared,effects:a.effects},void(e.updateQueue=r)}null===(e=r.lastBaseUpdate)?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function Yn(e,t,r,a){var s=e.updateQueue;Vn=!1;var n=s.firstBaseUpdate,l=s.lastBaseUpdate,i=s.shared.pending;if(null!==i){s.shared.pending=null;var o=i,c=o.next;o.next=null,null===l?n=c:l.next=c,l=o;var d=e.alternate;null!==d&&((i=(d=d.updateQueue).lastBaseUpdate)!==l&&(null===i?d.firstBaseUpdate=c:i.next=c,d.lastBaseUpdate=o))}if(null!==n){var u=s.baseState;for(l=0,d=c=o=null,i=n;;){var m=i.lane,p=i.eventTime;if((a&m)===m){null!==d&&(d=d.next={eventTime:p,lane:0,tag:i.tag,payload:i.payload,callback:i.callback,next:null});e:{var h=e,x=i;switch(m=t,p=r,x.tag){case 1:if("function"===typeof(h=x.payload)){u=h.call(p,u,m);break e}u=h;break e;case 3:h.flags=-65537&h.flags|128;case 0:if(null===(m="function"===typeof(h=x.payload)?h.call(p,u,m):h)||void 0===m)break e;u=D({},u,m);break e;case 2:Vn=!0}}null!==i.callback&&0!==i.lane&&(e.flags|=64,null===(m=s.effects)?s.effects=[i]:m.push(i))}else p={eventTime:p,lane:m,tag:i.tag,payload:i.payload,callback:i.callback,next:null},null===d?(c=d=p,o=u):d=d.next=p,l|=m;if(null===(i=i.next)){if(null===(i=s.shared.pending))break;i=(m=i).next,m.next=null,s.lastBaseUpdate=m,s.shared.pending=null}}if(null===d&&(o=u),s.baseState=o,s.firstBaseUpdate=c,s.lastBaseUpdate=d,null!==(t=s.shared.interleaved)){s=t;do{l|=s.lane,s=s.next}while(s!==t)}else null===n&&(s.shared.lanes=0);Wo|=l,e.lanes=l,e.memoizedState=u}}function Xn(e,t,r){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var a=e[t],s=a.callback;if(null!==s){if(a.callback=null,a=r,"function"!==typeof s)throw Error(n(191,s));s.call(a)}}}var Zn={},el=Os(Zn),tl=Os(Zn),rl=Os(Zn);function al(e){if(e===Zn)throw Error(n(174));return e}function sl(e,t){switch(Rs(rl,t),Rs(tl,e),Rs(el,Zn),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:oe(null,"");break;default:t=oe(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ms(el),Rs(el,t)}function nl(){Ms(el),Ms(tl),Ms(rl)}function ll(e){al(rl.current);var t=al(el.current),r=oe(t,e.type);t!==r&&(Rs(tl,e),Rs(el,r))}function il(e){tl.current===e&&(Ms(el),Ms(tl))}var ol=Os(0);function cl(e){for(var t=e;null!==t;){if(13===t.tag){var r=t.memoizedState;if(null!==r&&(null===(r=r.dehydrated)||"$?"===r.data||"$!"===r.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var dl=[];function ul(){for(var e=0;e<dl.length;e++)dl[e]._workInProgressVersionPrimary=null;dl.length=0}var ml=b.ReactCurrentDispatcher,pl=b.ReactCurrentBatchConfig,hl=0,xl=null,fl=null,gl=null,yl=!1,vl=!1,bl=0,jl=0;function wl(){throw Error(n(321))}function Nl(e,t){if(null===t)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!xa(e[r],t[r]))return!1;return!0}function kl(e,t,r,a,s,l){if(hl=l,xl=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ml.current=null===e||null===e.memoizedState?ii:oi,e=r(a,s),vl){l=0;do{if(vl=!1,bl=0,25<=l)throw Error(n(301));l+=1,gl=fl=null,t.updateQueue=null,ml.current=ci,e=r(a,s)}while(vl)}if(ml.current=li,t=null!==fl&&null!==fl.next,hl=0,gl=fl=xl=null,yl=!1,t)throw Error(n(300));return e}function _l(){var e=0!==bl;return bl=0,e}function Sl(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===gl?xl.memoizedState=gl=e:gl=gl.next=e,gl}function Cl(){if(null===fl){var e=xl.alternate;e=null!==e?e.memoizedState:null}else e=fl.next;var t=null===gl?xl.memoizedState:gl.next;if(null!==t)gl=t,fl=e;else{if(null===e)throw Error(n(310));e={memoizedState:(fl=e).memoizedState,baseState:fl.baseState,baseQueue:fl.baseQueue,queue:fl.queue,next:null},null===gl?xl.memoizedState=gl=e:gl=gl.next=e}return gl}function El(e,t){return"function"===typeof t?t(e):t}function Pl(e){var t=Cl(),r=t.queue;if(null===r)throw Error(n(311));r.lastRenderedReducer=e;var a=fl,s=a.baseQueue,l=r.pending;if(null!==l){if(null!==s){var i=s.next;s.next=l.next,l.next=i}a.baseQueue=s=l,r.pending=null}if(null!==s){l=s.next,a=a.baseState;var o=i=null,c=null,d=l;do{var u=d.lane;if((hl&u)===u)null!==c&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),a=d.hasEagerState?d.eagerState:e(a,d.action);else{var m={lane:u,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};null===c?(o=c=m,i=a):c=c.next=m,xl.lanes|=u,Wo|=u}d=d.next}while(null!==d&&d!==l);null===c?i=a:c.next=o,xa(a,t.memoizedState)||(Ci=!0),t.memoizedState=a,t.baseState=i,t.baseQueue=c,r.lastRenderedState=a}if(null!==(e=r.interleaved)){s=e;do{l=s.lane,xl.lanes|=l,Wo|=l,s=s.next}while(s!==e)}else null===s&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function Tl(e){var t=Cl(),r=t.queue;if(null===r)throw Error(n(311));r.lastRenderedReducer=e;var a=r.dispatch,s=r.pending,l=t.memoizedState;if(null!==s){r.pending=null;var i=s=s.next;do{l=e(l,i.action),i=i.next}while(i!==s);xa(l,t.memoizedState)||(Ci=!0),t.memoizedState=l,null===t.baseQueue&&(t.baseState=l),r.lastRenderedState=l}return[l,a]}function Al(){}function Ol(e,t){var r=xl,a=Cl(),s=t(),l=!xa(a.memoizedState,s);if(l&&(a.memoizedState=s,Ci=!0),a=a.queue,Vl(Fl.bind(null,r,a,e),[e]),a.getSnapshot!==t||l||null!==gl&&1&gl.memoizedState.tag){if(r.flags|=2048,zl(9,Rl.bind(null,r,a,s,t),void 0,null),null===Io)throw Error(n(349));0!==(30&hl)||Ml(r,t,s)}return s}function Ml(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},null===(t=xl.updateQueue)?(t={lastEffect:null,stores:null},xl.updateQueue=t,t.stores=[e]):null===(r=t.stores)?t.stores=[e]:r.push(e)}function Rl(e,t,r,a){t.value=r,t.getSnapshot=a,Ll(t)&&Dl(e)}function Fl(e,t,r){return r(function(){Ll(t)&&Dl(e)})}function Ll(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!xa(e,r)}catch(et){return!0}}function Dl(e){var t=Hn(e,1);null!==t&&uc(t,e,1,-1)}function Il(e){var t=Sl();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:El,lastRenderedState:e},t.queue=e,e=e.dispatch=ri.bind(null,xl,e),[t.memoizedState,e]}function zl(e,t,r,a){return e={tag:e,create:t,destroy:r,deps:a,next:null},null===(t=xl.updateQueue)?(t={lastEffect:null,stores:null},xl.updateQueue=t,t.lastEffect=e.next=e):null===(r=t.lastEffect)?t.lastEffect=e.next=e:(a=r.next,r.next=e,e.next=a,t.lastEffect=e),e}function Ul(){return Cl().memoizedState}function Bl(e,t,r,a){var s=Sl();xl.flags|=e,s.memoizedState=zl(1|t,r,void 0,void 0===a?null:a)}function ql(e,t,r,a){var s=Cl();a=void 0===a?null:a;var n=void 0;if(null!==fl){var l=fl.memoizedState;if(n=l.destroy,null!==a&&Nl(a,l.deps))return void(s.memoizedState=zl(t,r,n,a))}xl.flags|=e,s.memoizedState=zl(1|t,r,n,a)}function Hl(e,t){return Bl(8390656,8,e,t)}function Vl(e,t){return ql(2048,8,e,t)}function Wl(e,t){return ql(4,2,e,t)}function $l(e,t){return ql(4,4,e,t)}function Kl(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Ql(e,t,r){return r=null!==r&&void 0!==r?r.concat([e]):null,ql(4,4,Kl.bind(null,t,e),r)}function Jl(){}function Gl(e,t){var r=Cl();t=void 0===t?null:t;var a=r.memoizedState;return null!==a&&null!==t&&Nl(t,a[1])?a[0]:(r.memoizedState=[e,t],e)}function Yl(e,t){var r=Cl();t=void 0===t?null:t;var a=r.memoizedState;return null!==a&&null!==t&&Nl(t,a[1])?a[0]:(e=e(),r.memoizedState=[e,t],e)}function Xl(e,t,r){return 0===(21&hl)?(e.baseState&&(e.baseState=!1,Ci=!0),e.memoizedState=r):(xa(r,t)||(r=wt(),xl.lanes|=r,Wo|=r,e.baseState=!0),t)}function Zl(e,t){var r=Ct;Ct=0!==r&&4>r?r:4,e(!0);var a=pl.transition;pl.transition={};try{e(!1),t()}finally{Ct=r,pl.transition=a}}function ei(){return Cl().memoizedState}function ti(e,t,r){var a=dc(e);if(r={lane:a,action:r,hasEagerState:!1,eagerState:null,next:null},ai(e))si(t,r);else if(null!==(r=qn(e,t,r,a))){uc(r,e,a,cc()),ni(r,t,a)}}function ri(e,t,r){var a=dc(e),s={lane:a,action:r,hasEagerState:!1,eagerState:null,next:null};if(ai(e))si(t,s);else{var n=e.alternate;if(0===e.lanes&&(null===n||0===n.lanes)&&null!==(n=t.lastRenderedReducer))try{var l=t.lastRenderedState,i=n(l,r);if(s.hasEagerState=!0,s.eagerState=i,xa(i,l)){var o=t.interleaved;return null===o?(s.next=s,Bn(t)):(s.next=o.next,o.next=s),void(t.interleaved=s)}}catch($e){}null!==(r=qn(e,t,s,a))&&(uc(r,e,a,s=cc()),ni(r,t,a))}}function ai(e){var t=e.alternate;return e===xl||null!==t&&t===xl}function si(e,t){vl=yl=!0;var r=e.pending;null===r?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function ni(e,t,r){if(0!==(4194240&r)){var a=t.lanes;r|=a&=e.pendingLanes,t.lanes=r,St(e,r)}}var li={readContext:zn,useCallback:wl,useContext:wl,useEffect:wl,useImperativeHandle:wl,useInsertionEffect:wl,useLayoutEffect:wl,useMemo:wl,useReducer:wl,useRef:wl,useState:wl,useDebugValue:wl,useDeferredValue:wl,useTransition:wl,useMutableSource:wl,useSyncExternalStore:wl,useId:wl,unstable_isNewReconciler:!1},ii={readContext:zn,useCallback:function(e,t){return Sl().memoizedState=[e,void 0===t?null:t],e},useContext:zn,useEffect:Hl,useImperativeHandle:function(e,t,r){return r=null!==r&&void 0!==r?r.concat([e]):null,Bl(4194308,4,Kl.bind(null,t,e),r)},useLayoutEffect:function(e,t){return Bl(4194308,4,e,t)},useInsertionEffect:function(e,t){return Bl(4,2,e,t)},useMemo:function(e,t){var r=Sl();return t=void 0===t?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var a=Sl();return t=void 0!==r?r(t):t,a.memoizedState=a.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},a.queue=e,e=e.dispatch=ti.bind(null,xl,e),[a.memoizedState,e]},useRef:function(e){return e={current:e},Sl().memoizedState=e},useState:Il,useDebugValue:Jl,useDeferredValue:function(e){return Sl().memoizedState=e},useTransition:function(){var e=Il(!1),t=e[0];return e=Zl.bind(null,e[1]),Sl().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var a=xl,s=Sl();if(pn){if(void 0===r)throw Error(n(407));r=r()}else{if(r=t(),null===Io)throw Error(n(349));0!==(30&hl)||Ml(a,t,r)}s.memoizedState=r;var l={value:r,getSnapshot:t};return s.queue=l,Hl(Fl.bind(null,a,l,e),[e]),a.flags|=2048,zl(9,Rl.bind(null,a,l,r,t),void 0,null),r},useId:function(){var e=Sl(),t=Io.identifierPrefix;if(pn){var r=nn;t=":"+t+"R"+(r=(sn&~(1<<32-pt(sn)-1)).toString(32)+r),0<(r=bl++)&&(t+="H"+r.toString(32)),t+=":"}else t=":"+t+"r"+(r=jl++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},oi={readContext:zn,useCallback:Gl,useContext:zn,useEffect:Vl,useImperativeHandle:Ql,useInsertionEffect:Wl,useLayoutEffect:$l,useMemo:Yl,useReducer:Pl,useRef:Ul,useState:function(){return Pl(El)},useDebugValue:Jl,useDeferredValue:function(e){return Xl(Cl(),fl.memoizedState,e)},useTransition:function(){return[Pl(El)[0],Cl().memoizedState]},useMutableSource:Al,useSyncExternalStore:Ol,useId:ei,unstable_isNewReconciler:!1},ci={readContext:zn,useCallback:Gl,useContext:zn,useEffect:Vl,useImperativeHandle:Ql,useInsertionEffect:Wl,useLayoutEffect:$l,useMemo:Yl,useReducer:Tl,useRef:Ul,useState:function(){return Tl(El)},useDebugValue:Jl,useDeferredValue:function(e){var t=Cl();return null===fl?t.memoizedState=e:Xl(t,fl.memoizedState,e)},useTransition:function(){return[Tl(El)[0],Cl().memoizedState]},useMutableSource:Al,useSyncExternalStore:Ol,useId:ei,unstable_isNewReconciler:!1};function di(e,t){if(e&&e.defaultProps){for(var r in t=D({},t),e=e.defaultProps)void 0===t[r]&&(t[r]=e[r]);return t}return t}function ui(e,t,r,a){r=null===(r=r(a,t=e.memoizedState))||void 0===r?t:D({},t,r),e.memoizedState=r,0===e.lanes&&(e.updateQueue.baseState=r)}var mi={isMounted:function(e){return!!(e=e._reactInternals)&&Be(e)===e},enqueueSetState:function(e,t,r){e=e._reactInternals;var a=cc(),s=dc(e),n=Kn(a,s);n.payload=t,void 0!==r&&null!==r&&(n.callback=r),null!==(t=Qn(e,n,s))&&(uc(t,e,s,a),Jn(t,e,s))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var a=cc(),s=dc(e),n=Kn(a,s);n.tag=1,n.payload=t,void 0!==r&&null!==r&&(n.callback=r),null!==(t=Qn(e,n,s))&&(uc(t,e,s,a),Jn(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=cc(),a=dc(e),s=Kn(r,a);s.tag=2,void 0!==t&&null!==t&&(s.callback=t),null!==(t=Qn(e,s,a))&&(uc(t,e,a,r),Jn(t,e,a))}};function pi(e,t,r,a,s,n,l){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(a,n,l):!t.prototype||!t.prototype.isPureReactComponent||(!fa(r,a)||!fa(s,n))}function hi(e,t,r){var a=!1,s=Fs,n=t.contextType;return"object"===typeof n&&null!==n?n=zn(n):(s=Us(t)?Is:Ls.current,n=(a=null!==(a=t.contextTypes)&&void 0!==a)?zs(e,s):Fs),t=new t(r,n),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=mi,e.stateNode=t,t._reactInternals=e,a&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=n),t}function xi(e,t,r,a){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(r,a),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(r,a),t.state!==e&&mi.enqueueReplaceState(t,t.state,null)}function fi(e,t,r,a){var s=e.stateNode;s.props=r,s.state=e.memoizedState,s.refs={},Wn(e);var n=t.contextType;"object"===typeof n&&null!==n?s.context=zn(n):(n=Us(t)?Is:Ls.current,s.context=zs(e,n)),s.state=e.memoizedState,"function"===typeof(n=t.getDerivedStateFromProps)&&(ui(e,t,n,r),s.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof s.getSnapshotBeforeUpdate||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||(t=s.state,"function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount(),t!==s.state&&mi.enqueueReplaceState(s,s.state,null),Yn(e,r,s,a),s.state=e.memoizedState),"function"===typeof s.componentDidMount&&(e.flags|=4194308)}function gi(e,t){try{var r="",a=t;do{r+=B(a),a=a.return}while(a);var s=r}catch(tt){s="\nError generating stack: "+tt.message+"\n"+tt.stack}return{value:e,source:t,stack:s,digest:null}}function yi(e,t,r){return{value:e,source:null,stack:null!=r?r:null,digest:null!=t?t:null}}function vi(e,t){try{console.error(t.value)}catch(Ge){setTimeout(function(){throw Ge})}}var bi="function"===typeof WeakMap?WeakMap:Map;function ji(e,t,r){(r=Kn(-1,r)).tag=3,r.payload={element:null};var a=t.value;return r.callback=function(){Zo||(Zo=!0,ec=a),vi(0,t)},r}function wi(e,t,r){(r=Kn(-1,r)).tag=3;var a=e.type.getDerivedStateFromError;if("function"===typeof a){var s=t.value;r.payload=function(){return a(s)},r.callback=function(){vi(0,t)}}var n=e.stateNode;return null!==n&&"function"===typeof n.componentDidCatch&&(r.callback=function(){vi(0,t),"function"!==typeof a&&(null===tc?tc=new Set([this]):tc.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),r}function Ni(e,t,r){var a=e.pingCache;if(null===a){a=e.pingCache=new bi;var s=new Set;a.set(t,s)}else void 0===(s=a.get(t))&&(s=new Set,a.set(t,s));s.has(r)||(s.add(r),e=Rc.bind(null,e,t,r),t.then(e,e))}function ki(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function _i(e,t,r,a,s){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,1===r.tag&&(null===r.alternate?r.tag=17:((t=Kn(-1,1)).tag=2,Qn(r,t,1))),r.lanes|=1),e):(e.flags|=65536,e.lanes=s,e)}var Si=b.ReactCurrentOwner,Ci=!1;function Ei(e,t,r,a){t.child=null===e?Tn(t,null,r,a):Pn(t,e.child,r,a)}function Pi(e,t,r,a,s){r=r.render;var n=t.ref;return In(t,s),a=kl(e,t,r,a,n,s),r=_l(),null===e||Ci?(pn&&r&&cn(t),t.flags|=1,Ei(e,t,a,s),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Xi(e,t,s))}function Ti(e,t,r,a,s){if(null===e){var n=r.type;return"function"!==typeof n||Bc(n)||void 0!==n.defaultProps||null!==r.compare||void 0!==r.defaultProps?((e=Hc(r.type,null,a,t,t.mode,s)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=n,Ai(e,t,n,a,s))}if(n=e.child,0===(e.lanes&s)){var l=n.memoizedProps;if((r=null!==(r=r.compare)?r:fa)(l,a)&&e.ref===t.ref)return Xi(e,t,s)}return t.flags|=1,(e=qc(n,a)).ref=t.ref,e.return=t,t.child=e}function Ai(e,t,r,a,s){if(null!==e){var n=e.memoizedProps;if(fa(n,a)&&e.ref===t.ref){if(Ci=!1,t.pendingProps=a=n,0===(e.lanes&s))return t.lanes=e.lanes,Xi(e,t,s);0!==(131072&e.flags)&&(Ci=!0)}}return Ri(e,t,r,a,s)}function Oi(e,t,r){var a=t.pendingProps,s=a.children,n=null!==e?e.memoizedState:null;if("hidden"===a.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Rs(qo,Bo),Bo|=r;else{if(0===(1073741824&r))return e=null!==n?n.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Rs(qo,Bo),Bo|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},a=null!==n?n.baseLanes:r,Rs(qo,Bo),Bo|=a}else null!==n?(a=n.baseLanes|r,t.memoizedState=null):a=r,Rs(qo,Bo),Bo|=a;return Ei(e,t,s,r),t.child}function Mi(e,t){var r=t.ref;(null===e&&null!==r||null!==e&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function Ri(e,t,r,a,s){var n=Us(r)?Is:Ls.current;return n=zs(t,n),In(t,s),r=kl(e,t,r,a,n,s),a=_l(),null===e||Ci?(pn&&a&&cn(t),t.flags|=1,Ei(e,t,r,s),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Xi(e,t,s))}function Fi(e,t,r,a,s){if(Us(r)){var n=!0;Vs(t)}else n=!1;if(In(t,s),null===t.stateNode)Yi(e,t),hi(t,r,a),fi(t,r,a,s),a=!0;else if(null===e){var l=t.stateNode,i=t.memoizedProps;l.props=i;var o=l.context,c=r.contextType;"object"===typeof c&&null!==c?c=zn(c):c=zs(t,c=Us(r)?Is:Ls.current);var d=r.getDerivedStateFromProps,u="function"===typeof d||"function"===typeof l.getSnapshotBeforeUpdate;u||"function"!==typeof l.UNSAFE_componentWillReceiveProps&&"function"!==typeof l.componentWillReceiveProps||(i!==a||o!==c)&&xi(t,l,a,c),Vn=!1;var m=t.memoizedState;l.state=m,Yn(t,a,l,s),o=t.memoizedState,i!==a||m!==o||Ds.current||Vn?("function"===typeof d&&(ui(t,r,d,a),o=t.memoizedState),(i=Vn||pi(t,r,i,a,m,o,c))?(u||"function"!==typeof l.UNSAFE_componentWillMount&&"function"!==typeof l.componentWillMount||("function"===typeof l.componentWillMount&&l.componentWillMount(),"function"===typeof l.UNSAFE_componentWillMount&&l.UNSAFE_componentWillMount()),"function"===typeof l.componentDidMount&&(t.flags|=4194308)):("function"===typeof l.componentDidMount&&(t.flags|=4194308),t.memoizedProps=a,t.memoizedState=o),l.props=a,l.state=o,l.context=c,a=i):("function"===typeof l.componentDidMount&&(t.flags|=4194308),a=!1)}else{l=t.stateNode,$n(e,t),i=t.memoizedProps,c=t.type===t.elementType?i:di(t.type,i),l.props=c,u=t.pendingProps,m=l.context,"object"===typeof(o=r.contextType)&&null!==o?o=zn(o):o=zs(t,o=Us(r)?Is:Ls.current);var p=r.getDerivedStateFromProps;(d="function"===typeof p||"function"===typeof l.getSnapshotBeforeUpdate)||"function"!==typeof l.UNSAFE_componentWillReceiveProps&&"function"!==typeof l.componentWillReceiveProps||(i!==u||m!==o)&&xi(t,l,a,o),Vn=!1,m=t.memoizedState,l.state=m,Yn(t,a,l,s);var h=t.memoizedState;i!==u||m!==h||Ds.current||Vn?("function"===typeof p&&(ui(t,r,p,a),h=t.memoizedState),(c=Vn||pi(t,r,c,a,m,h,o)||!1)?(d||"function"!==typeof l.UNSAFE_componentWillUpdate&&"function"!==typeof l.componentWillUpdate||("function"===typeof l.componentWillUpdate&&l.componentWillUpdate(a,h,o),"function"===typeof l.UNSAFE_componentWillUpdate&&l.UNSAFE_componentWillUpdate(a,h,o)),"function"===typeof l.componentDidUpdate&&(t.flags|=4),"function"===typeof l.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof l.componentDidUpdate||i===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),"function"!==typeof l.getSnapshotBeforeUpdate||i===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),t.memoizedProps=a,t.memoizedState=h),l.props=a,l.state=h,l.context=o,a=c):("function"!==typeof l.componentDidUpdate||i===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),"function"!==typeof l.getSnapshotBeforeUpdate||i===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),a=!1)}return Li(e,t,r,a,n,s)}function Li(e,t,r,a,s,n){Mi(e,t);var l=0!==(128&t.flags);if(!a&&!l)return s&&Ws(t,r,!1),Xi(e,t,n);a=t.stateNode,Si.current=t;var i=l&&"function"!==typeof r.getDerivedStateFromError?null:a.render();return t.flags|=1,null!==e&&l?(t.child=Pn(t,e.child,null,n),t.child=Pn(t,null,i,n)):Ei(e,t,i,n),t.memoizedState=a.state,s&&Ws(t,r,!0),t.child}function Di(e){var t=e.stateNode;t.pendingContext?qs(0,t.pendingContext,t.pendingContext!==t.context):t.context&&qs(0,t.context,!1),sl(e,t.containerInfo)}function Ii(e,t,r,a,s){return wn(),Nn(s),t.flags|=256,Ei(e,t,r,a),t.child}var zi,Ui,Bi,qi,Hi={dehydrated:null,treeContext:null,retryLane:0};function Vi(e){return{baseLanes:e,cachePool:null,transitions:null}}function Wi(e,t,r){var a,s=t.pendingProps,l=ol.current,i=!1,o=0!==(128&t.flags);if((a=o)||(a=(null===e||null!==e.memoizedState)&&0!==(2&l)),a?(i=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(l|=1),Rs(ol,1&l),null===e)return yn(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(o=s.children,e=s.fallback,i?(s=t.mode,i=t.child,o={mode:"hidden",children:o},0===(1&s)&&null!==i?(i.childLanes=0,i.pendingProps=o):i=Wc(o,s,0,null),e=Vc(e,s,r,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=Vi(r),t.memoizedState=Hi,e):$i(t,o));if(null!==(l=e.memoizedState)&&null!==(a=l.dehydrated))return function(e,t,r,a,s,l,i){if(r)return 256&t.flags?(t.flags&=-257,Ki(e,t,i,a=yi(Error(n(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(l=a.fallback,s=t.mode,a=Wc({mode:"visible",children:a.children},s,0,null),(l=Vc(l,s,i,null)).flags|=2,a.return=t,l.return=t,a.sibling=l,t.child=a,0!==(1&t.mode)&&Pn(t,e.child,null,i),t.child.memoizedState=Vi(i),t.memoizedState=Hi,l);if(0===(1&t.mode))return Ki(e,t,i,null);if("$!"===s.data){if(a=s.nextSibling&&s.nextSibling.dataset)var o=a.dgst;return a=o,Ki(e,t,i,a=yi(l=Error(n(419)),a,void 0))}if(o=0!==(i&e.childLanes),Ci||o){if(null!==(a=Io)){switch(i&-i){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}0!==(s=0!==(s&(a.suspendedLanes|i))?0:s)&&s!==l.retryLane&&(l.retryLane=s,Hn(e,s),uc(a,e,s,-1))}return kc(),Ki(e,t,i,a=yi(Error(n(421))))}return"$?"===s.data?(t.flags|=128,t.child=e.child,t=Lc.bind(null,e),s._reactRetry=t,null):(e=l.treeContext,mn=gs(s.nextSibling),un=t,pn=!0,hn=null,null!==e&&(tn[rn++]=sn,tn[rn++]=nn,tn[rn++]=an,sn=e.id,nn=e.overflow,an=t),t=$i(t,a.children),t.flags|=4096,t)}(e,t,o,s,a,l,r);if(i){i=s.fallback,o=t.mode,a=(l=e.child).sibling;var c={mode:"hidden",children:s.children};return 0===(1&o)&&t.child!==l?((s=t.child).childLanes=0,s.pendingProps=c,t.deletions=null):(s=qc(l,c)).subtreeFlags=14680064&l.subtreeFlags,null!==a?i=qc(a,i):(i=Vc(i,o,r,null)).flags|=2,i.return=t,s.return=t,s.sibling=i,t.child=s,s=i,i=t.child,o=null===(o=e.child.memoizedState)?Vi(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=e.childLanes&~r,t.memoizedState=Hi,s}return e=(i=e.child).sibling,s=qc(i,{mode:"visible",children:s.children}),0===(1&t.mode)&&(s.lanes=r),s.return=t,s.sibling=null,null!==e&&(null===(r=t.deletions)?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=s,t.memoizedState=null,s}function $i(e,t){return(t=Wc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Ki(e,t,r,a){return null!==a&&Nn(a),Pn(t,e.child,null,r),(e=$i(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Qi(e,t,r){e.lanes|=t;var a=e.alternate;null!==a&&(a.lanes|=t),Dn(e.return,t,r)}function Ji(e,t,r,a,s){var n=e.memoizedState;null===n?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:a,tail:r,tailMode:s}:(n.isBackwards=t,n.rendering=null,n.renderingStartTime=0,n.last=a,n.tail=r,n.tailMode=s)}function Gi(e,t,r){var a=t.pendingProps,s=a.revealOrder,n=a.tail;if(Ei(e,t,a.children,r),0!==(2&(a=ol.current)))a=1&a|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Qi(e,r,t);else if(19===e.tag)Qi(e,r,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}a&=1}if(Rs(ol,a),0===(1&t.mode))t.memoizedState=null;else switch(s){case"forwards":for(r=t.child,s=null;null!==r;)null!==(e=r.alternate)&&null===cl(e)&&(s=r),r=r.sibling;null===(r=s)?(s=t.child,t.child=null):(s=r.sibling,r.sibling=null),Ji(t,!1,s,r,n);break;case"backwards":for(r=null,s=t.child,t.child=null;null!==s;){if(null!==(e=s.alternate)&&null===cl(e)){t.child=s;break}e=s.sibling,s.sibling=r,r=s,s=e}Ji(t,!0,r,null,n);break;case"together":Ji(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Yi(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Xi(e,t,r){if(null!==e&&(t.dependencies=e.dependencies),Wo|=t.lanes,0===(r&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(n(153));if(null!==t.child){for(r=qc(e=t.child,e.pendingProps),t.child=r,r.return=t;null!==e.sibling;)e=e.sibling,(r=r.sibling=qc(e,e.pendingProps)).return=t;r.sibling=null}return t.child}function Zi(e,t){if(!pn)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;null!==t;)null!==t.alternate&&(r=t),t=t.sibling;null===r?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var a=null;null!==r;)null!==r.alternate&&(a=r),r=r.sibling;null===a?t||null===e.tail?e.tail=null:e.tail.sibling=null:a.sibling=null}}function eo(e){var t=null!==e.alternate&&e.alternate.child===e.child,r=0,a=0;if(t)for(var s=e.child;null!==s;)r|=s.lanes|s.childLanes,a|=14680064&s.subtreeFlags,a|=14680064&s.flags,s.return=e,s=s.sibling;else for(s=e.child;null!==s;)r|=s.lanes|s.childLanes,a|=s.subtreeFlags,a|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=a,e.childLanes=r,t}function to(e,t,r){var a=t.pendingProps;switch(dn(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return eo(t),null;case 1:case 17:return Us(t.type)&&Bs(),eo(t),null;case 3:return a=t.stateNode,nl(),Ms(Ds),Ms(Ls),ul(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),null!==e&&null!==e.child||(bn(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==hn&&(xc(hn),hn=null))),Ui(e,t),eo(t),null;case 5:il(t);var s=al(rl.current);if(r=t.type,null!==e&&null!=t.stateNode)Bi(e,t,r,a,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!a){if(null===t.stateNode)throw Error(n(166));return eo(t),null}if(e=al(el.current),bn(t)){a=t.stateNode,r=t.type;var l=t.memoizedProps;switch(a[bs]=t,a[js]=l,e=0!==(1&t.mode),r){case"dialog":Ka("cancel",a),Ka("close",a);break;case"iframe":case"object":case"embed":Ka("load",a);break;case"video":case"audio":for(s=0;s<Ha.length;s++)Ka(Ha[s],a);break;case"source":Ka("error",a);break;case"img":case"image":case"link":Ka("error",a),Ka("load",a);break;case"details":Ka("toggle",a);break;case"input":G(a,l),Ka("invalid",a);break;case"select":a._wrapperState={wasMultiple:!!l.multiple},Ka("invalid",a);break;case"textarea":se(a,l),Ka("invalid",a)}for(var o in ge(r,l),s=null,l)if(l.hasOwnProperty(o)){var c=l[o];"children"===o?"string"===typeof c?a.textContent!==c&&(!0!==l.suppressHydrationWarning&&ls(a.textContent,c,e),s=["children",c]):"number"===typeof c&&a.textContent!==""+c&&(!0!==l.suppressHydrationWarning&&ls(a.textContent,c,e),s=["children",""+c]):i.hasOwnProperty(o)&&null!=c&&"onScroll"===o&&Ka("scroll",a)}switch(r){case"input":$(a),Z(a,l,!0);break;case"textarea":$(a),le(a);break;case"select":case"option":break;default:"function"===typeof l.onClick&&(a.onclick=is)}a=s,t.updateQueue=a,null!==a&&(t.flags|=4)}else{o=9===s.nodeType?s:s.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ie(r)),"http://www.w3.org/1999/xhtml"===e?"script"===r?((e=o.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof a.is?e=o.createElement(r,{is:a.is}):(e=o.createElement(r),"select"===r&&(o=e,a.multiple?o.multiple=!0:a.size&&(o.size=a.size))):e=o.createElementNS(e,r),e[bs]=t,e[js]=a,zi(e,t,!1,!1),t.stateNode=e;e:{switch(o=ye(r,a),r){case"dialog":Ka("cancel",e),Ka("close",e),s=a;break;case"iframe":case"object":case"embed":Ka("load",e),s=a;break;case"video":case"audio":for(s=0;s<Ha.length;s++)Ka(Ha[s],e);s=a;break;case"source":Ka("error",e),s=a;break;case"img":case"image":case"link":Ka("error",e),Ka("load",e),s=a;break;case"details":Ka("toggle",e),s=a;break;case"input":G(e,a),s=J(e,a),Ka("invalid",e);break;case"option":default:s=a;break;case"select":e._wrapperState={wasMultiple:!!a.multiple},s=D({},a,{value:void 0}),Ka("invalid",e);break;case"textarea":se(e,a),s=ae(e,a),Ka("invalid",e)}for(l in ge(r,s),c=s)if(c.hasOwnProperty(l)){var d=c[l];"style"===l?xe(e,d):"dangerouslySetInnerHTML"===l?null!=(d=d?d.__html:void 0)&&de(e,d):"children"===l?"string"===typeof d?("textarea"!==r||""!==d)&&ue(e,d):"number"===typeof d&&ue(e,""+d):"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&"autoFocus"!==l&&(i.hasOwnProperty(l)?null!=d&&"onScroll"===l&&Ka("scroll",e):null!=d&&v(e,l,d,o))}switch(r){case"input":$(e),Z(e,a,!1);break;case"textarea":$(e),le(e);break;case"option":null!=a.value&&e.setAttribute("value",""+V(a.value));break;case"select":e.multiple=!!a.multiple,null!=(l=a.value)?re(e,!!a.multiple,l,!1):null!=a.defaultValue&&re(e,!!a.multiple,a.defaultValue,!0);break;default:"function"===typeof s.onClick&&(e.onclick=is)}switch(r){case"button":case"input":case"select":case"textarea":a=!!a.autoFocus;break e;case"img":a=!0;break e;default:a=!1}}a&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return eo(t),null;case 6:if(e&&null!=t.stateNode)qi(e,t,e.memoizedProps,a);else{if("string"!==typeof a&&null===t.stateNode)throw Error(n(166));if(r=al(rl.current),al(el.current),bn(t)){if(a=t.stateNode,r=t.memoizedProps,a[bs]=t,(l=a.nodeValue!==r)&&null!==(e=un))switch(e.tag){case 3:ls(a.nodeValue,r,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&ls(a.nodeValue,r,0!==(1&e.mode))}l&&(t.flags|=4)}else(a=(9===r.nodeType?r:r.ownerDocument).createTextNode(a))[bs]=t,t.stateNode=a}return eo(t),null;case 13:if(Ms(ol),a=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(pn&&null!==mn&&0!==(1&t.mode)&&0===(128&t.flags))jn(),wn(),t.flags|=98560,l=!1;else if(l=bn(t),null!==a&&null!==a.dehydrated){if(null===e){if(!l)throw Error(n(318));if(!(l=null!==(l=t.memoizedState)?l.dehydrated:null))throw Error(n(317));l[bs]=t}else wn(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;eo(t),l=!1}else null!==hn&&(xc(hn),hn=null),l=!0;if(!l)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=r,t):((a=null!==a)!==(null!==e&&null!==e.memoizedState)&&a&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&ol.current)?0===Ho&&(Ho=3):kc())),null!==t.updateQueue&&(t.flags|=4),eo(t),null);case 4:return nl(),Ui(e,t),null===e&&Ga(t.stateNode.containerInfo),eo(t),null;case 10:return Ln(t.type._context),eo(t),null;case 19:if(Ms(ol),null===(l=t.memoizedState))return eo(t),null;if(a=0!==(128&t.flags),null===(o=l.rendering))if(a)Zi(l,!1);else{if(0!==Ho||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(o=cl(e))){for(t.flags|=128,Zi(l,!1),null!==(a=o.updateQueue)&&(t.updateQueue=a,t.flags|=4),t.subtreeFlags=0,a=r,r=t.child;null!==r;)e=a,(l=r).flags&=14680066,null===(o=l.alternate)?(l.childLanes=0,l.lanes=e,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=o.childLanes,l.lanes=o.lanes,l.child=o.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=o.memoizedProps,l.memoizedState=o.memoizedState,l.updateQueue=o.updateQueue,l.type=o.type,e=o.dependencies,l.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return Rs(ol,1&ol.current|2),t.child}e=e.sibling}null!==l.tail&&st()>Yo&&(t.flags|=128,a=!0,Zi(l,!1),t.lanes=4194304)}else{if(!a)if(null!==(e=cl(o))){if(t.flags|=128,a=!0,null!==(r=e.updateQueue)&&(t.updateQueue=r,t.flags|=4),Zi(l,!0),null===l.tail&&"hidden"===l.tailMode&&!o.alternate&&!pn)return eo(t),null}else 2*st()-l.renderingStartTime>Yo&&1073741824!==r&&(t.flags|=128,a=!0,Zi(l,!1),t.lanes=4194304);l.isBackwards?(o.sibling=t.child,t.child=o):(null!==(r=l.last)?r.sibling=o:t.child=o,l.last=o)}return null!==l.tail?(t=l.tail,l.rendering=t,l.tail=t.sibling,l.renderingStartTime=st(),t.sibling=null,r=ol.current,Rs(ol,a?1&r|2:1&r),t):(eo(t),null);case 22:case 23:return bc(),a=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==a&&(t.flags|=8192),a&&0!==(1&t.mode)?0!==(1073741824&Bo)&&(eo(t),6&t.subtreeFlags&&(t.flags|=8192)):eo(t),null;case 24:case 25:return null}throw Error(n(156,t.tag))}function ro(e,t){switch(dn(t),t.tag){case 1:return Us(t.type)&&Bs(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return nl(),Ms(Ds),Ms(Ls),ul(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return il(t),null;case 13:if(Ms(ol),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(n(340));wn()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ms(ol),null;case 4:return nl(),null;case 10:return Ln(t.type._context),null;case 22:case 23:return bc(),null;default:return null}}zi=function(e,t){for(var r=t.child;null!==r;){if(5===r.tag||6===r.tag)e.appendChild(r.stateNode);else if(4!==r.tag&&null!==r.child){r.child.return=r,r=r.child;continue}if(r===t)break;for(;null===r.sibling;){if(null===r.return||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}},Ui=function(){},Bi=function(e,t,r,a){var s=e.memoizedProps;if(s!==a){e=t.stateNode,al(el.current);var n,l=null;switch(r){case"input":s=J(e,s),a=J(e,a),l=[];break;case"select":s=D({},s,{value:void 0}),a=D({},a,{value:void 0}),l=[];break;case"textarea":s=ae(e,s),a=ae(e,a),l=[];break;default:"function"!==typeof s.onClick&&"function"===typeof a.onClick&&(e.onclick=is)}for(d in ge(r,a),r=null,s)if(!a.hasOwnProperty(d)&&s.hasOwnProperty(d)&&null!=s[d])if("style"===d){var o=s[d];for(n in o)o.hasOwnProperty(n)&&(r||(r={}),r[n]="")}else"dangerouslySetInnerHTML"!==d&&"children"!==d&&"suppressContentEditableWarning"!==d&&"suppressHydrationWarning"!==d&&"autoFocus"!==d&&(i.hasOwnProperty(d)?l||(l=[]):(l=l||[]).push(d,null));for(d in a){var c=a[d];if(o=null!=s?s[d]:void 0,a.hasOwnProperty(d)&&c!==o&&(null!=c||null!=o))if("style"===d)if(o){for(n in o)!o.hasOwnProperty(n)||c&&c.hasOwnProperty(n)||(r||(r={}),r[n]="");for(n in c)c.hasOwnProperty(n)&&o[n]!==c[n]&&(r||(r={}),r[n]=c[n])}else r||(l||(l=[]),l.push(d,r)),r=c;else"dangerouslySetInnerHTML"===d?(c=c?c.__html:void 0,o=o?o.__html:void 0,null!=c&&o!==c&&(l=l||[]).push(d,c)):"children"===d?"string"!==typeof c&&"number"!==typeof c||(l=l||[]).push(d,""+c):"suppressContentEditableWarning"!==d&&"suppressHydrationWarning"!==d&&(i.hasOwnProperty(d)?(null!=c&&"onScroll"===d&&Ka("scroll",e),l||o===c||(l=[])):(l=l||[]).push(d,c))}r&&(l=l||[]).push("style",r);var d=l;(t.updateQueue=d)&&(t.flags|=4)}},qi=function(e,t,r,a){r!==a&&(t.flags|=4)};var ao=!1,so=!1,no="function"===typeof WeakSet?WeakSet:Set,lo=null;function io(e,t){var r=e.ref;if(null!==r)if("function"===typeof r)try{r(null)}catch(et){Mc(e,t,et)}else r.current=null}function oo(e,t,r){try{r()}catch(et){Mc(e,t,et)}}var co=!1;function uo(e,t,r){var a=t.updateQueue;if(null!==(a=null!==a?a.lastEffect:null)){var s=a=a.next;do{if((s.tag&e)===e){var n=s.destroy;s.destroy=void 0,void 0!==n&&oo(t,r,n)}s=s.next}while(s!==a)}}function mo(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var r=t=t.next;do{if((r.tag&e)===e){var a=r.create;r.destroy=a()}r=r.next}while(r!==t)}}function po(e){var t=e.ref;if(null!==t){var r=e.stateNode;e.tag,e=r,"function"===typeof t?t(e):t.current=e}}function ho(e){var t=e.alternate;null!==t&&(e.alternate=null,ho(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[bs],delete t[js],delete t[Ns],delete t[ks],delete t[_s])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function xo(e){return 5===e.tag||3===e.tag||4===e.tag}function fo(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||xo(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function go(e,t,r){var a=e.tag;if(5===a||6===a)e=e.stateNode,t?8===r.nodeType?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(8===r.nodeType?(t=r.parentNode).insertBefore(e,r):(t=r).appendChild(e),null!==(r=r._reactRootContainer)&&void 0!==r||null!==t.onclick||(t.onclick=is));else if(4!==a&&null!==(e=e.child))for(go(e,t,r),e=e.sibling;null!==e;)go(e,t,r),e=e.sibling}function yo(e,t,r){var a=e.tag;if(5===a||6===a)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(4!==a&&null!==(e=e.child))for(yo(e,t,r),e=e.sibling;null!==e;)yo(e,t,r),e=e.sibling}var vo=null,bo=!1;function jo(e,t,r){for(r=r.child;null!==r;)wo(e,t,r),r=r.sibling}function wo(e,t,r){if(mt&&"function"===typeof mt.onCommitFiberUnmount)try{mt.onCommitFiberUnmount(ut,r)}catch(at){}switch(r.tag){case 5:so||io(r,t);case 6:var a=vo,s=bo;vo=null,jo(e,t,r),bo=s,null!==(vo=a)&&(bo?(e=vo,r=r.stateNode,8===e.nodeType?e.parentNode.removeChild(r):e.removeChild(r)):vo.removeChild(r.stateNode));break;case 18:null!==vo&&(bo?(e=vo,r=r.stateNode,8===e.nodeType?fs(e.parentNode,r):1===e.nodeType&&fs(e,r),Yt(e)):fs(vo,r.stateNode));break;case 4:a=vo,s=bo,vo=r.stateNode.containerInfo,bo=!0,jo(e,t,r),vo=a,bo=s;break;case 0:case 11:case 14:case 15:if(!so&&(null!==(a=r.updateQueue)&&null!==(a=a.lastEffect))){s=a=a.next;do{var n=s,l=n.destroy;n=n.tag,void 0!==l&&(0!==(2&n)||0!==(4&n))&&oo(r,t,l),s=s.next}while(s!==a)}jo(e,t,r);break;case 1:if(!so&&(io(r,t),"function"===typeof(a=r.stateNode).componentWillUnmount))try{a.props=r.memoizedProps,a.state=r.memoizedState,a.componentWillUnmount()}catch(at){Mc(r,t,at)}jo(e,t,r);break;case 21:jo(e,t,r);break;case 22:1&r.mode?(so=(a=so)||null!==r.memoizedState,jo(e,t,r),so=a):jo(e,t,r);break;default:jo(e,t,r)}}function No(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var r=e.stateNode;null===r&&(r=e.stateNode=new no),t.forEach(function(t){var a=Dc.bind(null,e,t);r.has(t)||(r.add(t),t.then(a,a))})}}function ko(e,t){var r=t.deletions;if(null!==r)for(var a=0;a<r.length;a++){var s=r[a];try{var l=e,i=t,o=i;e:for(;null!==o;){switch(o.tag){case 5:vo=o.stateNode,bo=!1;break e;case 3:case 4:vo=o.stateNode.containerInfo,bo=!0;break e}o=o.return}if(null===vo)throw Error(n(160));wo(l,i,s),vo=null,bo=!1;var c=s.alternate;null!==c&&(c.return=null),s.return=null}catch($e){Mc(s,t,$e)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)_o(t,e),t=t.sibling}function _o(e,t){var r=e.alternate,a=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ko(t,e),So(e),4&a){try{uo(3,e,e.return),mo(3,e)}catch(We){Mc(e,e.return,We)}try{uo(5,e,e.return)}catch(We){Mc(e,e.return,We)}}break;case 1:ko(t,e),So(e),512&a&&null!==r&&io(r,r.return);break;case 5:if(ko(t,e),So(e),512&a&&null!==r&&io(r,r.return),32&e.flags){var s=e.stateNode;try{ue(s,"")}catch(We){Mc(e,e.return,We)}}if(4&a&&null!=(s=e.stateNode)){var l=e.memoizedProps,i=null!==r?r.memoizedProps:l,o=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===o&&"radio"===l.type&&null!=l.name&&Y(s,l),ye(o,i);var d=ye(o,l);for(i=0;i<c.length;i+=2){var u=c[i],m=c[i+1];"style"===u?xe(s,m):"dangerouslySetInnerHTML"===u?de(s,m):"children"===u?ue(s,m):v(s,u,m,d)}switch(o){case"input":X(s,l);break;case"textarea":ne(s,l);break;case"select":var p=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!l.multiple;var h=l.value;null!=h?re(s,!!l.multiple,h,!1):p!==!!l.multiple&&(null!=l.defaultValue?re(s,!!l.multiple,l.defaultValue,!0):re(s,!!l.multiple,l.multiple?[]:"",!1))}s[js]=l}catch(We){Mc(e,e.return,We)}}break;case 6:if(ko(t,e),So(e),4&a){if(null===e.stateNode)throw Error(n(162));s=e.stateNode,l=e.memoizedProps;try{s.nodeValue=l}catch(We){Mc(e,e.return,We)}}break;case 3:if(ko(t,e),So(e),4&a&&null!==r&&r.memoizedState.isDehydrated)try{Yt(t.containerInfo)}catch(We){Mc(e,e.return,We)}break;case 4:default:ko(t,e),So(e);break;case 13:ko(t,e),So(e),8192&(s=e.child).flags&&(l=null!==s.memoizedState,s.stateNode.isHidden=l,!l||null!==s.alternate&&null!==s.alternate.memoizedState||(Go=st())),4&a&&No(e);break;case 22:if(u=null!==r&&null!==r.memoizedState,1&e.mode?(so=(d=so)||u,ko(t,e),so=d):ko(t,e),So(e),8192&a){if(d=null!==e.memoizedState,(e.stateNode.isHidden=d)&&!u&&0!==(1&e.mode))for(lo=e,u=e.child;null!==u;){for(m=lo=u;null!==lo;){switch(h=(p=lo).child,p.tag){case 0:case 11:case 14:case 15:uo(4,p,p.return);break;case 1:io(p,p.return);var x=p.stateNode;if("function"===typeof x.componentWillUnmount){a=p,r=p.return;try{t=a,x.props=t.memoizedProps,x.state=t.memoizedState,x.componentWillUnmount()}catch(We){Mc(a,r,We)}}break;case 5:io(p,p.return);break;case 22:if(null!==p.memoizedState){To(m);continue}}null!==h?(h.return=p,lo=h):To(m)}u=u.sibling}e:for(u=null,m=e;;){if(5===m.tag){if(null===u){u=m;try{s=m.stateNode,d?"function"===typeof(l=s.style).setProperty?l.setProperty("display","none","important"):l.display="none":(o=m.stateNode,i=void 0!==(c=m.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,o.style.display=he("display",i))}catch(We){Mc(e,e.return,We)}}}else if(6===m.tag){if(null===u)try{m.stateNode.nodeValue=d?"":m.memoizedProps}catch(We){Mc(e,e.return,We)}}else if((22!==m.tag&&23!==m.tag||null===m.memoizedState||m===e)&&null!==m.child){m.child.return=m,m=m.child;continue}if(m===e)break e;for(;null===m.sibling;){if(null===m.return||m.return===e)break e;u===m&&(u=null),m=m.return}u===m&&(u=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:ko(t,e),So(e),4&a&&No(e);case 21:}}function So(e){var t=e.flags;if(2&t){try{e:{for(var r=e.return;null!==r;){if(xo(r)){var a=r;break e}r=r.return}throw Error(n(160))}switch(a.tag){case 5:var s=a.stateNode;32&a.flags&&(ue(s,""),a.flags&=-33),yo(e,fo(e),s);break;case 3:case 4:var l=a.stateNode.containerInfo;go(e,fo(e),l);break;default:throw Error(n(161))}}catch(kt){Mc(e,e.return,kt)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function Co(e,t,r){lo=e,Eo(e,t,r)}function Eo(e,t,r){for(var a=0!==(1&e.mode);null!==lo;){var s=lo,n=s.child;if(22===s.tag&&a){var l=null!==s.memoizedState||ao;if(!l){var i=s.alternate,o=null!==i&&null!==i.memoizedState||so;i=ao;var c=so;if(ao=l,(so=o)&&!c)for(lo=s;null!==lo;)o=(l=lo).child,22===l.tag&&null!==l.memoizedState?Ao(s):null!==o?(o.return=l,lo=o):Ao(s);for(;null!==n;)lo=n,Eo(n,t,r),n=n.sibling;lo=s,ao=i,so=c}Po(e)}else 0!==(8772&s.subtreeFlags)&&null!==n?(n.return=s,lo=n):Po(e)}}function Po(e){for(;null!==lo;){var t=lo;if(0!==(8772&t.flags)){var r=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:so||mo(5,t);break;case 1:var a=t.stateNode;if(4&t.flags&&!so)if(null===r)a.componentDidMount();else{var s=t.elementType===t.type?r.memoizedProps:di(t.type,r.memoizedProps);a.componentDidUpdate(s,r.memoizedState,a.__reactInternalSnapshotBeforeUpdate)}var l=t.updateQueue;null!==l&&Xn(t,l,a);break;case 3:var i=t.updateQueue;if(null!==i){if(r=null,null!==t.child)switch(t.child.tag){case 5:case 1:r=t.child.stateNode}Xn(t,i,r)}break;case 5:var o=t.stateNode;if(null===r&&4&t.flags){r=o;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var d=t.alternate;if(null!==d){var u=d.memoizedState;if(null!==u){var m=u.dehydrated;null!==m&&Yt(m)}}}break;default:throw Error(n(163))}so||512&t.flags&&po(t)}catch(p){Mc(t,t.return,p)}}if(t===e){lo=null;break}if(null!==(r=t.sibling)){r.return=t.return,lo=r;break}lo=t.return}}function To(e){for(;null!==lo;){var t=lo;if(t===e){lo=null;break}var r=t.sibling;if(null!==r){r.return=t.return,lo=r;break}lo=t.return}}function Ao(e){for(;null!==lo;){var t=lo;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{mo(4,t)}catch(kt){Mc(t,r,kt)}break;case 1:var a=t.stateNode;if("function"===typeof a.componentDidMount){var s=t.return;try{a.componentDidMount()}catch(kt){Mc(t,s,kt)}}var n=t.return;try{po(t)}catch(kt){Mc(t,n,kt)}break;case 5:var l=t.return;try{po(t)}catch(kt){Mc(t,l,kt)}}}catch(kt){Mc(t,t.return,kt)}if(t===e){lo=null;break}var i=t.sibling;if(null!==i){i.return=t.return,lo=i;break}lo=t.return}}var Oo,Mo=Math.ceil,Ro=b.ReactCurrentDispatcher,Fo=b.ReactCurrentOwner,Lo=b.ReactCurrentBatchConfig,Do=0,Io=null,zo=null,Uo=0,Bo=0,qo=Os(0),Ho=0,Vo=null,Wo=0,$o=0,Ko=0,Qo=null,Jo=null,Go=0,Yo=1/0,Xo=null,Zo=!1,ec=null,tc=null,rc=!1,ac=null,sc=0,nc=0,lc=null,ic=-1,oc=0;function cc(){return 0!==(6&Do)?st():-1!==ic?ic:ic=st()}function dc(e){return 0===(1&e.mode)?1:0!==(2&Do)&&0!==Uo?Uo&-Uo:null!==kn.transition?(0===oc&&(oc=wt()),oc):0!==(e=Ct)?e:e=void 0===(e=window.event)?16:nr(e.type)}function uc(e,t,r,a){if(50<nc)throw nc=0,lc=null,Error(n(185));_t(e,r,a),0!==(2&Do)&&e===Io||(e===Io&&(0===(2&Do)&&($o|=r),4===Ho&&fc(e,Uo)),mc(e,a),1===r&&0===Do&&0===(1&t.mode)&&(Yo=st()+500,Ks&&Gs()))}function mc(e,t){var r=e.callbackNode;!function(e,t){for(var r=e.suspendedLanes,a=e.pingedLanes,s=e.expirationTimes,n=e.pendingLanes;0<n;){var l=31-pt(n),i=1<<l,o=s[l];-1===o?0!==(i&r)&&0===(i&a)||(s[l]=bt(i,t)):o<=t&&(e.expiredLanes|=i),n&=~i}}(e,t);var a=vt(e,e===Io?Uo:0);if(0===a)null!==r&&Xe(r),e.callbackNode=null,e.callbackPriority=0;else if(t=a&-a,e.callbackPriority!==t){if(null!=r&&Xe(r),1===t)0===e.tag?function(e){Ks=!0,Js(e)}(gc.bind(null,e)):Js(gc.bind(null,e)),hs(function(){0===(6&Do)&&Gs()}),r=null;else{switch(Et(a)){case 1:r=lt;break;case 4:r=it;break;case 16:default:r=ot;break;case 536870912:r=dt}r=Ic(r,pc.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function pc(e,t){if(ic=-1,oc=0,0!==(6&Do))throw Error(n(327));var r=e.callbackNode;if(Ac()&&e.callbackNode!==r)return null;var a=vt(e,e===Io?Uo:0);if(0===a)return null;if(0!==(30&a)||0!==(a&e.expiredLanes)||t)t=_c(e,a);else{t=a;var s=Do;Do|=2;var l=Nc();for(Io===e&&Uo===t||(Xo=null,Yo=st()+500,jc(e,t));;)try{Cc();break}catch(at){wc(e,at)}Fn(),Ro.current=l,Do=s,null!==zo?t=0:(Io=null,Uo=0,t=Ho)}if(0!==t){if(2===t&&(0!==(s=jt(e))&&(a=s,t=hc(e,s))),1===t)throw r=Vo,jc(e,0),fc(e,a),mc(e,st()),r;if(6===t)fc(e,a);else{if(s=e.current.alternate,0===(30&a)&&!function(e){for(var t=e;;){if(16384&t.flags){var r=t.updateQueue;if(null!==r&&null!==(r=r.stores))for(var a=0;a<r.length;a++){var s=r[a],n=s.getSnapshot;s=s.value;try{if(!xa(n(),s))return!1}catch(i){return!1}}}if(r=t.child,16384&t.subtreeFlags&&null!==r)r.return=t,t=r;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(s)&&(2===(t=_c(e,a))&&(0!==(l=jt(e))&&(a=l,t=hc(e,l))),1===t))throw r=Vo,jc(e,0),fc(e,a),mc(e,st()),r;switch(e.finishedWork=s,e.finishedLanes=a,t){case 0:case 1:throw Error(n(345));case 2:case 5:Tc(e,Jo,Xo);break;case 3:if(fc(e,a),(130023424&a)===a&&10<(t=Go+500-st())){if(0!==vt(e,0))break;if(((s=e.suspendedLanes)&a)!==a){cc(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=us(Tc.bind(null,e,Jo,Xo),t);break}Tc(e,Jo,Xo);break;case 4:if(fc(e,a),(4194240&a)===a)break;for(t=e.eventTimes,s=-1;0<a;){var i=31-pt(a);l=1<<i,(i=t[i])>s&&(s=i),a&=~l}if(a=s,10<(a=(120>(a=st()-a)?120:480>a?480:1080>a?1080:1920>a?1920:3e3>a?3e3:4320>a?4320:1960*Mo(a/1960))-a)){e.timeoutHandle=us(Tc.bind(null,e,Jo,Xo),a);break}Tc(e,Jo,Xo);break;default:throw Error(n(329))}}}return mc(e,st()),e.callbackNode===r?pc.bind(null,e):null}function hc(e,t){var r=Qo;return e.current.memoizedState.isDehydrated&&(jc(e,t).flags|=256),2!==(e=_c(e,t))&&(t=Jo,Jo=r,null!==t&&xc(t)),e}function xc(e){null===Jo?Jo=e:Jo.push.apply(Jo,e)}function fc(e,t){for(t&=~Ko,t&=~$o,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-pt(t),a=1<<r;e[r]=-1,t&=~a}}function gc(e){if(0!==(6&Do))throw Error(n(327));Ac();var t=vt(e,0);if(0===(1&t))return mc(e,st()),null;var r=_c(e,t);if(0!==e.tag&&2===r){var a=jt(e);0!==a&&(t=a,r=hc(e,a))}if(1===r)throw r=Vo,jc(e,0),fc(e,t),mc(e,st()),r;if(6===r)throw Error(n(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Tc(e,Jo,Xo),mc(e,st()),null}function yc(e,t){var r=Do;Do|=1;try{return e(t)}finally{0===(Do=r)&&(Yo=st()+500,Ks&&Gs())}}function vc(e){null!==ac&&0===ac.tag&&0===(6&Do)&&Ac();var t=Do;Do|=1;var r=Lo.transition,a=Ct;try{if(Lo.transition=null,Ct=1,e)return e()}finally{Ct=a,Lo.transition=r,0===(6&(Do=t))&&Gs()}}function bc(){Bo=qo.current,Ms(qo)}function jc(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(-1!==r&&(e.timeoutHandle=-1,ms(r)),null!==zo)for(r=zo.return;null!==r;){var a=r;switch(dn(a),a.tag){case 1:null!==(a=a.type.childContextTypes)&&void 0!==a&&Bs();break;case 3:nl(),Ms(Ds),Ms(Ls),ul();break;case 5:il(a);break;case 4:nl();break;case 13:case 19:Ms(ol);break;case 10:Ln(a.type._context);break;case 22:case 23:bc()}r=r.return}if(Io=e,zo=e=qc(e.current,null),Uo=Bo=t,Ho=0,Vo=null,Ko=$o=Wo=0,Jo=Qo=null,null!==Un){for(t=0;t<Un.length;t++)if(null!==(a=(r=Un[t]).interleaved)){r.interleaved=null;var s=a.next,n=r.pending;if(null!==n){var l=n.next;n.next=s,a.next=l}r.pending=a}Un=null}return e}function wc(e,t){for(;;){var r=zo;try{if(Fn(),ml.current=li,yl){for(var a=xl.memoizedState;null!==a;){var s=a.queue;null!==s&&(s.pending=null),a=a.next}yl=!1}if(hl=0,gl=fl=xl=null,vl=!1,bl=0,Fo.current=null,null===r||null===r.return){Ho=1,Vo=t,zo=null;break}e:{var l=e,i=r.return,o=r,c=t;if(t=Uo,o.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var d=c,u=o,m=u.tag;if(0===(1&u.mode)&&(0===m||11===m||15===m)){var p=u.alternate;p?(u.updateQueue=p.updateQueue,u.memoizedState=p.memoizedState,u.lanes=p.lanes):(u.updateQueue=null,u.memoizedState=null)}var h=ki(i);if(null!==h){h.flags&=-257,_i(h,i,o,0,t),1&h.mode&&Ni(l,d,t),c=d;var x=(t=h).updateQueue;if(null===x){var f=new Set;f.add(c),t.updateQueue=f}else x.add(c);break e}if(0===(1&t)){Ni(l,d,t),kc();break e}c=Error(n(426))}else if(pn&&1&o.mode){var g=ki(i);if(null!==g){0===(65536&g.flags)&&(g.flags|=256),_i(g,i,o,0,t),Nn(gi(c,o));break e}}l=c=gi(c,o),4!==Ho&&(Ho=2),null===Qo?Qo=[l]:Qo.push(l),l=i;do{switch(l.tag){case 3:l.flags|=65536,t&=-t,l.lanes|=t,Gn(l,ji(0,c,t));break e;case 1:o=c;var y=l.type,v=l.stateNode;if(0===(128&l.flags)&&("function"===typeof y.getDerivedStateFromError||null!==v&&"function"===typeof v.componentDidCatch&&(null===tc||!tc.has(v)))){l.flags|=65536,t&=-t,l.lanes|=t,Gn(l,wi(l,o,t));break e}}l=l.return}while(null!==l)}Pc(r)}catch(b){t=b,zo===r&&null!==r&&(zo=r=r.return);continue}break}}function Nc(){var e=Ro.current;return Ro.current=li,null===e?li:e}function kc(){0!==Ho&&3!==Ho&&2!==Ho||(Ho=4),null===Io||0===(268435455&Wo)&&0===(268435455&$o)||fc(Io,Uo)}function _c(e,t){var r=Do;Do|=2;var a=Nc();for(Io===e&&Uo===t||(Xo=null,jc(e,t));;)try{Sc();break}catch(Ve){wc(e,Ve)}if(Fn(),Do=r,Ro.current=a,null!==zo)throw Error(n(261));return Io=null,Uo=0,Ho}function Sc(){for(;null!==zo;)Ec(zo)}function Cc(){for(;null!==zo&&!Ze();)Ec(zo)}function Ec(e){var t=Oo(e.alternate,e,Bo);e.memoizedProps=e.pendingProps,null===t?Pc(e):zo=t,Fo.current=null}function Pc(e){var t=e;do{var r=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(r=to(r,t,Bo)))return void(zo=r)}else{if(null!==(r=ro(r,t)))return r.flags&=32767,void(zo=r);if(null===e)return Ho=6,void(zo=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(zo=t);zo=t=e}while(null!==t);0===Ho&&(Ho=5)}function Tc(e,t,r){var a=Ct,s=Lo.transition;try{Lo.transition=null,Ct=1,function(e,t,r,a){do{Ac()}while(null!==ac);if(0!==(6&Do))throw Error(n(327));r=e.finishedWork;var s=e.finishedLanes;if(null===r)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(n(177));e.callbackNode=null,e.callbackPriority=0;var l=r.lanes|r.childLanes;if(function(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var a=e.eventTimes;for(e=e.expirationTimes;0<r;){var s=31-pt(r),n=1<<s;t[s]=0,a[s]=-1,e[s]=-1,r&=~n}}(e,l),e===Io&&(zo=Io=null,Uo=0),0===(2064&r.subtreeFlags)&&0===(2064&r.flags)||rc||(rc=!0,Ic(ot,function(){return Ac(),null})),l=0!==(15990&r.flags),0!==(15990&r.subtreeFlags)||l){l=Lo.transition,Lo.transition=null;var i=Ct;Ct=1;var o=Do;Do|=4,Fo.current=null,function(e,t){if(os=Zt,ja(e=ba())){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{var a=(r=(r=e.ownerDocument)&&r.defaultView||window).getSelection&&r.getSelection();if(a&&0!==a.rangeCount){r=a.anchorNode;var s=a.anchorOffset,l=a.focusNode;a=a.focusOffset;try{r.nodeType,l.nodeType}catch(Bt){r=null;break e}var i=0,o=-1,c=-1,d=0,u=0,m=e,p=null;t:for(;;){for(var h;m!==r||0!==s&&3!==m.nodeType||(o=i+s),m!==l||0!==a&&3!==m.nodeType||(c=i+a),3===m.nodeType&&(i+=m.nodeValue.length),null!==(h=m.firstChild);)p=m,m=h;for(;;){if(m===e)break t;if(p===r&&++d===s&&(o=i),p===l&&++u===a&&(c=i),null!==(h=m.nextSibling))break;p=(m=p).parentNode}m=h}r=-1===o||-1===c?null:{start:o,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(cs={focusedElem:e,selectionRange:r},Zt=!1,lo=t;null!==lo;)if(e=(t=lo).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,lo=e;else for(;null!==lo;){t=lo;try{var x=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==x){var f=x.memoizedProps,g=x.memoizedState,y=t.stateNode,v=y.getSnapshotBeforeUpdate(t.elementType===t.type?f:di(t.type,f),g);y.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var b=t.stateNode.containerInfo;1===b.nodeType?b.textContent="":9===b.nodeType&&b.documentElement&&b.removeChild(b.documentElement);break;default:throw Error(n(163))}}catch(Bt){Mc(t,t.return,Bt)}if(null!==(e=t.sibling)){e.return=t.return,lo=e;break}lo=t.return}x=co,co=!1}(e,r),_o(r,e),wa(cs),Zt=!!os,cs=os=null,e.current=r,Co(r,e,s),rt(),Do=o,Ct=i,Lo.transition=l}else e.current=r;if(rc&&(rc=!1,ac=e,sc=s),l=e.pendingLanes,0===l&&(tc=null),function(e){if(mt&&"function"===typeof mt.onCommitFiberRoot)try{mt.onCommitFiberRoot(ut,e,void 0,128===(128&e.current.flags))}catch(t){}}(r.stateNode),mc(e,st()),null!==t)for(a=e.onRecoverableError,r=0;r<t.length;r++)s=t[r],a(s.value,{componentStack:s.stack,digest:s.digest});if(Zo)throw Zo=!1,e=ec,ec=null,e;0!==(1&sc)&&0!==e.tag&&Ac(),l=e.pendingLanes,0!==(1&l)?e===lc?nc++:(nc=0,lc=e):nc=0,Gs()}(e,t,r,a)}finally{Lo.transition=s,Ct=a}return null}function Ac(){if(null!==ac){var e=Et(sc),t=Lo.transition,r=Ct;try{if(Lo.transition=null,Ct=16>e?16:e,null===ac)var a=!1;else{if(e=ac,ac=null,sc=0,0!==(6&Do))throw Error(n(331));var s=Do;for(Do|=4,lo=e.current;null!==lo;){var l=lo,i=l.child;if(0!==(16&lo.flags)){var o=l.deletions;if(null!==o){for(var c=0;c<o.length;c++){var d=o[c];for(lo=d;null!==lo;){var u=lo;switch(u.tag){case 0:case 11:case 15:uo(8,u,l)}var m=u.child;if(null!==m)m.return=u,lo=m;else for(;null!==lo;){var p=(u=lo).sibling,h=u.return;if(ho(u),u===d){lo=null;break}if(null!==p){p.return=h,lo=p;break}lo=h}}}var x=l.alternate;if(null!==x){var f=x.child;if(null!==f){x.child=null;do{var g=f.sibling;f.sibling=null,f=g}while(null!==f)}}lo=l}}if(0!==(2064&l.subtreeFlags)&&null!==i)i.return=l,lo=i;else e:for(;null!==lo;){if(0!==(2048&(l=lo).flags))switch(l.tag){case 0:case 11:case 15:uo(9,l,l.return)}var y=l.sibling;if(null!==y){y.return=l.return,lo=y;break e}lo=l.return}}var v=e.current;for(lo=v;null!==lo;){var b=(i=lo).child;if(0!==(2064&i.subtreeFlags)&&null!==b)b.return=i,lo=b;else e:for(i=v;null!==lo;){if(0!==(2048&(o=lo).flags))try{switch(o.tag){case 0:case 11:case 15:mo(9,o)}}catch(w){Mc(o,o.return,w)}if(o===i){lo=null;break e}var j=o.sibling;if(null!==j){j.return=o.return,lo=j;break e}lo=o.return}}if(Do=s,Gs(),mt&&"function"===typeof mt.onPostCommitFiberRoot)try{mt.onPostCommitFiberRoot(ut,e)}catch(w){}a=!0}return a}finally{Ct=r,Lo.transition=t}}return!1}function Oc(e,t,r){e=Qn(e,t=ji(0,t=gi(r,t),1),1),t=cc(),null!==e&&(_t(e,1,t),mc(e,t))}function Mc(e,t,r){if(3===e.tag)Oc(e,e,r);else for(;null!==t;){if(3===t.tag){Oc(t,e,r);break}if(1===t.tag){var a=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof a.componentDidCatch&&(null===tc||!tc.has(a))){t=Qn(t,e=wi(t,e=gi(r,e),1),1),e=cc(),null!==t&&(_t(t,1,e),mc(t,e));break}}t=t.return}}function Rc(e,t,r){var a=e.pingCache;null!==a&&a.delete(t),t=cc(),e.pingedLanes|=e.suspendedLanes&r,Io===e&&(Uo&r)===r&&(4===Ho||3===Ho&&(130023424&Uo)===Uo&&500>st()-Go?jc(e,0):Ko|=r),mc(e,t)}function Fc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=gt,0===(130023424&(gt<<=1))&&(gt=4194304)));var r=cc();null!==(e=Hn(e,t))&&(_t(e,t,r),mc(e,r))}function Lc(e){var t=e.memoizedState,r=0;null!==t&&(r=t.retryLane),Fc(e,r)}function Dc(e,t){var r=0;switch(e.tag){case 13:var a=e.stateNode,s=e.memoizedState;null!==s&&(r=s.retryLane);break;case 19:a=e.stateNode;break;default:throw Error(n(314))}null!==a&&a.delete(t),Fc(e,r)}function Ic(e,t){return Ye(e,t)}function zc(e,t,r,a){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=a,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Uc(e,t,r,a){return new zc(e,t,r,a)}function Bc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function qc(e,t){var r=e.alternate;return null===r?((r=Uc(e.tag,t,e.key,e.mode)).elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=14680064&e.flags,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Hc(e,t,r,a,s,l){var i=2;if(a=e,"function"===typeof e)Bc(e)&&(i=1);else if("string"===typeof e)i=5;else e:switch(e){case N:return Vc(r.children,s,l,t);case k:i=8,s|=8;break;case _:return(e=Uc(12,r,t,2|s)).elementType=_,e.lanes=l,e;case P:return(e=Uc(13,r,t,s)).elementType=P,e.lanes=l,e;case T:return(e=Uc(19,r,t,s)).elementType=T,e.lanes=l,e;case M:return Wc(r,s,l,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case S:i=10;break e;case C:i=9;break e;case E:i=11;break e;case A:i=14;break e;case O:i=16,a=null;break e}throw Error(n(130,null==e?e:typeof e,""))}return(t=Uc(i,r,t,s)).elementType=e,t.type=a,t.lanes=l,t}function Vc(e,t,r,a){return(e=Uc(7,e,a,t)).lanes=r,e}function Wc(e,t,r,a){return(e=Uc(22,e,a,t)).elementType=M,e.lanes=r,e.stateNode={isHidden:!1},e}function $c(e,t,r){return(e=Uc(6,e,null,t)).lanes=r,e}function Kc(e,t,r){return(t=Uc(4,null!==e.children?e.children:[],e.key,t)).lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Qc(e,t,r,a,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Nt(0),this.expirationTimes=Nt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Nt(0),this.identifierPrefix=a,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Jc(e,t,r,a,s,n,l,i,o){return e=new Qc(e,t,r,i,o),1===t?(t=1,!0===n&&(t|=8)):t=0,n=Uc(3,null,null,t),e.current=n,n.stateNode=e,n.memoizedState={element:a,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Wn(n),e}function Gc(e){if(!e)return Fs;e:{if(Be(e=e._reactInternals)!==e||1!==e.tag)throw Error(n(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Us(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(n(171))}if(1===e.tag){var r=e.type;if(Us(r))return Hs(e,r,t)}return t}function Yc(e,t,r,a,s,n,l,i,o){return(e=Jc(r,a,!0,e,0,n,0,i,o)).context=Gc(null),r=e.current,(n=Kn(a=cc(),s=dc(r))).callback=void 0!==t&&null!==t?t:null,Qn(r,n,s),e.current.lanes=s,_t(e,s,a),mc(e,a),e}function Xc(e,t,r,a){var s=t.current,n=cc(),l=dc(s);return r=Gc(r),null===t.context?t.context=r:t.pendingContext=r,(t=Kn(n,l)).payload={element:e},null!==(a=void 0===a?null:a)&&(t.callback=a),null!==(e=Qn(s,t,l))&&(uc(e,s,l,n),Jn(e,s,l)),l}function Zc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function ed(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var r=e.retryLane;e.retryLane=0!==r&&r<t?r:t}}function td(e,t){ed(e,t),(e=e.alternate)&&ed(e,t)}Oo=function(e,t,r){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ds.current)Ci=!0;else{if(0===(e.lanes&r)&&0===(128&t.flags))return Ci=!1,function(e,t,r){switch(t.tag){case 3:Di(t),wn();break;case 5:ll(t);break;case 1:Us(t.type)&&Vs(t);break;case 4:sl(t,t.stateNode.containerInfo);break;case 10:var a=t.type._context,s=t.memoizedProps.value;Rs(An,a._currentValue),a._currentValue=s;break;case 13:if(null!==(a=t.memoizedState))return null!==a.dehydrated?(Rs(ol,1&ol.current),t.flags|=128,null):0!==(r&t.child.childLanes)?Wi(e,t,r):(Rs(ol,1&ol.current),null!==(e=Xi(e,t,r))?e.sibling:null);Rs(ol,1&ol.current);break;case 19:if(a=0!==(r&t.childLanes),0!==(128&e.flags)){if(a)return Gi(e,t,r);t.flags|=128}if(null!==(s=t.memoizedState)&&(s.rendering=null,s.tail=null,s.lastEffect=null),Rs(ol,ol.current),a)break;return null;case 22:case 23:return t.lanes=0,Oi(e,t,r)}return Xi(e,t,r)}(e,t,r);Ci=0!==(131072&e.flags)}else Ci=!1,pn&&0!==(1048576&t.flags)&&on(t,en,t.index);switch(t.lanes=0,t.tag){case 2:var a=t.type;Yi(e,t),e=t.pendingProps;var s=zs(t,Ls.current);In(t,r),s=kl(null,t,a,e,s,r);var l=_l();return t.flags|=1,"object"===typeof s&&null!==s&&"function"===typeof s.render&&void 0===s.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Us(a)?(l=!0,Vs(t)):l=!1,t.memoizedState=null!==s.state&&void 0!==s.state?s.state:null,Wn(t),s.updater=mi,t.stateNode=s,s._reactInternals=t,fi(t,a,e,r),t=Li(null,t,a,!0,l,r)):(t.tag=0,pn&&l&&cn(t),Ei(null,t,s,r),t=t.child),t;case 16:a=t.elementType;e:{switch(Yi(e,t),e=t.pendingProps,a=(s=a._init)(a._payload),t.type=a,s=t.tag=function(e){if("function"===typeof e)return Bc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===E)return 11;if(e===A)return 14}return 2}(a),e=di(a,e),s){case 0:t=Ri(null,t,a,e,r);break e;case 1:t=Fi(null,t,a,e,r);break e;case 11:t=Pi(null,t,a,e,r);break e;case 14:t=Ti(null,t,a,di(a.type,e),r);break e}throw Error(n(306,a,""))}return t;case 0:return a=t.type,s=t.pendingProps,Ri(e,t,a,s=t.elementType===a?s:di(a,s),r);case 1:return a=t.type,s=t.pendingProps,Fi(e,t,a,s=t.elementType===a?s:di(a,s),r);case 3:e:{if(Di(t),null===e)throw Error(n(387));a=t.pendingProps,s=(l=t.memoizedState).element,$n(e,t),Yn(t,a,null,r);var i=t.memoizedState;if(a=i.element,l.isDehydrated){if(l={element:a,isDehydrated:!1,cache:i.cache,pendingSuspenseBoundaries:i.pendingSuspenseBoundaries,transitions:i.transitions},t.updateQueue.baseState=l,t.memoizedState=l,256&t.flags){t=Ii(e,t,a,r,s=gi(Error(n(423)),t));break e}if(a!==s){t=Ii(e,t,a,r,s=gi(Error(n(424)),t));break e}for(mn=gs(t.stateNode.containerInfo.firstChild),un=t,pn=!0,hn=null,r=Tn(t,null,a,r),t.child=r;r;)r.flags=-3&r.flags|4096,r=r.sibling}else{if(wn(),a===s){t=Xi(e,t,r);break e}Ei(e,t,a,r)}t=t.child}return t;case 5:return ll(t),null===e&&yn(t),a=t.type,s=t.pendingProps,l=null!==e?e.memoizedProps:null,i=s.children,ds(a,s)?i=null:null!==l&&ds(a,l)&&(t.flags|=32),Mi(e,t),Ei(e,t,i,r),t.child;case 6:return null===e&&yn(t),null;case 13:return Wi(e,t,r);case 4:return sl(t,t.stateNode.containerInfo),a=t.pendingProps,null===e?t.child=Pn(t,null,a,r):Ei(e,t,a,r),t.child;case 11:return a=t.type,s=t.pendingProps,Pi(e,t,a,s=t.elementType===a?s:di(a,s),r);case 7:return Ei(e,t,t.pendingProps,r),t.child;case 8:case 12:return Ei(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(a=t.type._context,s=t.pendingProps,l=t.memoizedProps,i=s.value,Rs(An,a._currentValue),a._currentValue=i,null!==l)if(xa(l.value,i)){if(l.children===s.children&&!Ds.current){t=Xi(e,t,r);break e}}else for(null!==(l=t.child)&&(l.return=t);null!==l;){var o=l.dependencies;if(null!==o){i=l.child;for(var c=o.firstContext;null!==c;){if(c.context===a){if(1===l.tag){(c=Kn(-1,r&-r)).tag=2;var d=l.updateQueue;if(null!==d){var u=(d=d.shared).pending;null===u?c.next=c:(c.next=u.next,u.next=c),d.pending=c}}l.lanes|=r,null!==(c=l.alternate)&&(c.lanes|=r),Dn(l.return,r,t),o.lanes|=r;break}c=c.next}}else if(10===l.tag)i=l.type===t.type?null:l.child;else if(18===l.tag){if(null===(i=l.return))throw Error(n(341));i.lanes|=r,null!==(o=i.alternate)&&(o.lanes|=r),Dn(i,r,t),i=l.sibling}else i=l.child;if(null!==i)i.return=l;else for(i=l;null!==i;){if(i===t){i=null;break}if(null!==(l=i.sibling)){l.return=i.return,i=l;break}i=i.return}l=i}Ei(e,t,s.children,r),t=t.child}return t;case 9:return s=t.type,a=t.pendingProps.children,In(t,r),a=a(s=zn(s)),t.flags|=1,Ei(e,t,a,r),t.child;case 14:return s=di(a=t.type,t.pendingProps),Ti(e,t,a,s=di(a.type,s),r);case 15:return Ai(e,t,t.type,t.pendingProps,r);case 17:return a=t.type,s=t.pendingProps,s=t.elementType===a?s:di(a,s),Yi(e,t),t.tag=1,Us(a)?(e=!0,Vs(t)):e=!1,In(t,r),hi(t,a,s),fi(t,a,s,r),Li(null,t,a,!0,e,r);case 19:return Gi(e,t,r);case 22:return Oi(e,t,r)}throw Error(n(156,t.tag))};var rd="function"===typeof reportError?reportError:function(e){console.error(e)};function ad(e){this._internalRoot=e}function sd(e){this._internalRoot=e}function nd(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function ld(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function id(){}function od(e,t,r,a,s){var n=r._reactRootContainer;if(n){var l=n;if("function"===typeof s){var i=s;s=function(){var e=Zc(l);i.call(e)}}Xc(t,l,e,s)}else l=function(e,t,r,a,s){if(s){if("function"===typeof a){var n=a;a=function(){var e=Zc(l);n.call(e)}}var l=Yc(t,a,e,0,null,!1,0,"",id);return e._reactRootContainer=l,e[ws]=l.current,Ga(8===e.nodeType?e.parentNode:e),vc(),l}for(;s=e.lastChild;)e.removeChild(s);if("function"===typeof a){var i=a;a=function(){var e=Zc(o);i.call(e)}}var o=Jc(e,0,!1,null,0,!1,0,"",id);return e._reactRootContainer=o,e[ws]=o.current,Ga(8===e.nodeType?e.parentNode:e),vc(function(){Xc(t,o,r,a)}),o}(r,t,e,s,a);return Zc(l)}sd.prototype.render=ad.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(n(409));Xc(e,t,null,null)},sd.prototype.unmount=ad.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;vc(function(){Xc(null,e,null,null)}),t[ws]=null}},sd.prototype.unstable_scheduleHydration=function(e){if(e){var t=Ot();e={blockedOn:null,target:e,priority:t};for(var r=0;r<qt.length&&0!==t&&t<qt[r].priority;r++);qt.splice(r,0,e),0===r&&$t(e)}},Pt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=yt(t.pendingLanes);0!==r&&(St(t,1|r),mc(t,st()),0===(6&Do)&&(Yo=st()+500,Gs()))}break;case 13:vc(function(){var t=Hn(e,1);if(null!==t){var r=cc();uc(t,e,1,r)}}),td(e,1)}},Tt=function(e){if(13===e.tag){var t=Hn(e,134217728);if(null!==t)uc(t,e,134217728,cc());td(e,134217728)}},At=function(e){if(13===e.tag){var t=dc(e),r=Hn(e,t);if(null!==r)uc(r,e,t,cc());td(e,t)}},Ot=function(){return Ct},Mt=function(e,t){var r=Ct;try{return Ct=e,t()}finally{Ct=r}},je=function(e,t,r){switch(t){case"input":if(X(e,r),t=r.name,"radio"===r.type&&null!=t){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var a=r[t];if(a!==e&&a.form===e.form){var s=Ps(a);if(!s)throw Error(n(90));K(a),X(a,s)}}}break;case"textarea":ne(e,r);break;case"select":null!=(t=r.value)&&re(e,!!r.multiple,t,!1)}},Ce=yc,Ee=vc;var cd={usingClientEntryPoint:!1,Events:[Cs,Es,Ps,_e,Se,yc]},dd={findFiberByHostInstance:Ss,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ud={bundleType:dd.bundleType,version:dd.version,rendererPackageName:dd.rendererPackageName,rendererConfig:dd.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Qe(e))?null:e.stateNode},findFiberByHostInstance:dd.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var md=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!md.isDisabled&&md.supportsFiber)try{ut=md.inject(ud),mt=md}catch(Ke){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=cd,t.createPortal=function(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!nd(t))throw Error(n(200));return function(e,t,r){var a=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:w,key:null==a?null:""+a,children:e,containerInfo:t,implementation:r}}(e,t,null,r)},t.createRoot=function(e,t){if(!nd(e))throw Error(n(299));var r=!1,a="",s=rd;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(r=!0),void 0!==t.identifierPrefix&&(a=t.identifierPrefix),void 0!==t.onRecoverableError&&(s=t.onRecoverableError)),t=Jc(e,1,!1,null,0,r,0,a,s),e[ws]=t.current,Ga(8===e.nodeType?e.parentNode:e),new ad(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(n(188));throw e=Object.keys(e).join(","),Error(n(268,e))}return e=null===(e=Qe(t))?null:e.stateNode},t.flushSync=function(e){return vc(e)},t.hydrate=function(e,t,r){if(!ld(t))throw Error(n(200));return od(null,e,t,!0,r)},t.hydrateRoot=function(e,t,r){if(!nd(e))throw Error(n(405));var a=null!=r&&r.hydratedSources||null,s=!1,l="",i=rd;if(null!==r&&void 0!==r&&(!0===r.unstable_strictMode&&(s=!0),void 0!==r.identifierPrefix&&(l=r.identifierPrefix),void 0!==r.onRecoverableError&&(i=r.onRecoverableError)),t=Yc(t,null,e,1,null!=r?r:null,s,0,l,i),e[ws]=t.current,Ga(e),a)for(e=0;e<a.length;e++)s=(s=(r=a[e])._getVersion)(r._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[r,s]:t.mutableSourceEagerHydrationData.push(r,s);return new sd(t)},t.render=function(e,t,r){if(!ld(t))throw Error(n(200));return od(null,e,t,!1,r)},t.unmountComponentAtNode=function(e){if(!ld(e))throw Error(n(40));return!!e._reactRootContainer&&(vc(function(){od(null,null,e,!1,function(){e._reactRootContainer=null,e[ws]=null})}),!0)},t.unstable_batchedUpdates=yc,t.unstable_renderSubtreeIntoContainer=function(e,t,r,a){if(!ld(r))throw Error(n(200));if(null==e||void 0===e._reactInternals)throw Error(n(38));return od(e,t,r,!1,a)},t.version="18.3.1-next-f1338f8080-20240426"},853:(e,t,r)=>{e.exports=r(234)},950:(e,t,r)=>{!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=r(730)}},t={};function r(a){var s=t[a];if(void 0!==s)return s.exports;var n=t[a]={exports:{}};return e[a](n,n.exports,r),n.exports}(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;r.t=function(a,s){if(1&s&&(a=this(a)),8&s)return a;if("object"===typeof a&&a){if(4&s&&a.__esModule)return a;if(16&s&&"function"===typeof a.then)return a}var n=Object.create(null);r.r(n);var l={};e=e||[null,t({}),t([]),t(t)];for(var i=2&s&&a;("object"==typeof i||"function"==typeof i)&&!~e.indexOf(i);i=t(i))Object.getOwnPropertyNames(i).forEach(e=>l[e]=()=>a[e]);return l.default=()=>a,r.d(n,l),n}})(),r.d=(e,t)=>{for(var a in t)r.o(t,a)&&!r.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var a={};r.r(a),r.d(a,{hasBrowserEnv:()=>da,hasStandardBrowserEnv:()=>ma,hasStandardBrowserWebWorkerEnv:()=>pa,navigator:()=>ua,origin:()=>ha});var s,n=r(43),l=r.t(n,2),i=r(391);function o(){return o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},o.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(s||(s={}));const c="popstate";function d(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function u(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(Ve){}}}function m(e,t){return{usr:e.state,key:e.key,idx:t}}function p(e,t,r,a){return void 0===r&&(r=null),o({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?x(t):t,{state:r,key:t&&t.key||a||Math.random().toString(36).substr(2,8)})}function h(e){let{pathname:t="/",search:r="",hash:a=""}=e;return r&&"?"!==r&&(t+="?"===r.charAt(0)?r:"?"+r),a&&"#"!==a&&(t+="#"===a.charAt(0)?a:"#"+a),t}function x(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let a=e.indexOf("?");a>=0&&(t.search=e.substr(a),e=e.substr(0,a)),e&&(t.pathname=e)}return t}function f(e,t,r,a){void 0===a&&(a={});let{window:n=document.defaultView,v5Compat:l=!1}=a,i=n.history,u=s.Pop,x=null,f=g();function g(){return(i.state||{idx:null}).idx}function y(){u=s.Pop;let e=g(),t=null==e?null:e-f;f=e,x&&x({action:u,location:b.location,delta:t})}function v(e){let t="null"!==n.location.origin?n.location.origin:n.location.href,r="string"===typeof e?e:h(e);return r=r.replace(/ $/,"%20"),d(t,"No window.location.(origin|href) available to create URL for href: "+r),new URL(r,t)}null==f&&(f=0,i.replaceState(o({},i.state,{idx:f}),""));let b={get action(){return u},get location(){return e(n,i)},listen(e){if(x)throw new Error("A history only accepts one active listener");return n.addEventListener(c,y),x=e,()=>{n.removeEventListener(c,y),x=null}},createHref:e=>t(n,e),createURL:v,encodeLocation(e){let t=v(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){u=s.Push;let a=p(b.location,e,t);r&&r(a,e),f=g()+1;let o=m(a,f),c=b.createHref(a);try{i.pushState(o,"",c)}catch(d){if(d instanceof DOMException&&"DataCloneError"===d.name)throw d;n.location.assign(c)}l&&x&&x({action:u,location:b.location,delta:1})},replace:function(e,t){u=s.Replace;let a=p(b.location,e,t);r&&r(a,e),f=g();let n=m(a,f),o=b.createHref(a);i.replaceState(n,"",o),l&&x&&x({action:u,location:b.location,delta:0})},go:e=>i.go(e)};return b}var g;!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(g||(g={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function y(e,t,r){return void 0===r&&(r="/"),v(e,t,r,!1)}function v(e,t,r,a){let s=M(("string"===typeof t?x(t):t).pathname||"/",r);if(null==s)return null;let n=b(e);!function(e){e.sort((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let r=e.length===t.length&&e.slice(0,-1).every((e,r)=>e===t[r]);return r?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map(e=>e.childrenIndex),t.routesMeta.map(e=>e.childrenIndex)))}(n);let l=null;for(let i=0;null==l&&i<n.length;++i){let e=O(s);l=T(n[i],e,a)}return l}function b(e,t,r,a){void 0===t&&(t=[]),void 0===r&&(r=[]),void 0===a&&(a="");let s=(e,s,n)=>{let l={relativePath:void 0===n?e.path||"":n,caseSensitive:!0===e.caseSensitive,childrenIndex:s,route:e};l.relativePath.startsWith("/")&&(d(l.relativePath.startsWith(a),'Absolute route path "'+l.relativePath+'" nested under path "'+a+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),l.relativePath=l.relativePath.slice(a.length));let i=I([a,l.relativePath]),o=r.concat(l);e.children&&e.children.length>0&&(d(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+i+'".'),b(e.children,t,o,i)),(null!=e.path||e.index)&&t.push({path:i,score:P(i,e.index),routesMeta:o})};return e.forEach((e,t)=>{var r;if(""!==e.path&&null!=(r=e.path)&&r.includes("?"))for(let a of j(e.path))s(e,t,a);else s(e,t)}),t}function j(e){let t=e.split("/");if(0===t.length)return[];let[r,...a]=t,s=r.endsWith("?"),n=r.replace(/\?$/,"");if(0===a.length)return s?[n,""]:[n];let l=j(a.join("/")),i=[];return i.push(...l.map(e=>""===e?n:[n,e].join("/"))),s&&i.push(...l),i.map(t=>e.startsWith("/")&&""===t?"/":t)}const w=/^:[\w-]+$/,N=3,k=2,_=1,S=10,C=-2,E=e=>"*"===e;function P(e,t){let r=e.split("/"),a=r.length;return r.some(E)&&(a+=C),t&&(a+=k),r.filter(e=>!E(e)).reduce((e,t)=>e+(w.test(t)?N:""===t?_:S),a)}function T(e,t,r){void 0===r&&(r=!1);let{routesMeta:a}=e,s={},n="/",l=[];for(let i=0;i<a.length;++i){let e=a[i],o=i===a.length-1,c="/"===n?t:t.slice(n.length)||"/",d=A({path:e.relativePath,caseSensitive:e.caseSensitive,end:o},c),u=e.route;if(!d&&o&&r&&!a[a.length-1].route.index&&(d=A({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},c)),!d)return null;Object.assign(s,d.params),l.push({params:s,pathname:I([n,d.pathname]),pathnameBase:z(I([n,d.pathnameBase])),route:u}),"/"!==d.pathnameBase&&(n=I([n,d.pathnameBase]))}return l}function A(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[r,a]=function(e,t,r){void 0===t&&(t=!1);void 0===r&&(r=!0);u("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let a=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(e,t,r)=>(a.push({paramName:t,isOptional:null!=r}),r?"/?([^\\/]+)?":"/([^\\/]+)"));e.endsWith("*")?(a.push({paramName:"*"}),s+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?s+="\\/*$":""!==e&&"/"!==e&&(s+="(?:(?=\\/|$))");let n=new RegExp(s,t?void 0:"i");return[n,a]}(e.path,e.caseSensitive,e.end),s=t.match(r);if(!s)return null;let n=s[0],l=n.replace(/(.)\/+$/,"$1"),i=s.slice(1);return{params:a.reduce((e,t,r)=>{let{paramName:a,isOptional:s}=t;if("*"===a){let e=i[r]||"";l=n.slice(0,n.length-e.length).replace(/(.)\/+$/,"$1")}const o=i[r];return e[a]=s&&!o?void 0:(o||"").replace(/%2F/g,"/"),e},{}),pathname:n,pathnameBase:l,pattern:e}}function O(e){try{return e.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(t){return u(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function M(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,a=e.charAt(r);return a&&"/"!==a?null:e.slice(r)||"/"}function R(e,t,r,a){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(a)+"].  Please separate it out to the `to."+r+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function F(e){return e.filter((e,t)=>0===t||e.route.path&&e.route.path.length>0)}function L(e,t){let r=F(e);return t?r.map((e,t)=>t===r.length-1?e.pathname:e.pathnameBase):r.map(e=>e.pathnameBase)}function D(e,t,r,a){let s;void 0===a&&(a=!1),"string"===typeof e?s=x(e):(s=o({},e),d(!s.pathname||!s.pathname.includes("?"),R("?","pathname","search",s)),d(!s.pathname||!s.pathname.includes("#"),R("#","pathname","hash",s)),d(!s.search||!s.search.includes("#"),R("#","search","hash",s)));let n,l=""===e||""===s.pathname,i=l?"/":s.pathname;if(null==i)n=r;else{let e=t.length-1;if(!a&&i.startsWith("..")){let t=i.split("/");for(;".."===t[0];)t.shift(),e-=1;s.pathname=t.join("/")}n=e>=0?t[e]:"/"}let c=function(e,t){void 0===t&&(t="/");let{pathname:r,search:a="",hash:s=""}="string"===typeof e?x(e):e,n=r?r.startsWith("/")?r:function(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(e=>{".."===e?r.length>1&&r.pop():"."!==e&&r.push(e)}),r.length>1?r.join("/"):"/"}(r,t):t;return{pathname:n,search:U(a),hash:B(s)}}(s,n),u=i&&"/"!==i&&i.endsWith("/"),m=(l||"."===i)&&r.endsWith("/");return c.pathname.endsWith("/")||!u&&!m||(c.pathname+="/"),c}const I=e=>e.join("/").replace(/\/\/+/g,"/"),z=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),U=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",B=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";Error;function q(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}const H=["post","put","patch","delete"],V=(new Set(H),["get",...H]);new Set(V),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred");function W(){return W=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},W.apply(this,arguments)}const $=n.createContext(null);const K=n.createContext(null);const Q=n.createContext(null);const J=n.createContext(null);const G=n.createContext({outlet:null,matches:[],isDataRoute:!1});const Y=n.createContext(null);function X(){return null!=n.useContext(J)}function Z(){return X()||d(!1),n.useContext(J).location}function ee(e){n.useContext(Q).static||n.useLayoutEffect(e)}function te(){let{isDataRoute:e}=n.useContext(G);return e?function(){let{router:e}=pe(ue.UseNavigateStable),t=xe(me.UseNavigateStable),r=n.useRef(!1);return ee(()=>{r.current=!0}),n.useCallback(function(a,s){void 0===s&&(s={}),r.current&&("number"===typeof a?e.navigate(a):e.navigate(a,W({fromRouteId:t},s)))},[e,t])}():function(){X()||d(!1);let e=n.useContext($),{basename:t,future:r,navigator:a}=n.useContext(Q),{matches:s}=n.useContext(G),{pathname:l}=Z(),i=JSON.stringify(L(s,r.v7_relativeSplatPath)),o=n.useRef(!1);return ee(()=>{o.current=!0}),n.useCallback(function(r,s){if(void 0===s&&(s={}),!o.current)return;if("number"===typeof r)return void a.go(r);let n=D(r,JSON.parse(i),l,"path"===s.relative);null==e&&"/"!==t&&(n.pathname="/"===n.pathname?t:I([t,n.pathname])),(s.replace?a.replace:a.push)(n,s.state,s)},[t,a,i,l,e])}()}const re=n.createContext(null);function ae(){let{matches:e}=n.useContext(G),t=e[e.length-1];return t?t.params:{}}function se(e,t){let{relative:r}=void 0===t?{}:t,{future:a}=n.useContext(Q),{matches:s}=n.useContext(G),{pathname:l}=Z(),i=JSON.stringify(L(s,a.v7_relativeSplatPath));return n.useMemo(()=>D(e,JSON.parse(i),l,"path"===r),[e,i,l,r])}function ne(e,t,r,a){X()||d(!1);let{navigator:l}=n.useContext(Q),{matches:i}=n.useContext(G),o=i[i.length-1],c=o?o.params:{},u=(o&&o.pathname,o?o.pathnameBase:"/");o&&o.route;let m,p=Z();if(t){var h;let e="string"===typeof t?x(t):t;"/"===u||(null==(h=e.pathname)?void 0:h.startsWith(u))||d(!1),m=e}else m=p;let f=m.pathname||"/",g=f;if("/"!==u){let e=u.replace(/^\//,"").split("/");g="/"+f.replace(/^\//,"").split("/").slice(e.length).join("/")}let v=y(e,{pathname:g});let b=de(v&&v.map(e=>Object.assign({},e,{params:Object.assign({},c,e.params),pathname:I([u,l.encodeLocation?l.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?u:I([u,l.encodeLocation?l.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])})),i,r,a);return t&&b?n.createElement(J.Provider,{value:{location:W({pathname:"/",search:"",hash:"",state:null,key:"default"},m),navigationType:s.Pop}},b):b}function le(){let e=function(){var e;let t=n.useContext(Y),r=he(me.UseRouteError),a=xe(me.UseRouteError);if(void 0!==t)return t;return null==(e=r.errors)?void 0:e[a]}(),t=q(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,a="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:a};return n.createElement(n.Fragment,null,n.createElement("h2",null,"Unexpected Application Error!"),n.createElement("h3",{style:{fontStyle:"italic"}},t),r?n.createElement("pre",{style:s},r):null,null)}const ie=n.createElement(le,null);class oe extends n.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?n.createElement(G.Provider,{value:this.props.routeContext},n.createElement(Y.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function ce(e){let{routeContext:t,match:r,children:a}=e,s=n.useContext($);return s&&s.static&&s.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=r.route.id),n.createElement(G.Provider,{value:t},a)}function de(e,t,r,a){var s;if(void 0===t&&(t=[]),void 0===r&&(r=null),void 0===a&&(a=null),null==e){var l;if(!r)return null;if(r.errors)e=r.matches;else{if(!(null!=(l=a)&&l.v7_partialHydration&&0===t.length&&!r.initialized&&r.matches.length>0))return null;e=r.matches}}let i=e,o=null==(s=r)?void 0:s.errors;if(null!=o){let e=i.findIndex(e=>e.route.id&&void 0!==(null==o?void 0:o[e.route.id]));e>=0||d(!1),i=i.slice(0,Math.min(i.length,e+1))}let c=!1,u=-1;if(r&&a&&a.v7_partialHydration)for(let n=0;n<i.length;n++){let e=i[n];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(u=n),e.route.id){let{loaderData:t,errors:a}=r,s=e.route.loader&&void 0===t[e.route.id]&&(!a||void 0===a[e.route.id]);if(e.route.lazy||s){c=!0,i=u>=0?i.slice(0,u+1):[i[0]];break}}}return i.reduceRight((e,a,s)=>{let l,d=!1,m=null,p=null;var h;r&&(l=o&&a.route.id?o[a.route.id]:void 0,m=a.route.errorElement||ie,c&&(u<0&&0===s?(h="route-fallback",!1||fe[h]||(fe[h]=!0),d=!0,p=null):u===s&&(d=!0,p=a.route.hydrateFallbackElement||null)));let x=t.concat(i.slice(0,s+1)),f=()=>{let t;return t=l?m:d?p:a.route.Component?n.createElement(a.route.Component,null):a.route.element?a.route.element:e,n.createElement(ce,{match:a,routeContext:{outlet:e,matches:x,isDataRoute:null!=r},children:t})};return r&&(a.route.ErrorBoundary||a.route.errorElement||0===s)?n.createElement(oe,{location:r.location,revalidation:r.revalidation,component:m,error:l,children:f(),routeContext:{outlet:null,matches:x,isDataRoute:!0}}):f()},null)}var ue=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(ue||{}),me=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(me||{});function pe(e){let t=n.useContext($);return t||d(!1),t}function he(e){let t=n.useContext(K);return t||d(!1),t}function xe(e){let t=function(){let e=n.useContext(G);return e||d(!1),e}(),r=t.matches[t.matches.length-1];return r.route.id||d(!1),r.route.id}const fe={};function ge(e,t){null==e||e.v7_startTransition,void 0===(null==e?void 0:e.v7_relativeSplatPath)&&(!t||t.v7_relativeSplatPath),t&&(t.v7_fetcherPersist,t.v7_normalizeFormMethod,t.v7_partialHydration,t.v7_skipActionErrorRevalidation)}l.startTransition;function ye(e){let{to:t,replace:r,state:a,relative:s}=e;X()||d(!1);let{future:l,static:i}=n.useContext(Q),{matches:o}=n.useContext(G),{pathname:c}=Z(),u=te(),m=D(t,L(o,l.v7_relativeSplatPath),c,"path"===s),p=JSON.stringify(m);return n.useEffect(()=>u(JSON.parse(p),{replace:r,state:a,relative:s}),[u,p,s,r,a]),null}function ve(e){return function(e){let t=n.useContext(G).outlet;return t?n.createElement(re.Provider,{value:e},t):t}(e.context)}function be(e){d(!1)}function je(e){let{basename:t="/",children:r=null,location:a,navigationType:l=s.Pop,navigator:i,static:o=!1,future:c}=e;X()&&d(!1);let u=t.replace(/^\/*/,"/"),m=n.useMemo(()=>({basename:u,navigator:i,static:o,future:W({v7_relativeSplatPath:!1},c)}),[u,c,i,o]);"string"===typeof a&&(a=x(a));let{pathname:p="/",search:h="",hash:f="",state:g=null,key:y="default"}=a,v=n.useMemo(()=>{let e=M(p,u);return null==e?null:{location:{pathname:e,search:h,hash:f,state:g,key:y},navigationType:l}},[u,p,h,f,g,y,l]);return null==v?null:n.createElement(Q.Provider,{value:m},n.createElement(J.Provider,{children:r,value:v}))}function we(e){let{children:t,location:r}=e;return ne(Ne(t),r)}new Promise(()=>{});n.Component;function Ne(e,t){void 0===t&&(t=[]);let r=[];return n.Children.forEach(e,(e,a)=>{if(!n.isValidElement(e))return;let s=[...t,a];if(e.type===n.Fragment)return void r.push.apply(r,Ne(e.props.children,s));e.type!==be&&d(!1),e.props.index&&e.props.children&&d(!1);let l={id:e.props.id||s.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(l.children=Ne(e.props.children,s)),r.push(l)}),r}var ke=r(950),_e=r.t(ke,2);function Se(){return Se=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Se.apply(this,arguments)}function Ce(e,t){if(null==e)return{};var r,a,s={},n=Object.keys(e);for(a=0;a<n.length;a++)r=n[a],t.indexOf(r)>=0||(s[r]=e[r]);return s}function Ee(e){return void 0===e&&(e=""),new URLSearchParams("string"===typeof e||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,r)=>{let a=e[r];return t.concat(Array.isArray(a)?a.map(e=>[r,e]):[[r,a]])},[]))}new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);const Pe=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"];try{window.__reactRouterVersion="6"}catch(Ve){}new Map;const Te=l.startTransition;_e.flushSync,l.useId;function Ae(e){let{basename:t,children:r,future:a,window:s}=e,l=n.useRef();var i;null==l.current&&(l.current=(void 0===(i={window:s,v5Compat:!0})&&(i={}),f(function(e,t){let{pathname:r,search:a,hash:s}=e.location;return p("",{pathname:r,search:a,hash:s},t.state&&t.state.usr||null,t.state&&t.state.key||"default")},function(e,t){return"string"===typeof t?t:h(t)},null,i)));let o=l.current,[c,d]=n.useState({action:o.action,location:o.location}),{v7_startTransition:u}=a||{},m=n.useCallback(e=>{u&&Te?Te(()=>d(e)):d(e)},[d,u]);return n.useLayoutEffect(()=>o.listen(m),[o,m]),n.useEffect(()=>ge(a),[a]),n.createElement(je,{basename:t,children:r,location:c.location,navigationType:c.action,navigator:o,future:a})}const Oe="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement,Me=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Re=n.forwardRef(function(e,t){let r,{onClick:a,relative:s,reloadDocument:l,replace:i,state:o,target:c,to:u,preventScrollReset:m,viewTransition:p}=e,x=Ce(e,Pe),{basename:f}=n.useContext(Q),g=!1;if("string"===typeof u&&Me.test(u)&&(r=u,Oe))try{let e=new URL(window.location.href),t=u.startsWith("//")?new URL(e.protocol+u):new URL(u),r=M(t.pathname,f);t.origin===e.origin&&null!=r?u=r+t.search+t.hash:g=!0}catch(Ve){}let y=function(e,t){let{relative:r}=void 0===t?{}:t;X()||d(!1);let{basename:a,navigator:s}=n.useContext(Q),{hash:l,pathname:i,search:o}=se(e,{relative:r}),c=i;return"/"!==a&&(c="/"===i?a:I([a,i])),s.createHref({pathname:c,search:o,hash:l})}(u,{relative:s}),v=function(e,t){let{target:r,replace:a,state:s,preventScrollReset:l,relative:i,viewTransition:o}=void 0===t?{}:t,c=te(),d=Z(),u=se(e,{relative:i});return n.useCallback(t=>{if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(t,r)){t.preventDefault();let r=void 0!==a?a:h(d)===h(u);c(e,{replace:r,state:s,preventScrollReset:l,relative:i,viewTransition:o})}},[d,c,u,a,s,r,e,l,i,o])}(u,{replace:i,state:o,target:c,preventScrollReset:m,relative:s,viewTransition:p});return n.createElement("a",Se({},x,{href:r||y,onClick:g||l?a:function(e){a&&a(e),e.defaultPrevented||v(e)},ref:t,target:c}))});var Fe,Le;function De(e){let t=n.useRef(Ee(e)),r=n.useRef(!1),a=Z(),s=n.useMemo(()=>function(e,t){let r=Ee(e);return t&&t.forEach((e,a)=>{r.has(a)||t.getAll(a).forEach(e=>{r.append(a,e)})}),r}(a.search,r.current?null:t.current),[a.search]),l=te(),i=n.useCallback((e,t)=>{const a=Ee("function"===typeof e?e(s):e);r.current=!0,l("?"+a,t)},[l,s]);return[s,i]}(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Fe||(Fe={})),function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(Le||(Le={}));function Ie(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function ze(e){return ze="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ze(e)}function Ue(e){var t=function(e,t){if("object"!=ze(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!=ze(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ze(t)?t:t+""}function Be(e,t,r){return(t=Ue(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function qe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,a)}return r}function He(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?qe(Object(r),!0).forEach(function(t){Be(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):qe(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}let Ve={data:""},We=e=>{if("object"==typeof window){let t=(e?e.querySelector("#_goober"):window._goober)||Object.assign(document.createElement("style"),{innerHTML:" ",id:"_goober"});return t.nonce=window.__nonce__,t.parentNode||(e||document.head).appendChild(t),t.firstChild}return e||Ve},$e=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,Ke=/\/\*[^]*?\*\/|  +/g,Qe=/\n+/g,Je=(e,t)=>{let r="",a="",s="";for(let n in e){let l=e[n];"@"==n[0]?"i"==n[1]?r=n+" "+l+";":a+="f"==n[1]?Je(l,n):n+"{"+Je(l,"k"==n[1]?"":t)+"}":"object"==typeof l?a+=Je(l,t?t.replace(/([^,])+/g,e=>n.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,t=>/&/.test(t)?t.replace(/&/g,e):e?e+" "+t:t)):n):null!=l&&(n=/^--/.test(n)?n:n.replace(/[A-Z]/g,"-$&").toLowerCase(),s+=Je.p?Je.p(n,l):n+":"+l+";")}return r+(t&&s?t+"{"+s+"}":s)+a},Ge={},Ye=e=>{if("object"==typeof e){let t="";for(let r in e)t+=r+Ye(e[r]);return t}return e},Xe=(e,t,r,a,s)=>{let n=Ye(e),l=Ge[n]||(Ge[n]=(e=>{let t=0,r=11;for(;t<e.length;)r=101*r+e.charCodeAt(t++)>>>0;return"go"+r})(n));if(!Ge[l]){let t=n!==e?e:(e=>{let t,r,a=[{}];for(;t=$e.exec(e.replace(Ke,""));)t[4]?a.shift():t[3]?(r=t[3].replace(Qe," ").trim(),a.unshift(a[0][r]=a[0][r]||{})):a[0][t[1]]=t[2].replace(Qe," ").trim();return a[0]})(e);Ge[l]=Je(s?{["@keyframes "+l]:t}:t,r?"":"."+l)}let i=r&&Ge.g?Ge.g:null;return r&&(Ge.g=Ge[l]),((e,t,r,a)=>{a?t.data=t.data.replace(a,e):-1===t.data.indexOf(e)&&(t.data=r?e+t.data:t.data+e)})(Ge[l],t,a,i),l};function Ze(e){let t=this||{},r=e.call?e(t.p):e;return Xe(r.unshift?r.raw?((e,t,r)=>e.reduce((e,a,s)=>{let n=t[s];if(n&&n.call){let e=n(r),t=e&&e.props&&e.props.className||/^go/.test(e)&&e;n=t?"."+t:e&&"object"==typeof e?e.props?"":Je(e,""):!1===e?"":e}return e+a+(null==n?"":n)},""))(r,[].slice.call(arguments,1),t.p):r.reduce((e,r)=>Object.assign(e,r&&r.call?r(t.p):r),{}):r,We(t.target),t.g,t.o,t.k)}Ze.bind({g:1});let et,tt,rt,at=Ze.bind({k:1});function st(e,t){let r=this||{};return function(){let a=arguments;function s(n,l){let i=Object.assign({},n),o=i.className||s.className;r.p=Object.assign({theme:tt&&tt()},i),r.o=/ *go\d+/.test(o),i.className=Ze.apply(r,a)+(o?" "+o:""),t&&(i.ref=l);let c=e;return e[0]&&(c=i.as||e,delete i.as),rt&&c[0]&&rt(i),et(c,i)}return t?t(s):s}}var nt,lt,it,ot,ct,dt,ut,mt,pt,ht,xt,ft,gt,yt,vt,bt,jt=(e,t)=>(e=>"function"==typeof e)(e)?e(t):e,wt=(()=>{let e=0;return()=>(++e).toString()})(),Nt=(()=>{let e;return()=>{if(void 0===e&&typeof window<"u"){let t=matchMedia("(prefers-reduced-motion: reduce)");e=!t||t.matches}return e}})(),kt="default",_t=(e,t)=>{let{toastLimit:r}=e.settings;switch(t.type){case 0:return He(He({},e),{},{toasts:[t.toast,...e.toasts].slice(0,r)});case 1:return He(He({},e),{},{toasts:e.toasts.map(e=>e.id===t.toast.id?He(He({},e),t.toast):e)});case 2:let{toast:a}=t;return _t(e,{type:e.toasts.find(e=>e.id===a.id)?1:0,toast:a});case 3:let{toastId:s}=t;return He(He({},e),{},{toasts:e.toasts.map(e=>e.id===s||void 0===s?He(He({},e),{},{dismissed:!0,visible:!1}):e)});case 4:return void 0===t.toastId?He(He({},e),{},{toasts:[]}):He(He({},e),{},{toasts:e.toasts.filter(e=>e.id!==t.toastId)});case 5:return He(He({},e),{},{pausedAt:t.time});case 6:let n=t.time-(e.pausedAt||0);return He(He({},e),{},{pausedAt:void 0,toasts:e.toasts.map(e=>He(He({},e),{},{pauseDuration:e.pauseDuration+n}))})}},St=[],Ct={toasts:[],pausedAt:void 0,settings:{toastLimit:20}},Et={},Pt=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:kt;Et[t]=_t(Et[t]||Ct,e),St.forEach(e=>{let[r,a]=e;r===t&&a(Et[t])})},Tt=e=>Object.keys(Et).forEach(t=>Pt(e,t)),At=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:kt;return t=>{Pt(t,e)}},Ot={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},Mt=e=>(t,r)=>{let a=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"blank",r=arguments.length>2?arguments[2]:void 0;return He(He({createdAt:Date.now(),visible:!0,dismissed:!1,type:t,ariaProps:{role:"status","aria-live":"polite"},message:e,pauseDuration:0},r),{},{id:(null==r?void 0:r.id)||wt()})}(t,e,r);return At(a.toasterId||(e=>Object.keys(Et).find(t=>Et[t].toasts.some(t=>t.id===e)))(a.id))({type:2,toast:a}),a.id},Rt=(e,t)=>Mt("blank")(e,t);Rt.error=Mt("error"),Rt.success=Mt("success"),Rt.loading=Mt("loading"),Rt.custom=Mt("custom"),Rt.dismiss=(e,t)=>{let r={type:3,toastId:e};t?At(t)(r):Tt(r)},Rt.dismissAll=e=>Rt.dismiss(void 0,e),Rt.remove=(e,t)=>{let r={type:4,toastId:e};t?At(t)(r):Tt(r)},Rt.removeAll=e=>Rt.remove(void 0,e),Rt.promise=(e,t,r)=>{let a=Rt.loading(t.loading,He(He({},r),null==r?void 0:r.loading));return"function"==typeof e&&(e=e()),e.then(e=>{let s=t.success?jt(t.success,e):void 0;return s?Rt.success(s,He(He({id:a},r),null==r?void 0:r.success)):Rt.dismiss(a),e}).catch(e=>{let s=t.error?jt(t.error,e):void 0;s?Rt.error(s,He(He({id:a},r),null==r?void 0:r.error)):Rt.dismiss(a)}),e};var Ft=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default",{toasts:r,pausedAt:a}=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:kt,[r,a]=(0,n.useState)(Et[t]||Ct),s=(0,n.useRef)(Et[t]);(0,n.useEffect)(()=>(s.current!==Et[t]&&a(Et[t]),St.push([t,a]),()=>{let e=St.findIndex(e=>{let[r]=e;return r===t});e>-1&&St.splice(e,1)}),[t]);let l=r.toasts.map(t=>{var r,a,s;return He(He(He(He({},e),e[t.type]),t),{},{removeDelay:t.removeDelay||(null==(r=e[t.type])?void 0:r.removeDelay)||(null==e?void 0:e.removeDelay),duration:t.duration||(null==(a=e[t.type])?void 0:a.duration)||(null==e?void 0:e.duration)||Ot[t.type],style:He(He(He({},e.style),null==(s=e[t.type])?void 0:s.style),t.style)})});return He(He({},r),{},{toasts:l})}(e,t),s=(0,n.useRef)(new Map).current,l=(0,n.useCallback)(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;if(s.has(e))return;let r=setTimeout(()=>{s.delete(e),i({type:4,toastId:e})},t);s.set(e,r)},[]);(0,n.useEffect)(()=>{if(a)return;let e=Date.now(),s=r.map(r=>{if(r.duration===1/0)return;let a=(r.duration||0)+r.pauseDuration-(e-r.createdAt);if(!(a<0))return setTimeout(()=>Rt.dismiss(r.id,t),a);r.visible&&Rt.dismiss(r.id)});return()=>{s.forEach(e=>e&&clearTimeout(e))}},[r,a,t]);let i=(0,n.useCallback)(At(t),[t]),o=(0,n.useCallback)(()=>{i({type:5,time:Date.now()})},[i]),c=(0,n.useCallback)((e,t)=>{i({type:1,toast:{id:e,height:t}})},[i]),d=(0,n.useCallback)(()=>{a&&i({type:6,time:Date.now()})},[a,i]),u=(0,n.useCallback)((e,t)=>{let{reverseOrder:a=!1,gutter:s=8,defaultPosition:n}=t||{},l=r.filter(t=>(t.position||n)===(e.position||n)&&t.height),i=l.findIndex(t=>t.id===e.id),o=l.filter((e,t)=>t<i&&e.visible).length;return l.filter(e=>e.visible).slice(...a?[o+1]:[0,o]).reduce((e,t)=>e+(t.height||0)+s,0)},[r]);return(0,n.useEffect)(()=>{r.forEach(e=>{if(e.dismissed)l(e.id,e.removeDelay);else{let t=s.get(e.id);t&&(clearTimeout(t),s.delete(e.id))}})},[r,l]),{toasts:r,handlers:{updateHeight:c,startPause:o,endPause:d,calculateOffset:u}}},Lt=at(nt||(nt=Ie(["\nfrom {\n  transform: scale(0) rotate(45deg);\n\topacity: 0;\n}\nto {\n transform: scale(1) rotate(45deg);\n  opacity: 1;\n}"]))),Dt=at(lt||(lt=Ie(["\nfrom {\n  transform: scale(0);\n  opacity: 0;\n}\nto {\n  transform: scale(1);\n  opacity: 1;\n}"]))),It=at(it||(it=Ie(["\nfrom {\n  transform: scale(0) rotate(90deg);\n\topacity: 0;\n}\nto {\n  transform: scale(1) rotate(90deg);\n\topacity: 1;\n}"]))),zt=st("div")(ot||(ot=Ie(["\n  width: 20px;\n  opacity: 0;\n  height: 20px;\n  border-radius: 10px;\n  background: ",";\n  position: relative;\n  transform: rotate(45deg);\n\n  animation: "," 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)\n    forwards;\n  animation-delay: 100ms;\n\n  &:after,\n  &:before {\n    content: '';\n    animation: "," 0.15s ease-out forwards;\n    animation-delay: 150ms;\n    position: absolute;\n    border-radius: 3px;\n    opacity: 0;\n    background: ",";\n    bottom: 9px;\n    left: 4px;\n    height: 2px;\n    width: 12px;\n  }\n\n  &:before {\n    animation: "," 0.15s ease-out forwards;\n    animation-delay: 180ms;\n    transform: rotate(90deg);\n  }\n"])),e=>e.primary||"#ff4b4b",Lt,Dt,e=>e.secondary||"#fff",It),Ut=at(ct||(ct=Ie(["\n  from {\n    transform: rotate(0deg);\n  }\n  to {\n    transform: rotate(360deg);\n  }\n"]))),Bt=st("div")(dt||(dt=Ie(["\n  width: 12px;\n  height: 12px;\n  box-sizing: border-box;\n  border: 2px solid;\n  border-radius: 100%;\n  border-color: ",";\n  border-right-color: ",";\n  animation: "," 1s linear infinite;\n"])),e=>e.secondary||"#e0e0e0",e=>e.primary||"#616161",Ut),qt=at(ut||(ut=Ie(["\nfrom {\n  transform: scale(0) rotate(45deg);\n\topacity: 0;\n}\nto {\n  transform: scale(1) rotate(45deg);\n\topacity: 1;\n}"]))),Ht=at(mt||(mt=Ie(["\n0% {\n\theight: 0;\n\twidth: 0;\n\topacity: 0;\n}\n40% {\n  height: 0;\n\twidth: 6px;\n\topacity: 1;\n}\n100% {\n  opacity: 1;\n  height: 10px;\n}"]))),Vt=st("div")(pt||(pt=Ie(["\n  width: 20px;\n  opacity: 0;\n  height: 20px;\n  border-radius: 10px;\n  background: ",";\n  position: relative;\n  transform: rotate(45deg);\n\n  animation: "," 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)\n    forwards;\n  animation-delay: 100ms;\n  &:after {\n    content: '';\n    box-sizing: border-box;\n    animation: "," 0.2s ease-out forwards;\n    opacity: 0;\n    animation-delay: 200ms;\n    position: absolute;\n    border-right: 2px solid;\n    border-bottom: 2px solid;\n    border-color: ",";\n    bottom: 6px;\n    left: 6px;\n    height: 10px;\n    width: 6px;\n  }\n"])),e=>e.primary||"#61d345",qt,Ht,e=>e.secondary||"#fff"),Wt=st("div")(ht||(ht=Ie(["\n  position: absolute;\n"]))),$t=st("div")(xt||(xt=Ie(["\n  position: relative;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  min-width: 20px;\n  min-height: 20px;\n"]))),Kt=at(ft||(ft=Ie(["\nfrom {\n  transform: scale(0.6);\n  opacity: 0.4;\n}\nto {\n  transform: scale(1);\n  opacity: 1;\n}"]))),Qt=st("div")(gt||(gt=Ie(["\n  position: relative;\n  transform: scale(0.6);\n  opacity: 0.4;\n  min-width: 20px;\n  animation: "," 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)\n    forwards;\n"])),Kt),Jt=e=>{let{toast:t}=e,{icon:r,type:a,iconTheme:s}=t;return void 0!==r?"string"==typeof r?n.createElement(Qt,null,r):r:"blank"===a?null:n.createElement($t,null,n.createElement(Bt,He({},s)),"loading"!==a&&n.createElement(Wt,null,"error"===a?n.createElement(zt,He({},s)):n.createElement(Vt,He({},s))))},Gt=e=>"\n0% {transform: translate3d(0,".concat(-200*e,"%,0) scale(.6); opacity:.5;}\n100% {transform: translate3d(0,0,0) scale(1); opacity:1;}\n"),Yt=e=>"\n0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}\n100% {transform: translate3d(0,".concat(-150*e,"%,-1px) scale(.6); opacity:0;}\n"),Xt=st("div")(yt||(yt=Ie(["\n  display: flex;\n  align-items: center;\n  background: #fff;\n  color: #363636;\n  line-height: 1.3;\n  will-change: transform;\n  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);\n  max-width: 350px;\n  pointer-events: auto;\n  padding: 8px 10px;\n  border-radius: 8px;\n"]))),Zt=st("div")(vt||(vt=Ie(["\n  display: flex;\n  justify-content: center;\n  margin: 4px 10px;\n  color: inherit;\n  flex: 1 1 auto;\n  white-space: pre-line;\n"]))),er=n.memo(e=>{let{toast:t,position:r,style:a,children:s}=e,l=t.height?((e,t)=>{let r=e.includes("top")?1:-1,[a,s]=Nt()?["0%{opacity:0;} 100%{opacity:1;}","0%{opacity:1;} 100%{opacity:0;}"]:[Gt(r),Yt(r)];return{animation:t?"".concat(at(a)," 0.35s cubic-bezier(.21,1.02,.73,1) forwards"):"".concat(at(s)," 0.4s forwards cubic-bezier(.06,.71,.55,1)")}})(t.position||r||"top-center",t.visible):{opacity:0},i=n.createElement(Jt,{toast:t}),o=n.createElement(Zt,He({},t.ariaProps),jt(t.message,t));return n.createElement(Xt,{className:t.className,style:He(He(He({},l),a),t.style)},"function"==typeof s?s({icon:i,message:o}):n.createElement(n.Fragment,null,i,o))});!function(e,t,r,a){Je.p=t,et=e,tt=r,rt=a}(n.createElement);var tr=e=>{let{id:t,className:r,style:a,onHeightUpdate:s,children:l}=e,i=n.useCallback(e=>{if(e){let r=()=>{let r=e.getBoundingClientRect().height;s(t,r)};r(),new MutationObserver(r).observe(e,{subtree:!0,childList:!0,characterData:!0})}},[t,s]);return n.createElement("div",{ref:i,className:r,style:a},l)},rr=Ze(bt||(bt=Ie(["\n  z-index: 9999;\n  > * {\n    pointer-events: auto;\n  }\n"]))),ar=e=>{let{reverseOrder:t,position:r="top-center",toastOptions:a,gutter:s,children:l,toasterId:i,containerStyle:o,containerClassName:c}=e,{toasts:d,handlers:u}=Ft(a,i);return n.createElement("div",{"data-rht-toaster":i||"",style:He({position:"fixed",zIndex:9999,top:16,left:16,right:16,bottom:16,pointerEvents:"none"},o),className:c,onMouseEnter:u.startPause,onMouseLeave:u.endPause},d.map(e=>{let a=e.position||r,i=((e,t)=>{let r=e.includes("top"),a=r?{top:0}:{bottom:0},s=e.includes("center")?{justifyContent:"center"}:e.includes("right")?{justifyContent:"flex-end"}:{};return He(He({left:0,right:0,display:"flex",position:"absolute",transition:Nt()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:"translateY(".concat(t*(r?1:-1),"px)")},a),s)})(a,u.calculateOffset(e,{reverseOrder:t,gutter:s,defaultPosition:r}));return n.createElement(tr,{id:e.id,key:e.id,onHeightUpdate:u.updateHeight,className:e.visible?rr:"",style:i},"custom"===e.type?jt(e.message,e):l?l(e):n.createElement(er,{toast:e,position:a}))}))},sr=Rt;function nr(e,t){return function(){return e.apply(t,arguments)}}const{toString:lr}=Object.prototype,{getPrototypeOf:ir}=Object,{iterator:or,toStringTag:cr}=Symbol,dr=(ur=Object.create(null),e=>{const t=lr.call(e);return ur[t]||(ur[t]=t.slice(8,-1).toLowerCase())});var ur;const mr=e=>(e=e.toLowerCase(),t=>dr(t)===e),pr=e=>t=>typeof t===e,{isArray:hr}=Array,xr=pr("undefined");function fr(e){return null!==e&&!xr(e)&&null!==e.constructor&&!xr(e.constructor)&&vr(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const gr=mr("ArrayBuffer");const yr=pr("string"),vr=pr("function"),br=pr("number"),jr=e=>null!==e&&"object"===typeof e,wr=e=>{if("object"!==dr(e))return!1;const t=ir(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(cr in e)&&!(or in e)},Nr=mr("Date"),kr=mr("File"),_r=mr("Blob"),Sr=mr("FileList"),Cr=mr("URLSearchParams"),[Er,Pr,Tr,Ar]=["ReadableStream","Request","Response","Headers"].map(mr);function Or(e,t){let r,a,{allOwnKeys:s=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(null!==e&&"undefined"!==typeof e)if("object"!==typeof e&&(e=[e]),hr(e))for(r=0,a=e.length;r<a;r++)t.call(null,e[r],r,e);else{if(fr(e))return;const a=s?Object.getOwnPropertyNames(e):Object.keys(e),n=a.length;let l;for(r=0;r<n;r++)l=a[r],t.call(null,e[l],l,e)}}function Mr(e,t){if(fr(e))return null;t=t.toLowerCase();const r=Object.keys(e);let a,s=r.length;for(;s-- >0;)if(a=r[s],t===a.toLowerCase())return a;return null}const Rr="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:global,Fr=e=>!xr(e)&&e!==Rr;const Lr=(Dr="undefined"!==typeof Uint8Array&&ir(Uint8Array),e=>Dr&&e instanceof Dr);var Dr;const Ir=mr("HTMLFormElement"),zr=(e=>{let{hasOwnProperty:t}=e;return(e,r)=>t.call(e,r)})(Object.prototype),Ur=mr("RegExp"),Br=(e,t)=>{const r=Object.getOwnPropertyDescriptors(e),a={};Or(r,(r,s)=>{let n;!1!==(n=t(r,s,e))&&(a[s]=n||r)}),Object.defineProperties(e,a)};const qr=mr("AsyncFunction"),Hr=((e,t)=>{return e?setImmediate:t?(r="axios@".concat(Math.random()),a=[],Rr.addEventListener("message",e=>{let{source:t,data:s}=e;t===Rr&&s===r&&a.length&&a.shift()()},!1),e=>{a.push(e),Rr.postMessage(r,"*")}):e=>setTimeout(e);var r,a})("function"===typeof setImmediate,vr(Rr.postMessage)),Vr="undefined"!==typeof queueMicrotask?queueMicrotask.bind(Rr):"undefined"!==typeof process&&process.nextTick||Hr,Wr={isArray:hr,isArrayBuffer:gr,isBuffer:fr,isFormData:e=>{let t;return e&&("function"===typeof FormData&&e instanceof FormData||vr(e.append)&&("formdata"===(t=dr(e))||"object"===t&&vr(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){let t;return t="undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&gr(e.buffer),t},isString:yr,isNumber:br,isBoolean:e=>!0===e||!1===e,isObject:jr,isPlainObject:wr,isEmptyObject:e=>{if(!jr(e)||fr(e))return!1;try{return 0===Object.keys(e).length&&Object.getPrototypeOf(e)===Object.prototype}catch(Ve){return!1}},isReadableStream:Er,isRequest:Pr,isResponse:Tr,isHeaders:Ar,isUndefined:xr,isDate:Nr,isFile:kr,isBlob:_r,isRegExp:Ur,isFunction:vr,isStream:e=>jr(e)&&vr(e.pipe),isURLSearchParams:Cr,isTypedArray:Lr,isFileList:Sr,forEach:Or,merge:function e(){const{caseless:t,skipUndefined:r}=Fr(this)&&this||{},a={},s=(s,n)=>{const l=t&&Mr(a,n)||n;wr(a[l])&&wr(s)?a[l]=e(a[l],s):wr(s)?a[l]=e({},s):hr(s)?a[l]=s.slice():r&&xr(s)||(a[l]=s)};for(let n=0,l=arguments.length;n<l;n++)arguments[n]&&Or(arguments[n],s);return a},extend:function(e,t,r){let{allOwnKeys:a}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return Or(t,(t,a)=>{r&&vr(t)?e[a]=nr(t,r):e[a]=t},{allOwnKeys:a}),e},trim:e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),inherits:(e,t,r,a)=>{e.prototype=Object.create(t.prototype,a),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),r&&Object.assign(e.prototype,r)},toFlatObject:(e,t,r,a)=>{let s,n,l;const i={};if(t=t||{},null==e)return t;do{for(s=Object.getOwnPropertyNames(e),n=s.length;n-- >0;)l=s[n],a&&!a(l,e,t)||i[l]||(t[l]=e[l],i[l]=!0);e=!1!==r&&ir(e)}while(e&&(!r||r(e,t))&&e!==Object.prototype);return t},kindOf:dr,kindOfTest:mr,endsWith:(e,t,r)=>{e=String(e),(void 0===r||r>e.length)&&(r=e.length),r-=t.length;const a=e.indexOf(t,r);return-1!==a&&a===r},toArray:e=>{if(!e)return null;if(hr(e))return e;let t=e.length;if(!br(t))return null;const r=new Array(t);for(;t-- >0;)r[t]=e[t];return r},forEachEntry:(e,t)=>{const r=(e&&e[or]).call(e);let a;for(;(a=r.next())&&!a.done;){const r=a.value;t.call(e,r[0],r[1])}},matchAll:(e,t)=>{let r;const a=[];for(;null!==(r=e.exec(t));)a.push(r);return a},isHTMLForm:Ir,hasOwnProperty:zr,hasOwnProp:zr,reduceDescriptors:Br,freezeMethods:e=>{Br(e,(t,r)=>{if(vr(e)&&-1!==["arguments","caller","callee"].indexOf(r))return!1;const a=e[r];vr(a)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")}))})},toObjectSet:(e,t)=>{const r={},a=e=>{e.forEach(e=>{r[e]=!0})};return hr(e)?a(e):a(String(e).split(t)),r},toCamelCase:e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(e,t,r){return t.toUpperCase()+r}),noop:()=>{},toFiniteNumber:(e,t)=>null!=e&&Number.isFinite(e=+e)?e:t,findKey:Mr,global:Rr,isContextDefined:Fr,isSpecCompliantForm:function(e){return!!(e&&vr(e.append)&&"FormData"===e[cr]&&e[or])},toJSONObject:e=>{const t=new Array(10),r=(e,a)=>{if(jr(e)){if(t.indexOf(e)>=0)return;if(fr(e))return e;if(!("toJSON"in e)){t[a]=e;const s=hr(e)?[]:{};return Or(e,(e,t)=>{const n=r(e,a+1);!xr(n)&&(s[t]=n)}),t[a]=void 0,s}}return e};return r(e,0)},isAsyncFn:qr,isThenable:e=>e&&(jr(e)||vr(e))&&vr(e.then)&&vr(e.catch),setImmediate:Hr,asap:Vr,isIterable:e=>null!=e&&vr(e[or])};function $r(e,t,r,a,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),r&&(this.config=r),a&&(this.request=a),s&&(this.response=s,this.status=s.status?s.status:null)}Wr.inherits($r,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Wr.toJSONObject(this.config),code:this.code,status:this.status}}});const Kr=$r.prototype,Qr={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{Qr[e]={value:e}}),Object.defineProperties($r,Qr),Object.defineProperty(Kr,"isAxiosError",{value:!0}),$r.from=(e,t,r,a,s,n)=>{const l=Object.create(Kr);Wr.toFlatObject(e,l,function(e){return e!==Error.prototype},e=>"isAxiosError"!==e);const i=e&&e.message?e.message:"Error",o=null==t&&e?e.code:t;return $r.call(l,i,o,r,a,s),e&&null==l.cause&&Object.defineProperty(l,"cause",{value:e,configurable:!0}),l.name=e&&e.name||"Error",n&&Object.assign(l,n),l};const Jr=$r;function Gr(e){return Wr.isPlainObject(e)||Wr.isArray(e)}function Yr(e){return Wr.endsWith(e,"[]")?e.slice(0,-2):e}function Xr(e,t,r){return e?e.concat(t).map(function(e,t){return e=Yr(e),!r&&t?"["+e+"]":e}).join(r?".":""):t}const Zr=Wr.toFlatObject(Wr,{},null,function(e){return/^is[A-Z]/.test(e)});const ea=function(e,t,r){if(!Wr.isObject(e))throw new TypeError("target must be an object");t=t||new FormData;const a=(r=Wr.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(e,t){return!Wr.isUndefined(t[e])})).metaTokens,s=r.visitor||c,n=r.dots,l=r.indexes,i=(r.Blob||"undefined"!==typeof Blob&&Blob)&&Wr.isSpecCompliantForm(t);if(!Wr.isFunction(s))throw new TypeError("visitor must be a function");function o(e){if(null===e)return"";if(Wr.isDate(e))return e.toISOString();if(Wr.isBoolean(e))return e.toString();if(!i&&Wr.isBlob(e))throw new Jr("Blob is not supported. Use a Buffer instead.");return Wr.isArrayBuffer(e)||Wr.isTypedArray(e)?i&&"function"===typeof Blob?new Blob([e]):Buffer.from(e):e}function c(e,r,s){let i=e;if(e&&!s&&"object"===typeof e)if(Wr.endsWith(r,"{}"))r=a?r:r.slice(0,-2),e=JSON.stringify(e);else if(Wr.isArray(e)&&function(e){return Wr.isArray(e)&&!e.some(Gr)}(e)||(Wr.isFileList(e)||Wr.endsWith(r,"[]"))&&(i=Wr.toArray(e)))return r=Yr(r),i.forEach(function(e,a){!Wr.isUndefined(e)&&null!==e&&t.append(!0===l?Xr([r],a,n):null===l?r:r+"[]",o(e))}),!1;return!!Gr(e)||(t.append(Xr(s,r,n),o(e)),!1)}const d=[],u=Object.assign(Zr,{defaultVisitor:c,convertValue:o,isVisitable:Gr});if(!Wr.isObject(e))throw new TypeError("data must be an object");return function e(r,a){if(!Wr.isUndefined(r)){if(-1!==d.indexOf(r))throw Error("Circular reference detected in "+a.join("."));d.push(r),Wr.forEach(r,function(r,n){!0===(!(Wr.isUndefined(r)||null===r)&&s.call(t,r,Wr.isString(n)?n.trim():n,a,u))&&e(r,a?a.concat(n):[n])}),d.pop()}}(e),t};function ta(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(e){return t[e]})}function ra(e,t){this._pairs=[],e&&ea(e,this,t)}const aa=ra.prototype;aa.append=function(e,t){this._pairs.push([e,t])},aa.toString=function(e){const t=e?function(t){return e.call(this,t,ta)}:ta;return this._pairs.map(function(e){return t(e[0])+"="+t(e[1])},"").join("&")};const sa=ra;function na(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function la(e,t,r){if(!t)return e;const a=r&&r.encode||na;Wr.isFunction(r)&&(r={serialize:r});const s=r&&r.serialize;let n;if(n=s?s(t,r):Wr.isURLSearchParams(t)?t.toString():new sa(t,r).toString(a),n){const t=e.indexOf("#");-1!==t&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+n}return e}const ia=class{constructor(){this.handlers=[]}use(e,t,r){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!r&&r.synchronous,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){Wr.forEach(this.handlers,function(t){null!==t&&e(t)})}},oa={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},ca={isBrowser:!0,classes:{URLSearchParams:"undefined"!==typeof URLSearchParams?URLSearchParams:sa,FormData:"undefined"!==typeof FormData?FormData:null,Blob:"undefined"!==typeof Blob?Blob:null},protocols:["http","https","file","blob","url","data"]},da="undefined"!==typeof window&&"undefined"!==typeof document,ua="object"===typeof navigator&&navigator||void 0,ma=da&&(!ua||["ReactNative","NativeScript","NS"].indexOf(ua.product)<0),pa="undefined"!==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"===typeof self.importScripts,ha=da&&window.location.href||"http://localhost",xa=He(He({},a),ca);const fa=function(e){function t(e,r,a,s){let n=e[s++];if("__proto__"===n)return!0;const l=Number.isFinite(+n),i=s>=e.length;if(n=!n&&Wr.isArray(a)?a.length:n,i)return Wr.hasOwnProp(a,n)?a[n]=[a[n],r]:a[n]=r,!l;a[n]&&Wr.isObject(a[n])||(a[n]=[]);return t(e,r,a[n],s)&&Wr.isArray(a[n])&&(a[n]=function(e){const t={},r=Object.keys(e);let a;const s=r.length;let n;for(a=0;a<s;a++)n=r[a],t[n]=e[n];return t}(a[n])),!l}if(Wr.isFormData(e)&&Wr.isFunction(e.entries)){const r={};return Wr.forEachEntry(e,(e,a)=>{t(function(e){return Wr.matchAll(/\w+|\[(\w*)]/g,e).map(e=>"[]"===e[0]?"":e[1]||e[0])}(e),a,r,0)}),r}return null};const ga={transitional:oa,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const r=t.getContentType()||"",a=r.indexOf("application/json")>-1,s=Wr.isObject(e);s&&Wr.isHTMLForm(e)&&(e=new FormData(e));if(Wr.isFormData(e))return a?JSON.stringify(fa(e)):e;if(Wr.isArrayBuffer(e)||Wr.isBuffer(e)||Wr.isStream(e)||Wr.isFile(e)||Wr.isBlob(e)||Wr.isReadableStream(e))return e;if(Wr.isArrayBufferView(e))return e.buffer;if(Wr.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let n;if(s){if(r.indexOf("application/x-www-form-urlencoded")>-1)return function(e,t){return ea(e,new xa.classes.URLSearchParams,He({visitor:function(e,t,r,a){return xa.isNode&&Wr.isBuffer(e)?(this.append(t,e.toString("base64")),!1):a.defaultVisitor.apply(this,arguments)}},t))}(e,this.formSerializer).toString();if((n=Wr.isFileList(e))||r.indexOf("multipart/form-data")>-1){const t=this.env&&this.env.FormData;return ea(n?{"files[]":e}:e,t&&new t,this.formSerializer)}}return s||a?(t.setContentType("application/json",!1),function(e,t,r){if(Wr.isString(e))try{return(t||JSON.parse)(e),Wr.trim(e)}catch(Ve){if("SyntaxError"!==Ve.name)throw Ve}return(r||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){const t=this.transitional||ga.transitional,r=t&&t.forcedJSONParsing,a="json"===this.responseType;if(Wr.isResponse(e)||Wr.isReadableStream(e))return e;if(e&&Wr.isString(e)&&(r&&!this.responseType||a)){const r=!(t&&t.silentJSONParsing)&&a;try{return JSON.parse(e,this.parseReviver)}catch(Ve){if(r){if("SyntaxError"===Ve.name)throw Jr.from(Ve,Jr.ERR_BAD_RESPONSE,this,null,this.response);throw Ve}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:xa.classes.FormData,Blob:xa.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Wr.forEach(["delete","get","head","post","put","patch"],e=>{ga.headers[e]={}});const ya=ga,va=Wr.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),ba=Symbol("internals");function ja(e){return e&&String(e).trim().toLowerCase()}function wa(e){return!1===e||null==e?e:Wr.isArray(e)?e.map(wa):String(e)}function Na(e,t,r,a,s){return Wr.isFunction(a)?a.call(this,t,r):(s&&(t=r),Wr.isString(t)?Wr.isString(a)?-1!==t.indexOf(a):Wr.isRegExp(a)?a.test(t):void 0:void 0)}class ka{constructor(e){e&&this.set(e)}set(e,t,r){const a=this;function s(e,t,r){const s=ja(t);if(!s)throw new Error("header name must be a non-empty string");const n=Wr.findKey(a,s);(!n||void 0===a[n]||!0===r||void 0===r&&!1!==a[n])&&(a[n||t]=wa(e))}const n=(e,t)=>Wr.forEach(e,(e,r)=>s(e,r,t));if(Wr.isPlainObject(e)||e instanceof this.constructor)n(e,t);else if(Wr.isString(e)&&(e=e.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim()))n((e=>{const t={};let r,a,s;return e&&e.split("\n").forEach(function(e){s=e.indexOf(":"),r=e.substring(0,s).trim().toLowerCase(),a=e.substring(s+1).trim(),!r||t[r]&&va[r]||("set-cookie"===r?t[r]?t[r].push(a):t[r]=[a]:t[r]=t[r]?t[r]+", "+a:a)}),t})(e),t);else if(Wr.isObject(e)&&Wr.isIterable(e)){let r,a,s={};for(const t of e){if(!Wr.isArray(t))throw TypeError("Object iterator must return a key-value pair");s[a=t[0]]=(r=s[a])?Wr.isArray(r)?[...r,t[1]]:[r,t[1]]:t[1]}n(s,t)}else null!=e&&s(t,e,r);return this}get(e,t){if(e=ja(e)){const r=Wr.findKey(this,e);if(r){const e=this[r];if(!t)return e;if(!0===t)return function(e){const t=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let a;for(;a=r.exec(e);)t[a[1]]=a[2];return t}(e);if(Wr.isFunction(t))return t.call(this,e,r);if(Wr.isRegExp(t))return t.exec(e);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=ja(e)){const r=Wr.findKey(this,e);return!(!r||void 0===this[r]||t&&!Na(0,this[r],r,t))}return!1}delete(e,t){const r=this;let a=!1;function s(e){if(e=ja(e)){const s=Wr.findKey(r,e);!s||t&&!Na(0,r[s],s,t)||(delete r[s],a=!0)}}return Wr.isArray(e)?e.forEach(s):s(e),a}clear(e){const t=Object.keys(this);let r=t.length,a=!1;for(;r--;){const s=t[r];e&&!Na(0,this[s],s,e,!0)||(delete this[s],a=!0)}return a}normalize(e){const t=this,r={};return Wr.forEach(this,(a,s)=>{const n=Wr.findKey(r,s);if(n)return t[n]=wa(a),void delete t[s];const l=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,r)=>t.toUpperCase()+r)}(s):String(s).trim();l!==s&&delete t[s],t[l]=wa(a),r[l]=!0}),this}concat(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.constructor.concat(this,...t)}toJSON(e){const t=Object.create(null);return Wr.forEach(this,(r,a)=>{null!=r&&!1!==r&&(t[a]=e&&Wr.isArray(r)?r.join(", "):r)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(e=>{let[t,r]=e;return t+": "+r}).join("\n")}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e){const t=new this(e);for(var r=arguments.length,a=new Array(r>1?r-1:0),s=1;s<r;s++)a[s-1]=arguments[s];return a.forEach(e=>t.set(e)),t}static accessor(e){const t=(this[ba]=this[ba]={accessors:{}}).accessors,r=this.prototype;function a(e){const a=ja(e);t[a]||(!function(e,t){const r=Wr.toCamelCase(" "+t);["get","set","has"].forEach(a=>{Object.defineProperty(e,a+r,{value:function(e,r,s){return this[a].call(this,t,e,r,s)},configurable:!0})})}(r,e),t[a]=!0)}return Wr.isArray(e)?e.forEach(a):a(e),this}}ka.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),Wr.reduceDescriptors(ka.prototype,(e,t)=>{let{value:r}=e,a=t[0].toUpperCase()+t.slice(1);return{get:()=>r,set(e){this[a]=e}}}),Wr.freezeMethods(ka);const _a=ka;function Sa(e,t){const r=this||ya,a=t||r,s=_a.from(a.headers);let n=a.data;return Wr.forEach(e,function(e){n=e.call(r,n,s.normalize(),t?t.status:void 0)}),s.normalize(),n}function Ca(e){return!(!e||!e.__CANCEL__)}function Ea(e,t,r){Jr.call(this,null==e?"canceled":e,Jr.ERR_CANCELED,t,r),this.name="CanceledError"}Wr.inherits(Ea,Jr,{__CANCEL__:!0});const Pa=Ea;function Ta(e,t,r){const a=r.config.validateStatus;r.status&&a&&!a(r.status)?t(new Jr("Request failed with status code "+r.status,[Jr.ERR_BAD_REQUEST,Jr.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r)):e(r)}const Aa=function(e,t){e=e||10;const r=new Array(e),a=new Array(e);let s,n=0,l=0;return t=void 0!==t?t:1e3,function(i){const o=Date.now(),c=a[l];s||(s=o),r[n]=i,a[n]=o;let d=l,u=0;for(;d!==n;)u+=r[d++],d%=e;if(n=(n+1)%e,n===l&&(l=(l+1)%e),o-s<t)return;const m=c&&o-c;return m?Math.round(1e3*u/m):void 0}};const Oa=function(e,t){let r,a,s=0,n=1e3/t;const l=function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Date.now();s=n,r=null,a&&(clearTimeout(a),a=null),e(...t)};return[function(){const e=Date.now(),t=e-s;for(var i=arguments.length,o=new Array(i),c=0;c<i;c++)o[c]=arguments[c];t>=n?l(o,e):(r=o,a||(a=setTimeout(()=>{a=null,l(r)},n-t)))},()=>r&&l(r)]},Ma=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,a=0;const s=Aa(50,250);return Oa(r=>{const n=r.loaded,l=r.lengthComputable?r.total:void 0,i=n-a,o=s(i);a=n;e({loaded:n,total:l,progress:l?n/l:void 0,bytes:i,rate:o||void 0,estimated:o&&l&&n<=l?(l-n)/o:void 0,event:r,lengthComputable:null!=l,[t?"download":"upload"]:!0})},r)},Ra=(e,t)=>{const r=null!=e;return[a=>t[0]({lengthComputable:r,total:e,loaded:a}),t[1]]},Fa=e=>function(){for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];return Wr.asap(()=>e(...r))},La=xa.hasStandardBrowserEnv?((e,t)=>r=>(r=new URL(r,xa.origin),e.protocol===r.protocol&&e.host===r.host&&(t||e.port===r.port)))(new URL(xa.origin),xa.navigator&&/(msie|trident)/i.test(xa.navigator.userAgent)):()=>!0,Da=xa.hasStandardBrowserEnv?{write(e,t,r,a,s,n){const l=[e+"="+encodeURIComponent(t)];Wr.isNumber(r)&&l.push("expires="+new Date(r).toGMTString()),Wr.isString(a)&&l.push("path="+a),Wr.isString(s)&&l.push("domain="+s),!0===n&&l.push("secure"),document.cookie=l.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read:()=>null,remove(){}};function Ia(e,t,r){let a=!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t);return e&&(a||0==r)?function(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t}const za=e=>e instanceof _a?He({},e):e;function Ua(e,t){t=t||{};const r={};function a(e,t,r,a){return Wr.isPlainObject(e)&&Wr.isPlainObject(t)?Wr.merge.call({caseless:a},e,t):Wr.isPlainObject(t)?Wr.merge({},t):Wr.isArray(t)?t.slice():t}function s(e,t,r,s){return Wr.isUndefined(t)?Wr.isUndefined(e)?void 0:a(void 0,e,0,s):a(e,t,0,s)}function n(e,t){if(!Wr.isUndefined(t))return a(void 0,t)}function l(e,t){return Wr.isUndefined(t)?Wr.isUndefined(e)?void 0:a(void 0,e):a(void 0,t)}function i(r,s,n){return n in t?a(r,s):n in e?a(void 0,r):void 0}const o={url:n,method:n,data:n,baseURL:l,transformRequest:l,transformResponse:l,paramsSerializer:l,timeout:l,timeoutMessage:l,withCredentials:l,withXSRFToken:l,adapter:l,responseType:l,xsrfCookieName:l,xsrfHeaderName:l,onUploadProgress:l,onDownloadProgress:l,decompress:l,maxContentLength:l,maxBodyLength:l,beforeRedirect:l,transport:l,httpAgent:l,httpsAgent:l,cancelToken:l,socketPath:l,responseEncoding:l,validateStatus:i,headers:(e,t,r)=>s(za(e),za(t),0,!0)};return Wr.forEach(Object.keys(He(He({},e),t)),function(a){const n=o[a]||s,l=n(e[a],t[a],a);Wr.isUndefined(l)&&n!==i||(r[a]=l)}),r}const Ba=e=>{const t=Ua({},e);let{data:r,withXSRFToken:a,xsrfHeaderName:s,xsrfCookieName:n,headers:l,auth:i}=t;if(t.headers=l=_a.from(l),t.url=la(Ia(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),i&&l.set("Authorization","Basic "+btoa((i.username||"")+":"+(i.password?unescape(encodeURIComponent(i.password)):""))),Wr.isFormData(r))if(xa.hasStandardBrowserEnv||xa.hasStandardBrowserWebWorkerEnv)l.setContentType(void 0);else if(Wr.isFunction(r.getHeaders)){const e=r.getHeaders(),t=["content-type","content-length"];Object.entries(e).forEach(e=>{let[r,a]=e;t.includes(r.toLowerCase())&&l.set(r,a)})}if(xa.hasStandardBrowserEnv&&(a&&Wr.isFunction(a)&&(a=a(t)),a||!1!==a&&La(t.url))){const e=s&&n&&Da.read(n);e&&l.set(s,e)}return t},qa="undefined"!==typeof XMLHttpRequest&&function(e){return new Promise(function(t,r){const a=Ba(e);let s=a.data;const n=_a.from(a.headers).normalize();let l,i,o,c,d,{responseType:u,onUploadProgress:m,onDownloadProgress:p}=a;function h(){c&&c(),d&&d(),a.cancelToken&&a.cancelToken.unsubscribe(l),a.signal&&a.signal.removeEventListener("abort",l)}let x=new XMLHttpRequest;function f(){if(!x)return;const a=_a.from("getAllResponseHeaders"in x&&x.getAllResponseHeaders());Ta(function(e){t(e),h()},function(e){r(e),h()},{data:u&&"text"!==u&&"json"!==u?x.response:x.responseText,status:x.status,statusText:x.statusText,headers:a,config:e,request:x}),x=null}x.open(a.method.toUpperCase(),a.url,!0),x.timeout=a.timeout,"onloadend"in x?x.onloadend=f:x.onreadystatechange=function(){x&&4===x.readyState&&(0!==x.status||x.responseURL&&0===x.responseURL.indexOf("file:"))&&setTimeout(f)},x.onabort=function(){x&&(r(new Jr("Request aborted",Jr.ECONNABORTED,e,x)),x=null)},x.onerror=function(t){const a=t&&t.message?t.message:"Network Error",s=new Jr(a,Jr.ERR_NETWORK,e,x);s.event=t||null,r(s),x=null},x.ontimeout=function(){let t=a.timeout?"timeout of "+a.timeout+"ms exceeded":"timeout exceeded";const s=a.transitional||oa;a.timeoutErrorMessage&&(t=a.timeoutErrorMessage),r(new Jr(t,s.clarifyTimeoutError?Jr.ETIMEDOUT:Jr.ECONNABORTED,e,x)),x=null},void 0===s&&n.setContentType(null),"setRequestHeader"in x&&Wr.forEach(n.toJSON(),function(e,t){x.setRequestHeader(t,e)}),Wr.isUndefined(a.withCredentials)||(x.withCredentials=!!a.withCredentials),u&&"json"!==u&&(x.responseType=a.responseType),p&&([o,d]=Ma(p,!0),x.addEventListener("progress",o)),m&&x.upload&&([i,c]=Ma(m),x.upload.addEventListener("progress",i),x.upload.addEventListener("loadend",c)),(a.cancelToken||a.signal)&&(l=t=>{x&&(r(!t||t.type?new Pa(null,e,x):t),x.abort(),x=null)},a.cancelToken&&a.cancelToken.subscribe(l),a.signal&&(a.signal.aborted?l():a.signal.addEventListener("abort",l)));const g=function(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}(a.url);g&&-1===xa.protocols.indexOf(g)?r(new Jr("Unsupported protocol "+g+":",Jr.ERR_BAD_REQUEST,e)):x.send(s||null)})},Ha=(e,t)=>{const{length:r}=e=e?e.filter(Boolean):[];if(t||r){let r,a=new AbortController;const s=function(e){if(!r){r=!0,l();const t=e instanceof Error?e:this.reason;a.abort(t instanceof Jr?t:new Pa(t instanceof Error?t.message:t))}};let n=t&&setTimeout(()=>{n=null,s(new Jr("timeout ".concat(t," of ms exceeded"),Jr.ETIMEDOUT))},t);const l=()=>{e&&(n&&clearTimeout(n),n=null,e.forEach(e=>{e.unsubscribe?e.unsubscribe(s):e.removeEventListener("abort",s)}),e=null)};e.forEach(e=>e.addEventListener("abort",s));const{signal:i}=a;return i.unsubscribe=()=>Wr.asap(l),i}};function Va(e,t){this.v=e,this.k=t}function Wa(e){return function(){return new $a(e.apply(this,arguments))}}function $a(e){var t,r;function a(t,r){try{var n=e[t](r),l=n.value,i=l instanceof Va;Promise.resolve(i?l.v:l).then(function(r){if(i){var o="return"===t?"return":"next";if(!l.k||r.done)return a(o,r);r=e[o](r).value}s(n.done?"return":"normal",r)},function(e){a("throw",e)})}catch(e){s("throw",e)}}function s(e,s){switch(e){case"return":t.resolve({value:s,done:!0});break;case"throw":t.reject(s);break;default:t.resolve({value:s,done:!1})}(t=t.next)?a(t.key,t.arg):r=null}this._invoke=function(e,s){return new Promise(function(n,l){var i={key:e,arg:s,resolve:n,reject:l,next:null};r?r=r.next=i:(t=r=i,a(e,s))})},"function"!=typeof e.return&&(this.return=void 0)}function Ka(e){return new Va(e,0)}function Qa(e){var t={},r=!1;function a(t,a){return r=!0,a=new Promise(function(r){r(e[t](a))}),{done:!1,value:new Va(a,1)}}return t["undefined"!=typeof Symbol&&Symbol.iterator||"@@iterator"]=function(){return this},t.next=function(e){return r?(r=!1,e):a("next",e)},"function"==typeof e.throw&&(t.throw=function(e){if(r)throw r=!1,e;return a("throw",e)}),"function"==typeof e.return&&(t.return=function(e){return r?(r=!1,e):a("return",e)}),t}function Ja(e){var t,r,a,s=2;for("undefined"!=typeof Symbol&&(r=Symbol.asyncIterator,a=Symbol.iterator);s--;){if(r&&null!=(t=e[r]))return t.call(e);if(a&&null!=(t=e[a]))return new Ga(t.call(e));r="@@asyncIterator",a="@@iterator"}throw new TypeError("Object is not async iterable")}function Ga(e){function t(e){if(Object(e)!==e)return Promise.reject(new TypeError(e+" is not an object."));var t=e.done;return Promise.resolve(e.value).then(function(e){return{value:e,done:t}})}return Ga=function(e){this.s=e,this.n=e.next},Ga.prototype={s:null,n:null,next:function(){return t(this.n.apply(this.s,arguments))},return:function(e){var r=this.s.return;return void 0===r?Promise.resolve({value:e,done:!0}):t(r.apply(this.s,arguments))},throw:function(e){var r=this.s.return;return void 0===r?Promise.reject(e):t(r.apply(this.s,arguments))}},new Ga(e)}$a.prototype["function"==typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},$a.prototype.next=function(e){return this._invoke("next",e)},$a.prototype.throw=function(e){return this._invoke("throw",e)},$a.prototype.return=function(e){return this._invoke("return",e)};const Ya=function*(e,t){let r=e.byteLength;if(!t||r<t)return void(yield e);let a,s=0;for(;s<r;)a=s+t,yield e.slice(s,a),s=a},Xa=function(){var e=Wa(function*(e,t){var r,a=!1,s=!1;try{for(var n,l=Ja(Za(e));a=!(n=yield Ka(l.next())).done;a=!1){const e=n.value;yield*Qa(Ja(Ya(e,t)))}}catch(i){s=!0,r=i}finally{try{a&&null!=l.return&&(yield Ka(l.return()))}finally{if(s)throw r}}});return function(t,r){return e.apply(this,arguments)}}(),Za=function(){var e=Wa(function*(e){if(e[Symbol.asyncIterator])return void(yield*Qa(Ja(e)));const t=e.getReader();try{for(;;){const{done:e,value:r}=yield Ka(t.read());if(e)break;yield r}}finally{yield Ka(t.cancel())}});return function(t){return e.apply(this,arguments)}}(),es=(e,t,r,a)=>{const s=Xa(e,t);let n,l=0,i=e=>{n||(n=!0,a&&a(e))};return new ReadableStream({async pull(e){try{const{done:t,value:a}=await s.next();if(t)return i(),void e.close();let n=a.byteLength;if(r){let e=l+=n;r(e)}e.enqueue(new Uint8Array(a))}catch(t){throw i(t),t}},cancel:e=>(i(e),s.return())},{highWaterMark:2})},{isFunction:ts}=Wr,rs=(e=>{let{Request:t,Response:r}=e;return{Request:t,Response:r}})(Wr.global),{ReadableStream:as,TextEncoder:ss}=Wr.global,ns=function(e){try{for(var t=arguments.length,r=new Array(t>1?t-1:0),a=1;a<t;a++)r[a-1]=arguments[a];return!!e(...r)}catch(Ve){return!1}},ls=e=>{e=Wr.merge.call({skipUndefined:!0},rs,e);const{fetch:t,Request:r,Response:a}=e,s=t?ts(t):"function"===typeof fetch,n=ts(r),l=ts(a);if(!s)return!1;const i=s&&ts(as),o=s&&("function"===typeof ss?(c=new ss,e=>c.encode(e)):async e=>new Uint8Array(await new r(e).arrayBuffer()));var c;const d=n&&i&&ns(()=>{let e=!1;const t=new r(xa.origin,{body:new as,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t}),u=l&&i&&ns(()=>Wr.isReadableStream(new a("").body)),m={stream:u&&(e=>e.body)};s&&["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!m[e]&&(m[e]=(t,r)=>{let a=t&&t[e];if(a)return a.call(t);throw new Jr("Response type '".concat(e,"' is not supported"),Jr.ERR_NOT_SUPPORT,r)})});const p=async(e,t)=>{const a=Wr.toFiniteNumber(e.getContentLength());return null==a?(async e=>{if(null==e)return 0;if(Wr.isBlob(e))return e.size;if(Wr.isSpecCompliantForm(e)){const t=new r(xa.origin,{method:"POST",body:e});return(await t.arrayBuffer()).byteLength}return Wr.isArrayBufferView(e)||Wr.isArrayBuffer(e)?e.byteLength:(Wr.isURLSearchParams(e)&&(e+=""),Wr.isString(e)?(await o(e)).byteLength:void 0)})(t):a};return async e=>{let{url:s,method:l,data:i,signal:o,cancelToken:c,timeout:h,onDownloadProgress:x,onUploadProgress:f,responseType:g,headers:y,withCredentials:v="same-origin",fetchOptions:b}=Ba(e),j=t||fetch;g=g?(g+"").toLowerCase():"text";let w=Ha([o,c&&c.toAbortSignal()],h),N=null;const k=w&&w.unsubscribe&&(()=>{w.unsubscribe()});let _;try{if(f&&d&&"get"!==l&&"head"!==l&&0!==(_=await p(y,i))){let e,t=new r(s,{method:"POST",body:i,duplex:"half"});if(Wr.isFormData(i)&&(e=t.headers.get("content-type"))&&y.setContentType(e),t.body){const[e,r]=Ra(_,Ma(Fa(f)));i=es(t.body,65536,e,r)}}Wr.isString(v)||(v=v?"include":"omit");const t=n&&"credentials"in r.prototype,o=He(He({},b),{},{signal:w,method:l.toUpperCase(),headers:y.normalize().toJSON(),body:i,duplex:"half",credentials:t?v:void 0});N=n&&new r(s,o);let c=await(n?j(N,b):j(s,o));const h=u&&("stream"===g||"response"===g);if(u&&(x||h&&k)){const e={};["status","statusText","headers"].forEach(t=>{e[t]=c[t]});const t=Wr.toFiniteNumber(c.headers.get("content-length")),[r,s]=x&&Ra(t,Ma(Fa(x),!0))||[];c=new a(es(c.body,65536,r,()=>{s&&s(),k&&k()}),e)}g=g||"text";let S=await m[Wr.findKey(m,g)||"text"](c,e);return!h&&k&&k(),await new Promise((t,r)=>{Ta(t,r,{data:S,headers:_a.from(c.headers),status:c.status,statusText:c.statusText,config:e,request:N})})}catch(S){if(k&&k(),S&&"TypeError"===S.name&&/Load failed|fetch/i.test(S.message))throw Object.assign(new Jr("Network Error",Jr.ERR_NETWORK,e,N),{cause:S.cause||S});throw Jr.from(S,S&&S.code,e,N)}}},is=new Map,os=e=>{let t=e?e.env:{};const{fetch:r,Request:a,Response:s}=t,n=[a,s,r];let l,i,o=n.length,c=is;for(;o--;)l=n[o],i=c.get(l),void 0===i&&c.set(l,i=o?new Map:ls(t)),c=i;return i},cs=(os(),{http:null,xhr:qa,fetch:{get:os}});Wr.forEach(cs,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch(Ve){}Object.defineProperty(e,"adapterName",{value:t})}});const ds=e=>"- ".concat(e),us=e=>Wr.isFunction(e)||null===e||!1===e,ms=(e,t)=>{e=Wr.isArray(e)?e:[e];const{length:r}=e;let a,s;const n={};for(let l=0;l<r;l++){let r;if(a=e[l],s=a,!us(a)&&(s=cs[(r=String(a)).toLowerCase()],void 0===s))throw new Jr("Unknown adapter '".concat(r,"'"));if(s&&(Wr.isFunction(s)||(s=s.get(t))))break;n[r||"#"+l]=s}if(!s){const e=Object.entries(n).map(e=>{let[t,r]=e;return"adapter ".concat(t," ")+(!1===r?"is not supported by the environment":"is not available in the build")});let t=r?e.length>1?"since :\n"+e.map(ds).join("\n"):" "+ds(e[0]):"as no adapter specified";throw new Jr("There is no suitable adapter to dispatch the request "+t,"ERR_NOT_SUPPORT")}return s};function ps(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Pa(null,e)}function hs(e){ps(e),e.headers=_a.from(e.headers),e.data=Sa.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1);return ms(e.adapter||ya.adapter,e)(e).then(function(t){return ps(e),t.data=Sa.call(e,e.transformResponse,t),t.headers=_a.from(t.headers),t},function(t){return Ca(t)||(ps(e),t&&t.response&&(t.response.data=Sa.call(e,e.transformResponse,t.response),t.response.headers=_a.from(t.response.headers))),Promise.reject(t)})}const xs="1.12.2",fs={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{fs[e]=function(r){return typeof r===e||"a"+(t<1?"n ":" ")+e}});const gs={};fs.transitional=function(e,t,r){function a(e,t){return"[Axios v"+xs+"] Transitional option '"+e+"'"+t+(r?". "+r:"")}return(r,s,n)=>{if(!1===e)throw new Jr(a(s," has been removed"+(t?" in "+t:"")),Jr.ERR_DEPRECATED);return t&&!gs[s]&&(gs[s]=!0,console.warn(a(s," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(r,s,n)}},fs.spelling=function(e){return(t,r)=>(console.warn("".concat(r," is likely a misspelling of ").concat(e)),!0)};const ys={assertOptions:function(e,t,r){if("object"!==typeof e)throw new Jr("options must be an object",Jr.ERR_BAD_OPTION_VALUE);const a=Object.keys(e);let s=a.length;for(;s-- >0;){const n=a[s],l=t[n];if(l){const t=e[n],r=void 0===t||l(t,n,e);if(!0!==r)throw new Jr("option "+n+" must be "+r,Jr.ERR_BAD_OPTION_VALUE);continue}if(!0!==r)throw new Jr("Unknown option "+n,Jr.ERR_BAD_OPTION)}},validators:fs},vs=ys.validators;class bs{constructor(e){this.defaults=e||{},this.interceptors={request:new ia,response:new ia}}async request(e,t){try{return await this._request(e,t)}catch(r){if(r instanceof Error){let e={};Error.captureStackTrace?Error.captureStackTrace(e):e=new Error;const t=e.stack?e.stack.replace(/^.+\n/,""):"";try{r.stack?t&&!String(r.stack).endsWith(t.replace(/^.+\n.+\n/,""))&&(r.stack+="\n"+t):r.stack=t}catch(Ve){}}throw r}}_request(e,t){"string"===typeof e?(t=t||{}).url=e:t=e||{},t=Ua(this.defaults,t);const{transitional:r,paramsSerializer:a,headers:s}=t;void 0!==r&&ys.assertOptions(r,{silentJSONParsing:vs.transitional(vs.boolean),forcedJSONParsing:vs.transitional(vs.boolean),clarifyTimeoutError:vs.transitional(vs.boolean)},!1),null!=a&&(Wr.isFunction(a)?t.paramsSerializer={serialize:a}:ys.assertOptions(a,{encode:vs.function,serialize:vs.function},!0)),void 0!==t.allowAbsoluteUrls||(void 0!==this.defaults.allowAbsoluteUrls?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),ys.assertOptions(t,{baseUrl:vs.spelling("baseURL"),withXsrfToken:vs.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let n=s&&Wr.merge(s.common,s[t.method]);s&&Wr.forEach(["delete","get","head","post","put","patch","common"],e=>{delete s[e]}),t.headers=_a.concat(n,s);const l=[];let i=!0;this.interceptors.request.forEach(function(e){"function"===typeof e.runWhen&&!1===e.runWhen(t)||(i=i&&e.synchronous,l.unshift(e.fulfilled,e.rejected))});const o=[];let c;this.interceptors.response.forEach(function(e){o.push(e.fulfilled,e.rejected)});let d,u=0;if(!i){const e=[hs.bind(this),void 0];for(e.unshift(...l),e.push(...o),d=e.length,c=Promise.resolve(t);u<d;)c=c.then(e[u++],e[u++]);return c}d=l.length;let m=t;for(;u<d;){const e=l[u++],t=l[u++];try{m=e(m)}catch(p){t.call(this,p);break}}try{c=hs.call(this,m)}catch(p){return Promise.reject(p)}for(u=0,d=o.length;u<d;)c=c.then(o[u++],o[u++]);return c}getUri(e){return la(Ia((e=Ua(this.defaults,e)).baseURL,e.url,e.allowAbsoluteUrls),e.params,e.paramsSerializer)}}Wr.forEach(["delete","get","head","options"],function(e){bs.prototype[e]=function(t,r){return this.request(Ua(r||{},{method:e,url:t,data:(r||{}).data}))}}),Wr.forEach(["post","put","patch"],function(e){function t(t){return function(r,a,s){return this.request(Ua(s||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:r,data:a}))}}bs.prototype[e]=t(),bs.prototype[e+"Form"]=t(!0)});const js=bs;class ws{constructor(e){if("function"!==typeof e)throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(e){t=e});const r=this;this.promise.then(e=>{if(!r._listeners)return;let t=r._listeners.length;for(;t-- >0;)r._listeners[t](e);r._listeners=null}),this.promise.then=e=>{let t;const a=new Promise(e=>{r.subscribe(e),t=e}).then(e);return a.cancel=function(){r.unsubscribe(t)},a},e(function(e,a,s){r.reason||(r.reason=new Pa(e,a,s),t(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=t=>{e.abort(t)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;const t=new ws(function(t){e=t});return{token:t,cancel:e}}}const Ns=ws;const ks={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(ks).forEach(e=>{let[t,r]=e;ks[r]=t});const _s=ks;const Ss=function e(t){const r=new js(t),a=nr(js.prototype.request,r);return Wr.extend(a,js.prototype,r,{allOwnKeys:!0}),Wr.extend(a,r,null,{allOwnKeys:!0}),a.create=function(r){return e(Ua(t,r))},a}(ya);Ss.Axios=js,Ss.CanceledError=Pa,Ss.CancelToken=Ns,Ss.isCancel=Ca,Ss.VERSION=xs,Ss.toFormData=ea,Ss.AxiosError=Jr,Ss.Cancel=Ss.CanceledError,Ss.all=function(e){return Promise.all(e)},Ss.spread=function(e){return function(t){return e.apply(null,t)}},Ss.isAxiosError=function(e){return Wr.isObject(e)&&!0===e.isAxiosError},Ss.mergeConfig=Ua,Ss.AxiosHeaders=_a,Ss.formToJSON=e=>fa(Wr.isHTMLForm(e)?new FormData(e):e),Ss.getAdapter=ms,Ss.HttpStatusCode=_s,Ss.default=Ss;const Cs=Ss,Es=Cs.create({baseURL:"/aiva/api",headers:{"Content-Type":"application/json"}});Es.interceptors.request.use(e=>{const t=localStorage.getItem("token");return t?e.headers.Authorization="Bearer ".concat(t):console.log("NO TOKEN FOUND"),e},e=>Promise.reject(e)),Es.interceptors.response.use(e=>e,e=>{var t,r,a;return console.log("=== API ERROR DEBUG ==="),console.log("Status:",null===(t=e.response)||void 0===t?void 0:t.status),console.log("Error data:",null===(r=e.response)||void 0===r?void 0:r.data),401===(null===(a=e.response)||void 0===a?void 0:a.status)&&(localStorage.removeItem("token"),localStorage.removeItem("user")),Promise.reject(e)});const Ps=e=>Es.get("/agents",{params:e}),Ts=e=>Es.get("/agents/".concat(e)),As=(e,t)=>Es.put("/agents/".concat(e),t),Os=()=>Es.get("/credits/balance"),Ms=Es;var Rs=r(579);const Fs=(0,n.createContext)(),Ls=()=>{const e=(0,n.useContext)(Fs);if(!e)throw new Error("useAuth must be used within AuthProvider");return e},Ds=e=>{let{children:t}=e;const[r,a]=(0,n.useState)(null),[s,l]=(0,n.useState)(!0);(0,n.useEffect)(()=>{const e=localStorage.getItem("token"),t=localStorage.getItem("user");if(e&&t)try{const e=JSON.parse(t);a(e),Es.get("/auth/me").then(e=>{a(e.data.user),localStorage.setItem("user",JSON.stringify(e.data.user))}).catch(()=>{i()}).finally(()=>{l(!1)})}catch(r){i(),l(!1)}else l(!1)},[]);const i=()=>{localStorage.removeItem("token"),localStorage.removeItem("user"),a(null)};return(0,Rs.jsx)(Fs.Provider,{value:{user:r,login:async(e,t)=>{const r=await((e,t)=>Es.post("/auth/login",{email:e,password:t}))(e,t),{token:s,user:n}=r.data;return localStorage.setItem("token",s),localStorage.setItem("user",JSON.stringify(n)),a(n),n},logout:i,loading:s},children:t})},Is=()=>{const[e,t]=(0,n.useState)(""),[r,a]=(0,n.useState)(""),[s,l]=(0,n.useState)(!1),{login:i}=Ls(),o=te(),c=Z();return(0,Rs.jsx)("div",{className:"flex items-center justify-center min-h-screen bg-gray-100",children:(0,Rs.jsx)("div",{className:"w-full max-w-md",children:(0,Rs.jsxs)("div",{className:"px-8 py-10 bg-white rounded-lg shadow-md",children:[(0,Rs.jsx)("h2",{className:"mb-6 text-3xl font-bold text-center text-gray-900",children:"Agent Management"}),(0,Rs.jsxs)("form",{onSubmit:async t=>{t.preventDefault(),l(!0);try{var a,s;await i(e,r),sr.success("Login successful");const t=(null===(a=c.state)||void 0===a||null===(s=a.from)||void 0===s?void 0:s.pathname)||"/";o(t,{replace:!0})}catch(u){var n,d;sr.error((null===(n=u.response)||void 0===n||null===(d=n.data)||void 0===d?void 0:d.error)||"Login failed")}finally{l(!1)}},className:"space-y-6",children:[(0,Rs.jsxs)("div",{children:[(0,Rs.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email"}),(0,Rs.jsx)("input",{id:"email",type:"email",required:!0,value:e,onChange:e=>t(e.target.value),className:"block w-full px-3 py-2 mt-1 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500"})]}),(0,Rs.jsxs)("div",{children:[(0,Rs.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Password"}),(0,Rs.jsx)("input",{id:"password",type:"password",required:!0,value:r,onChange:e=>a(e.target.value),className:"block w-full px-3 py-2 mt-1 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500"})]}),(0,Rs.jsx)("button",{type:"submit",disabled:s,className:"w-full px-4 py-2 text-sm font-medium text-white bg-primary-600 border border-transparent rounded-md shadow-sm hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50",children:s?"Logging in...":"Login"})]})]})})})};function zs(e,t){if(null==e)return{};var r,a,s=function(e,t){if(null==e)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(-1!==t.indexOf(a))continue;r[a]=e[a]}return r}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(a=0;a<n.length;a++)r=n[a],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}var Us={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const Bs=["color","size","strokeWidth","absoluteStrokeWidth","className","children"],qs=(e,t)=>{const r=(0,n.forwardRef)((r,a)=>{let{color:s="currentColor",size:l=24,strokeWidth:i=2,absoluteStrokeWidth:o,className:c="",children:d}=r,u=zs(r,Bs);return(0,n.createElement)("svg",He(He({ref:a},Us),{},{width:l,height:l,stroke:s,strokeWidth:o?24*Number(i)/Number(l):i,className:["lucide","lucide-".concat((m=e,m.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim())),c].join(" ")},u),[...t.map(e=>{let[t,r]=e;return(0,n.createElement)(t,r)}),...Array.isArray(d)?d:[d]]);var m});return r.displayName="".concat(e),r},Hs=qs("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]),Vs=qs("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]),Ws=qs("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]),$s=qs("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),Ks=()=>{const[e,t]=(0,n.useState)({balance:0,agents:0,calls:0,totalCost:0}),[r,a]=(0,n.useState)(!0);(0,n.useEffect)(()=>{s()},[]);const s=async()=>{try{const[r,a,s]=await Promise.all([Os(),(e=30,Es.get("/calls/stats/summary",{params:{days:e}})),Ps({is_active:!0})]);t({balance:r.data.balance,agents:s.data.agents.length,calls:a.data.total_calls,totalCost:a.data.total_cost})}catch(r){console.error("Failed to load dashboard:",r)}finally{a(!1)}var e},l=[{name:"Credit Balance",value:"$".concat(e.balance.toFixed(2)),icon:Hs,color:"bg-green-500",link:"/credits"},{name:"Active Agents",value:e.agents,icon:Vs,color:"bg-blue-500",link:"/agents"},{name:"Total Calls (30d)",value:e.calls,icon:Ws,color:"bg-purple-500",link:"/calls"},{name:"Total Cost (30d)",value:"$".concat(e.totalCost.toFixed(2)),icon:$s,color:"bg-orange-500",link:"/calls"}];return r?(0,Rs.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,Rs.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):(0,Rs.jsxs)("div",{className:"space-y-6",children:[(0,Rs.jsxs)("div",{children:[(0,Rs.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Dashboard"}),(0,Rs.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Overview of your agent management system"})]}),(0,Rs.jsx)("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-4",children:l.map(e=>{const t=e.icon;return(0,Rs.jsx)(Re,{to:e.link,className:"overflow-hidden bg-white rounded-lg shadow hover:shadow-md transition-shadow",children:(0,Rs.jsx)("div",{className:"p-6",children:(0,Rs.jsxs)("div",{className:"flex items-center",children:[(0,Rs.jsx)("div",{className:"flex-shrink-0 p-3 rounded-md ".concat(e.color),children:(0,Rs.jsx)(t,{className:"w-6 h-6 text-white"})}),(0,Rs.jsxs)("div",{className:"flex-1 ml-5",children:[(0,Rs.jsx)("p",{className:"text-sm font-medium text-gray-500 truncate",children:e.name}),(0,Rs.jsx)("p",{className:"mt-1 text-2xl font-semibold text-gray-900",children:e.value})]})]})})},e.name)})}),(0,Rs.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,Rs.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Quick Actions"}),(0,Rs.jsxs)("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-3",children:[(0,Rs.jsxs)(Re,{to:"/agents/new",className:"p-4 border-2 border-dashed border-gray-300 rounded-lg hover:border-primary-500 transition-colors text-center",children:[(0,Rs.jsx)(Vs,{className:"w-8 h-8 mx-auto text-gray-400 mb-2"}),(0,Rs.jsx)("span",{className:"text-sm font-medium text-gray-900",children:"Create New Agent"})]}),(0,Rs.jsxs)(Re,{to:"/credits",className:"p-4 border-2 border-dashed border-gray-300 rounded-lg hover:border-primary-500 transition-colors text-center",children:[(0,Rs.jsx)(Hs,{className:"w-8 h-8 mx-auto text-gray-400 mb-2"}),(0,Rs.jsx)("span",{className:"text-sm font-medium text-gray-900",children:"Manage Credits"})]}),(0,Rs.jsxs)(Re,{to:"/calls",className:"p-4 border-2 border-dashed border-gray-300 rounded-lg hover:border-primary-500 transition-colors text-center",children:[(0,Rs.jsx)(Ws,{className:"w-8 h-8 mx-auto text-gray-400 mb-2"}),(0,Rs.jsx)("span",{className:"text-sm font-medium text-gray-900",children:"View Call Logs"})]})]})]})]})},Qs=qs("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),Js=qs("PowerOff",[["path",{d:"M18.36 6.64A9 9 0 0 1 20.77 15",key:"dxknvb"}],["path",{d:"M6.16 6.16a9 9 0 1 0 12.68 12.68",key:"1x7qb5"}],["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]),Gs=qs("Power",[["path",{d:"M12 2v10",key:"mnfbl"}],["path",{d:"M18.4 6.6a9 9 0 1 1-12.77.04",key:"obofu9"}]]),Ys=qs("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]),Xs=qs("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]),Zs=qs("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),en=()=>{const[e,t]=(0,n.useState)([]),[r,a]=(0,n.useState)(!0),[s,l]=(0,n.useState)("all");(0,n.useEffect)(()=>{i()},[s]);const i=async()=>{try{const e="all"!==s?{is_active:"active"===s}:{},r=await Ps(e);t(r.data.agents)}catch(e){sr.error("Failed to load agents")}finally{a(!1)}},o=async e=>{var t;if(window.confirm('Are you sure you want to delete "'.concat(e.name,'"?')))try{await(t=e.id,Es.delete("/agents/".concat(t))),sr.success("Agent deleted"),i()}catch(r){sr.error("Failed to delete agent")}};return r?(0,Rs.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,Rs.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):(0,Rs.jsxs)("div",{className:"space-y-6",children:[(0,Rs.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Rs.jsxs)("div",{children:[(0,Rs.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Agents"}),(0,Rs.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Manage your AI voice agents"})]}),(0,Rs.jsxs)(Re,{to:"/agents/new",className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700",children:[(0,Rs.jsx)(Qs,{className:"w-5 h-5 mr-2"}),"New Agent"]})]}),(0,Rs.jsxs)("div",{className:"flex space-x-4",children:[(0,Rs.jsx)("button",{onClick:()=>l("all"),className:"px-4 py-2 text-sm font-medium rounded-md ".concat("all"===s?"bg-primary-100 text-primary-700":"text-gray-700 hover:bg-gray-100"),children:"All"}),(0,Rs.jsx)("button",{onClick:()=>l("active"),className:"px-4 py-2 text-sm font-medium rounded-md ".concat("active"===s?"bg-primary-100 text-primary-700":"text-gray-700 hover:bg-gray-100"),children:"Active"}),(0,Rs.jsx)("button",{onClick:()=>l("inactive"),className:"px-4 py-2 text-sm font-medium rounded-md ".concat("inactive"===s?"bg-primary-100 text-primary-700":"text-gray-700 hover:bg-gray-100"),children:"Inactive"})]}),(0,Rs.jsx)("div",{className:"bg-white shadow overflow-hidden rounded-lg",children:(0,Rs.jsx)("ul",{className:"divide-y divide-gray-200",children:0===e.length?(0,Rs.jsx)("li",{className:"p-8 text-center text-gray-500",children:"No agents found. Create your first agent to get started."}):e.map(e=>(0,Rs.jsx)("li",{className:"p-6 hover:bg-gray-50",children:(0,Rs.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Rs.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,Rs.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,Rs.jsx)("h3",{className:"text-lg font-medium text-gray-900 truncate",children:e.name}),(0,Rs.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat(e.is_active?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"),children:e.is_active?"Active":"Inactive"})]}),(0,Rs.jsxs)("div",{className:"mt-2 flex items-center text-sm text-gray-500 space-x-4",children:[(0,Rs.jsxs)("span",{children:["Type: ",e.type]}),(0,Rs.jsx)("span",{className:"px-2 py-0.5 rounded-full text-xs font-semibold ".concat("deepgram"===e.provider?"bg-purple-100 text-purple-800":"bg-blue-100 text-blue-800"),children:"deepgram"===e.provider?"Deepgram":"OpenAI"}),(0,Rs.jsxs)("span",{children:["Voice: ",e.voice||e.deepgram_voice||"N/A"]}),(0,Rs.jsxs)("span",{children:["Model: ",e.model||e.deepgram_model]})]}),(0,Rs.jsx)("p",{className:"mt-2 text-sm text-gray-600 line-clamp-2",children:e.instructions})]}),(0,Rs.jsxs)("div",{className:"flex items-center space-x-2 ml-4",children:[(0,Rs.jsx)("button",{onClick:()=>(async e=>{try{await As(e.id,{is_active:!e.is_active}),sr.success("Agent ".concat(e.is_active?"deactivated":"activated")),i()}catch(t){sr.error("Failed to update agent")}})(e),className:"p-2 text-gray-400 hover:text-gray-600",title:e.is_active?"Deactivate":"Activate",children:e.is_active?(0,Rs.jsx)(Js,{className:"w-5 h-5"}):(0,Rs.jsx)(Gs,{className:"w-5 h-5"})}),(0,Rs.jsx)(Re,{to:"/agents/".concat(e.id),className:"p-2 text-gray-400 hover:text-gray-600",title:"Edit",children:(0,Rs.jsx)(Ys,{className:"w-5 h-5"})}),(0,Rs.jsxs)(Re,{to:"/agents/".concat(e.id,"/chat-integration"),className:"inline-flex items-center px-3 py-1.5 border border-primary-300 shadow-sm text-xs font-medium rounded text-primary-700 bg-primary-50 hover:bg-primary-100",title:"Chat Integration",children:[(0,Rs.jsx)(Xs,{className:"w-3 h-3 mr-1"}),"Chat"]}),(0,Rs.jsxs)("button",{onClick:()=>o(e),className:"inline-flex items-center px-3 py-1.5 border border-red-300 shadow-sm text-xs font-medium rounded text-red-700 bg-red-50 hover:bg-red-100",children:[(0,Rs.jsx)(Zs,{className:"w-3 h-3 mr-1"}),"Delete"]}),(0,Rs.jsx)("button",{onClick:()=>o(e),className:"p-2 text-red-400 hover:text-red-600",title:"Delete",children:(0,Rs.jsx)(Zs,{className:"w-5 h-5"})})]})]})},e.id))})})]})},tn=qs("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),rn=qs("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]),an=qs("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]),sn=qs("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),nn=e=>Ms.get("/knowledge",{params:e}),ln=e=>Ms.get("/knowledge/".concat(e)),on=(e,t,r)=>Ms.post("/knowledge/".concat(e,"/documents"),t,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:r}),cn=e=>Ms.post("/knowledge/search",e),dn=e=>Ms.get("/knowledge/".concat(e,"/stats")),un=async(e,t,r)=>{try{const a={headers:{"Content-Type":"multipart/form-data"}};r&&(a.onUploadProgress=r);const s=await Ms.post("/knowledge/".concat(e,"/images/upload"),t,a);return s.data.data||s.data}catch(a){throw console.error("Upload image error:",a),a}},mn=()=>Ms.get("/conversation-strategy/presets"),pn=[{value:"gpt-4o-mini",label:"GPT-4o Mini (Fast & Cheap)",cost:"$0.15 / $0.60 per 1M tokens"},{value:"gpt-4o",label:"GPT-4o (Most Capable)",cost:"$2.50 / $10.00 per 1M tokens"},{value:"gpt-4-turbo",label:"GPT-4 Turbo",cost:"$10.00 / $30.00 per 1M tokens"},{value:"gpt-4",label:"GPT-4",cost:"$30.00 / $60.00 per 1M tokens"},{value:"gpt-3.5-turbo",label:"GPT-3.5 Turbo (Legacy)",cost:"$0.50 / $1.50 per 1M tokens"},{value:"o1-mini",label:"o1 Mini (Reasoning)",cost:"$3.00 / $12.00 per 1M tokens"},{value:"o1",label:"o1 (Advanced Reasoning)",cost:"$15.00 / $60.00 per 1M tokens"}],hn=()=>{var e,t,r,a,s,l,i,o,c,d,u,m,p,h,x,f,g,y,v,b,j,w,N,k,_,S,C,E,P,T,A,O,M;const{id:R}=ae(),F=te(),[L,D]=(0,n.useState)(!1),[I,z]=(0,n.useState)(!1),[U,B]=(0,n.useState)(!1),[q,H]=(0,n.useState)([]),[V,W]=(0,n.useState)([]),[$,K]=(0,n.useState)(!1),[Q,J]=(0,n.useState)(!1),[G,Y]=(0,n.useState)({name:"",type:"sales",instructions:"",voice:"shimmer",language:"ur",model:"gpt-4o-mini-realtime-preview-2024-12-17",model:"gpt-4o-mini",provider:"openai",deepgram_model:"nova-2",deepgram_voice:"aura-asteria-en",deepgram_language:"en",temperature:.6,max_tokens:4096,vad_threshold:.5,silence_duration_ms:500,greeting:"",kb_id:null}),[X,Z]=(0,n.useState)([]),[ee,re]=(0,n.useState)(!1),[se,ne]=(0,n.useState)(null),[le,ie]=(0,n.useState)(!1),[oe,ce]=(0,n.useState)(!1),[de,ue]=(0,n.useState)(""),[me,pe]=(0,n.useState)(!1),[he,xe]=(0,n.useState)(0),[fe,ge]=(0,n.useState)({name:"",description:"",execution_mode:"sync",handler_type:"inline",api_endpoint:"",api_method:"POST",api_headers:[],api_body_type:"json",api_body:null,timeout_ms:3e4,retries:2,parameters:{type:"object",properties:{},required:[]}}),[ye,ve]=(0,n.useState)({key:"",value:""}),[be,je]=(0,n.useState)(!1),[we,Ne]=(0,n.useState)([]),[ke,_e]=(0,n.useState)(""),[Se,Ce]=(0,n.useState)(!1),[Ee,Pe]=(0,n.useState)({key:"",value:"",type:"text"}),[Te,Ae]=(0,n.useState)(""),[Oe,Me]=(0,n.useState)(!1),[Re,Fe]=(0,n.useState)({name:"",type:"string",description:"",required:!1,enum:"",properties:"",items:""}),[Le,De]=(0,n.useState)(!1);(0,n.useEffect)(()=>{Ie()},[]);const Ie=async()=>{try{K(!0);const e=await mn();e.success&&W(e.data)}catch(e){console.error("Error loading strategy presets:",e)}finally{K(!1)}},ze=(e,t)=>{var r;Y(He(He({},G),{},{conversation_strategy:He(He({},G.conversation_strategy),{},{preference_collection:He(He({},(null===(r=G.conversation_strategy)||void 0===r?void 0:r.preference_collection)||{}),{},{[e]:t})})}))},Be=(e,t,r)=>{var a,s,n;const l=[...(null===(a=G.conversation_strategy)||void 0===a||null===(s=a.preference_collection)||void 0===s?void 0:s.preferences_to_collect)||[]];l[e]=He(He({},l[e]),{},{[t]:r}),Y(He(He({},G),{},{conversation_strategy:He(He({},G.conversation_strategy),{},{preference_collection:He(He({},null===(n=G.conversation_strategy)||void 0===n?void 0:n.preference_collection),{},{preferences_to_collect:l})})}))};(0,n.useEffect)(()=>{(async()=>{try{var e,t;const r=await nn();H((null===(e=r.data)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.knowledge_bases)||[])}catch(r){console.error("Failed to load knowledge bases:",r),H([])}})()},[]),(0,n.useEffect)(()=>{R&&qe()},[R]);const qe=async()=>{try{D(!0);const t=(await Ts(R)).data.agent;"openai"===t.provider?Y(He(He({},t),{},{voice:t.voice||"shimmer",model:t.model||"gpt-4o-mini-realtime-preview-2024-12-17",chat_model:t.chat_model||"gpt-4o-mini",language:t.language||"en",kb_id:t.kb_id||null})):"deepgram"===t.provider?Y(He(He({},t),{},{deepgram_model:t.deepgram_model||"nova-2",deepgram_voice:t.deepgram_voice||"shimmer",deepgram_language:t.deepgram_language||"en",chat_model:t.chat_model||"gpt-4o-mini",kb_id:t.kb_id||null})):Y(He(He({},t),{},{provider:"openai",voice:t.voice||"shimmer",chat_model:t.chat_model||"gpt-4o-mini",model:t.model||"gpt-4o-mini-realtime-preview-2024-12-17",language:t.language||"en",kb_id:t.kb_id||null}));const r=await(e=R,Es.get("/functions/agent/".concat(e)));Z(r.data.functions||[])}catch(t){sr.error("Failed to load agent"),console.error(t)}finally{D(!1)}var e},We=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(e){ne(e);let t=e.api_body_type||"json",r=[],a="";e.api_body&&("json"===t?a="string"===typeof e.api_body?e.api_body:JSON.stringify(e.api_body,null,2):"form-data"!==t&&"urlencoded"!==t||(r=Object.entries(e.api_body).map(e=>{let[t,r]=e;return{key:t,value:r,type:"text"}}))),ge({name:e.name,description:e.description,execution_mode:e.execution_mode,handler_type:e.handler_type,api_endpoint:e.api_endpoint||"",api_method:e.api_method||"POST",api_headers:Array.isArray(e.api_headers)?e.api_headers:e.api_headers?Object.entries(e.api_headers).map(e=>{let[t,r]=e;return{key:t,value:r}}):[],api_body_type:t,api_body:e.api_body,timeout_ms:e.timeout_ms,retries:e.retries,parameters:e.parameters}),Ne(r),_e(a),Ae(JSON.stringify(e.parameters,null,2))}else ne(null),ge({name:"",description:"",execution_mode:"sync",handler_type:"inline",api_endpoint:"",api_method:"POST",api_headers:[],api_body_type:"json",api_body:null,timeout_ms:3e4,retries:2,parameters:{type:"object",properties:{},required:[]}}),Ne([]),_e(""),Ae(JSON.stringify({type:"object",properties:{},required:[]},null,2));re(!0)},$e=async e=>{if(window.confirm("Delete this function?"))try{await(e=>Es.delete("/functions/".concat(e)))(e),sr.success("Function deleted"),qe()}catch(t){sr.error("Failed to delete function")}},Ke=e=>{const t=fe.api_headers.filter(e=>"content-type"!==e.key.toLowerCase());let r={key:"Content-Type",value:""};"json"===e?r.value="application/json":"urlencoded"===e?r.value="application/x-www-form-urlencoded":"form-data"===e&&(r.value="multipart/form-data"),r.value?ge(He(He({},fe),{},{api_body_type:e,api_headers:[...t,r]})):ge(He(He({},fe),{},{api_body_type:e}))},Qe=e=>{const t={checkBalance:{name:"check_balance",description:"Check customer account balance",execution_mode:"sync",handler_type:"api",api_endpoint:"https://api.example.com/balance/{{customer_id}}",api_method:"GET",api_headers:[{key:"Authorization",value:"Bearer YOUR_API_KEY"}],api_body_type:"none",api_body:null,timeout_ms:3e4,retries:2,parameters:{type:"object",properties:{customer_id:{type:"string",description:"Customer unique identifier"}},required:["customer_id"]}},bookAppointment:{name:"book_appointment",description:"Book an appointment for the customer",execution_mode:"async",handler_type:"api",api_endpoint:"https://api.example.com/appointments",api_method:"POST",api_headers:[{key:"Authorization",value:"Bearer YOUR_API_KEY"},{key:"Content-Type",value:"application/json"}],api_body_type:"json",api_body:{customer_id:"{{customer_id}}",date:"{{date}}",time:"{{time}}",service_type:"{{service_type}}"},timeout_ms:3e4,retries:2,parameters:{type:"object",properties:{customer_id:{type:"string",description:"Customer unique identifier"},date:{type:"string",description:"Appointment date in YYYY-MM-DD format"},time:{type:"string",description:"Appointment time in HH:MM format"},service_type:{type:"string",description:"Type of service",enum:["consultation","followup","emergency"]}},required:["customer_id","date","time"]}},sendSMS:{name:"send_sms",description:"Send SMS to customer",execution_mode:"async",handler_type:"api",api_endpoint:"https://api.example.com/sms/send",api_method:"POST",api_headers:[{key:"Authorization",value:"Bearer YOUR_API_KEY"},{key:"Content-Type",value:"application/x-www-form-urlencoded"}],api_body_type:"urlencoded",api_body:{to:"{{phone_number}}",message:"{{message}}",from:"YourCompany"},timeout_ms:15e3,retries:3,parameters:{type:"object",properties:{phone_number:{type:"string",description:"Customer phone number"},message:{type:"string",description:"SMS message content"}},required:["phone_number","message"]}},transferCall:{name:"transfer_call",description:"Transfer call to another department",execution_mode:"sync",handler_type:"inline",api_endpoint:"",api_method:"POST",api_headers:[],api_body_type:"none",api_body:null,timeout_ms:5e3,retries:1,parameters:{type:"object",properties:{department:{type:"string",description:"Department to transfer to",enum:["sales","support","billing","technical"]},reason:{type:"string",description:"Reason for transfer"}},required:["department"]}}}[e];t&&(ge(t),Ae(JSON.stringify(t.parameters,null,2)),"json"===t.api_body_type?(_e(JSON.stringify(t.api_body,null,2)),Ne([])):"form-data"===t.api_body_type||"urlencoded"===t.api_body_type?(Ne(Object.entries(t.api_body).map(e=>{let[t,r]=e;return{key:t,value:r,type:"text"}})),_e("")):(_e(""),Ne([])))};return L?(0,Rs.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,Rs.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):(0,Rs.jsxs)("div",{className:"space-y-6",children:[(0,Rs.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Rs.jsxs)("div",{children:[(0,Rs.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:R?"Edit Agent":"Create Agent"}),(0,Rs.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Configure your AI voice agent"})]}),(0,Rs.jsxs)("div",{className:"flex space-x-3",children:[(0,Rs.jsxs)("button",{onClick:()=>F("/agents"),className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50",children:[(0,Rs.jsx)(tn,{className:"w-5 h-5 mr-2"}),"Cancel"]}),(0,Rs.jsxs)("button",{onClick:async()=>{if(!G.name||!G.instructions)return void sr.error("Name and instructions are required");const e=He(He({},G),{},{conversation_strategy:G.conversation_strategy||{preference_collection:{strategy:"immediate_search",preferences_to_collect:[],min_preferences_before_search:0,max_questions:0},knowledge_search:{strategy:"auto",search_threshold:"medium",search_types:["text","image","product"]}}});z(!0);try{if(R)await As(R,e),sr.success("Agent updated");else{const t=await(e=>Es.post("/agents",e))(e);sr.success("Agent created"),F("/agents/".concat(t.data.agent.id))}}catch(a){var t,r;sr.error((null===(t=a.response)||void 0===t||null===(r=t.data)||void 0===r?void 0:r.error)||"Failed to save agent")}finally{z(!1)}},disabled:I,className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700 disabled:opacity-50",children:[(0,Rs.jsx)(rn,{className:"w-5 h-5 mr-2"}),I?"Saving...":"Save"]})]})]}),(0,Rs.jsxs)("div",{className:"bg-white shadow rounded-lg",children:[(0,Rs.jsx)("div",{className:"px-6 py-5 border-b border-gray-200",children:(0,Rs.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Basic Information"})}),(0,Rs.jsxs)("div",{className:"px-6 py-5 space-y-6",children:[(0,Rs.jsxs)("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2",children:[(0,Rs.jsxs)("div",{children:[(0,Rs.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Agent Name"}),(0,Rs.jsx)("input",{type:"text",value:G.name,onChange:e=>Y(He(He({},G),{},{name:e.target.value})),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-primary-500 focus:border-primary-500",placeholder:"Sales Assistant"})]}),(0,Rs.jsxs)("div",{children:[(0,Rs.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Type"}),(0,Rs.jsxs)("select",{value:G.type,onChange:e=>Y(He(He({},G),{},{type:e.target.value})),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-primary-500 focus:border-primary-500",children:[(0,Rs.jsx)("option",{value:"sales",children:"Sales"}),(0,Rs.jsx)("option",{value:"support",children:"Support"}),(0,Rs.jsx)("option",{value:"banking",children:"Banking"}),(0,Rs.jsx)("option",{value:"custom",children:"Custom"})]})]}),(0,Rs.jsxs)("div",{children:[(0,Rs.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Provider"}),(0,Rs.jsxs)("select",{value:G.provider||"openai",onChange:e=>{var t;"openai"===(t=e.target.value)?(Y(He(He({},G),{},{provider:"openai",voice:"shimmer",model:"gpt-4o-mini-realtime-preview-2024-12-17",language:"en",deepgram_model:null,deepgram_voice:null,deepgram_language:null})),sr.success("Switched to OpenAI - defaults applied")):"deepgram"===t&&(Y(He(He({},G),{},{provider:"deepgram",deepgram_model:"nova-2",deepgram_voice:"shimmer",deepgram_language:"en",voice:null,model:null})),sr.success("Switched to Deepgram - defaults applied"))},className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-primary-500 focus:border-primary-500",children:[(0,Rs.jsx)("option",{value:"openai",children:"OpenAI Realtime API"}),(0,Rs.jsx)("option",{value:"deepgram",children:"Deepgram"})]}),(0,Rs.jsx)("p",{className:"mt-1 text-xs text-gray-500",children:"deepgram"===G.provider?"Deepgram provides more natural sounding voices":"OpenAI provides superior conversation handling and function calling"})]}),"openai"===G.provider?(0,Rs.jsxs)("div",{children:[(0,Rs.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Voice"}),(0,Rs.jsxs)("select",{value:G.voice,onChange:e=>Y(He(He({},G),{},{voice:e.target.value})),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-primary-500 focus:border-primary-500",children:[(0,Rs.jsx)("option",{value:"alloy",children:"Alloy"}),(0,Rs.jsx)("option",{value:"ash",children:"Ash"}),(0,Rs.jsx)("option",{value:"ballad",children:"Ballad"}),(0,Rs.jsx)("option",{value:"coral",children:"Coral"}),(0,Rs.jsx)("option",{value:"echo",children:"Echo"}),(0,Rs.jsx)("option",{value:"sage",children:"Sage"}),(0,Rs.jsx)("option",{value:"shimmer",children:"Shimmer"}),(0,Rs.jsx)("option",{value:"verse",children:"Verse"}),(0,Rs.jsx)("option",{value:"marin",children:"Marin"}),(0,Rs.jsx)("option",{value:"cedar",children:"Cedar"})]})]}):(0,Rs.jsxs)(Rs.Fragment,{children:[(0,Rs.jsxs)("div",{children:[(0,Rs.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Speech-to-Text (STT) Model"}),(0,Rs.jsxs)("select",{value:G.deepgram_model||"nova-2",onChange:e=>Y(He(He({},G),{},{deepgram_model:e.target.value})),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-primary-500 focus:border-primary-500",children:[(0,Rs.jsxs)("optgroup",{label:"Nova-3 (Recommended - Best Accuracy)",children:[(0,Rs.jsx)("option",{value:"nova-3",children:"Nova-3 General"}),(0,Rs.jsx)("option",{value:"nova-3-general",children:"Nova-3 General (Explicit)"}),(0,Rs.jsx)("option",{value:"nova-3-phonecall",children:"Nova-3 Phone Call"}),(0,Rs.jsx)("option",{value:"nova-3-medical",children:"Nova-3 Medical"}),(0,Rs.jsx)("option",{value:"nova-3-finance",children:"Nova-3 Finance"}),(0,Rs.jsx)("option",{value:"nova-3-conversationalai",children:"Nova-3 Conversational AI"}),(0,Rs.jsx)("option",{value:"nova-3-voicemail",children:"Nova-3 Voicemail"}),(0,Rs.jsx)("option",{value:"nova-3-video",children:"Nova-3 Video"}),(0,Rs.jsx)("option",{value:"nova-3-meeting",children:"Nova-3 Meeting"}),(0,Rs.jsx)("option",{value:"nova-3-drive_thru",children:"Nova-3 Drive-Thru"}),(0,Rs.jsx)("option",{value:"nova-3-automotive",children:"Nova-3 Automotive"})]}),(0,Rs.jsxs)("optgroup",{label:"Nova-2 (Good for Non-English)",children:[(0,Rs.jsx)("option",{value:"nova-2",children:"Nova-2 General"}),(0,Rs.jsx)("option",{value:"nova-2-general",children:"Nova-2 General (Explicit)"}),(0,Rs.jsx)("option",{value:"nova-2-phonecall",children:"Nova-2 Phone Call"}),(0,Rs.jsx)("option",{value:"nova-2-meeting",children:"Nova-2 Meeting"}),(0,Rs.jsx)("option",{value:"nova-2-voicemail",children:"Nova-2 Voicemail"}),(0,Rs.jsx)("option",{value:"nova-2-finance",children:"Nova-2 Finance"}),(0,Rs.jsx)("option",{value:"nova-2-conversationalai",children:"Nova-2 Conversational AI"}),(0,Rs.jsx)("option",{value:"nova-2-video",children:"Nova-2 Video"}),(0,Rs.jsx)("option",{value:"nova-2-medical",children:"Nova-2 Medical"}),(0,Rs.jsx)("option",{value:"nova-2-drivethru",children:"Nova-2 Drive-Thru"}),(0,Rs.jsx)("option",{value:"nova-2-automotive",children:"Nova-2 Automotive"})]}),(0,Rs.jsx)("optgroup",{label:"Flux (Voice Agents - NEW)",children:(0,Rs.jsx)("option",{value:"flux",children:"Flux (Conversational Flow)"})}),(0,Rs.jsxs)("optgroup",{label:"Legacy Models",children:[(0,Rs.jsx)("option",{value:"nova",children:"Nova-1"}),(0,Rs.jsx)("option",{value:"enhanced",children:"Enhanced General"}),(0,Rs.jsx)("option",{value:"enhanced-general",children:"Enhanced General (Explicit)"}),(0,Rs.jsx)("option",{value:"enhanced-phonecall",children:"Enhanced Phone Call"}),(0,Rs.jsx)("option",{value:"enhanced-meeting",children:"Enhanced Meeting"}),(0,Rs.jsx)("option",{value:"base",children:"Base General"}),(0,Rs.jsx)("option",{value:"base-general",children:"Base General (Explicit)"}),(0,Rs.jsx)("option",{value:"base-phonecall",children:"Base Phone Call"}),(0,Rs.jsx)("option",{value:"base-meeting",children:"Base Meeting"})]}),(0,Rs.jsxs)("optgroup",{label:"Whisper (Slower, Limited)",children:[(0,Rs.jsx)("option",{value:"whisper-tiny",children:"Whisper Tiny"}),(0,Rs.jsx)("option",{value:"whisper-base",children:"Whisper Base"}),(0,Rs.jsx)("option",{value:"whisper-small",children:"Whisper Small"}),(0,Rs.jsx)("option",{value:"whisper-medium",children:"Whisper Medium"}),(0,Rs.jsx)("option",{value:"whisper-large",children:"Whisper Large"})]})]}),(0,Rs.jsx)("p",{className:"mt-1 text-xs text-gray-500",children:"Nova-3 offers best accuracy. Flux is optimized for voice agents with built-in turn detection."})]}),(0,Rs.jsxs)("div",{children:[(0,Rs.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"STT Language"}),(0,Rs.jsxs)("select",{value:G.deepgram_language||"en",onChange:e=>Y(He(He({},G),{},{deepgram_language:e.target.value})),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-primary-500 focus:border-primary-500",children:[(0,Rs.jsx)("optgroup",{label:"Multilingual (Nova-2 & Nova-3)",children:(0,Rs.jsx)("option",{value:"multi",children:"\ud83c\udf0d Multi (10 Languages - Code Switching)"})}),(0,Rs.jsxs)("optgroup",{label:"Common Languages",children:[(0,Rs.jsx)("option",{value:"en",children:"\ud83c\uddfa\ud83c\uddf8 English"}),(0,Rs.jsx)("option",{value:"en-US",children:"\ud83c\uddfa\ud83c\uddf8 English (US)"}),(0,Rs.jsx)("option",{value:"en-GB",children:"\ud83c\uddec\ud83c\udde7 English (UK)"}),(0,Rs.jsx)("option",{value:"en-AU",children:"\ud83c\udde6\ud83c\uddfa English (Australia)"}),(0,Rs.jsx)("option",{value:"en-NZ",children:"\ud83c\uddf3\ud83c\uddff English (New Zealand)"}),(0,Rs.jsx)("option",{value:"en-IN",children:"\ud83c\uddee\ud83c\uddf3 English (India)"}),(0,Rs.jsx)("option",{value:"es",children:"\ud83c\uddea\ud83c\uddf8 Spanish"}),(0,Rs.jsx)("option",{value:"es-419",children:"\ud83c\uddf2\ud83c\uddfd Spanish (Latin America)"}),(0,Rs.jsx)("option",{value:"fr",children:"\ud83c\uddeb\ud83c\uddf7 French"}),(0,Rs.jsx)("option",{value:"fr-CA",children:"\ud83c\udde8\ud83c\udde6 French (Canada)"}),(0,Rs.jsx)("option",{value:"de",children:"\ud83c\udde9\ud83c\uddea German"}),(0,Rs.jsx)("option",{value:"hi",children:"\ud83c\uddee\ud83c\uddf3 Hindi"}),(0,Rs.jsx)("option",{value:"pt",children:"\ud83c\uddf5\ud83c\uddf9 Portuguese"}),(0,Rs.jsx)("option",{value:"pt-BR",children:"\ud83c\udde7\ud83c\uddf7 Portuguese (Brazil)"}),(0,Rs.jsx)("option",{value:"ru",children:"\ud83c\uddf7\ud83c\uddfa Russian"}),(0,Rs.jsx)("option",{value:"ja",children:"\ud83c\uddef\ud83c\uddf5 Japanese"}),(0,Rs.jsx)("option",{value:"it",children:"\ud83c\uddee\ud83c\uddf9 Italian"}),(0,Rs.jsx)("option",{value:"nl",children:"\ud83c\uddf3\ud83c\uddf1 Dutch"}),(0,Rs.jsx)("option",{value:"zh",children:"\ud83c\udde8\ud83c\uddf3 Chinese (Simplified)"}),(0,Rs.jsx)("option",{value:"zh-CN",children:"\ud83c\udde8\ud83c\uddf3 Chinese (Mandarin)"}),(0,Rs.jsx)("option",{value:"zh-TW",children:"\ud83c\uddf9\ud83c\uddfc Chinese (Taiwan)"}),(0,Rs.jsx)("option",{value:"ko",children:"\ud83c\uddf0\ud83c\uddf7 Korean"}),(0,Rs.jsx)("option",{value:"tr",children:"\ud83c\uddf9\ud83c\uddf7 Turkish"}),(0,Rs.jsx)("option",{value:"ar",children:"\ud83c\uddf8\ud83c\udde6 Arabic"})]}),(0,Rs.jsxs)("optgroup",{label:"European Languages",children:[(0,Rs.jsx)("option",{value:"pl",children:"\ud83c\uddf5\ud83c\uddf1 Polish"}),(0,Rs.jsx)("option",{value:"uk",children:"\ud83c\uddfa\ud83c\udde6 Ukrainian"}),(0,Rs.jsx)("option",{value:"sv",children:"\ud83c\uddf8\ud83c\uddea Swedish"}),(0,Rs.jsx)("option",{value:"da",children:"\ud83c\udde9\ud83c\uddf0 Danish"}),(0,Rs.jsx)("option",{value:"no",children:"\ud83c\uddf3\ud83c\uddf4 Norwegian"}),(0,Rs.jsx)("option",{value:"fi",children:"\ud83c\uddeb\ud83c\uddee Finnish"}),(0,Rs.jsx)("option",{value:"el",children:"\ud83c\uddec\ud83c\uddf7 Greek"}),(0,Rs.jsx)("option",{value:"cs",children:"\ud83c\udde8\ud83c\uddff Czech"}),(0,Rs.jsx)("option",{value:"ro",children:"\ud83c\uddf7\ud83c\uddf4 Romanian"}),(0,Rs.jsx)("option",{value:"hu",children:"\ud83c\udded\ud83c\uddfa Hungarian"}),(0,Rs.jsx)("option",{value:"bg",children:"\ud83c\udde7\ud83c\uddec Bulgarian"})]}),(0,Rs.jsxs)("optgroup",{label:"Asian Languages",children:[(0,Rs.jsx)("option",{value:"th",children:"\ud83c\uddf9\ud83c\udded Thai"}),(0,Rs.jsx)("option",{value:"vi",children:"\ud83c\uddfb\ud83c\uddf3 Vietnamese"}),(0,Rs.jsx)("option",{value:"id",children:"\ud83c\uddee\ud83c\udde9 Indonesian"}),(0,Rs.jsx)("option",{value:"ms",children:"\ud83c\uddf2\ud83c\uddfe Malay"}),(0,Rs.jsx)("option",{value:"ta",children:"\ud83c\uddee\ud83c\uddf3 Tamil"})]}),(0,Rs.jsxs)("optgroup",{label:"Other Languages",children:[(0,Rs.jsx)("option",{value:"he",children:"\ud83c\uddee\ud83c\uddf1 Hebrew"}),(0,Rs.jsx)("option",{value:"ur",children:"\ud83c\uddf5\ud83c\uddf0 Urdu"})]})]}),(0,Rs.jsx)("p",{className:"mt-1 text-xs text-gray-500",children:"multi"===G.deepgram_language?"\ud83c\udf0d Multi supports: English, Spanish, French, German, Hindi, Russian, Portuguese, Japanese, Italian, Dutch":'Select language for speech recognition. Use "Multi" for code-switching conversations.'})]}),(0,Rs.jsxs)("div",{children:[(0,Rs.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Text-to-Speech (TTS) Voice"}),(0,Rs.jsxs)("select",{value:G.deepgram_voice||"shimmer",onChange:e=>Y(He(He({},G),{},{deepgram_voice:e.target.value})),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-primary-500 focus:border-primary-500",children:[(0,Rs.jsxs)("optgroup",{label:"OpenAI Voices (Used with Deepgram STT)",children:[(0,Rs.jsx)("option",{value:"alloy",children:"Alloy (Neutral)"}),(0,Rs.jsx)("option",{value:"ash",children:"Ash (Warm Male)"}),(0,Rs.jsx)("option",{value:"ballad",children:"Ballad (Expressive)"}),(0,Rs.jsx)("option",{value:"coral",children:"Coral (Friendly Female)"}),(0,Rs.jsx)("option",{value:"echo",children:"Echo (Professional Male)"}),(0,Rs.jsx)("option",{value:"sage",children:"Sage (Calm Female)"}),(0,Rs.jsx)("option",{value:"shimmer",children:"Shimmer (Clear Female)"}),(0,Rs.jsx)("option",{value:"verse",children:"Verse (Conversational)"})]}),(0,Rs.jsxs)("optgroup",{label:"Deepgram Aura Voices (Alternative)",children:[(0,Rs.jsx)("option",{value:"aura-asteria-en",children:"Asteria (English - Female)"}),(0,Rs.jsx)("option",{value:"aura-luna-en",children:"Luna (English - Female)"}),(0,Rs.jsx)("option",{value:"aura-stella-en",children:"Stella (English - Female)"}),(0,Rs.jsx)("option",{value:"aura-athena-en",children:"Athena (English - Female)"}),(0,Rs.jsx)("option",{value:"aura-hera-en",children:"Hera (English - Female)"}),(0,Rs.jsx)("option",{value:"aura-orion-en",children:"Orion (English - Male)"}),(0,Rs.jsx)("option",{value:"aura-arcas-en",children:"Arcas (English - Male)"}),(0,Rs.jsx)("option",{value:"aura-perseus-en",children:"Perseus (English - Male)"}),(0,Rs.jsx)("option",{value:"aura-angus-en",children:"Angus (English - Irish Male)"}),(0,Rs.jsx)("option",{value:"aura-orpheus-en",children:"Orpheus (English - Male)"}),(0,Rs.jsx)("option",{value:"aura-helios-en",children:"Helios (English - Male)"}),(0,Rs.jsx)("option",{value:"aura-zeus-en",children:"Zeus (English - Male)"})]})]}),(0,Rs.jsx)("p",{className:"mt-1 text-xs text-gray-500",children:"Currently using OpenAI TTS with Deepgram STT for best quality. Deepgram Aura voices coming soon."})]})]}),(0,Rs.jsxs)("div",{children:[(0,Rs.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Language"}),(0,Rs.jsxs)("select",{value:G.language,onChange:e=>Y(He(He({},G),{},{language:e.target.value})),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-primary-500 focus:border-primary-500",children:[(0,Rs.jsx)("option",{value:"ur",children:"Urdu/English"}),(0,Rs.jsx)("option",{value:"en",children:"English"}),(0,Rs.jsx)("option",{value:"es",children:"Spanish"}),(0,Rs.jsx)("option",{value:"fr",children:"French"})]})]})]}),(0,Rs.jsxs)("div",{className:"mt-6 pt-6 border-t border-gray-200",children:[(0,Rs.jsx)("h4",{className:"text-sm font-medium text-gray-900 mb-4",children:"Chat Model Configuration"}),(0,Rs.jsx)("p",{className:"text-sm text-gray-600 mb-4",children:"This model is used for text-based chat conversations in the dashboard. Voice calls use the realtime model configured above."}),(0,Rs.jsxs)("div",{children:[(0,Rs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Chat Model"}),(0,Rs.jsx)("select",{value:G.chat_model||"gpt-4o-mini",onChange:e=>Y(He(He({},G),{},{chat_model:e.target.value})),className:"block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-primary-500 focus:border-primary-500",children:pn.map(e=>(0,Rs.jsxs)("option",{value:e.value,children:[e.label," - ",e.cost]},e.value))}),(0,Rs.jsxs)("p",{className:"mt-2 text-sm text-gray-500",children:["\ud83d\udca1 ",(0,Rs.jsx)("strong",{children:"Recommendation:"})," Use GPT-4o Mini for most cases - it's 99% cheaper than realtime models and perfect for text chat. Upgrade to GPT-4o for complex reasoning tasks."]})]})]}),(0,Rs.jsxs)("div",{children:[(0,Rs.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,Rs.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Instructions"}),(0,Rs.jsx)("button",{type:"button",onClick:async()=>{if(G.name){pe(!0),ce(!0);try{const e=await(e=>Es.post("/ai-assist/generate-instructions",e))({agent_name:G.name,agent_type:G.type,language:G.language,existing_instructions:G.instructions});ue(e.data.instructions),xe(e.data.cost),sr.success("Instructions generated! Cost: $".concat(e.data.cost.toFixed(6)))}catch(e){sr.error("Failed to generate instructions"),ce(!1)}finally{pe(!1)}}else sr.error("Please enter an agent name first")},disabled:!G.name||me,className:"inline-flex items-center px-3 py-1 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:me?(0,Rs.jsxs)(Rs.Fragment,{children:[(0,Rs.jsxs)("svg",{className:"animate-spin h-4 w-4 mr-2",fill:"none",viewBox:"0 0 24 24",children:[(0,Rs.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,Rs.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Generating..."]}):(0,Rs.jsxs)(Rs.Fragment,{children:[(0,Rs.jsx)("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Rs.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})}),"AI Generate"]})})]}),(0,Rs.jsx)("textarea",{value:G.instructions,onChange:e=>Y(He(He({},G),{},{instructions:e.target.value})),rows:10,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-primary-500 focus:border-primary-500 font-mono text-sm",placeholder:"You are a helpful sales assistant..."}),(0,Rs.jsx)("p",{className:"mt-1 text-xs text-gray-500",children:'System instructions that define the agent\'s behavior. Click "AI Generate" for assistance.'})]}),(0,Rs.jsxs)("div",{children:[(0,Rs.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Greeting"}),(0,Rs.jsx)("textarea",{value:G.greeting,onChange:e=>Y(He(He({},G),{},{greeting:e.target.value})),rows:2,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-primary-500 focus:border-primary-500",placeholder:"Hello! How can I help you today?"}),(0,Rs.jsxs)("p",{className:"mt-2 text-sm text-gray-500",children:[(0,Rs.jsx)("strong",{children:"Inbound Call:"})," On an inbound call setting a greeting will automatically start playback when the call connects with AiVA",(0,Rs.jsx)("br",{}),(0,Rs.jsx)("strong",{children:"Outbound Call:"})," Not recommended to set up greeting on an Outbound Call because the AiVA should respond once the Caller answers the call and Starts Speaking"]})]})]})]}),(0,Rs.jsxs)("div",{className:"bg-white shadow rounded-lg p-6",children:[(0,Rs.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Knowledge Base"}),(0,Rs.jsx)("div",{className:"space-y-4",children:(0,Rs.jsxs)("div",{children:[(0,Rs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Knowledge Base"}),(0,Rs.jsxs)("select",{value:G.kb_id||"",onChange:e=>Y(He(He({},G),{},{kb_id:e.target.value||null})),className:"w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500",children:[(0,Rs.jsx)("option",{value:"",children:"-- No Knowledge Base --"}),q.map(e=>{var t;return(0,Rs.jsxs)("option",{value:e.id,children:[e.name," (",(null===(t=e.stats)||void 0===t?void 0:t.document_count)||0," docs)"]},e.id)})]})]})})]}),(0,Rs.jsxs)("div",{className:"bg-white shadow rounded-lg p-6",children:[(0,Rs.jsx)("div",{className:"flex items-center justify-between mb-4",children:(0,Rs.jsxs)("div",{children:[(0,Rs.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Conversation Strategy"}),(0,Rs.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Configure how your agent collects preferences before searching"})]})}),(0,Rs.jsxs)("div",{className:"mb-6",children:[(0,Rs.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,Rs.jsx)(an,{size:18,className:"text-blue-500"}),(0,Rs.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Quick Presets"})]}),(0,Rs.jsx)("p",{className:"text-xs text-gray-500 mb-3",children:"Apply a preset configuration based on your business type"}),(0,Rs.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-3",children:$?(0,Rs.jsx)("div",{className:"col-span-4 text-center py-4",children:(0,Rs.jsx)("div",{className:"inline-block animate-spin rounded-full h-6 w-6 border-b-2 border-gray-900"})}):V.map(e=>{const t={shirt:Shirt,laptop:Laptop,couch:Sofa,utensils:Utensils}[e.icon]||an;return(0,Rs.jsxs)("button",{type:"button",onClick:()=>(async e=>{try{const t=V.find(t=>t.id===e);t&&(Y(He(He({},G),{},{conversation_strategy:t.strategy})),sr.success("".concat(t.name," preset applied")))}catch(t){console.error("Error applying preset:",t),sr.error("Failed to apply preset")}})(e.id),className:"p-3 border-2 border-gray-200 rounded-lg hover:border-blue-500 hover:bg-blue-50 transition-colors text-left",children:[(0,Rs.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,Rs.jsx)(t,{size:20,className:"text-blue-600"}),(0,Rs.jsx)("span",{className:"font-semibold text-sm",children:e.name})]}),(0,Rs.jsx)("p",{className:"text-xs text-gray-600 mb-2",children:e.description}),(0,Rs.jsx)("span",{className:"inline-block text-xs px-2 py-1 bg-gray-100 rounded",children:0===e.strategy.preference_collection.max_questions?"No questions":"".concat(e.strategy.preference_collection.max_questions," questions")})]},e.id)})})]}),(0,Rs.jsxs)("div",{className:"space-y-3",children:[(0,Rs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Search Strategy"}),(0,Rs.jsxs)("label",{className:"flex items-start gap-3 p-3 border-2 rounded-lg cursor-pointer hover:bg-gray-50 transition-colors",children:[(0,Rs.jsx)("input",{type:"radio",name:"conversation_strategy",value:"immediate_search",checked:"immediate_search"===(null===(e=G.conversation_strategy)||void 0===e||null===(t=e.preference_collection)||void 0===t?void 0:t.strategy),onChange:e=>ze("strategy",e.target.value),className:"mt-1"}),(0,Rs.jsxs)("div",{className:"flex-1",children:[(0,Rs.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,Rs.jsx)("span",{className:"font-medium text-sm",children:"Immediate Search"}),(0,Rs.jsx)("span",{className:"text-xs px-2 py-0.5 bg-green-100 text-green-700 rounded",children:"Fast"})]}),(0,Rs.jsx)("p",{className:"text-xs text-gray-600",children:"Search as soon as user requests products. No questions asked."}),(0,Rs.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Best for: Furniture, Food, Low-ticket items"})]})]}),(0,Rs.jsxs)("label",{className:"flex items-start gap-3 p-3 border-2 rounded-lg cursor-pointer hover:bg-gray-50 transition-colors",children:[(0,Rs.jsx)("input",{type:"radio",name:"conversation_strategy",value:"ask_questions",checked:"ask_questions"===(null===(r=G.conversation_strategy)||void 0===r||null===(a=r.preference_collection)||void 0===a?void 0:a.strategy),onChange:e=>ze("strategy",e.target.value),className:"mt-1"}),(0,Rs.jsxs)("div",{className:"flex-1",children:[(0,Rs.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,Rs.jsx)("span",{className:"font-medium text-sm",children:"Ask Questions First"}),(0,Rs.jsx)("span",{className:"text-xs px-2 py-0.5 bg-blue-100 text-blue-700 rounded",children:"Personalized"})]}),(0,Rs.jsx)("p",{className:"text-xs text-gray-600",children:"Collect user preferences before searching for products."}),(0,Rs.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Best for: Clothing, Fashion, High-value items"})]})]}),(0,Rs.jsxs)("label",{className:"flex items-start gap-3 p-3 border-2 rounded-lg cursor-pointer hover:bg-gray-50 transition-colors",children:[(0,Rs.jsx)("input",{type:"radio",name:"conversation_strategy",value:"minimal_questions",checked:"minimal_questions"===(null===(s=G.conversation_strategy)||void 0===s||null===(l=s.preference_collection)||void 0===l?void 0:l.strategy),onChange:e=>ze("strategy",e.target.value),className:"mt-1"}),(0,Rs.jsxs)("div",{className:"flex-1",children:[(0,Rs.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,Rs.jsx)("span",{className:"font-medium text-sm",children:"Minimal Questions (1-2)"}),(0,Rs.jsx)("span",{className:"text-xs px-2 py-0.5 bg-yellow-100 text-yellow-700 rounded",children:"Balanced"})]}),(0,Rs.jsx)("p",{className:"text-xs text-gray-600",children:"Ask only 1-2 critical questions before searching."}),(0,Rs.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Best for: Electronics, Mid-range items"})]})]}),(0,Rs.jsxs)("label",{className:"flex items-start gap-3 p-3 border-2 rounded-lg cursor-pointer hover:bg-gray-50 transition-colors",children:[(0,Rs.jsx)("input",{type:"radio",name:"conversation_strategy",value:"adaptive",checked:"adaptive"===(null===(i=G.conversation_strategy)||void 0===i||null===(o=i.preference_collection)||void 0===o?void 0:o.strategy),onChange:e=>ze("strategy",e.target.value),className:"mt-1"}),(0,Rs.jsxs)("div",{className:"flex-1",children:[(0,Rs.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,Rs.jsx)("span",{className:"font-medium text-sm",children:"Adaptive (Smart)"}),(0,Rs.jsx)("span",{className:"text-xs px-2 py-0.5 bg-purple-100 text-purple-700 rounded",children:"Intelligent"})]}),(0,Rs.jsx)("p",{className:"text-xs text-gray-600",children:"AI decides based on product type, value, and context."}),(0,Rs.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Best for: Multi-category stores"})]})]})]}),(null===(c=G.conversation_strategy)||void 0===c||null===(d=c.preference_collection)||void 0===d?void 0:d.strategy)&&(0,Rs.jsx)("div",{className:"mt-4 bg-green-50 border border-green-200 rounded-lg p-3",children:(0,Rs.jsxs)("div",{className:"flex items-start gap-2",children:[(0,Rs.jsx)(sn,{size:18,className:"text-green-600 mt-0.5 flex-shrink-0"}),(0,Rs.jsxs)("div",{children:[(0,Rs.jsx)("h4",{className:"text-sm font-semibold text-green-900",children:"Current Strategy"}),(0,Rs.jsxs)("p",{className:"text-xs text-green-700 mt-1",children:["Using ",(0,Rs.jsx)("strong",{children:G.conversation_strategy.preference_collection.strategy.replace("_"," ")})," strategy.","immediate_search"===G.conversation_strategy.preference_collection.strategy&&" Products will be shown immediately.","ask_questions"===G.conversation_strategy.preference_collection.strategy&&" Agent will collect preferences before searching.","minimal_questions"===G.conversation_strategy.preference_collection.strategy&&" Agent will ask 1-2 quick questions.","adaptive"===G.conversation_strategy.preference_collection.strategy&&" AI will decide the best approach."]})]})]})})]}),("ask_questions"===(null===(u=G.conversation_strategy)||void 0===u||null===(m=u.preference_collection)||void 0===m?void 0:m.strategy)||"minimal_questions"===(null===(p=G.conversation_strategy)||void 0===p||null===(h=p.preference_collection)||void 0===h?void 0:h.strategy))&&(0,Rs.jsxs)("div",{className:"mt-6 p-4 border-2 border-blue-200 rounded-lg bg-blue-50",children:[(0,Rs.jsxs)("button",{type:"button",onClick:()=>J(!Q),className:"w-full flex items-center justify-between text-left mb-4",children:[(0,Rs.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Rs.jsx)("span",{className:"text-lg",children:"\u2699\ufe0f"}),(0,Rs.jsx)("span",{className:"font-semibold text-gray-900",children:"Advanced Configuration"}),!Q&&(0,Rs.jsxs)("span",{className:"text-xs text-gray-500",children:["(",((null===(x=G.conversation_strategy)||void 0===x||null===(f=x.preference_collection)||void 0===f?void 0:f.preferences_to_collect)||[]).length," preferences configured)"]})]}),(0,Rs.jsx)("span",{className:"text-gray-600",children:Q?"\u25bc":"\u25b6"})]}),Q&&(0,Rs.jsxs)("div",{className:"space-y-4",children:[(0,Rs.jsxs)("div",{children:[(0,Rs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Preferences to Collect"}),(0,Rs.jsx)("p",{className:"text-xs text-gray-600 mb-3",children:"Define what information to gather before searching"}),(0,Rs.jsx)("div",{className:"space-y-3",children:((null===(g=G.conversation_strategy)||void 0===g||null===(y=g.preference_collection)||void 0===y?void 0:y.preferences_to_collect)||[]).map((e,t)=>{var r;return(0,Rs.jsxs)("div",{className:"p-3 bg-white rounded-lg border border-gray-300 shadow-sm",children:[(0,Rs.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,Rs.jsxs)("div",{className:"flex items-center gap-2 flex-1",children:[(0,Rs.jsxs)("span",{className:"text-sm font-medium text-gray-500",children:["#",t+1]}),(0,Rs.jsx)("input",{type:"text",placeholder:"Preference name (e.g., color, size)",value:e.name||"",onChange:e=>Be(t,"name",e.target.value),className:"flex-1 text-sm border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500"})]}),(0,Rs.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Rs.jsxs)("label",{className:"flex items-center gap-1 text-xs",children:[(0,Rs.jsx)("input",{type:"checkbox",checked:e.required,onChange:e=>Be(t,"required",e.target.checked),className:"rounded border-gray-300 text-primary-600 focus:ring-primary-500"}),"Required"]}),(0,Rs.jsx)("button",{type:"button",onClick:()=>(e=>{var t,r,a;const s=((null===(t=G.conversation_strategy)||void 0===t||null===(r=t.preference_collection)||void 0===r?void 0:r.preferences_to_collect)||[]).filter((t,r)=>r!==e);Y(He(He({},G),{},{conversation_strategy:He(He({},G.conversation_strategy),{},{preference_collection:He(He({},null===(a=G.conversation_strategy)||void 0===a?void 0:a.preference_collection),{},{preferences_to_collect:s})})}))})(t),className:"text-red-600 hover:text-red-700 p-1",title:"Remove preference",children:(0,Rs.jsx)("span",{className:"text-lg",children:"\ud83d\uddd1\ufe0f"})})]})]}),(0,Rs.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[(0,Rs.jsxs)("div",{children:[(0,Rs.jsx)("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Display Label"}),(0,Rs.jsx)("input",{type:"text",placeholder:"e.g., Color Preference",value:e.label,onChange:e=>Be(t,"label",e.target.value),className:"w-full text-sm border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500"})]}),(0,Rs.jsxs)("div",{children:[(0,Rs.jsx)("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Field Type"}),(0,Rs.jsxs)("select",{value:e.type||"text",onChange:e=>Be(t,"type",e.target.value),className:"w-full text-sm border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500",children:[(0,Rs.jsx)("option",{value:"text",children:"Text (Open-ended)"}),(0,Rs.jsx)("option",{value:"choice",children:"Multiple Choice"}),(0,Rs.jsx)("option",{value:"range",children:"Range (e.g., budget)"})]})]})]}),(0,Rs.jsxs)("div",{className:"mt-3",children:[(0,Rs.jsx)("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Question to Ask"}),(0,Rs.jsx)("input",{type:"text",placeholder:"e.g., What color would you like?",value:e.question,onChange:e=>Be(t,"question",e.target.value),className:"w-full text-sm border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500"}),(0,Rs.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"AI will use this as guidance and may rephrase naturally"})]}),"choice"===e.type&&(0,Rs.jsxs)("div",{className:"mt-3",children:[(0,Rs.jsx)("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Options (comma-separated)"}),(0,Rs.jsx)("input",{type:"text",placeholder:"e.g., Red, Blue, Green, Pink, Black",value:(null===(r=e.options)||void 0===r?void 0:r.join(", "))||"",onChange:e=>Be(t,"options",e.target.value.split(",").map(e=>e.trim())),className:"w-full text-sm border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500"})]})]},t)})}),(0,Rs.jsx)("button",{type:"button",onClick:()=>{var e,t,r;const a=[...(null===(e=G.conversation_strategy)||void 0===e||null===(t=e.preference_collection)||void 0===t?void 0:t.preferences_to_collect)||[],{name:"",label:"",required:!1,question:"",type:"text"}];Y(He(He({},G),{},{conversation_strategy:He(He({},G.conversation_strategy),{},{preference_collection:He(He({},null===(r=G.conversation_strategy)||void 0===r?void 0:r.preference_collection),{},{preferences_to_collect:a})})}))},className:"mt-3 w-full py-2 px-4 border-2 border-dashed border-gray-300 rounded-lg text-sm font-medium text-gray-700 hover:border-blue-500 hover:text-blue-600 hover:bg-blue-50 transition-colors",children:"+ Add Preference"})]}),(0,Rs.jsx)("div",{className:"border-t border-gray-300 my-4"}),(0,Rs.jsxs)("div",{children:[(0,Rs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Search Timing"}),(0,Rs.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,Rs.jsxs)("div",{children:[(0,Rs.jsx)("label",{className:"block text-xs font-medium text-gray-700 mb-2",children:"Minimum Preferences Before Search"}),(0,Rs.jsx)("input",{type:"range",min:"0",max:Math.max(5,((null===(v=G.conversation_strategy)||void 0===v||null===(b=v.preference_collection)||void 0===b?void 0:b.preferences_to_collect)||[]).length),value:(null===(j=G.conversation_strategy)||void 0===j||null===(w=j.preference_collection)||void 0===w?void 0:w.min_preferences_before_search)||0,onChange:e=>(e=>{var t;Y(He(He({},G),{},{conversation_strategy:He(He({},G.conversation_strategy),{},{preference_collection:He(He({},null===(t=G.conversation_strategy)||void 0===t?void 0:t.preference_collection),{},{min_preferences_before_search:parseInt(e)})})}))})(e.target.value),className:"w-full"}),(0,Rs.jsxs)("div",{className:"flex justify-between text-xs text-gray-600 mt-1",children:[(0,Rs.jsx)("span",{children:"0 (immediate)"}),(0,Rs.jsx)("span",{className:"font-semibold",children:(null===(N=G.conversation_strategy)||void 0===N||null===(k=N.preference_collection)||void 0===k?void 0:k.min_preferences_before_search)||0}),(0,Rs.jsx)("span",{children:"All preferences"})]}),(0,Rs.jsx)("p",{className:"text-xs text-gray-500 mt-2",children:"Agent will search once it collects at least this many preferences"})]}),(0,Rs.jsxs)("div",{children:[(0,Rs.jsx)("label",{className:"block text-xs font-medium text-gray-700 mb-2",children:"Maximum Questions to Ask"}),(0,Rs.jsx)("input",{type:"range",min:"1",max:"10",value:(null===(_=G.conversation_strategy)||void 0===_||null===(S=_.preference_collection)||void 0===S?void 0:S.max_questions)||3,onChange:e=>(e=>{var t;Y(He(He({},G),{},{conversation_strategy:He(He({},G.conversation_strategy),{},{preference_collection:He(He({},null===(t=G.conversation_strategy)||void 0===t?void 0:t.preference_collection),{},{max_questions:parseInt(e)})})}))})(e.target.value),className:"w-full"}),(0,Rs.jsxs)("div",{className:"flex justify-between text-xs text-gray-600 mt-1",children:[(0,Rs.jsx)("span",{children:"1"}),(0,Rs.jsx)("span",{className:"font-semibold",children:(null===(C=G.conversation_strategy)||void 0===C||null===(E=C.preference_collection)||void 0===E?void 0:E.max_questions)||3}),(0,Rs.jsx)("span",{children:"10"})]}),(0,Rs.jsx)("p",{className:"text-xs text-gray-500 mt-2",children:"Limit total questions to avoid frustrating users (recommended: 2-4)"})]})]})]}),(0,Rs.jsx)("div",{className:"bg-white border border-blue-300 rounded-lg p-3",children:(0,Rs.jsxs)("div",{className:"flex items-start gap-2",children:[(0,Rs.jsx)("span",{className:"text-blue-600 text-lg",children:"\ud83d\udca1"}),(0,Rs.jsxs)("div",{className:"flex-1",children:[(0,Rs.jsx)("h4",{className:"text-sm font-semibold text-blue-900 mb-1",children:"How It Works"}),(0,Rs.jsxs)("ul",{className:"text-xs text-blue-800 space-y-1",children:[(0,Rs.jsx)("li",{children:"\u2022 AI asks questions ONE AT A TIME naturally in conversation"}),(0,Rs.jsx)("li",{children:"\u2022 Stops asking when minimum preferences collected"}),(0,Rs.jsx)("li",{children:"\u2022 Never exceeds maximum question limit"}),(0,Rs.jsx)("li",{children:"\u2022 Required preferences are always asked"}),(0,Rs.jsx)("li",{children:"\u2022 Optional preferences may be skipped if user provides enough info"})]})]})]})})]})]}),"ask_questions"===(null===(P=G.conversation_strategy)||void 0===P||null===(T=P.preference_collection)||void 0===T?void 0:T.strategy)&&(null===(A=G.conversation_strategy)||void 0===A||null===(O=A.preference_collection)||void 0===O||null===(M=O.preferences_to_collect)||void 0===M?void 0:M.length)>0&&(0,Rs.jsxs)("div",{className:"mt-6 bg-gray-50 border border-gray-300 rounded-lg p-4",children:[(0,Rs.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,Rs.jsx)("span",{className:"text-lg",children:"\ud83d\udc41\ufe0f"}),(0,Rs.jsx)("h4",{className:"font-semibold text-gray-900",children:"Conversation Preview"})]}),(0,Rs.jsxs)("div",{className:"space-y-2",children:[(0,Rs.jsxs)("div",{className:"flex items-start gap-2",children:[(0,Rs.jsx)("div",{className:"flex-shrink-0 w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center text-sm",children:"\ud83d\udc64"}),(0,Rs.jsx)("div",{className:"flex-1 bg-white rounded-lg p-2 shadow-sm",children:(0,Rs.jsx)("p",{className:"text-sm",children:"Show me dresses"})})]}),G.conversation_strategy.preference_collection.preferences_to_collect.slice(0,2).map((e,t)=>(0,Rs.jsxs)(n.Fragment,{children:[(0,Rs.jsxs)("div",{className:"flex items-start gap-2",children:[(0,Rs.jsx)("div",{className:"flex-shrink-0 w-8 h-8 bg-green-100 rounded-full flex items-center justify-center text-sm",children:"\ud83e\udd16"}),(0,Rs.jsx)("div",{className:"flex-1 bg-green-50 rounded-lg p-2 shadow-sm border border-green-200",children:(0,Rs.jsx)("p",{className:"text-sm",children:e.question||"What ".concat(e.name,"?")})})]}),(0,Rs.jsxs)("div",{className:"flex items-start gap-2",children:[(0,Rs.jsx)("div",{className:"flex-shrink-0 w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center text-sm",children:"\ud83d\udc64"}),(0,Rs.jsx)("div",{className:"flex-1 bg-white rounded-lg p-2 shadow-sm",children:(0,Rs.jsx)("p",{className:"text-sm text-gray-400 italic",children:"[User responds...]"})})]})]},t)),(0,Rs.jsxs)("div",{className:"flex items-start gap-2",children:[(0,Rs.jsx)("div",{className:"flex-shrink-0 w-8 h-8 bg-green-100 rounded-full flex items-center justify-center text-sm",children:"\ud83e\udd16"}),(0,Rs.jsxs)("div",{className:"flex-1 bg-green-50 rounded-lg p-2 shadow-sm border border-green-200",children:[(0,Rs.jsx)("p",{className:"text-sm",children:"Perfect! Here are the products..."}),(0,Rs.jsx)("div",{className:"flex gap-2 mt-2",children:[1,2,3,4,5].map(e=>(0,Rs.jsx)("div",{className:"w-12 h-12 bg-gray-200 rounded border"},e))})]})]})]})]}),(0,Rs.jsxs)("div",{className:"border-t pt-6 mt-6",children:[(0,Rs.jsxs)("button",{type:"button",onClick:()=>B(!U),className:"flex items-center text-sm font-medium text-primary-600 hover:text-primary-800 mb-4",children:[U?(0,Rs.jsx)("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Rs.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})}):(0,Rs.jsx)("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Rs.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})}),"Advanced Settings"]}),U&&(0,Rs.jsxs)("div",{className:"space-y-6 bg-gray-50 p-6 rounded-lg",children:[(0,Rs.jsxs)("div",{children:[(0,Rs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Model"}),(0,Rs.jsxs)("select",{value:G.model,onChange:e=>Y(He(He({},G),{},{model:e.target.value})),className:"block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-primary-500 focus:border-primary-500",children:[(0,Rs.jsx)("option",{value:"gpt-4o-realtime-preview-2024-12-17",children:"GPT-4o Realtime (Latest)"}),(0,Rs.jsx)("option",{value:"gpt-4o-mini-realtime-preview-2024-12-17",children:"GPT-4o Mini Realtime (Faster, Cheaper)"})]}),(0,Rs.jsxs)("p",{className:"mt-2 text-sm text-gray-500",children:[(0,Rs.jsx)("strong",{children:"GPT-4o:"})," Most capable model with better understanding and responses. Higher cost (~$0.06/min audio).",(0,Rs.jsx)("br",{}),(0,Rs.jsx)("strong",{children:"GPT-4o Mini:"})," Faster responses, lower cost (~$0.024/min audio), suitable for simple conversations."]})]}),(0,Rs.jsxs)("div",{children:[(0,Rs.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Temperature: ",(0,Rs.jsx)("span",{className:"text-primary-600 font-semibold",children:G.temperature})]}),(0,Rs.jsx)("input",{type:"range",min:"0",max:"1",step:"0.1",value:G.temperature,onChange:e=>Y(He(He({},G),{},{temperature:parseFloat(e.target.value)})),className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer"}),(0,Rs.jsxs)("div",{className:"flex justify-between text-xs text-gray-500 mt-1",children:[(0,Rs.jsx)("span",{children:"0 (Focused)"}),(0,Rs.jsx)("span",{children:"0.5 (Balanced)"}),(0,Rs.jsx)("span",{children:"1.0 (Creative)"})]}),(0,Rs.jsxs)("p",{className:"mt-2 text-sm text-gray-500",children:["Controls response randomness and creativity.",(0,Rs.jsx)("br",{}),(0,Rs.jsx)("strong",{children:"Lower (0.0-0.4):"})," More focused, consistent, and deterministic. Best for factual Q&A, customer support.",(0,Rs.jsx)("br",{}),(0,Rs.jsx)("strong",{children:"Medium (0.5-0.7):"})," Balanced between consistency and variety. Good for most use cases.",(0,Rs.jsx)("br",{}),(0,Rs.jsx)("strong",{children:"Higher (0.8-1.0):"})," More creative and varied responses. Good for creative writing, brainstorming."]})]}),(0,Rs.jsxs)("div",{children:[(0,Rs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Max Response Tokens"}),(0,Rs.jsx)("input",{type:"number",min:"200",max:"8192",step:"100",value:G.max_tokens,onChange:e=>Y(He(He({},G),{},{max_tokens:parseInt(e.target.value)||200})),className:"block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-primary-500 focus:border-primary-500"}),(0,Rs.jsxs)("p",{className:"mt-2 text-sm text-gray-500",children:["Maximum length of each agent response (200-8192 tokens).",(0,Rs.jsx)("br",{}),(0,Rs.jsx)("strong",{children:"Lower (200-1000):"})," Short, concise responses. Faster and cheaper. Good for quick Q&A.",(0,Rs.jsx)("br",{}),(0,Rs.jsx)("strong",{children:"Medium (1000-4096):"})," Standard length responses. Balanced cost/quality.",(0,Rs.jsx)("br",{}),(0,Rs.jsx)("strong",{children:"Higher (4096-8192):"})," Longer, detailed explanations. Higher cost per response.",(0,Rs.jsx)("br",{}),(0,Rs.jsx)("span",{className:"text-xs",children:"Note: ~1 token \u2248 0.75 words. 4096 tokens \u2248 3000 words."})]})]}),(0,Rs.jsxs)("div",{children:[(0,Rs.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["VAD Threshold: ",(0,Rs.jsx)("span",{className:"text-primary-600 font-semibold",children:G.vad_threshold})]}),(0,Rs.jsx)("input",{type:"range",min:"0.1",max:"1",step:"0.1",value:G.vad_threshold,onChange:e=>Y(He(He({},G),{},{vad_threshold:parseFloat(e.target.value)})),className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer"}),(0,Rs.jsxs)("div",{className:"flex justify-between text-xs text-gray-500 mt-1",children:[(0,Rs.jsx)("span",{children:"0.1 (Sensitive)"}),(0,Rs.jsx)("span",{children:"0.5 (Balanced)"}),(0,Rs.jsx)("span",{children:"1.0 (Strict)"})]}),(0,Rs.jsxs)("p",{className:"mt-2 text-sm text-gray-500",children:["Voice Activity Detection sensitivity - determines how sensitive the AI is to detecting speech.",(0,Rs.jsx)("br",{}),(0,Rs.jsx)("strong",{children:"Lower (0.1-0.3):"})," Very sensitive. Picks up quiet speech and whispers. May detect background noise as speech.",(0,Rs.jsx)("br",{}),(0,Rs.jsx)("strong",{children:"Medium (0.4-0.6):"})," Balanced. Good for normal phone conversations.",(0,Rs.jsx)("br",{}),(0,Rs.jsx)("strong",{children:"Higher (0.7-1.0):"})," Only detects clear, loud speech. Good for noisy environments but may miss quiet speakers.",(0,Rs.jsx)("br",{}),(0,Rs.jsx)("span",{className:"text-amber-600",children:"\u26a0\ufe0f If users complain the agent doesn't respond, lower this value. If it responds to background noise, increase it."})]})]}),(0,Rs.jsxs)("div",{children:[(0,Rs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Silence Duration (ms)"}),(0,Rs.jsx)("input",{type:"number",min:"200",max:"2000",step:"100",value:G.silence_duration_ms,onChange:e=>Y(He(He({},G),{},{silence_duration_ms:parseInt(e.target.value)||500})),className:"block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-primary-500 focus:border-primary-500"}),(0,Rs.jsxs)("p",{className:"mt-2 text-sm text-gray-500",children:["How long (in milliseconds) to wait after user stops speaking before agent responds (200-2000ms).",(0,Rs.jsx)("br",{}),(0,Rs.jsx)("strong",{children:"Lower (200-400ms):"})," Agent responds very quickly. May interrupt users who pause mid-sentence.",(0,Rs.jsx)("br",{}),(0,Rs.jsx)("strong",{children:"Medium (500-700ms):"})," Balanced. Good for most conversations.",(0,Rs.jsx)("br",{}),(0,Rs.jsx)("strong",{children:"Higher (800-2000ms):"})," Agent waits longer. Better for users who speak slowly or pause often.",(0,Rs.jsx)("br",{}),(0,Rs.jsx)("span",{className:"text-xs",children:"Recommended: 500ms for English, 700ms for Urdu (allows for thinking pauses)"})]})]}),(0,Rs.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-md p-4",children:[(0,Rs.jsx)("h4",{className:"text-sm font-medium text-blue-900 mb-2",children:"\ud83d\udca1 Quick Tips"}),(0,Rs.jsxs)("ul",{className:"text-sm text-blue-800 space-y-1 list-disc list-inside",children:[(0,Rs.jsx)("li",{children:"Start with default values and adjust based on user feedback"}),(0,Rs.jsx)("li",{children:"Test calls in your actual environment before going live"}),(0,Rs.jsx)("li",{children:"Lower temperature for consistent banking/support, higher for sales/creative"}),(0,Rs.jsx)("li",{children:"Higher VAD threshold if you have noisy call centers"}),(0,Rs.jsx)("li",{children:"Monitor call costs - higher tokens and GPT-4o increase costs significantly"})]})]})]})]}),R&&(0,Rs.jsxs)("div",{className:"bg-white shadow rounded-lg",children:[(0,Rs.jsxs)("div",{className:"px-6 py-5 border-b border-gray-200 flex items-center justify-between",children:[(0,Rs.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Functions"}),(0,Rs.jsxs)("button",{onClick:()=>We(),className:"inline-flex items-center px-3 py-1 border border-transparent rounded-md text-sm font-medium text-white bg-primary-600 hover:bg-primary-700",children:[(0,Rs.jsx)(Qs,{className:"w-4 h-4 mr-1"}),"Add Function"]})]}),(0,Rs.jsx)("div",{className:"px-6 py-5",children:0===X.length?(0,Rs.jsx)("p",{className:"text-sm text-gray-500 text-center py-4",children:"No functions defined. Add functions to extend agent capabilities."}):(0,Rs.jsx)("ul",{className:"space-y-3",children:X.map(e=>(0,Rs.jsx)("li",{className:"border rounded-lg p-4 hover:bg-gray-50",children:(0,Rs.jsxs)("div",{className:"flex items-start justify-between",children:[(0,Rs.jsxs)("div",{className:"flex-1",children:[(0,Rs.jsx)("h4",{className:"text-sm font-medium text-gray-900",children:e.name}),(0,Rs.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:e.description}),(0,Rs.jsxs)("div",{className:"mt-2 flex items-center space-x-4 text-xs text-gray-500",children:[(0,Rs.jsx)("span",{className:"px-2 py-1 bg-gray-100 rounded",children:e.execution_mode}),(0,Rs.jsx)("span",{className:"px-2 py-1 bg-blue-100 text-blue-700 rounded",children:e.handler_type}),e.api_endpoint&&(0,Rs.jsx)("span",{className:"px-2 py-1 bg-green-100 text-green-700 rounded",children:e.api_method})]}),e.api_endpoint&&(0,Rs.jsx)("div",{className:"mt-2 text-xs text-gray-600 font-mono bg-gray-50 p-2 rounded",children:e.api_endpoint})]}),(0,Rs.jsxs)("div",{className:"flex space-x-2 ml-4",children:[(0,Rs.jsx)("button",{onClick:()=>We(e),className:"text-gray-400 hover:text-gray-600",children:(0,Rs.jsx)(Ys,{className:"w-4 h-4"})}),(0,Rs.jsx)("button",{onClick:()=>$e(e.id),className:"text-red-400 hover:text-red-600",children:(0,Rs.jsx)(Zs,{className:"w-4 h-4"})})]})]})},e.id))})})]}),ee&&(0,Rs.jsx)("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:(0,Rs.jsxs)("div",{className:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20",children:[(0,Rs.jsx)("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity",onClick:()=>re(!1)}),(0,Rs.jsxs)("div",{className:"relative bg-white rounded-lg max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[(0,Rs.jsx)("div",{className:"sticky top-0 bg-white px-6 py-4 border-b border-gray-200 z-10",children:(0,Rs.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Rs.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:se?"Edit Function":"Add Function"}),(0,Rs.jsxs)("div",{className:"flex space-x-2",children:[(0,Rs.jsx)("button",{onClick:()=>Qe("checkBalance"),className:"text-xs px-2 py-1 bg-gray-100 hover:bg-gray-200 rounded",children:"Example: Check Balance"}),(0,Rs.jsx)("button",{onClick:()=>Qe("bookAppointment"),className:"text-xs px-2 py-1 bg-gray-100 hover:bg-gray-200 rounded",children:"Example: Book Appointment"}),(0,Rs.jsx)("button",{onClick:()=>Qe("sendSMS"),className:"text-xs px-2 py-1 bg-gray-100 hover:bg-gray-200 rounded",children:"Example: Send SMS"}),(0,Rs.jsx)("button",{onClick:()=>Qe("transferCall"),className:"text-xs px-2 py-1 bg-gray-100 hover:bg-gray-200 rounded",children:"Example: Transfer Call"})]})]})}),(0,Rs.jsxs)("div",{className:"px-6 py-5 space-y-6",children:[(0,Rs.jsxs)("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2",children:[(0,Rs.jsxs)("div",{className:"sm:col-span-2",children:[(0,Rs.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Function Name *"}),(0,Rs.jsx)("input",{type:"text",value:fe.name,onChange:e=>ge(He(He({},fe),{},{name:e.target.value})),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-primary-500 focus:border-primary-500 font-mono",placeholder:"check_customer_balance"}),(0,Rs.jsx)("p",{className:"mt-1 text-xs text-gray-500",children:"Use snake_case for function names"})]}),(0,Rs.jsxs)("div",{className:"sm:col-span-2",children:[(0,Rs.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Description *"}),(0,Rs.jsx)("textarea",{value:fe.description,onChange:e=>ge(He(He({},fe),{},{description:e.target.value})),rows:3,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-primary-500 focus:border-primary-500",placeholder:"Check the current balance of a customer account. Returns balance information including available credit and pending transactions."}),(0,Rs.jsx)("p",{className:"mt-1 text-xs text-gray-500",children:"Clear description helps the AI understand when to call this function"})]}),(0,Rs.jsxs)("div",{children:[(0,Rs.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Execution Mode"}),(0,Rs.jsxs)("select",{value:fe.execution_mode,onChange:e=>ge(He(He({},fe),{},{execution_mode:e.target.value})),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-primary-500 focus:border-primary-500",children:[(0,Rs.jsx)("option",{value:"sync",children:"Synchronous (wait for response)"}),(0,Rs.jsx)("option",{value:"async",children:"Asynchronous (fire and forget)"})]})]}),(0,Rs.jsxs)("div",{children:[(0,Rs.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Handler Type"}),(0,Rs.jsxs)("select",{value:fe.handler_type,onChange:e=>ge(He(He({},fe),{},{handler_type:e.target.value})),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-primary-500 focus:border-primary-500",children:[(0,Rs.jsx)("option",{value:"inline",children:"Inline (handled by bridge)"}),(0,Rs.jsx)("option",{value:"api",children:"External API"})]})]})]}),"api"===fe.handler_type&&(0,Rs.jsxs)("div",{className:"border border-gray-300 rounded-lg p-4 bg-gray-50",children:[(0,Rs.jsx)("h4",{className:"text-sm font-medium text-gray-900 mb-4",children:"API Configuration"}),(0,Rs.jsxs)("div",{className:"space-y-4",children:[(0,Rs.jsxs)("div",{className:"flex space-x-2",children:[(0,Rs.jsx)("div",{className:"w-32",children:(0,Rs.jsxs)("select",{value:fe.api_method,onChange:e=>ge(He(He({},fe),{},{api_method:e.target.value})),className:"block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-primary-500 focus:border-primary-500 font-semibold",children:[(0,Rs.jsx)("option",{value:"GET",children:"GET"}),(0,Rs.jsx)("option",{value:"POST",children:"POST"}),(0,Rs.jsx)("option",{value:"PUT",children:"PUT"}),(0,Rs.jsx)("option",{value:"PATCH",children:"PATCH"}),(0,Rs.jsx)("option",{value:"DELETE",children:"DELETE"})]})}),(0,Rs.jsx)("div",{className:"flex-1",children:(0,Rs.jsx)("input",{type:"text",value:fe.api_endpoint,onChange:e=>ge(He(He({},fe),{},{api_endpoint:e.target.value})),className:"block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-primary-500 focus:border-primary-500 font-mono text-sm",placeholder:"https://api.example.com/v1/customers/{{customer_id}}/balance"})})]}),(0,Rs.jsxs)("p",{className:"text-xs text-gray-500",children:["Use ","{{parameter_name}}"," for dynamic values from function parameters"]}),(0,Rs.jsxs)("div",{children:[(0,Rs.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,Rs.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Headers"}),(0,Rs.jsx)("button",{onClick:()=>je(!be),className:"text-sm text-primary-600 hover:text-primary-700",children:be?"Cancel":"+ Add Header"})]}),be&&(0,Rs.jsxs)("div",{className:"mb-3 p-3 border border-gray-300 rounded-md bg-white",children:[(0,Rs.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,Rs.jsx)("input",{type:"text",value:ye.key,onChange:e=>ve(He(He({},ye),{},{key:e.target.value})),className:"block w-full border border-gray-300 rounded-md shadow-sm py-1 px-2 text-sm font-mono",placeholder:"Authorization"}),(0,Rs.jsx)("input",{type:"text",value:ye.value,onChange:e=>ve(He(He({},ye),{},{value:e.target.value})),className:"block w-full border border-gray-300 rounded-md shadow-sm py-1 px-2 text-sm font-mono",placeholder:"Bearer YOUR_API_KEY"})]}),(0,Rs.jsx)("button",{onClick:()=>{ye.key?(ge(He(He({},fe),{},{api_headers:[...fe.api_headers,He({},ye)]})),ve({key:"",value:""}),je(!1)):sr.error("Header key is required")},className:"mt-2 w-full px-3 py-1 bg-primary-600 text-white text-sm rounded-md hover:bg-primary-700",children:"Add Header"})]}),fe.api_headers.length>0&&(0,Rs.jsx)("div",{className:"space-y-2",children:fe.api_headers.map((e,t)=>(0,Rs.jsxs)("div",{className:"flex items-center space-x-2 p-2 bg-white border border-gray-200 rounded",children:[(0,Rs.jsxs)("span",{className:"text-sm font-mono text-gray-700 flex-1",children:[(0,Rs.jsx)("span",{className:"text-blue-600",children:e.key}),": ",e.value]}),(0,Rs.jsx)("button",{onClick:()=>(e=>{ge(He(He({},fe),{},{api_headers:fe.api_headers.filter((t,r)=>r!==e)}))})(t),className:"text-red-400 hover:text-red-600",children:(0,Rs.jsx)(tn,{className:"w-4 h-4"})})]},t))})]}),["POST","PUT","PATCH"].includes(fe.api_method)&&(0,Rs.jsxs)("div",{children:[(0,Rs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Body"}),(0,Rs.jsxs)("div",{className:"flex space-x-2 mb-3",children:[(0,Rs.jsx)("button",{onClick:()=>Ke("none"),className:"px-3 py-1 text-sm rounded ".concat("none"===fe.api_body_type?"bg-primary-600 text-white":"bg-white text-gray-700 border border-gray-300 hover:bg-gray-50"),children:"None"}),(0,Rs.jsx)("button",{onClick:()=>Ke("json"),className:"px-3 py-1 text-sm rounded ".concat("json"===fe.api_body_type?"bg-primary-600 text-white":"bg-white text-gray-700 border border-gray-300 hover:bg-gray-50"),children:"JSON (raw)"}),(0,Rs.jsx)("button",{onClick:()=>Ke("urlencoded"),className:"px-3 py-1 text-sm rounded ".concat("urlencoded"===fe.api_body_type?"bg-primary-600 text-white":"bg-white text-gray-700 border border-gray-300 hover:bg-gray-50"),children:"x-www-form-urlencoded"}),(0,Rs.jsx)("button",{onClick:()=>Ke("form-data"),className:"px-3 py-1 text-sm rounded ".concat("form-data"===fe.api_body_type?"bg-primary-600 text-white":"bg-white text-gray-700 border border-gray-300 hover:bg-gray-50"),children:"form-data"})]}),"json"===fe.api_body_type&&(0,Rs.jsxs)("div",{children:[(0,Rs.jsx)("textarea",{value:ke,onChange:e=>_e(e.target.value),rows:10,className:"block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 font-mono text-xs focus:outline-none focus:ring-primary-500 focus:border-primary-500 bg-gray-900 text-green-400",placeholder:'{\n  "customer_id": "{{customer_id}}",\n  "amount": "{{amount}}"\n}'}),(0,Rs.jsxs)("p",{className:"mt-1 text-xs text-gray-500",children:["Use ","{{parameter_name}}"," to inject parameter values into the body"]})]}),("form-data"===fe.api_body_type||"urlencoded"===fe.api_body_type)&&(0,Rs.jsxs)("div",{children:[(0,Rs.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,Rs.jsx)("span",{className:"text-xs text-gray-500",children:"Key-Value Pairs"}),(0,Rs.jsx)("button",{onClick:()=>Ce(!Se),className:"text-sm text-primary-600 hover:text-primary-700",children:Se?"Cancel":"+ Add Field"})]}),Se&&(0,Rs.jsxs)("div",{className:"mb-3 p-3 border border-gray-300 rounded-md bg-white",children:[(0,Rs.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,Rs.jsx)("input",{type:"text",value:Ee.key,onChange:e=>Pe(He(He({},Ee),{},{key:e.target.value})),className:"block w-full border border-gray-300 rounded-md shadow-sm py-1 px-2 text-sm font-mono",placeholder:"field_name"}),(0,Rs.jsx)("input",{type:"text",value:Ee.value,onChange:e=>Pe(He(He({},Ee),{},{value:e.target.value})),className:"block w-full border border-gray-300 rounded-md shadow-sm py-1 px-2 text-sm font-mono",placeholder:"{{parameter_name}} or value"})]}),(0,Rs.jsx)("button",{onClick:()=>{Ee.key?(Ne([...we,He({},Ee)]),Pe({key:"",value:"",type:"text"}),Ce(!1)):sr.error("Key is required")},className:"mt-2 w-full px-3 py-1 bg-primary-600 text-white text-sm rounded-md hover:bg-primary-700",children:"Add Field"})]}),we.length>0?(0,Rs.jsx)("div",{className:"space-y-2",children:we.map((e,t)=>(0,Rs.jsxs)("div",{className:"flex items-center space-x-2 p-2 bg-white border border-gray-200 rounded",children:[(0,Rs.jsxs)("span",{className:"text-sm font-mono text-gray-700 flex-1",children:[(0,Rs.jsx)("span",{className:"text-blue-600",children:e.key})," = ",e.value]}),(0,Rs.jsx)("button",{onClick:()=>(e=>{Ne(we.filter((t,r)=>r!==e))})(t),className:"text-red-400 hover:text-red-600",children:(0,Rs.jsx)(tn,{className:"w-4 h-4"})})]},t))}):(0,Rs.jsx)("p",{className:"text-sm text-gray-500 text-center py-4 bg-white border border-gray-200 rounded",children:"No fields added"}),(0,Rs.jsxs)("p",{className:"mt-2 text-xs text-gray-500",children:["Use ","{{parameter_name}}"," to inject parameter values"]})]}),"none"===fe.api_body_type&&(0,Rs.jsx)("p",{className:"text-sm text-gray-500 text-center py-4 bg-white border border-gray-200 rounded",children:"No body will be sent with this request"})]}),(0,Rs.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,Rs.jsxs)("div",{children:[(0,Rs.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Timeout (ms)"}),(0,Rs.jsx)("input",{type:"number",value:fe.timeout_ms,onChange:e=>ge(He(He({},fe),{},{timeout_ms:parseInt(e.target.value)})),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-primary-500 focus:border-primary-500"})]}),(0,Rs.jsxs)("div",{children:[(0,Rs.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Retries"}),(0,Rs.jsx)("input",{type:"number",value:fe.retries,onChange:e=>ge(He(He({},fe),{},{retries:parseInt(e.target.value)})),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-primary-500 focus:border-primary-500"})]})]})]})]}),(0,Rs.jsxs)("div",{className:"border border-gray-300 rounded-lg p-4",children:[(0,Rs.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,Rs.jsx)("label",{className:"block text-sm font-medium text-gray-900",children:"Parameters"}),(0,Rs.jsxs)("div",{className:"flex space-x-2",children:[(0,Rs.jsx)("button",{onClick:()=>Me(!Oe),className:"text-xs px-2 py-1 bg-gray-100 hover:bg-gray-200 rounded",children:Oe?"Form View":"JSON View"}),(0,Rs.jsx)("button",{onClick:()=>De(!Le),className:"text-sm text-primary-600 hover:text-primary-700",children:Le?"Cancel":"+ Add Parameter"})]})]}),Oe&&(0,Rs.jsxs)("div",{className:"mb-4",children:[(0,Rs.jsx)("textarea",{value:Te,onChange:e=>Ae(e.target.value),rows:15,className:"block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 font-mono text-xs focus:outline-none focus:ring-primary-500 focus:border-primary-500 bg-gray-900 text-green-400"}),(0,Rs.jsx)("button",{onClick:()=>{try{const e=JSON.parse(Te);ge(He(He({},fe),{},{parameters:e})),Me(!1),sr.success("Parameters updated from JSON")}catch(Ve){sr.error("Invalid JSON: "+Ve.message)}},className:"mt-2 px-3 py-1 bg-primary-600 text-white text-sm rounded-md hover:bg-primary-700",children:"Update from JSON"})]}),!Oe&&Le&&(0,Rs.jsxs)("div",{className:"mb-4 p-4 border border-gray-300 rounded-md bg-gray-50",children:[(0,Rs.jsxs)("div",{className:"space-y-3",children:[(0,Rs.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,Rs.jsxs)("div",{children:[(0,Rs.jsx)("label",{className:"block text-xs font-medium text-gray-700",children:"Name"}),(0,Rs.jsx)("input",{type:"text",value:Re.name,onChange:e=>Fe(He(He({},Re),{},{name:e.target.value})),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-1 px-2 text-sm",placeholder:"customer_id"})]}),(0,Rs.jsxs)("div",{children:[(0,Rs.jsx)("label",{className:"block text-xs font-medium text-gray-700",children:"Type"}),(0,Rs.jsxs)("select",{value:Re.type,onChange:e=>Fe(He(He({},Re),{},{type:e.target.value})),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-1 px-2 text-sm",children:[(0,Rs.jsx)("option",{value:"string",children:"String"}),(0,Rs.jsx)("option",{value:"number",children:"Number"}),(0,Rs.jsx)("option",{value:"boolean",children:"Boolean"}),(0,Rs.jsx)("option",{value:"object",children:"Object"}),(0,Rs.jsx)("option",{value:"array",children:"Array"})]})]})]}),(0,Rs.jsxs)("div",{children:[(0,Rs.jsx)("label",{className:"block text-xs font-medium text-gray-700",children:"Description"}),(0,Rs.jsx)("input",{type:"text",value:Re.description,onChange:e=>Fe(He(He({},Re),{},{description:e.target.value})),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-1 px-2 text-sm",placeholder:"The customer's unique identifier"})]}),"string"===Re.type&&(0,Rs.jsxs)("div",{children:[(0,Rs.jsx)("label",{className:"block text-xs font-medium text-gray-700",children:"Enum Values (comma-separated, optional)"}),(0,Rs.jsx)("input",{type:"text",value:Re.enum,onChange:e=>Fe(He(He({},Re),{},{enum:e.target.value})),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-1 px-2 text-sm",placeholder:"active, pending, inactive"})]}),"object"===Re.type&&(0,Rs.jsxs)("div",{children:[(0,Rs.jsx)("label",{className:"block text-xs font-medium text-gray-700",children:"Properties (JSON)"}),(0,Rs.jsx)("textarea",{value:Re.properties,onChange:e=>Fe(He(He({},Re),{},{properties:e.target.value})),rows:4,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-1 px-2 text-sm font-mono",placeholder:'{\n  "name": { "type": "string" },\n  "age": { "type": "number" }\n}'})]}),"array"===Re.type&&(0,Rs.jsxs)("div",{children:[(0,Rs.jsx)("label",{className:"block text-xs font-medium text-gray-700",children:"Items Schema (JSON)"}),(0,Rs.jsx)("textarea",{value:Re.items,onChange:e=>Fe(He(He({},Re),{},{items:e.target.value})),rows:4,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-1 px-2 text-sm font-mono",placeholder:'{ "type": "string" }'})]}),(0,Rs.jsx)("div",{children:(0,Rs.jsxs)("label",{className:"flex items-center",children:[(0,Rs.jsx)("input",{type:"checkbox",checked:Re.required,onChange:e=>Fe(He(He({},Re),{},{required:e.target.checked})),className:"rounded border-gray-300 text-primary-600 focus:ring-primary-500"}),(0,Rs.jsx)("span",{className:"ml-2 text-sm text-gray-700",children:"Required"})]})})]}),(0,Rs.jsx)("button",{onClick:()=>{if(!Re.name)return void sr.error("Parameter name is required");const e={type:Re.type,description:Re.description};if(Re.enum&&"string"===Re.type&&(e.enum=Re.enum.split(",").map(e=>e.trim())),"object"===Re.type&&Re.properties)try{e.properties=JSON.parse(Re.properties)}catch(Ve){return void sr.error("Invalid JSON for object properties")}if("array"===Re.type&&Re.items)try{e.items=JSON.parse(Re.items)}catch(Ve){return void sr.error("Invalid JSON for array items")}const t=He(He({},fe.parameters.properties),{},{[Re.name]:e}),r=Re.required?[...fe.parameters.required,Re.name]:fe.parameters.required,a=He(He({},fe.parameters),{},{properties:t,required:r});ge(He(He({},fe),{},{parameters:a})),Ae(JSON.stringify(a,null,2)),Fe({name:"",type:"string",description:"",required:!1,enum:"",properties:"",items:""}),De(!1)},className:"mt-3 w-full px-3 py-1 bg-primary-600 text-white text-sm rounded-md hover:bg-primary-700",children:"Add Parameter"})]}),!Oe&&Object.keys(fe.parameters.properties).length>0&&(0,Rs.jsx)("div",{className:"space-y-2",children:Object.entries(fe.parameters.properties).map(e=>{let[t,r]=e;return(0,Rs.jsxs)("div",{className:"flex items-start justify-between p-3 border border-gray-200 rounded-md bg-white",children:[(0,Rs.jsxs)("div",{className:"flex-1",children:[(0,Rs.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Rs.jsx)("span",{className:"font-medium text-sm font-mono",children:t}),(0,Rs.jsx)("span",{className:"text-xs px-2 py-0.5 bg-blue-100 text-blue-700 rounded",children:r.type}),fe.parameters.required.includes(t)&&(0,Rs.jsx)("span",{className:"text-xs px-2 py-0.5 bg-red-100 text-red-700 rounded",children:"required"})]}),(0,Rs.jsx)("p",{className:"text-xs text-gray-600 mt-1",children:r.description}),r.enum&&(0,Rs.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["Values: ",r.enum.join(", ")]})]}),(0,Rs.jsx)("button",{onClick:()=>(e=>{const t=fe.parameters.properties,{[e]:r}=t,a=zs(t,[e].map(Ue)),s=fe.parameters.required.filter(t=>t!==e),n=He(He({},fe.parameters),{},{properties:a,required:s});ge(He(He({},fe),{},{parameters:n})),Ae(JSON.stringify(n,null,2))})(t),className:"text-red-400 hover:text-red-600 ml-2",children:(0,Rs.jsx)(tn,{className:"w-4 h-4"})})]},t)})}),!Oe&&0===Object.keys(fe.parameters.properties).length&&(0,Rs.jsx)("p",{className:"text-sm text-gray-500 text-center py-4",children:"No parameters defined. Add parameters that the AI can use when calling this function."})]})]}),(0,Rs.jsxs)("div",{className:"sticky bottom-0 bg-gray-50 px-6 py-4 border-t border-gray-200 flex justify-end space-x-3",children:[(0,Rs.jsx)("button",{onClick:()=>re(!1),className:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50",children:"Cancel"}),(0,Rs.jsx)("button",{onClick:async()=>{if(!fe.name||!fe.description)return void sr.error("Name and description are required");const e={};fe.api_headers.forEach(t=>{e[t.key]=t.value});let t=null;if("api"===fe.handler_type&&"GET"!==fe.api_method)if("json"===fe.api_body_type)try{t=ke?JSON.parse(ke):null}catch(Ve){return void sr.error("Invalid JSON in body")}else"form-data"!==fe.api_body_type&&"urlencoded"!==fe.api_body_type||(t={},we.forEach(e=>{t[e.key]=e.value}));const r=He(He({},fe),{},{api_headers:e,api_body:t});ie(!0);try{se?(await((e,t)=>Es.put("/functions/".concat(e),t))(se.id,r),sr.success("Function updated")):(await((e,t)=>Es.post("/functions/agent/".concat(e),t))(R,r),sr.success("Function added")),re(!1),qe()}catch(a){sr.error("Failed to save function")}finally{ie(!1)}},disabled:le,className:"px-4 py-2 border border-transparent rounded-md text-sm font-medium text-white bg-primary-600 hover:bg-primary-700 disabled:opacity-50",children:le?"Saving...":"Save Function"})]})]})]})}),oe&&(0,Rs.jsx)("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:(0,Rs.jsxs)("div",{className:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20",children:[(0,Rs.jsx)("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity",onClick:()=>!me&&ce(!1)}),(0,Rs.jsxs)("div",{className:"relative bg-white rounded-lg max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[(0,Rs.jsxs)("div",{className:"sticky top-0 bg-white px-6 py-4 border-b border-gray-200 z-10",children:[(0,Rs.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"AI Generated Instructions"}),he>0&&(0,Rs.jsxs)("p",{className:"mt-1 text-sm text-gray-500",children:["Cost: $",he.toFixed(6)," (deducted from your credits)"]})]}),(0,Rs.jsx)("div",{className:"px-6 py-5",children:me?(0,Rs.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,Rs.jsxs)("div",{className:"text-center",children:[(0,Rs.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto mb-4"}),(0,Rs.jsx)("p",{className:"text-sm text-gray-600",children:"Generating instructions..."}),(0,Rs.jsx)("p",{className:"text-xs text-gray-500 mt-2",children:"Using AI to create optimized agent instructions"})]})}):(0,Rs.jsxs)(Rs.Fragment,{children:[(0,Rs.jsxs)("div",{className:"mb-4",children:[(0,Rs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Generated Instructions"}),(0,Rs.jsx)("textarea",{value:de,onChange:e=>ue(e.target.value),rows:20,className:"block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 font-mono text-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500"}),(0,Rs.jsx)("p",{className:"mt-2 text-sm text-gray-500",children:"You can edit these instructions before accepting them."})]}),(0,Rs.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-md p-4",children:[(0,Rs.jsx)("h4",{className:"text-sm font-medium text-blue-900 mb-2",children:"Review Carefully"}),(0,Rs.jsxs)("ul",{className:"text-sm text-blue-800 space-y-1 list-disc list-inside",children:[(0,Rs.jsx)("li",{children:"Verify the instructions match your use case"}),(0,Rs.jsx)("li",{children:"Check for any inappropriate content or errors"}),(0,Rs.jsx)("li",{children:"Customize as needed before accepting"}),(0,Rs.jsx)("li",{children:"Test the agent after applying instructions"})]})]})]})}),!me&&(0,Rs.jsxs)("div",{className:"sticky bottom-0 bg-gray-50 px-6 py-4 border-t border-gray-200 flex justify-end space-x-3",children:[(0,Rs.jsx)("button",{onClick:()=>{ce(!1),ue(""),sr.info("Instructions discarded")},className:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50",children:"Discard"}),(0,Rs.jsx)("button",{onClick:()=>{Y(He(He({},G),{},{instructions:de})),ce(!1),sr.success("Instructions applied")},className:"px-4 py-2 border border-transparent rounded-md text-sm font-medium text-white bg-primary-600 hover:bg-primary-700",children:"Accept & Apply"})]})]})]})})]})},xn=qs("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]),fn=()=>{const{user:e}=Ls(),[t,r]=(0,n.useState)(0),[a,s]=(0,n.useState)([]),[l,i]=(0,n.useState)(null),[o,c]=(0,n.useState)(!0),[d,u]=(0,n.useState)(!1),[m,p]=(0,n.useState)(""),[h,x]=(0,n.useState)("");if(!["admin","super_admin"].includes(null===e||void 0===e?void 0:e.role))return(0,Rs.jsx)(Navigate,{to:"/",replace:!0});(0,n.useEffect)(()=>{f()},[]);const f=async()=>{try{const[a,n,l]=await Promise.all([Os(),(t={limit:20},Es.get("/credits/transactions",{params:t})),(e=30,Es.get("/credits/usage",{params:{days:e}}))]);r(a.data.balance),s(n.data.transactions),i(l.data)}catch(a){sr.error("Failed to load credits")}finally{c(!1)}var e,t};return o?(0,Rs.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,Rs.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):(0,Rs.jsxs)("div",{className:"space-y-6",children:[(0,Rs.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Rs.jsxs)("div",{children:[(0,Rs.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Credits"}),(0,Rs.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Manage your account balance"})]}),("admin"===e.role||"super_admin"===e.role)&&(0,Rs.jsxs)("button",{onClick:()=>u(!0),className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700",children:[(0,Rs.jsx)(Qs,{className:"w-5 h-5 mr-2"}),"Add Credits"]})]}),(0,Rs.jsxs)("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-3",children:[(0,Rs.jsx)("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:(0,Rs.jsx)("div",{className:"p-6",children:(0,Rs.jsxs)("div",{className:"flex items-center",children:[(0,Rs.jsx)("div",{className:"flex-shrink-0 bg-green-500 rounded-md p-3",children:(0,Rs.jsx)(Hs,{className:"h-6 w-6 text-white"})}),(0,Rs.jsx)("div",{className:"ml-5 w-0 flex-1",children:(0,Rs.jsxs)("dl",{children:[(0,Rs.jsx)("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Current Balance"}),(0,Rs.jsxs)("dd",{className:"text-2xl font-semibold text-gray-900",children:["$",t.toFixed(2)]})]})})]})})}),(0,Rs.jsx)("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:(0,Rs.jsx)("div",{className:"p-6",children:(0,Rs.jsxs)("div",{className:"flex items-center",children:[(0,Rs.jsx)("div",{className:"flex-shrink-0 bg-red-500 rounded-md p-3",children:(0,Rs.jsx)(xn,{className:"h-6 w-6 text-white"})}),(0,Rs.jsx)("div",{className:"ml-5 w-0 flex-1",children:(0,Rs.jsxs)("dl",{children:[(0,Rs.jsx)("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Usage (30 days)"}),(0,Rs.jsxs)("dd",{className:"text-2xl font-semibold text-gray-900",children:["$",(null===l||void 0===l?void 0:l.total_cost.toFixed(2))||"0.00"]})]})})]})})}),(0,Rs.jsx)("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:(0,Rs.jsx)("div",{className:"p-6",children:(0,Rs.jsxs)("div",{className:"flex items-center",children:[(0,Rs.jsx)("div",{className:"flex-shrink-0 bg-blue-500 rounded-md p-3",children:(0,Rs.jsx)($s,{className:"h-6 w-6 text-white"})}),(0,Rs.jsx)("div",{className:"ml-5 w-0 flex-1",children:(0,Rs.jsxs)("dl",{children:[(0,Rs.jsx)("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Avg per Call"}),(0,Rs.jsxs)("dd",{className:"text-2xl font-semibold text-gray-900",children:["$",(null===l||void 0===l?void 0:l.avg_cost_per_call.toFixed(4))||"0.0000"]})]})})]})})})]}),(0,Rs.jsxs)("div",{className:"bg-white shadow rounded-lg",children:[(0,Rs.jsx)("div",{className:"px-6 py-5 border-b border-gray-200",children:(0,Rs.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Transaction History"})}),(0,Rs.jsx)("div",{className:"overflow-x-auto",children:(0,Rs.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,Rs.jsx)("thead",{className:"bg-gray-50",children:(0,Rs.jsxs)("tr",{children:[(0,Rs.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),(0,Rs.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),(0,Rs.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"}),(0,Rs.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Balance After"}),(0,Rs.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Note"})]})}),(0,Rs.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:0===a.length?(0,Rs.jsx)("tr",{children:(0,Rs.jsx)("td",{colSpan:"5",className:"px-6 py-4 text-center text-sm text-gray-500",children:"No transactions yet"})}):a.map(e=>(0,Rs.jsxs)("tr",{children:[(0,Rs.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:new Date(e.created_at).toLocaleDateString()}),(0,Rs.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,Rs.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat("add"===e.type?"bg-green-100 text-green-800":"deduct"===e.type?"bg-red-100 text-red-800":"bg-blue-100 text-blue-800"),children:e.type})}),(0,Rs.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:(0,Rs.jsxs)("span",{className:"add"===e.type?"text-green-600":"text-red-600",children:["add"===e.type?"+":"-","$",e.amount.toFixed(4)]})}),(0,Rs.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:["$",e.balance_after.toFixed(4)]}),(0,Rs.jsx)("td",{className:"px-6 py-4 text-sm text-gray-500",children:e.note||e.reference_type||"-"})]},e.id))})]})})]}),d&&(0,Rs.jsx)("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:(0,Rs.jsxs)("div",{className:"flex items-center justify-center min-h-screen px-4",children:[(0,Rs.jsx)("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75",onClick:()=>u(!1)}),(0,Rs.jsxs)("div",{className:"relative bg-white rounded-lg max-w-md w-full p-6",children:[(0,Rs.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Add Credits"}),(0,Rs.jsxs)("div",{className:"space-y-4",children:[(0,Rs.jsxs)("div",{children:[(0,Rs.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Amount ($)"}),(0,Rs.jsx)("input",{type:"number",step:"0.01",value:m,onChange:e=>p(e.target.value),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-primary-500 focus:border-primary-500",placeholder:"100.00"})]}),(0,Rs.jsxs)("div",{children:[(0,Rs.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Note (optional)"}),(0,Rs.jsx)("input",{type:"text",value:h,onChange:e=>x(e.target.value),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-primary-500 focus:border-primary-500",placeholder:"Monthly top-up"})]})]}),(0,Rs.jsxs)("div",{className:"mt-6 flex justify-end space-x-3",children:[(0,Rs.jsx)("button",{onClick:()=>u(!1),className:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50",children:"Cancel"}),(0,Rs.jsx)("button",{onClick:async()=>{const t=parseFloat(m);if(!t||t<=0)sr.error("Please enter a valid amount");else try{await((e,t,r)=>Es.post("/credits/add",{tenant_id:e,amount:t,note:r}))(e.id,t,h),sr.success("Added $".concat(t.toFixed(2)," credits")),u(!1),p(""),x(""),f()}catch(s){var r,a;sr.error((null===(r=s.response)||void 0===r||null===(a=r.data)||void 0===a?void 0:a.error)||"Failed to add credits")}},className:"px-4 py-2 border border-transparent rounded-md text-sm font-medium text-white bg-primary-600 hover:bg-primary-700",children:"Add Credits"})]})]})]})})]})},gn=()=>{const[e,t]=(0,n.useState)([]),[r,a]=(0,n.useState)(!0),[s,l]=(0,n.useState)(null);(0,n.useEffect)(()=>{i()},[]);const i=async()=>{try{const r=await(e={limit:50},Es.get("/calls",{params:e}));t(r.data.calls)}catch(r){sr.error("Failed to load calls")}finally{a(!1)}var e},o=async e=>{try{const r=await(t=e.session_id,Es.get("/calls/".concat(t)));l(r.data.call)}catch(r){sr.error("Failed to load call details")}var t},c=e=>{const t=parseFloat(e);return isNaN(t)?"0.0000":t.toFixed(4)};return r?(0,Rs.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,Rs.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):(0,Rs.jsxs)("div",{className:"space-y-6",children:[(0,Rs.jsxs)("div",{children:[(0,Rs.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Call Logs"}),(0,Rs.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"View and analyze call history"})]}),(0,Rs.jsx)("div",{className:"bg-white shadow overflow-hidden rounded-lg",children:(0,Rs.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,Rs.jsx)("thead",{className:"bg-gray-50",children:(0,Rs.jsxs)("tr",{children:[(0,Rs.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Time"}),(0,Rs.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Caller"}),(0,Rs.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Agent"}),(0,Rs.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Duration"}),(0,Rs.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Cost"}),(0,Rs.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,Rs.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,Rs.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:0===e.length?(0,Rs.jsx)("tr",{children:(0,Rs.jsx)("td",{colSpan:"7",className:"px-6 py-4 text-center text-sm text-gray-500",children:"No calls yet"})}):e.map(e=>(0,Rs.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,Rs.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:new Date(e.start_time).toLocaleString()}),(0,Rs.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.caller_id||"Unknown"}),(0,Rs.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.agent_name||"N/A"}),(0,Rs.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.duration_seconds?"".concat(e.duration_seconds,"s"):"-"}),(0,Rs.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:["$",c(e.final_cost)]}),(0,Rs.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,Rs.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat("completed"===e.status?"bg-green-100 text-green-800":"failed"===e.status?"bg-red-100 text-red-800":"insufficient_credits"===e.status?"bg-yellow-100 text-yellow-800":"bg-blue-100 text-blue-800"),children:e.status})}),(0,Rs.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:(0,Rs.jsx)("button",{onClick:()=>o(e),className:"text-primary-600 hover:text-primary-900",children:"View Details"})})]},e.id))})]})}),s&&(0,Rs.jsx)("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:(0,Rs.jsxs)("div",{className:"flex items-center justify-center min-h-screen px-4",children:[(0,Rs.jsx)("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75",onClick:()=>l(null)}),(0,Rs.jsxs)("div",{className:"relative bg-white rounded-lg max-w-3xl w-full p-6 max-h-screen overflow-y-auto",children:[(0,Rs.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Call Details"}),(0,Rs.jsxs)("div",{className:"space-y-4",children:[(0,Rs.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,Rs.jsxs)("div",{children:[(0,Rs.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Session ID"}),(0,Rs.jsx)("p",{className:"text-sm text-gray-900",children:s.session_id})]}),(0,Rs.jsxs)("div",{children:[(0,Rs.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Caller"}),(0,Rs.jsx)("p",{className:"text-sm text-gray-900",children:s.caller_id})]}),(0,Rs.jsxs)("div",{children:[(0,Rs.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Duration"}),(0,Rs.jsxs)("p",{className:"text-sm text-gray-900",children:[s.duration_seconds,"s"]})]}),(0,Rs.jsxs)("div",{children:[(0,Rs.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Final Cost"}),(0,Rs.jsxs)("p",{className:"text-sm text-gray-900",children:["$",c(s.final_cost)]})]}),(0,Rs.jsxs)("div",{children:[(0,Rs.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Base Cost"}),(0,Rs.jsxs)("p",{className:"text-sm text-gray-900",children:["$",c(s.base_cost)]})]}),(0,Rs.jsxs)("div",{children:[(0,Rs.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Profit"}),(0,Rs.jsxs)("p",{className:"text-sm text-gray-900",children:["$",c(s.profit_amount)]})]}),(0,Rs.jsxs)("div",{children:[(0,Rs.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Audio Input"}),(0,Rs.jsxs)("p",{className:"text-sm text-gray-900",children:[s.audio_input_seconds,"s"]})]}),(0,Rs.jsxs)("div",{children:[(0,Rs.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Audio Output"}),(0,Rs.jsxs)("p",{className:"text-sm text-gray-900",children:[s.audio_output_seconds,"s"]})]}),(0,Rs.jsxs)("div",{children:[(0,Rs.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Text Input Tokens"}),(0,Rs.jsx)("p",{className:"text-sm text-gray-900",children:s.text_input_tokens||0})]}),(0,Rs.jsxs)("div",{children:[(0,Rs.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Text Output Tokens"}),(0,Rs.jsx)("p",{className:"text-sm text-gray-900",children:s.text_output_tokens||0})]})]}),s.function_calls&&s.function_calls.length>0&&(0,Rs.jsxs)("div",{children:[(0,Rs.jsx)("h4",{className:"text-sm font-medium text-gray-900 mb-2",children:"Function Calls"}),(0,Rs.jsx)("ul",{className:"space-y-2",children:s.function_calls.map((e,t)=>(0,Rs.jsxs)("li",{className:"border rounded p-3 text-sm",children:[(0,Rs.jsx)("p",{className:"font-medium",children:e.function_name}),(0,Rs.jsxs)("p",{className:"text-gray-600 mt-1",children:["Status: ",e.status," | Time: ",e.execution_time_ms,"ms"]}),e.arguments&&(0,Rs.jsx)("pre",{className:"mt-2 text-xs bg-gray-50 p-2 rounded overflow-x-auto",children:JSON.stringify(JSON.parse(e.arguments),null,2)})]},t))})]})]}),(0,Rs.jsx)("div",{className:"mt-6 flex justify-end",children:(0,Rs.jsx)("button",{onClick:()=>l(null),className:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50",children:"Close"})})]})]})})]})},yn=qs("PhoneOff",[["path",{d:"M10.68 13.31a16 16 0 0 0 3.41 2.6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7 2 2 0 0 1 1.72 2v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.42 19.42 0 0 1-3.33-2.67m-2.67-3.34a19.79 19.79 0 0 1-3.07-8.63A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91",key:"z86iuo"}],["line",{x1:"22",x2:"2",y1:"2",y2:"22",key:"11kh81"}]]),vn=qs("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),bn=qs("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),jn=qs("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]),wn=()=>{var e,t,r,a,s,l,i,o,c,d,u,m;const[p,h]=(0,n.useState)(!1),[x,f]=(0,n.useState)(new Map),[g,y]=(0,n.useState)(null),[v,b]=(0,n.useState)(new Map),j=(0,n.useRef)(null);(0,n.useEffect)(()=>{const e=new WebSocket("/aiva/ws");return j.current=e,e.onopen=()=>{console.log("Connected to monitor server"),h(!0)},e.onclose=()=>{console.log("Disconnected from monitor server"),h(!1)},e.onerror=e=>{console.error("WebSocket error:",e)},e.onmessage=e=>{try{const t=JSON.parse(e.data);w(t)}catch(t){console.error("Error parsing message:",t)}},()=>{e.readyState===WebSocket.OPEN&&e.close()}},[]);const w=e=>{switch(e.type){case"connection_added":case"connection_info":f(t=>{const r=new Map(t);return r.set(e.data.clientKey,e.data),r}),b(t=>{const r=new Map(t);return r.has(e.data.clientKey)||r.set(e.data.clientKey,[]),r});break;case"connection_updated":f(t=>{const r=new Map(t);return r.has(e.data.clientKey)&&r.set(e.data.clientKey,He(He({},r.get(e.data.clientKey)),e.data)),r});break;case"connection_removed":f(t=>{const r=new Map(t);return r.delete(e.data.clientKey),r});break;case"transcript":b(t=>{const r=new Map(t),a=r.get(e.data.clientKey)||[];return r.set(e.data.clientKey,[...a,{speaker:e.data.speaker,text:e.data.text,timestamp:e.data.timestamp}]),r});break;case"cost_update":f(t=>{const r=new Map(t);if(r.has(e.data.clientKey)){const t=r.get(e.data.clientKey);t.cost=e.data.cost,r.set(e.data.clientKey,t)}return r});break;case"function_call":case"function_response":b(t=>{const r=new Map(t),a=r.get(e.data.clientKey)||[];return r.set(e.data.clientKey,[...a,{speaker:"system",text:"function_call"===e.type?"\ud83d\udd27 Function call: ".concat(e.data.functionName):"\u2705 Function response: ".concat(e.data.functionName),timestamp:e.data.timestamp,details:e.data}]),r})}},N=Array.from(x.values()),k=g&&v.get(g.clientKey)||[];return(0,Rs.jsxs)("div",{className:"space-y-6",children:[(0,Rs.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Rs.jsxs)("div",{children:[(0,Rs.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Live Call Monitor"}),(0,Rs.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Real-time monitoring of active calls"})]}),(0,Rs.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Rs.jsxs)("div",{className:"flex items-center px-3 py-1 rounded-full text-sm ".concat(p?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:[(0,Rs.jsx)("div",{className:"w-2 h-2 rounded-full mr-2 ".concat(p?"bg-green-600 animate-pulse":"bg-red-600")}),p?"Connected":"Disconnected"]}),(0,Rs.jsxs)("div",{className:"px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-sm font-medium",children:[N.length," Active"]})]})]}),(0,Rs.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,Rs.jsx)("div",{className:"lg:col-span-1",children:(0,Rs.jsxs)("div",{className:"bg-white shadow rounded-lg overflow-hidden",children:[(0,Rs.jsx)("div",{className:"px-4 py-3 border-b border-gray-200 bg-gray-50",children:(0,Rs.jsx)("h2",{className:"text-sm font-semibold text-gray-900",children:"Active Calls"})}),(0,Rs.jsx)("div",{className:"divide-y divide-gray-200 max-h-[calc(100vh-250px)] overflow-y-auto",children:0===N.length?(0,Rs.jsxs)("div",{className:"px-4 py-8 text-center text-sm text-gray-500",children:[(0,Rs.jsx)(yn,{className:"w-12 h-12 mx-auto mb-3 text-gray-300"}),"No active calls"]}):N.map(e=>{var t;return(0,Rs.jsxs)("button",{onClick:()=>y(e),className:"w-full px-4 py-4 text-left hover:bg-gray-50 transition-colors ".concat((null===g||void 0===g?void 0:g.clientKey)===e.clientKey?"bg-blue-50 border-l-4 border-blue-600":""),children:[(0,Rs.jsxs)("div",{className:"flex items-start justify-between mb-2",children:[(0,Rs.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Rs.jsx)("div",{className:"w-3 h-3 rounded-full ".concat(e.userSpeaking?"bg-green-500 animate-pulse":e.agentSpeaking?"bg-blue-500 animate-pulse":"bg-gray-300")}),(0,Rs.jsx)("span",{className:"text-sm font-medium text-gray-900",children:e.callerId||"Unknown"})]}),(0,Rs.jsx)(Ws,{className:"w-4 h-4 text-green-600"})]}),(0,Rs.jsxs)("div",{className:"text-xs text-gray-600 space-y-1",children:[(0,Rs.jsxs)("div",{className:"flex items-center",children:[(0,Rs.jsx)(vn,{className:"w-3 h-3 mr-1"}),e.agentName||"Unknown Agent"]}),(0,Rs.jsxs)("div",{className:"flex items-center",children:[(0,Rs.jsx)(bn,{className:"w-3 h-3 mr-1"}),e.connectedAt?new Date(e.connectedAt).toLocaleTimeString():"N/A"]}),e.cost&&(0,Rs.jsxs)("div",{className:"flex items-center font-semibold text-blue-600",children:[(0,Rs.jsx)(Hs,{className:"w-3 h-3 mr-1"}),(null===(t=e.cost.formatted)||void 0===t?void 0:t.finalCost)||"$0.00"]})]}),(e.userSpeaking||e.agentSpeaking)&&(0,Rs.jsxs)("div",{className:"mt-2 flex items-center space-x-1",children:[(0,Rs.jsx)(jn,{className:"w-3 h-3 text-blue-600"}),(0,Rs.jsx)("span",{className:"text-xs text-blue-600 font-medium",children:e.userSpeaking?"User Speaking":"Agent Speaking"})]})]},e.clientKey)})})]})}),(0,Rs.jsx)("div",{className:"lg:col-span-2",children:(0,Rs.jsx)("div",{className:"bg-white shadow rounded-lg overflow-hidden h-[calc(100vh-200px)] flex flex-col",children:g?(0,Rs.jsxs)(Rs.Fragment,{children:[(0,Rs.jsx)("div",{className:"px-6 py-4 border-b border-gray-200 bg-gray-50",children:(0,Rs.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Rs.jsxs)("div",{children:[(0,Rs.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:g.callerId||"Unknown Caller"}),(0,Rs.jsxs)("p",{className:"text-sm text-gray-500",children:[g.agentName," \u2022 Session: ",g.sessionId]})]}),g.cost&&(0,Rs.jsxs)("div",{className:"text-right",children:[(0,Rs.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:(null===(e=g.cost.formatted)||void 0===e?void 0:e.finalCost)||"$0.00"}),(0,Rs.jsx)("div",{className:"text-xs text-gray-500",children:(null===(t=g.cost.duration)||void 0===t?void 0:t.formatted)||"0s"})]})]})}),(0,Rs.jsx)("div",{className:"flex-1 overflow-y-auto p-6 space-y-4",children:0===k.length?(0,Rs.jsx)("div",{className:"flex items-center justify-center h-full text-gray-500",children:(0,Rs.jsxs)("div",{className:"text-center",children:[(0,Rs.jsx)(jn,{className:"w-12 h-12 mx-auto mb-3 text-gray-300"}),(0,Rs.jsx)("p",{className:"text-sm",children:"Waiting for conversation..."})]})}):k.map((e,t)=>(0,Rs.jsx)("div",{className:"flex ".concat("user"===e.speaker?"justify-start":"agent"===e.speaker?"justify-end":"justify-center"),children:"system"===e.speaker?(0,Rs.jsx)("div",{className:"px-4 py-2 bg-yellow-50 border border-yellow-200 rounded-lg text-xs text-yellow-800",children:e.text}):(0,Rs.jsxs)("div",{className:"max-w-[75%] px-4 py-3 rounded-lg ".concat("user"===e.speaker?"bg-gray-100 text-gray-900":"bg-blue-600 text-white"),children:[(0,Rs.jsxs)("div",{className:"flex items-baseline space-x-2 mb-1",children:[(0,Rs.jsx)("span",{className:"text-xs font-semibold uppercase opacity-75",children:e.speaker}),(0,Rs.jsx)("span",{className:"text-xs opacity-50",children:new Date(e.timestamp).toLocaleTimeString()})]}),(0,Rs.jsx)("p",{className:"text-sm leading-relaxed",children:e.text})]})},t))}),g.cost&&(0,Rs.jsx)("div",{className:"px-6 py-3 border-t border-gray-200 bg-gray-50",children:(0,Rs.jsxs)("div",{className:"grid grid-cols-4 gap-4 text-center text-xs",children:[(0,Rs.jsxs)("div",{children:[(0,Rs.jsx)("div",{className:"text-gray-500",children:"Audio In"}),(0,Rs.jsxs)("div",{className:"font-semibold text-gray-900",children:[(null===(r=g.cost.audio)||void 0===r||null===(a=r.input)||void 0===a||null===(s=a.seconds)||void 0===s?void 0:s.toFixed(1))||0,"s"]})]}),(0,Rs.jsxs)("div",{children:[(0,Rs.jsx)("div",{className:"text-gray-500",children:"Audio Out"}),(0,Rs.jsxs)("div",{className:"font-semibold text-gray-900",children:[(null===(l=g.cost.audio)||void 0===l||null===(i=l.output)||void 0===i||null===(o=i.seconds)||void 0===o?void 0:o.toFixed(1))||0,"s"]})]}),(0,Rs.jsxs)("div",{children:[(0,Rs.jsx)("div",{className:"text-gray-500",children:"Tokens In"}),(0,Rs.jsx)("div",{className:"font-semibold text-gray-900",children:(null===(c=g.cost.text)||void 0===c||null===(d=c.input)||void 0===d?void 0:d.tokens)||0})]}),(0,Rs.jsxs)("div",{children:[(0,Rs.jsx)("div",{className:"text-gray-500",children:"Tokens Out"}),(0,Rs.jsx)("div",{className:"font-semibold text-gray-900",children:(null===(u=g.cost.text)||void 0===u||null===(m=u.output)||void 0===m?void 0:m.tokens)||0})]})]})})]}):(0,Rs.jsx)("div",{className:"flex items-center justify-center h-full text-gray-500",children:(0,Rs.jsxs)("div",{className:"text-center",children:[(0,Rs.jsx)(Ws,{className:"w-16 h-16 mx-auto mb-4 text-gray-300"}),(0,Rs.jsx)("p",{className:"text-lg font-medium",children:"Select a call to view transcript"}),(0,Rs.jsx)("p",{className:"text-sm mt-1",children:"Live transcripts will appear here"})]})})})})]})]})},Nn=qs("MicOff",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M18.89 13.23A7.12 7.12 0 0 0 19 12v-2",key:"80xlxr"}],["path",{d:"M5 10v2a7 7 0 0 0 12 5",key:"p2k8kg"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]),kn=qs("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]),_n=qs("Volume2",[["polygon",{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5",key:"16drj5"}],["path",{d:"M15.54 8.46a5 5 0 0 1 0 7.07",key:"ltjumu"}],["path",{d:"M19.07 4.93a10 10 0 0 1 0 14.14",key:"1kegas"}]]),Sn=()=>{const[e,t]=(0,n.useState)([]),[r,a]=(0,n.useState)(null),[s,l]=(0,n.useState)(!1),[i,o]=(0,n.useState)(!1),[c,d]=(0,n.useState)([]),[u,m]=(0,n.useState)(0),[p,h]=(0,n.useState)(0),[x,f]=(0,n.useState)(null),[g,y]=(0,n.useState)(null),v=(0,n.useRef)([]),b=(0,n.useRef)(!1),j=(0,n.useRef)(null),w=(0,n.useRef)(null),N=(0,n.useRef)(0),[k,_]=(0,n.useState)(!1),S=(0,n.useRef)(null),C=(0,n.useRef)(null);(0,n.useEffect)(()=>(E(),()=>{z()}),[]);const E=async()=>{try{const e=await Ps();t(e.data.agents)}catch(e){sr.error("Failed to load agents")}};(0,n.useEffect)(()=>{if(!s)return;const e=setInterval(()=>{if(w.current){const e=(Date.now()-w.current)/6e4;h("deepgram"===g?.015*e:.024*e)}},1e3);return()=>clearInterval(e)},[s,g]);const P=async()=>{const e=await(t=r.id,Es.post("/realtime/token",{agent_id:t}));var t;const{ephemeral_key:a,session_id:s}=e.data;f(s);const n=new WebSocket("wss://api.openai.com/v1/realtime?model=".concat(r.model),["realtime","openai-insecure-api-key.".concat(a),"openai-beta.realtime-v1"]);S.current=n,n.onopen=async()=>{console.log("Connected to OpenAI Realtime"),w.current=Date.now(),l(!0),_(!1),sr.success("Connected to OpenAI agent"),await R()},n.onmessage=e=>{const t=JSON.parse(e.data);A(t)},n.onerror=e=>{console.error("WebSocket error:",e),_(!1),sr.error("Connection error")},n.onclose=e=>{console.log("Disconnected from OpenAI"),l(!1),_(!1),I(),1005!==e.code&&sr.error("Connection closed: ".concat(e.reason||"Unknown error"))}},T=async()=>{const e=localStorage.getItem("token"),t=await Cs.post("".concat("/aiva/api","/realtime/token/deepgram"),{agent_id:r.id},{headers:{Authorization:"Bearer ".concat(e)}}),{api_key:a,session_id:s,agent:n}=t.data;f(s);const i=new WebSocket("wss://agent.deepgram.com/v1/agent/converse",["token",a]);S.current=i,i.onopen=async()=>{console.log("Connected to Deepgram Agent"),setTimeout(()=>{const e={type:"Settings",audio:{input:{encoding:"linear16",sample_rate:16e3},output:{encoding:"linear16",sample_rate:24e3,container:"none"}},agent:{listen:{provider:{type:"deepgram",model:n.model}},speak:{provider:{type:"deepgram",model:n.voice}},greeting:n.greeting||null,think:{provider:{type:"open_ai",model:"gpt-4o-mini"},prompt:n.instructions,functions:[]}}};console.log("\ud83d\udce4 Sending config"),S.current.send(JSON.stringify(e))},100)},i.onmessage=e=>{if(e.data instanceof Blob)e.data.arrayBuffer().then(e=>{const t=new Uint8Array(e);L(t)});else{const t=JSON.parse(e.data);O(t)}},i.onerror=e=>{console.error("Deepgram error:",e),_(!1),sr.error("Connection error")},i.onclose=e=>{var t;console.log("Disconnected from Deepgram:",e.code,e.reason),l(!1),_(!1),I(),null!==(t=S.current)&&void 0!==t&&t.keepaliveInterval&&clearInterval(S.current.keepaliveInterval),1e3!==e.code&&1005!==e.code&&sr.error("Connection closed: ".concat(e.reason||"Unknown error"))}},A=e=>{switch(console.log("OpenAI:",e.type),e.type){case"session.created":M();break;case"session.updated":setTimeout(()=>{var e;(null===(e=S.current)||void 0===e?void 0:e.readyState)===WebSocket.OPEN&&S.current.send(JSON.stringify({type:"response.create"}))},500);break;case"conversation.item.input_audio_transcription.completed":d(t=>[...t,{role:"user",content:e.transcript,timestamp:new Date}]);break;case"response.audio_transcript.done":d(t=>[...t,{role:"assistant",content:e.transcript,timestamp:new Date}]);break;case"response.audio.delta":F(e.delta)}},O=e=>{switch(console.log("Deepgram:",e.type,e.description),e.type){case"Welcome":console.log("\ud83d\udc4b Deepgram welcome");break;case"SettingsApplied":console.log("\u2705 Settings applied"),w.current=Date.now(),l(!0),_(!1),sr.success("Connected to Deepgram agent");const t=setInterval(()=>{var e;if((null===(e=S.current)||void 0===e?void 0:e.readyState)===WebSocket.OPEN)try{S.current.send(JSON.stringify({type:"KeepAlive"}))}catch(r){console.error("Keepalive error:",r),clearInterval(t)}else clearInterval(t)},5e3);S.current.keepaliveInterval=t,setTimeout(()=>{R()},500);break;case"ConversationText":"user"===e.role?d(t=>[...t,{role:"user",content:e.content,timestamp:new Date}]):"assistant"===e.role&&d(t=>[...t,{role:"assistant",content:e.content,timestamp:new Date}]);break;case"UserStartedSpeaking":console.log("\ud83c\udfa4 User speaking"),v.current=[],b.current=!1,N.current=0;break;case"AgentStartedSpeaking":console.log("\ud83d\udd0a Agent speaking");break;case"AgentAudioDone":console.log("\u2705 Agent audio done");break;case"Error":console.error("\u274c Deepgram error:",e),sr.error(e.description||e.error||"Deepgram error");break;default:console.log("\u2139\ufe0f Unhandled:",e.type)}},M=()=>{if(!S.current||S.current.readyState!==WebSocket.OPEN)return;const e={type:"session.update",session:{modalities:["text","audio"],instructions:r.instructions,voice:r.voice,input_audio_format:"pcm16",output_audio_format:"pcm16",input_audio_transcription:{model:"whisper-1",language:r.language},turn_detection:{type:"server_vad",threshold:parseFloat(r.vad_threshold||"0.5"),prefix_padding_ms:300,silence_duration_ms:parseInt(r.silence_duration_ms||"500"),create_response:!0},tools:[],max_response_output_tokens:parseInt(r.max_tokens||"4096"),temperature:parseFloat(r.temperature||"0.6")}};S.current.send(JSON.stringify(e))},R=async()=>{try{const e="deepgram"===g?16e3:24e3,t=await navigator.mediaDevices.getUserMedia({audio:{channelCount:1,sampleRate:e}});C.current=t;const r=new AudioContext({sampleRate:e});j.current=r;const a=r.createMediaStreamSource(t),n=r.createScriptProcessor(4096,1,1),l=r.createAnalyser();l.fftSize=256,a.connect(l);const o=new Uint8Array(l.frequencyBinCount),c=()=>{if(!s)return;l.getByteFrequencyData(o);const e=o.reduce((e,t)=>e+t)/o.length;m(e/255),requestAnimationFrame(c)};c(),n.onaudioprocess=e=>{if(!S.current||S.current.readyState!==WebSocket.OPEN||i)return;const t=e.inputBuffer.getChannelData(0),r=new Int16Array(t.length);for(let a=0;a<t.length;a++){const e=Math.max(-1,Math.min(1,t[a]));r[a]=e<0?32768*e:32767*e}if("openai"===g){const e=new Uint8Array(r.buffer);let t="";for(let r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);const a=btoa(t);S.current.send(JSON.stringify({type:"input_audio_buffer.append",audio:a}))}else"deepgram"===g&&S.current.send(r.buffer)},a.connect(n),n.connect(r.destination)}catch(e){console.error("Microphone error:",e),sr.error("Failed to access microphone")}},F=e=>{try{const t=atob(e),r=new Uint8Array(t.length);for(let e=0;e<t.length;e++)r[e]=t.charCodeAt(e);v.current.push(r),b.current||D()}catch(t){console.error("Audio error:",t)}},L=e=>{try{v.current.push(e),b.current||D()}catch(t){console.error("Error queueing audio:",t)}},D=async()=>{if("deepgram"===g){const e=2;if(v.current.length<e&&v.current.length>0)return void setTimeout(()=>D(),50)}if(0===v.current.length)return b.current=!1,void(N.current=0);b.current=!0;try{j.current&&"closed"!==j.current.state||(j.current=new(window.AudioContext||window.webkitAudioContext)({sampleRate:24e3}),N.current=j.current.currentTime);const e=j.current;let t;if("deepgram"===g){const e=Math.min(2,v.current.length);let r=0;const a=[];for(let t=0;t<e;t++){const e=v.current.shift(),t=new Int16Array(e.buffer||e);a.push(t),r+=t.length}t=new Int16Array(r);let s=0;for(const n of a)t.set(n,s),s+=n.length}else{const e=v.current.shift();t=new Int16Array(e.buffer||e)}const r=new Float32Array(t.length);for(let n=0;n<t.length;n++)r[n]=t[n]/(t[n]<0?32768:32767);const a=e.createBuffer(1,r.length,24e3);a.getChannelData(0).set(r);const s=e.createBufferSource();if(s.buffer=a,s.connect(e.destination),"deepgram"===g){const t=Math.max(N.current,e.currentTime);s.start(t),N.current=t+a.duration;const r=1e3*a.duration-50;setTimeout(()=>{D()},Math.max(0,r))}else s.onended=()=>{D()},s.start(0)}catch(e){console.error("Audio playback error:",e),b.current=!1,N.current=0,setTimeout(()=>D(),50)}},I=()=>{C.current&&(C.current.getTracks().forEach(e=>e.stop()),C.current=null),j.current&&(j.current.close(),j.current=null)},z=()=>{var e;if(null!==(e=S.current)&&void 0!==e&&e.keepaliveInterval&&clearInterval(S.current.keepaliveInterval),x&&S.current&&U(),S.current){if(S.current.readyState===WebSocket.OPEN)try{"deepgram"===g&&S.current.send(JSON.stringify({type:"EndSession"}))}catch(t){console.error("Error sending EndSession:",t)}S.current.close(),S.current=null}I(),v.current=[],b.current=!1,N.current=0,l(!1),f(null),y(null)},U=async()=>{try{const r=Date.now()-w.current,a=await(e=x,t=r,Es.post("/realtime/finalize",{session_id:e,duration_ms:t}));a.data.success&&sr.success("Test call completed. Cost: $".concat(a.data.cost.toFixed(4)))}catch(r){console.error("Failed to finalize cost:",r)}var e,t};return(0,Rs.jsxs)("div",{className:"space-y-6",children:[(0,Rs.jsxs)("div",{children:[(0,Rs.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Agent Test Utility"}),(0,Rs.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Test your voice agents (OpenAI & Deepgram) in real-time"})]}),(0,Rs.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,Rs.jsx)("div",{className:"lg:col-span-1",children:(0,Rs.jsxs)("div",{className:"bg-white shadow rounded-lg p-6",children:[(0,Rs.jsx)("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:"Settings"}),(0,Rs.jsxs)("div",{className:"space-y-4",children:[(0,Rs.jsxs)("div",{children:[(0,Rs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Agent"}),(0,Rs.jsxs)("select",{value:(null===r||void 0===r?void 0:r.id)||"",onChange:t=>a(e.find(e=>e.id===t.target.value)),className:"w-full border border-gray-300 rounded-md px-3 py-2",disabled:s,children:[(0,Rs.jsx)("option",{value:"",children:"Choose an agent..."}),e.map(e=>(0,Rs.jsxs)("option",{value:e.id,children:[e.name," (",e.provider||"openai",")"]},e.id))]})]}),r&&(0,Rs.jsxs)("div",{className:"text-sm text-gray-600 space-y-2",children:[(0,Rs.jsxs)("div",{className:"flex justify-between",children:[(0,Rs.jsx)("span",{children:"Provider:"}),(0,Rs.jsx)("span",{className:"font-medium",children:"deepgram"===r.provider?"Deepgram":"OpenAI"})]}),(0,Rs.jsxs)("div",{className:"flex justify-between",children:[(0,Rs.jsx)("span",{children:"Model:"}),(0,Rs.jsx)("span",{className:"font-medium",children:"deepgram"===r.provider?r.deepgram_model:r.model})]}),(0,Rs.jsxs)("div",{className:"flex justify-between",children:[(0,Rs.jsx)("span",{children:"Voice:"}),(0,Rs.jsx)("span",{className:"font-medium",children:"deepgram"===r.provider?r.deepgram_voice:r.voice})]})]}),(0,Rs.jsx)("div",{className:"pt-4",children:s?(0,Rs.jsxs)("button",{onClick:z,className:"w-full flex items-center justify-center px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700",children:[(0,Rs.jsx)(yn,{className:"w-5 h-5 mr-2"}),"Disconnect"]}):(0,Rs.jsxs)("button",{onClick:async()=>{if(!r)return void sr.error("Please select an agent");const e=r.provider||"openai";y(e),_(!0);try{"openai"===e?await P():"deepgram"===e?await T():(sr.error("Unsupported provider"),_(!1))}catch(t){console.error("Connection error:",t),sr.error("Failed to connect"),_(!1)}},disabled:!r||k,className:"w-full flex items-center justify-center px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 disabled:opacity-50",children:[(0,Rs.jsx)(Ws,{className:"w-5 h-5 mr-2"}),k?"Connecting...":"Connect"]})}),s&&(0,Rs.jsxs)("div",{className:"space-y-3",children:[(0,Rs.jsxs)("button",{onClick:()=>o(!i),className:"w-full flex items-center justify-center px-4 py-2 rounded-md ".concat(i?"bg-gray-600 hover:bg-gray-700":"bg-blue-600 hover:bg-blue-700"," text-white"),children:[i?(0,Rs.jsx)(Nn,{className:"w-5 h-5 mr-2"}):(0,Rs.jsx)(kn,{className:"w-5 h-5 mr-2"}),i?"Unmute":"Mute"]}),(0,Rs.jsxs)("div",{className:"bg-gray-50 rounded p-3",children:[(0,Rs.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,Rs.jsx)("span",{className:"text-sm text-gray-600",children:"Audio Level"}),(0,Rs.jsx)(_n,{className:"w-4 h-4 text-gray-400"})]}),(0,Rs.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,Rs.jsx)("div",{className:"bg-blue-600 h-2 rounded-full transition-all",style:{width:"".concat(100*u,"%")}})})]}),(0,Rs.jsxs)("div",{className:"bg-gray-50 rounded p-3",children:[(0,Rs.jsx)("div",{className:"text-sm text-gray-600",children:"Estimated Cost"}),(0,Rs.jsxs)("div",{className:"text-2xl font-bold text-gray-900",children:["$",p.toFixed(4)]})]})]})]})]})}),(0,Rs.jsx)("div",{className:"lg:col-span-2",children:(0,Rs.jsxs)("div",{className:"bg-white shadow rounded-lg p-6",children:[(0,Rs.jsx)("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:"Conversation"}),(0,Rs.jsx)("div",{className:"h-96 overflow-y-auto space-y-3 border border-gray-200 rounded-lg p-4",children:0===c.length?(0,Rs.jsx)("div",{className:"text-center text-gray-500 mt-20",children:"No conversation yet. Connect and start talking!"}):c.map((e,t)=>(0,Rs.jsx)("div",{className:"flex ".concat("user"===e.role?"justify-end":"justify-start"),children:(0,Rs.jsxs)("div",{className:"max-w-xs px-4 py-2 rounded-lg ".concat("user"===e.role?"bg-blue-600 text-white":"bg-gray-200 text-gray-900"),children:[(0,Rs.jsx)("div",{className:"text-xs opacity-75 mb-1",children:"user"===e.role?"You":"Agent"}),(0,Rs.jsx)("div",{children:e.content})]})},t))})]})})]})]})},Cn=qs("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]),En=qs("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]),Pn=qs("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]),Tn=qs("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),An=qs("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]),On=qs("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),Mn=qs("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]),Rn=qs("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]),Fn=qs("Loader",[["line",{x1:"12",x2:"12",y1:"2",y2:"6",key:"gza1u7"}],["line",{x1:"12",x2:"12",y1:"18",y2:"22",key:"1qhbu9"}],["line",{x1:"4.93",x2:"7.76",y1:"4.93",y2:"7.76",key:"xae44r"}],["line",{x1:"16.24",x2:"19.07",y1:"16.24",y2:"19.07",key:"bxnmvf"}],["line",{x1:"2",x2:"6",y1:"12",y2:"12",key:"89khin"}],["line",{x1:"18",x2:"22",y1:"12",y2:"12",key:"pb8tfm"}],["line",{x1:"4.93",x2:"7.76",y1:"19.07",y2:"16.24",key:"1uxjnu"}],["line",{x1:"16.24",x2:"19.07",y1:"7.76",y2:"4.93",key:"6duxfx"}]]),Ln=qs("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]),Dn=()=>{te();const e=(0,n.useRef)(null),[t,r]=(0,n.useState)([]),[a,s]=(0,n.useState)(null),[l,i]=(0,n.useState)(null),[o,c]=(0,n.useState)(!1),[d,u]=(0,n.useState)([]),[m,p]=(0,n.useState)(""),[h,x]=(0,n.useState)(!1),[f,g]=(0,n.useState)(null),[y,v]=(0,n.useState)(!0),[b,j]=(0,n.useState)(!1),[w,N]=(0,n.useState)(null),[k,_]=(0,n.useState)(0);(0,n.useEffect)(()=>{C()},[]),(0,n.useEffect)(()=>{S()},[d]);const S=()=>{var t;null===(t=e.current)||void 0===t||t.scrollIntoView({behavior:"smooth"})},C=async()=>{try{const e=await Ps({status:"active"});r(e.data.agents||[])}catch(e){sr.error("Failed to load agents"),console.error(e)}},E=e=>"$".concat((e||0).toFixed(6));return(0,Rs.jsxs)("div",{className:"h-screen flex flex-col bg-gray-50",children:[(0,Rs.jsx)("div",{className:"bg-white border-b border-gray-200 px-6 py-4",children:(0,Rs.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Rs.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,Rs.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Rs.jsx)(Xs,{className:"w-6 h-6 text-primary-600"}),(0,Rs.jsx)("h1",{className:"text-xl font-bold text-gray-900",children:"Agent Test Chat"})]}),(0,Rs.jsx)("div",{className:"ml-6",children:(0,Rs.jsxs)("select",{value:a||"",onChange:e=>(async e=>{if(!e)return s(null),i(null),u([]),g(null),void _(0);try{c(!0);const t=(await Ts(e)).data.agent;s(e),i(t),u([{role:"assistant",content:t.greeting||"Hello! I'm ".concat(t.name,". How can I help you today?"),timestamp:(new Date).toISOString()}]),g(null),_(0),sr.success("Agent loaded: ".concat(t.name))}catch(t){sr.error("Failed to load agent details"),console.error(t)}finally{c(!1)}})(e.target.value),disabled:o,className:"block w-64 border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-primary-500 focus:border-primary-500",children:[(0,Rs.jsx)("option",{value:"",children:"Select an agent..."}),t.map(e=>(0,Rs.jsxs)("option",{value:e.id,children:[e.name," ",e.kb_id?"\ud83d\udcda":""]},e.id))]})})]}),(0,Rs.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,Rs.jsxs)("div",{className:"text-right",children:[(0,Rs.jsx)("div",{className:"text-xs text-gray-500",children:"Total Cost"}),(0,Rs.jsx)("div",{className:"text-lg font-bold text-gray-900",children:E(k)})]}),d.length>1&&(0,Rs.jsxs)("button",{onClick:async()=>{if(f)try{await(e=>Ms.post("/chat/sessions/".concat(e,"/end")))(f)}catch(e){console.error("Failed to end session:",e)}u([{role:"assistant",content:(null===l||void 0===l?void 0:l.greeting)||"Hello! I'm ".concat(null===l||void 0===l?void 0:l.name,". How can I help you today?"),timestamp:(new Date).toISOString()}]),g(null),_(0),sr.success("Chat cleared")},className:"inline-flex items-center px-3 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50",children:[(0,Rs.jsx)(Cn,{className:"w-4 h-4 mr-2"}),"Clear"]})]})]})}),(0,Rs.jsx)("div",{className:"flex-1 flex overflow-hidden",children:(0,Rs.jsxs)("div",{className:"flex-1 flex flex-col",children:[l&&(0,Rs.jsxs)("div",{className:"bg-blue-50 border-b border-blue-200",children:[(0,Rs.jsxs)("button",{onClick:()=>v(!y),className:"w-full px-6 py-3 flex items-center justify-between hover:bg-blue-100 transition-colors",children:[(0,Rs.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Rs.jsx)(Vs,{className:"w-5 h-5 text-blue-600"}),(0,Rs.jsxs)("span",{className:"font-medium text-blue-900",children:["Agent: ",l.name]}),l.kb_id&&(0,Rs.jsxs)("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-blue-200 text-blue-800",children:[(0,Rs.jsx)(En,{className:"w-3 h-3 mr-1"}),"KB Enabled"]})]}),y?(0,Rs.jsx)(Pn,{className:"w-5 h-5 text-blue-600"}):(0,Rs.jsx)(Tn,{className:"w-5 h-5 text-blue-600"})]}),y&&(0,Rs.jsxs)("div",{className:"px-6 pb-4 space-y-3",children:[(0,Rs.jsxs)("div",{children:[(0,Rs.jsx)("div",{className:"text-xs font-medium text-blue-900 mb-1",children:"Instructions (Persona)"}),(0,Rs.jsx)("div",{className:"text-sm text-blue-800 bg-white rounded p-3 max-h-32 overflow-y-auto whitespace-pre-wrap font-mono text-xs",children:l.instructions})]}),(0,Rs.jsxs)("div",{className:"grid grid-cols-4 gap-3",children:[(0,Rs.jsxs)("div",{className:"bg-white rounded p-2",children:[(0,Rs.jsx)("div",{className:"text-xs text-gray-500",children:"Model"}),(0,Rs.jsx)("div",{className:"text-sm font-medium text-gray-900",children:l.model||"gpt-4o-mini"})]}),(0,Rs.jsxs)("div",{className:"bg-white rounded p-2",children:[(0,Rs.jsx)("div",{className:"text-xs text-gray-500",children:"Temperature"}),(0,Rs.jsx)("div",{className:"text-sm font-medium text-gray-900",children:l.temperature||.7})]}),(0,Rs.jsxs)("div",{className:"bg-white rounded p-2",children:[(0,Rs.jsx)("div",{className:"text-xs text-gray-500",children:"Max Tokens"}),(0,Rs.jsx)("div",{className:"text-sm font-medium text-gray-900",children:l.max_tokens||4096})]}),(0,Rs.jsxs)("div",{className:"bg-white rounded p-2",children:[(0,Rs.jsx)("div",{className:"text-xs text-gray-500",children:"Provider"}),(0,Rs.jsx)("div",{className:"text-sm font-medium text-gray-900",children:l.provider||"openai"})]})]})]})]}),(0,Rs.jsx)("div",{className:"flex-1 overflow-y-auto px-6 py-6",children:a?(0,Rs.jsxs)("div",{className:"max-w-4xl mx-auto space-y-6",children:[d.map((e,t)=>(0,Rs.jsx)("div",{className:"flex ".concat("user"===e.role?"justify-end":"justify-start"),children:(0,Rs.jsxs)("div",{className:"flex max-w-3xl ".concat("user"===e.role?"flex-row-reverse":"flex-row"," gap-3"),children:[(0,Rs.jsx)("div",{className:"flex-shrink-0 w-8 h-8 rounded-full flex items-center justify-center ".concat("user"===e.role?"bg-primary-600 text-white":"bg-gray-200 text-gray-600"),children:"user"===e.role?(0,Rs.jsx)(vn,{className:"w-5 h-5"}):(0,Rs.jsx)(Vs,{className:"w-5 h-5"})}),(0,Rs.jsxs)("div",{className:"flex-1 ".concat("user"===e.role?"items-end":"items-start"),children:[(0,Rs.jsxs)("div",{className:"rounded-lg px-4 py-3 ".concat("user"===e.role?"bg-primary-600 text-white":e.error?"bg-red-50 border border-red-200":"bg-white border border-gray-200"),children:[(0,Rs.jsx)("div",{className:"prose prose-sm max-w-none",children:(0,Rs.jsx)("p",{className:"whitespace-pre-wrap ".concat("user"===e.role?"text-white":"text-gray-900"),children:e.content})}),e.sources&&e.sources.length>0&&(0,Rs.jsxs)("div",{className:"mt-3 pt-3 border-t border-gray-200",children:[(0,Rs.jsxs)("div",{className:"flex items-center text-xs font-medium text-gray-700 mb-2",children:[(0,Rs.jsx)(En,{className:"w-3 h-3 mr-1"}),"Knowledge Sources (",e.sources.length,")"]}),(0,Rs.jsx)("div",{className:"space-y-1",children:e.sources.slice(0,3).map((e,t)=>(0,Rs.jsx)("div",{className:"text-xs text-gray-600 bg-gray-50 rounded p-2",children:(0,Rs.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Rs.jsx)("span",{className:"font-medium truncate",children:e.title}),(0,Rs.jsxs)("span",{className:"text-gray-500 ml-2",children:[(100*e.relevance_score).toFixed(0),"%"]})]})},t))})]}),e.images&&e.images.length>0&&(0,Rs.jsxs)("div",{className:"mt-3 pt-3 border-t border-gray-200",children:[(0,Rs.jsxs)("div",{className:"flex items-center text-xs font-medium text-gray-700 mb-2",children:[(0,Rs.jsx)(An,{className:"w-3 h-3 mr-1"}),"Images (",e.images.length,")"]}),(0,Rs.jsx)("div",{className:"grid grid-cols-2 gap-2",children:e.images.slice(0,4).map((e,t)=>(0,Rs.jsx)("div",{className:"relative",children:(0,Rs.jsx)("img",{src:e.thumbnail_url||e.url,alt:e.title,className:"w-full h-24 object-cover rounded"})},t))})]}),e.function_calls&&e.function_calls.length>0&&(0,Rs.jsxs)("div",{className:"mt-3 pt-3 border-t border-gray-200",children:[(0,Rs.jsxs)("div",{className:"flex items-center text-xs font-medium text-gray-700 mb-2",children:[(0,Rs.jsx)(On,{className:"w-3 h-3 mr-1"}),"Function Calls (",e.function_calls.length,")"]}),e.function_calls.map((e,t)=>(0,Rs.jsxs)("div",{className:"text-xs text-gray-600 bg-gray-50 rounded p-2 mb-1",children:[(0,Rs.jsx)("span",{className:"font-medium",children:e.function_name}),(0,Rs.jsxs)("span",{className:"text-green-600 ml-2",children:["\u2713 ",e.status]})]},t))]}),void 0!==e.cost&&(0,Rs.jsxs)("div",{className:"mt-2 pt-2 border-t border-gray-200",children:[(0,Rs.jsxs)("div",{className:"flex items-center justify-between text-xs",children:[(0,Rs.jsx)("span",{className:"text-gray-500",children:e.context_used&&(0,Rs.jsxs)(Rs.Fragment,{children:[e.context_used.knowledge_base_chunks>0&&(0,Rs.jsxs)("span",{className:"mr-2",children:["\ud83d\udcda ",e.context_used.knowledge_base_chunks," chunks"]}),(0,Rs.jsxs)("span",{className:"mr-2",children:["\ud83d\udcac ",e.context_used.conversation_history_messages," history"]}),(0,Rs.jsxs)("span",{children:["\ud83d\udd24 ",e.context_used.total_context_tokens," tokens"]})]})}),(0,Rs.jsxs)("span",{className:"font-medium text-gray-700",children:[(0,Rs.jsx)(Hs,{className:"w-3 h-3 inline mr-0.5"}),E(e.cost)]})]}),e.cost_breakdown&&e.cost_breakdown.operations&&(0,Rs.jsxs)("div",{className:"mt-1 space-y-1",children:[e.cost_breakdown.operations.map((e,t)=>(0,Rs.jsxs)("div",{className:"text-xs text-gray-600 flex items-center justify-between",children:[(0,Rs.jsxs)("span",{className:"capitalize",children:[e.operation.replace(/_/g," "),e.details&&e.details.model&&(0,Rs.jsxs)("span",{className:"text-gray-400 ml-1",children:["(",e.details.model,")"]})]}),(0,Rs.jsx)("span",{className:"text-gray-500",children:E(e.total_cost)})]},t)),e.cost_breakdown.operations.length>1&&(0,Rs.jsxs)("div",{className:"text-xs font-medium text-gray-700 flex items-center justify-between pt-1 border-t border-gray-100",children:[(0,Rs.jsx)("span",{children:"Total"}),(0,Rs.jsx)("span",{children:E(e.cost_breakdown.final_cost)})]})]})]})]}),(0,Rs.jsxs)("div",{className:"flex items-center mt-1 space-x-2",children:[(0,Rs.jsx)("span",{className:"text-xs text-gray-500",children:new Date(e.timestamp).toLocaleTimeString()}),(0,Rs.jsx)("button",{onClick:()=>((e,t)=>{navigator.clipboard.writeText(e),N(t),setTimeout(()=>N(null),2e3),sr.success("Copied to clipboard")})(e.content,t),className:"text-gray-400 hover:text-gray-600",title:"Copy message",children:w===t?(0,Rs.jsx)(Mn,{className:"w-3 h-3 text-green-500"}):(0,Rs.jsx)(Rn,{className:"w-3 h-3"})})]})]})]})},t)),h&&(0,Rs.jsx)("div",{className:"flex justify-start",children:(0,Rs.jsxs)("div",{className:"flex gap-3 max-w-3xl",children:[(0,Rs.jsx)("div",{className:"flex-shrink-0 w-8 h-8 rounded-full bg-gray-200 flex items-center justify-center",children:(0,Rs.jsx)(Vs,{className:"w-5 h-5 text-gray-600"})}),(0,Rs.jsx)("div",{className:"bg-white border border-gray-200 rounded-lg px-4 py-3",children:(0,Rs.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Rs.jsx)(Fn,{className:"w-4 h-4 animate-spin text-gray-400"}),(0,Rs.jsx)("span",{className:"text-sm text-gray-500",children:"Thinking..."})]})})]})}),(0,Rs.jsx)("div",{ref:e})]}):(0,Rs.jsx)("div",{className:"h-full flex items-center justify-center",children:(0,Rs.jsxs)("div",{className:"text-center",children:[(0,Rs.jsx)(Vs,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),(0,Rs.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Select an Agent"}),(0,Rs.jsx)("p",{className:"text-sm text-gray-500",children:"Choose an agent from the dropdown to start testing"})]})})}),a&&(0,Rs.jsx)("div",{className:"border-t border-gray-200 bg-white px-6 py-4",children:(0,Rs.jsx)("form",{onSubmit:async e=>{if(e.preventDefault(),!m.trim()||h||!a)return;const t={role:"user",content:m.trim(),timestamp:(new Date).toISOString()};u(e=>[...e,t]),p(""),x(!0);try{const e=await(e=>Ms.post("/chat/message",e))({session_id:f,agent_id:a,message:m.trim()}),t=e.data.data;!f&&t.session_id&&g(t.session_id);const r={role:"assistant",content:t.response.text,html:t.response.html,markdown:t.response.markdown,timestamp:(new Date).toISOString(),sources:t.sources||[],images:t.images||[],function_calls:t.function_calls||[],cost:t.cost,cost_breakdown:t.cost_breakdown,context_used:t.context_used,agent_metadata:t.agent_metadata};u(e=>[...e,r]),_(e=>e+(t.cost||0))}catch(n){var r,s;console.error("Chat error:",n);const e={role:"assistant",content:"Sorry, I encountered an error. Please try again.",timestamp:(new Date).toISOString(),error:!0};u(t=>[...t,e]),sr.error((null===(r=n.response)||void 0===r||null===(s=r.data)||void 0===s?void 0:s.error)||"Failed to send message")}finally{x(!1)}},className:"max-w-4xl mx-auto",children:(0,Rs.jsxs)("div",{className:"flex space-x-3",children:[(0,Rs.jsx)("input",{type:"text",value:m,onChange:e=>p(e.target.value),disabled:h||!a,placeholder:h?"Waiting for response...":"Type your message...",className:"flex-1 border border-gray-300 rounded-lg px-4 py-3 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent disabled:bg-gray-100"}),(0,Rs.jsx)("button",{type:"submit",disabled:h||!m.trim()||!a,className:"inline-flex items-center px-6 py-3 border border-transparent rounded-lg shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700 disabled:opacity-50 disabled:cursor-not-allowed",children:h?(0,Rs.jsxs)(Rs.Fragment,{children:[(0,Rs.jsx)(Fn,{className:"w-4 h-4 mr-2 animate-spin"}),"Sending"]}):(0,Rs.jsxs)(Rs.Fragment,{children:[(0,Rs.jsx)(Ln,{className:"w-4 h-4 mr-2"}),"Send"]})})]})})})]})})]})},In=qs("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]),zn=qs("Store",[["path",{d:"m2 7 4.41-4.41A2 2 0 0 1 7.83 2h8.34a2 2 0 0 1 1.42.59L22 7",key:"ztvudi"}],["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["path",{d:"M15 22v-4a2 2 0 0 0-2-2h-2a2 2 0 0 0-2 2v4",key:"2ebpfo"}],["path",{d:"M2 7h20",key:"1fcdvo"}],["path",{d:"M22 7v3a2 2 0 0 1-2 2v0a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 16 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 12 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 8 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 4 12v0a2 2 0 0 1-2-2V7",key:"jon5kx"}]]),Un=qs("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),Bn=qs("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),qn=qs("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]),Hn=()=>{var e,t,r,a;const{user:s,logout:l}=Ls(),i=Z(),[o,c]=n.useState(!1),d=(()=>{const e=[{name:"Dashboard",href:"/",icon:In,roles:["super_admin","admin","agent_manager","client"]},{name:"Agents",href:"/agents",icon:Vs,roles:["super_admin","admin","agent_manager","client"]},{name:"Knowledge Base",href:"/knowledge",icon:En,roles:["super_admin","admin","agent_manager","client"]},{name:"Shopify",href:"/shopify",icon:zn,roles:["super_admin","admin","agent_manager"]},{name:"Live Monitor",href:"/monitor",icon:jn,roles:["super_admin","admin","agent_manager"]},{name:"Credits",href:"/credits",icon:Hs,roles:["super_admin","admin"]},{name:"Calls",href:"/calls",icon:Ws,roles:["super_admin","admin","agent_manager","client"]},{name:"Users",href:"/users",icon:Un,roles:["super_admin","admin"]},{name:"Test Call",href:"/test",icon:kn,roles:["super_admin","admin","agent_manager"]},{name:"Test Chat",href:"/agent-test",icon:Xs,roles:["super_admin","admin","agent_manager"]}];return null!==s&&void 0!==s&&s.role?e.filter(e=>e.roles.includes(s.role)):e})(),u=e=>"/"===e?"/"===i.pathname:i.pathname.startsWith(e);return(0,Rs.jsxs)("div",{className:"min-h-screen bg-gray-100",children:[(0,Rs.jsxs)("div",{className:"fixed inset-0 z-40 lg:hidden ".concat(o?"":"hidden"),children:[(0,Rs.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-75",onClick:()=>c(!1)}),(0,Rs.jsxs)("div",{className:"fixed inset-y-0 left-0 flex flex-col w-64 bg-white",children:[(0,Rs.jsxs)("div",{className:"flex items-center justify-between h-16 px-4 border-b",children:[(0,Rs.jsx)("span",{className:"text-xl font-bold text-primary-600",children:"Agent Manager"}),(0,Rs.jsx)("button",{onClick:()=>c(!1),children:(0,Rs.jsx)(tn,{className:"w-6 h-6"})})]}),(0,Rs.jsx)("div",{className:"p-4 border-b border-gray-200",children:(0,Rs.jsxs)("div",{className:"flex items-center",children:[(0,Rs.jsx)("div",{className:"flex-shrink-0 h-10 w-10 rounded-full bg-primary-100 flex items-center justify-center",children:(0,Rs.jsx)("span",{className:"text-primary-600 font-medium",children:null===s||void 0===s||null===(e=s.name)||void 0===e?void 0:e.charAt(0).toUpperCase()})}),(0,Rs.jsxs)("div",{className:"ml-3 flex-1 min-w-0",children:[(0,Rs.jsx)("p",{className:"text-sm font-medium text-gray-900 truncate",children:null===s||void 0===s?void 0:s.name}),(0,Rs.jsx)("p",{className:"text-xs text-gray-500 truncate capitalize",children:null===s||void 0===s||null===(t=s.role)||void 0===t?void 0:t.replace("_"," ")})]})]})}),(0,Rs.jsx)("nav",{className:"flex-1 px-2 py-4 space-y-1 overflow-y-auto",children:d.map(e=>{const t=e.icon;return(0,Rs.jsxs)(Re,{to:e.href,className:"flex items-center px-4 py-2 text-sm font-medium rounded-md ".concat(u(e.href)?"bg-primary-100 text-primary-700":"text-gray-600 hover:bg-gray-50"),onClick:()=>c(!1),children:[(0,Rs.jsx)(t,{className:"w-5 h-5 mr-3"}),e.name]},e.name)})}),(0,Rs.jsx)("div",{className:"p-4 border-t",children:(0,Rs.jsxs)("button",{onClick:l,className:"flex items-center w-full px-4 py-2 text-sm font-medium text-gray-600 rounded-md hover:bg-gray-50",children:[(0,Rs.jsx)(Bn,{className:"w-5 h-5 mr-3"}),"Logout"]})})]})]}),(0,Rs.jsx)("div",{className:"hidden lg:fixed lg:inset-y-0 lg:flex lg:w-64 lg:flex-col",children:(0,Rs.jsxs)("div",{className:"flex flex-col flex-1 min-h-0 bg-white border-r",children:[(0,Rs.jsx)("div",{className:"flex items-center h-16 px-4 border-b",children:(0,Rs.jsx)("span",{className:"text-xl font-bold text-primary-600",children:"Agent Manager"})}),(0,Rs.jsxs)("div",{className:"p-4 border-b border-gray-200",children:[(0,Rs.jsxs)("div",{className:"flex items-center",children:[(0,Rs.jsx)("div",{className:"flex-shrink-0 h-10 w-10 rounded-full bg-primary-100 flex items-center justify-center",children:(0,Rs.jsx)("span",{className:"text-primary-600 font-medium",children:null===s||void 0===s||null===(r=s.name)||void 0===r?void 0:r.charAt(0).toUpperCase()})}),(0,Rs.jsxs)("div",{className:"ml-3 flex-1 min-w-0",children:[(0,Rs.jsx)("p",{className:"text-sm font-medium text-gray-900 truncate",children:null===s||void 0===s?void 0:s.name}),(0,Rs.jsx)("p",{className:"text-xs text-gray-500 truncate capitalize",children:null===s||void 0===s||null===(a=s.role)||void 0===a?void 0:a.replace("_"," ")})]})]}),(null===s||void 0===s?void 0:s.tenant_name)&&(0,Rs.jsx)("div",{className:"mt-2 text-xs text-gray-500 truncate",children:s.tenant_name})]}),(0,Rs.jsx)("nav",{className:"flex-1 px-2 py-4 space-y-1 overflow-y-auto",children:d.map(e=>{const t=e.icon;return(0,Rs.jsxs)(Re,{to:e.href,className:"flex items-center px-4 py-2 text-sm font-medium rounded-md ".concat(u(e.href)?"bg-primary-100 text-primary-700":"text-gray-600 hover:bg-gray-50"),children:[(0,Rs.jsx)(t,{className:"w-5 h-5 mr-3"}),e.name]},e.name)})}),(0,Rs.jsxs)("div",{className:"flex items-center px-4 py-4 border-t",children:[(0,Rs.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,Rs.jsx)("p",{className:"text-sm font-medium text-gray-900 truncate",children:null===s||void 0===s?void 0:s.name}),(0,Rs.jsx)("p",{className:"text-xs text-gray-500 truncate",children:null===s||void 0===s?void 0:s.email})]}),(0,Rs.jsx)("button",{onClick:l,className:"p-2 text-gray-400 hover:text-gray-600",title:"Logout",children:(0,Rs.jsx)(Bn,{className:"w-5 h-5"})})]})]})}),(0,Rs.jsxs)("div",{className:"lg:pl-64",children:[(0,Rs.jsxs)("div",{className:"sticky top-0 z-10 flex h-16 bg-white border-b lg:hidden",children:[(0,Rs.jsx)("button",{onClick:()=>c(!0),className:"px-4 text-gray-500 focus:outline-none",children:(0,Rs.jsx)(qn,{className:"w-6 h-6"})}),(0,Rs.jsx)("div",{className:"flex items-center flex-1 px-4",children:(0,Rs.jsx)("span",{className:"text-xl font-bold text-primary-600",children:"Agent Manager"})})]}),(0,Rs.jsx)("main",{className:"py-6",children:(0,Rs.jsx)("div",{className:"px-4 mx-auto max-w-7xl sm:px-6 lg:px-8",children:(0,Rs.jsx)(ve,{})})})]})]})},Vn=qs("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),Wn=qs("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]),$n=qs("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]),Kn=qs("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]]),Qn=()=>{const[e,t]=(0,n.useState)([]),[r,a]=(0,n.useState)(!0),[s,l]=(0,n.useState)(""),[i,o]=(0,n.useState)("all");(0,n.useEffect)(()=>{c()},[i]);const c=async()=>{try{var e,r;a(!0);const s=(null===(e=(await nn({status:"all"!==i?i:void 0})).data)||void 0===e||null===(r=e.data)||void 0===r?void 0:r.knowledge_bases)||[];t(s)}catch(s){sr.error("Failed to load knowledge bases"),console.error(s),t([])}finally{a(!1)}},d=async e=>{if(window.confirm("Are you sure? This will delete all documents and data."))try{await(e=>Ms.delete("/knowledge/".concat(e)))(e),sr.success("Knowledge base deleted"),c()}catch(t){sr.error("Failed to delete knowledge base"),console.error(t)}},u=e.filter(e=>{var t;return e.name.toLowerCase().includes(s.toLowerCase())||(null===(t=e.description)||void 0===t?void 0:t.toLowerCase().includes(s.toLowerCase()))});return r?(0,Rs.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,Rs.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):(0,Rs.jsxs)("div",{className:"space-y-6",children:[(0,Rs.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Rs.jsxs)("div",{children:[(0,Rs.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Knowledge Bases"}),(0,Rs.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Manage documents and knowledge for your AI agents"})]}),(0,Rs.jsxs)(Re,{to:"/knowledge/new",className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700",children:[(0,Rs.jsx)(Qs,{className:"w-4 h-4 mr-2"}),"New Knowledge Base"]})]}),(0,Rs.jsxs)("div",{className:"flex gap-4",children:[(0,Rs.jsxs)("div",{className:"flex-1 relative",children:[(0,Rs.jsx)(Vn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),(0,Rs.jsx)("input",{type:"text",placeholder:"Search knowledge bases...",value:s,onChange:e=>l(e.target.value),className:"pl-10 w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500"})]}),(0,Rs.jsxs)("select",{value:i,onChange:e=>o(e.target.value),className:"rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500",children:[(0,Rs.jsx)("option",{value:"all",children:"All Status"}),(0,Rs.jsx)("option",{value:"active",children:"Active"}),(0,Rs.jsx)("option",{value:"inactive",children:"Inactive"})]})]}),0===u.length?(0,Rs.jsxs)("div",{className:"text-center py-12",children:[(0,Rs.jsx)(En,{className:"mx-auto h-12 w-12 text-gray-400"}),(0,Rs.jsx)("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No knowledge bases"}),(0,Rs.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Get started by creating a new knowledge base"}),(0,Rs.jsx)("div",{className:"mt-6",children:(0,Rs.jsxs)(Re,{to:"/knowledge/new",className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700",children:[(0,Rs.jsx)(Qs,{className:"w-4 h-4 mr-2"}),"New Knowledge Base"]})})]}):(0,Rs.jsx)("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-3",children:u.map(e=>{var t,r,a,s;return(0,Rs.jsx)("div",{className:"bg-white overflow-hidden shadow rounded-lg hover:shadow-lg transition-shadow",children:(0,Rs.jsxs)("div",{className:"p-6",children:[(0,Rs.jsx)("div",{className:"flex items-center justify-between mb-4",children:(0,Rs.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,Rs.jsx)("div",{className:"flex-shrink-0",children:(0,Rs.jsx)(Wn,{className:"h-8 w-8 text-primary-600"})}),(0,Rs.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,Rs.jsx)("h3",{className:"text-lg font-medium text-gray-900 truncate",children:e.name}),(0,Rs.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat("active"===e.status?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"),children:e.status})]})]})}),(0,Rs.jsx)("p",{className:"text-sm text-gray-500 mb-4 line-clamp-2",children:e.description||"No description"}),(0,Rs.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,Rs.jsx)("h3",{children:e.name}),(0,Rs.jsxs)("div",{className:"grid grid-cols-2 gap-4 mt-4",children:[(0,Rs.jsxs)("div",{children:[(0,Rs.jsx)("p",{className:"text-gray-600",children:"Documents"}),(0,Rs.jsx)("p",{className:"text-2xl font-bold",children:(null===(t=e.stats)||void 0===t?void 0:t.document_count)||0})]}),(0,Rs.jsxs)("div",{children:[(0,Rs.jsx)("p",{className:"text-gray-600",children:"Chunks"}),(0,Rs.jsx)("p",{className:"text-2xl font-bold",children:(null===(r=e.stats)||void 0===r?void 0:r.chunk_count)||0})]}),(0,Rs.jsxs)("div",{children:[(0,Rs.jsx)("p",{className:"text-gray-600",children:"Images"}),(0,Rs.jsx)("p",{className:"text-2xl font-bold",children:(null===(a=e.stats)||void 0===a?void 0:a.image_count)||0})]}),(0,Rs.jsxs)("div",{children:[(0,Rs.jsx)("p",{className:"text-gray-600",children:"Products"}),(0,Rs.jsx)("p",{className:"text-2xl font-bold",children:(null===(s=e.stats)||void 0===s?void 0:s.product_count)||0})]})]})]}),(0,Rs.jsxs)("div",{className:"flex items-center text-xs text-gray-400 mb-4",children:[(0,Rs.jsx)(bn,{className:"w-3 h-3 mr-1"}),"Updated ",new Date(e.updated_at).toLocaleDateString()]}),(0,Rs.jsxs)("div",{className:"flex space-x-2",children:[(0,Rs.jsxs)(Re,{to:"/knowledge/".concat(e.id,"/documents"),className:"flex-1 inline-flex justify-center items-center px-3 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50",children:[(0,Rs.jsx)($n,{className:"w-4 h-4 mr-2"}),"Documents"]}),(0,Rs.jsx)(Re,{to:"/knowledge/".concat(e.id,"/edit"),className:"inline-flex items-center px-3 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50",children:(0,Rs.jsx)(Kn,{className:"w-4 h-4"})}),(0,Rs.jsx)("button",{onClick:()=>d(e.id),className:"inline-flex items-center px-3 py-2 border border-red-300 shadow-sm text-sm font-medium rounded-md text-red-700 bg-white hover:bg-red-50",children:(0,Rs.jsx)(Zs,{className:"w-4 h-4"})})]})]})},e.id)})})]})},Jn=qs("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),Gn=qs("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),Yn=()=>{const e=te(),{id:t}=ae(),r=!!t,[a,s]=(0,n.useState)(!1),[l,i]=(0,n.useState)({name:"",description:"",type:"general",status:"active",settings:{chunk_size:500,chunk_overlap:50,embedding_model:"text-embedding-3-small"}});(0,n.useEffect)(()=>{r&&o()},[t]);const o=async()=>{try{s(!0);const e=(await ln(t)).data.data;i({name:e.name,description:e.description||"",type:e.type,status:e.status,settings:e.settings||l.settings})}catch(e){sr.error("Failed to load knowledge base"),console.error(e)}finally{s(!1)}};return(0,Rs.jsxs)("div",{className:"max-w-3xl mx-auto space-y-6",children:[(0,Rs.jsx)("div",{className:"flex items-center justify-between",children:(0,Rs.jsxs)("div",{children:[(0,Rs.jsxs)("button",{onClick:()=>e("/knowledge"),className:"flex items-center text-sm text-gray-600 hover:text-gray-900 mb-2",children:[(0,Rs.jsx)(Jn,{className:"w-4 h-4 mr-1"}),"Back to Knowledge Bases"]}),(0,Rs.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:r?"Edit Knowledge Base":"New Knowledge Base"})]})}),(0,Rs.jsxs)("form",{onSubmit:async a=>{if(a.preventDefault(),l.name.trim())try{if(s(!0),!r){const t=await(e=>Ms.post("/knowledge",e))(l);return sr.success("Knowledge base created"),void e("/knowledge/".concat(t.data.data.id,"/documents"))}await((e,t)=>Ms.put("/knowledge/".concat(e),t))(t,l),sr.success("Knowledge base updated"),e("/knowledge")}catch(n){sr.error(r?"Failed to update":"Failed to create"),console.error(n)}finally{s(!1)}else sr.error("Name is required")},className:"bg-white shadow rounded-lg",children:[(0,Rs.jsxs)("div",{className:"p-6 space-y-6",children:[(0,Rs.jsxs)("div",{children:[(0,Rs.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Basic Information"}),(0,Rs.jsxs)("div",{className:"space-y-4",children:[(0,Rs.jsxs)("div",{children:[(0,Rs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name *"}),(0,Rs.jsx)("input",{type:"text",value:l.name,onChange:e=>i(He(He({},l),{},{name:e.target.value})),className:"w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500",placeholder:"e.g., Product Documentation",required:!0})]}),(0,Rs.jsxs)("div",{children:[(0,Rs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),(0,Rs.jsx)("textarea",{value:l.description,onChange:e=>i(He(He({},l),{},{description:e.target.value})),rows:3,className:"w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500",placeholder:"Describe what this knowledge base contains..."})]}),(0,Rs.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,Rs.jsxs)("div",{children:[(0,Rs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Type"}),(0,Rs.jsxs)("select",{value:l.type,onChange:e=>i(He(He({},l),{},{type:e.target.value})),className:"w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500",children:[(0,Rs.jsx)("option",{value:"general",children:"General"}),(0,Rs.jsx)("option",{value:"documentation",children:"Documentation"}),(0,Rs.jsx)("option",{value:"faq",children:"FAQ"}),(0,Rs.jsx)("option",{value:"support",children:"Support"}),(0,Rs.jsx)("option",{value:"product_catalog",children:"Product Catalog"})]})]}),(0,Rs.jsxs)("div",{children:[(0,Rs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),(0,Rs.jsxs)("select",{value:l.status,onChange:e=>i(He(He({},l),{},{status:e.target.value})),className:"w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500",children:[(0,Rs.jsx)("option",{value:"active",children:"Active"}),(0,Rs.jsx)("option",{value:"inactive",children:"Inactive"})]})]})]})]})]}),(0,Rs.jsxs)("div",{children:[(0,Rs.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Processing Settings"}),(0,Rs.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-4",children:(0,Rs.jsxs)("div",{className:"flex",children:[(0,Rs.jsx)(Gn,{className:"w-5 h-5 text-blue-600 mr-2 flex-shrink-0"}),(0,Rs.jsx)("div",{className:"text-sm text-blue-700",children:"These settings control how documents are processed and indexed. Default values work well for most cases."})]})}),(0,Rs.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,Rs.jsxs)("div",{children:[(0,Rs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Chunk Size (tokens)"}),(0,Rs.jsx)("input",{type:"number",value:l.settings.chunk_size,onChange:e=>i(He(He({},l),{},{settings:He(He({},l.settings),{},{chunk_size:parseInt(e.target.value)})})),min:100,max:2e3,className:"w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500"}),(0,Rs.jsx)("p",{className:"mt-1 text-xs text-gray-500",children:"Recommended: 500"})]}),(0,Rs.jsxs)("div",{children:[(0,Rs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Chunk Overlap (tokens)"}),(0,Rs.jsx)("input",{type:"number",value:l.settings.chunk_overlap,onChange:e=>i(He(He({},l),{},{settings:He(He({},l.settings),{},{chunk_overlap:parseInt(e.target.value)})})),min:0,max:200,className:"w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500"}),(0,Rs.jsx)("p",{className:"mt-1 text-xs text-gray-500",children:"Recommended: 50"})]})]}),(0,Rs.jsxs)("div",{className:"mt-4",children:[(0,Rs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Embedding Model"}),(0,Rs.jsxs)("select",{value:l.settings.embedding_model,onChange:e=>i(He(He({},l),{},{settings:He(He({},l.settings),{},{embedding_model:e.target.value})})),className:"w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500",children:[(0,Rs.jsx)("option",{value:"text-embedding-3-small",children:"text-embedding-3-small (Fast, Affordable)"}),(0,Rs.jsx)("option",{value:"text-embedding-3-large",children:"text-embedding-3-large (High Quality)"}),(0,Rs.jsx)("option",{value:"text-embedding-ada-002",children:"text-embedding-ada-002 (Legacy)"})]})]})]})]}),(0,Rs.jsxs)("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-200 flex items-center justify-between rounded-b-lg",children:[(0,Rs.jsx)("button",{type:"button",onClick:()=>e("/knowledge"),className:"px-4 py-2 text-sm font-medium text-gray-700 hover:text-gray-900",children:"Cancel"}),(0,Rs.jsxs)("button",{type:"submit",disabled:a,className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700 disabled:opacity-50",children:[(0,Rs.jsx)(rn,{className:"w-4 h-4 mr-2"}),a?"Saving...":r?"Update":"Create"]})]})]})]})},Xn=qs("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),Zn=qs("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]),el=qs("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),tl=e=>{let{kbId:t,onComplete:r}=e;const[a,s]=(0,n.useState)([]),[l,i]=(0,n.useState)(!1),[o,c]=(0,n.useState)({}),[d,u]=(0,n.useState)(!1),m=(0,n.useCallback)(e=>{e.preventDefault(),e.stopPropagation(),"dragenter"===e.type||"dragover"===e.type?u(!0):"dragleave"===e.type&&u(!1)},[]),p=(0,n.useCallback)(e=>{e.preventDefault(),e.stopPropagation(),u(!1);const t=Array.from(e.dataTransfer.files);h(t)},[]),h=e=>{const t=e.filter(e=>["application/pdf","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.openxmlformats-officedocument.presentationml.presentation","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","text/plain","text/html","text/markdown","application/json"].includes(e.type)||e.name.match(/\.(pdf|docx|pptx|xlsx|txt|html|md|json)$/i)?!(e.size>52428800)||(sr.error("".concat(e.name,": File too large (max 50MB)")),!1):(sr.error("".concat(e.name,": Invalid file type")),!1));s(e=>[...e,...t.map(e=>({file:e,id:Math.random().toString(36).substr(2,9),status:"pending"}))])},x=e=>{if(0===e)return"0 Bytes";const t=Math.floor(Math.log(e)/Math.log(1024));return Math.round(e/Math.pow(1024,t)*100)/100+" "+["Bytes","KB","MB","GB"][t]};return(0,Rs.jsxs)("div",{className:"space-y-6",children:[(0,Rs.jsxs)("div",{className:"relative border-2 border-dashed rounded-lg p-12 text-center ".concat(d?"border-primary-500 bg-primary-50":"border-gray-300 hover:border-gray-400"),onDragEnter:m,onDragLeave:m,onDragOver:m,onDrop:p,children:[(0,Rs.jsx)(Xn,{className:"mx-auto h-12 w-12 text-gray-400"}),(0,Rs.jsxs)("div",{className:"mt-4",children:[(0,Rs.jsxs)("label",{htmlFor:"file-upload",className:"cursor-pointer",children:[(0,Rs.jsx)("span",{className:"text-primary-600 hover:text-primary-500 font-medium",children:"Choose files"}),(0,Rs.jsx)("input",{id:"file-upload",type:"file",multiple:!0,className:"sr-only",onChange:e=>{const t=Array.from(e.target.files);h(t)},accept:".pdf,.docx,.pptx,.xlsx,.txt,.html,.md,.json"})]}),(0,Rs.jsx)("span",{className:"text-gray-600",children:" or drag and drop"})]}),(0,Rs.jsx)("p",{className:"mt-2 text-xs text-gray-500",children:"PDF, DOCX, PPTX, XLSX, TXT, HTML, MD, JSON up to 50MB"})]}),a.length>0&&(0,Rs.jsxs)("div",{className:"space-y-3",children:[(0,Rs.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Rs.jsxs)("h3",{className:"text-sm font-medium text-gray-900",children:["Files (",a.length,")"]}),!l&&(0,Rs.jsx)("button",{onClick:()=>s([]),className:"text-sm text-gray-500 hover:text-gray-700",children:"Clear all"})]}),(0,Rs.jsx)("div",{className:"space-y-2",children:a.map(e=>(0,Rs.jsxs)("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[(0,Rs.jsxs)("div",{className:"flex items-center flex-1 min-w-0",children:[(0,Rs.jsx)($n,{className:"w-5 h-5 text-gray-400 flex-shrink-0"}),(0,Rs.jsxs)("div",{className:"ml-3 flex-1 min-w-0",children:[(0,Rs.jsx)("p",{className:"text-sm font-medium text-gray-900 truncate",children:e.file.name}),(0,Rs.jsx)("p",{className:"text-xs text-gray-500",children:x(e.file.size)})]})]}),(0,Rs.jsxs)("div",{className:"flex items-center ml-4",children:["pending"===e.status&&!l&&(0,Rs.jsx)("button",{onClick:()=>{return t=e.id,void s(e=>e.filter(e=>e.id!==t));var t},className:"text-gray-400 hover:text-gray-600",children:(0,Rs.jsx)(tn,{className:"w-5 h-5"})}),"uploading"===e.status&&(0,Rs.jsxs)("div",{className:"flex items-center",children:[(0,Rs.jsx)("div",{className:"w-32 bg-gray-200 rounded-full h-2 mr-3",children:(0,Rs.jsx)("div",{className:"bg-primary-600 h-2 rounded-full transition-all",style:{width:"".concat(o[e.id]||0,"%")}})}),(0,Rs.jsxs)("span",{className:"text-xs text-gray-500",children:[o[e.id]||0,"%"]})]}),"completed"===e.status&&(0,Rs.jsx)(sn,{className:"w-5 h-5 text-green-500"}),"failed"===e.status&&(0,Rs.jsx)(Gn,{className:"w-5 h-5 text-red-500"})]})]},e.id))})]}),a.length>0&&(0,Rs.jsx)("div",{className:"flex justify-end",children:(0,Rs.jsxs)("button",{onClick:async()=>{if(0===a.length)return void sr.error("Please select files to upload");i(!0);for(const r of a)try{s(e=>e.map(e=>e.id===r.id?He(He({},e),{},{status:"uploading"}):e));const e=new FormData;e.append("file",r.file),e.append("metadata",JSON.stringify({source:"upload",uploaded_at:(new Date).toISOString()})),await on(t,e,e=>{const t=Math.round(100*e.loaded/e.total);c(e=>He(He({},e),{},{[r.id]:t}))}),s(e=>e.map(e=>e.id===r.id?He(He({},e),{},{status:"completed"}):e)),sr.success("".concat(r.file.name," uploaded successfully"))}catch(n){console.error("Error uploading ".concat(r.file.name,":"),n),s(e=>e.map(e=>e.id===r.id?He(He({},e),{},{status:"failed"}):e)),sr.error("Failed to upload ".concat(r.file.name))}i(!1);const e=a.every(e=>"completed"===e.status||"failed"===e.status);e&&r&&setTimeout(r,1e3)},disabled:l,className:"inline-flex items-center px-6 py-3 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700 disabled:opacity-50 disabled:cursor-not-allowed",children:[(0,Rs.jsx)(Xn,{className:"w-4 h-4 mr-2"}),l?"Uploading...":"Upload ".concat(a.length," file").concat(a.length>1?"s":"")]})})]})},rl=qs("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]),al=e=>{var t;let{kbId:r,onComplete:a}=e;const[s,l]=(0,n.useState)("url"),[i,o]=(0,n.useState)(""),[c,d]=(0,n.useState)(2),[u,m]=(0,n.useState)(20),[p,h]=(0,n.useState)(!1),[x,f]=(0,n.useState)(!1),[g,y]=(0,n.useState)(null),[v,b]=(0,n.useState)(null);return(0,Rs.jsxs)("div",{className:"space-y-6",children:[(0,Rs.jsxs)("div",{className:"flex gap-4",children:[(0,Rs.jsx)("button",{onClick:()=>l("url"),className:"flex-1 p-4 border-2 rounded-lg text-left transition-colors ".concat("url"===s?"border-primary-500 bg-primary-50":"border-gray-200 hover:border-gray-300"),children:(0,Rs.jsxs)("div",{className:"flex items-center",children:[(0,Rs.jsx)(Zn,{className:"w-5 h-5 text-primary-600 mr-3"}),(0,Rs.jsxs)("div",{children:[(0,Rs.jsx)("div",{className:"font-medium text-gray-900",children:"Single URL"}),(0,Rs.jsx)("div",{className:"text-sm text-gray-500",children:"Scrape a URL and follow links"})]})]})}),(0,Rs.jsx)("button",{onClick:()=>l("sitemap"),className:"flex-1 p-4 border-2 rounded-lg text-left transition-colors ".concat("sitemap"===s?"border-primary-500 bg-primary-50":"border-gray-200 hover:border-gray-300"),children:(0,Rs.jsxs)("div",{className:"flex items-center",children:[(0,Rs.jsx)($n,{className:"w-5 h-5 text-primary-600 mr-3"}),(0,Rs.jsxs)("div",{children:[(0,Rs.jsx)("div",{className:"font-medium text-gray-900",children:"Sitemap"}),(0,Rs.jsx)("div",{className:"text-sm text-gray-500",children:"Import from sitemap.xml"})]})]})})]}),(0,Rs.jsxs)("div",{children:[(0,Rs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"url"===s?"Website URL":"Sitemap URL"}),(0,Rs.jsxs)("div",{className:"flex gap-2",children:[(0,Rs.jsxs)("div",{className:"flex-1 relative",children:[(0,Rs.jsx)(rl,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),(0,Rs.jsx)("input",{type:"url",value:i,onChange:e=>o(e.target.value),placeholder:"url"===s?"https://example.com":"https://example.com/sitemap.xml",className:"pl-10 w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500"})]}),(0,Rs.jsx)("button",{onClick:async()=>{if(i.trim())try{h(!0),y(null);const e=await(e=>Ms.post("/knowledge/test-url",{url:e}))(i);y(e.data.data),e.data.data.accessible?sr.success("URL is accessible!"):sr.error("URL is not accessible")}catch(e){sr.error("Failed to test URL"),console.error(e)}finally{h(!1)}else sr.error("Please enter a URL")},disabled:p||!i.trim(),className:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50",children:p?(0,Rs.jsxs)(Rs.Fragment,{children:[(0,Rs.jsx)(Fn,{className:"w-4 h-4 mr-2 animate-spin inline"}),"Testing..."]}):"Test URL"})]}),g&&(0,Rs.jsx)("div",{className:"mt-2 p-3 rounded-md ".concat(g.accessible?"bg-green-50 text-green-800":"bg-red-50 text-red-800"),children:(0,Rs.jsxs)("div",{className:"flex items-center",children:[g.accessible?(0,Rs.jsx)(sn,{className:"w-5 h-5 mr-2"}):(0,Rs.jsx)(Gn,{className:"w-5 h-5 mr-2"}),(0,Rs.jsx)("div",{className:"text-sm",children:g.accessible?(0,Rs.jsxs)(Rs.Fragment,{children:["Accessible \u2022 Status: ",g.status_code," \u2022 Type: ",g.content_type]}):(0,Rs.jsxs)(Rs.Fragment,{children:["Not accessible \u2022 ",g.error||"Status: ".concat(g.status_code)]})})]})})]}),"url"===s&&(0,Rs.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,Rs.jsxs)("div",{children:[(0,Rs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Max Depth"}),(0,Rs.jsx)("input",{type:"number",value:c,onChange:e=>d(parseInt(e.target.value)),min:1,max:5,className:"w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500"}),(0,Rs.jsx)("p",{className:"mt-1 text-xs text-gray-500",children:"How many levels of links to follow (1-5)"})]}),(0,Rs.jsxs)("div",{children:[(0,Rs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Max Pages"}),(0,Rs.jsx)("input",{type:"number",value:u,onChange:e=>m(parseInt(e.target.value)),min:1,max:100,className:"w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500"}),(0,Rs.jsx)("p",{className:"mt-1 text-xs text-gray-500",children:"Maximum pages to scrape (1-100)"})]})]}),"sitemap"===s&&(0,Rs.jsxs)("div",{children:[(0,Rs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Max Pages"}),(0,Rs.jsx)("input",{type:"number",value:u,onChange:e=>m(parseInt(e.target.value)),min:1,max:100,className:"w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500"}),(0,Rs.jsx)("p",{className:"mt-1 text-xs text-gray-500",children:"Maximum pages to import from sitemap (1-100)"})]}),(0,Rs.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:(0,Rs.jsxs)("div",{className:"flex",children:[(0,Rs.jsx)(Gn,{className:"w-5 h-5 text-blue-600 mr-2 flex-shrink-0"}),(0,Rs.jsxs)("div",{className:"text-sm text-blue-700",children:[(0,Rs.jsx)("p",{className:"font-medium mb-1",children:"How web scraping works:"}),(0,Rs.jsxs)("ul",{className:"list-disc list-inside space-y-1",children:[(0,Rs.jsx)("li",{children:"Content is extracted from HTML pages"}),(0,Rs.jsx)("li",{children:"Text is cleaned and processed automatically"}),(0,Rs.jsx)("li",{children:"Documents are chunked and embedded for search"}),(0,Rs.jsx)("li",{children:"Process may take several minutes depending on size"})]})]})]})}),(0,Rs.jsx)("div",{className:"flex justify-end",children:(0,Rs.jsx)("button",{onClick:async()=>{if(i.trim())try{let e;f(!0),b(null),e="url"===s?await((e,t,r)=>Ms.post("/knowledge/".concat(e,"/scrape-url"),t,{onUploadProgress:r}))(r,{url:i,max_depth:c,max_pages:u,metadata:{source:"web_scrape",scraped_at:(new Date).toISOString()}}):await((e,t,r)=>Ms.post("/knowledge/".concat(e,"/scrape-sitemap"),t,{onUploadProgress:r}))(r,{sitemap_url:i,max_pages:u,metadata:{source:"sitemap_scrape",scraped_at:(new Date).toISOString()}}),b(e.data.data),sr.success("Scraping completed!"),a&&setTimeout(a,2e3)}catch(e){sr.error("Failed to scrape website"),console.error(e)}finally{f(!1)}else sr.error("Please enter a URL")},disabled:x||!i.trim(),className:"inline-flex items-center px-6 py-3 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700 disabled:opacity-50 disabled:cursor-not-allowed",children:x?(0,Rs.jsxs)(Rs.Fragment,{children:[(0,Rs.jsx)(Fn,{className:"w-4 h-4 mr-2 animate-spin"}),"Scraping..."]}):(0,Rs.jsxs)(Rs.Fragment,{children:[(0,Rs.jsx)(Zn,{className:"w-4 h-4 mr-2"}),"Start Scraping"]})})}),v&&(0,Rs.jsx)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:(0,Rs.jsxs)("div",{className:"flex items-start",children:[(0,Rs.jsx)(sn,{className:"w-5 h-5 text-green-600 mr-2 flex-shrink-0 mt-0.5"}),(0,Rs.jsxs)("div",{className:"text-sm text-green-700",children:[(0,Rs.jsx)("p",{className:"font-medium mb-2",children:"Scraping completed successfully!"}),(0,Rs.jsxs)("div",{className:"space-y-1",children:[(0,Rs.jsxs)("p",{children:["\u2022 ","url"===s?"Pages scraped":"URLs found",": ",v.total_pages_scraped||v.total_urls_found]}),(0,Rs.jsxs)("p",{children:["\u2022 Documents processed: ",v.documents_processed||(null===(t=v.documents)||void 0===t?void 0:t.length)]}),(0,Rs.jsxs)("p",{children:["\u2022 Base URL: ",v.base_url||i]})]})]})]})})]})},sl=e=>{let{kbId:t,onComplete:r}=e;const[a,s]=(0,n.useState)([]),[l,i]=(0,n.useState)(!1),[o,c]=(0,n.useState)({}),[d,u]=(0,n.useState)(!1),m=(0,n.useCallback)(e=>{e.preventDefault(),e.stopPropagation(),"dragenter"===e.type||"dragover"===e.type?u(!0):"dragleave"===e.type&&u(!1)},[]),p=(0,n.useCallback)(e=>{e.preventDefault(),e.stopPropagation(),u(!1);const t=Array.from(e.dataTransfer.files);h(t)},[]),h=e=>{const t=e.filter(e=>["image/jpeg","image/jpg","image/png","image/gif","image/webp"].includes(e.type)?!(e.size>10485760)||(sr.error("".concat(e.name,": Image too large (max 10MB)")),!1):(sr.error("".concat(e.name,": Invalid image type")),!1)).map(e=>({file:e,id:Math.random().toString(36).substr(2,9),status:"pending",preview:URL.createObjectURL(e),metadata:{title:"",description:"",tags:"",category:""}}));s(e=>[...e,...t])},x=(e,t,r)=>{s(a=>a.map(a=>a.id===e?He(He({},a),{},{metadata:He(He({},a.metadata),{},{[t]:r})}):a))},f=e=>{if(0===e)return"0 Bytes";const t=Math.floor(Math.log(e)/Math.log(1024));return Math.round(e/Math.pow(1024,t)*100)/100+" "+["Bytes","KB","MB"][t]};return(0,Rs.jsxs)("div",{className:"space-y-6",children:[(0,Rs.jsxs)("div",{className:"relative border-2 border-dashed rounded-lg p-12 text-center ".concat(d?"border-primary-500 bg-primary-50":"border-gray-300 hover:border-gray-400"),onDragEnter:m,onDragLeave:m,onDragOver:m,onDrop:p,children:[(0,Rs.jsx)(An,{className:"mx-auto h-12 w-12 text-gray-400"}),(0,Rs.jsxs)("div",{className:"mt-4",children:[(0,Rs.jsxs)("label",{htmlFor:"image-upload",className:"cursor-pointer",children:[(0,Rs.jsx)("span",{className:"text-primary-600 hover:text-primary-500 font-medium",children:"Choose images"}),(0,Rs.jsx)("input",{id:"image-upload",type:"file",multiple:!0,className:"sr-only",onChange:e=>{const t=Array.from(e.target.files);h(t)},accept:"image/jpeg,image/jpg,image/png,image/gif,image/webp"})]}),(0,Rs.jsx)("span",{className:"text-gray-600",children:" or drag and drop"})]}),(0,Rs.jsx)("p",{className:"mt-2 text-xs text-gray-500",children:"JPG, PNG, GIF, WEBP up to 10MB"})]}),a.length>0&&(0,Rs.jsxs)("div",{className:"space-y-4",children:[(0,Rs.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Rs.jsxs)("h3",{className:"text-sm font-medium text-gray-900",children:["Images (",a.length,")"]}),!l&&(0,Rs.jsx)("button",{onClick:()=>{a.forEach(e=>URL.revokeObjectURL(e.preview)),s([])},className:"text-sm text-gray-500 hover:text-gray-700",children:"Clear all"})]}),(0,Rs.jsx)("div",{className:"space-y-4",children:a.map(e=>(0,Rs.jsx)("div",{className:"border border-gray-200 rounded-lg p-4 bg-gray-50",children:(0,Rs.jsxs)("div",{className:"flex gap-4",children:[(0,Rs.jsx)("div",{className:"flex-shrink-0",children:(0,Rs.jsx)("img",{src:e.preview,alt:"Preview",className:"w-24 h-24 object-cover rounded"})}),(0,Rs.jsxs)("div",{className:"flex-1 space-y-3",children:[(0,Rs.jsxs)("div",{className:"flex items-start justify-between",children:[(0,Rs.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,Rs.jsx)("p",{className:"text-sm font-medium text-gray-900 truncate",children:e.file.name}),(0,Rs.jsx)("p",{className:"text-xs text-gray-500",children:f(e.file.size)})]}),(0,Rs.jsxs)("div",{className:"flex items-center ml-4",children:["pending"===e.status&&!l&&(0,Rs.jsx)("button",{onClick:()=>{return t=e.id,void s(e=>{const r=e.find(e=>e.id===t);return null!==r&&void 0!==r&&r.preview&&URL.revokeObjectURL(r.preview),e.filter(e=>e.id!==t)});var t},className:"text-gray-400 hover:text-gray-600",children:(0,Rs.jsx)(tn,{className:"w-5 h-5"})}),"uploading"===e.status&&(0,Rs.jsxs)("div",{className:"flex items-center",children:[(0,Rs.jsx)("div",{className:"w-32 bg-gray-200 rounded-full h-2 mr-3",children:(0,Rs.jsx)("div",{className:"bg-primary-600 h-2 rounded-full transition-all",style:{width:"".concat(o[e.id]||0,"%")}})}),(0,Rs.jsxs)("span",{className:"text-xs text-gray-500",children:[o[e.id]||0,"%"]})]}),"completed"===e.status&&(0,Rs.jsx)(sn,{className:"w-5 h-5 text-green-500"}),"failed"===e.status&&(0,Rs.jsx)(Gn,{className:"w-5 h-5 text-red-500"})]})]}),(0,Rs.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,Rs.jsx)("input",{type:"text",placeholder:"Title",value:e.metadata.title,onChange:t=>x(e.id,"title",t.target.value),disabled:l,className:"text-sm rounded border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 disabled:opacity-50"}),(0,Rs.jsx)("input",{type:"text",placeholder:"Category",value:e.metadata.category,onChange:t=>x(e.id,"category",t.target.value),disabled:l,className:"text-sm rounded border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 disabled:opacity-50"})]}),(0,Rs.jsx)("input",{type:"text",placeholder:"Tags (comma-separated)",value:e.metadata.tags,onChange:t=>x(e.id,"tags",t.target.value),disabled:l,className:"w-full text-sm rounded border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 disabled:opacity-50"}),(0,Rs.jsx)("textarea",{placeholder:"Description",value:e.metadata.description,onChange:t=>x(e.id,"description",t.target.value),disabled:l,rows:2,className:"w-full text-sm rounded border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 disabled:opacity-50"})]})]})},e.id))})]}),a.length>0&&(0,Rs.jsx)("div",{className:"flex justify-end",children:(0,Rs.jsxs)("button",{onClick:async()=>{if(0===a.length)return void sr.error("Please select images to upload");i(!0);for(const r of a)try{s(e=>e.map(e=>e.id===r.id?He(He({},e),{},{status:"uploading"}):e));const e=new FormData;e.append("file",r.file),r.metadata.description&&e.append("description",r.metadata.description);const a={source:"image_upload",content_type:"image",uploaded_at:(new Date).toISOString(),title:r.metadata.title,category:r.metadata.category,tags:r.metadata.tags?r.metadata.tags.split(",").map(e=>e.trim()):[]};e.append("metadata",JSON.stringify(a)),await un(t,e,e=>{const t=Math.round(100*e.loaded/e.total);c(e=>He(He({},e),{},{[r.id]:t}))}),s(e=>e.map(e=>e.id===r.id?He(He({},e),{},{status:"completed"}):e)),sr.success("".concat(r.file.name," uploaded and embedded with CLIP"))}catch(e){console.error("Error uploading ".concat(r.file.name,":"),e),s(e=>e.map(e=>e.id===r.id?He(He({},e),{},{status:"failed"}):e)),sr.error("Failed to upload ".concat(r.file.name))}i(!1);a.every(e=>"completed"===e.status||"failed"===e.status)&&r&&setTimeout(r,1e3)},disabled:l,className:"inline-flex items-center px-6 py-3 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700 disabled:opacity-50 disabled:cursor-not-allowed",children:[(0,Rs.jsx)(Xn,{className:"w-4 h-4 mr-2"}),l?"Uploading...":"Upload ".concat(a.length," image").concat(a.length>1?"s":"")]})})]})},nl=qs("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),ll=qs("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),il=e=>{var t,r;let{kbId:a,refreshTrigger:s}=e;const[l,i]=(0,n.useState)([]),[o,c]=(0,n.useState)(!0),[d,u]=(0,n.useState)(1),[m,p]=(0,n.useState)(1),[h,x]=(0,n.useState)(""),[f,g]=(0,n.useState)(null);(0,n.useEffect)(()=>{y()},[a,d,s]);const y=async()=>{try{c(!0);const e=await async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:20;try{const a=await Ms.get("/knowledge/".concat(e,"/images/list?page=").concat(t,"&limit=").concat(r));return a.data.data||a.data}catch(a){throw console.error("List images error:",a),a}}(a,d,20);i(e.images),p(e.total_pages)}catch(e){console.error("Error loading images:",e),sr.error("Failed to load images")}finally{c(!1)}},v=async e=>{if(confirm("Are you sure you want to delete this image?"))try{await(async(e,t)=>{try{const r=await Ms.delete("/knowledge/".concat(e,"/images/").concat(t,"?kb_id=").concat(e));return r.data.data||r.data}catch(r){throw console.error("Delete image error:",r),r}})(a,e),sr.success("Image deleted successfully"),y()}catch(t){console.error("Error deleting image:",t),sr.error("Failed to delete image")}},b=l.filter(e=>{var t,r,a;return(null===(t=e.filename)||void 0===t?void 0:t.toLowerCase().includes(h.toLowerCase()))||(null===(r=e.metadata)||void 0===r||null===(a=r.description)||void 0===a?void 0:a.toLowerCase().includes(h.toLowerCase()))});return o?(0,Rs.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,Rs.jsx)(nl,{className:"w-8 h-8 animate-spin text-primary-600"})}):0===l.length?(0,Rs.jsxs)("div",{className:"text-center py-12",children:[(0,Rs.jsx)(An,{className:"w-16 h-16 mx-auto text-gray-400 mb-4"}),(0,Rs.jsx)("p",{className:"text-gray-600",children:"No images uploaded yet"})]}):(0,Rs.jsxs)("div",{className:"space-y-4",children:[(0,Rs.jsxs)("div",{className:"relative",children:[(0,Rs.jsx)(Vn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),(0,Rs.jsx)("input",{type:"text",value:h,onChange:e=>x(e.target.value),placeholder:"Search images...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-primary-500 focus:border-primary-500"})]}),(0,Rs.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:b.map(e=>{var t;return(0,Rs.jsxs)("div",{className:"group relative bg-white border border-gray-200 rounded-lg overflow-hidden hover:shadow-lg transition-shadow cursor-pointer",onClick:()=>g(e),children:[(0,Rs.jsxs)("div",{className:"aspect-square bg-gray-100 flex items-center justify-center overflow-hidden",children:[e.url||e.thumbnail_url?(0,Rs.jsx)("img",{src:e.url||e.thumbnail_url,alt:e.filename,className:"w-full h-full object-cover",onError:e=>{e.target.style.display="none",e.target.nextSibling.style.display="flex"}}):null,(0,Rs.jsx)("div",{className:"hidden w-full h-full items-center justify-center",children:(0,Rs.jsx)(An,{className:"w-12 h-12 text-gray-400"})})]}),(0,Rs.jsxs)("div",{className:"p-3",children:[(0,Rs.jsx)("p",{className:"text-sm font-medium text-gray-900 truncate",children:e.filename}),(0,Rs.jsxs)("p",{className:"text-xs text-gray-500",children:[(e.file_size_bytes/1024).toFixed(1)," KB"]}),(null===(t=e.metadata)||void 0===t?void 0:t.description)&&(0,Rs.jsx)("p",{className:"text-xs text-gray-600 mt-1 truncate",children:e.metadata.description})]}),(0,Rs.jsx)("div",{className:"absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity flex gap-1",children:(0,Rs.jsx)("button",{onClick:t=>{t.stopPropagation(),v(e.id)},className:"p-1.5 bg-red-500 text-white rounded hover:bg-red-600",title:"Delete",children:(0,Rs.jsx)(Zs,{className:"w-4 h-4"})})})]},e.id)})}),m>1&&(0,Rs.jsxs)("div",{className:"flex justify-center gap-2 mt-6",children:[(0,Rs.jsx)("button",{onClick:()=>u(e=>Math.max(1,e-1)),disabled:1===d,className:"px-4 py-2 border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),(0,Rs.jsxs)("span",{className:"px-4 py-2",children:["Page ",d," of ",m]}),(0,Rs.jsx)("button",{onClick:()=>u(e=>Math.min(m,e+1)),disabled:d===m,className:"px-4 py-2 border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]}),f&&(0,Rs.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",onClick:()=>g(null),children:(0,Rs.jsxs)("div",{className:"bg-white rounded-lg max-w-4xl w-full max-h-[90vh] overflow-y-auto p-6",onClick:e=>e.stopPropagation(),children:[(0,Rs.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,Rs.jsx)("h3",{className:"text-lg font-semibold",children:f.filename}),(0,Rs.jsx)("button",{onClick:()=>g(null),className:"text-gray-500 hover:text-gray-700",children:(0,Rs.jsx)(tn,{className:"w-5 h-5"})})]}),(0,Rs.jsxs)("div",{className:"space-y-4",children:[(0,Rs.jsxs)("div",{className:"w-full bg-gray-100 rounded flex items-center justify-center overflow-hidden",children:[f.url?(0,Rs.jsx)("img",{src:f.url,alt:f.filename,className:"max-w-full max-h-[60vh] object-contain",onError:e=>{e.target.style.display="none",e.target.nextSibling.style.display="flex"}}):null,(0,Rs.jsx)("div",{className:"hidden w-full h-64 items-center justify-center",children:(0,Rs.jsx)(An,{className:"w-16 h-16 text-gray-400"})})]}),(0,Rs.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,Rs.jsxs)("div",{children:[(0,Rs.jsx)("span",{className:"text-gray-600",children:"File Size:"}),(0,Rs.jsxs)("span",{className:"ml-2 font-medium",children:[(f.file_size_bytes/1024).toFixed(1)," KB"]})]}),(0,Rs.jsxs)("div",{children:[(0,Rs.jsx)("span",{className:"text-gray-600",children:"Type:"}),(0,Rs.jsx)("span",{className:"ml-2 font-medium",children:f.content_type})]}),f.width&&f.height&&(0,Rs.jsxs)("div",{children:[(0,Rs.jsx)("span",{className:"text-gray-600",children:"Dimensions:"}),(0,Rs.jsxs)("span",{className:"ml-2 font-medium",children:[f.width," \xd7 ",f.height]})]}),(0,Rs.jsxs)("div",{children:[(0,Rs.jsx)("span",{className:"text-gray-600",children:"Uploaded:"}),(0,Rs.jsx)("span",{className:"ml-2 font-medium",children:new Date(f.created_at).toLocaleDateString()})]})]}),(null===(t=f.metadata)||void 0===t?void 0:t.description)&&(0,Rs.jsxs)("div",{children:[(0,Rs.jsx)("p",{className:"text-sm text-gray-600",children:"Description:"}),(0,Rs.jsx)("p",{className:"text-sm mt-1",children:f.metadata.description})]}),(null===(r=f.metadata)||void 0===r?void 0:r.tags)&&(0,Rs.jsxs)("div",{children:[(0,Rs.jsx)("p",{className:"text-sm text-gray-600",children:"Tags:"}),(0,Rs.jsx)("div",{className:"flex flex-wrap gap-2 mt-1",children:f.metadata.tags.map((e,t)=>(0,Rs.jsx)("span",{className:"px-2 py-1 bg-primary-100 text-primary-700 text-xs rounded",children:e},t))})]}),(0,Rs.jsx)("div",{className:"flex justify-end",children:(0,Rs.jsxs)("a",{href:f.url,download:f.filename,className:"inline-flex items-center gap-2 px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700",onClick:e=>e.stopPropagation(),children:[(0,Rs.jsx)(ll,{className:"w-4 h-4"}),"Download"]})})]})]})})]})},ol=e=>{let{kbId:t}=e;const[r,a]=(0,n.useState)(""),[s,l]=(0,n.useState)([]),[i,o]=(0,n.useState)(!1),[c,d]=(0,n.useState)("text");return(0,Rs.jsxs)("div",{className:"space-y-6",children:[(0,Rs.jsx)("form",{onSubmit:async e=>{if(e.preventDefault(),r.trim())try{var a;o(!0);const e=await(async(e,t)=>{try{const r=await Ms.post("/knowledge/".concat(e,"/images/search"),t);return r.data.data||r.data}catch(r){throw console.error("Search images error:",r),r}})(t,{query:r,search_type:c,top_k:10});l(e.results||[]),0===(null===(a=e.results)||void 0===a?void 0:a.length)?sr("No images found matching your query"):sr.success("Found ".concat(e.results.length," images"))}catch(s){console.error("Search error:",s),sr.error("Failed to search images")}finally{o(!1)}else sr.error("Please enter a search query")},className:"space-y-4",children:(0,Rs.jsxs)("div",{children:[(0,Rs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Search for images"}),(0,Rs.jsxs)("div",{className:"flex gap-2",children:[(0,Rs.jsx)("input",{type:"text",value:r,onChange:e=>a(e.target.value),placeholder:"e.g., red shoes, product images, etc.",className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:ring-primary-500 focus:border-primary-500",disabled:i}),(0,Rs.jsx)("button",{type:"submit",disabled:i,className:"px-6 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center",children:i?(0,Rs.jsxs)(Rs.Fragment,{children:[(0,Rs.jsx)(nl,{className:"w-4 h-4 mr-2 animate-spin"}),"Searching..."]}):(0,Rs.jsxs)(Rs.Fragment,{children:[(0,Rs.jsx)(Vn,{className:"w-4 h-4 mr-2"}),"Search"]})})]})]})}),s.length>0&&(0,Rs.jsxs)("div",{children:[(0,Rs.jsxs)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:["Search Results (",s.length,")"]}),(0,Rs.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:s.map((e,t)=>{var r;return(0,Rs.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg overflow-hidden hover:shadow-lg transition-shadow",children:[(0,Rs.jsx)("div",{className:"aspect-square bg-gray-100 flex items-center justify-center",children:(0,Rs.jsx)(An,{className:"w-12 h-12 text-gray-400"})}),(0,Rs.jsxs)("div",{className:"p-3",children:[(0,Rs.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,Rs.jsx)("p",{className:"text-sm font-medium text-gray-900 truncate",children:e.filename||"Image"}),(0,Rs.jsxs)("span",{className:"text-xs font-semibold text-primary-600",children:[(100*e.score).toFixed(0),"%"]})]}),(null===(r=e.metadata)||void 0===r?void 0:r.description)&&(0,Rs.jsx)("p",{className:"text-xs text-gray-600 truncate",children:e.metadata.description})]})]},e.result_id||t)})})]})]})},cl=()=>{const{id:e}=ae(),t=te(),[r,a]=(0,n.useState)(null),[s,l]=(0,n.useState)([]),[i,o]=(0,n.useState)(null),[c,d]=(0,n.useState)(null),[u,m]=(0,n.useState)(!0),[p,h]=(0,n.useState)("documents"),[x,f]=(0,n.useState)(0),[g,y]=(0,n.useState)(""),[v,b]=(0,n.useState)("all");(0,n.useEffect)(()=>{j()},[e]);const j=async()=>{try{m(!0);const[s,n,i]=await Promise.all([ln(e),(t=e,Ms.get("/knowledge/".concat(t,"/documents"),{params:r})),dn(e)]);a(s.data.data),l(n.data.data.items||[]),o(i.data.data),await N()}catch(s){sr.error("Failed to load documents"),console.error(s)}finally{m(!1)}var t,r},w=async t=>{if(window.confirm("Are you sure? This will delete all chunks and embeddings."))try{await((e,t)=>Ms.delete("/knowledge/".concat(e,"/documents/").concat(t)))(e,t),sr.success("Document deleted"),j()}catch(r){sr.error("Failed to delete document"),console.error(r)}},N=async()=>{try{const t=await async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;const t=e?"/knowledge/cache/stats?kb_id=".concat(e):"/knowledge/cache/stats";return(await Ms.get(t)).data}(e);d(t.data.data)}catch(t){console.error("Failed to load cache stats:",t)}},k=s.filter(e=>{const t=e.original_filename.toLowerCase().includes(g.toLowerCase()),r="all"===v||e.status===v;return t&&r}),_=e=>{switch(e){case"completed":return(0,Rs.jsx)(sn,{className:"w-5 h-5 text-green-500"});case"processing":return(0,Rs.jsx)(bn,{className:"w-5 h-5 text-yellow-500 animate-spin"});case"failed":return(0,Rs.jsx)(Gn,{className:"w-5 h-5 text-red-500"});default:return(0,Rs.jsx)($n,{className:"w-5 h-5 text-gray-500"})}},S=e=>{if(0===e)return"0 Bytes";const t=Math.floor(Math.log(e)/Math.log(1024));return Math.round(e/Math.pow(1024,t)*100)/100+" "+["Bytes","KB","MB","GB"][t]};return u?(0,Rs.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,Rs.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):(0,Rs.jsxs)("div",{className:"space-y-6",children:[(0,Rs.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Rs.jsxs)("div",{children:[(0,Rs.jsxs)("button",{onClick:()=>t("/knowledge"),className:"flex items-center text-sm text-gray-600 hover:text-gray-900 mb-2",children:[(0,Rs.jsx)(Jn,{className:"w-4 h-4 mr-1"}),"Back to Knowledge Bases"]}),(0,Rs.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:null===r||void 0===r?void 0:r.name}),(0,Rs.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:null===r||void 0===r?void 0:r.description})]}),(0,Rs.jsxs)(Re,{to:"/knowledge/".concat(e,"/chat"),className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700",children:[(0,Rs.jsx)(Xs,{className:"w-4 h-4 mr-2"}),"Test Chat"]})]}),i&&(0,Rs.jsxs)("div",{className:"grid grid-cols-1 gap-5 sm:grid-cols-4",children:[(0,Rs.jsx)("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:(0,Rs.jsx)("div",{className:"p-5",children:(0,Rs.jsxs)("div",{className:"flex items-center",children:[(0,Rs.jsx)("div",{className:"flex-shrink-0",children:(0,Rs.jsx)($n,{className:"h-6 w-6 text-gray-400"})}),(0,Rs.jsx)("div",{className:"ml-5 w-0 flex-1",children:(0,Rs.jsxs)("dl",{children:[(0,Rs.jsx)("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Total Documents"}),(0,Rs.jsx)("dd",{className:"text-2xl font-semibold text-gray-900",children:i.total_documents||0})]})})]})})}),(0,Rs.jsx)("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:(0,Rs.jsx)("div",{className:"p-5",children:(0,Rs.jsxs)("div",{className:"flex items-center",children:[(0,Rs.jsx)("div",{className:"flex-shrink-0",children:(0,Rs.jsx)(Wn,{className:"h-6 w-6 text-gray-400"})}),(0,Rs.jsx)("div",{className:"ml-5 w-0 flex-1",children:(0,Rs.jsxs)("dl",{children:[(0,Rs.jsx)("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Total Chunks"}),(0,Rs.jsx)("dd",{className:"text-2xl font-semibold text-gray-900",children:i.total_chunks||0})]})})]})})}),(0,Rs.jsx)("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:(0,Rs.jsx)("div",{className:"p-5",children:(0,Rs.jsxs)("div",{className:"flex items-center",children:[(0,Rs.jsx)("div",{className:"flex-shrink-0",children:(0,Rs.jsx)(Wn,{className:"h-6 w-6 text-gray-400"})}),(0,Rs.jsx)("div",{className:"ml-5 w-0 flex-1",children:(0,Rs.jsxs)("dl",{children:[(0,Rs.jsx)("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Vectors"}),(0,Rs.jsx)("dd",{className:"text-2xl font-semibold text-gray-900",children:i.total_vectors||0})]})})]})})}),(0,Rs.jsx)("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:(0,Rs.jsx)("div",{className:"p-5",children:(0,Rs.jsxs)("div",{className:"flex items-center",children:[(0,Rs.jsx)("div",{className:"flex-shrink-0",children:(0,Rs.jsx)(Vn,{className:"h-6 w-6 text-gray-400"})}),(0,Rs.jsx)("div",{className:"ml-5 w-0 flex-1",children:(0,Rs.jsxs)("dl",{children:[(0,Rs.jsx)("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Embedding Model"}),(0,Rs.jsx)("dd",{className:"text-sm font-semibold text-gray-900",children:i.embedding_model||"N/A"})]})})]})})}),(0,Rs.jsx)("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:(0,Rs.jsx)("div",{className:"p-5",children:(0,Rs.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Rs.jsxs)("div",{className:"flex items-center flex-1",children:[(0,Rs.jsx)("div",{className:"flex-shrink-0",children:(0,Rs.jsx)(Wn,{className:"h-6 w-6 text-blue-400"})}),(0,Rs.jsx)("div",{className:"ml-5",children:(0,Rs.jsxs)("dl",{children:[(0,Rs.jsx)("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Cache"}),(0,Rs.jsxs)("dd",{className:"text-lg font-medium text-gray-900",children:[(null===c||void 0===c?void 0:c.total_cached_queries)||0," queries"]}),c&&(0,Rs.jsxs)("dd",{className:"text-xs text-gray-500 mt-1",children:[c.total_cache_hits," hits \u2022 ",c.cache_hit_rate," avg"]})]})})]}),(0,Rs.jsxs)("button",{onClick:async()=>{if(window.confirm("Clear semantic cache for this knowledge base? This will force fresh searches but may increase API costs temporarily."))try{await async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;const t=e?"/knowledge/cache/clear?kb_id=".concat(e):"/knowledge/cache/clear";return(await Ms.delete(t)).data}(e),sr.success("Cache cleared successfully"),await N()}catch(t){sr.error("Failed to clear cache"),console.error(t)}},className:"ml-3 inline-flex items-center px-3 py-1.5 border border-red-300 text-xs font-medium rounded text-red-700 bg-white hover:bg-red-50",title:"Clear semantic cache",children:[(0,Rs.jsx)(Zs,{className:"w-3 h-3 mr-1"}),"Clear"]})]})})})]}),(0,Rs.jsxs)("div",{className:"bg-white shadow rounded-lg",children:[(0,Rs.jsx)("div",{className:"border-b border-gray-200",children:(0,Rs.jsxs)("nav",{className:"-mb-px flex space-x-8 px-6","aria-label":"Tabs",children:[(0,Rs.jsxs)("button",{onClick:()=>h("documents"),className:"".concat("documents"===p?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"," whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm flex items-center"),children:[(0,Rs.jsx)($n,{className:"w-5 h-5 mr-2"}),"Documents (",s.length,")"]}),(0,Rs.jsxs)("button",{onClick:()=>h("upload"),className:"".concat("upload"===p?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"," whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm flex items-center"),children:[(0,Rs.jsx)(Xn,{className:"w-5 h-5 mr-2"}),"Upload Files"]}),(0,Rs.jsxs)("button",{onClick:()=>h("scrape"),className:"".concat("scrape"===p?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"," whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm flex items-center"),children:[(0,Rs.jsx)(Zn,{className:"w-5 h-5 mr-2"}),"Web Scraping"]}),(0,Rs.jsxs)("button",{onClick:()=>h("images"),className:"flex items-center px-4 py-2 text-sm font-medium rounded-md transition-colors ".concat("images"===p?"bg-primary-100 text-primary-700":"text-gray-700 hover:bg-gray-100"),children:[(0,Rs.jsx)(An,{className:"w-4 h-4 mr-2"}),"Images"]})]})}),(0,Rs.jsxs)("div",{className:"p-6",children:["documents"===p&&(0,Rs.jsxs)("div",{className:"space-y-4",children:[(0,Rs.jsxs)("div",{className:"flex gap-4",children:[(0,Rs.jsxs)("div",{className:"flex-1 relative",children:[(0,Rs.jsx)(Vn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),(0,Rs.jsx)("input",{type:"text",placeholder:"Search documents...",value:g,onChange:e=>y(e.target.value),className:"pl-10 w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500"})]}),(0,Rs.jsxs)("select",{value:v,onChange:e=>b(e.target.value),className:"rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500",children:[(0,Rs.jsx)("option",{value:"all",children:"All Status"}),(0,Rs.jsx)("option",{value:"completed",children:"Completed"}),(0,Rs.jsx)("option",{value:"processing",children:"Processing"}),(0,Rs.jsx)("option",{value:"failed",children:"Failed"})]}),(0,Rs.jsxs)("button",{onClick:j,className:"inline-flex items-center px-4 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50",children:[(0,Rs.jsx)(el,{className:"w-4 h-4 mr-2"}),"Refresh"]})]}),0===k.length?(0,Rs.jsxs)("div",{className:"text-center py-12",children:[(0,Rs.jsx)($n,{className:"mx-auto h-12 w-12 text-gray-400"}),(0,Rs.jsx)("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No documents"}),(0,Rs.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Upload files or scrape websites to get started"})]}):(0,Rs.jsx)("div",{className:"overflow-x-auto shadow ring-1 ring-black ring-opacity-5 rounded-lg",children:(0,Rs.jsxs)("table",{className:"min-w-full divide-y divide-gray-300",children:[(0,Rs.jsx)("thead",{className:"bg-gray-50",children:(0,Rs.jsxs)("tr",{children:[(0,Rs.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-2/5",children:"Document"}),(0,Rs.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-24",children:"Type"}),(0,Rs.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-24",children:"Size"}),(0,Rs.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-28",children:"Status"}),(0,Rs.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-32",children:"Stats"}),(0,Rs.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-32",children:"Date"}),(0,Rs.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider w-20",children:"Actions"})]})}),(0,Rs.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:k.map(e=>{var t,r;return(0,Rs.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,Rs.jsx)("td",{className:"px-6 py-4",children:(0,Rs.jsxs)("div",{className:"flex items-center min-w-0",children:[_(e.status),(0,Rs.jsxs)("div",{className:"ml-3 min-w-0 flex-1",children:[(0,Rs.jsx)("div",{className:"text-sm font-medium text-gray-900 truncate max-w-md",title:e.original_filename,children:e.original_filename}),(null===(t=e.metadata)||void 0===t?void 0:t.source_url)&&(0,Rs.jsx)("div",{className:"text-xs text-gray-500 truncate max-w-md",title:e.metadata.source_url,children:e.metadata.source_url})]})]})}),(0,Rs.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,Rs.jsx)("span",{className:"text-xs text-gray-900 truncate block max-w-24",title:e.file_type,children:e.file_type.split("/")[1]||e.file_type})}),(0,Rs.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:S(e.file_size_bytes)}),(0,Rs.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,Rs.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat((r=e.status,{completed:"bg-green-100 text-green-800",processing:"bg-yellow-100 text-yellow-800",failed:"bg-red-100 text-red-800",uploaded:"bg-blue-100 text-blue-800"}[r]||"bg-gray-100 text-gray-800")),children:e.status})}),(0,Rs.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.processing_stats?(0,Rs.jsxs)("div",{className:"flex gap-3",children:[(0,Rs.jsxs)("span",{title:"Chunks",children:["\ud83d\udce6 ",e.processing_stats.total_chunks||0]}),e.processing_stats.total_pages>0&&(0,Rs.jsxs)("span",{title:"Pages",children:["\ud83d\udcc4 ",e.processing_stats.total_pages]})]}):"-"}),(0,Rs.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(e.created_at).toLocaleDateString()}),(0,Rs.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:(0,Rs.jsx)("button",{onClick:()=>w(e.id),className:"text-red-600 hover:text-red-900",title:"Delete document",children:(0,Rs.jsx)(Zs,{className:"w-4 h-4"})})})]},e.id)})})]})})]}),"upload"===p&&(0,Rs.jsx)(tl,{kbId:e,onComplete:()=>{sr.success("Upload completed!"),j(),h("documents")}}),"scrape"===p&&(0,Rs.jsx)(al,{kbId:e,onComplete:()=>{sr.success("Scraping completed!"),j(),h("documents")}}),"images"===p&&(0,Rs.jsxs)("div",{className:"space-y-6",children:[(0,Rs.jsxs)("div",{className:"bg-white shadow rounded-lg p-6",children:[(0,Rs.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Upload Images"}),(0,Rs.jsx)(sl,{kbId:e,onComplete:()=>f(e=>e+1)})]}),(0,Rs.jsxs)("div",{className:"bg-white shadow rounded-lg p-6",children:[(0,Rs.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Search Images"}),(0,Rs.jsx)(ol,{kbId:e})]}),(0,Rs.jsxs)("div",{className:"bg-white shadow rounded-lg p-6",children:[(0,Rs.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Image Gallery"}),(0,Rs.jsx)(il,{kbId:e,refreshTrigger:x})]})]})]})]})]})},dl=()=>{const{id:e}=ae(),t=te(),[r,a]=(0,n.useState)(null),[s,l]=(0,n.useState)(""),[i,o]=(0,n.useState)(5),[c,d]=(0,n.useState)("text"),[u,m]=(0,n.useState)(!1),[p,h]=(0,n.useState)(null),[x,f]=(0,n.useState)([]);(0,n.useEffect)(()=>{g()},[e]);const g=async()=>{try{const t=await ln(e);a(t.data.data)}catch(t){sr.error("Failed to load knowledge base"),console.error(t)}},y=(e,t)=>{if(!t)return e;return e.split(new RegExp("(".concat(t,")"),"gi")).map((e,r)=>e.toLowerCase()===t.toLowerCase()?(0,Rs.jsx)("mark",{className:"bg-yellow-200",children:e},r):e)};return(0,Rs.jsxs)("div",{className:"space-y-6",children:[(0,Rs.jsx)("div",{className:"flex items-center justify-between",children:(0,Rs.jsxs)("div",{children:[(0,Rs.jsxs)("button",{onClick:()=>t("/knowledge/".concat(e,"/documents")),className:"flex items-center text-sm text-gray-600 hover:text-gray-900 mb-2",children:[(0,Rs.jsx)(Jn,{className:"w-4 h-4 mr-1"}),"Back to Documents"]}),(0,Rs.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Search Knowledge Base"}),(0,Rs.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:null===r||void 0===r?void 0:r.name})]})}),(0,Rs.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,Rs.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[(0,Rs.jsxs)("div",{className:"bg-white shadow rounded-lg p-6",children:[(0,Rs.jsxs)("form",{onSubmit:async t=>{if(t.preventDefault(),s.trim())try{m(!0);const t=Date.now(),r=await cn({kb_id:e,query:s,top_k:i,search_type:c}),a=Date.now()-t,n=He(He({},r.data.data),{},{query:s,timestamp:(new Date).toISOString(),searchTime:a});h(n),f(e=>[n,...e.slice(0,9)]),sr.success("Found ".concat(n.results.total_found," results"))}catch(r){sr.error("Search failed"),console.error(r)}finally{m(!1)}else sr.error("Please enter a search query")},className:"space-y-4",children:[(0,Rs.jsxs)("div",{children:[(0,Rs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Search Query"}),(0,Rs.jsxs)("div",{className:"relative",children:[(0,Rs.jsx)(Vn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),(0,Rs.jsx)("input",{type:"text",value:s,onChange:e=>l(e.target.value),placeholder:"Ask a question or enter search terms...",className:"pl-10 w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500"})]})]}),(0,Rs.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,Rs.jsxs)("div",{children:[(0,Rs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Results to Return"}),(0,Rs.jsxs)("select",{value:i,onChange:e=>o(parseInt(e.target.value)),className:"w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500",children:[(0,Rs.jsx)("option",{value:3,children:"Top 3"}),(0,Rs.jsx)("option",{value:5,children:"Top 5"}),(0,Rs.jsx)("option",{value:10,children:"Top 10"}),(0,Rs.jsx)("option",{value:20,children:"Top 20"})]})]}),(0,Rs.jsxs)("div",{children:[(0,Rs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Search Type"}),(0,Rs.jsxs)("select",{value:c,onChange:e=>d(e.target.value),className:"w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500",children:[(0,Rs.jsx)("option",{value:"text",children:"Text Only"}),(0,Rs.jsx)("option",{value:"hybrid",children:"Hybrid (Text + Image)"}),(0,Rs.jsx)("option",{value:"image",children:"Image Only"})]})]})]}),(0,Rs.jsx)("button",{type:"submit",disabled:u,className:"w-full inline-flex justify-center items-center px-6 py-3 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700 disabled:opacity-50",children:u?(0,Rs.jsxs)(Rs.Fragment,{children:[(0,Rs.jsx)(On,{className:"w-5 h-5 mr-2 animate-pulse"}),"Searching..."]}):(0,Rs.jsxs)(Rs.Fragment,{children:[(0,Rs.jsx)(Vn,{className:"w-5 h-5 mr-2"}),"Search"]})})]}),(0,Rs.jsxs)("div",{className:"mt-4 pt-4 border-t border-gray-200",children:[(0,Rs.jsx)("p",{className:"text-xs font-medium text-gray-700 mb-2",children:"Try these examples:"}),(0,Rs.jsx)("div",{className:"flex flex-wrap gap-2",children:["What is AIVA?","How to create an agent?","Pricing information","Supported languages","Integration options"].map((e,t)=>(0,Rs.jsx)("button",{onClick:()=>l(e),className:"px-3 py-1 text-xs bg-gray-100 hover:bg-gray-200 rounded-full text-gray-700",children:e},t))})]})]}),p&&(0,Rs.jsxs)("div",{className:"space-y-4",children:[(0,Rs.jsx)("div",{className:"bg-white shadow rounded-lg p-6",children:(0,Rs.jsxs)("div",{className:"grid grid-cols-4 gap-4",children:[(0,Rs.jsxs)("div",{className:"text-center",children:[(0,Rs.jsx)("div",{className:"text-2xl font-bold text-primary-600",children:p.results.total_found}),(0,Rs.jsx)("div",{className:"text-xs text-gray-500 mt-1",children:"Results Found"})]}),(0,Rs.jsxs)("div",{className:"text-center",children:[(0,Rs.jsxs)("div",{className:"text-2xl font-bold text-gray-900",children:[p.searchTime,"ms"]}),(0,Rs.jsx)("div",{className:"text-xs text-gray-500 mt-1",children:"Search Time"})]}),(0,Rs.jsxs)("div",{className:"text-center",children:[(0,Rs.jsx)("div",{className:"text-2xl font-bold text-gray-900",children:p.metrics.chunks_searched}),(0,Rs.jsx)("div",{className:"text-xs text-gray-500 mt-1",children:"Chunks Searched"})]}),(0,Rs.jsxs)("div",{className:"text-center",children:[(0,Rs.jsxs)("div",{className:"text-2xl font-bold text-green-600",children:["$",p.cost.toFixed(6)]}),(0,Rs.jsx)("div",{className:"text-xs text-gray-500 mt-1",children:"Cost"})]})]})}),p.results.text_results.length>0&&(0,Rs.jsxs)("div",{className:"bg-white shadow rounded-lg p-6",children:[(0,Rs.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[(0,Rs.jsx)($n,{className:"w-5 h-5 mr-2"}),"Text Results (",p.results.text_results.length,")"]}),(0,Rs.jsx)("div",{className:"space-y-4",children:p.results.text_results.map((e,t)=>(0,Rs.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4 hover:border-primary-300 transition-colors",children:[(0,Rs.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,Rs.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,Rs.jsx)("div",{className:"flex-shrink-0 w-8 h-8 bg-primary-100 rounded-full flex items-center justify-center",children:(0,Rs.jsxs)("span",{className:"text-sm font-semibold text-primary-600",children:["#",t+1]})}),(0,Rs.jsxs)("div",{children:[(0,Rs.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.source.document_name}),(0,Rs.jsxs)("div",{className:"text-xs text-gray-500",children:["Chunk ",e.source.chunk_index," \u2022 ",e.type]})]})]}),(0,Rs.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Rs.jsxs)("div",{className:"text-right",children:[(0,Rs.jsx)("div",{className:"text-xs text-gray-500",children:"Relevance"}),(0,Rs.jsxs)("div",{className:"text-sm font-semibold text-gray-900",children:[(100*e.score).toFixed(1),"%"]})]}),(0,Rs.jsx)("div",{className:"w-16 bg-gray-200 rounded-full h-2",children:(0,Rs.jsx)("div",{className:"bg-primary-600 h-2 rounded-full",style:{width:"".concat(100*e.score,"%")}})})]})]}),(0,Rs.jsx)("div",{className:"text-sm text-gray-700 leading-relaxed",children:y(e.content,s)}),e.source.metadata&&Object.keys(e.source.metadata).length>0&&(0,Rs.jsx)("div",{className:"mt-3 pt-3 border-t border-gray-100",children:(0,Rs.jsx)("div",{className:"flex flex-wrap gap-2",children:Object.entries(e.source.metadata).map(e=>{let[t,r]=e;return(0,Rs.jsxs)("span",{className:"inline-flex items-center px-2 py-1 rounded text-xs bg-gray-100 text-gray-600",children:[t,": ",String(r)]},t)})})})]},e.result_id))})]}),0===p.results.total_found&&(0,Rs.jsxs)("div",{className:"bg-white shadow rounded-lg p-12 text-center",children:[(0,Rs.jsx)(Vn,{className:"mx-auto h-12 w-12 text-gray-400"}),(0,Rs.jsx)("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No results found"}),(0,Rs.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Try adjusting your search query or adding more documents"})]})]}),!p&&(0,Rs.jsxs)("div",{className:"bg-white shadow rounded-lg p-12 text-center",children:[(0,Rs.jsx)(Vn,{className:"mx-auto h-12 w-12 text-gray-400"}),(0,Rs.jsx)("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"Ready to search"}),(0,Rs.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Enter a query above to search the knowledge base"})]})]}),(0,Rs.jsxs)("div",{className:"space-y-6",children:[x.length>0&&(0,Rs.jsxs)("div",{className:"bg-white shadow rounded-lg p-6",children:[(0,Rs.jsxs)("h3",{className:"text-sm font-semibold text-gray-900 mb-4 flex items-center",children:[(0,Rs.jsx)(bn,{className:"w-4 h-4 mr-2"}),"Recent Searches"]}),(0,Rs.jsx)("div",{className:"space-y-2",children:x.map((e,t)=>(0,Rs.jsxs)("button",{onClick:()=>{return l((t=e).query),void h(t);var t},className:"w-full text-left p-3 rounded-lg hover:bg-gray-50 border border-gray-200 transition-colors",children:[(0,Rs.jsx)("div",{className:"text-sm font-medium text-gray-900 truncate",children:e.query}),(0,Rs.jsxs)("div",{className:"flex items-center justify-between mt-1",children:[(0,Rs.jsxs)("span",{className:"text-xs text-gray-500",children:[e.results.total_found," results"]}),(0,Rs.jsx)("span",{className:"text-xs text-gray-400",children:new Date(e.timestamp).toLocaleTimeString()})]})]},t))})]}),(0,Rs.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[(0,Rs.jsx)("h3",{className:"text-sm font-semibold text-blue-900 mb-2",children:"Search Tips"}),(0,Rs.jsxs)("ul",{className:"text-xs text-blue-700 space-y-2",children:[(0,Rs.jsx)("li",{children:"\u2022 Use natural language questions"}),(0,Rs.jsx)("li",{children:"\u2022 Be specific for better results"}),(0,Rs.jsx)("li",{children:"\u2022 Try different phrasings"}),(0,Rs.jsx)("li",{children:"\u2022 Check relevance scores"}),(0,Rs.jsx)("li",{children:"\u2022 Adjust top_k for more results"})]})]}),p&&(0,Rs.jsxs)("div",{className:"bg-white shadow rounded-lg p-6",children:[(0,Rs.jsx)("h3",{className:"text-sm font-semibold text-gray-900 mb-4",children:"Search Metrics"}),(0,Rs.jsxs)("div",{className:"space-y-3",children:[(0,Rs.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,Rs.jsx)("span",{className:"text-gray-600",children:"Query Tokens"}),(0,Rs.jsx)("span",{className:"font-medium text-gray-900",children:p.metrics.query_tokens||0})]}),(0,Rs.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,Rs.jsx)("span",{className:"text-gray-600",children:"Embedding Model"}),(0,Rs.jsx)("span",{className:"font-medium text-gray-900 text-xs",children:p.metrics.embedding_model})]}),(0,Rs.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,Rs.jsx)("span",{className:"text-gray-600",children:"Processing Time"}),(0,Rs.jsxs)("span",{className:"font-medium text-gray-900",children:[p.metrics.processing_time_ms,"ms"]})]}),(0,Rs.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,Rs.jsx)("span",{className:"text-gray-600",children:"Search Cost"}),(0,Rs.jsxs)("span",{className:"font-medium text-green-600",children:["$",p.cost.toFixed(6)]})]})]})]})]})]})]})},ul=qs("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]),ml=()=>{const{id:e}=ae(),t=te(),[r,a]=(0,n.useState)(null),[s,l]=(0,n.useState)(null),[i,o]=(0,n.useState)([]),[c,d]=(0,n.useState)(!0),[u,m]=(0,n.useState)("7d");(0,n.useEffect)(()=>{p()},[e,u]);const p=async()=>{try{d(!0);const[s,n,i]=await Promise.all([ln(e),dn(e),(t=e,r={limit:50},Ms.get("/knowledge/".concat(t,"/searches"),{params:r}))]);a(s.data.data),l(n.data.data),o(i.data.data||[])}catch(s){sr.error("Failed to load statistics"),console.error(s)}finally{d(!1)}var t,r};if(c)return(0,Rs.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,Rs.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})});const h=(()=>{const e={};return i.forEach(t=>{const r=new Date(t.created_at).toLocaleDateString();e[r]=(e[r]||0)+1}),e})(),x=(()=>{const e={};return i.forEach(t=>{e[t.query]=(e[t.query]||0)+1}),Object.entries(e).sort((e,t)=>t[1]-e[1]).slice(0,10).map(e=>{let[t,r]=e;return{query:t,count:r}})})();return(0,Rs.jsxs)("div",{className:"space-y-6",children:[(0,Rs.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Rs.jsxs)("div",{children:[(0,Rs.jsxs)("button",{onClick:()=>t("/knowledge/".concat(e,"/documents")),className:"flex items-center text-sm text-gray-600 hover:text-gray-900 mb-2",children:[(0,Rs.jsx)(Jn,{className:"w-4 h-4 mr-1"}),"Back to Documents"]}),(0,Rs.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Knowledge Base Statistics"}),(0,Rs.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:null===r||void 0===r?void 0:r.name})]}),(0,Rs.jsxs)("select",{value:u,onChange:e=>m(e.target.value),className:"rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500",children:[(0,Rs.jsx)("option",{value:"24h",children:"Last 24 Hours"}),(0,Rs.jsx)("option",{value:"7d",children:"Last 7 Days"}),(0,Rs.jsx)("option",{value:"30d",children:"Last 30 Days"}),(0,Rs.jsx)("option",{value:"90d",children:"Last 90 Days"})]})]}),(0,Rs.jsxs)("div",{className:"grid grid-cols-1 gap-5 sm:grid-cols-2 lg:grid-cols-4",children:[(0,Rs.jsx)("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:(0,Rs.jsx)("div",{className:"p-5",children:(0,Rs.jsxs)("div",{className:"flex items-center",children:[(0,Rs.jsx)("div",{className:"flex-shrink-0",children:(0,Rs.jsx)($n,{className:"h-6 w-6 text-gray-400"})}),(0,Rs.jsx)("div",{className:"ml-5 w-0 flex-1",children:(0,Rs.jsxs)("dl",{children:[(0,Rs.jsx)("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Total Documents"}),(0,Rs.jsx)("dd",{className:"flex items-baseline",children:(0,Rs.jsx)("div",{className:"text-2xl font-semibold text-gray-900",children:(null===s||void 0===s?void 0:s.total_documents)||0})})]})})]})})}),(0,Rs.jsx)("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:(0,Rs.jsx)("div",{className:"p-5",children:(0,Rs.jsxs)("div",{className:"flex items-center",children:[(0,Rs.jsx)("div",{className:"flex-shrink-0",children:(0,Rs.jsx)(Wn,{className:"h-6 w-6 text-gray-400"})}),(0,Rs.jsx)("div",{className:"ml-5 w-0 flex-1",children:(0,Rs.jsxs)("dl",{children:[(0,Rs.jsx)("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Total Chunks"}),(0,Rs.jsx)("dd",{className:"flex items-baseline",children:(0,Rs.jsx)("div",{className:"text-2xl font-semibold text-gray-900",children:(null===s||void 0===s?void 0:s.total_chunks)||0})})]})})]})})}),(0,Rs.jsx)("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:(0,Rs.jsx)("div",{className:"p-5",children:(0,Rs.jsxs)("div",{className:"flex items-center",children:[(0,Rs.jsx)("div",{className:"flex-shrink-0",children:(0,Rs.jsx)(Vn,{className:"h-6 w-6 text-gray-400"})}),(0,Rs.jsx)("div",{className:"ml-5 w-0 flex-1",children:(0,Rs.jsxs)("dl",{children:[(0,Rs.jsx)("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Total Searches"}),(0,Rs.jsx)("dd",{className:"flex items-baseline",children:(0,Rs.jsx)("div",{className:"text-2xl font-semibold text-gray-900",children:i.length})})]})})]})})}),(0,Rs.jsx)("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:(0,Rs.jsx)("div",{className:"p-5",children:(0,Rs.jsxs)("div",{className:"flex items-center",children:[(0,Rs.jsx)("div",{className:"flex-shrink-0",children:(0,Rs.jsx)($s,{className:"h-6 w-6 text-gray-400"})}),(0,Rs.jsx)("div",{className:"ml-5 w-0 flex-1",children:(0,Rs.jsxs)("dl",{children:[(0,Rs.jsx)("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Avg Relevance"}),(0,Rs.jsx)("dd",{className:"flex items-baseline",children:(0,Rs.jsxs)("div",{className:"text-2xl font-semibold text-gray-900",children:[(()=>{if(!i.length)return 0;return(i.reduce((e,t)=>e+(t.avg_relevance_score||0),0)/i.length).toFixed(2)})(),"%"]})})]})})]})})})]}),(0,Rs.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,Rs.jsxs)("div",{className:"bg-white shadow rounded-lg p-6",children:[(0,Rs.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[(0,Rs.jsx)(jn,{className:"w-5 h-5 mr-2"}),"Search Activity"]}),Object.keys(h).length>0?(0,Rs.jsx)("div",{className:"space-y-3",children:Object.entries(h).sort((e,t)=>new Date(t[0])-new Date(e[0])).slice(0,7).map(e=>{let[t,r]=e;return(0,Rs.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Rs.jsx)("span",{className:"text-sm text-gray-600",children:t}),(0,Rs.jsxs)("div",{className:"flex items-center",children:[(0,Rs.jsx)("div",{className:"w-32 bg-gray-200 rounded-full h-2 mr-3",children:(0,Rs.jsx)("div",{className:"bg-primary-600 h-2 rounded-full",style:{width:"".concat(r/Math.max(...Object.values(h))*100,"%")}})}),(0,Rs.jsx)("span",{className:"text-sm font-medium text-gray-900 w-8 text-right",children:r})]})]},t)})}):(0,Rs.jsx)("div",{className:"text-center py-8 text-gray-500",children:"No search activity yet"})]}),(0,Rs.jsxs)("div",{className:"bg-white shadow rounded-lg p-6",children:[(0,Rs.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[(0,Rs.jsx)(ul,{className:"w-5 h-5 mr-2"}),"Top Queries"]}),x.length>0?(0,Rs.jsx)("div",{className:"space-y-3",children:x.map((e,t)=>(0,Rs.jsxs)("div",{className:"flex items-start justify-between",children:[(0,Rs.jsx)("div",{className:"flex-1 min-w-0 mr-4",children:(0,Rs.jsxs)("div",{className:"flex items-center",children:[(0,Rs.jsx)("span",{className:"flex-shrink-0 w-6 h-6 bg-primary-100 rounded-full flex items-center justify-center text-xs font-semibold text-primary-600 mr-2",children:t+1}),(0,Rs.jsx)("span",{className:"text-sm text-gray-900 truncate",children:e.query})]})}),(0,Rs.jsx)("span",{className:"flex-shrink-0 inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800",children:e.count})]},t))}):(0,Rs.jsx)("div",{className:"text-center py-8 text-gray-500",children:"No queries yet"})]})]}),(0,Rs.jsxs)("div",{className:"bg-white shadow rounded-lg p-6",children:[(0,Rs.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[(0,Rs.jsx)(bn,{className:"w-5 h-5 mr-2"}),"Recent Searches"]}),i.length>0?(0,Rs.jsx)("div",{className:"overflow-hidden shadow ring-1 ring-black ring-opacity-5 rounded-lg",children:(0,Rs.jsxs)("table",{className:"min-w-full divide-y divide-gray-300",children:[(0,Rs.jsx)("thead",{className:"bg-gray-50",children:(0,Rs.jsxs)("tr",{children:[(0,Rs.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Query"}),(0,Rs.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Results"}),(0,Rs.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Avg Score"}),(0,Rs.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Time"}),(0,Rs.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"})]})}),(0,Rs.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:i.slice(0,20).map(e=>(0,Rs.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,Rs.jsx)("td",{className:"px-6 py-4 text-sm text-gray-900 max-w-md truncate",children:e.query}),(0,Rs.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.results_count||0}),(0,Rs.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.avg_relevance_score?"".concat((100*e.avg_relevance_score).toFixed(1),"%"):"N/A"}),(0,Rs.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:[e.processing_time_ms,"ms"]}),(0,Rs.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(e.created_at).toLocaleString()})]},e.id))})]})}):(0,Rs.jsx)("div",{className:"text-center py-12 text-gray-500",children:"No search history available"})]}),(0,Rs.jsxs)("div",{className:"bg-white shadow rounded-lg p-6",children:[(0,Rs.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"System Information"}),(0,Rs.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,Rs.jsxs)("div",{children:[(0,Rs.jsx)("dt",{className:"text-sm font-medium text-gray-500",children:"Embedding Model"}),(0,Rs.jsx)("dd",{className:"mt-1 text-sm text-gray-900",children:(null===s||void 0===s?void 0:s.embedding_model)||"N/A"})]}),(0,Rs.jsxs)("div",{children:[(0,Rs.jsx)("dt",{className:"text-sm font-medium text-gray-500",children:"Vector Dimension"}),(0,Rs.jsx)("dd",{className:"mt-1 text-sm text-gray-900",children:(null===s||void 0===s?void 0:s.vector_dimension)||"N/A"})]}),(0,Rs.jsxs)("div",{children:[(0,Rs.jsx)("dt",{className:"text-sm font-medium text-gray-500",children:"Total Vectors"}),(0,Rs.jsx)("dd",{className:"mt-1 text-sm text-gray-900",children:(null===s||void 0===s?void 0:s.total_vectors)||0})]}),(0,Rs.jsxs)("div",{children:[(0,Rs.jsx)("dt",{className:"text-sm font-medium text-gray-500",children:"Status"}),(0,Rs.jsx)("dd",{className:"mt-1",children:(0,Rs.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:(null===r||void 0===r?void 0:r.status)||"active"})})]})]})]})]})},pl=()=>{const{id:e}=ae(),t=te(),r=(0,n.useRef)(null),[a,s]=(0,n.useState)(null),[l,i]=(0,n.useState)(!0),[o,c]=(0,n.useState)([]),[d,u]=(0,n.useState)(""),[m,p]=(0,n.useState)(!1),[h]=(0,n.useState)("test-".concat(Date.now())),[x,f]=(0,n.useState)(null),[g,y]=(0,n.useState)(null),[v,b]=(0,n.useState)(null),j=(0,n.useRef)(null);(0,n.useEffect)(()=>{w()},[e]),(0,n.useEffect)(()=>{N()},[o]);const w=async()=>{try{i(!0);const t=await ln(e);s(t.data.data),c([{role:"assistant",content:"Hi! I'm ready to answer questions about **".concat(t.data.data.name,"**. Ask me anything!"),timestamp:(new Date).toISOString()}])}catch(t){sr.error("Failed to load knowledge base"),console.error(t)}finally{i(!1)}},N=()=>{var e;null===(e=r.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})},k=()=>{y(null),b(null),j.current&&(j.current.value="")};return l?(0,Rs.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,Rs.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):(0,Rs.jsxs)("div",{className:"h-screen flex flex-col bg-gray-50",children:[(0,Rs.jsx)("div",{className:"bg-white border-b border-gray-200 px-6 py-4",children:(0,Rs.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Rs.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,Rs.jsx)("button",{onClick:()=>t("/knowledge/".concat(e,"/documents")),className:"text-gray-600 hover:text-gray-900",children:(0,Rs.jsx)(Jn,{className:"w-5 h-5"})}),(0,Rs.jsxs)("div",{children:[(0,Rs.jsx)("h1",{className:"text-xl font-bold text-gray-900",children:"Test Chat"}),(0,Rs.jsx)("p",{className:"text-sm text-gray-500",children:null===a||void 0===a?void 0:a.name})]})]}),(0,Rs.jsxs)("button",{onClick:()=>{c([{role:"assistant",content:"Chat cleared! Ask me anything about **".concat(null===a||void 0===a?void 0:a.name,"**."),timestamp:(new Date).toISOString()}])},className:"inline-flex items-center px-3 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50",children:[(0,Rs.jsx)(Cn,{className:"w-4 h-4 mr-2"}),"Clear Chat"]})]})}),(0,Rs.jsx)("div",{className:"flex-1 overflow-y-auto px-6 py-6",children:(0,Rs.jsxs)("div",{className:"max-w-4xl mx-auto space-y-6",children:[o.map((e,t)=>(0,Rs.jsx)("div",{className:"flex ".concat("user"===e.role?"justify-end":"justify-start"),children:(0,Rs.jsxs)("div",{className:"flex max-w-3xl ".concat("user"===e.role?"flex-row-reverse":"flex-row"," gap-3"),children:[(0,Rs.jsx)("div",{className:"flex-shrink-0 w-8 h-8 rounded-full flex items-center justify-center ".concat("user"===e.role?"bg-primary-600 text-white":"bg-gray-200 text-gray-600"),children:"user"===e.role?(0,Rs.jsx)(vn,{className:"w-5 h-5"}):(0,Rs.jsx)(Vs,{className:"w-5 h-5"})}),(0,Rs.jsxs)("div",{className:"flex-1 ".concat("user"===e.role?"text-right":"text-left"),children:[(0,Rs.jsx)("div",{className:"inline-block px-4 py-3 rounded-lg ".concat("user"===e.role?"bg-primary-600 text-white":e.error?"bg-red-50 text-red-900 border border-red-200":"bg-white text-gray-900 border border-gray-200"),children:(0,Rs.jsx)("div",{className:"prose prose-sm max-w-none",children:e.content.split("\n").map((e,t)=>{const r=e.split(/(\*\*.*?\*\*)/g);return(0,Rs.jsx)("p",{className:"mb-2 last:mb-0",children:r.map((e,t)=>e.startsWith("**")&&e.endsWith("**")?(0,Rs.jsx)("strong",{children:e.slice(2,-2)},t):(0,Rs.jsx)("span",{children:e},t))},t)})})}),(0,Rs.jsxs)("div",{className:"flex items-center gap-2 mt-1 text-xs text-gray-500 ".concat("user"===e.role?"justify-end":"justify-start"),children:[(0,Rs.jsx)("span",{children:new Date(e.timestamp).toLocaleTimeString()}),"assistant"===e.role&&(0,Rs.jsx)("button",{onClick:()=>((e,t)=>{navigator.clipboard.writeText(e),f(t),setTimeout(()=>f(null),2e3),sr.success("Copied to clipboard")})(e.content,t),className:"hover:text-gray-700",children:x===t?(0,Rs.jsx)(Mn,{className:"w-3 h-3"}):(0,Rs.jsx)(Rn,{className:"w-3 h-3"})})]}),e.sources&&e.sources.length>0&&(0,Rs.jsx)("div",{className:"mt-2 text-xs",children:(0,Rs.jsxs)("details",{className:"cursor-pointer",children:[(0,Rs.jsxs)("summary",{className:"text-gray-500 hover:text-gray-700",children:["View sources (",e.sources.length,")"]}),(0,Rs.jsx)("div",{className:"mt-2 space-y-1 text-gray-600",children:e.sources.map((e,t)=>(0,Rs.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Rs.jsx)("span",{children:e.document}),(0,Rs.jsxs)("span",{className:"text-gray-400",children:[(100*e.score).toFixed(0),"%"]})]},t))})]})})]})]})},t)),m&&(0,Rs.jsx)("div",{className:"flex justify-start",children:(0,Rs.jsxs)("div",{className:"flex gap-3 max-w-3xl",children:[(0,Rs.jsx)("div",{className:"flex-shrink-0 w-8 h-8 rounded-full bg-gray-200 flex items-center justify-center",children:(0,Rs.jsx)(Vs,{className:"w-5 h-5 text-gray-600"})}),(0,Rs.jsx)("div",{className:"bg-white border border-gray-200 rounded-lg px-4 py-3",children:(0,Rs.jsxs)("div",{className:"flex space-x-2",children:[(0,Rs.jsx)("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce"}),(0,Rs.jsx)("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),(0,Rs.jsx)("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})})]})}),(0,Rs.jsx)("div",{ref:r})]})}),(0,Rs.jsx)("div",{className:"bg-white border-t border-gray-200 px-6 py-4",children:(0,Rs.jsxs)("form",{onSubmit:async t=>{if(t.preventDefault(),!d.trim()&&!g||m)return;const r={role:"user",content:d.trim()||"[Image Query]",timestamp:(new Date).toISOString(),hasImage:!!g};c(e=>[...e,r]);const a=d.trim(),s=g,n=v;u(""),k(),p(!0);try{const t={kb_id:e,query:a||"Show me similar images",top_k:5,search_type:s?a?"hybrid":"image":"text"};s&&(t.image_base64=n.split(",")[1]);const r=await cn(t),l=r.data.data.text_results||[],i=r.data.data.image_results||[];let o="";0===l.length&&0===i.length?o="I couldn't find any relevant information or images in the knowledge base for that query. Could you try rephrasing or asking something else?":(l.length>0&&(o="Based on the knowledge base:\n\n".concat(l[0].content,"\n\n"),l.length>1&&(o+="\n**Additional relevant information:**\n",l.slice(1,3).forEach((e,t)=>{o+="\n".concat(t+2,". ").concat(e.content.substring(0,200),"...")})),o+="\n\n**Text Sources:**\n",l.forEach((e,t)=>{o+="- ".concat(e.source.document_name," (relevance: ").concat((100*e.score).toFixed(0),"%)\n")})),i.length>0&&(l.length>0&&(o+="\n\n"),o+="**Found ".concat(i.length," relevant image").concat(i.length>1?"s":"",":**\n\n"),i.forEach((e,t)=>{var r;o+="".concat(t+1,". ").concat(e.filename||"Image"," (similarity: ").concat((100*e.score).toFixed(0),"%)\n"),null!==(r=e.metadata)&&void 0!==r&&r.description&&(o+="   Description: ".concat(e.metadata.description,"\n"))})));const d={role:"assistant",content:o,timestamp:(new Date).toISOString(),sources:l.map(e=>({document:e.source.document_name,score:e.score,chunk_index:e.source.chunk_index})),imageResults:i};c(e=>[...e,d])}catch(l){console.error("Chat error:",l);const e={role:"assistant",content:"Sorry, I encountered an error while searching the knowledge base. Please try again.",timestamp:(new Date).toISOString(),error:!0};c(t=>[...t,e]),sr.error("Failed to get response")}finally{p(!1)}},className:"max-w-4xl mx-auto",children:[v&&(0,Rs.jsxs)("div",{className:"mb-3 flex items-start gap-3 p-3 bg-gray-50 rounded-lg border border-gray-200",children:[(0,Rs.jsx)("img",{src:v,alt:"Selected",className:"w-20 h-20 object-cover rounded"}),(0,Rs.jsxs)("div",{className:"flex-1",children:[(0,Rs.jsx)("p",{className:"text-sm font-medium text-gray-900",children:null===g||void 0===g?void 0:g.name}),(0,Rs.jsxs)("p",{className:"text-xs text-gray-500",children:[g&&(g.size/1024).toFixed(1)," KB"]})]}),(0,Rs.jsx)("button",{type:"button",onClick:k,className:"text-gray-400 hover:text-gray-600",children:(0,Rs.jsx)(tn,{className:"w-5 h-5"})})]}),(0,Rs.jsxs)("div",{className:"flex gap-3",children:[(0,Rs.jsx)("input",{ref:j,type:"file",accept:"image/jpeg,image/jpg,image/png,image/gif,image/webp",onChange:e=>{const t=e.target.files[0];if(!t)return;if(!["image/jpeg","image/jpg","image/png","image/gif","image/webp"].includes(t.type))return void sr.error("Invalid image type. Only JPG, PNG, GIF, and WEBP are supported.");if(t.size>10485760)return void sr.error("Image too large. Maximum size is 10MB.");const r=new FileReader;r.onloadend=()=>{y(t),b(r.result)},r.readAsDataURL(t)},className:"hidden"}),(0,Rs.jsx)("button",{type:"button",onClick:()=>{var e;return null===(e=j.current)||void 0===e?void 0:e.click()},disabled:m,className:"inline-flex items-center p-2 border border-gray-300 rounded-lg shadow-sm hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",title:"Add image to search",children:(0,Rs.jsx)(An,{className:"w-5 h-5 text-gray-600"})}),(0,Rs.jsx)("input",{type:"text",value:d,onChange:e=>u(e.target.value),placeholder:g?"Describe what you're looking for (optional)...":"Ask a question about the knowledge base...",disabled:m,className:"flex-1 rounded-lg border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 disabled:opacity-50"}),(0,Rs.jsx)("button",{type:"submit",disabled:m||!d.trim()&&!g,className:"inline-flex items-center px-6 py-2 border border-transparent rounded-lg shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700 disabled:opacity-50 disabled:cursor-not-allowed",children:m?(0,Rs.jsx)(Fn,{className:"w-5 h-5 animate-spin"}):(0,Rs.jsx)(Ln,{className:"w-5 h-5"})})]})]})})]})},hl=qs("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),xl=qs("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]),fl=qs("ExternalLink",[["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}],["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["line",{x1:"10",x2:"21",y1:"14",y2:"3",key:"18c3s4"}]]),gl=qs("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),yl=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Ms.get("/shopify/stores",{params:e})},vl=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Ms.post("/shopify/sync/".concat(e),t)},bl=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Ms.get("/shopify/products",{params:e})},jl=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Ms.get("/shopify/stats",{params:e})},wl=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Ms.get("/shopify/products/stats",{params:e})},Nl=()=>{const[e,t]=(0,n.useState)([]),[r,a]=(0,n.useState)(null),[s,l]=(0,n.useState)({}),[i,o]=(0,n.useState)(!0),[c,d]=(0,n.useState)(null),u=(0,n.useRef)(null);(0,n.useEffect)(()=>(m(),h(),()=>{x()}),[]),(0,n.useEffect)(()=>{e.length>0&&p()},[e]);const m=async()=>{try{o(!0);const[e,r]=await Promise.all([yl(),jl()]);t(e.data.data.stores||[]),a(r.data.data)}catch(e){console.error("Load data error:",e),d(e.message)}finally{o(!1)}},p=async()=>{try{const t=e.map(e=>{return(t=e.id,Ms.get("/shopify/stores/".concat(t,"/sync-status"))).then(t=>({storeId:e.id,status:t.data.data})).catch(t=>(console.error("Error loading sync status for ".concat(e.id,":"),t),{storeId:e.id,status:null}));var t}),r=await Promise.all(t),a={};r.forEach(e=>{let{storeId:t,status:r}=e;a[t]=r}),l(a)}catch(t){console.error("Load sync statuses error:",t)}},h=()=>{u.current=setInterval(()=>{p()},3e3)},x=()=>{u.current&&(clearInterval(u.current),u.current=null)},f=e=>{switch(e){case"active":return(0,Rs.jsx)(sn,{className:"w-5 h-5 text-green-500"});case"error":return(0,Rs.jsx)(hl,{className:"w-5 h-5 text-red-500"});default:return(0,Rs.jsx)(Gn,{className:"w-5 h-5 text-yellow-500"})}},g=e=>{if(!e)return"Never";const t=Math.floor((new Date-new Date(e))/1e3);return t<60?"".concat(t,"s ago"):t<3600?"".concat(Math.floor(t/60),"m ago"):t<86400?"".concat(Math.floor(t/3600),"h ago"):"".concat(Math.floor(t/86400),"d ago")},y=e=>{var t;const r=s[e.id];if(!r)return(0,Rs.jsx)("div",{className:"text-sm text-gray-500",children:"Loading status..."});if(r.is_syncing){const{progress:e,timing:t}=r;return(0,Rs.jsxs)("div",{className:"space-y-2",children:[(0,Rs.jsxs)("div",{className:"relative",children:[(0,Rs.jsxs)("div",{className:"flex items-center justify-between text-sm mb-1",children:[(0,Rs.jsxs)("span",{className:"text-blue-600 font-medium flex items-center",children:[(0,Rs.jsx)(Fn,{className:"w-4 h-4 mr-1 animate-spin"}),"Syncing..."]}),(0,Rs.jsxs)("span",{className:"text-gray-600",children:[e.percentage,"%"]})]}),(0,Rs.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,Rs.jsx)("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:"".concat(e.percentage,"%")}})})]}),(0,Rs.jsxs)("div",{className:"flex items-center justify-between text-xs text-gray-600",children:[(0,Rs.jsxs)("span",{children:[e.products.processed," / ",e.products.total," products"]}),(0,Rs.jsx)("span",{children:t.estimated_remaining_seconds>0?"~".concat((a=t.estimated_remaining_seconds,a<60?"".concat(a,"s"):a<3600?"".concat(Math.floor(a/60),"m ").concat(a%60,"s"):"".concat(Math.floor(a/3600),"h ").concat(Math.floor(a%3600/60),"m"))," remaining"):"Calculating..."})]}),e.images.total>0&&(0,Rs.jsxs)("div",{className:"text-xs text-gray-500",children:[e.images.processed," / ",e.images.total," images processed"]})]})}var a;return(0,Rs.jsxs)("div",{className:"space-y-1",children:[r.last_sync?(0,Rs.jsxs)(Rs.Fragment,{children:[(0,Rs.jsxs)("div",{className:"flex items-center text-sm text-gray-600",children:[(0,Rs.jsx)(sn,{className:"w-4 h-4 mr-1 text-green-500"}),(0,Rs.jsxs)("span",{children:["Last synced: ",g(r.last_sync.completed_at)]})]}),(0,Rs.jsxs)("div",{className:"text-xs text-gray-500",children:[r.last_sync.products_processed," products, ",r.last_sync.images_processed," images"]})]}):(0,Rs.jsx)("div",{className:"text-sm text-gray-500",children:"Never synced"}),(null===(t=r.next_sync)||void 0===t?void 0:t.enabled)&&r.next_sync.next_sync_at&&(0,Rs.jsxs)("div",{className:"flex items-center text-xs text-gray-500 mt-1",children:[(0,Rs.jsx)(bn,{className:"w-3 h-3 mr-1"}),(0,Rs.jsxs)("span",{children:["Next sync: ",g(r.next_sync.next_sync_at)]})]})]})};return i?(0,Rs.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,Rs.jsx)(el,{className:"w-8 h-8 animate-spin text-primary-600"})}):(0,Rs.jsxs)("div",{className:"space-y-6",children:[(0,Rs.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Rs.jsxs)("div",{children:[(0,Rs.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Shopify Integration"}),(0,Rs.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Manage your Shopify stores and sync products"})]}),(0,Rs.jsxs)(Re,{to:"/shopify/connect",className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700",children:[(0,Rs.jsx)(Qs,{className:"w-4 h-4 mr-2"}),"Connect Store"]})]}),c&&(0,Rs.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:(0,Rs.jsxs)("div",{className:"flex",children:[(0,Rs.jsx)(hl,{className:"w-5 h-5 text-red-400 mr-3"}),(0,Rs.jsxs)("div",{children:[(0,Rs.jsx)("h3",{className:"text-sm font-medium text-red-800",children:"Error"}),(0,Rs.jsx)("p",{className:"mt-1 text-sm text-red-700",children:c})]})]})}),r&&(0,Rs.jsxs)("div",{className:"grid grid-cols-1 gap-5 sm:grid-cols-2 lg:grid-cols-4",children:[(0,Rs.jsx)("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:(0,Rs.jsx)("div",{className:"p-5",children:(0,Rs.jsxs)("div",{className:"flex items-center",children:[(0,Rs.jsx)("div",{className:"flex-shrink-0",children:(0,Rs.jsx)(zn,{className:"h-6 w-6 text-gray-400"})}),(0,Rs.jsx)("div",{className:"ml-5 w-0 flex-1",children:(0,Rs.jsxs)("dl",{children:[(0,Rs.jsx)("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Connected Stores"}),(0,Rs.jsxs)("dd",{className:"flex items-baseline",children:[(0,Rs.jsx)("div",{className:"text-2xl font-semibold text-gray-900",children:r.stores.active}),(0,Rs.jsxs)("div",{className:"ml-2 text-sm text-gray-500",children:["/ ",r.stores.total]})]})]})})]})})}),(0,Rs.jsx)("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:(0,Rs.jsx)("div",{className:"p-5",children:(0,Rs.jsxs)("div",{className:"flex items-center",children:[(0,Rs.jsx)("div",{className:"flex-shrink-0",children:(0,Rs.jsx)(xl,{className:"h-6 w-6 text-gray-400"})}),(0,Rs.jsx)("div",{className:"ml-5 w-0 flex-1",children:(0,Rs.jsxs)("dl",{children:[(0,Rs.jsx)("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Products"}),(0,Rs.jsxs)("dd",{className:"flex items-baseline",children:[(0,Rs.jsx)("div",{className:"text-2xl font-semibold text-gray-900",children:r.products.active}),(0,Rs.jsxs)("div",{className:"ml-2 text-sm text-gray-500",children:["/ ",r.products.total]})]})]})})]})})}),(0,Rs.jsx)("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:(0,Rs.jsx)("div",{className:"p-5",children:(0,Rs.jsxs)("div",{className:"flex items-center",children:[(0,Rs.jsx)("div",{className:"flex-shrink-0",children:(0,Rs.jsx)(An,{className:"h-6 w-6 text-gray-400"})}),(0,Rs.jsx)("div",{className:"ml-5 w-0 flex-1",children:(0,Rs.jsxs)("dl",{children:[(0,Rs.jsx)("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Images"}),(0,Rs.jsx)("dd",{className:"text-2xl font-semibold text-gray-900",children:r.images.total})]})})]})})}),(0,Rs.jsx)("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:(0,Rs.jsx)("div",{className:"p-5",children:(0,Rs.jsxs)("div",{className:"flex items-center",children:[(0,Rs.jsx)("div",{className:"flex-shrink-0",children:(0,Rs.jsx)($s,{className:"h-6 w-6 text-gray-400"})}),(0,Rs.jsx)("div",{className:"ml-5 w-0 flex-1",children:(0,Rs.jsxs)("dl",{children:[(0,Rs.jsx)("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Sync Jobs"}),(0,Rs.jsxs)("dd",{className:"flex items-baseline",children:[(0,Rs.jsx)("div",{className:"text-2xl font-semibold text-gray-900",children:r.sync_jobs.completed}),(0,Rs.jsxs)("div",{className:"ml-2 text-sm text-gray-500",children:["/ ",r.sync_jobs.total]})]})]})})]})})})]}),(0,Rs.jsx)("div",{className:"bg-white shadow rounded-lg",children:(0,Rs.jsxs)("div",{className:"px-4 py-5 sm:p-6",children:[(0,Rs.jsx)("h3",{className:"text-lg leading-6 font-medium text-gray-900 mb-4",children:"Connected Stores"}),0===e.length?(0,Rs.jsxs)("div",{className:"text-center py-12",children:[(0,Rs.jsx)(zn,{className:"mx-auto h-12 w-12 text-gray-400"}),(0,Rs.jsx)("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No stores connected"}),(0,Rs.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Get started by connecting your first Shopify store"}),(0,Rs.jsx)("div",{className:"mt-6",children:(0,Rs.jsxs)(Re,{to:"/shopify/connect",className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700",children:[(0,Rs.jsx)(Qs,{className:"w-4 h-4 mr-2"}),"Connect Store"]})})]}):(0,Rs.jsx)("div",{className:"space-y-4",children:e.map(e=>{var t,r;return(0,Rs.jsx)("div",{className:"border border-gray-200 rounded-lg p-4 hover:border-primary-300 transition-colors",children:(0,Rs.jsxs)("div",{className:"flex items-start justify-between",children:[(0,Rs.jsxs)("div",{className:"flex items-start space-x-3 flex-1",children:[f(e.status),(0,Rs.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,Rs.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Rs.jsx)("h4",{className:"text-sm font-medium text-gray-900",children:e.shop_domain}),(0,Rs.jsx)("a",{href:"https://".concat(e.shop_domain),target:"_blank",rel:"noopener noreferrer",className:"text-gray-400 hover:text-gray-600",children:(0,Rs.jsx)(fl,{className:"w-4 h-4"})})]}),(0,Rs.jsx)("div",{className:"mt-3",children:y(e)})]})]}),(0,Rs.jsxs)("div",{className:"flex items-center space-x-2 ml-4",children:[(0,Rs.jsxs)("button",{onClick:()=>(async e=>{try{const t=await vl(e);alert("Sync started! Job ID: ".concat(t.data.data.job_id)),await p()}catch(a){var t,r;alert("Sync failed: ".concat((null===(t=a.response)||void 0===t||null===(r=t.data)||void 0===r?void 0:r.error)||a.message))}})(e.id),disabled:null===(t=s[e.id])||void 0===t?void 0:t.is_syncing,className:"inline-flex items-center px-3 py-1.5 border border-gray-300 shadow-sm text-xs font-medium rounded text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:[(0,Rs.jsx)(el,{className:"w-3 h-3 mr-1 ".concat(null!==(r=s[e.id])&&void 0!==r&&r.is_syncing?"animate-spin":"")}),"Sync"]}),(0,Rs.jsxs)(Re,{to:"/shopify/stores/".concat(e.id),className:"inline-flex items-center px-3 py-1.5 border border-gray-300 shadow-sm text-xs font-medium rounded text-gray-700 bg-white hover:bg-gray-50",children:[(0,Rs.jsx)(gl,{className:"w-3 h-3 mr-1"}),"Settings"]}),(0,Rs.jsxs)(Re,{to:"/shopify/products?kb_id=".concat(e.kb_id),className:"inline-flex items-center px-3 py-1.5 border border-primary-300 shadow-sm text-xs font-medium rounded text-primary-700 bg-primary-50 hover:bg-primary-100",children:[(0,Rs.jsx)(xl,{className:"w-3 h-3 mr-1"}),"Products"]})]})]})},e.id)})})]})})]})},kl=qs("Key",[["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["path",{d:"m15.5 7.5 3 3L22 7l-3-3",key:"1rn1fs"}]]),_l=qs("HelpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),Sl=()=>{const e=te(),[t,r]=(0,n.useState)([]),[a,s]=(0,n.useState)(!1),[l,i]=(0,n.useState)(!1),[o,c]=(0,n.useState)(null),[d,u]=(0,n.useState)({kb_id:"",shop_domain:"",access_token:"",sync_settings:{auto_sync_enabled:!0,sync_frequency_minutes:1440,sync_status_filter:"active",sync_reviews:!1}});(0,n.useEffect)(()=>{m()},[]);const m=async()=>{try{const e=await nn();r(e.data.data.knowledge_bases||[])}catch(e){console.error("Load KBs error:",e)}},p=e=>{const{name:t,value:r,type:a,checked:s}=e.target;if(t.startsWith("sync_")){const e=t.replace("sync_","");u(t=>He(He({},t),{},{sync_settings:He(He({},t.sync_settings),{},{[e]:"checkbox"===a?s:"number"===a?parseInt(r):r})}))}else u(e=>He(He({},e),{},{[t]:r}))};return(0,Rs.jsxs)("div",{className:"max-w-3xl mx-auto",children:[(0,Rs.jsxs)("div",{className:"mb-6",children:[(0,Rs.jsxs)("button",{onClick:()=>e("/shopify"),className:"inline-flex items-center text-sm text-gray-500 hover:text-gray-700 mb-4",children:[(0,Rs.jsx)(Jn,{className:"w-4 h-4 mr-1"}),"Back to Stores"]}),(0,Rs.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Connect Shopify Store"}),(0,Rs.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Connect your Shopify store to sync products and enable AI-powered search"})]}),(0,Rs.jsxs)("form",{onSubmit:async t=>{t.preventDefault(),s(!0);try{await(e=>Ms.post("/shopify/connect",e))(d),alert("Store connected successfully!"),e("/shopify")}catch(n){var r,a;alert("Connection failed: ".concat((null===(r=n.response)||void 0===r||null===(a=r.data)||void 0===a?void 0:a.message)||n.message))}finally{s(!1)}},className:"bg-white shadow rounded-lg",children:[(0,Rs.jsxs)("div",{className:"p-6 space-y-6",children:[(0,Rs.jsxs)("div",{children:[(0,Rs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Knowledge Base *"}),(0,Rs.jsxs)("select",{name:"kb_id",value:d.kb_id,onChange:p,className:"w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500",required:!0,children:[(0,Rs.jsx)("option",{value:"",children:"Select a knowledge base"}),t.map(e=>(0,Rs.jsx)("option",{value:e.id,children:e.name},e.id))]}),(0,Rs.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Products will be synced to this knowledge base"})]}),(0,Rs.jsxs)("div",{children:[(0,Rs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Store Domain *"}),(0,Rs.jsxs)("div",{className:"flex rounded-md shadow-sm",children:[(0,Rs.jsxs)("span",{className:"inline-flex items-center px-3 rounded-l-md border border-r-0 border-gray-300 bg-gray-50 text-gray-500 text-sm",children:[(0,Rs.jsx)(zn,{className:"w-4 h-4 mr-1"}),"https://"]}),(0,Rs.jsx)("input",{type:"text",name:"shop_domain",value:d.shop_domain,onChange:p,className:"flex-1 rounded-none rounded-r-md border-gray-300 focus:border-primary-500 focus:ring-primary-500",placeholder:"your-store.myshopify.com",required:!0})]}),(0,Rs.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Your Shopify store domain (e.g., your-store.myshopify.com)"})]}),(0,Rs.jsxs)("div",{children:[(0,Rs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Access Token *"}),(0,Rs.jsxs)("div",{className:"flex rounded-md shadow-sm",children:[(0,Rs.jsx)("span",{className:"inline-flex items-center px-3 rounded-l-md border border-r-0 border-gray-300 bg-gray-50 text-gray-500 text-sm",children:(0,Rs.jsx)(kl,{className:"w-4 h-4"})}),(0,Rs.jsx)("input",{type:"password",name:"access_token",value:d.access_token,onChange:p,className:"flex-1 rounded-none rounded-r-md border-gray-300 focus:border-primary-500 focus:ring-primary-500",placeholder:"shpat_xxxxxxxxxxxxx",required:!0})]}),(0,Rs.jsxs)("p",{className:"mt-1 text-sm text-gray-500 flex items-start",children:[(0,Rs.jsx)(_l,{className:"w-4 h-4 mr-1 mt-0.5 flex-shrink-0"}),(0,Rs.jsx)("span",{children:"Create a private app in Shopify Admin \u2192 Apps \u2192 Develop apps. Required scopes: read_products, read_inventory"})]})]}),(0,Rs.jsxs)("div",{children:[(0,Rs.jsx)("button",{type:"button",onClick:async()=>{i(!0),c(null);try{const e=await(e=>Ms.post("/shopify/test-connection",e))({shop_domain:d.shop_domain,access_token:d.access_token});e.data.data.connected?c({success:!0,message:e.data.data.credits||"Connection successful!",shop:e.data.data.shop}):c({success:!1,message:"Connection failed"})}catch(r){var e,t;c({success:!1,message:(null===(e=r.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.message)||r.message||"Connection failed"})}finally{i(!1)}},disabled:!d.shop_domain||!d.access_token||l,className:"inline-flex items-center px-4 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:l?"Testing...":"Test Connection"}),o&&(0,Rs.jsx)("div",{className:"mt-3 p-4 rounded-md ".concat(o.success?"bg-green-50 border border-green-200":"bg-red-50 border border-red-200"),children:(0,Rs.jsxs)("div",{className:"flex",children:[o.success?(0,Rs.jsx)(sn,{className:"w-5 h-5 text-green-400 mr-2"}):(0,Rs.jsx)(hl,{className:"w-5 h-5 text-red-400 mr-2"}),(0,Rs.jsxs)("div",{children:[(0,Rs.jsx)("h4",{className:"text-sm font-medium ".concat(o.success?"text-green-800":"text-red-800"),children:o.success?"Connection Successful":"Connection Failed"}),(0,Rs.jsx)("p",{className:"mt-1 text-sm ".concat(o.success?"text-green-700":"text-red-700"),children:o.message}),o.shop&&(0,Rs.jsxs)("div",{className:"mt-2 text-sm text-green-700",children:[(0,Rs.jsxs)("p",{children:["Shop: ",o.shop.name]}),(0,Rs.jsxs)("p",{children:["Email: ",o.shop.email]}),(0,Rs.jsxs)("p",{children:["Currency: ",o.shop.currency]})]})]})]})})]}),(0,Rs.jsx)("hr",{}),(0,Rs.jsxs)("div",{children:[(0,Rs.jsx)("h3",{className:"text-base font-medium text-gray-900 mb-4",children:"Sync Settings"}),(0,Rs.jsxs)("div",{className:"space-y-4",children:[(0,Rs.jsxs)("div",{className:"flex items-start",children:[(0,Rs.jsx)("div",{className:"flex items-center h-5",children:(0,Rs.jsx)("input",{type:"checkbox",name:"sync_auto_sync_enabled",checked:d.sync_settings.auto_sync_enabled,onChange:p,className:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded"})}),(0,Rs.jsxs)("div",{className:"ml-3",children:[(0,Rs.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Enable automatic sync"}),(0,Rs.jsx)("p",{className:"text-sm text-gray-500",children:"Automatically sync products on a schedule"})]})]}),d.sync_settings.auto_sync_enabled&&(0,Rs.jsxs)("div",{children:[(0,Rs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Sync Frequency"}),(0,Rs.jsxs)("select",{name:"sync_sync_frequency_minutes",value:d.sync_settings.sync_frequency_minutes,onChange:p,className:"w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500",children:[(0,Rs.jsx)("option",{value:"60",children:"Every hour"}),(0,Rs.jsx)("option",{value:"360",children:"Every 6 hours"}),(0,Rs.jsx)("option",{value:"720",children:"Every 12 hours"}),(0,Rs.jsx)("option",{value:"1440",children:"Daily"}),(0,Rs.jsx)("option",{value:"10080",children:"Weekly"})]})]}),(0,Rs.jsxs)("div",{children:[(0,Rs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Sync Products"}),(0,Rs.jsxs)("select",{name:"sync_sync_status_filter",value:d.sync_settings.sync_status_filter,onChange:p,className:"w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500",children:[(0,Rs.jsx)("option",{value:"active",children:"Active products only"}),(0,Rs.jsx)("option",{value:"all",children:"All products"}),(0,Rs.jsx)("option",{value:"draft",children:"Draft products only"})]})]}),(0,Rs.jsxs)("div",{className:"flex items-start",children:[(0,Rs.jsx)("div",{className:"flex items-center h-5",children:(0,Rs.jsx)("input",{type:"checkbox",name:"sync_sync_reviews",checked:d.sync_settings.sync_reviews,onChange:p,className:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded"})}),(0,Rs.jsxs)("div",{className:"ml-3",children:[(0,Rs.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Sync product reviews"}),(0,Rs.jsx)("p",{className:"text-sm text-gray-500",children:"Include product reviews in sync (if available)"})]})]})]})]})]}),(0,Rs.jsxs)("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-200 flex items-center justify-end space-x-3",children:[(0,Rs.jsx)("button",{type:"button",onClick:()=>e("/shopify"),className:"px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50",children:"Cancel"}),(0,Rs.jsx)("button",{type:"submit",disabled:a||!(null!==o&&void 0!==o&&o.success),className:"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700 disabled:opacity-50 disabled:cursor-not-allowed",children:a?"Connecting...":"Connect Store"})]})]})]})},Cl=qs("ArrowUpDown",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]),El=qs("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]]),Pl=qs("Tag",[["path",{d:"M12 2H2v10l9.29 9.29c.94.94 2.48.94 3.42 0l6.58-6.58c.94-.94.94-2.48 0-3.42L12 2Z",key:"14b2ls"}],["path",{d:"M7 7h.01",key:"7u93v4"}]]),Tl=qs("Box",[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]),Al=qs("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),Ol=qs("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]),Ml=e=>{let{filters:t,onChange:r,onReset:a,vendors:s=[],productTypes:l=[]}=e;const[i,o]=n.useState(!1),c=(e,a)=>{r(He(He({},t),{},{[e]:a}))},d="all"!==t.vendor||"all"!==t.product_type||t.min_price||t.max_price;return(0,Rs.jsxs)("div",{className:"space-y-4",children:[(0,Rs.jsxs)("div",{className:"flex items-center gap-3",children:[(0,Rs.jsxs)("button",{onClick:()=>o(!i),className:"inline-flex items-center px-3 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50",children:[(0,Rs.jsx)(Ol,{className:"w-4 h-4 mr-2"}),"Advanced Filters"]}),d&&(0,Rs.jsxs)("button",{onClick:a,className:"inline-flex items-center px-3 py-2 text-sm text-gray-600 hover:text-gray-900",children:[(0,Rs.jsx)(tn,{className:"w-4 h-4 mr-1"}),"Clear Filters"]})]}),i&&(0,Rs.jsx)("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:(0,Rs.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,Rs.jsxs)("div",{children:[(0,Rs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Vendor"}),(0,Rs.jsxs)("select",{value:t.vendor||"all",onChange:e=>c("vendor",e.target.value),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 text-sm",children:[(0,Rs.jsx)("option",{value:"all",children:"All Vendors"}),s.map(e=>(0,Rs.jsx)("option",{value:e,children:e},e))]})]}),(0,Rs.jsxs)("div",{children:[(0,Rs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Product Type"}),(0,Rs.jsxs)("select",{value:t.product_type||"all",onChange:e=>c("product_type",e.target.value),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 text-sm",children:[(0,Rs.jsx)("option",{value:"all",children:"All Types"}),l.map(e=>(0,Rs.jsx)("option",{value:e,children:e},e))]})]}),(0,Rs.jsxs)("div",{children:[(0,Rs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Min Price (PKR)"}),(0,Rs.jsx)("input",{type:"number",min:"0",step:"100",value:t.min_price||"",onChange:e=>c("min_price",e.target.value),placeholder:"0",className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 text-sm"})]}),(0,Rs.jsxs)("div",{children:[(0,Rs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Max Price (PKR)"}),(0,Rs.jsx)("input",{type:"number",min:"0",step:"100",value:t.max_price||"",onChange:e=>c("max_price",e.target.value),placeholder:"No limit",className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 text-sm"})]})]})})]})},Rl=qs("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),Fl=qs("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),Ll=e=>{let{currentPage:t,totalPages:r,onPageChange:a,pageSize:s,onPageSizeChange:n,totalItems:l}=e;const i=[];let o=Math.max(1,t-Math.floor(3.5)),c=Math.min(r,o+7-1);c-o<6&&(o=Math.max(1,c-7+1));for(let d=o;d<=c;d++)i.push(d);return(0,Rs.jsxs)("div",{className:"flex items-center justify-between border-t border-gray-200 bg-white px-4 py-3 sm:px-6",children:[(0,Rs.jsxs)("div",{className:"flex items-center",children:[(0,Rs.jsx)("span",{className:"text-sm text-gray-700 mr-2",children:"Show"}),(0,Rs.jsxs)("select",{value:s,onChange:e=>n(parseInt(e.target.value)),className:"rounded-md border-gray-300 text-sm focus:border-primary-500 focus:ring-primary-500",children:[(0,Rs.jsx)("option",{value:"10",children:"10"}),(0,Rs.jsx)("option",{value:"20",children:"20"}),(0,Rs.jsx)("option",{value:"50",children:"50"}),(0,Rs.jsx)("option",{value:"100",children:"100"})]}),(0,Rs.jsx)("span",{className:"text-sm text-gray-700 ml-2",children:"per page"})]}),(0,Rs.jsx)("div",{className:"hidden sm:flex sm:flex-1 sm:items-center sm:justify-center",children:(0,Rs.jsxs)("p",{className:"text-sm text-gray-700",children:["Showing"," ",(0,Rs.jsx)("span",{className:"font-medium",children:(t-1)*s+1})," ","-"," ",(0,Rs.jsx)("span",{className:"font-medium",children:Math.min(t*s,l)})," ","of"," ",(0,Rs.jsx)("span",{className:"font-medium",children:l})," ","results"]})}),(0,Rs.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Rs.jsx)("button",{onClick:()=>a(t-1),disabled:1===t,className:"relative inline-flex items-center rounded-md border border-gray-300 bg-white px-2 py-2 text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:(0,Rs.jsx)(Rl,{className:"h-4 w-4"})}),o>1&&(0,Rs.jsxs)(Rs.Fragment,{children:[(0,Rs.jsx)("button",{onClick:()=>a(1),className:"relative inline-flex items-center rounded-md border border-gray-300 bg-white px-3 py-2 text-sm font-medium text-gray-700 hover:bg-gray-50",children:"1"}),o>2&&(0,Rs.jsx)("span",{className:"text-gray-500",children:"..."})]}),i.map(e=>(0,Rs.jsx)("button",{onClick:()=>a(e),className:"relative inline-flex items-center rounded-md px-3 py-2 text-sm font-medium ".concat(e===t?"bg-primary-600 text-white border border-primary-600":"border border-gray-300 bg-white text-gray-700 hover:bg-gray-50"),children:e},e)),c<r&&(0,Rs.jsxs)(Rs.Fragment,{children:[c<r-1&&(0,Rs.jsx)("span",{className:"text-gray-500",children:"..."}),(0,Rs.jsx)("button",{onClick:()=>a(r),className:"relative inline-flex items-center rounded-md border border-gray-300 bg-white px-3 py-2 text-sm font-medium text-gray-700 hover:bg-gray-50",children:r})]}),(0,Rs.jsx)("button",{onClick:()=>a(t+1),disabled:t===r,className:"relative inline-flex items-center rounded-md border border-gray-300 bg-white px-2 py-2 text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:(0,Rs.jsx)(Fl,{className:"h-4 w-4"})})]})]})},Dl=()=>{const[e,t]=De(),r=e.get("kb_id"),[a,s]=(0,n.useState)([]),[l,i]=(0,n.useState)(null),[o,c]=(0,n.useState)({vendors:[],product_types:[]}),[d,u]=(0,n.useState)({page:1,limit:20,total:0,total_pages:0,has_next:!1,has_prev:!1}),[m,p]=(0,n.useState)(!0),[h,x]=(0,n.useState)({search:"",status:"all",vendor:"all",product_type:"all",min_price:"",max_price:"",sort_by:"created_at",sort_order:"DESC"});(0,n.useEffect)(()=>{r&&f()},[r,d.page,d.limit,h]),(0,n.useEffect)(()=>{r&&g()},[r]);const f=async()=>{try{p(!0);const e=He({kb_id:r,page:d.page,limit:d.limit},h);Object.keys(e).forEach(t=>{""!==e[t]&&"all"!==e[t]||delete e[t]});const[t,a]=await Promise.all([bl(e),wl({kb_id:r})]);s(t.data.data.products||[]),u(t.data.data.pagination),i(a.data.data)}catch(e){console.error("Load data error:",e)}finally{p(!1)}},g=async()=>{try{const e=await(e=>Ms.get("/shopify/products/filters/".concat(e)))(r);c(e.data.data)}catch(e){console.error("Load filter options error:",e)}},y=e=>{x(e),u(e=>He(He({},e),{},{page:1}))},v=e=>{x(t=>He(He({},t),{},{sort_by:e,sort_order:t.sort_by===e&&"DESC"===t.sort_order?"ASC":"DESC"})),u(e=>He(He({},e),{},{page:1}))},b=e=>{const t={active:"bg-green-100 text-green-800",draft:"bg-yellow-100 text-yellow-800",archived:"bg-gray-100 text-gray-800"};return t[e]||t.active},j=e=>h.sort_by!==e?(0,Rs.jsx)(Cl,{className:"w-4 h-4 text-gray-400"}):"DESC"===h.sort_order?(0,Rs.jsx)(Cl,{className:"w-4 h-4 text-primary-600"}):(0,Rs.jsx)(Cl,{className:"w-4 h-4 text-primary-600 transform rotate-180"});return(0,Rs.jsxs)("div",{className:"space-y-6",children:[(0,Rs.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Rs.jsxs)("div",{children:[(0,Rs.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Products"}),(0,Rs.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Browse and manage synced products"})]}),(0,Rs.jsx)(Re,{to:"/shopify",className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50",children:"Back to Stores"})]}),l&&(0,Rs.jsxs)("div",{className:"grid grid-cols-1 gap-5 sm:grid-cols-2 lg:grid-cols-4",children:[(0,Rs.jsx)("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:(0,Rs.jsx)("div",{className:"p-5",children:(0,Rs.jsxs)("div",{className:"flex items-center",children:[(0,Rs.jsx)("div",{className:"flex-shrink-0",children:(0,Rs.jsx)(xl,{className:"h-6 w-6 text-blue-600"})}),(0,Rs.jsx)("div",{className:"ml-5 w-0 flex-1",children:(0,Rs.jsxs)("dl",{children:[(0,Rs.jsx)("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Total Products"}),(0,Rs.jsxs)("dd",{className:"flex items-baseline",children:[(0,Rs.jsx)("div",{className:"text-2xl font-semibold text-gray-900",children:l.summary.total_products}),(0,Rs.jsx)("div",{className:"ml-2 flex items-baseline text-sm text-gray-600",children:(0,Rs.jsxs)("span",{className:"text-green-600",children:[l.by_status.active," active"]})})]})]})})]})})}),(0,Rs.jsx)("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:(0,Rs.jsx)("div",{className:"p-5",children:(0,Rs.jsxs)("div",{className:"flex items-center",children:[(0,Rs.jsx)("div",{className:"flex-shrink-0",children:(0,Rs.jsx)(El,{className:"h-6 w-6 text-purple-600"})}),(0,Rs.jsx)("div",{className:"ml-5 w-0 flex-1",children:(0,Rs.jsxs)("dl",{children:[(0,Rs.jsx)("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Vendors"}),(0,Rs.jsx)("dd",{className:"text-2xl font-semibold text-gray-900",children:l.summary.total_vendors})]})})]})})}),(0,Rs.jsx)("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:(0,Rs.jsx)("div",{className:"p-5",children:(0,Rs.jsxs)("div",{className:"flex items-center",children:[(0,Rs.jsx)("div",{className:"flex-shrink-0",children:(0,Rs.jsx)(Pl,{className:"h-6 w-6 text-orange-600"})}),(0,Rs.jsx)("div",{className:"ml-5 w-0 flex-1",children:(0,Rs.jsxs)("dl",{children:[(0,Rs.jsx)("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Product Types"}),(0,Rs.jsx)("dd",{className:"text-2xl font-semibold text-gray-900",children:l.summary.total_product_types})]})})]})})}),(0,Rs.jsx)("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:(0,Rs.jsx)("div",{className:"p-5",children:(0,Rs.jsxs)("div",{className:"flex items-center",children:[(0,Rs.jsx)("div",{className:"flex-shrink-0",children:(0,Rs.jsx)(Tl,{className:"h-6 w-6 text-green-600"})}),(0,Rs.jsx)("div",{className:"ml-5 w-0 flex-1",children:(0,Rs.jsxs)("dl",{children:[(0,Rs.jsx)("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Total Inventory"}),(0,Rs.jsx)("dd",{className:"text-2xl font-semibold text-gray-900",children:l.summary.total_inventory.toLocaleString()})]})})]})})})]}),(0,Rs.jsxs)("div",{className:"bg-white shadow rounded-lg",children:[(0,Rs.jsx)("div",{className:"p-4 border-b border-gray-200",children:(0,Rs.jsxs)("div",{className:"flex flex-col space-y-4",children:[(0,Rs.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,Rs.jsx)("form",{onSubmit:e=>{e.preventDefault(),u(e=>He(He({},e),{},{page:1}))},className:"flex-1",children:(0,Rs.jsxs)("div",{className:"relative",children:[(0,Rs.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,Rs.jsx)(Vn,{className:"h-5 w-5 text-gray-400"})}),(0,Rs.jsx)("input",{type:"text",value:h.search,onChange:e=>x(t=>He(He({},t),{},{search:e.target.value})),className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-primary-500 focus:border-primary-500",placeholder:"Search products, vendors, types..."})]})}),(0,Rs.jsxs)("select",{value:h.status,onChange:e=>y(He(He({},h),{},{status:e.target.value})),className:"block rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500",children:[(0,Rs.jsx)("option",{value:"all",children:"All Status"}),(0,Rs.jsx)("option",{value:"active",children:"Active"}),(0,Rs.jsx)("option",{value:"draft",children:"Draft"}),(0,Rs.jsx)("option",{value:"archived",children:"Archived"})]}),(0,Rs.jsxs)("button",{onClick:f,className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50",children:[(0,Rs.jsx)(el,{className:"w-4 h-4 mr-2"}),"Refresh"]})]}),(0,Rs.jsx)(Ml,{filters:h,onChange:y,onReset:()=>{x({search:"",status:"all",vendor:"all",product_type:"all",min_price:"",max_price:"",sort_by:"created_at",sort_order:"DESC"}),u(e=>He(He({},e),{},{page:1}))},vendors:o.vendors,productTypes:o.product_types})]})}),m?(0,Rs.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,Rs.jsx)(el,{className:"w-8 h-8 animate-spin text-primary-600"})}):0===a.length?(0,Rs.jsxs)("div",{className:"text-center py-12",children:[(0,Rs.jsx)(xl,{className:"mx-auto h-12 w-12 text-gray-400"}),(0,Rs.jsx)("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No products found"}),(0,Rs.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Try adjusting your search or filters"})]}):(0,Rs.jsxs)(Rs.Fragment,{children:[(0,Rs.jsx)("div",{className:"overflow-x-auto",children:(0,Rs.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,Rs.jsx)("thead",{className:"bg-gray-50",children:(0,Rs.jsxs)("tr",{children:[(0,Rs.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:(0,Rs.jsxs)("button",{onClick:()=>v("title"),className:"flex items-center space-x-1 hover:text-gray-700",children:[(0,Rs.jsx)("span",{children:"Product"}),j("title")]})}),(0,Rs.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:(0,Rs.jsxs)("button",{onClick:()=>v("vendor"),className:"flex items-center space-x-1 hover:text-gray-700",children:[(0,Rs.jsx)("span",{children:"Vendor"}),j("vendor")]})}),(0,Rs.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:(0,Rs.jsxs)("button",{onClick:()=>v("price"),className:"flex items-center space-x-1 hover:text-gray-700",children:[(0,Rs.jsx)("span",{children:"Price"}),j("price")]})}),(0,Rs.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:(0,Rs.jsxs)("button",{onClick:()=>v("total_inventory"),className:"flex items-center space-x-1 hover:text-gray-700",children:[(0,Rs.jsx)("span",{children:"Stock"}),j("total_inventory")]})}),(0,Rs.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,Rs.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,Rs.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:a.map(e=>{var t,r;return(0,Rs.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,Rs.jsx)("td",{className:"px-6 py-4",children:(0,Rs.jsxs)("div",{className:"flex items-center",children:[(0,Rs.jsx)("div",{className:"flex-shrink-0 h-12 w-12",children:e.image_url?(0,Rs.jsx)("img",{src:e.image_url,alt:e.title,className:"h-12 w-12 rounded object-cover"}):(0,Rs.jsx)("div",{className:"h-12 w-12 rounded bg-gray-200 flex items-center justify-center",children:(0,Rs.jsx)(xl,{className:"h-6 w-6 text-gray-400"})})}),(0,Rs.jsxs)("div",{className:"ml-4",children:[(0,Rs.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.title}),e.product_type&&(0,Rs.jsx)("div",{className:"text-sm text-gray-500",children:e.product_type})]})]})}),(0,Rs.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,Rs.jsx)("div",{className:"text-sm text-gray-900",children:e.vendor||"-"})}),(0,Rs.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,Rs.jsx)("div",{className:"text-sm text-gray-900",children:(r=e.price,"PKR ".concat(parseFloat(r).toLocaleString()))})}),(0,Rs.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,Rs.jsx)("div",{className:"text-sm text-gray-900",children:e.total_inventory||0})}),(0,Rs.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,Rs.jsx)("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full ".concat(b(e.status)),children:e.status})}),(0,Rs.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[(0,Rs.jsx)(Re,{to:"/shopify/products/".concat(e.id),className:"text-primary-600 hover:text-primary-900 mr-3",children:(0,Rs.jsx)(Al,{className:"w-4 h-4 inline"})}),(null===(t=e.shopify_metadata)||void 0===t?void 0:t.handle)&&(0,Rs.jsx)("a",{href:"https://".concat(e.shop_domain,"/products/").concat(e.shopify_metadata.handle),target:"_blank",rel:"noopener noreferrer",className:"text-gray-400 hover:text-gray-600",children:(0,Rs.jsx)(fl,{className:"w-4 h-4 inline"})})]})]},e.id)})})]})}),(0,Rs.jsx)(Ll,{currentPage:d.page,totalPages:d.total_pages,onPageChange:e=>{u(t=>He(He({},t),{},{page:e})),window.scrollTo({top:0,behavior:"smooth"})},pageSize:d.limit,onPageSizeChange:e=>{u(t=>He(He({},t),{},{limit:e,page:1}))},totalItems:d.total})]})]})]})},Il=()=>{const{storeId:e}=ae(),t=te(),[r,a]=(0,n.useState)(!0),[s,l]=(0,n.useState)(!1),[i,o]=(0,n.useState)(!1),[c,d]=(0,n.useState)(null),[u,m]=(0,n.useState)({auto_sync_enabled:!0,sync_frequency_minutes:1440,sync_status_filter:"active",sync_reviews:!1});(0,n.useEffect)(()=>{p()},[e]);const p=async()=>{try{a(!0);const t=await(e=>Ms.get("/shopify/stores/".concat(e)))(e);d(t.data),t.data.sync_settings&&m(t.data.sync_settings)}catch(t){console.error("Load store error:",t),sr.error("Failed to load store settings")}finally{a(!1)}},h=e=>{const{name:t,value:r,type:a,checked:s}=e.target;m(e=>He(He({},e),{},{[t]:"checkbox"===a?s:"number"===a?parseInt(r):r}))};return r?(0,Rs.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,Rs.jsx)(el,{className:"w-8 h-8 animate-spin text-primary-600"})}):c?(0,Rs.jsxs)("div",{className:"max-w-3xl mx-auto",children:[(0,Rs.jsxs)("div",{className:"mb-6",children:[(0,Rs.jsxs)("button",{onClick:()=>t("/shopify"),className:"inline-flex items-center text-sm text-gray-500 hover:text-gray-700 mb-4",children:[(0,Rs.jsx)(Jn,{className:"w-4 h-4 mr-1"}),"Back to Stores"]}),(0,Rs.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Rs.jsxs)("div",{className:"flex items-center",children:[(0,Rs.jsx)(zn,{className:"w-8 h-8 text-gray-400 mr-3"}),(0,Rs.jsxs)("div",{children:[(0,Rs.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:c.shop_domain}),(0,Rs.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Store Settings"})]})]}),(0,Rs.jsx)("div",{className:"px-3 py-1 rounded-full text-sm font-medium ".concat("active"===c.status?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"),children:c.status})]})]}),(0,Rs.jsxs)("div",{className:"bg-white shadow rounded-lg p-6 mb-6",children:[(0,Rs.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Store Information"}),(0,Rs.jsxs)("dl",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2",children:[(0,Rs.jsxs)("div",{children:[(0,Rs.jsx)("dt",{className:"text-sm font-medium text-gray-500",children:"Shop Domain"}),(0,Rs.jsx)("dd",{className:"mt-1 text-sm text-gray-900",children:c.shop_domain})]}),(0,Rs.jsxs)("div",{children:[(0,Rs.jsx)("dt",{className:"text-sm font-medium text-gray-500",children:"Status"}),(0,Rs.jsx)("dd",{className:"mt-1 text-sm text-gray-900",children:c.status})]}),(0,Rs.jsxs)("div",{children:[(0,Rs.jsx)("dt",{className:"text-sm font-medium text-gray-500",children:"Products Synced"}),(0,Rs.jsx)("dd",{className:"mt-1 text-sm text-gray-900",children:c.total_products_synced||0})]}),(0,Rs.jsxs)("div",{children:[(0,Rs.jsx)("dt",{className:"text-sm font-medium text-gray-500",children:"Last Sync"}),(0,Rs.jsx)("dd",{className:"mt-1 text-sm text-gray-900",children:c.last_sync_at?new Date(c.last_sync_at).toLocaleString():"Never"})]}),(0,Rs.jsxs)("div",{children:[(0,Rs.jsx)("dt",{className:"text-sm font-medium text-gray-500",children:"Last Sync Status"}),(0,Rs.jsx)("dd",{className:"mt-1",children:c.last_sync_status?(0,Rs.jsxs)("span",{className:"inline-flex items-center text-sm ".concat("success"===c.last_sync_status?"text-green-600":"text-red-600"),children:["success"===c.last_sync_status?(0,Rs.jsx)(sn,{className:"w-4 h-4 mr-1"}):(0,Rs.jsx)(Gn,{className:"w-4 h-4 mr-1"}),c.last_sync_status]}):(0,Rs.jsx)("span",{className:"text-sm text-gray-500",children:"N/A"})})]}),(0,Rs.jsxs)("div",{children:[(0,Rs.jsx)("dt",{className:"text-sm font-medium text-gray-500",children:"Created"}),(0,Rs.jsx)("dd",{className:"mt-1 text-sm text-gray-900",children:new Date(c.created_at).toLocaleDateString()})]})]})]}),(0,Rs.jsxs)("form",{onSubmit:async r=>{r.preventDefault(),l(!0);try{await((e,t)=>Ms.put("/shopify/stores/".concat(e,"/settings"),t))(e,{sync_settings:u}),sr.success("Settings saved successfully!"),t("/shopify")}catch(n){var a,s;console.error("Save error:",n),sr.error((null===(a=n.response)||void 0===a||null===(s=a.data)||void 0===s?void 0:s.message)||"Failed to save settings")}finally{l(!1)}},className:"bg-white shadow rounded-lg",children:[(0,Rs.jsxs)("div",{className:"p-6 space-y-6",children:[(0,Rs.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Sync Settings"}),(0,Rs.jsxs)("div",{className:"flex items-start",children:[(0,Rs.jsx)("div",{className:"flex items-center h-5",children:(0,Rs.jsx)("input",{type:"checkbox",name:"auto_sync_enabled",checked:u.auto_sync_enabled,onChange:h,className:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded"})}),(0,Rs.jsxs)("div",{className:"ml-3",children:[(0,Rs.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Enable automatic sync"}),(0,Rs.jsx)("p",{className:"text-sm text-gray-500",children:"Automatically sync products on a schedule"})]})]}),u.auto_sync_enabled&&(0,Rs.jsxs)("div",{children:[(0,Rs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Sync Frequency"}),(0,Rs.jsxs)("select",{name:"sync_frequency_minutes",value:u.sync_frequency_minutes,onChange:h,className:"w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500",children:[(0,Rs.jsx)("option",{value:"60",children:"Every hour"}),(0,Rs.jsx)("option",{value:"360",children:"Every 6 hours"}),(0,Rs.jsx)("option",{value:"720",children:"Every 12 hours"}),(0,Rs.jsx)("option",{value:"1440",children:"Daily"}),(0,Rs.jsx)("option",{value:"10080",children:"Weekly"})]})]}),(0,Rs.jsxs)("div",{children:[(0,Rs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Sync Products"}),(0,Rs.jsxs)("select",{name:"sync_status_filter",value:u.sync_status_filter,onChange:h,className:"w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500",children:[(0,Rs.jsx)("option",{value:"active",children:"Active products only"}),(0,Rs.jsx)("option",{value:"all",children:"All products"}),(0,Rs.jsx)("option",{value:"draft",children:"Draft products only"})]})]}),(0,Rs.jsxs)("div",{className:"flex items-start",children:[(0,Rs.jsx)("div",{className:"flex items-center h-5",children:(0,Rs.jsx)("input",{type:"checkbox",name:"sync_reviews",checked:u.sync_reviews,onChange:h,className:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded"})}),(0,Rs.jsxs)("div",{className:"ml-3",children:[(0,Rs.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Sync product reviews"}),(0,Rs.jsx)("p",{className:"text-sm text-gray-500",children:"Include product reviews in sync (if available)"})]})]})]}),(0,Rs.jsxs)("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-200 flex items-center justify-between",children:[(0,Rs.jsxs)("button",{type:"button",onClick:async()=>{try{const t=await vl(e,{job_type:"full_sync"});sr.success("Sync started! Job ID: ".concat(t.data.job_id))}catch(t){sr.error("Failed to start sync")}},className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50",children:[(0,Rs.jsx)(el,{className:"w-4 h-4 mr-2"}),"Test Sync Now"]}),(0,Rs.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,Rs.jsx)("button",{type:"button",onClick:()=>t("/shopify"),className:"px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50",children:"Cancel"}),(0,Rs.jsxs)("button",{type:"submit",disabled:s,className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700 disabled:opacity-50",children:[(0,Rs.jsx)(rn,{className:"w-4 h-4 mr-2"}),s?"Saving...":"Save Settings"]})]})]})]}),(0,Rs.jsx)("div",{className:"mt-6 bg-white shadow rounded-lg border-2 border-red-200",children:(0,Rs.jsxs)("div",{className:"p-6",children:[(0,Rs.jsx)("h3",{className:"text-lg font-medium text-red-900",children:"Danger Zone"}),(0,Rs.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Once you disconnect this store, you won't be able to sync new products. Existing synced data will remain in your knowledge base."}),(0,Rs.jsx)("div",{className:"mt-4",children:(0,Rs.jsxs)("button",{type:"button",onClick:async()=>{if(window.confirm("Are you sure you want to disconnect this store? All synced data will remain but new syncs will stop.")){o(!0);try{await(e=>Ms.delete("/shopify/stores/".concat(e)))(e),sr.success("Store disconnected successfully"),t("/shopify")}catch(r){console.error("Delete error:",r),sr.error("Failed to disconnect store")}finally{o(!1)}}},disabled:i,className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-red-600 hover:bg-red-700 disabled:opacity-50",children:[(0,Rs.jsx)(Zs,{className:"w-4 h-4 mr-2"}),i?"Disconnecting...":"Disconnect Store"]})})]})})]}):(0,Rs.jsxs)("div",{className:"text-center py-12",children:[(0,Rs.jsx)(Gn,{className:"mx-auto h-12 w-12 text-red-400"}),(0,Rs.jsx)("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"Store not found"}),(0,Rs.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"The store you're looking for doesn't exist or has been removed."}),(0,Rs.jsx)("div",{className:"mt-6",children:(0,Rs.jsxs)("button",{onClick:()=>t("/shopify"),className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50",children:[(0,Rs.jsx)(Jn,{className:"w-4 h-4 mr-2"}),"Back to Stores"]})})]})},zl=qs("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]),Ul=()=>{var e,t;const{id:r}=ae(),a=te(),[s,l]=(0,n.useState)(null),[i,o]=(0,n.useState)(!0),[c,d]=(0,n.useState)(!1),[u,m]=(0,n.useState)(0);(0,n.useEffect)(()=>{p()},[r]);const p=async()=>{try{o(!0);const e=await(async e=>{try{const t=await Ms.get("/shopify/products/".concat(e));return t.data.data||t.data}catch(t){throw console.error("Get product error:",t),t}})(r);l(e),m(0)}catch(e){console.error("Error loading product:",e),sr.error("Failed to load product details")}finally{o(!1)}};if(i)return(0,Rs.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,Rs.jsx)(nl,{className:"w-8 h-8 animate-spin text-primary-600"})});if(!s)return(0,Rs.jsxs)("div",{className:"flex flex-col items-center justify-center min-h-screen",children:[(0,Rs.jsx)(Gn,{className:"w-16 h-16 text-gray-400 mb-4"}),(0,Rs.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Product Not Found"}),(0,Rs.jsx)("p",{className:"text-gray-600 mb-4",children:"The product you're looking for doesn't exist."}),(0,Rs.jsxs)("button",{onClick:()=>a(-1),className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50",children:[(0,Rs.jsx)(Jn,{className:"w-4 h-4 mr-2"}),"Go Back"]})]});const h=s.images||[],x=s.variants||[],f=s.tags?s.tags.map(e=>e.trim()).filter(Boolean):[];return(0,Rs.jsx)("div",{className:"min-h-screen bg-gray-50 py-8",children:(0,Rs.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,Rs.jsxs)("div",{className:"mb-6",children:[(0,Rs.jsxs)("button",{onClick:()=>a(-1),className:"inline-flex items-center text-sm text-gray-600 hover:text-gray-900 mb-4",children:[(0,Rs.jsx)(Jn,{className:"w-4 h-4 mr-1"}),"Back to Products"]}),(0,Rs.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Rs.jsxs)("div",{children:[(0,Rs.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:s.title}),(0,Rs.jsxs)("p",{className:"mt-1 text-sm text-gray-500",children:["Product ID: ",s.shopify_product_id]})]}),(0,Rs.jsxs)("div",{className:"flex gap-2",children:[(0,Rs.jsxs)("button",{onClick:async()=>{try{d(!0),await(async e=>{try{const t=await Ms.post("/shopify/products/".concat(e,"/refresh"));return t.data.data||t.data}catch(t){throw console.error("Refresh product error:",t),t}})(r),sr.success("Product refreshed successfully"),p()}catch(e){console.error("Error refreshing product:",e),sr.error("Failed to refresh product")}finally{d(!1)}},disabled:c,className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50",children:[(0,Rs.jsx)(el,{className:"w-4 h-4 mr-2 ".concat(c?"animate-spin":"")}),"Refresh"]}),(0,Rs.jsxs)("button",{onClick:()=>{var e;null!==s&&void 0!==s&&null!==(e=s.shopify_metadata)&&void 0!==e&&e.admin_url?window.open(s.shopify_metadata.admin_url,"_blank"):null!==s&&void 0!==s&&s.shop_domain&&null!==s&&void 0!==s&&s.shopify_product_id&&window.open("https://".concat(s.shop_domain,"/admin/products/").concat(s.shopify_product_id),"_blank")},className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50",children:[(0,Rs.jsx)(fl,{className:"w-4 h-4 mr-2"}),"Edit in Shopify"]}),(0,Rs.jsxs)("button",{onClick:async()=>{if(confirm("Are you sure you want to delete this product from the knowledge base? This will not affect your Shopify store."))try{await(async e=>{try{const t=await Ms.delete("/shopify/products/".concat(e));return t.data.data||t.data}catch(t){throw console.error("Delete product error:",t),t}})(r),sr.success("Product deleted successfully"),a(-1)}catch(e){console.error("Error deleting product:",e),sr.error("Failed to delete product")}},className:"inline-flex items-center px-4 py-2 border border-red-300 rounded-md shadow-sm text-sm font-medium text-red-700 bg-white hover:bg-red-50",children:[(0,Rs.jsx)(Zs,{className:"w-4 h-4 mr-2"}),"Delete"]})]})]})]}),(0,Rs.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(0,Rs.jsxs)("div",{className:"space-y-4",children:[(0,Rs.jsx)("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:h.length>0?(0,Rs.jsxs)(Rs.Fragment,{children:[(0,Rs.jsx)("div",{className:"aspect-square bg-gray-100 flex items-center justify-center",children:(0,Rs.jsx)("img",{src:null===(e=h[u])||void 0===e?void 0:e.url,alt:s.title,className:"w-full h-full object-contain",onError:e=>{e.target.src="/placeholder-image.png"}})}),h.length>1&&(0,Rs.jsx)("div",{className:"p-4 grid grid-cols-4 gap-2",children:h.map((e,t)=>(0,Rs.jsx)("button",{onClick:()=>m(t),className:"aspect-square rounded-lg overflow-hidden border-2 ".concat(u===t?"border-primary-500":"border-gray-200 hover:border-gray-300"),children:(0,Rs.jsx)("img",{src:e.url,alt:"".concat(s.title," ").concat(t+1),className:"w-full h-full object-cover"})},t))})]}):(0,Rs.jsx)("div",{className:"aspect-square bg-gray-100 flex items-center justify-center",children:(0,Rs.jsx)(An,{className:"w-24 h-24 text-gray-400"})})}),(0,Rs.jsxs)("div",{className:"bg-white rounded-lg shadow p-4",children:[(0,Rs.jsx)("h3",{className:"text-sm font-medium text-gray-900 mb-2",children:"Image Information"}),(0,Rs.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,Rs.jsxs)("div",{children:[(0,Rs.jsx)("span",{className:"text-gray-600",children:"Total Images:"}),(0,Rs.jsx)("span",{className:"ml-2 font-medium",children:h.length})]}),(0,Rs.jsxs)("div",{children:[(0,Rs.jsx)("span",{className:"text-gray-600",children:"Primary Image:"}),(0,Rs.jsx)("span",{className:"ml-2 font-medium",children:s.primary_image_id?"Set":"Not set"})]})]})]})]}),(0,Rs.jsxs)("div",{className:"space-y-6",children:[(0,Rs.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,Rs.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,Rs.jsxs)("div",{children:[(0,Rs.jsx)("p",{className:"text-sm text-gray-600",children:"Price"}),(0,Rs.jsxs)("p",{className:"text-3xl font-bold text-gray-900",children:["$",parseFloat(s.price||0).toFixed(2)]})]}),(0,Rs.jsxs)("div",{className:"text-right",children:[(0,Rs.jsx)("p",{className:"text-sm text-gray-600",children:"Status"}),(0,Rs.jsx)("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium ".concat("active"===s.status?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"),children:s.status||"Unknown"})]})]}),s.compare_at_price&&parseFloat(s.compare_at_price)>parseFloat(s.price)&&(0,Rs.jsx)("div",{className:"mt-2",children:(0,Rs.jsxs)("p",{className:"text-sm text-gray-600",children:["Compare at:"," ",(0,Rs.jsxs)("span",{className:"line-through",children:["$",parseFloat(s.compare_at_price).toFixed(2)]}),(0,Rs.jsxs)("span",{className:"ml-2 text-red-600 font-medium",children:["Save $",(parseFloat(s.compare_at_price)-parseFloat(s.price)).toFixed(2)]})]})})]}),s.description&&(0,Rs.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,Rs.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-3 flex items-center",children:[(0,Rs.jsx)(an,{className:"w-5 h-5 mr-2"}),"Description"]}),(0,Rs.jsx)("div",{className:"text-gray-700 prose prose-sm max-w-none",dangerouslySetInnerHTML:{__html:s.description}})]}),x.length>0&&(0,Rs.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,Rs.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[(0,Rs.jsx)(xl,{className:"w-5 h-5 mr-2"}),"Variants (",x.length,")"]}),(0,Rs.jsx)("div",{className:"space-y-3",children:x.map((e,t)=>(0,Rs.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4",children:[(0,Rs.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,Rs.jsxs)("div",{children:[(0,Rs.jsx)("p",{className:"font-medium text-gray-900",children:e.title}),e.sku&&(0,Rs.jsxs)("p",{className:"text-sm text-gray-600",children:["SKU: ",e.sku]})]}),(0,Rs.jsxs)("div",{className:"text-right",children:[(0,Rs.jsxs)("p",{className:"font-semibold text-gray-900",children:["$",parseFloat(e.price||0).toFixed(2)]}),e.compare_at_price&&(0,Rs.jsxs)("p",{className:"text-sm text-gray-500 line-through",children:["$",parseFloat(e.compare_at_price).toFixed(2)]})]})]}),(0,Rs.jsxs)("div",{className:"grid grid-cols-2 gap-4 mt-3 text-sm",children:[(0,Rs.jsxs)("div",{children:[(0,Rs.jsx)("span",{className:"text-gray-600",children:"Inventory:"}),(0,Rs.jsxs)("span",{className:"ml-2 font-medium ".concat(e.inventory_quantity>0?"text-green-600":"text-red-600"),children:[e.inventory_quantity||0," units"]})]}),e.weight&&(0,Rs.jsxs)("div",{children:[(0,Rs.jsx)("span",{className:"text-gray-600",children:"Weight:"}),(0,Rs.jsxs)("span",{className:"ml-2 font-medium",children:[e.weight," ",e.weight_unit]})]})]}),e.barcode&&(0,Rs.jsxs)("div",{className:"mt-2 text-sm",children:[(0,Rs.jsx)("span",{className:"text-gray-600",children:"Barcode:"}),(0,Rs.jsx)("span",{className:"ml-2 font-mono text-gray-900",children:e.barcode})]})]},t))})]}),(0,Rs.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,Rs.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Product Information"}),(0,Rs.jsxs)("dl",{className:"grid grid-cols-1 gap-4",children:[s.vendor&&(0,Rs.jsxs)("div",{children:[(0,Rs.jsx)("dt",{className:"text-sm font-medium text-gray-600",children:"Vendor"}),(0,Rs.jsx)("dd",{className:"mt-1 text-sm text-gray-900",children:s.vendor})]}),s.product_type&&(0,Rs.jsxs)("div",{children:[(0,Rs.jsx)("dt",{className:"text-sm font-medium text-gray-600",children:"Product Type"}),(0,Rs.jsx)("dd",{className:"mt-1 text-sm text-gray-900",children:s.product_type})]}),f.length>0&&(0,Rs.jsxs)("div",{children:[(0,Rs.jsx)("dt",{className:"text-sm font-medium text-gray-600 mb-2",children:"Tags"}),(0,Rs.jsx)("dd",{className:"flex flex-wrap gap-2",children:f.map((e,t)=>(0,Rs.jsxs)("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-blue-100 text-blue-800",children:[(0,Rs.jsx)(Pl,{className:"w-3 h-3 mr-1"}),e]},t))})]}),(0,Rs.jsxs)("div",{children:[(0,Rs.jsx)("dt",{className:"text-sm font-medium text-gray-600",children:"Created"}),(0,Rs.jsxs)("dd",{className:"mt-1 text-sm text-gray-900 flex items-center",children:[(0,Rs.jsx)(zl,{className:"w-4 h-4 mr-1"}),new Date(s.created_at).toLocaleString()]})]}),(0,Rs.jsxs)("div",{children:[(0,Rs.jsx)("dt",{className:"text-sm font-medium text-gray-600",children:"Last Updated"}),(0,Rs.jsxs)("dd",{className:"mt-1 text-sm text-gray-900 flex items-center",children:[(0,Rs.jsx)(zl,{className:"w-4 h-4 mr-1"}),new Date(s.updated_at).toLocaleString()]})]}),(null===(t=s.shopify_metadata)||void 0===t?void 0:t.handle)&&(0,Rs.jsxs)("div",{children:[(0,Rs.jsx)("dt",{className:"text-sm font-medium text-gray-600",children:"Product Handle"}),(0,Rs.jsx)("dd",{className:"mt-1 text-sm text-gray-900 font-mono",children:s.shopify_metadata.handle})]})]})]}),s.shopify_metadata&&Object.keys(s.shopify_metadata).length>0&&(0,Rs.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,Rs.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Shopify Metadata"}),(0,Rs.jsxs)("div",{className:"space-y-2 text-sm",children:[s.shopify_metadata.published_at&&(0,Rs.jsxs)("div",{className:"flex justify-between",children:[(0,Rs.jsx)("span",{className:"text-gray-600",children:"Published:"}),(0,Rs.jsx)("span",{className:"text-gray-900",children:new Date(s.shopify_metadata.published_at).toLocaleDateString()})]}),s.shopify_metadata.template_suffix&&(0,Rs.jsxs)("div",{className:"flex justify-between",children:[(0,Rs.jsx)("span",{className:"text-gray-600",children:"Template:"}),(0,Rs.jsx)("span",{className:"text-gray-900",children:s.shopify_metadata.template_suffix})]})]})]})]})]})]})})},Bl=qs("Shirt",[["path",{d:"M20.38 3.46 16 2a4 4 0 0 1-8 0L3.62 3.46a2 2 0 0 0-1.34 2.23l.58 3.47a1 1 0 0 0 .99.84H6v10c0 1.1.9 2 2 2h8a2 2 0 0 0 2-2V10h2.15a1 1 0 0 0 .99-.84l.58-3.47a2 2 0 0 0-1.34-2.23z",key:"1wgbhj"}]]),ql=qs("Laptop",[["path",{d:"M20 16V7a2 2 0 0 0-2-2H6a2 2 0 0 0-2 2v9m16 0H4m16 0 1.28 2.55a1 1 0 0 1-.9 1.45H3.62a1 1 0 0 1-.9-1.45L4 16",key:"tarvll"}]]),Hl=qs("Sofa",[["path",{d:"M20 9V6a2 2 0 0 0-2-2H6a2 2 0 0 0-2 2v3",key:"1dgpiv"}],["path",{d:"M2 11v5a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-5a2 2 0 0 0-4 0v2H6v-2a2 2 0 0 0-4 0Z",key:"u5qfb7"}],["path",{d:"M4 18v2",key:"jwo5n2"}],["path",{d:"M20 18v2",key:"1ar1qi"}],["path",{d:"M12 4v9",key:"oqhhn3"}]]),Vl=qs("Utensils",[["path",{d:"M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2",key:"cjf0a3"}],["path",{d:"M7 2v20",key:"1473qp"}],["path",{d:"M21 15V2v0a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7",key:"1ogz0v"}]]),Wl=()=>{var e;const{id:t}=ae(),r=te(),[a,s]=(0,n.useState)(!0),[l,i]=(0,n.useState)(!1),[o,c]=(0,n.useState)(null),[d,u]=(0,n.useState)([]);(0,n.useEffect)(()=>{m()},[t]);const m=async()=>{try{s(!0);const[r,a]=await Promise.all([(e=t,Ms.get("/conversation-strategy/".concat(e))),mn()]);c(r.data.data),u(a.data.data)}catch(r){console.error("Error loading conversation strategy:",r),sr.error("Failed to load conversation strategy")}finally{s(!1)}var e},p=async e=>{try{i(!0);const r=await((e,t)=>Ms.post("/conversation-strategy/apply-preset/".concat(e),{preset_id:t}))(t,e);c(r.data.data),sr.success("Preset applied successfully")}catch(r){console.error("Error applying preset:",r),sr.error("Failed to apply preset")}finally{i(!1)}},h=e=>{c(He(He({},o),{},{preference_collection:He(He({},o.preference_collection),{},{strategy:e})}))};if(a)return(0,Rs.jsx)("div",{className:"flex items-center justify-center h-screen",children:(0,Rs.jsx)(Fn,{className:"animate-spin",size:32})});if(!o)return(0,Rs.jsx)("div",{className:"flex items-center justify-center h-screen",children:(0,Rs.jsxs)("div",{className:"text-center",children:[(0,Rs.jsx)(Gn,{size:48,className:"mx-auto mb-4 text-red-500"}),(0,Rs.jsx)("p",{className:"text-gray-600",children:"Failed to load conversation strategy"})]})});const x=(null===(e=o.preference_collection)||void 0===e?void 0:e.strategy)||"immediate_search";return(0,Rs.jsxs)("div",{className:"p-6 max-w-5xl mx-auto",children:[(0,Rs.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,Rs.jsxs)("div",{className:"flex items-center gap-4",children:[(0,Rs.jsx)("button",{onClick:()=>r("/agents/".concat(t)),className:"p-2 hover:bg-gray-100 rounded-lg",children:(0,Rs.jsx)(Jn,{size:20})}),(0,Rs.jsxs)("div",{children:[(0,Rs.jsx)("h1",{className:"text-2xl font-bold",children:"Conversation Strategy"}),(0,Rs.jsx)("p",{className:"text-gray-600 text-sm mt-1",children:"Configure how your agent collects preferences and searches"})]})]}),(0,Rs.jsx)("button",{onClick:async()=>{try{i(!0),await((e,t)=>Ms.put("/conversation-strategy/".concat(e),t))(t,o),sr.success("Conversation strategy saved successfully")}catch(e){console.error("Error saving strategy:",e),sr.error("Failed to save conversation strategy")}finally{i(!1)}},disabled:l,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50",children:l?(0,Rs.jsxs)(Rs.Fragment,{children:[(0,Rs.jsx)(Fn,{size:18,className:"animate-spin"}),"Saving..."]}):(0,Rs.jsxs)(Rs.Fragment,{children:[(0,Rs.jsx)(rn,{size:18}),"Save Changes"]})})]}),(0,Rs.jsxs)("div",{className:"bg-white rounded-lg shadow p-6 mb-6",children:[(0,Rs.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,Rs.jsx)(an,{size:20,className:"text-blue-500"}),(0,Rs.jsx)("h2",{className:"text-lg font-semibold",children:"Quick Presets"})]}),(0,Rs.jsx)("p",{className:"text-gray-600 text-sm mb-4",children:"Apply a preset configuration based on your business type"}),(0,Rs.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:d.map(e=>{const t={shirt:Bl,laptop:ql,couch:Hl,utensils:Vl}[e.icon]||an;return(0,Rs.jsxs)("button",{onClick:()=>p(e.id),disabled:l,className:"p-4 border-2 border-gray-200 rounded-lg hover:border-blue-500 hover:bg-blue-50 transition-colors text-left disabled:opacity-50",children:[(0,Rs.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,Rs.jsx)(t,{size:24,className:"text-blue-600"}),(0,Rs.jsx)("h3",{className:"font-semibold",children:e.name})]}),(0,Rs.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:e.description}),(0,Rs.jsx)("div",{className:"flex items-center gap-2",children:(0,Rs.jsx)("span",{className:"text-xs px-2 py-1 bg-gray-100 rounded",children:0===e.strategy.preference_collection.max_questions?"No questions":"".concat(e.strategy.preference_collection.max_questions," questions")})})]},e.id)})})]}),(0,Rs.jsxs)("div",{className:"bg-white rounded-lg shadow p-6 mb-6",children:[(0,Rs.jsx)("h2",{className:"text-lg font-semibold mb-4",children:"\ud83d\udecd\ufe0f Product Search Strategy"}),(0,Rs.jsx)("p",{className:"text-gray-600 text-sm mb-6",children:"Configure how your agent searches for products"}),(0,Rs.jsxs)("div",{className:"space-y-4",children:[(0,Rs.jsxs)("label",{className:"flex items-start gap-3 p-4 border-2 rounded-lg cursor-pointer hover:bg-gray-50 transition-colors",children:[(0,Rs.jsx)("input",{type:"radio",name:"strategy",value:"immediate_search",checked:"immediate_search"===x,onChange:e=>h(e.target.value),className:"mt-1"}),(0,Rs.jsxs)("div",{className:"flex-1",children:[(0,Rs.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,Rs.jsx)("span",{className:"font-semibold",children:"Immediate Search"}),(0,Rs.jsx)("span",{className:"text-xs px-2 py-1 bg-green-100 text-green-700 rounded",children:"Fast"})]}),(0,Rs.jsx)("p",{className:"text-sm text-gray-600",children:"Search as soon as user requests products. No questions asked."}),(0,Rs.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Best for: Furniture, Food, Low-ticket items"})]})]}),(0,Rs.jsxs)("label",{className:"flex items-start gap-3 p-4 border-2 rounded-lg cursor-pointer hover:bg-gray-50 transition-colors",children:[(0,Rs.jsx)("input",{type:"radio",name:"strategy",value:"ask_questions",checked:"ask_questions"===x,onChange:e=>h(e.target.value),className:"mt-1"}),(0,Rs.jsxs)("div",{className:"flex-1",children:[(0,Rs.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,Rs.jsx)("span",{className:"font-semibold",children:"Ask Questions First"}),(0,Rs.jsx)("span",{className:"text-xs px-2 py-1 bg-blue-100 text-blue-700 rounded",children:"Personalized"})]}),(0,Rs.jsx)("p",{className:"text-sm text-gray-600",children:"Collect user preferences before searching for products."}),(0,Rs.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Best for: Clothing, Fashion, High-value items"}),"ask_questions"===x&&(0,Rs.jsxs)("div",{className:"mt-3 p-3 bg-blue-50 rounded text-sm text-blue-700",children:[(0,Rs.jsx)(an,{size:16,className:"inline mr-1"}),"Advanced configuration coming in Phase 2"]})]})]}),(0,Rs.jsxs)("label",{className:"flex items-start gap-3 p-4 border-2 rounded-lg cursor-pointer hover:bg-gray-50 transition-colors",children:[(0,Rs.jsx)("input",{type:"radio",name:"strategy",value:"minimal_questions",checked:"minimal_questions"===x,onChange:e=>h(e.target.value),className:"mt-1"}),(0,Rs.jsxs)("div",{className:"flex-1",children:[(0,Rs.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,Rs.jsx)("span",{className:"font-semibold",children:"Minimal Questions (1-2)"}),(0,Rs.jsx)("span",{className:"text-xs px-2 py-1 bg-yellow-100 text-yellow-700 rounded",children:"Balanced"})]}),(0,Rs.jsx)("p",{className:"text-sm text-gray-600",children:"Ask only 1-2 critical questions before searching."}),(0,Rs.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Best for: Electronics, Mid-range items"})]})]}),(0,Rs.jsxs)("label",{className:"flex items-start gap-3 p-4 border-2 rounded-lg cursor-pointer hover:bg-gray-50 transition-colors",children:[(0,Rs.jsx)("input",{type:"radio",name:"strategy",value:"adaptive",checked:"adaptive"===x,onChange:e=>h(e.target.value),className:"mt-1"}),(0,Rs.jsxs)("div",{className:"flex-1",children:[(0,Rs.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,Rs.jsx)("span",{className:"font-semibold",children:"Adaptive (Smart)"}),(0,Rs.jsx)("span",{className:"text-xs px-2 py-1 bg-purple-100 text-purple-700 rounded",children:"Intelligent"})]}),(0,Rs.jsx)("p",{className:"text-sm text-gray-600",children:"AI decides based on product type, value, and context."}),(0,Rs.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Best for: Multi-category stores"})]})]})]})]}),(0,Rs.jsx)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:(0,Rs.jsxs)("div",{className:"flex items-start gap-3",children:[(0,Rs.jsx)(sn,{size:20,className:"text-green-600 mt-0.5"}),(0,Rs.jsxs)("div",{children:[(0,Rs.jsx)("h3",{className:"font-semibold text-green-900 mb-1",children:"Current Configuration"}),(0,Rs.jsxs)("p",{className:"text-sm text-green-700",children:["Your agent is using ",(0,Rs.jsx)("strong",{children:x.replace("_"," ")})," strategy.","immediate_search"===x&&" Products will be shown immediately.","ask_questions"===x&&" Agent will collect preferences before searching.","minimal_questions"===x&&" Agent will ask 1-2 quick questions.","adaptive"===x&&" AI will decide the best approach."]})]})]})})]})},$l=e=>{let{user:t,onSave:r,onClose:a}=e;const{user:s}=Ls(),[l,i]=(0,n.useState)({name:"",email:"",password:"",role:"client",is_active:!0}),[o,c]=(0,n.useState)(!1),[d,u]=(0,n.useState)(null);(0,n.useEffect)(()=>{t&&i({name:t.name,email:t.email,password:"",role:t.role,is_active:t.is_active})},[t]);const m=(e,t)=>{i(r=>He(He({},r),{},{[e]:t}))};return(0,Rs.jsx)("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 flex items-center justify-center p-4 z-50",children:(0,Rs.jsxs)("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full",children:[(0,Rs.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[(0,Rs.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:t?"Edit User":"Create User"}),(0,Rs.jsx)("button",{onClick:a,className:"text-gray-400 hover:text-gray-500",children:(0,Rs.jsx)(tn,{className:"w-5 h-5"})})]}),(0,Rs.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),u(null),c(!0);try{if(!l.name||!l.email)throw new Error("Name and email are required");if(!t&&!l.password)throw new Error("Password is required for new users");if(l.password&&l.password.length<6)throw new Error("Password must be at least 6 characters");const e={name:l.name,email:l.email,role:l.role,is_active:l.is_active};l.password&&(e.password=l.password),await r(e)}catch(a){u(a.message),c(!1)}},className:"p-6 space-y-4",children:[d&&(0,Rs.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-md p-3",children:(0,Rs.jsx)("p",{className:"text-sm text-red-800",children:d})}),(0,Rs.jsxs)("div",{children:[(0,Rs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Full Name *"}),(0,Rs.jsx)("input",{type:"text",required:!0,value:l.name,onChange:e=>m("name",e.target.value),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500",placeholder:"John Doe"})]}),(0,Rs.jsxs)("div",{children:[(0,Rs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email *"}),(0,Rs.jsx)("input",{type:"email",required:!0,value:l.email,onChange:e=>m("email",e.target.value),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500",placeholder:"john@example.com"})]}),(0,Rs.jsxs)("div",{children:[(0,Rs.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Password ",!t&&"*"]}),(0,Rs.jsx)("input",{type:"password",required:!t,value:l.password,onChange:e=>m("password",e.target.value),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500",placeholder:t?"Leave blank to keep current":"Min 6 characters",minLength:6}),t&&(0,Rs.jsx)("p",{className:"mt-1 text-xs text-gray-500",children:"Leave blank to keep current password"})]}),(0,Rs.jsxs)("div",{children:[(0,Rs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Role *"}),(0,Rs.jsx)("select",{required:!0,value:l.role,onChange:e=>m("role",e.target.value),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500",children:("super_admin"===(null===s||void 0===s?void 0:s.role)?[{value:"super_admin",label:"Super Admin"},{value:"admin",label:"Admin"},{value:"agent_manager",label:"Agent Manager"},{value:"client",label:"Client"}]:"admin"===(null===s||void 0===s?void 0:s.role)?[{value:"admin",label:"Admin"},{value:"agent_manager",label:"Agent Manager"},{value:"client",label:"Client"}]:[{value:"agent_manager",label:"Agent Manager"},{value:"client",label:"Client"}]).map(e=>(0,Rs.jsx)("option",{value:e.value,children:e.label},e.value))})]}),(0,Rs.jsxs)("div",{className:"bg-gray-50 rounded-md p-3 text-xs text-gray-600",children:[(0,Rs.jsx)("p",{className:"font-medium mb-1",children:"Role Permissions:"}),(0,Rs.jsxs)("ul",{className:"space-y-1",children:[(0,Rs.jsxs)("li",{children:[(0,Rs.jsx)("strong",{children:"Super Admin:"})," Full system access"]}),(0,Rs.jsxs)("li",{children:[(0,Rs.jsx)("strong",{children:"Admin:"})," Manage users, credits, agents"]}),(0,Rs.jsxs)("li",{children:[(0,Rs.jsx)("strong",{children:"Agent Manager:"})," Create and manage agents"]}),(0,Rs.jsxs)("li",{children:[(0,Rs.jsx)("strong",{children:"Client:"})," View-only access"]})]})]}),t&&(0,Rs.jsxs)("div",{className:"flex items-center",children:[(0,Rs.jsx)("input",{type:"checkbox",id:"is_active",checked:l.is_active,onChange:e=>m("is_active",e.target.checked),className:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded"}),(0,Rs.jsx)("label",{htmlFor:"is_active",className:"ml-2 block text-sm text-gray-700",children:"Account is active"})]}),(0,Rs.jsxs)("div",{className:"flex items-center justify-end space-x-3 pt-4 border-t border-gray-200",children:[(0,Rs.jsx)("button",{type:"button",onClick:a,className:"px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50",children:"Cancel"}),(0,Rs.jsx)("button",{type:"submit",disabled:o,className:"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700 disabled:opacity-50",children:o?"Saving...":t?"Update User":"Create User"})]})]})]})})},Kl=qs("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),Ql=e=>{let{title:t,message:r,confirmText:a="Confirm",cancelText:s="Cancel",confirmStyle:n="primary",onConfirm:l,onCancel:i}=e;const o="danger"===n?"bg-red-600 hover:bg-red-700 text-white":"bg-primary-600 hover:bg-primary-700 text-white";return(0,Rs.jsx)("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 flex items-center justify-center p-4 z-50",children:(0,Rs.jsxs)("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full",children:[(0,Rs.jsxs)("div",{className:"flex items-start p-6",children:[(0,Rs.jsx)("div",{className:"flex-shrink-0",children:(0,Rs.jsx)(Kl,{className:"h-6 w-6 ".concat("danger"===n?"text-red-600":"text-yellow-600")})}),(0,Rs.jsxs)("div",{className:"ml-3 flex-1",children:[(0,Rs.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:t}),(0,Rs.jsx)("div",{className:"mt-2",children:(0,Rs.jsx)("p",{className:"text-sm text-gray-500",children:r})})]}),(0,Rs.jsx)("button",{onClick:i,className:"text-gray-400 hover:text-gray-500",children:(0,Rs.jsx)(tn,{className:"w-5 h-5"})})]}),(0,Rs.jsxs)("div",{className:"bg-gray-50 px-6 py-3 flex items-center justify-end space-x-3",children:[(0,Rs.jsx)("button",{onClick:i,className:"px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50",children:s}),(0,Rs.jsx)("button",{onClick:l,className:"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium ".concat(o),children:a})]})]})})},Jl=()=>{const{user:e}=Ls(),[t,r]=(0,n.useState)([]),[a,s]=(0,n.useState)(!0),[l,i]=(0,n.useState)(""),[o,c]=(0,n.useState)("all"),[d,u]=(0,n.useState)(!1),[m,p]=(0,n.useState)(null),[h,x]=(0,n.useState)(null);(0,n.useEffect)(()=>{f()},[o]);const f=async()=>{try{s(!0);const e={};"all"!==o&&(e.role=o);const t=await function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Ms.get("/users",{params:e})}(e);r(t.data.data.users||[])}catch(e){console.error("Load users error:",e),sr.error("Failed to load users")}finally{s(!1)}},g=t.filter(e=>e.name.toLowerCase().includes(l.toLowerCase())||e.email.toLowerCase().includes(l.toLowerCase())),y=["admin","super_admin"].includes(null===e||void 0===e?void 0:e.role);return(0,Rs.jsxs)("div",{className:"space-y-6",children:[(0,Rs.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Rs.jsxs)("div",{children:[(0,Rs.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"User Management"}),(0,Rs.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Manage users and their permissions"})]}),y&&(0,Rs.jsxs)("button",{onClick:()=>{p(null),u(!0)},className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700",children:[(0,Rs.jsx)(Qs,{className:"w-4 h-4 mr-2"}),"Add User"]})]}),(0,Rs.jsx)("div",{className:"bg-white shadow rounded-lg p-4",children:(0,Rs.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,Rs.jsx)("div",{className:"flex-1",children:(0,Rs.jsxs)("div",{className:"relative",children:[(0,Rs.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,Rs.jsx)(Vn,{className:"h-5 w-5 text-gray-400"})}),(0,Rs.jsx)("input",{type:"text",value:l,onChange:e=>i(e.target.value),className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:ring-1 focus:ring-primary-500 focus:border-primary-500",placeholder:"Search users..."})]})}),(0,Rs.jsxs)("select",{value:o,onChange:e=>c(e.target.value),className:"block rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500",children:[(0,Rs.jsx)("option",{value:"all",children:"All Roles"}),(0,Rs.jsx)("option",{value:"super_admin",children:"Super Admin"}),(0,Rs.jsx)("option",{value:"admin",children:"Admin"}),(0,Rs.jsx)("option",{value:"agent_manager",children:"Agent Manager"}),(0,Rs.jsx)("option",{value:"client",children:"Client"})]}),(0,Rs.jsxs)("button",{onClick:f,className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50",children:[(0,Rs.jsx)(el,{className:"w-4 h-4 mr-2"}),"Refresh"]})]})}),(0,Rs.jsx)("div",{className:"bg-white shadow rounded-lg overflow-hidden",children:a?(0,Rs.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,Rs.jsx)(el,{className:"w-8 h-8 animate-spin text-primary-600"})}):0===g.length?(0,Rs.jsxs)("div",{className:"text-center py-12",children:[(0,Rs.jsx)(Un,{className:"mx-auto h-12 w-12 text-gray-400"}),(0,Rs.jsx)("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No users found"}),(0,Rs.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:l?"Try adjusting your search":"Get started by adding a user"})]}):(0,Rs.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,Rs.jsx)("thead",{className:"bg-gray-50",children:(0,Rs.jsxs)("tr",{children:[(0,Rs.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User"}),(0,Rs.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Role"}),(0,Rs.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,Rs.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Last Login"}),y&&(0,Rs.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,Rs.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:g.map(t=>{return(0,Rs.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,Rs.jsx)("td",{className:"px-6 py-4",children:(0,Rs.jsxs)("div",{className:"flex items-center",children:[(0,Rs.jsx)("div",{className:"flex-shrink-0 h-10 w-10",children:(0,Rs.jsx)("div",{className:"h-10 w-10 rounded-full bg-primary-100 flex items-center justify-center",children:(0,Rs.jsx)("span",{className:"text-primary-600 font-medium text-sm",children:t.name.charAt(0).toUpperCase()})})}),(0,Rs.jsxs)("div",{className:"ml-4",children:[(0,Rs.jsxs)("div",{className:"text-sm font-medium text-gray-900",children:[t.name,t.id===(null===e||void 0===e?void 0:e.id)&&(0,Rs.jsx)("span",{className:"ml-2 text-xs text-gray-500",children:"(You)"})]}),(0,Rs.jsx)("div",{className:"text-sm text-gray-500",children:t.email})]})]})}),(0,Rs.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(a=t.role,(0,Rs.jsx)("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full ".concat({super_admin:"bg-purple-100 text-purple-800",admin:"bg-blue-100 text-blue-800",agent_manager:"bg-green-100 text-green-800",client:"bg-gray-100 text-gray-800"}[a]),children:{super_admin:"Super Admin",admin:"Admin",agent_manager:"Agent Manager",client:"Client"}[a]}))}),(0,Rs.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:t.is_active?(0,Rs.jsxs)("span",{className:"inline-flex items-center text-sm text-green-600",children:[(0,Rs.jsx)(sn,{className:"w-4 h-4 mr-1"}),"Active"]}):(0,Rs.jsxs)("span",{className:"inline-flex items-center text-sm text-red-600",children:[(0,Rs.jsx)(hl,{className:"w-4 h-4 mr-1"}),"Inactive"]})}),(0,Rs.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:(r=t.last_login_at,r?new Date(r).toLocaleString():"Never")}),y&&(0,Rs.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[(0,Rs.jsx)("button",{onClick:()=>(e=>{p(e),u(!0)})(t),className:"text-primary-600 hover:text-primary-900 mr-3",children:(0,Rs.jsx)(Kn,{className:"w-4 h-4 inline"})}),t.id!==(null===e||void 0===e?void 0:e.id)&&(0,Rs.jsx)("button",{onClick:()=>(e=>{x(e)})(t),className:"text-red-600 hover:text-red-900",children:(0,Rs.jsx)(Zs,{className:"w-4 h-4 inline"})})]})]},t.id);var r,a})})]})}),d&&(0,Rs.jsx)($l,{user:m,onSave:async e=>{try{m?(await((e,t)=>Ms.put("/users/".concat(e),t))(m.id,e),sr.success("User updated successfully")):(await(e=>Ms.post("/users",e))(e),sr.success("User created successfully")),u(!1),f()}catch(a){var t,r;throw console.error("Save user error:",a),new Error((null===(t=a.response)||void 0===t||null===(r=t.data)||void 0===r?void 0:r.error)||"Failed to save user")}},onClose:()=>u(!1)}),h&&(0,Rs.jsx)(Ql,{title:"Delete User",message:"Are you sure you want to delete ".concat(h.name,"? This action cannot be undone."),confirmText:"Delete",confirmStyle:"danger",onConfirm:async()=>{try{await(r=h.id,Ms.delete("/users/".concat(r))),sr.success("User deleted successfully"),x(null),f()}catch(a){var e,t;console.error("Delete user error:",a),sr.error((null===(e=a.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.error)||"Failed to delete user")}var r},onCancel:()=>x(null)})]})},Gl=()=>{const{id:e}=ae(),[t,r]=(0,n.useState)(null),[a,s]=(0,n.useState)(!0),[l,i]=(0,n.useState)(!1),[o,c]=(0,n.useState)(!1),[d,u]=(0,n.useState)({enable_chat_integration:!1,chat_page_enabled:!1,chat_page_slug:"",widget_config:{primary_color:"#6366f1",position:"bottom-right",button_text:"Chat with us",greeting_message:"Hello! How can I help you today?"}});(0,n.useEffect)(()=>{m()},[e]);const m=async()=>{try{s(!0);const t=(await Ts(e)).data.agent;r(t),u({enable_chat_integration:t.enable_chat_integration||!1,chat_page_enabled:t.chat_page_enabled||!1,chat_page_slug:t.chat_page_slug||"",widget_config:t.widget_config||d.widget_config})}catch(t){console.error("Load agent error:",t),sr.error("Failed to load agent")}finally{s(!1)}},p=e=>{navigator.clipboard.writeText(e),i(!0),sr.success("Copied to clipboard!"),setTimeout(()=>i(!1),2e3)},h="\x3c!-- AIVA Chat Widget --\x3e\n<script>\n  (function(w,d,s,o,f,js,fjs){\n    w['AIVAWidget']=o;w[o] = w[o] || function () { (w[o].q = w[o].q || []).push(arguments) };\n    js = d.createElement(s), fjs = d.getElementsByTagName(s)[0];\n    js.id = o; js.src = f; js.async = 1; fjs.parentNode.insertBefore(js, fjs);\n  }(window, document, 'script', 'aiva', '".concat(window.location.origin,"/aiva/widget.js'));\n  aiva('init', {\n    agentId: '").concat(e,"',\n    // API URL will auto-detect from widget source\n    // Or explicitly set: apiUrl: 'https://your-domain.com/aiva/api/public/chat',\n    primaryColor: '").concat(d.widget_config.primary_color,"',\n    position: '").concat(d.widget_config.position,"'\n  });\n<\/script>"),x=d.chat_page_slug?"".concat(window.location.origin,"/aiva/chat/").concat(d.chat_page_slug):"".concat(window.location.origin,"/aiva/chat/").concat(e);return a?(0,Rs.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,Rs.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}):(0,Rs.jsxs)("div",{className:"space-y-6",children:[(0,Rs.jsx)("div",{className:"flex items-center justify-between",children:(0,Rs.jsxs)("div",{children:[(0,Rs.jsxs)(Re,{to:"/agents/".concat(e),className:"inline-flex items-center text-sm text-gray-500 hover:text-gray-700 mb-2",children:[(0,Rs.jsx)(Jn,{className:"w-4 h-4 mr-1"}),"Back to Agent"]}),(0,Rs.jsxs)("h1",{className:"text-2xl font-bold text-gray-900",children:["Chat Integration - ",null===t||void 0===t?void 0:t.name]}),(0,Rs.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Embed your AI agent on websites or share a standalone chat page"})]})}),(0,Rs.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,Rs.jsxs)("div",{className:"bg-white shadow rounded-lg overflow-hidden",children:[(0,Rs.jsx)("div",{className:"p-6 border-b border-gray-200",children:(0,Rs.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Rs.jsxs)("div",{className:"flex items-center",children:[(0,Rs.jsx)("div",{className:"flex-shrink-0",children:(0,Rs.jsx)(Xs,{className:"h-8 w-8 text-primary-600"})}),(0,Rs.jsxs)("div",{className:"ml-4",children:[(0,Rs.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Chat Widget"}),(0,Rs.jsx)("p",{className:"text-sm text-gray-500",children:"Embeddable chat bubble for your website"})]})]}),(0,Rs.jsxs)("label",{className:"relative inline-flex items-center cursor-pointer",children:[(0,Rs.jsx)("input",{type:"checkbox",checked:d.enable_chat_integration,onChange:e=>u(t=>He(He({},t),{},{enable_chat_integration:e.target.checked})),className:"sr-only peer"}),(0,Rs.jsx)("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary-600"})]})]})}),d.enable_chat_integration&&(0,Rs.jsxs)("div",{className:"p-6 space-y-6",children:[(0,Rs.jsxs)("div",{className:"space-y-4",children:[(0,Rs.jsx)("h4",{className:"text-sm font-medium text-gray-900",children:"Widget Appearance"}),(0,Rs.jsxs)("div",{children:[(0,Rs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Primary Color"}),(0,Rs.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Rs.jsx)("input",{type:"color",value:d.widget_config.primary_color,onChange:e=>u(t=>He(He({},t),{},{widget_config:He(He({},t.widget_config),{},{primary_color:e.target.value})})),className:"h-10 w-20 rounded border border-gray-300"}),(0,Rs.jsx)("input",{type:"text",value:d.widget_config.primary_color,onChange:e=>u(t=>He(He({},t),{},{widget_config:He(He({},t.widget_config),{},{primary_color:e.target.value})})),className:"flex-1 rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500"})]})]}),(0,Rs.jsxs)("div",{children:[(0,Rs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Position"}),(0,Rs.jsxs)("select",{value:d.widget_config.position,onChange:e=>u(t=>He(He({},t),{},{widget_config:He(He({},t.widget_config),{},{position:e.target.value})})),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500",children:[(0,Rs.jsx)("option",{value:"bottom-right",children:"Bottom Right"}),(0,Rs.jsx)("option",{value:"bottom-left",children:"Bottom Left"})]})]}),(0,Rs.jsxs)("div",{children:[(0,Rs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Button Text"}),(0,Rs.jsx)("input",{type:"text",value:d.widget_config.button_text,onChange:e=>u(t=>He(He({},t),{},{widget_config:He(He({},t.widget_config),{},{button_text:e.target.value})})),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500"})]})]}),(0,Rs.jsxs)("div",{children:[(0,Rs.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,Rs.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Embed Code"}),(0,Rs.jsx)("button",{onClick:()=>p(h),className:"inline-flex items-center text-sm text-primary-600 hover:text-primary-700",children:l?(0,Rs.jsxs)(Rs.Fragment,{children:[(0,Rs.jsx)(Mn,{className:"w-4 h-4 mr-1"}),"Copied!"]}):(0,Rs.jsxs)(Rs.Fragment,{children:[(0,Rs.jsx)(Rn,{className:"w-4 h-4 mr-1"}),"Copy"]})})]}),(0,Rs.jsx)("div",{className:"relative",children:(0,Rs.jsx)("pre",{className:"bg-gray-900 text-gray-100 p-4 rounded-lg overflow-x-auto text-xs",children:(0,Rs.jsx)("code",{children:h})})}),(0,Rs.jsx)("p",{className:"mt-2 text-xs text-gray-500",children:"Paste this code before the closing </body> tag of your website"})]})]})]}),(0,Rs.jsxs)("div",{className:"bg-white shadow rounded-lg overflow-hidden",children:[(0,Rs.jsx)("div",{className:"p-6 border-b border-gray-200",children:(0,Rs.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Rs.jsxs)("div",{className:"flex items-center",children:[(0,Rs.jsx)("div",{className:"flex-shrink-0",children:(0,Rs.jsx)(Zn,{className:"h-8 w-8 text-primary-600"})}),(0,Rs.jsxs)("div",{className:"ml-4",children:[(0,Rs.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Standalone Chat Page"}),(0,Rs.jsx)("p",{className:"text-sm text-gray-500",children:"Full-page OpenAI-style chat interface"})]})]}),(0,Rs.jsxs)("label",{className:"relative inline-flex items-center cursor-pointer",children:[(0,Rs.jsx)("input",{type:"checkbox",checked:d.chat_page_enabled,onChange:e=>u(t=>He(He({},t),{},{chat_page_enabled:e.target.checked})),className:"sr-only peer"}),(0,Rs.jsx)("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary-600"})]})]})}),d.chat_page_enabled&&(0,Rs.jsxs)("div",{className:"p-6 space-y-6",children:[(0,Rs.jsxs)("div",{children:[(0,Rs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Custom URL Slug (optional)"}),(0,Rs.jsxs)("div",{className:"flex rounded-md shadow-sm",children:[(0,Rs.jsxs)("span",{className:"inline-flex items-center px-3 rounded-l-md border border-r-0 border-gray-300 bg-gray-50 text-gray-500 text-sm",children:[window.location.origin,"/aiva/chat/"]}),(0,Rs.jsx)("input",{type:"text",value:d.chat_page_slug,onChange:e=>u(t=>He(He({},t),{},{chat_page_slug:e.target.value.toLowerCase().replace(/[^a-z0-9-]/g,"")})),placeholder:e,className:"flex-1 min-w-0 block w-full px-3 py-2 rounded-none rounded-r-md border-gray-300 focus:border-primary-500 focus:ring-primary-500"})]}),(0,Rs.jsx)("p",{className:"mt-1 text-xs text-gray-500",children:"Leave empty to use agent ID"})]}),(0,Rs.jsxs)("div",{children:[(0,Rs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Your Chat Page URL"}),(0,Rs.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Rs.jsx)("div",{className:"flex-1 bg-gray-50 border border-gray-300 rounded-md px-3 py-2 text-sm text-gray-700 font-mono",children:x}),(0,Rs.jsx)("button",{onClick:()=>p(x),className:"inline-flex items-center px-3 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50",children:(0,Rs.jsx)(Rn,{className:"w-4 h-4"})}),(0,Rs.jsx)("a",{href:x,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center px-3 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-primary-600 hover:bg-primary-700",children:(0,Rs.jsx)(fl,{className:"w-4 h-4"})})]})]}),(0,Rs.jsxs)("div",{children:[(0,Rs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Preview"}),(0,Rs.jsx)("div",{className:"border border-gray-300 rounded-lg overflow-hidden",children:(0,Rs.jsx)("iframe",{src:x,className:"w-full h-96",title:"Chat Preview"})})]})]})]})]}),(0,Rs.jsx)("div",{className:"flex justify-end",children:(0,Rs.jsx)("button",{onClick:async()=>{try{c(!0),await((e,t)=>Es.put("/agents/".concat(e,"/chat-integration"),t))(e,d),sr.success("Integration settings saved"),m()}catch(t){console.error("Save error:",t),sr.error("Failed to save settings")}finally{c(!1)}},disabled:o,className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700 disabled:opacity-50",children:o?"Saving...":"Save Settings"})})]})},Yl=e=>{var t,r,a,s,l,i,o,c,d,u,m,p,h,x,f;let{source:g,index:y}=e;const[v,b]=(0,n.useState)(!1);return(0,Rs.jsx)("div",{className:"bg-gray-50 rounded-lg overflow-hidden text-xs",children:(0,Rs.jsxs)("div",{className:"p-3",children:[(0,Rs.jsxs)("div",{className:"font-semibold text-gray-900 mb-2 flex items-start gap-2",children:[(0,Rs.jsx)("span",{className:"flex-shrink-0 w-5 h-5 rounded-full bg-primary-100 text-primary-700 flex items-center justify-center text-[10px] font-bold",children:y+1}),(0,Rs.jsx)("span",{className:"flex-1",children:(null===(t=g.source)||void 0===t||null===(r=t.metadata)||void 0===r?void 0:r.title)||(null===(a=g.metadata)||void 0===a?void 0:a.title)||"Document"})]}),console.log(g),(0,Rs.jsx)("div",{className:"text-gray-600 mb-2",style:{display:v?"block":"-webkit-box",WebkitLineClamp:v?"unset":2,WebkitBoxOrient:"vertical",overflow:"hidden"},children:g.content}),(g.page||g.relevance_score)&&(0,Rs.jsxs)("div",{className:"flex items-center gap-3 text-[10px] text-gray-500 mb-2",children:[g.page&&(0,Rs.jsxs)("span",{children:["\ud83d\udcc4 Page ",(null===(s=g.source)||void 0===s||null===(l=s.metadata)||void 0===l?void 0:l.page)||(null===(i=g.metadata)||void 0===i?void 0:i.page)||""]}),(null===(o=g.source)||void 0===o||null===(c=o.metadata)||void 0===c?void 0:c.relevance_score)||g.relevance_score&&(0,Rs.jsxs)("span",{children:["\ud83c\udfaf ",(100*((null===(d=g.source)||void 0===d?void 0:d.relevance_score)||g.relevance_score||g.score)).toFixed(0),"% match"]})]}),g.content&&g.content.length>150&&(0,Rs.jsx)("button",{onClick:()=>b(!v),className:"text-primary-600 hover:text-primary-700 font-medium inline-flex items-center gap-1",children:v?(0,Rs.jsxs)(Rs.Fragment,{children:["Show less",(0,Rs.jsx)("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Rs.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 15l7-7 7 7"})})]}):(0,Rs.jsxs)(Rs.Fragment,{children:["Show more",(0,Rs.jsx)("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Rs.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})}),(g.url||(null===(u=g.source)||void 0===u||null===(m=u.metadata)||void 0===m?void 0:m.source_url)||(null===g||void 0===g||null===(p=g.metadata)||void 0===p?void 0:p.source_url))&&(0,Rs.jsx)("div",{className:"mt-2 pt-2 border-t border-gray-200",children:(0,Rs.jsxs)("a",{href:g.url||(null===(h=g.source)||void 0===h||null===(x=h.metadata)||void 0===x?void 0:x.source_url)||(null===(f=g.metadata)||void 0===f?void 0:f.source_url),target:"_blank",rel:"noopener noreferrer",className:"text-primary-600 hover:text-primary-700 inline-flex items-center gap-1 font-medium",children:[(0,Rs.jsx)(fl,{className:"w-3 h-3"}),"View source"]})})]})})},Xl=()=>{const{agentId:e}=ae(),[t,r]=(0,n.useState)(null),[a,s]=(0,n.useState)(null),[l,i]=(0,n.useState)([]),[o,c]=(0,n.useState)(""),[d,u]=(0,n.useState)(!0),[m,p]=(0,n.useState)(!1),h=(0,n.useRef)(null),x=window.location.origin+"/aiva/api/public/chat";(0,n.useEffect)(()=>{f()},[e]),(0,n.useEffect)(()=>{v()},[l]);const f=async()=>{try{u(!0);const t=localStorage.getItem("aiva_chat_".concat(e));t&&(r(t),await g(t));const a=await Cs.get("".concat(x,"/agent/").concat(e,"/config"));if(a.data.success&&s(a.data.data),!t){const t=await Cs.post("".concat(x,"/init"),{agent_id:e,visitor_info:{url:window.location.href,referrer:document.referrer}});if(t.data.success){const a=t.data.data.session_id;r(a),localStorage.setItem("aiva_chat_".concat(e),a),t.data.data.agent.greeting&&i([{id:"greeting",role:"assistant",content:t.data.data.agent.greeting,created_at:(new Date).toISOString()}])}}}catch(t){console.error("Init error:",t)}finally{u(!1)}},g=async e=>{try{const t=await Cs.get("".concat(x,"/history/").concat(e));if(t.data.success){const e=t.data.data.messages.map(e=>({id:e.id,role:e.role,content:e.content,html:e.content_html,sources:e.sources||[],images:e.images||[],products:e.products||[],agent_transfer:e.agent_transfer_requested,created_at:e.created_at}));i(e)}}catch(t){console.error("Load history error:",t)}},y=async a=>{if(a.preventDefault(),!o.trim()||m)return;const s=o.trim();c(""),p(!0);const n={id:Date.now().toString(),role:"user",content:s,created_at:(new Date).toISOString()};i(e=>[...e,n]);try{const a=await Cs.post("".concat(x,"/message"),{session_id:t,agent_id:e,message:s});if(!a.data.success)throw new Error("Failed to send message");{const t=a.data.data;if(t.new_session_created){const a=t.session_id;r(a),localStorage.setItem("aiva_chat_".concat(e),a)}const s={id:t.message_id,role:"assistant",content:t.response.text||t.response,html:t.response.html,sources:t.sources||[],images:t.images||[],products:t.products||[],agent_transfer:t.agent_transfer,created_at:t.created_at};i(e=>[...e,s]),t.agent_transfer&&setTimeout(()=>{i(e=>[...e,{id:"transfer-"+Date.now(),role:"system",content:"\ud83e\udd1d Connecting you to a human agent...",created_at:(new Date).toISOString()}])},1e3)}}catch(l){console.error("Send message error:",l);const e={id:Date.now().toString(),role:"assistant",content:"Sorry, I encountered an error. Please try again.",created_at:(new Date).toISOString()};i(t=>[...t,e])}finally{p(!1)}},v=()=>{var e;null===(e=h.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})},b=e=>(0,Rs.jsxs)(Rs.Fragment,{children:[(0,Rs.jsx)("div",{className:"text-sm whitespace-pre-wrap",dangerouslySetInnerHTML:{__html:e.html||e.content}}),e.sources&&e.sources.length>0&&(0,Rs.jsxs)("div",{className:"mt-4 pt-4 border-t border-gray-200",children:[(0,Rs.jsxs)("div",{className:"text-xs font-semibold text-gray-600 mb-2",children:["\ud83d\udcda Sources (",e.sources.length,")"]}),(0,Rs.jsx)("div",{className:"space-y-2",children:e.sources.map((e,t)=>(0,Rs.jsx)(Yl,{source:e,index:t},t))})]}),e.products&&e.products.length>0&&(0,Rs.jsxs)("div",{className:"mt-4 pt-4 border-t border-gray-200",children:[(0,Rs.jsxs)("div",{className:"text-xs font-semibold text-gray-600 mb-3 flex items-center gap-1",children:[(0,Rs.jsx)(El,{className:"w-4 h-4"}),"Products (",e.products.length,")"]}),(0,Rs.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:e.products.map((e,t)=>(0,Rs.jsxs)("div",{className:"bg-gray-50 rounded-lg p-3 text-center hover:shadow-md transition-shadow",children:[e.image&&(0,Rs.jsx)("img",{src:e.image,alt:e.name,className:"w-full h-32 object-cover rounded-md mb-2"}),(0,Rs.jsx)("div",{className:"text-sm font-medium text-gray-900 mb-1 line-clamp-2",children:e.name}),(0,Rs.jsx)("div",{className:"text-sm font-semibold text-primary-600 mb-2",children:e.price}),e.purchase_url&&(0,Rs.jsx)("a",{href:e.purchase_url,target:"_blank",rel:"noopener noreferrer",className:"inline-block bg-primary-600 text-white text-xs px-3 py-1 rounded-md hover:bg-primary-700 transition-colors",children:"View Product"})]},t))})]}),e.images&&e.images.length>0&&(0,Rs.jsxs)("div",{className:"mt-4 pt-4 border-t border-gray-200",children:[(0,Rs.jsxs)("div",{className:"text-xs font-semibold text-gray-600 mb-3",children:["\ud83d\uddbc\ufe0f Images (",e.images.length,")"]}),(0,Rs.jsx)("div",{className:"grid grid-cols-2 gap-3",children:e.images.map((e,t)=>(0,Rs.jsxs)("div",{className:"rounded-lg overflow-hidden",children:[(0,Rs.jsx)("img",{src:e.url,alt:e.description||"Image",className:"w-full h-auto"}),e.description&&(0,Rs.jsx)("div",{className:"bg-gray-50 px-3 py-2 text-xs text-gray-600",children:e.description})]},t))})]})]});return d?(0,Rs.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,Rs.jsx)(Fn,{className:"w-8 h-8 animate-spin text-primary-600"})}):(0,Rs.jsxs)("div",{className:"flex flex-col h-screen bg-gray-50",children:[(0,Rs.jsx)("div",{className:"bg-white border-b border-gray-200 px-4 py-4 shadow-sm",children:(0,Rs.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,Rs.jsx)("h1",{className:"text-xl font-semibold text-gray-900",children:(null===a||void 0===a?void 0:a.name)||"AI Assistant"}),(0,Rs.jsx)("p",{className:"text-sm text-gray-500",children:"Powered by Intellicon AiVA"})]})}),(0,Rs.jsx)("div",{className:"flex-1 overflow-y-auto",children:(0,Rs.jsxs)("div",{className:"max-w-4xl mx-auto px-4 py-6 space-y-6",children:[0===l.length?(0,Rs.jsxs)("div",{className:"text-center py-12",children:[(0,Rs.jsx)("div",{className:"text-6xl mb-4",children:"\ud83d\udc4b"}),(0,Rs.jsx)("h2",{className:"text-2xl font-semibold text-gray-900 mb-2",children:"Hello! How can I help you today?"}),(0,Rs.jsx)("p",{className:"text-gray-500",children:"Ask me anything and I'll do my best to assist you."})]}):l.map(e=>(0,Rs.jsx)("div",{className:"flex ".concat("user"===e.role?"justify-end":"system"===e.role?"justify-center":"justify-start"),children:(0,Rs.jsx)("div",{className:"rounded-2xl px-4 py-3 ".concat("user"===e.role?"max-w-3xl bg-primary-600 text-white":"system"===e.role?"bg-yellow-50 text-yellow-800 border border-yellow-200 px-6":"max-w-3xl bg-white text-gray-900 shadow-sm border border-gray-200"),children:"system"===e.role?(0,Rs.jsx)("p",{className:"text-sm text-center",children:e.content}):b(e)})},e.id)),m&&(0,Rs.jsx)("div",{className:"flex justify-start",children:(0,Rs.jsx)("div",{className:"bg-white rounded-2xl px-4 py-3 shadow-sm border border-gray-200",children:(0,Rs.jsxs)("div",{className:"flex space-x-2",children:[(0,Rs.jsx)("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0ms"}}),(0,Rs.jsx)("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"150ms"}}),(0,Rs.jsx)("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"300ms"}})]})})}),(0,Rs.jsx)("div",{ref:h})]})}),(0,Rs.jsx)("div",{className:"bg-white border-t border-gray-200 px-4 py-4",children:(0,Rs.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,Rs.jsxs)("form",{onSubmit:y,className:"flex items-end space-x-3",children:[(0,Rs.jsx)("div",{className:"flex-1",children:(0,Rs.jsx)("textarea",{value:o,onChange:e=>c(e.target.value),onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),y(e))},placeholder:"Type your message...",rows:"1",className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent resize-none",style:{minHeight:"52px",maxHeight:"200px"}})}),(0,Rs.jsx)("button",{type:"submit",disabled:!o.trim()||m,className:"flex-shrink-0 bg-primary-600 text-white rounded-xl px-4 py-3 hover:bg-primary-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:(0,Rs.jsx)(Ln,{className:"w-5 h-5"})})]}),(0,Rs.jsx)("p",{className:"text-xs text-gray-500 text-center mt-2",children:"Press Enter to send, Shift+Enter for new line"})]})})]})},Zl=e=>{let{children:t}=e;const{user:r,loading:a}=Ls(),s=Z();return a?(0,Rs.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,Rs.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):r?t:(0,Rs.jsx)(ye,{to:"/login",replace:!0,state:{from:s}})};const ei=function(){return(0,Rs.jsx)(Ds,{children:(0,Rs.jsxs)(Ae,{basename:"/aiva",children:[(0,Rs.jsxs)(we,{children:[(0,Rs.jsx)(be,{path:"/login",element:(0,Rs.jsx)(Is,{})}),(0,Rs.jsx)(be,{path:"/chat/:agentId",element:(0,Rs.jsx)(Xl,{})}),(0,Rs.jsxs)(be,{path:"/",element:(0,Rs.jsx)(Zl,{children:(0,Rs.jsx)(Hn,{})}),children:[(0,Rs.jsx)(be,{index:!0,element:(0,Rs.jsx)(Ks,{})}),(0,Rs.jsx)(be,{path:"monitor",element:(0,Rs.jsx)(wn,{})}),(0,Rs.jsx)(be,{path:"agents",element:(0,Rs.jsx)(en,{})}),(0,Rs.jsx)(be,{path:"agents/test",element:(0,Rs.jsx)(Sn,{})}),(0,Rs.jsx)(be,{path:"agents/new",element:(0,Rs.jsx)(hn,{})}),(0,Rs.jsx)(be,{path:"agents/:id",element:(0,Rs.jsx)(hn,{})}),(0,Rs.jsx)(be,{path:"agents/:id/chat-integration",element:(0,Rs.jsx)(Gl,{})}),(0,Rs.jsx)(be,{path:"/agents/:id/conversation-strategy",element:(0,Rs.jsx)(Wl,{})}),(0,Rs.jsx)(be,{path:"credits",element:(0,Rs.jsx)(fn,{})}),(0,Rs.jsx)(be,{path:"calls",element:(0,Rs.jsx)(gn,{})}),(0,Rs.jsx)(be,{path:"/test",element:(0,Rs.jsx)(Sn,{})}),(0,Rs.jsx)(be,{path:"agent-test",element:(0,Rs.jsx)(Dn,{})}),(0,Rs.jsx)(be,{path:"knowledge",element:(0,Rs.jsx)(Qn,{})}),(0,Rs.jsx)(be,{path:"knowledge/new",element:(0,Rs.jsx)(Yn,{})}),(0,Rs.jsx)(be,{path:"knowledge/:id/edit",element:(0,Rs.jsx)(Yn,{})}),(0,Rs.jsx)(be,{path:"knowledge/:id/documents",element:(0,Rs.jsx)(cl,{})}),(0,Rs.jsx)(be,{path:"knowledge/:id/search",element:(0,Rs.jsx)(dl,{})}),(0,Rs.jsx)(be,{path:"knowledge/:id/stats",element:(0,Rs.jsx)(ml,{})}),(0,Rs.jsx)(be,{path:"knowledge/:id/chat",element:(0,Rs.jsx)(pl,{})}),(0,Rs.jsx)(be,{path:"shopify",element:(0,Rs.jsx)(Nl,{})}),(0,Rs.jsx)(be,{path:"shopify/connect",element:(0,Rs.jsx)(Sl,{})}),(0,Rs.jsx)(be,{path:"shopify/stores/:storeId",element:(0,Rs.jsx)(Il,{})}),(0,Rs.jsx)(be,{path:"shopify/products",element:(0,Rs.jsx)(Dl,{})}),(0,Rs.jsx)(be,{path:"/shopify/products/:id",element:(0,Rs.jsx)(Ul,{})}),(0,Rs.jsx)(be,{path:"users",element:(0,Rs.jsx)(Jl,{})})]})]}),(0,Rs.jsx)(ar,{position:"top-right"})]})})};i.createRoot(document.getElementById("root")).render((0,Rs.jsx)(n.StrictMode,{children:(0,Rs.jsx)(ei,{})}))})();
//# sourceMappingURL=main.703de60d.js.map